2024-03-13T17:38:32.8341832Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-13T17:38:32.8342741Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-13T17:38:32.8367192Z shell: /usr/bin/bash -e {0}
2024-03-13T17:38:32.8367601Z env:
2024-03-13T17:38:32.8368013Z   POSTGRES_HOST: localhost
2024-03-13T17:38:32.8368362Z   DATABASE_HOST: localhost
2024-03-13T17:38:32.8368748Z   PG_USERNAME: postgres
2024-03-13T17:38:32.8369180Z   PG_PASSWORD: password
2024-03-13T17:38:32.8369565Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-13T17:38:32.8369980Z   POSTGRES_PORT: 5432
2024-03-13T17:38:32.8370365Z   PGHOST: localhost
2024-03-13T17:38:32.8370721Z   PGUSER: postgres
2024-03-13T17:38:32.8371047Z   RAILS_ENV: test
2024-03-13T17:38:32.8371477Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-13T17:38:32.8371874Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-13T17:38:32.8372276Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-13T17:38:32.8372796Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-13T17:38:32.8373358Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-13T17:38:32.8374063Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-13T17:38:32.8374959Z   EVENTS_READ: true
2024-03-13T17:38:32.8375309Z ##[endgroup]
2024-03-13T17:38:38.4211804Z W, [2024-03-13T17:38:38.420742 #2329]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-13T17:38:38.4213779Z W, [2024-03-13T17:38:38.420791 #2329]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:38:38.4216568Z W, [2024-03-13T17:38:38.420806 #2329]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:38:38.4221965Z W, [2024-03-13T17:38:38.420826 #2329]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-13T17:38:41.0249171Z W, [2024-03-13T17:38:41.024627 #2329]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-13T17:38:41.0250787Z W, [2024-03-13T17:38:41.024667 #2329]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:38:41.0252585Z W, [2024-03-13T17:38:41.024681 #2329]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:38:41.0255520Z W, [2024-03-13T17:38:41.024726 #2329]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-13T17:38:41.0322758Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-03-13T17:38:49.5630439Z 
2024-03-13T17:38:49.5631274Z Randomized with seed 36449
2024-03-13T17:38:50.5342663Z 
2024-03-13T17:38:50.5343364Z Partners::Family
2024-03-13T17:38:50.5345153Z   versioning
2024-03-13T17:38:50.5620281Z     is expected to be versioned
2024-03-13T17:38:50.5621024Z   #create_authorized
2024-03-13T17:38:50.6004771Z     should include authorized family members
2024-03-13T17:38:50.6005593Z   #total_children_count
2024-03-13T17:38:50.6069649Z     should return the family's total children count
2024-03-13T17:38:50.6070499Z   validations
2024-03-13T17:38:50.6157266Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-13T17:38:50.6238722Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-13T17:38:50.6316556Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-13T17:38:50.6317697Z   associations
2024-03-13T17:38:50.6356415Z     is expected to have many authorized_family_members dependent => destroy
2024-03-13T17:38:50.6395788Z     is expected to belong to partner required: true
2024-03-13T17:38:50.6449947Z     is expected to have many children dependent => destroy
2024-03-13T17:38:50.6450976Z   #search_non_archived
2024-03-13T17:38:50.7335045Z     should return non-archived families if zero is passed in
2024-03-13T17:38:50.8232363Z     should return all families if one is passed in
2024-03-13T17:38:50.8233347Z   #guardian_display_name
2024-03-13T17:38:50.8286222Z     should return the guardian's first and last name
2024-03-13T17:38:50.8286827Z 
2024-03-13T17:38:50.8287685Z Item
2024-03-13T17:38:50.8288592Z   after update
2024-03-13T17:38:50.8289263Z     when item has the kit
2024-03-13T17:38:51.0460920Z       updates kit name
2024-03-13T17:38:51.0461534Z     when item does not have kit
2024-03-13T17:38:51.0602002Z       does not raise any errors
2024-03-13T17:38:51.0602597Z   Assocations >
2024-03-13T17:38:51.0649506Z     is expected to belong to item_category optional: true
2024-03-13T17:38:51.0650084Z   default_quantity
2024-03-13T17:38:51.0728277Z     should return the value of distribution_quantity if it is set
2024-03-13T17:38:51.0805654Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-13T17:38:51.0883590Z     should return 50 if column is not set
2024-03-13T17:38:51.0962495Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-13T17:38:51.0963149Z   Validations >
2024-03-13T17:38:51.1074269Z     requires that items quantity are not a negative number
2024-03-13T17:38:51.1199504Z     requires a unique name
2024-03-13T17:38:51.1244987Z     requires a Base Item base
2024-03-13T17:38:51.1296553Z     must belong to an organization
2024-03-13T17:38:51.1297645Z   Methods >
2024-03-13T17:38:51.1298219Z     barcoded_items >
2024-03-13T17:38:51.1927210Z       returns a collection of items that have barcodes associated with them
2024-03-13T17:38:51.1927889Z     storage_locations_containing
2024-03-13T17:38:51.2480723Z       retrieves all storage locations that contain an item
2024-03-13T17:38:51.2481694Z     has_history?
2024-03-13T17:38:51.3383082Z       identifies items that have been used previously
2024-03-13T17:38:51.3383944Z     #reactivate!
2024-03-13T17:38:51.3384653Z       given a single item id
2024-03-13T17:38:51.3536500Z         sets the active trait to true for that item
2024-03-13T17:38:51.3537460Z       given an array of item ids
2024-03-13T17:38:51.3755462Z         sets the active trait to true for all of them
2024-03-13T17:38:51.3756308Z     destroy
2024-03-13T17:38:51.5947762Z       deactivates the kit if it exists
2024-03-13T17:38:51.6189227Z       only hides an item that has history
2024-03-13T17:38:51.6364806Z       actually destroys an item that doesn't have history
2024-03-13T17:38:51.6365700Z     other?
2024-03-13T17:38:51.6490234Z       is true for items that are partner_key 'other'
2024-03-13T17:38:51.6491136Z     barcodes_for
2024-03-13T17:38:51.6681265Z       retrieves all BarcodeItems associated with an item
2024-03-13T17:38:51.6682214Z   Filtering >
2024-03-13T17:38:51.6945692Z     ->active shows items that are still active
2024-03-13T17:38:51.6993977Z     can filter
2024-03-13T17:38:51.7181030Z     ->alphabetized retrieves items in alphabetical order
2024-03-13T17:38:51.7397344Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-13T17:38:51.7398387Z     ->by_base_item
2024-03-13T17:38:51.9350096Z       can be chained to organization to constrain it to just 1 org's items
2024-03-13T17:38:51.9510004Z       shows the items for a particular base_item
2024-03-13T17:38:51.9511225Z     ->by_partner_key
2024-03-13T17:38:51.9661113Z       filters by partner key
2024-03-13T17:38:51.9662069Z     ->cloth_diapers
2024-03-13T17:38:51.9926108Z       returns records associated with disposable diapers
2024-03-13T17:38:51.9926952Z     ->disposable
2024-03-13T17:38:52.0194326Z       returns records associated with disposable diapers
2024-03-13T17:38:52.0195295Z   distribution_quantity and package size
2024-03-13T17:38:52.0320828Z     have nil values if an empty string is passed
2024-03-13T17:38:52.0321850Z   versioning
2024-03-13T17:38:52.0356299Z     is expected to be versioned
2024-03-13T17:38:52.0358245Z 
2024-03-13T17:38:52.0358907Z Organization
2024-03-13T17:38:52.0361475Z   .seed_items
2024-03-13T17:38:52.0362343Z     when no organization is provided
2024-03-13T17:38:52.6482436Z       updates all organizations
2024-03-13T17:38:52.6483358Z     when provided with an organization to seed
2024-03-13T17:38:52.9756887Z       loads the base items into Item records
2024-03-13T17:38:52.9759493Z   after_create
2024-03-13T17:38:53.0055259Z     should update the state of the account request
2024-03-13T17:38:53.0056592Z   validations
2024-03-13T17:38:53.0159417Z     validates that at least one distribution type is enabled
2024-03-13T17:38:53.0230808Z     validates that attachments are png or jpgs
2024-03-13T17:38:53.2021822Z     validates that short names are unique
2024-03-13T17:38:53.2094778Z     validates that attachment file size is not higher than 1 MB
2024-03-13T17:38:53.2095718Z   #short_name
2024-03-13T17:38:53.2164245Z     can only contain valid characters
2024-03-13T17:38:53.2164970Z   deadline_day
2024-03-13T17:38:53.2259936Z     can only contain numbers 1-28
2024-03-13T17:38:53.2260896Z   is_active
2024-03-13T17:38:53.5940275Z     returns active organizations
2024-03-13T17:38:53.5941045Z   from_email
2024-03-13T17:38:53.7852490Z     returns admin email when it's empty space
2024-03-13T17:38:53.9757999Z     returns admin email when it's empty
2024-03-13T17:38:54.1430599Z     returns email when present
2024-03-13T17:38:54.3286958Z     returns admin email when not present
2024-03-13T17:38:54.3288017Z   reminder_day
2024-03-13T17:38:54.3401337Z     can only contain numbers 1-28
2024-03-13T17:38:54.3402083Z   #assign_attributes_from_account_request
2024-03-13T17:38:54.3487104Z     should assign the proper attributes to the organization
2024-03-13T17:38:54.3487950Z   valid_items
2024-03-13T17:38:54.5315207Z     returns an array of item partner keys
2024-03-13T17:38:54.7146794Z     only shows active valid items
2024-03-13T17:38:54.7147597Z     with invisible items
2024-03-13T17:38:54.7432353Z       only shows active and visible items
2024-03-13T17:38:54.7433309Z   versioning
2024-03-13T17:38:54.7471407Z     is expected to be versioned
2024-03-13T17:38:54.7472163Z   earliest reporting year
2024-03-13T17:38:54.9267456Z     is the organization created year if no associated data
2024-03-13T17:38:55.1693443Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-13T17:38:55.1695069Z   total_inventory
2024-03-13T17:38:55.3384825Z     returns 0 if there is nothing
2024-03-13T17:38:55.5772921Z     returns a sum total of all inventory at all storage locations
2024-03-13T17:38:55.5774170Z   address
2024-03-13T17:38:55.5811378Z     does not add any separators before the city when street is missing
2024-03-13T17:38:55.5846349Z     does not add a trailing space when the zip code is missing
2024-03-13T17:38:55.5880220Z     returns an empty string when the org has no address components
2024-03-13T17:38:55.5915378Z     correctly formats an address string with commas and spaces
2024-03-13T17:38:55.5948803Z     does not add any separators after street when city, state, and zip are missing
2024-03-13T17:38:55.5949678Z   #ordered_requests
2024-03-13T17:38:55.7958640Z     puts active requests before fulfilled requests
2024-03-13T17:38:55.7959767Z     ordering of requests with matching status
2024-03-13T17:38:55.9830096Z       puts the most recently updated request before older requests
2024-03-13T17:38:55.9831252Z   default storage location
2024-03-13T17:38:55.9876158Z     associates the default storage location with a storage location
2024-03-13T17:38:55.9909452Z     returns nil when not set
2024-03-13T17:38:55.9910318Z   Associations >
2024-03-13T17:38:55.9946376Z     is expected to have many users through roles
2024-03-13T17:38:55.9991871Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-13T17:38:56.0039488Z     is expected to have many item_categories
2024-03-13T17:38:56.0040222Z     items
2024-03-13T17:38:56.0041028Z       .during.top
2024-03-13T17:38:57.9458748Z         return 3 most used items
2024-03-13T17:38:59.8863879Z         return just 3 elements
2024-03-13T17:38:59.8864587Z       .other
2024-03-13T17:39:01.8127199Z         returns all items for this organization designated 'other'
2024-03-13T17:39:01.8128302Z       .during.bottom
2024-03-13T17:39:03.7797346Z         return 3 least used items
2024-03-13T17:39:05.7309602Z         return just 3 elements
2024-03-13T17:39:05.7310782Z       .during
2024-03-13T17:39:07.6906361Z         return ranking of all items
2024-03-13T17:39:07.6907550Z     users
2024-03-13T17:39:07.6908198Z       when a organizaton has a user that has two roles
2024-03-13T17:39:07.8829432Z         should returns users without duplications
2024-03-13T17:39:07.8830322Z     barcode_items
2024-03-13T17:39:08.0722044Z       returns only this organization's barcodes, no globals
2024-03-13T17:39:08.0723248Z       .all
2024-03-13T17:39:08.2576611Z         includes global barcode items also
2024-03-13T17:39:08.2577337Z     distributions
2024-03-13T17:39:08.2578086Z       upcoming
2024-03-13T17:39:08.3548869Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-13T17:39:08.3550133Z   #seed_items
2024-03-13T17:39:08.5479023Z     allows a collection of items to be seeded
2024-03-13T17:39:08.7276953Z     allows a single base item to be seeded
2024-03-13T17:39:08.7278767Z     when given an item name that already exists, but with an 'other' partner key
2024-03-13T17:39:08.9161498Z       updates the old item to use the new base item as its base
2024-03-13T17:39:08.9162806Z     when given an item that already exists
2024-03-13T17:39:09.0949346Z       gracefully skips the item
2024-03-13T17:39:09.0950083Z   geocode
2024-03-13T17:39:09.2686772Z     adds coordinates to the database
2024-03-13T17:39:09.2687487Z 
2024-03-13T17:39:09.2687808Z ItemsInQuery
2024-03-13T17:39:09.2688808Z   items_in
2024-03-13T17:39:09.6185263Z     does not count transfers going in the negative direction
2024-03-13T17:39:09.8696832Z     returns a collection with the fields name, item_id, quantity
2024-03-13T17:39:10.1820046Z     does not count negative adjustments towards in-flow
2024-03-13T17:39:10.4348242Z     includes donations, purchases, adjustments, transfers among sources
2024-03-13T17:39:10.4349079Z 
2024-03-13T17:39:10.4349354Z PartnerGroup
2024-03-13T17:39:10.4350510Z   DB constraints
2024-03-13T17:39:10.4351457Z     reminder_day <= 28
2024-03-13T17:39:10.4489443Z       raises error if unmet
2024-03-13T17:39:10.4490364Z     send_reminders IS NOT NULL
2024-03-13T17:39:10.4563074Z       raises error if unmet
2024-03-13T17:39:10.4563814Z     deadline_day <= 28
2024-03-13T17:39:10.4638036Z       raises error if unmet
2024-03-13T17:39:10.4638688Z   Validations >
2024-03-13T17:39:10.4732728Z     requires a unique name within an organization
2024-03-13T17:39:10.4776756Z     must belong to an organization
2024-03-13T17:39:10.5017792Z     does not require a unique name between organizations
2024-03-13T17:39:10.5018710Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-13T17:39:10.5069668Z       should not be valid
2024-03-13T17:39:10.5070262Z   versioning
2024-03-13T17:39:10.5104828Z     is expected to be versioned
2024-03-13T17:39:10.5105631Z   associations
2024-03-13T17:39:10.5168065Z     is expected to have and belong to many item_categories
2024-03-13T17:39:10.5205462Z     is expected to have many partners
2024-03-13T17:39:10.5255599Z     is expected to belong to organization required: true
2024-03-13T17:39:10.5256396Z 
2024-03-13T17:39:10.5256628Z RemoveRoleService
2024-03-13T17:39:10.5257373Z   #call
2024-03-13T17:39:10.5258377Z     when the role does not exist
2024-03-13T17:39:10.7189373Z       should raise an error
2024-03-13T17:39:10.7190285Z     when not enough information provided
2024-03-13T17:39:10.9131018Z       should raise an error
2024-03-13T17:39:10.9131781Z     when the role exists
2024-03-13T17:39:11.1143646Z       should remove the admin role when removing user role
2024-03-13T17:39:11.3054802Z       should work with a type and ID instead of role ID
2024-03-13T17:39:11.4965952Z       should remove the role
2024-03-13T17:39:11.4966863Z 
2024-03-13T17:39:11.4967410Z AccountRequestsController
2024-03-13T17:39:11.4968235Z   routing
2024-03-13T17:39:11.5010741Z     routes to #create
2024-03-13T17:39:11.5048500Z     routes to #new
2024-03-13T17:39:11.5049435Z 
2024-03-13T17:39:11.5049629Z Kit
2024-03-13T17:39:11.7011270Z   deactivate and reactivate
2024-03-13T17:39:11.7012008Z   versioning
2024-03-13T17:39:11.7048634Z     is expected to be versioned
2024-03-13T17:39:11.7049353Z   Validations >
2024-03-13T17:39:11.7209869Z     requires at least one item
2024-03-13T17:39:11.7375179Z     can't have negative value
2024-03-13T17:39:11.7528935Z     requires a name
2024-03-13T17:39:11.9447288Z     requires a unique name
2024-03-13T17:39:11.9664447Z     must belong to an organization
2024-03-13T17:39:11.9836515Z     is valid as built
2024-03-13T17:39:11.9837189Z   Value >
2024-03-13T17:39:11.9995730Z     converts dollars to cents
2024-03-13T17:39:12.0156624Z     converts cents to dollars
2024-03-13T17:39:12.0157149Z     .value_per_itemizable
2024-03-13T17:39:12.0561381Z       calculates values from associated items
2024-03-13T17:39:12.0562167Z   Filtering >
2024-03-13T17:39:12.6113490Z     ->alphabetized retrieves items in alphabetical order
2024-03-13T17:39:12.6150278Z     can filter
2024-03-13T17:39:12.6150998Z     ->by_partner_key
2024-03-13T17:39:12.8454427Z       shows the kits for a particular item
2024-03-13T17:39:12.8456293Z   #can_deactivate?
2024-03-13T17:39:12.8456995Z     without inventory items
2024-03-13T17:39:13.0351381Z       should return true
2024-03-13T17:39:13.0352151Z     with inventory items
2024-03-13T17:39:13.2964463Z       should return false
2024-03-13T17:39:13.2965382Z 
2024-03-13T17:39:13.2965620Z TransfersController
2024-03-13T17:39:13.2974363Z   While not signed in
2024-03-13T17:39:13.3328732Z     redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:13.3329732Z   While signed in
2024-03-13T17:39:13.3330274Z     GET #show
2024-03-13T17:39:13.4134380Z       returns http success
2024-03-13T17:39:13.4135209Z     GET #new
2024-03-13T17:39:13.4353037Z       returns http success
2024-03-13T17:39:13.4353780Z     POST #create
2024-03-13T17:39:13.4663159Z       renders to #new when failing
2024-03-13T17:39:13.5253235Z       redirects to #show when successful
2024-03-13T17:39:13.5256737Z     GET #index
2024-03-13T17:39:13.5486764Z       returns http success
2024-03-13T17:39:13.5487719Z       when filtering by date
2024-03-13T17:39:13.5488482Z         when date parameters are supplied
2024-03-13T17:39:13.5997283Z           only returns the correct obejects
2024-03-13T17:39:13.5998433Z         when date parameters are not supplied
2024-03-13T17:39:13.6371041Z           returns all objects
2024-03-13T17:39:13.6371765Z     Looking at a different organization
2024-03-13T17:39:13.8271942Z       redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:13.8272704Z 
2024-03-13T17:39:13.8273065Z Reports::OtherProductsReportService
2024-03-13T17:39:13.8273986Z   #report
2024-03-13T17:39:14.4416776Z     should report normal values
2024-03-13T17:39:14.6190078Z     should report zero values
2024-03-13T17:39:14.6190874Z 
2024-03-13T17:39:14.6191160Z ProductDriveParticipant
2024-03-13T17:39:14.6192784Z   Validations
2024-03-13T17:39:14.6317630Z     is invalid unless it has either a phone number or an email
2024-03-13T17:39:14.6355746Z     is invalid without an organization
2024-03-13T17:39:14.6356278Z   Methods
2024-03-13T17:39:14.6357131Z     volume_by_product_drive
2024-03-13T17:39:14.7793060Z       retrieves the amount of product that has been donated through specific product drive
2024-03-13T17:39:14.7794175Z     donation_source_view
2024-03-13T17:39:14.7794762Z       no contact name
2024-03-13T17:39:14.7854138Z         is expected to be nil
2024-03-13T17:39:14.7854653Z       contact name present
2024-03-13T17:39:14.7910675Z         is expected to eq "Contact Name (participant)"
2024-03-13T17:39:14.7911436Z     volume
2024-03-13T17:39:14.8551896Z       retrieves the amount of product that has been donated by participant
2024-03-13T17:39:14.8552565Z   versioning
2024-03-13T17:39:14.8588274Z     is expected to be versioned
2024-03-13T17:39:14.8588843Z   behaves like provideable
2024-03-13T17:39:14.8589836Z     geocode
2024-03-13T17:39:14.8646976Z       adds coordinates to the database
2024-03-13T17:39:14.8647705Z     Validations
2024-03-13T17:39:14.8684354Z       is invalid without an organization
2024-03-13T17:39:14.8743189Z       is invalid unless it has either a contact name or a business name
2024-03-13T17:39:14.8743784Z     import_csv
2024-03-13T17:39:15.0638455Z       imports from a csv file
2024-03-13T17:39:15.0639025Z 
2024-03-13T17:39:15.0639314Z RequestsTotalItemsService
2024-03-13T17:39:15.0639932Z   #calculate
2024-03-13T17:39:15.0641317Z     when the request items is not blank
2024-03-13T17:39:15.0793866Z       return items with correct quantities calculated
2024-03-13T17:39:15.0927990Z       return the names of items correctly
2024-03-13T17:39:15.0928974Z     when provided requests is nil
2024-03-13T17:39:15.0965128Z       is expected to be blank
2024-03-13T17:39:15.0965986Z     when provided with requests that have no request items
2024-03-13T17:39:15.1043723Z       is expected to be blank
2024-03-13T17:39:15.1044473Z     when item name is nil
2024-03-13T17:39:15.1160741Z       return Unknown Item
2024-03-13T17:39:15.1161583Z 
2024-03-13T17:39:15.1161973Z Partners::AuthorizedFamilyMember
2024-03-13T17:39:15.1163447Z   #display_name
2024-03-13T17:39:15.1436584Z     should return the family member's first and last name
2024-03-13T17:39:15.1437666Z   associations
2024-03-13T17:39:15.1492589Z     is expected to have many child_item_requests dependent => nullify
2024-03-13T17:39:15.1534646Z     is expected to belong to family required: true
2024-03-13T17:39:15.1535537Z   versioning
2024-03-13T17:39:15.1570789Z     is expected to be versioned
2024-03-13T17:39:15.1571270Z 
2024-03-13T17:39:15.1571746Z DonationCreateService
2024-03-13T17:39:15.1572552Z   #call
2024-03-13T17:39:15.1781826Z     should create the donation
2024-03-13T17:39:15.1782493Z 
2024-03-13T17:39:15.1782743Z CalendarService
2024-03-13T17:39:15.5120120Z   #time_zones
2024-03-13T17:39:15.5121052Z   .calendar
2024-03-13T17:39:15.5722423Z     should print the calendar correctly
2024-03-13T17:39:15.5723247Z 
2024-03-13T17:39:15.5723502Z HelpController
2024-03-13T17:39:15.5724472Z   While signed in as a normal user >
2024-03-13T17:39:15.5725299Z     GET #show
2024-03-13T17:39:15.5872369Z       returns http success
2024-03-13T17:39:15.5958154Z       does not display help page when the user logs out
2024-03-13T17:39:15.5959089Z 
2024-03-13T17:39:15.5959374Z PartnerApprovalService
2024-03-13T17:39:15.5960452Z   #call
2024-03-13T17:39:15.5961619Z     when the arguments are correct
2024-03-13T17:39:15.6253020Z       should have no errors
2024-03-13T17:39:15.6548197Z       should send an email notification to the partner
2024-03-13T17:39:15.6848830Z       should change the partner status to approved
2024-03-13T17:39:15.6850004Z       but a unexpected error occured during the save
2024-03-13T17:39:15.6850859Z         for partner approval
2024-03-13T17:39:15.7114422Z           should not change the partner status to approved
2024-03-13T17:39:15.7363092Z           should not send an email notification to the partner
2024-03-13T17:39:15.7612469Z           should have an error with the raised error
2024-03-13T17:39:15.7613228Z     when the arguments are incorrect
2024-03-13T17:39:15.7614161Z       because the partner is not approvable
2024-03-13T17:39:15.7858803Z         should return the PartnerApprovalService object with an error
2024-03-13T17:39:15.7859841Z 
2024-03-13T17:39:15.7860026Z UsersRole
2024-03-13T17:39:15.7861120Z   versioning
2024-03-13T17:39:15.7895496Z     is expected to be versioned
2024-03-13T17:39:15.7895939Z   #current_role_for
2024-03-13T17:39:15.7897183Z     for org admin
2024-03-13T17:39:15.8094826Z       should return org admin
2024-03-13T17:39:15.8095389Z     for org user
2024-03-13T17:39:15.8218479Z       should return org user
2024-03-13T17:39:15.8218924Z     for partner user
2024-03-13T17:39:15.8347010Z       should return partner user
2024-03-13T17:39:15.8347482Z     for super admin
2024-03-13T17:39:15.8507658Z       should return super admin
2024-03-13T17:39:15.8508431Z 
2024-03-13T17:39:15.8508618Z RequestMailer
2024-03-13T17:39:15.8509741Z   #request_cancel_partner_notification
2024-03-13T17:39:15.8688252Z     should be sent to the partner main email with the correct subject line
2024-03-13T17:39:15.8819716Z     renders the body with correct text with partner information
2024-03-13T17:39:15.8820581Z 
2024-03-13T17:39:15.8821183Z DistributionCreateService
2024-03-13T17:39:15.8821959Z   call
2024-03-13T17:39:15.9600136Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-13T17:39:16.0305011Z     returns a successful object with Scheduled distribution
2024-03-13T17:39:16.0306088Z     when the line item quantity is not positive
2024-03-13T17:39:16.0805871Z       preserves the RecordInvalid error and is unsuccessful
2024-03-13T17:39:16.0806941Z     when there's not sufficient inventory
2024-03-13T17:39:16.1412068Z       preserves the Insufficiency error and is unsuccessful
2024-03-13T17:39:16.1413131Z     when there's multiple line items and one has insufficient inventory
2024-03-13T17:39:16.2041490Z       preserves the Insufficiency error and is unsuccessful
2024-03-13T17:39:16.2042540Z     partner has send reminders setting set to true
2024-03-13T17:39:16.3980102Z       Sends a PartnerMailer
2024-03-13T17:39:16.3981030Z     partner has send reminders setting set to false
2024-03-13T17:39:16.4736272Z       does not send a PartnerMailer
2024-03-13T17:39:16.4737105Z     partner is deactivated
2024-03-13T17:39:16.5509764Z       does not send an email
2024-03-13T17:39:16.5510588Z     when it fails to save
2024-03-13T17:39:16.6036199Z       preserves the error and is unsuccessful
2024-03-13T17:39:16.6037660Z     when provided with a request ID
2024-03-13T17:39:16.6890311Z       changes the status of the request
2024-03-13T17:39:16.6890994Z       and the request already has a distribution associated with it
2024-03-13T17:39:16.7604161Z         should not be successful
2024-03-13T17:39:16.7604918Z 
2024-03-13T17:39:16.7605427Z Reports::PeriodSupplyReportService
2024-03-13T17:39:16.7606140Z   #report
2024-03-13T17:39:16.9433070Z     should report zero values
2024-03-13T17:39:16.9433814Z     with values
2024-03-13T17:39:17.5647673Z       should report normal values
2024-03-13T17:39:17.5648263Z 
2024-03-13T17:39:17.5648476Z Manufacturer
2024-03-13T17:39:17.5650058Z   versioning
2024-03-13T17:39:17.5725971Z     is expected to be versioned
2024-03-13T17:39:17.5726785Z   Methods
2024-03-13T17:39:17.5727532Z     volume
2024-03-13T17:39:17.7156589Z       ignores the amount of product from other manufacturers
2024-03-13T17:39:17.8488438Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-13T17:39:17.9129245Z       retrieves the amount of product that has been donated by manufacturer
2024-03-13T17:39:17.9129987Z   Validations
2024-03-13T17:39:17.9225062Z     must have a unique name within organization
2024-03-13T17:39:18.0977300Z     must belong to an organization
2024-03-13T17:39:18.0978197Z   Private Methods
2024-03-13T17:39:18.0979065Z     #exists_in_org?
2024-03-13T17:39:18.2737479Z       returns true if manufacturer exists in an organization
2024-03-13T17:39:18.2738232Z 
2024-03-13T17:39:18.2738802Z DistributionItemizedBreakdownService
2024-03-13T17:39:18.2739611Z   #fetch_csv
2024-03-13T17:39:18.6644555Z     should output the expected output but in CSV format
2024-03-13T17:39:18.6645171Z   #fetch
2024-03-13T17:39:19.0474082Z     should include the break down of items distributed with onhand data
2024-03-13T17:39:19.0475231Z 
2024-03-13T17:39:19.0475461Z User
2024-03-13T17:39:19.0475959Z   #role_added
2024-03-13T17:39:19.0853906Z     renders the body correctly
2024-03-13T17:39:19.0854675Z   #send_reset_password_instructions
2024-03-13T17:39:19.0855265Z     user gets an email with instructions
2024-03-13T17:39:19.1773987Z       sends an email with instructions
2024-03-13T17:39:19.1774648Z 
2024-03-13T17:39:19.1774867Z SyncNDBNMembers
2024-03-13T17:39:19.1775653Z   .sync
2024-03-13T17:39:19.1777338Z     when the HTTP request is successful
2024-03-13T17:39:19.1778573Z       when the account name of a NDBN Member has changed
2024-03-13T17:39:19.2152161Z         should update the account name of the corresponding NDBN Member
2024-03-13T17:39:19.2153077Z       when there are no exisiting NDBN Member records
2024-03-13T17:39:19.2252102Z         should create the NDBN Member records
2024-03-13T17:39:19.2254386Z       when no new NDBN Member has been added
2024-03-13T17:39:19.2376342Z         should not add any new NDBN Members
2024-03-13T17:39:19.2377268Z     when the HTTP request does not get a response of 200
2024-03-13T17:39:19.2420021Z       should raise an error regarding the response code
2024-03-13T17:39:19.2420754Z 
2024-03-13T17:39:19.2421008Z NotifyPartnerJob
2024-03-13T17:39:19.2421692Z   #perform
2024-03-13T17:39:19.2534767Z     is expected to call RequestsConfirmationMailer
2024-03-13T17:39:19.2577083Z     avoids exception when request doesn't exist
2024-03-13T17:39:19.2577940Z     when the request's partner is deactivated
2024-03-13T17:39:19.2856440Z       does not send the confirmation email
2024-03-13T17:39:19.2857322Z 
2024-03-13T17:39:19.2857587Z DonationSitesController
2024-03-13T17:39:19.2858834Z   While not signed in
2024-03-13T17:39:19.2974992Z     redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:19.2975865Z   While signed in
2024-03-13T17:39:19.2976911Z     POST #import_csv
2024-03-13T17:39:19.2977730Z       behaves like csv import
2024-03-13T17:39:19.2978863Z         csv file with wrong headers
2024-03-13T17:39:19.3117686Z           redirects to :index
2024-03-13T17:39:19.3223814Z           presents a flash error message
2024-03-13T17:39:19.3224372Z         without a csv file
2024-03-13T17:39:19.3318041Z           redirects to :index
2024-03-13T17:39:19.3412992Z           presents a flash error message
2024-03-13T17:39:19.3413819Z         with a csv file
2024-03-13T17:39:19.3544189Z           presents a flash notice message
2024-03-13T17:39:19.3580097Z           invokes .import_csv
2024-03-13T17:39:19.3701556Z           redirects to :index
2024-03-13T17:39:19.3702440Z     GET #edit
2024-03-13T17:39:19.3843004Z       returns http success
2024-03-13T17:39:19.3843649Z     Looking at a different organization
2024-03-13T17:39:19.5545278Z       redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:19.5546423Z     GET #index
2024-03-13T17:39:19.5661340Z       returns http success
2024-03-13T17:39:19.5662011Z     GET #new
2024-03-13T17:39:19.5768323Z       returns http success
2024-03-13T17:39:19.5769039Z     DELETE #destroy
2024-03-13T17:39:19.5913626Z       returns http success
2024-03-13T17:39:19.5914479Z     GET #show
2024-03-13T17:39:19.6040159Z       returns http success
2024-03-13T17:39:19.6041469Z 
2024-03-13T17:39:19.6171150Z AccountRequest
2024-03-13T17:39:19.6171518Z   #confirm!
2024-03-13T17:39:19.6292003Z   #reject!
2024-03-13T17:39:19.6293160Z   associations
2024-03-13T17:39:19.6329609Z     is expected to have one organization class_name => Organization
2024-03-13T17:39:19.6387229Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-13T17:39:19.6388451Z   .get_by_identity_token
2024-03-13T17:39:19.6389413Z     when the identity_token corresponds to an existing AccountRequest
2024-03-13T17:39:19.6477066Z       should return the corresponding AccountRequest
2024-03-13T17:39:19.6478377Z     when the identity_token provided does not match any AccountRequest
2024-03-13T17:39:19.6511681Z       should return nil
2024-03-13T17:39:19.6512325Z   validations
2024-03-13T17:39:19.6632710Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-13T17:39:19.6752401Z     is expected to validate that the length of :request_details is at least 50
2024-03-13T17:39:19.6883929Z     is expected to validate that :email is case-sensitively unique
2024-03-13T17:39:19.6983178Z     is expected to allow :email to be â€¹"barton@carter-blanda.example"â€º
2024-03-13T17:39:19.7082208Z     is expected not to allow :email to be â€¹"not_email"â€º
2024-03-13T17:39:19.7222477Z     is expected to validate that :email cannot be empty/falsy
2024-03-13T17:39:19.7352840Z     is expected to validate that :name cannot be empty/falsy
2024-03-13T17:39:19.7353857Z     when the email provided is already used by an existing organization
2024-03-13T17:39:19.9260063Z       should not allow the email
2024-03-13T17:39:19.9261158Z     when the email provided is already used by an existing user
2024-03-13T17:39:19.9465071Z       should not allow the email
2024-03-13T17:39:19.9465757Z   #identity_token
2024-03-13T17:39:19.9555395Z     should return a JWT token that contains the id of the account_request_id
2024-03-13T17:39:19.9556300Z     when the account_request is not persisted
2024-03-13T17:39:19.9640346Z       should raise an error
2024-03-13T17:39:19.9641113Z   #processed?
2024-03-13T17:39:19.9641912Z     when the account request has no associated organization
2024-03-13T17:39:19.9734778Z       should return false
2024-03-13T17:39:19.9735736Z     when the account request has a associated organization
2024-03-13T17:39:20.1608108Z       should return true
2024-03-13T17:39:20.1609095Z   versioning
2024-03-13T17:39:20.1653392Z     is expected to be versioned
2024-03-13T17:39:20.1654115Z 
2024-03-13T17:39:20.1654379Z ItemCreateService
2024-03-13T17:39:20.1655497Z   #call
2024-03-13T17:39:20.1656928Z     when an issue occurs in transaction
2024-03-13T17:39:20.1658220Z       because the organization_id does not match any Organization
2024-03-13T17:39:20.3444343Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-13T17:39:20.3445429Z       because the item create raised an error
2024-03-13T17:39:20.5161297Z         should return a OpenStruct with the raised error
2024-03-13T17:39:20.5162397Z       because a inventory item creation failed and raised an error
2024-03-13T17:39:20.6937311Z         should return a OpenStruct with the raised error
2024-03-13T17:39:20.6938279Z     when there are no issues
2024-03-13T17:39:20.8638897Z       should execute the expected methods
2024-03-13T17:39:21.0382748Z       should return an OpenStruct with success? set to true and the item
2024-03-13T17:39:21.0383629Z 
2024-03-13T17:39:21.0383820Z UiHelper
2024-03-13T17:39:21.0386099Z   optional_data_text
2024-03-13T17:39:21.0386904Z     when the field provided is not blank
2024-03-13T17:39:21.0440060Z       should return the content
2024-03-13T17:39:21.0441018Z     when the field provided is blank
2024-03-13T17:39:21.0485354Z       should return the text Not-Provided in gray text
2024-03-13T17:39:21.0487638Z 
2024-03-13T17:39:21.0487993Z Donation
2024-03-13T17:39:21.0489609Z   Associations >
2024-03-13T17:39:21.0490434Z     items >
2024-03-13T17:39:21.0708854Z       has_many
2024-03-13T17:39:21.0709456Z   SOURCES
2024-03-13T17:39:21.0744537Z     the hash is immutable
2024-03-13T17:39:21.0781167Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-13T17:39:21.0816496Z     the hash values are immutable
2024-03-13T17:39:21.0817248Z   Validations >
2024-03-13T17:39:21.0885175Z     requires a source from the list of available sources
2024-03-13T17:39:21.1032481Z     is invalid when the line items are invalid
2024-03-13T17:39:21.1165873Z     requires a product drive participant if the source is 'Product Drive'
2024-03-13T17:39:21.1285395Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-13T17:39:21.1328149Z     must belong to an organization
2024-03-13T17:39:21.1377378Z     ensures that the issued at is no earlier than 2000
2024-03-13T17:39:21.1484556Z     requires a donation_site if the source is 'Donation Site'
2024-03-13T17:39:21.1525649Z     requires an inventory (storage location)
2024-03-13T17:39:21.1526406Z   versioning
2024-03-13T17:39:21.1561377Z     is expected to be versioned
2024-03-13T17:39:21.1561869Z   Callbacks >
2024-03-13T17:39:21.1684921Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-13T17:39:21.1833309Z     automatically combines duplicate line_item records when they're created
2024-03-13T17:39:21.1834331Z   Methods >
2024-03-13T17:39:21.1834766Z     source_view
2024-03-13T17:39:21.1835241Z       details
2024-03-13T17:39:21.1836282Z         manufacturer
2024-03-13T17:39:21.1943483Z           returns manufacturer name
2024-03-13T17:39:21.1943963Z         product drive
2024-03-13T17:39:21.2040955Z           returns product_drive name
2024-03-13T17:39:21.2041620Z         donation site
2024-03-13T17:39:21.2142257Z           returns donation_site name
2024-03-13T17:39:21.2143017Z         misc
2024-03-13T17:39:21.2224162Z           returns a truncated comment
2024-03-13T17:39:21.2224941Z       from a drive
2024-03-13T17:39:21.2225505Z         unknown participant
2024-03-13T17:39:21.2325425Z           returns drive display name
2024-03-13T17:39:21.2326251Z         participant known
2024-03-13T17:39:21.2327088Z           contact name present
2024-03-13T17:39:21.2447958Z             returns participant display name
2024-03-13T17:39:21.2448787Z           no contact name
2024-03-13T17:39:21.2570750Z             returns drive display name
2024-03-13T17:39:21.2571478Z       not from a drive
2024-03-13T17:39:21.2675730Z         returns source
2024-03-13T17:39:21.2676780Z     money_raised
2024-03-13T17:39:21.3264272Z       tracks the money raised in a donation
2024-03-13T17:39:21.3264905Z     remove
2024-03-13T17:39:21.3888818Z       removes the item from the donation
2024-03-13T17:39:21.4477054Z       works with either an id or an object
2024-03-13T17:39:21.5132506Z       fails gracefully if the item doesn't exist
2024-03-13T17:39:21.5133370Z   behaves like itemizable
2024-03-13T17:39:21.5134200Z     .to_a
2024-03-13T17:39:21.5134809Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:21.5467775Z         raises an error
2024-03-13T17:39:21.5468723Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:21.5812155Z         calls line_item_values
2024-03-13T17:39:21.5812986Z     .line_items
2024-03-13T17:39:21.5813746Z       quantities_by_name
2024-03-13T17:39:21.6157838Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:21.6503897Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:21.6504796Z       combine!
2024-03-13T17:39:21.6952914Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:21.7337288Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:21.7338355Z       sorted
2024-03-13T17:39:21.7822609Z         displays the items, sorted by name
2024-03-13T17:39:21.7823491Z       total
2024-03-13T17:39:21.8154557Z         has an item total
2024-03-13T17:39:21.8155333Z   Scopes >
2024-03-13T17:39:21.8156402Z     during >
2024-03-13T17:39:21.8335263Z       returns all donations created between two dates
2024-03-13T17:39:21.8336583Z     by_source >
2024-03-13T17:39:21.8337228Z       when source is a symbol
2024-03-13T17:39:21.8337857Z         when source is valid
2024-03-13T17:39:21.8509885Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-13T17:39:21.8510760Z         when source is invalid
2024-03-13T17:39:21.8688285Z           does not throw errors, returns no results
2024-03-13T17:39:21.8689106Z       when source is not a symbol
2024-03-13T17:39:21.8689781Z         when source is invalid
2024-03-13T17:39:21.8864422Z           does not throw errors, returns no results
2024-03-13T17:39:21.8865228Z         when source comes from the SOURCES hash
2024-03-13T17:39:21.9025706Z           returns all donations with the provided source
2024-03-13T17:39:21.9026601Z 
2024-03-13T17:39:21.9026834Z AdjustmentCreateService
2024-03-13T17:39:21.9027699Z   call
2024-03-13T17:39:21.9578429Z     gives an error if we attempt to adjust inventory below 0
2024-03-13T17:39:22.0195805Z     does not allow inventory to be adjusted below 0
2024-03-13T17:39:22.1010196Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-13T17:39:22.1808325Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-13T17:39:22.2777519Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-13T17:39:22.3642869Z     handles adjustments to multiple items
2024-03-13T17:39:22.4536787Z     decreases stored inventory on a negative adjustment
2024-03-13T17:39:22.5371732Z     increases stored inventory on a positive adjustment
2024-03-13T17:39:22.6301068Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-13T17:39:22.6301950Z 
2024-03-13T17:39:22.6302152Z PartnerMailer
2024-03-13T17:39:22.6302676Z   #application_approved
2024-03-13T17:39:22.6592721Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-13T17:39:22.6842286Z     should be sent to the partner main email with the correct subject line
2024-03-13T17:39:22.6843100Z   #recertification_request
2024-03-13T17:39:22.7076966Z     should be sent to the partner main email with the correct subject line
2024-03-13T17:39:22.7300719Z     renders the body with text that indicates to recertify and link to where
2024-03-13T17:39:22.7301926Z 
2024-03-13T17:39:22.7302196Z Partners::UpdateFamily
2024-03-13T17:39:22.7305011Z   #call
2024-03-13T17:39:22.7306318Z     when family has children
2024-03-13T17:39:22.7767382Z       archives the family and its children
2024-03-13T17:39:22.7768493Z     when an error occurs during archiving
2024-03-13T17:39:22.8123537Z       does not archive the family or its children and adds error to the service
2024-03-13T17:39:22.8124392Z 
2024-03-13T17:39:22.8124833Z DistributionUpdateService
2024-03-13T17:39:22.8125564Z   resend_notification?
2024-03-13T17:39:22.9026028Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-13T17:39:22.9982225Z     changes any distribution content, resulting in resend_notification? = true
2024-03-13T17:39:23.0864998Z     changes the issue_date, resulting in resend_notification? = true
2024-03-13T17:39:23.0866306Z   call
2024-03-13T17:39:23.1832068Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-13T17:39:23.1833156Z 
2024-03-13T17:39:23.1833666Z Audit
2024-03-13T17:39:23.1834473Z   Scopes >
2024-03-13T17:39:23.2320507Z     `at_location` can filter out audits to a specific location
2024-03-13T17:39:23.2321539Z   behaves like itemizable
2024-03-13T17:39:23.2322089Z     .line_items
2024-03-13T17:39:23.2322664Z       total
2024-03-13T17:39:23.3101384Z         has an item total
2024-03-13T17:39:23.3102123Z       quantities_by_name
2024-03-13T17:39:23.3960739Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:23.4777787Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:23.4778655Z       combine!
2024-03-13T17:39:23.5147103Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:23.5689343Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:23.5690408Z       sorted
2024-03-13T17:39:23.6789141Z         displays the items, sorted by name
2024-03-13T17:39:23.6789877Z     .to_a
2024-03-13T17:39:23.6790668Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:23.7280293Z         raises an error
2024-03-13T17:39:23.7281068Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:23.7782676Z         calls line_item_values
2024-03-13T17:39:23.7783371Z   Methods >
2024-03-13T17:39:24.0181447Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-13T17:39:24.3416155Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-13T17:39:24.3417678Z   Validations >
2024-03-13T17:39:24.3956854Z     can not have line items that has quantity as negative integer
2024-03-13T17:39:24.4505152Z     can have line items that has quantity as a positive integer
2024-03-13T17:39:24.5059367Z     can have line items that has quantity as zero
2024-03-13T17:39:24.5159551Z     must belong to an organization admin of its organization
2024-03-13T17:39:24.5751369Z     cannot have duplicate line items
2024-03-13T17:39:24.6321520Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-13T17:39:24.6614570Z     must belong to an organization
2024-03-13T17:39:24.6615259Z   versioning
2024-03-13T17:39:24.6652345Z     is expected to be versioned
2024-03-13T17:39:24.6652933Z 
2024-03-13T17:39:24.6653264Z Reports::AdultIncontinenceReportService
2024-03-13T17:39:24.6654151Z   #report
2024-03-13T17:39:24.8466681Z     should report zero values
2024-03-13T17:39:24.8467326Z     with values
2024-03-13T17:39:25.4660183Z       should handle null distribution quantity
2024-03-13T17:39:26.0918178Z       should report normal values
2024-03-13T17:39:26.0918751Z 
2024-03-13T17:39:26.0919075Z PartnerFetchRequestableItemsService
2024-03-13T17:39:26.0919746Z   #call
2024-03-13T17:39:26.1047767Z     raises an error indiciating the partner does not exist with invalid id
2024-03-13T17:39:26.1048791Z     when the partner is not in any partner group
2024-03-13T17:39:26.1350933Z       is expected to be nil
2024-03-13T17:39:26.1351818Z       when the organization has no items
2024-03-13T17:39:26.1662330Z         should return no items
2024-03-13T17:39:26.1663545Z       when the organization has items
2024-03-13T17:39:26.2053380Z         is expected to eq [#<Item id: 3363, name: "Item 1", category: nil, created_at: "2024-03-13 10:39:26.188105707 -0700", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-13T17:39:26.2554019Z         should return only active and visible items
2024-03-13T17:39:26.2555065Z     org with any amount of items
2024-03-13T17:39:26.2555836Z       when the partner is in a partner group and has no items
2024-03-13T17:39:26.4635940Z         should return only active and visible items from partner
2024-03-13T17:39:26.4637013Z       when the partner is in a partner group and has items
2024-03-13T17:39:26.6848441Z         should return only active and visible items from partner
2024-03-13T17:39:26.6849166Z 
2024-03-13T17:39:26.6849584Z ItemsOutQuery
2024-03-13T17:39:26.6850179Z   items_out_query
2024-03-13T17:39:26.8001284Z     includes distributions, adjustments, transfers among sources
2024-03-13T17:39:26.9114211Z     returns a collection with the fields name, item_id, quantity
2024-03-13T17:39:26.9115032Z 
2024-03-13T17:39:26.9115262Z InventoryItem
2024-03-13T17:39:26.9155802Z   initializes the quantity to 0 if it was not specified
2024-03-13T17:39:26.9156521Z   Validations >
2024-03-13T17:39:26.9209323Z     requires an inventory association
2024-03-13T17:39:26.9252279Z     requires an item
2024-03-13T17:39:26.9252870Z     quantity >
2024-03-13T17:39:26.9307868Z       is less than the max integer
2024-03-13T17:39:26.9446458Z       is gte 0
2024-03-13T17:39:26.9501346Z       is numerical
2024-03-13T17:39:26.9555903Z       is required
2024-03-13T17:39:26.9556597Z   Filtering >
2024-03-13T17:39:26.9557439Z     ->by_partner_key
2024-03-13T17:39:26.9688912Z       shows the Base Items by partner_key
2024-03-13T17:39:26.9689708Z   versioning
2024-03-13T17:39:26.9727122Z     is expected to be versioned
2024-03-13T17:39:26.9727759Z 
2024-03-13T17:39:26.9727985Z TransferDestroyService
2024-03-13T17:39:26.9728767Z   #call
2024-03-13T17:39:26.9729850Z     when there are no issues
2024-03-13T17:39:27.1851186Z       should execute the expected methods
2024-03-13T17:39:27.3796871Z       should return an OpenStruct with success? set to true
2024-03-13T17:39:27.3797558Z     because transfer should not be deleted
2024-03-13T17:39:27.5663502Z       should return an OpenStruct with the raised error
2024-03-13T17:39:27.5664776Z     when an issue occurs in transaction
2024-03-13T17:39:27.5665590Z       because the transfer destroy raised an error
2024-03-13T17:39:27.7544549Z         should return a OpenStruct with the raised error
2024-03-13T17:39:27.7545855Z       because the transfer_id does not match any Transfer
2024-03-13T17:39:27.9305927Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-13T17:39:27.9307624Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-13T17:39:28.1189981Z         should return a OpenStruct with the raised error
2024-03-13T17:39:28.1191342Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-13T17:39:28.3033364Z         should return a OpenStruct with the raised error
2024-03-13T17:39:28.3034387Z 
2024-03-13T17:39:28.3034650Z View::Inventory
2024-03-13T17:39:28.3036973Z   #items_for_location
2024-03-13T17:39:28.3922978Z     should return the right values
2024-03-13T17:39:28.3923795Z     with include_omitted_items
2024-03-13T17:39:28.4854205Z       should add items not in the storage location
2024-03-13T17:39:28.4855105Z   #storage_location_name
2024-03-13T17:39:28.5768178Z     should return the right name
2024-03-13T17:39:28.5768990Z   .items_for_location
2024-03-13T17:39:28.6613822Z     should return the right values
2024-03-13T17:39:28.6615266Z     with include_omitted_items
2024-03-13T17:39:28.7462000Z       should add items not in the storage location
2024-03-13T17:39:28.7462830Z   #quantity_for
2024-03-13T17:39:28.7463567Z     with item id
2024-03-13T17:39:28.7464108Z       with storage location
2024-03-13T17:39:28.8310105Z         should return the quantity at that location
2024-03-13T17:39:28.8311189Z       with no storage location
2024-03-13T17:39:28.9713931Z         should return quantities across all storage locations
2024-03-13T17:39:28.9714643Z     with storage location but no item id
2024-03-13T17:39:29.1349201Z       should return all items at that location
2024-03-13T17:39:29.1350360Z   #total_value_in_dollars
2024-03-13T17:39:29.2678987Z     should return total value across the given location
2024-03-13T17:39:29.2679853Z   #all_items
2024-03-13T17:39:29.3556571Z     should return all items across storage locations
2024-03-13T17:39:29.3557427Z   .total_inventory
2024-03-13T17:39:29.4440729Z     should return the total quantity
2024-03-13T17:39:29.4441555Z   #storage_locations_for_item
2024-03-13T17:39:29.5298629Z     should return all relevant IDs
2024-03-13T17:39:29.5299407Z 
2024-03-13T17:39:29.5299685Z Reports::WarehouseReportService
2024-03-13T17:39:29.5300329Z   #report
2024-03-13T17:39:29.8801885Z     should print unknown warehouse type
2024-03-13T17:39:30.2321034Z     should print normal values
2024-03-13T17:39:30.4070345Z     should print unknown square footage
2024-03-13T17:39:30.5836755Z     should print zero values
2024-03-13T17:39:30.5837229Z 
2024-03-13T17:39:30.5837451Z Role
2024-03-13T17:39:30.6075105Z   is expected to accepts_nested_attributes_for :users
2024-03-13T17:39:30.6075941Z   Validations
2024-03-13T17:39:30.6077006Z     is expected to validate that :resource_type is either â€¹"Organization"â€º or â€¹"Partner"â€º
2024-03-13T17:39:30.6077872Z   Associations
2024-03-13T17:39:30.6083513Z     is expected to belong to resource optional: true
2024-03-13T17:39:30.6084565Z     is expected to have and belong to many users
2024-03-13T17:39:30.6085553Z   versioning
2024-03-13T17:39:30.6105004Z     is expected to be versioned
2024-03-13T17:39:30.6108335Z 
2024-03-13T17:39:30.6108665Z Partners::Profile
2024-03-13T17:39:30.6146500Z   must allow deleting served_areas
2024-03-13T17:39:30.6147239Z   social media info validation for profile
2024-03-13T17:39:30.6148361Z     no social media presence and the checkbox is checked
2024-03-13T17:39:30.6210126Z       should be valid
2024-03-13T17:39:30.6210702Z     has social media presence and the checkbox is unchecked
2024-03-13T17:39:30.6283630Z       with just a website it should be valid
2024-03-13T17:39:30.6351999Z       with just instagram it should be valid
2024-03-13T17:39:30.6423947Z       with just facebook it should be valid
2024-03-13T17:39:30.6493145Z       with every social media option it should be valid
2024-03-13T17:39:30.6564926Z       with just twitter it should be valid
2024-03-13T17:39:30.6566199Z     no social media presence and the checkbox isn't checked
2024-03-13T17:39:30.6665106Z       should be valid if media_information is not needed
2024-03-13T17:39:30.6719563Z       should not be valid
2024-03-13T17:39:30.6720118Z   associations
2024-03-13T17:39:30.6763353Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-13T17:39:30.6802890Z     is expected to have a has_many_attached called documents
2024-03-13T17:39:30.6848797Z     is expected to have many served_areas
2024-03-13T17:39:30.6887227Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-13T17:39:30.6888037Z   versioning
2024-03-13T17:39:30.6920983Z     is expected to be versioned
2024-03-13T17:39:30.6921590Z   request settings validation for profile
2024-03-13T17:39:30.6922320Z     at least one request type is set to true
2024-03-13T17:39:30.6994569Z       should be valid when enable_quantity_based_requests is true
2024-03-13T17:39:30.7063623Z       should be valid when enable_individual_requests is true
2024-03-13T17:39:30.7132926Z       should be valid when enable_child_based_requests is true
2024-03-13T17:39:30.7133943Z     no settings are set to true
2024-03-13T17:39:30.7182934Z       should not be valid
2024-03-13T17:39:30.7183459Z   client share behaviour
2024-03-13T17:39:30.7184286Z     multiple
2024-03-13T17:39:30.7427174Z       is valid if client share sum is 100
2024-03-13T17:39:30.7581220Z       sums the client shares
2024-03-13T17:39:30.7581778Z     no served areas
2024-03-13T17:39:30.7629800Z       has 0 client share
2024-03-13T17:39:30.7630776Z 
2024-03-13T17:39:30.7631046Z Partners::RequestApprovalService
2024-03-13T17:39:30.7631999Z   #call
2024-03-13T17:39:30.7633706Z     when the partner is not yet awaiting approval
2024-03-13T17:39:30.7928148Z       should send an email notification to the partner's organization
2024-03-13T17:39:30.8239173Z       should set the status on the partner record to awaiting_review
2024-03-13T17:39:30.8240119Z     when the partner is already awaiting approval
2024-03-13T17:39:30.8508136Z       should return an error saying it the partner is already requested approval
2024-03-13T17:39:30.8509405Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-13T17:39:30.8825643Z       does not have an error
2024-03-13T17:39:30.8826545Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-13T17:39:30.9075865Z       should return an error re social media
2024-03-13T17:39:30.9077385Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-13T17:39:30.9081702Z 
2024-03-13T17:39:30.9081960Z Purchase
2024-03-13T17:39:30.9083478Z   behaves like itemizable
2024-03-13T17:39:30.9084437Z     .to_a
2024-03-13T17:39:30.9085474Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:30.9451346Z         calls line_item_values
2024-03-13T17:39:30.9451991Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:30.9807194Z         raises an error
2024-03-13T17:39:30.9807702Z     .line_items
2024-03-13T17:39:30.9808912Z       sorted
2024-03-13T17:39:31.0368160Z         displays the items, sorted by name
2024-03-13T17:39:31.0368797Z       combine!
2024-03-13T17:39:31.0795601Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:31.1296396Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:31.1297390Z       quantities_by_name
2024-03-13T17:39:31.1684218Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:31.2076425Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:31.2077103Z       total
2024-03-13T17:39:31.2469869Z         has an item total
2024-03-13T17:39:31.2470595Z   Callbacks >
2024-03-13T17:39:31.2658801Z     automatically combines duplicate line_item records when they're created
2024-03-13T17:39:31.2825177Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-13T17:39:31.2827788Z   Associations >
2024-03-13T17:39:31.2828416Z     items >
2024-03-13T17:39:31.3019869Z       has_many
2024-03-13T17:39:31.3020480Z   Scopes >
2024-03-13T17:39:31.3021289Z     during >
2024-03-13T17:39:31.3266638Z       returns all purchases created between two dates
2024-03-13T17:39:31.3267355Z   Validations >
2024-03-13T17:39:31.3354215Z     is valid if all categories add up to total
2024-03-13T17:39:31.3438545Z     ensures that the issued at is no earlier than 2000
2024-03-13T17:39:31.3620285Z     is invalid when the line items are invalid
2024-03-13T17:39:31.3707405Z     is not valid if categories do not add up
2024-03-13T17:39:31.3789362Z     is valid if categories have no values
2024-03-13T17:39:31.3860920Z     requires an inventory (storage location)
2024-03-13T17:39:31.4025690Z     is not valid if any category is non-zero but does not add up to the total
2024-03-13T17:39:31.4109150Z     is not valid if period supplies is non-zero but no other category is
2024-03-13T17:39:31.4183040Z     must belong to an organization
2024-03-13T17:39:31.4183625Z   Methods >
2024-03-13T17:39:31.4184402Z     remove
2024-03-13T17:39:31.4846547Z       removes the item from the purchase
2024-03-13T17:39:31.5518381Z       fails gracefully if the item doesn't exist
2024-03-13T17:39:31.5519004Z     storage_view
2024-03-13T17:39:31.6127744Z       returns name of storage location
2024-03-13T17:39:31.6128394Z   versioning
2024-03-13T17:39:31.6166771Z     is expected to be versioned
2024-03-13T17:39:31.6167574Z 
2024-03-13T17:39:31.6167749Z InventoryAggregate
2024-03-13T17:39:31.6168821Z   individual events
2024-03-13T17:39:31.9227863Z     should process an adjustment event
2024-03-13T17:39:32.2341094Z     should process a purchase destroyed event
2024-03-13T17:39:32.5233599Z     should process a donation event after a new storage location is created
2024-03-13T17:39:32.8364972Z     should process a distribution destroyed event
2024-03-13T17:39:33.2299550Z     should process a kit deallocation event
2024-03-13T17:39:33.5238649Z     should process a transfer event
2024-03-13T17:39:33.8128630Z     should process a donation event
2024-03-13T17:39:34.1169530Z     should process a donation destroyed event
2024-03-13T17:39:34.4324279Z     should process a kit allocation event
2024-03-13T17:39:34.7362246Z     should process an audit event
2024-03-13T17:39:35.0449281Z     should process a transfer destroy event
2024-03-13T17:39:35.3131377Z     should process a snapshot event
2024-03-13T17:39:35.6205701Z     should process a distribution event
2024-03-13T17:39:35.9077907Z     should process a purchase event
2024-03-13T17:39:35.9078546Z   validation
2024-03-13T17:39:35.9079155Z     subsequent event is incorrect
2024-03-13T17:39:36.1622041Z       should handle negative quantities
2024-03-13T17:39:36.4567757Z       should add the event to the message
2024-03-13T17:39:36.4568459Z     current event is incorrect
2024-03-13T17:39:36.7057021Z       should raise a bare error
2024-03-13T17:39:36.7057662Z   multiple events
2024-03-13T17:39:37.0234456Z     should handle intervening audits
2024-03-13T17:39:37.2836485Z     should ignore unusable snapshots
2024-03-13T17:39:37.8629678Z     should process multiple events
2024-03-13T17:39:38.1298590Z     should handle changing storage location
2024-03-13T17:39:38.3974475Z     should handle timing correctly
2024-03-13T17:39:38.3975145Z 
2024-03-13T17:39:38.3975745Z DeallocateKitInventoryService
2024-03-13T17:39:38.3977374Z   #error
2024-03-13T17:39:38.3978439Z     when the storage location organization doesn't match
2024-03-13T17:39:38.6346672Z       returns error
2024-03-13T17:39:38.6347176Z   #deallocate
2024-03-13T17:39:38.6348037Z     when inventory items are available
2024-03-13T17:39:38.6351955Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-13T17:39:38.9694462Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-13T17:39:38.9695358Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-13T17:39:39.2524947Z         raises error about KitAllocation not found
2024-03-13T17:39:39.2525797Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-13T17:39:39.5427546Z         raises error about inconsistent inventory in or out
2024-03-13T17:39:39.5428789Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-13T17:39:39.8743338Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-13T17:39:39.8744457Z 
2024-03-13T17:39:39.8744618Z ReminderDeadlineJob
2024-03-13T17:39:39.8745119Z   #perform
2024-03-13T17:39:39.8985080Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-13T17:39:39.8985972Z 
2024-03-13T17:39:39.8986150Z HistoricalTrendsHelper
2024-03-13T17:39:39.8987105Z   #last_12_months
2024-03-13T17:39:39.9035503Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-13T17:39:39.9079493Z     returns the last 12 months starting from July when the current month is June
2024-03-13T17:39:39.9122462Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-13T17:39:39.9123141Z 
2024-03-13T17:39:39.9123297Z BaseItem
2024-03-13T17:39:39.9124759Z   Filtering >
2024-03-13T17:39:39.9125653Z     ->without_kit
2024-03-13T17:39:39.9178997Z       should not include the Kit BaseItem
2024-03-13T17:39:39.9179741Z     ->by_partner_key
2024-03-13T17:39:39.9230014Z       shows the Base Items by partner_key
2024-03-13T17:39:39.9230662Z   Associations >
2024-03-13T17:39:39.9352813Z     keeps count of its associated items
2024-03-13T17:39:39.9353451Z   Validations >
2024-03-13T17:39:39.9399107Z     is invalid without a partner key
2024-03-13T17:39:39.9467417Z     is invalid without a uniqueness key
2024-03-13T17:39:39.9534706Z     is invalid without a unique name
2024-03-13T17:39:39.9579537Z     is invalid without a name
2024-03-13T17:39:39.9580033Z   versioning
2024-03-13T17:39:39.9614850Z     is expected to be versioned
2024-03-13T17:39:39.9616322Z 
2024-03-13T17:39:39.9616586Z PartnerProfileUpdateService
2024-03-13T17:39:39.9617358Z   #call
2024-03-13T17:39:39.9618711Z     when served area client shares pre-exist
2024-03-13T17:39:39.9619529Z       and the new values are correct
2024-03-13T17:39:39.9620421Z         and there are errors on the profile
2024-03-13T17:39:39.9922075Z           maintains the old values and returns failure
2024-03-13T17:39:39.9922818Z         and there are no other errors
2024-03-13T17:39:40.0222991Z           replaces the old values and returns success
2024-03-13T17:39:40.0223736Z       and the new values are incorrect
2024-03-13T17:39:40.0501922Z         maintains the old values and returns failure
2024-03-13T17:39:40.0502933Z     when there are no pre-existing served areas
2024-03-13T17:39:40.0503618Z       and the new values are correct
2024-03-13T17:39:40.0704242Z         stores the new values and returns success
2024-03-13T17:39:40.0705054Z         and there are other errors in the profile
2024-03-13T17:39:40.0896520Z           does not store the new values and it returns a failure
2024-03-13T17:39:40.0897361Z       and the new values are incorrect
2024-03-13T17:39:40.1077611Z 0
2024-03-13T17:39:40.1086515Z         does not store the new values and returns a failure
2024-03-13T17:39:40.1088966Z 
2024-03-13T17:39:40.1089223Z Distribution
2024-03-13T17:39:40.1090643Z   Validations >
2024-03-13T17:39:40.1145643Z     must belong to an organization
2024-03-13T17:39:40.1203373Z     ensures that the issued at is no earlier than 2000
2024-03-13T17:39:40.1362863Z     ensures the associated line_items are invalid with a nil quantity
2024-03-13T17:39:40.1757432Z     ensures the associated line_items are valid
2024-03-13T17:39:40.1807479Z     requires a storage location
2024-03-13T17:39:40.1857616Z     requires a partner
2024-03-13T17:39:40.2010994Z     ensures the associated line_items are invalid with a zero quantity
2024-03-13T17:39:40.2044899Z     ensures that any included items are found in the associated storage location
2024-03-13T17:39:40.2045654Z     when delivery method is shipped
2024-03-13T17:39:40.2046281Z       shipping cost is none negative
2024-03-13T17:39:40.2313698Z         allows to save distribution
2024-03-13T17:39:40.2314251Z       shipping cost is negative
2024-03-13T17:39:40.2372805Z         will not allow to save distribution
2024-03-13T17:39:40.2373394Z     when delivery method is other then shipped
2024-03-13T17:39:40.2633482Z       allows to save distribution
2024-03-13T17:39:40.2634076Z   CSV export >
2024-03-13T17:39:40.2634991Z     csv_export_attributes
2024-03-13T17:39:40.6759468Z       returns the set of attributes which define a row in case of distribution export
2024-03-13T17:39:40.6760436Z     for_csv_export >
2024-03-13T17:39:41.0075609Z       filters only to the given organization
2024-03-13T17:39:41.3338051Z       filters only to the given issue time range
2024-03-13T17:39:41.6670388Z       filters only to the given filter
2024-03-13T17:39:41.6671095Z   Methods >
2024-03-13T17:39:41.6671839Z     #future?
2024-03-13T17:39:41.6672876Z       when issued_at has passed
2024-03-13T17:39:41.6951149Z         returns false
2024-03-13T17:39:41.6951698Z       when issued_at has not passed
2024-03-13T17:39:41.7228038Z         returns true
2024-03-13T17:39:41.7228568Z     #combine_duplicates
2024-03-13T17:39:41.7633623Z       condenses duplicate line_items if the item_ids match
2024-03-13T17:39:41.7634366Z     #distributed_at
2024-03-13T17:39:41.8133928Z       displays explicit issued_at date
2024-03-13T17:39:41.8397376Z       shows the hour and minutes if it has been provided
2024-03-13T17:39:41.8398107Z     #copy_line_items
2024-03-13T17:39:41.8818896Z       replicates line_items from a donation into a distribution
2024-03-13T17:39:41.8819708Z     #copy_from_request
2024-03-13T17:39:41.9058206Z       copy over relevant request information into the distrubution
2024-03-13T17:39:41.9059037Z   Callbacks >
2024-03-13T17:39:41.9573264Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-13T17:39:41.9574313Z     #before_save
2024-03-13T17:39:41.9574717Z       #reset_shipping_cost
2024-03-13T17:39:41.9575275Z         when delivery_method is other then shipped
2024-03-13T17:39:41.9845587Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-13T17:39:41.9846498Z   Scopes >
2024-03-13T17:39:41.9847457Z     this_week >
2024-03-13T17:39:41.9848577Z       When it's Tuesday (mid-week)
2024-03-13T17:39:42.0596230Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-13T17:39:42.0597460Z       When it's Sunday (end of the week)
2024-03-13T17:39:42.1105728Z         doesn't include distributions past Sunday
2024-03-13T17:39:42.1106419Z     by_partner >
2024-03-13T17:39:42.1600724Z       only returns distributions with given partner id
2024-03-13T17:39:42.1601427Z     during >
2024-03-13T17:39:42.2311856Z       returns all distributions created between two dates
2024-03-13T17:39:42.2312597Z     by_item_id >
2024-03-13T17:39:42.3668502Z       only returns distributions with given item id
2024-03-13T17:39:42.3669205Z     by_location >
2024-03-13T17:39:42.4175408Z       only returns distributions with given location id
2024-03-13T17:39:42.4176286Z   versioning
2024-03-13T17:39:42.4215567Z     is expected to be versioned
2024-03-13T17:39:42.4216371Z   behaves like itemizable
2024-03-13T17:39:42.4217078Z     .line_items
2024-03-13T17:39:42.4218266Z       sorted
2024-03-13T17:39:42.5394389Z         displays the items, sorted by name
2024-03-13T17:39:42.5395067Z       total
2024-03-13T17:39:42.6229772Z         has an item total
2024-03-13T17:39:42.6230342Z       quantities_by_name
2024-03-13T17:39:42.7071907Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:42.7980186Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:42.7980931Z       combine!
2024-03-13T17:39:42.8554211Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:42.8994994Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:42.8995891Z     .to_a
2024-03-13T17:39:42.8996515Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:42.9335531Z         raises an error
2024-03-13T17:39:42.9336463Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:42.9670269Z         calls line_item_values
2024-03-13T17:39:42.9671927Z 
2024-03-13T17:39:42.9672265Z Partners::FamilyRequestCreateService
2024-03-13T17:39:42.9673082Z   #call
2024-03-13T17:39:42.9674159Z     when the arguments are incorrect
2024-03-13T17:39:42.9675331Z       because no family_requests_attributes or comments were defined
2024-03-13T17:39:42.9966854Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-13T17:39:42.9967875Z       because a unrecognized item_id was provided
2024-03-13T17:39:43.0206544Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-13T17:39:43.0207552Z     when the arguments are correct
2024-03-13T17:39:43.0208522Z       with children
2024-03-13T17:39:43.1322016Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-13T17:39:43.1323276Z       without children
2024-03-13T17:39:43.1616639Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-13T17:39:43.1617495Z 
2024-03-13T17:39:43.1617713Z Exports::ExportReportCSVService
2024-03-13T17:39:43.1620700Z   .generate_csv_data
2024-03-13T17:39:43.1656724Z     creates CSV data including headers
2024-03-13T17:39:43.1691868Z     creates a CSV string
2024-03-13T17:39:43.1692546Z 
2024-03-13T17:39:43.1692757Z AccountRequestMailer
2024-03-13T17:39:43.1694397Z   #approval_request
2024-03-13T17:39:43.1849325Z     should include the admin link to create the new organization from the account request
2024-03-13T17:39:43.1970745Z     should be sent to the info@humanessentials.app email address
2024-03-13T17:39:43.2253625Z     should include details of the account request
2024-03-13T17:39:43.2379247Z     should have the correct subject
2024-03-13T17:39:43.2510435Z     should include the admin link to reject the organization
2024-03-13T17:39:43.2511486Z     when the account_request_id provided does not match any AccountRequest
2024-03-13T17:39:43.2559583Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-13T17:39:43.2560354Z   #confirmation
2024-03-13T17:39:43.2685159Z     should be sent to the specified account_request email
2024-03-13T17:39:43.2798130Z     should have the correct subject
2024-03-13T17:39:43.2912590Z     should be from no-reply@humanessentials.app
2024-03-13T17:39:43.2913267Z     Text format
2024-03-13T17:39:43.3031129Z       should include the staging/demo account information
2024-03-13T17:39:43.3147263Z       should include the button to confirm the request
2024-03-13T17:39:43.3264254Z       should include the instruction video link
2024-03-13T17:39:43.3265213Z     when the account_request_id provided does not match any AccountRequest
2024-03-13T17:39:43.3310809Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-13T17:39:43.3311548Z     HTML format
2024-03-13T17:39:43.3436976Z       should include the staging/demo account information
2024-03-13T17:39:43.3557605Z       should include the button to confirm the request
2024-03-13T17:39:43.3669409Z       should include the instruction video link
2024-03-13T17:39:43.3670063Z   #rejection
2024-03-13T17:39:43.3781317Z     should be sent to the correct email address
2024-03-13T17:39:43.3884446Z     should have the correct subject
2024-03-13T17:39:43.3994970Z     should include the rejection reason
2024-03-13T17:39:43.3995879Z     when the account_request_id provided does not match any AccountRequest
2024-03-13T17:39:43.4039591Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-13T17:39:43.4040754Z 
2024-03-13T17:39:43.4041017Z ApplicationController
2024-03-13T17:39:43.4042538Z   current_organization
2024-03-13T17:39:43.4043219Z     As an org user
2024-03-13T17:39:43.7659894Z       should return the first org role
2024-03-13T17:39:43.7660597Z       with a changed current role
2024-03-13T17:39:44.1290513Z         should return the first org role
2024-03-13T17:39:44.1291214Z     As a partner user
2024-03-13T17:39:44.1454577Z       should return nil
2024-03-13T17:39:44.1458803Z   dashboard_path_from_current_role
2024-03-13T17:39:44.1459813Z     As a user without super admin status
2024-03-13T17:39:44.1698671Z       links to the general dashboard
2024-03-13T17:39:44.1699336Z     As a super admin
2024-03-13T17:39:44.1922708Z       links to the admin dashboard
2024-03-13T17:39:44.1923325Z   current_partner
2024-03-13T17:39:44.1924224Z     As a partner user
2024-03-13T17:39:44.2478479Z       should return the first partner role
2024-03-13T17:39:44.2479202Z       with a changed current role
2024-03-13T17:39:44.3041573Z         should return the first partner role
2024-03-13T17:39:44.3042143Z     As an org user
2024-03-13T17:39:44.3183742Z       should return nil
2024-03-13T17:39:44.3184448Z 
2024-03-13T17:39:44.3184741Z HistoricalTrendService
2024-03-13T17:39:44.3185792Z   #series
2024-03-13T17:39:44.5933773Z     returns an array of items with their monthly data
2024-03-13T17:39:44.5934396Z 
2024-03-13T17:39:44.5934554Z Deadlinable
2024-03-13T17:39:44.5935471Z   validations
2024-03-13T17:39:44.5988972Z     validates that reminder day is not the same as deadline day
2024-03-13T17:39:44.6064685Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-13T17:39:44.6133951Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-13T17:39:44.6135222Z 
2024-03-13T17:39:44.6135382Z RequestItem
2024-03-13T17:39:44.6135797Z   Methods >
2024-03-13T17:39:44.6136380Z     #from_json
2024-03-13T17:39:44.8650847Z       has the correct quantity
2024-03-13T17:39:45.1153430Z       has the correct amount on hand for location
2024-03-13T17:39:45.3652646Z       has the correct name
2024-03-13T17:39:45.6131521Z       has the correct amount on hand
2024-03-13T17:39:45.6132232Z 
2024-03-13T17:39:45.6132548Z Exports::ExportDonationsCSVService
2024-03-13T17:39:45.6133492Z   #generate_csv_data
2024-03-13T17:39:45.7216602Z     should match the expected content for the csv
2024-03-13T17:39:45.7217159Z 
2024-03-13T17:39:45.7217447Z Partners::Child
2024-03-13T17:39:45.7218802Z   associations
2024-03-13T17:39:45.7266866Z     is expected to belong to family required: true
2024-03-13T17:39:45.7303117Z     is expected to have many child_item_requests dependent => destroy
2024-03-13T17:39:45.7303916Z   #display_name
2024-03-13T17:39:45.7588976Z     should return a child's first and last name
2024-03-13T17:39:45.7589659Z   versioning
2024-03-13T17:39:45.7626068Z     is expected to be versioned
2024-03-13T17:39:45.7626839Z 
2024-03-13T17:39:45.7627132Z KitCreateService
2024-03-13T17:39:45.7628134Z   #call
2024-03-13T17:39:45.9490139Z     should return an the instance
2024-03-13T17:39:45.9490824Z     when the parameters are valid
2024-03-13T17:39:46.1472846Z       should create the new Item associated with the Kit
2024-03-13T17:39:46.3499715Z       should create a new Item
2024-03-13T17:39:46.5522448Z       should create a new Kit
2024-03-13T17:39:46.5523158Z       but an unexpected error gets raised
2024-03-13T17:39:46.7439663Z         should not create a Item
2024-03-13T17:39:46.9356098Z         should have an error that includes the raised error
2024-03-13T17:39:47.1210680Z         should not create the Kit
2024-03-13T17:39:47.1211449Z       but the ItemCreationService is unsuccesful
2024-03-13T17:39:47.3173354Z         should not create the Kit
2024-03-13T17:39:47.5114149Z         should not create a Item
2024-03-13T17:39:47.7091934Z         should have an error that includes the error
2024-03-13T17:39:47.7093145Z     when the parameters provided are invalid
2024-03-13T17:39:47.7093894Z       because the kit_params is invalid for kit creation
2024-03-13T17:39:47.8871219Z         should have errors saying why the kit_params are invalid
2024-03-13T17:39:47.8872220Z       because the organization_id does not match any Organization
2024-03-13T17:39:47.8927984Z         should have an error on organization_id saying it does not match any Organization
2024-03-13T17:39:47.8928680Z 
2024-03-13T17:39:47.8928905Z DonationItemizedBreakdownService
2024-03-13T17:39:47.8929845Z   #fetch
2024-03-13T17:39:48.4234723Z     return the list of items donated with distributed
2024-03-13T17:39:48.4245539Z 
2024-03-13T17:39:48.4245805Z DistributionMailer
2024-03-13T17:39:48.4255419Z   #reminder_email
2024-03-13T17:39:48.4267124Z     with deliver_method: :pick_up
2024-03-13T17:39:48.5371031Z       renders the body with 'pick up' specified
2024-03-13T17:39:48.5371754Z     HTML format
2024-03-13T17:39:48.5904291Z       renders the body with organization's email text
2024-03-13T17:39:48.5905070Z     with deliver_method: :delivery
2024-03-13T17:39:48.6543193Z       renders the body with 'delivery' specified
2024-03-13T17:39:48.6543856Z     Text format
2024-03-13T17:39:48.7119792Z       renders the body with organization's email text
2024-03-13T17:39:48.7120634Z   #partner_mailer
2024-03-13T17:39:48.7668538Z     renders the body with organization's email text
2024-03-13T17:39:48.8193432Z     renders the body with distributions text
2024-03-13T17:39:48.8193889Z     with distribution changes
2024-03-13T17:39:48.8816213Z       renders the body with changes that happened in the distribution
2024-03-13T17:39:48.8817095Z     with deliver_method: :pick_up
2024-03-13T17:39:48.9398798Z       renders the body with 'picked up' specified
2024-03-13T17:39:48.9399352Z       when parners profile pick_up_email is present
2024-03-13T17:39:48.9942089Z         sends email to the primary contact and partner`s pickup person
2024-03-13T17:39:48.9943001Z         when pickup person happens to be the same as the primary contact
2024-03-13T17:39:49.0490228Z           does not send email twice
2024-03-13T17:39:49.0491074Z     with deliver_method: :delivery
2024-03-13T17:39:49.1039974Z       sends copy of email only to the partner
2024-03-13T17:39:49.1598362Z       renders the body with 'delivered' specified
2024-03-13T17:39:49.1599139Z 
2024-03-13T17:39:49.1599418Z Transfer
2024-03-13T17:39:49.1601198Z   Validations >
2024-03-13T17:39:49.3446410Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-13T17:39:49.3531542Z     must belong to an organization
2024-03-13T17:39:49.4183971Z     requires that the line items must have sufficient quantity in the inventory
2024-03-13T17:39:49.4434632Z     requires that each line item exists in the inventory
2024-03-13T17:39:49.4554785Z     must have different storage locations
2024-03-13T17:39:49.4671380Z     must have storage locations set
2024-03-13T17:39:49.4671996Z   behaves like itemizable
2024-03-13T17:39:49.4672697Z     .line_items
2024-03-13T17:39:49.4673617Z       quantities_by_name
2024-03-13T17:39:49.5144497Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:49.5633706Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:49.5634225Z       sorted
2024-03-13T17:39:49.6415463Z         displays the items, sorted by name
2024-03-13T17:39:49.6416282Z       combine!
2024-03-13T17:39:49.6906809Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:49.7192093Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:49.7193007Z       total
2024-03-13T17:39:49.7690411Z         has an item total
2024-03-13T17:39:49.7690926Z     .to_a
2024-03-13T17:39:49.7691787Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:49.8057103Z         calls line_item_values
2024-03-13T17:39:49.8057768Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:49.8414356Z         raises an error
2024-03-13T17:39:49.8414999Z   versioning
2024-03-13T17:39:49.8453982Z     is expected to be versioned
2024-03-13T17:39:49.8454510Z   Scopes >
2024-03-13T17:39:49.8684466Z     `to_location` can filter out transfers to a specific location
2024-03-13T17:39:49.8912132Z     `from_location` can filter out transfers from a specific location
2024-03-13T17:39:49.8912653Z   Methods >
2024-03-13T17:39:50.0991909Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-13T17:39:50.1379579Z W, [2024-03-13T10:39:50.137694 #2379]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-13T17:39:50.1381281Z W, [2024-03-13T10:39:50.137748 #2379]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:39:50.1383382Z W, [2024-03-13T10:39:50.137767 #2379]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:39:50.1385869Z W, [2024-03-13T10:39:50.137807 #2379]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-13T17:39:50.1387334Z 
2024-03-13T17:39:50.1387878Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-13T17:39:50.1388485Z 
2024-03-13T17:39:50.1389419Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-13T17:39:50.1390644Z      # Temporarily skipped with xit
2024-03-13T17:39:50.1391261Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-13T17:39:50.1391743Z 
2024-03-13T17:39:50.1392053Z Finished in 1 minute 0.58 seconds (files took 8.3 seconds to load)
2024-03-13T17:39:50.1392733Z 608 examples, 0 failures, 1 pending
2024-03-13T17:39:50.1393111Z 
2024-03-13T17:39:50.1393276Z Randomized with seed 36449
2024-03-13T17:39:50.1393598Z 
2024-03-13T17:39:50.4571601Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3842 / 6501 LOC (59.1%) covered.
2024-03-13T17:39:50.9013025Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10841 LOC (0.35%) covered.
