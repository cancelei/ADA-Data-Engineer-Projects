2024-03-13T17:38:34.1059700Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-13T17:38:34.1060632Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-13T17:38:34.1085141Z shell: /usr/bin/bash -e {0}
2024-03-13T17:38:34.1085556Z env:
2024-03-13T17:38:34.1085857Z   POSTGRES_HOST: localhost
2024-03-13T17:38:34.1086343Z   DATABASE_HOST: localhost
2024-03-13T17:38:34.1086719Z   PG_USERNAME: postgres
2024-03-13T17:38:34.1087086Z   PG_PASSWORD: password
2024-03-13T17:38:34.1087556Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-13T17:38:34.1087936Z   POSTGRES_PORT: 5432
2024-03-13T17:38:34.1088286Z   PGHOST: localhost
2024-03-13T17:38:34.1088703Z   PGUSER: postgres
2024-03-13T17:38:34.1089037Z   RAILS_ENV: test
2024-03-13T17:38:34.1089475Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-13T17:38:34.1089888Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-13T17:38:34.1090299Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-13T17:38:34.1090819Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-13T17:38:34.1091348Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-13T17:38:34.1092022Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-13T17:38:34.1092761Z   EVENTS_READ: true
2024-03-13T17:38:34.1093345Z ##[endgroup]
2024-03-13T17:38:39.6928592Z W, [2024-03-13T17:38:39.692380 #2324]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-13T17:38:39.6931245Z W, [2024-03-13T17:38:39.692431 #2324]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:38:39.6934236Z W, [2024-03-13T17:38:39.692447 #2324]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:38:39.6940108Z W, [2024-03-13T17:38:39.692466 #2324]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-13T17:38:42.4248466Z W, [2024-03-13T17:38:42.424531 #2324]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-13T17:38:42.4250433Z W, [2024-03-13T17:38:42.424571 #2324]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:38:42.4252540Z W, [2024-03-13T17:38:42.424584 #2324]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:38:42.4254905Z W, [2024-03-13T17:38:42.424627 #2324]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-13T17:38:42.4321322Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_request_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-03-13T17:38:51.0911803Z 
2024-03-13T17:38:51.0912681Z Randomized with seed 42327
2024-03-13T17:38:52.5501461Z 
2024-03-13T17:38:52.5502353Z ItemizableUpdateService
2024-03-13T17:38:52.5503247Z   decreases
2024-03-13T17:38:52.7159103Z     should raise an error if any item is inactive
2024-03-13T17:38:52.8718444Z     should update quantity in same storage location
2024-03-13T17:38:53.0070962Z     should update quantity in different locations
2024-03-13T17:38:53.0071852Z   increases
2024-03-13T17:38:53.1470645Z     should update quantity in different locations
2024-03-13T17:38:53.2812562Z     should update quantity in same storage location
2024-03-13T17:38:53.3725923Z     should raise an error if any item is inactive
2024-03-13T17:38:53.3726597Z 
2024-03-13T17:38:53.3726981Z Exports::ExportPurchasesCSVService
2024-03-13T17:38:53.3727698Z   #generate_csv_data
2024-03-13T17:38:53.5002235Z     should match the expected content for the csv
2024-03-13T17:38:53.5003081Z 
2024-03-13T17:38:53.5003308Z Vendor
2024-03-13T17:38:53.5003925Z   behaves like provideable
2024-03-13T17:38:53.5004769Z     import_csv
2024-03-13T17:38:53.6739387Z       imports from a csv file
2024-03-13T17:38:53.6739961Z     geocode
2024-03-13T17:38:53.6799773Z       adds coordinates to the database
2024-03-13T17:38:53.6800549Z     Validations
2024-03-13T17:38:53.6837899Z       is invalid without an organization
2024-03-13T17:38:53.6893548Z       is invalid unless it has either a contact name or a business name
2024-03-13T17:38:53.6894541Z   versioning
2024-03-13T17:38:53.6929321Z     is expected to be versioned
2024-03-13T17:38:53.6930249Z   Methods
2024-03-13T17:38:53.6930804Z     volume
2024-03-13T17:38:53.7592591Z       retrieves the amount of product that has been bought from this vendor
2024-03-13T17:38:53.7593474Z 
2024-03-13T17:38:53.7593771Z RequestsConfirmationMailer
2024-03-13T17:38:53.8161570Z   pairs the right quantities with the right item names
2024-03-13T17:38:53.8372784Z   handles duplicates
2024-03-13T17:38:53.8373481Z   #confirmation_email
2024-03-13T17:38:53.8517845Z     renders the headers
2024-03-13T17:38:53.8703023Z     renders the body
2024-03-13T17:38:53.8703556Z 
2024-03-13T17:38:53.8703758Z KitAllocation
2024-03-13T17:38:53.8707069Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-13T17:38:53.8708196Z   versioning
2024-03-13T17:38:53.8793230Z     is expected to be versioned
2024-03-13T17:38:53.8793929Z 
2024-03-13T17:38:53.8794298Z TextInterpolatorService
2024-03-13T17:38:53.8795318Z   #call
2024-03-13T17:38:53.8837095Z     returns interpolated text
2024-03-13T17:38:53.8837908Z     when interpolations are empty
2024-03-13T17:38:53.8874266Z       returns text
2024-03-13T17:38:53.8875507Z     when interpolations are nil
2024-03-13T17:38:53.8910804Z       returns text
2024-03-13T17:38:53.8911437Z     when text is nil
2024-03-13T17:38:53.8948337Z       returns nil
2024-03-13T17:38:53.8949274Z     when interpolations are not present
2024-03-13T17:38:53.8987850Z       returns text
2024-03-13T17:38:53.8988475Z     when text is empty
2024-03-13T17:38:53.9022166Z       returns empty string
2024-03-13T17:38:53.9023094Z 
2024-03-13T17:38:53.9023510Z ProductDrive
2024-03-13T17:38:54.4127955Z   calculates and returns all donated organization item quantities by category and date
2024-03-13T17:38:54.5456837Z   calculates donation quantity
2024-03-13T17:38:54.6896422Z   calculates in-kind value
2024-03-13T17:38:54.9253989Z   calculates and returns all donated organization item quantities by name and date
2024-03-13T17:38:55.1533985Z   calculates donation quantity by date
2024-03-13T17:38:55.1534836Z   scopes
2024-03-13T17:38:55.1535629Z     .within_date_range
2024-03-13T17:38:55.3029905Z       returns the product drive 1
2024-03-13T17:38:55.4522600Z       does not include product drive 2
2024-03-13T17:38:55.4523425Z     .by_name
2024-03-13T17:38:55.5917506Z       returns the product_drive with name some_name
2024-03-13T17:38:55.7394449Z       does not return other_name
2024-03-13T17:38:55.7394982Z     .by_item_category_id
2024-03-13T17:38:56.0662527Z       returns the product_drive with name some_name
2024-03-13T17:38:56.3991325Z       does not return other_name
2024-03-13T17:38:56.3992803Z   validations
2024-03-13T17:38:56.5313719Z     is expected not to be valid
2024-03-13T17:38:56.6710106Z     is expected not to be valid
2024-03-13T17:38:56.8101602Z     is expected not to be valid
2024-03-13T17:38:56.8102372Z   associations
2024-03-13T17:38:56.9014548Z     has_many donations
2024-03-13T17:38:56.9898414Z     has_many product_drive_participants through donations
2024-03-13T17:38:56.9899273Z   versioning
2024-03-13T17:38:57.1274811Z     is expected to be versioned
2024-03-13T17:38:57.1275352Z   .search_date_range
2024-03-13T17:38:57.2601306Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-13T17:38:57.2602299Z   distinct_items
2024-03-13T17:38:57.6053136Z     counts the distinct items correctly in overlapping donations
2024-03-13T17:38:57.9479120Z     counts the items correctly for 1 donation with multiple items
2024-03-13T17:38:58.2904104Z     counts the distinct items correctly by given category
2024-03-13T17:38:58.6335040Z     counts the distinct items correctly by given date
2024-03-13T17:38:58.9760325Z     doesn't double_count the items if there are two donations for the same item
2024-03-13T17:38:58.9761430Z   donation_source_view
2024-03-13T17:38:59.1161457Z     returns formatted text
2024-03-13T17:38:59.1162635Z 
2024-03-13T17:38:59.1162919Z PartnerRequestRecertificationService
2024-03-13T17:38:59.1163654Z   #call
2024-03-13T17:38:59.1164790Z     when the arguments are incorrect
2024-03-13T17:38:59.1165687Z       because the partner has already been requested to recertify
2024-03-13T17:38:59.1471358Z         should return the PartnerRequestRecertificationService object with an error
2024-03-13T17:38:59.1472767Z     when the partner is deactivated
2024-03-13T17:38:59.1780937Z       does not send an email
2024-03-13T17:38:59.1781754Z     when the arguments are correct
2024-03-13T17:38:59.2079068Z       should queue sending the notice to the partner
2024-03-13T17:38:59.2388021Z       should change the partner status to approved
2024-03-13T17:38:59.2666926Z       should have no errors
2024-03-13T17:38:59.2667785Z       but a unexpected error occurred during the save
2024-03-13T17:38:59.2668534Z         for partner approval
2024-03-13T17:38:59.2931459Z           should not change the partner status to recertification_required
2024-03-13T17:38:59.3167811Z           should have an error with the raised error
2024-03-13T17:38:59.3418798Z           should NOT queue sending the notice to the partner
2024-03-13T17:38:59.3420056Z 
2024-03-13T17:38:59.3420254Z User
2024-03-13T17:38:59.3480462Z   has a valid factory
2024-03-13T17:38:59.3481167Z   omniauth
2024-03-13T17:38:59.3617381Z     retrieves the user from an omniauth context
2024-03-13T17:38:59.3618158Z   versioning
2024-03-13T17:38:59.3654614Z     is expected to be versioned
2024-03-13T17:38:59.3655269Z   Scopes >
2024-03-13T17:38:59.3655958Z     ->alphabetized
2024-03-13T17:38:59.4105306Z       retrieves users in the correct order
2024-03-13T17:38:59.4106088Z   Methods >
2024-03-13T17:38:59.4185742Z     #invitation_status
2024-03-13T17:38:59.4246441Z     discarded?
2024-03-13T17:38:59.4727079Z     #kind
2024-03-13T17:38:59.4805400Z     #reinvitable?
2024-03-13T17:38:59.4806078Z   Scopes >
2024-03-13T17:38:59.4806872Z     ->alphabetized
2024-03-13T17:38:59.5032377Z       retrieves users in the correct order
2024-03-13T17:38:59.5033173Z   Validations >
2024-03-13T17:38:59.5117895Z     requires a name
2024-03-13T17:38:59.5250960Z     requires a password with a special character and number
2024-03-13T17:38:59.5439459Z     requires an email that is formatted correctly
2024-03-13T17:38:59.5440024Z 
2024-03-13T17:38:59.5440347Z DistributionByCountyReportService
2024-03-13T17:38:59.5441192Z   get_breakdown
2024-03-13T17:38:59.6374912Z     divides the item numbers and values according to the partner profile
2024-03-13T17:38:59.7084254Z     will have 100% unspecified shows if no served_areas
2024-03-13T17:38:59.9090349Z     handles multiple partners with overlapping service areas properly
2024-03-13T17:38:59.9091127Z 
2024-03-13T17:38:59.9091722Z Partners::FetchPartnersToRemindNowService
2024-03-13T17:38:59.9092500Z   .fetch
2024-03-13T17:38:59.9093040Z     when there is a partner
2024-03-13T17:38:59.9094192Z       that has an organization with a global reminder & deadline
2024-03-13T17:38:59.9095085Z         that is not for today
2024-03-13T17:38:59.9430463Z           should NOT include that partner
2024-03-13T17:38:59.9431326Z         that is for today
2024-03-13T17:38:59.9723641Z           should include that partner
2024-03-13T17:38:59.9724321Z           but the partner is deactivated
2024-03-13T17:39:00.0050775Z             should NOT include that partner
2024-03-13T17:39:00.0051345Z           and has send_reminder=false
2024-03-13T17:39:00.0384817Z             should NOT include that partner
2024-03-13T17:39:00.0385767Z         AND a partner group that does have them defined
2024-03-13T17:39:00.0794066Z           should remind based on the partner group instead of the organization level reminder
2024-03-13T17:39:00.0795281Z           but the partner is deactivated
2024-03-13T17:39:00.1231490Z             should NOT include that partner
2024-03-13T17:39:00.1232581Z       that does NOT have a organization with a global reminder & deadline
2024-03-13T17:39:00.1234082Z         and is a part of a partner group that does have them defined
2024-03-13T17:39:00.1235406Z           that is not for today
2024-03-13T17:39:00.1611923Z             should NOT include that partner
2024-03-13T17:39:00.1613128Z           that is for today
2024-03-13T17:39:00.1976246Z             should include that partner
2024-03-13T17:39:00.1977481Z             but the partner is deactivated
2024-03-13T17:39:00.2378766Z               should NOT include that partner
2024-03-13T17:39:00.2379772Z 
2024-03-13T17:39:00.2380172Z ProductDriveHelper
2024-03-13T17:39:00.2382159Z   #is_virtual
2024-03-13T17:39:00.2383119Z     when the product drive was held virtually
2024-03-13T17:39:00.2467419Z       is expected to eq "Yes"
2024-03-13T17:39:00.2468377Z     when a product drive was not provided
2024-03-13T17:39:00.2517695Z       without argument
2024-03-13T17:39:00.2561699Z       with blank argument
2024-03-13T17:39:00.2563155Z     when the product drive wasn't held virtually
2024-03-13T17:39:00.2615497Z       is expected to eq "No"
2024-03-13T17:39:00.2617061Z 
2024-03-13T17:39:00.2617546Z LineItem
2024-03-13T17:39:00.2618736Z   Scopes >
2024-03-13T17:39:00.2619572Z     ->active
2024-03-13T17:39:00.3055661Z       retrieves only those with active status
2024-03-13T17:39:00.3056642Z   Validations >
2024-03-13T17:39:00.3166455Z     requires an item
2024-03-13T17:39:00.3319440Z     requires a quantity
2024-03-13T17:39:00.4271233Z     the quantity must be a valid integer and cannot be 0
2024-03-13T17:39:00.4272466Z   versioning
2024-03-13T17:39:00.4313595Z     is expected to be versioned
2024-03-13T17:39:00.4314330Z   package_count
2024-03-13T17:39:00.4520410Z     is nil if there is no package_size
2024-03-13T17:39:00.4729224Z     is equal to the quanity divided by the package_size
2024-03-13T17:39:00.4730103Z   Methods >
2024-03-13T17:39:00.4730895Z     #value_per_line_item
2024-03-13T17:39:00.4731532Z       item has value and quantity
2024-03-13T17:39:00.4932020Z         is expected to eq 25
2024-03-13T17:39:00.4932557Z       item has no value
2024-03-13T17:39:00.5082555Z         is expected to eq 0
2024-03-13T17:39:00.5083464Z     item packages
2024-03-13T17:39:00.5084161Z       #package_count
2024-03-13T17:39:00.5084894Z         has packages
2024-03-13T17:39:00.5278815Z           is expected to eq "1"
2024-03-13T17:39:00.5279520Z         does not have packages
2024-03-13T17:39:00.5421345Z           is expected to be falsy
2024-03-13T17:39:00.5422312Z       #has_packages
2024-03-13T17:39:00.5423000Z         item has package size
2024-03-13T17:39:00.5615873Z           is expected to be truthy
2024-03-13T17:39:00.5616746Z         item has no package size
2024-03-13T17:39:00.5749259Z           is expected to be falsy
2024-03-13T17:39:00.5750337Z 
2024-03-13T17:39:00.5750553Z DonationSite
2024-03-13T17:39:00.5752026Z   versioning
2024-03-13T17:39:00.5838838Z     is expected to be versioned
2024-03-13T17:39:00.5839726Z   import_csv
2024-03-13T17:39:00.7609051Z     imports storage locations from a csv file
2024-03-13T17:39:00.7609904Z   geocode
2024-03-13T17:39:00.7677727Z     adds coordinates to the database
2024-03-13T17:39:00.7678548Z   Validations >
2024-03-13T17:39:00.7724358Z     is invalid without a name
2024-03-13T17:39:00.7770234Z     must belong to an organization
2024-03-13T17:39:00.7819585Z     is invalid without an address
2024-03-13T17:39:00.7820535Z 
2024-03-13T17:39:00.7820955Z DonationsController
2024-03-13T17:39:00.7822926Z   calculating total value of multiple donations
2024-03-13T17:39:00.7867425Z     returns zero for an empty array of donations
2024-03-13T17:39:00.9243568Z     works correctly for multiple line items per donation
2024-03-13T17:39:00.9244297Z   While signed in as a normal user >
2024-03-13T17:39:00.9245247Z     DELETE #destroy
2024-03-13T17:39:00.9553328Z       redirects to the dashboard path
2024-03-13T17:39:00.9554035Z     GET #show
2024-03-13T17:39:00.9756971Z       returns http success
2024-03-13T17:39:00.9757702Z     GET #edit
2024-03-13T17:39:01.0002065Z       returns http success
2024-03-13T17:39:01.0003249Z     GET #new
2024-03-13T17:39:01.0144598Z       returns http success
2024-03-13T17:39:01.0145581Z     PUT#update
2024-03-13T17:39:01.1253589Z       updates storage quantity correctly
2024-03-13T17:39:01.1617259Z       redirects to index after update
2024-03-13T17:39:01.1618205Z       when changing storage location
2024-03-13T17:39:01.2752119Z         updates storage quantity correctly
2024-03-13T17:39:01.2798863Z         rolls back updates if quantity would go below 0
2024-03-13T17:39:01.2799708Z       when removing a line item
2024-03-13T17:39:01.3852917Z         updates storage invetory item quantity correctly
2024-03-13T17:39:01.3854179Z     GET #index
2024-03-13T17:39:01.4011055Z       returns http success
2024-03-13T17:39:01.4011702Z     POST#create
2024-03-13T17:39:01.4215860Z       renders GET#new with error on failure
2024-03-13T17:39:01.4625689Z       redirects to GET#edit on success
2024-03-13T17:39:01.4626889Z   While signed in as an organization admin >
2024-03-13T17:39:01.4627575Z     DELETE #destroy
2024-03-13T17:39:01.4985748Z       redirects to the index
2024-03-13T17:39:01.4986773Z   calculating total money raised for all donations
2024-03-13T17:39:01.5030067Z     returns zero for an empty array of donations
2024-03-13T17:39:01.5163825Z     correctly calculates the total
2024-03-13T17:39:01.5164650Z 
2024-03-13T17:39:01.5164900Z Partners::ServedArea
2024-03-13T17:39:01.5417106Z   must only allow valid client share values
2024-03-13T17:39:01.5468875Z   is expected to belong to partner_profile required: true
2024-03-13T17:39:01.5509240Z   is expected to belong to county required: true
2024-03-13T17:39:01.5655312Z   must only allow integer client shares
2024-03-13T17:39:01.5655836Z   versioning
2024-03-13T17:39:01.5692798Z     is expected to be versioned
2024-03-13T17:39:01.5693578Z 
2024-03-13T17:39:01.5693799Z Partners::ItemRequest
2024-03-13T17:39:01.5697120Z   associations
2024-03-13T17:39:01.5808628Z     is expected to have many child_item_requests dependent => destroy
2024-03-13T17:39:01.5858259Z     is expected to belong to request class_name => ::Request required: true
2024-03-13T17:39:01.5895481Z     is expected to have many children through child_item_requests
2024-03-13T17:39:01.5896070Z   validations
2024-03-13T17:39:01.5962128Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-13T17:39:01.6027906Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-13T17:39:01.6092690Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-13T17:39:01.6162144Z     is expected to validate that :name cannot be empty/falsy
2024-03-13T17:39:01.6163034Z   versioning
2024-03-13T17:39:01.6203170Z     is expected to be versioned
2024-03-13T17:39:01.6203865Z 
2024-03-13T17:39:01.6204218Z DistributionPdf
2024-03-13T17:39:01.6946398Z   #request_data
2024-03-13T17:39:01.7545244Z   #non_request_data
2024-03-13T17:39:01.7545653Z 
2024-03-13T17:39:01.7546060Z Reports::AcquisitionReportService
2024-03-13T17:39:01.7546754Z   acquisition report
2024-03-13T17:39:02.8259159Z     should return the proper results on #report (FAILED - 1)
2024-03-13T17:39:03.9999482Z     returns the correct quantity of disposable diapers from kits
2024-03-13T17:39:04.0000224Z 
2024-03-13T17:39:04.0000418Z Request
2024-03-13T17:39:04.0001086Z   versioning
2024-03-13T17:39:04.0044245Z     is expected to be versioned
2024-03-13T17:39:04.0045074Z   Enums >
2024-03-13T17:39:04.0045804Z     #status
2024-03-13T17:39:04.0239597Z       scopes
2024-03-13T17:39:04.0240148Z   total_items
2024-03-13T17:39:04.0329031Z     adds the quantity of all items in the request
2024-03-13T17:39:04.0329881Z   item data
2024-03-13T17:39:04.0402969Z     coerces item quantity and id to always be an integer before saving
2024-03-13T17:39:04.0403717Z 
2024-03-13T17:39:04.0404011Z PartnerMailerJob
2024-03-13T17:39:04.0404612Z   conditionally sending the emails
2024-03-13T17:39:04.2397505Z     does not send mail for past distributions
2024-03-13T17:39:04.5467759Z     sends mail for future distributions immediately
2024-03-13T17:39:04.5468986Z     when the distribution is for a deactivated partner
2024-03-13T17:39:04.7522219Z       does not send the email
2024-03-13T17:39:04.7522940Z 
2024-03-13T17:39:04.7523255Z ApplicationHelper
2024-03-13T17:39:04.7525961Z   default_title_content
2024-03-13T17:39:04.7527118Z     Organization exists
2024-03-13T17:39:04.9278583Z       returns the organization's name
2024-03-13T17:39:04.9279440Z     Organization does not exist
2024-03-13T17:39:04.9332168Z       returns a default name
2024-03-13T17:39:04.9333794Z   active_class
2024-03-13T17:39:04.9377931Z     Returns the controller name
2024-03-13T17:39:04.9379613Z   can_administrate?
2024-03-13T17:39:04.9381078Z     User is part of org but not org admin
2024-03-13T17:39:04.9527143Z       cannot administrate
2024-03-13T17:39:04.9528084Z     User is org admin and part of org
2024-03-13T17:39:04.9740621Z       can administrate
2024-03-13T17:39:04.9741407Z     User is org admin and not part of org
2024-03-13T17:39:05.1647795Z       cannot administrate
2024-03-13T17:39:05.1648613Z   confirm_delete_msg
2024-03-13T17:39:05.1697633Z     subs in string
2024-03-13T17:39:05.1698368Z   step_container_helper
2024-03-13T17:39:05.1699528Z     active_index is equal to index
2024-03-13T17:39:05.1743159Z       returns active
2024-03-13T17:39:05.1743861Z     active_index is greater than index
2024-03-13T17:39:05.1786033Z       returns done
2024-03-13T17:39:05.1786781Z     active_index is less than index
2024-03-13T17:39:05.1831381Z       returns empty string
2024-03-13T17:39:05.1832099Z   flash_class
2024-03-13T17:39:05.1877034Z     returns appropriate class for notice
2024-03-13T17:39:05.1920940Z     returns appropriate class for error
2024-03-13T17:39:05.1963048Z     returns appropriate class for alert
2024-03-13T17:39:05.2005309Z     returns appropriate class for success
2024-03-13T17:39:05.2005984Z 
2024-03-13T17:39:05.2006391Z Reports::PartnerInfoReportService
2024-03-13T17:39:05.2007215Z   #report
2024-03-13T17:39:05.4333117Z     should report normal values
2024-03-13T17:39:05.6099326Z     should report zero values
2024-03-13T17:39:05.6099939Z 
2024-03-13T17:39:05.6100149Z OrganizationMailer
2024-03-13T17:39:05.6100752Z   #partner_approval_request
2024-03-13T17:39:05.6382531Z     includes a link to the relevant partner
2024-03-13T17:39:05.6637721Z     renders the body with correct text with partner information
2024-03-13T17:39:05.6908608Z     should be sent to the partner main email with the correct subject line
2024-03-13T17:39:05.6909729Z 
2024-03-13T17:39:05.6911633Z ItemsInTotalQuery
2024-03-13T17:39:05.6912221Z   items_in_total_query
2024-03-13T17:39:05.9203867Z     does not count negative adjustments towards in-flow
2024-03-13T17:39:06.0878081Z     returns a sum total of all in-flows
2024-03-13T17:39:06.3665380Z     does not count donations, purchases, adjustments to other storage locations
2024-03-13T17:39:06.5735659Z     does not count transfers going in the negative direction
2024-03-13T17:39:06.9020791Z     counts shared items together
2024-03-13T17:39:06.9021457Z 
2024-03-13T17:39:06.9021838Z DistributionReminder
2024-03-13T17:39:06.9022524Z   conditionally sending the emails
2024-03-13T17:39:06.9312624Z     does not send mail for future distributions if the partner wants no reminders
2024-03-13T17:39:06.9612606Z     sends mail for future distributions
2024-03-13T17:39:06.9885831Z     does not send mail for past distributions
2024-03-13T17:39:07.0154630Z     sends mail for future distributions where the partner wants reminders
2024-03-13T17:39:07.0155503Z     when the distribution_id does not match any Distribution
2024-03-13T17:39:07.0198463Z       does not send mail for non existent distributions
2024-03-13T17:39:07.0199061Z     when the partner is deactivated
2024-03-13T17:39:07.0465272Z       does not send mail
2024-03-13T17:39:07.0466069Z 
2024-03-13T17:39:07.0466548Z Reports::SummaryReportService
2024-03-13T17:39:07.0467250Z   #report
2024-03-13T17:39:07.2288228Z     should report zero values
2024-03-13T17:39:07.7000184Z     should report negative values
2024-03-13T17:39:08.1599728Z     should report positive values
2024-03-13T17:39:08.1600344Z 
2024-03-13T17:39:08.1600805Z InventoryCheckService
2024-03-13T17:39:08.1601383Z   call
2024-03-13T17:39:08.1602534Z     alert
2024-03-13T17:39:08.2355216Z       should set the alert
2024-03-13T17:39:08.2355942Z     error
2024-03-13T17:39:08.3181745Z       should set the error
2024-03-13T17:39:08.3182664Z 
2024-03-13T17:39:08.3183341Z DistributionsController
2024-03-13T17:39:08.3184068Z   While signed in
2024-03-13T17:39:08.3184900Z     POST #create
2024-03-13T17:39:08.3186362Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-13T17:39:08.4103293Z         redirects with a flash notice and a flash error
2024-03-13T17:39:08.4104721Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-13T17:39:08.4930946Z         redirects with a flash notice and a flash alert
2024-03-13T17:39:08.4931575Z       when line item quantity is not positive
2024-03-13T17:39:08.5464682Z         flashes an error
2024-03-13T17:39:08.5465860Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-13T17:39:08.6170872Z         redirects with a flash notice and a flash error
2024-03-13T17:39:08.6171754Z     PUT #update
2024-03-13T17:39:08.6172628Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-13T17:39:08.7290391Z         redirects with a flash notice and a flash error
2024-03-13T17:39:08.7291629Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-13T17:39:08.8345811Z         redirects with a flash notice and a flash error
2024-03-13T17:39:08.8346798Z       when distribution has items updated for minimum quantity
2024-03-13T17:39:08.9637498Z         redirects with a flash notice and send send_notification
2024-03-13T17:39:08.9638311Z 
2024-03-13T17:39:08.9638484Z ReminderDeadlineMailer
2024-03-13T17:39:08.9639325Z   notify deadline
2024-03-13T17:39:08.9941583Z     renders the receiver email
2024-03-13T17:39:09.0214155Z     renders the sender email
2024-03-13T17:39:09.0484926Z     renders the body
2024-03-13T17:39:09.0753471Z     renders the subject
2024-03-13T17:39:09.0754176Z 
2024-03-13T17:39:09.0754468Z RequestDestroyService
2024-03-13T17:39:09.0755425Z   #call
2024-03-13T17:39:09.0879789Z     should return an instance of itself
2024-03-13T17:39:09.0880519Z     when the request is already discarded
2024-03-13T17:39:09.0978648Z       should not be successful and have errors
2024-03-13T17:39:09.0979251Z     when there are no validation errors
2024-03-13T17:39:09.1108328Z       should update the discarded_at column on the request
2024-03-13T17:39:09.1233624Z       should update the status column on the request
2024-03-13T17:39:09.1348136Z       should send a email notification to the partner
2024-03-13T17:39:09.1348822Z     when the request_id matches no request
2024-03-13T17:39:09.1389821Z       should not be successful and have errors indicating request id is invalid
2024-03-13T17:39:09.1390844Z     when the request's partner is deactivated
2024-03-13T17:39:09.1654066Z       should have errors
2024-03-13T17:39:09.1655012Z 
2024-03-13T17:39:09.1655313Z PartnerCreateService
2024-03-13T17:39:09.1656120Z   #call
2024-03-13T17:39:09.3500784Z     should return an instance of itself
2024-03-13T17:39:09.3501461Z     when the arguments are valid
2024-03-13T17:39:09.6483938Z       should create the associated partner profile data
2024-03-13T17:39:09.8892735Z       should create a new partner record with the organization provided
2024-03-13T17:39:09.8894569Z       but there was an unexpected issue with saving the
2024-03-13T17:39:09.8895816Z         Partner record
2024-03-13T17:39:10.0769153Z           should not create the associated partner records
2024-03-13T17:39:10.2556893Z           should not create the partner record for the organization
2024-03-13T17:39:10.2557609Z         Partners::Profile record
2024-03-13T17:39:10.4325040Z           should not create the partner record for the organization
2024-03-13T17:39:10.6141510Z           should not create the associated partner records
2024-03-13T17:39:10.6142623Z     when the arguments are incorrect
2024-03-13T17:39:10.6143106Z       beacuse the partner_attrs are invalid
2024-03-13T17:39:10.7921502Z         should contain errors related to invalid partner attributes
2024-03-13T17:39:10.7922482Z 
2024-03-13T17:39:10.7922932Z OrganizationUpdateService
2024-03-13T17:39:10.7924154Z   #update_partner_flags
2024-03-13T17:39:10.7925603Z     when request flags haven't changed
2024-03-13T17:39:11.0029424Z       should not update partners
2024-03-13T17:39:11.0030193Z     when request flags have changed
2024-03-13T17:39:11.2296765Z       should update partners when disabling child and individual request flags
2024-03-13T17:39:11.4500171Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-13T17:39:11.6749303Z       should update partners when disabling quantity-based request flags
2024-03-13T17:39:11.6750414Z   #update
2024-03-13T17:39:11.6751014Z     when organization has partners
2024-03-13T17:39:11.6751840Z       when all of a single partner's request flags will be disabled
2024-03-13T17:39:11.8956938Z         should add an error message to the organization
2024-03-13T17:39:12.1184354Z         should NOT change request flags in organization or its partners
2024-03-13T17:39:12.1185842Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-13T17:39:12.3453558Z         should allow the disabling of request flags in organization and its partners
2024-03-13T17:39:12.3454695Z     when object is valid
2024-03-13T17:39:12.5234776Z       should update and return true
2024-03-13T17:39:12.5235398Z     when object is invalid
2024-03-13T17:39:12.7047227Z       should not update and return false
2024-03-13T17:39:12.7047763Z 
2024-03-13T17:39:12.7048006Z DispersedPastDatesGenerator
2024-03-13T17:39:12.7049226Z   constants
2024-03-13T17:39:12.7087925Z     has 4 day ranges for generation of past dates
2024-03-13T17:39:12.7088700Z   #next
2024-03-13T17:39:12.7140210Z     returns equally dispersed dates between all time ranges
2024-03-13T17:39:12.7141053Z 
2024-03-13T17:39:12.7141357Z Exports::ExportRequestService
2024-03-13T17:39:12.7142137Z   .generate_csv_data
2024-03-13T17:39:12.9168870Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-13T17:39:13.1208307Z     includes rows for each request with correct columns of item quantity
2024-03-13T17:39:13.1209452Z 
2024-03-13T17:39:13.1209766Z Exports::ExportDistributionsCSVService
2024-03-13T17:39:13.1210408Z   #generate_csv_data
2024-03-13T17:39:13.2974141Z     should match the expected content for the csv
2024-03-13T17:39:13.2975148Z     when a new item is added
2024-03-13T17:39:13.4801387Z       should add it to the end of the row
2024-03-13T17:39:13.6625635Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-13T17:39:13.6626635Z     when there are no distributions but the report is requested
2024-03-13T17:39:13.8404076Z       returns a csv with only headers and no rows
2024-03-13T17:39:13.8404777Z 
2024-03-13T17:39:13.8405410Z Question
2024-03-13T17:39:13.8406693Z   scope for_banks
2024-03-13T17:39:13.8764595Z     should filter out questions that aren't meant for banks
2024-03-13T17:39:13.8765481Z   remove_redundant_error
2024-03-13T17:39:13.8809414Z     should return an array with only one error message related to the checkboxes.
2024-03-13T17:39:13.8810431Z   punctuate
2024-03-13T17:39:13.8848763Z     should punctuate each string in a given array
2024-03-13T17:39:13.8849764Z   scope for_partners
2024-03-13T17:39:13.9075800Z     should filter out questions that aren't meant for partners
2024-03-13T17:39:13.9077004Z   validations
2024-03-13T17:39:13.9141748Z     is expected to validate that :title cannot be empty/falsy
2024-03-13T17:39:13.9232832Z     question for_banks and for_partners attributes can't both be false
2024-03-13T17:39:13.9287360Z     is expected to validate that :answer cannot be empty/falsy
2024-03-13T17:39:13.9288607Z   versioning
2024-03-13T17:39:13.9324655Z     is expected to be versioned
2024-03-13T17:39:13.9325276Z 
2024-03-13T17:39:13.9325885Z UserInviteService
2024-03-13T17:39:14.2073303Z   should create the user without a name with default role
2024-03-13T17:39:14.2351122Z   should invite a user with the partner role
2024-03-13T17:39:14.2352248Z   with existing user
2024-03-13T17:39:14.4377522Z     should add roles to existing user
2024-03-13T17:39:14.4469416Z     should raise an error when reinviting an existing user with the same role
2024-03-13T17:39:14.4470536Z     with force: true
2024-03-13T17:39:14.4676629Z       should reinvite the user
2024-03-13T17:39:14.4677568Z   with a new user
2024-03-13T17:39:14.6620436Z     should create the user with roles
2024-03-13T17:39:14.6891555Z     should create the user without name with role
2024-03-13T17:39:14.6892168Z 
2024-03-13T17:39:14.6892558Z Partners::ChildItemRequest
2024-03-13T17:39:14.6893633Z   #quantity
2024-03-13T17:39:14.7005283Z     should return the quantity divided by the number of children
2024-03-13T17:39:14.7006107Z   versioning
2024-03-13T17:39:14.7041767Z     is expected to be versioned
2024-03-13T17:39:14.7042382Z   #ordered_item_diaperid
2024-03-13T17:39:14.7080125Z     should return the item_id on the item_request
2024-03-13T17:39:14.7080655Z   associations
2024-03-13T17:39:14.7125932Z     is expected to belong to item_request required: true
2024-03-13T17:39:14.7159823Z     is expected to belong to authorized_family_member optional: true
2024-03-13T17:39:14.7198466Z     is expected to belong to child required: true
2024-03-13T17:39:14.7199711Z 
2024-03-13T17:39:14.7199987Z BarcodeItem
2024-03-13T17:39:14.7201106Z   versioning
2024-03-13T17:39:14.7288978Z     is expected to be versioned
2024-03-13T17:39:14.7289630Z   Organization barcodes
2024-03-13T17:39:14.7420727Z     updates a counter in Item whenever it tracks a new barcode
2024-03-13T17:39:14.7421618Z     validations >
2024-03-13T17:39:14.7573519Z       enforces value uniqueness within the organization
2024-03-13T17:39:14.7719728Z       is valid only with an organization
2024-03-13T17:39:14.7844421Z       does not enforce value uniqueness compared with the global scope
2024-03-13T17:39:14.7959255Z       allows multiple barcodes to point at the same item
2024-03-13T17:39:14.8195632Z       does not enforces value uniqueness across organizations
2024-03-13T17:39:14.8197388Z       quantity >
2024-03-13T17:39:14.8287236Z         is an integer
2024-03-13T17:39:14.8377559Z         is not nil
2024-03-13T17:39:14.8466212Z         is not a negative number
2024-03-13T17:39:14.8466986Z       item >
2024-03-13T17:39:14.8560383Z         is invalid without an item associated with it
2024-03-13T17:39:14.8561252Z       value >
2024-03-13T17:39:14.8652090Z         requires a value
2024-03-13T17:39:14.8653157Z     when searching for a barcode where there is a global and local with the same value
2024-03-13T17:39:14.8950783Z       favors the local barcode
2024-03-13T17:39:14.8951474Z     scopes >
2024-03-13T17:39:15.2501264Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-13T17:39:15.2621113Z       ->by_value returns the barcode with that value
2024-03-13T17:39:15.2834608Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-13T17:39:15.2835594Z     filters >
2024-03-13T17:39:15.3042942Z       ->item_id shows only barcodes for a specific item_id
2024-03-13T17:39:15.3043888Z     to_h >
2024-03-13T17:39:15.3164418Z       emits a hash for a line_item
2024-03-13T17:39:15.3165373Z   Barcodes of BaseItems ('Global')
2024-03-13T17:39:15.3255365Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-13T17:39:15.3256452Z     filters >
2024-03-13T17:39:15.3409235Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-13T17:39:15.3562038Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-13T17:39:15.3673804Z       ->by_value returns the barcode with that value
2024-03-13T17:39:15.3674624Z     scopes >
2024-03-13T17:39:15.3675727Z       global
2024-03-13T17:39:15.3835078Z         includes all barcodes, for both base items and regular items
2024-03-13T17:39:15.3836108Z     validations >
2024-03-13T17:39:15.3924570Z       enforces uniqueness in the global scope
2024-03-13T17:39:15.3999170Z       is valid with or without an organization
2024-03-13T17:39:15.4079667Z       allows multiple barcodes to point at the same base item
2024-03-13T17:39:15.4080728Z       value >
2024-03-13T17:39:15.4130033Z         requires a value
2024-03-13T17:39:15.4130735Z       item >
2024-03-13T17:39:15.4184879Z         is invalid without an item associated with it
2024-03-13T17:39:15.4185659Z       quantity >
2024-03-13T17:39:15.4239723Z         is an integer
2024-03-13T17:39:15.4290750Z         is not a negative number
2024-03-13T17:39:15.4344622Z         is not nil
2024-03-13T17:39:15.4345612Z 
2024-03-13T17:39:15.4346156Z HistoricalDataCacheJob
2024-03-13T17:39:15.6185519Z   caches the historical data
2024-03-13T17:39:15.7924663Z   queues the job
2024-03-13T17:39:15.7925140Z 
2024-03-13T17:39:15.7925365Z PartnerInviteService
2024-03-13T17:39:15.8237717Z   should update the status of the partner to invited
2024-03-13T17:39:15.8531070Z   should create invite
2024-03-13T17:39:15.8531763Z   with force: true
2024-03-13T17:39:15.8827082Z     should send the force setting forward
2024-03-13T17:39:15.8828046Z 
2024-03-13T17:39:15.8828282Z BroadcastAnnouncement
2024-03-13T17:39:15.8949355Z   should roughly check if link is valid
2024-03-13T17:39:15.9068048Z   is expected to validate that :message cannot be empty/falsy
2024-03-13T17:39:15.9115935Z   is expected to belong to user required: true
2024-03-13T17:39:15.9183623Z   should validate a valid announcement
2024-03-13T17:39:15.9226125Z   is expected to belong to organization optional: true
2024-03-13T17:39:15.9284293Z   should validate a good link
2024-03-13T17:39:15.9285198Z   filter_announcements
2024-03-13T17:39:15.9437717Z     shouldn't include expired announcements
2024-03-13T17:39:15.9585116Z     sorts announcements from most recently created to last
2024-03-13T17:39:15.9719500Z     should include only announcements from the passed organization
2024-03-13T17:39:15.9720588Z   expired?
2024-03-13T17:39:15.9782119Z     should be true if the announcement is expired
2024-03-13T17:39:15.9837877Z     should be false if the announcement has not expired
2024-03-13T17:39:15.9839010Z   versioning
2024-03-13T17:39:15.9874769Z     is expected to be versioned
2024-03-13T17:39:15.9875295Z 
2024-03-13T17:39:15.9875604Z ItemCategory
2024-03-13T17:39:15.9877196Z   assocations
2024-03-13T17:39:15.9933721Z     is expected to belong to organization required: true
2024-03-13T17:39:15.9970680Z     is expected to have many items
2024-03-13T17:39:16.0032734Z     is expected to have and belong to many partner_groups
2024-03-13T17:39:16.0033692Z   validations
2024-03-13T17:39:16.0111929Z     is expected to validate that the length of :description is at most 250
2024-03-13T17:39:16.0201855Z     is expected to validate that :name cannot be empty/falsy
2024-03-13T17:39:16.0413175Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-13T17:39:16.0505759Z     is expected to validate that :organization cannot be empty/falsy
2024-03-13T17:39:16.0506681Z   versioning
2024-03-13T17:39:16.0545872Z     is expected to be versioned
2024-03-13T17:39:16.0546443Z 
2024-03-13T17:39:16.0546822Z Partners::FamilyRequest
2024-03-13T17:39:16.0548008Z   Partners::FamilyRequest.new_with_attrs
2024-03-13T17:39:16.0588449Z     creates a new FamilyRequest with attributes
2024-03-13T17:39:16.0589364Z   #items_attributes=
2024-03-13T17:39:16.0622255Z     assigns items based on given attributes
2024-03-13T17:39:16.0667717Z     creates instances of Item with correct attributes
2024-03-13T17:39:16.0702219Z     overrides existing items
2024-03-13T17:39:16.0704254Z 
2024-03-13T17:39:16.0704618Z Partner
2024-03-13T17:39:16.0707225Z   versioning
2024-03-13T17:39:16.0746585Z     is expected to be versioned
2024-03-13T17:39:16.0747257Z   import_csv
2024-03-13T17:39:16.3971244Z     imports partners from a csv file with BOM encodings
2024-03-13T17:39:16.6167656Z     imports partners from a csv file and prevents multiple imports
2024-03-13T17:39:16.6168668Z   #impact_metrics
2024-03-13T17:39:16.6169363Z     when partner don't have any related information
2024-03-13T17:39:16.6485076Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-13T17:39:16.6486362Z     when partner has related information
2024-03-13T17:39:16.7152214Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-13T17:39:16.7153417Z   #profile
2024-03-13T17:39:16.7392017Z     should return the associated Partners::Profile record
2024-03-13T17:39:16.7394359Z   #quantity_year_to_date
2024-03-13T17:39:16.9172366Z     includes all item quantities from distributions issued during the current year
2024-03-13T17:39:17.1079332Z     does not include quantities from distributions issued during the previous year
2024-03-13T17:39:17.1081159Z   callbacks
2024-03-13T17:39:17.1295823Z     properly downcases email
2024-03-13T17:39:17.1296700Z   Filters
2024-03-13T17:39:17.1297199Z     by_status
2024-03-13T17:39:17.1680160Z       yields partners with the provided status
2024-03-13T17:39:17.2062977Z       yields deactivated partner when deactivated status provided
2024-03-13T17:39:17.2063901Z   Validations >
2024-03-13T17:39:17.2337528Z     requires a unique name within an organization
2024-03-13T17:39:17.2638300Z     requires a unique email that is formatted correctly
2024-03-13T17:39:17.2690588Z     must belong to an organization
2024-03-13T17:39:17.2779543Z     validates the quota is a number but it is not required
2024-03-13T17:39:17.3043334Z     still requires a unique email between organizations
2024-03-13T17:39:17.3277038Z     does not require a unique name between organizations
2024-03-13T17:39:17.3278071Z   #csv_export_attributes
2024-03-13T17:39:17.3522977Z     includes contact person information from parnerbase
2024-03-13T17:39:17.3523943Z   ActiveStorage validation
2024-03-13T17:39:17.3635984Z     validates that attachments are pdf or docs
2024-03-13T17:39:17.3636882Z   changing emails
2024-03-13T17:39:17.3885616Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-13T17:39:17.4123373Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-13T17:39:17.4379869Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-13T17:39:17.4627223Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-13T17:39:17.4873764Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-13T17:39:17.5120852Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-13T17:39:17.5424946Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-13T17:39:17.5426216Z   #deactivated?
2024-03-13T17:39:17.5427106Z     when the status is 'deactivated'
2024-03-13T17:39:17.5467689Z       should return true
2024-03-13T17:39:17.5468568Z     when the status is not 'deactivated'
2024-03-13T17:39:17.5508722Z       should return false
2024-03-13T17:39:17.5509357Z   associations
2024-03-13T17:39:17.5545205Z     is expected to have many children through families
2024-03-13T17:39:17.5582030Z     is expected to have many requestable_items through item_categories source => items
2024-03-13T17:39:17.5639481Z     is expected to belong to organization required: true
2024-03-13T17:39:17.5673371Z     is expected to have many item_categories through partner_group
2024-03-13T17:39:17.5708020Z     is expected to have many families dependent => destroy
2024-03-13T17:39:17.5741318Z     is expected to have many users dependent => destroy
2024-03-13T17:39:17.5774072Z     is expected to have many distributions
2024-03-13T17:39:17.5807633Z     is expected to have many requests
2024-03-13T17:39:17.5856618Z     is expected to belong to partner_group optional: true
2024-03-13T17:39:17.5889946Z     is expected to have many requests
2024-03-13T17:39:17.5890752Z     primary_user
2024-03-13T17:39:17.6171909Z       should return the first user ever created for a partner
2024-03-13T17:39:17.6172834Z   #deletable?
2024-03-13T17:39:17.6173429Z     when status is not uninvited
2024-03-13T17:39:17.6252102Z       should return false
2024-03-13T17:39:17.6252914Z     when status is uninvited
2024-03-13T17:39:17.6253692Z       when it has a profile but no users
2024-03-13T17:39:17.6404097Z         should return true
2024-03-13T17:39:17.6404738Z       when it has no other associations
2024-03-13T17:39:17.6508372Z         should return true
2024-03-13T17:39:17.6509166Z       when it has a distribution
2024-03-13T17:39:17.6647648Z         should return false
2024-03-13T17:39:17.6648335Z       when it has a profile and users
2024-03-13T17:39:17.6892491Z         should return false
2024-03-13T17:39:17.6893183Z       when it has a request
2024-03-13T17:39:17.7039283Z         should return false
2024-03-13T17:39:17.7040060Z   #approvable?
2024-03-13T17:39:17.7040894Z     when status is invited
2024-03-13T17:39:17.7084138Z       should return true
2024-03-13T17:39:17.7084970Z     when status is not invited or awaiting_review
2024-03-13T17:39:17.7156948Z       should return false
2024-03-13T17:39:17.7157587Z     when status is awaiting_review
2024-03-13T17:39:17.7199131Z       should return true
2024-03-13T17:39:17.7200370Z 
2024-03-13T17:39:17.7200596Z OrganizationStats
2024-03-13T17:39:17.7201710Z   locations_with_inventory method >
2024-03-13T17:39:17.7202684Z     current org is not nil + no locations have items >
2024-03-13T17:39:17.7270791Z       should return an empty array
2024-03-13T17:39:17.7271705Z     current org is not nil + locations have items >
2024-03-13T17:39:17.7617646Z       should return storage location
2024-03-13T17:39:17.7618342Z     current org is nil >
2024-03-13T17:39:17.7651828Z       should return an empty array
2024-03-13T17:39:17.7652548Z   donation_sites_added method >
2024-03-13T17:39:17.7653254Z     current org is not nil >
2024-03-13T17:39:17.7687312Z       should return actual count of donation sites
2024-03-13T17:39:17.7688081Z     current org is nil >
2024-03-13T17:39:17.7719998Z       should return 0
2024-03-13T17:39:17.7720741Z   storage_locations_added method >
2024-03-13T17:39:17.7721432Z     current org is nil >
2024-03-13T17:39:17.7755686Z       should return 0
2024-03-13T17:39:17.7756581Z     current org is not nil >
2024-03-13T17:39:17.7790961Z       should return actual count of locations
2024-03-13T17:39:17.7791720Z   partners_added method >
2024-03-13T17:39:17.7792459Z     current org is nil >
2024-03-13T17:39:17.7825698Z       should return 0
2024-03-13T17:39:17.7826326Z     current org is not nil >
2024-03-13T17:39:17.7861303Z       should return actual count of partners
2024-03-13T17:39:17.7861845Z 
2024-03-13T17:39:17.7862144Z ServiceObjectErrorsMixin
2024-03-13T17:39:17.7862868Z   self.included
2024-03-13T17:39:17.7900250Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-13T17:39:17.7900907Z 
2024-03-13T17:39:17.7901152Z StorageLocation
2024-03-13T17:39:17.7902141Z   Validations >
2024-03-13T17:39:17.7966576Z     is expected to validate that :name cannot be empty/falsy
2024-03-13T17:39:17.8021831Z     is expected to validate that :organization cannot be empty/falsy
2024-03-13T17:39:17.8080309Z     is expected to validate that :address cannot be empty/falsy
2024-03-13T17:39:17.8081165Z   versioning
2024-03-13T17:39:17.8114472Z     is expected to be versioned
2024-03-13T17:39:17.8115072Z   Filtering >
2024-03-13T17:39:17.8818394Z     ->containing yields only inventories that have that item
2024-03-13T17:39:17.8903104Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-13T17:39:17.8904105Z   Callbacks >
2024-03-13T17:39:17.8904504Z     before_destroy
2024-03-13T17:39:17.9264861Z       does not delete storage locations with inventory items on it
2024-03-13T17:39:17.9861828Z       deletes storage locations with no inventory items on it
2024-03-13T17:39:17.9862723Z   Methods >
2024-03-13T17:39:17.9863774Z     decrease_inventory
2024-03-13T17:39:18.0912397Z       decreases inventory quantities from an itemizable object
2024-03-13T17:39:18.0913511Z       when there is insufficient inventory available
2024-03-13T17:39:18.0997994Z         gives informative errors
2024-03-13T17:39:18.1076368Z         does not change inventory quantities if there is an error
2024-03-13T17:39:18.1077270Z     csv_export_attributes
2024-03-13T17:39:18.1702843Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-13T17:39:18.1704042Z     import_csv
2024-03-13T17:39:18.1919270Z       imports storage locations from a csv file
2024-03-13T17:39:18.1920294Z     geocode
2024-03-13T17:39:18.2033817Z       adds coordinates to the database
2024-03-13T17:39:18.2034581Z     size
2024-03-13T17:39:18.2526510Z       returns total quantity of all items in this storage location
2024-03-13T17:39:18.2527455Z     item_total
2024-03-13T17:39:18.2924442Z       retrieves the total for a single item
2024-03-13T17:39:18.2925227Z     increase_inventory
2024-03-13T17:39:18.2926183Z       when providing a new item that does not yet exist
2024-03-13T17:39:18.3951107Z         creates those new inventory items in the storage location
2024-03-13T17:39:18.3952104Z       With existing inventory
2024-03-13T17:39:18.4990255Z         increases inventory quantities from an itemizable object
2024-03-13T17:39:18.4990960Z     import_inventory
2024-03-13T17:39:18.7961050Z       imports storage locations from a csv file
2024-03-13T17:39:18.7961894Z     StorageLocation.items_inventoried
2024-03-13T17:39:18.8782914Z       returns a collection of items that are stored within inventories
2024-03-13T17:39:18.8784265Z     inventory_total_value_in_dollars
2024-03-13T17:39:18.8911556Z       returns 0 when there are no items in this storage location
2024-03-13T17:39:18.9313128Z       returns a value including cents if the total isn't an even dollar amount
2024-03-13T17:39:18.9793017Z       returns total value of all items in this storage location
2024-03-13T17:39:18.9794322Z 
2024-03-13T17:39:18.9794738Z ItemsController
2024-03-13T17:39:18.9796030Z   While not signed in
2024-03-13T17:39:18.9887248Z     redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:18.9888092Z   While signed in
2024-03-13T17:39:18.9889224Z     GET #show
2024-03-13T17:39:19.0098440Z       returns http success
2024-03-13T17:39:19.0098977Z     PUT #update
2024-03-13T17:39:19.0099858Z       visible
2024-03-13T17:39:19.0295149Z         should update visible_to_partners to true
2024-03-13T17:39:19.0296011Z       invisible
2024-03-13T17:39:19.0486138Z         should update visible_to_partners to false
2024-03-13T17:39:19.0487018Z     GET #edit
2024-03-13T17:39:19.0645157Z       returns http success
2024-03-13T17:39:19.0646049Z     DELETE #destroy
2024-03-13T17:39:19.0905549Z       redirects to #index
2024-03-13T17:39:19.0906309Z     PATCH #remove_category
2024-03-13T17:39:19.2845677Z       should remove an item's category
2024-03-13T17:39:19.4932106Z       should redirect to the previous category page
2024-03-13T17:39:19.4932716Z     GET #index
2024-03-13T17:39:19.5099054Z       returns http success
2024-03-13T17:39:19.5100235Z     PATCH #restore
2024-03-13T17:39:19.5101251Z       with a soft-deleted item
2024-03-13T17:39:19.5317225Z         re-activates the item
2024-03-13T17:39:19.5318547Z       with an active item
2024-03-13T17:39:19.5524082Z         does nothing
2024-03-13T17:39:19.5524772Z       with another organizations item
2024-03-13T17:39:19.7448896Z         does nothing
2024-03-13T17:39:19.7449325Z     GET #new
2024-03-13T17:39:19.7559666Z       returns http success
2024-03-13T17:39:19.7560241Z     Looking at a different organization
2024-03-13T17:39:19.9315275Z       redirects the user to the sign-in page for CRUD actions
2024-03-13T17:39:19.9315878Z     POST #create
2024-03-13T17:39:19.9316849Z       with invalid params
2024-03-13T17:39:19.9466958Z         should show an error
2024-03-13T17:39:19.9467470Z       with valid params
2024-03-13T17:39:19.9663385Z         should create an item
2024-03-13T17:39:19.9845172Z         should redirect to the item page
2024-03-13T17:39:20.0021094Z         should accept params with dollar signs, periods, and commas
2024-03-13T17:39:20.0022027Z 
2024-03-13T17:39:20.0022412Z NDBNMember
2024-03-13T17:39:20.0023410Z   validations
2024-03-13T17:39:20.0126614Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-13T17:39:20.0250787Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-13T17:39:20.0322585Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-13T17:39:20.0323758Z   #full_name
2024-03-13T17:39:20.0360235Z     should equal the id and the account name
2024-03-13T17:39:20.0360865Z   versioning
2024-03-13T17:39:20.0393773Z     is expected to be versioned
2024-03-13T17:39:20.0398241Z 
2024-03-13T17:39:20.0398511Z AddRoleService
2024-03-13T17:39:20.0399374Z   #call
2024-03-13T17:39:20.0400175Z     when the role already exists
2024-03-13T17:39:20.2379504Z       should raise an error for super admin
2024-03-13T17:39:20.4322516Z       should raise an error
2024-03-13T17:39:20.4323164Z     when the role does not yet exist
2024-03-13T17:39:20.6236960Z       works with super admin
2024-03-13T17:39:20.8296183Z       works with a partner
2024-03-13T17:39:21.0212505Z       should add the role
2024-03-13T17:39:21.2149329Z       should add the user role when asked to add admin
2024-03-13T17:39:21.2149912Z 
2024-03-13T17:39:21.2150259Z Reports::ChildrenServedReportService
2024-03-13T17:39:21.2151408Z   #disposable_diapers_from_kits_total
2024-03-13T17:39:21.5160926Z     calculates the number of disposable diapers that have been distributed within kits
2024-03-13T17:39:21.5161685Z   #report
2024-03-13T17:39:21.6856720Z     should report zero values
2024-03-13T17:39:22.2685169Z     should work with no distribution_quantity
2024-03-13T17:39:22.8371735Z     should report normal values
2024-03-13T17:39:22.8372300Z 
2024-03-13T17:39:22.8372605Z DonationDestroyService
2024-03-13T17:39:22.8373566Z   #call
2024-03-13T17:39:22.8374931Z     when the donation succesfully gets destroyed
2024-03-13T17:39:22.8620267Z       to be a success
2024-03-13T17:39:22.8620988Z     when storage_location fails to decrease the inventory of the donation
2024-03-13T17:39:22.8668470Z       to not be a success
2024-03-13T17:39:22.8669128Z     when the donation destroy fails
2024-03-13T17:39:22.8715932Z       to not be a success
2024-03-13T17:39:22.8717034Z     when the donation_id matches no Donation owned by the organization
2024-03-13T17:39:22.8757469Z       to not be a success
2024-03-13T17:39:22.8758055Z     when the organization_id matches no Organization
2024-03-13T17:39:22.8796161Z       to not be a success
2024-03-13T17:39:22.8797341Z 
2024-03-13T17:39:22.8797660Z DistributionContentChangeService
2024-03-13T17:39:22.8798624Z   #any_change?
2024-03-13T17:39:22.8799760Z     when there are no changes in the line items
2024-03-13T17:39:22.8833653Z       returns true
2024-03-13T17:39:22.8834167Z     when there are line items removed and updated
2024-03-13T17:39:22.8869568Z       returns true
2024-03-13T17:39:22.8870043Z     when there are line items removed
2024-03-13T17:39:22.8904107Z       returns true
2024-03-13T17:39:22.8904563Z     when there are line items updated
2024-03-13T17:39:22.8941039Z       returns true
2024-03-13T17:39:22.8941762Z   #changes
2024-03-13T17:39:22.8942589Z     when there are line items removed and updated
2024-03-13T17:39:22.8975723Z       returns true
2024-03-13T17:39:22.8976400Z 
2024-03-13T17:39:22.8976821Z Event
2024-03-13T17:39:22.8977557Z   #most_recent_snapshot
2024-03-13T17:39:23.1378834Z     should include the last usable snapshot
2024-03-13T17:39:23.3663060Z     should not include an unusable snapshot
2024-03-13T17:39:23.3663824Z 
2024-03-13T17:39:23.3664339Z Partners::RequestCreateService
2024-03-13T17:39:23.3665089Z   #call
2024-03-13T17:39:23.3665904Z     when the arguments are correct
2024-03-13T17:39:23.4033922Z       should create a Request record
2024-03-13T17:39:23.4380708Z       should notify the Partner via email
2024-03-13T17:39:23.4731342Z       should have no errors
2024-03-13T17:39:23.4731946Z       but a unexpected error occured during the save
2024-03-13T17:39:23.4732589Z         for the Request record
2024-03-13T17:39:23.5056177Z           should NOT notify the Partner via email
2024-03-13T17:39:23.5390683Z           should have an error with the raised error
2024-03-13T17:39:23.5794925Z           should NOT create a Request record
2024-03-13T17:39:23.5795595Z     when the arguments are incorrect
2024-03-13T17:39:23.5796860Z       because a unrecogonized item_id was provided
2024-03-13T17:39:23.6098067Z         should return the Request object with an error
2024-03-13T17:39:23.6098954Z       because no item_requests_attributes and comments were defined
2024-03-13T17:39:23.6357021Z         should return the Request object with an error
2024-03-13T17:39:23.6357917Z 
2024-03-13T17:39:23.6358096Z ItemsOutTotalQuery
2024-03-13T17:39:23.6359016Z   items_out_total_query
2024-03-13T17:39:23.7461781Z     returns a sum total of all out-flows
2024-03-13T17:39:23.7463033Z 
2024-03-13T17:39:23.7463463Z DistributionDestroyService
2024-03-13T17:39:23.7463964Z   #call
2024-03-13T17:39:23.7464451Z     when the distribution_id matches no Distribution
2024-03-13T17:39:23.7505567Z       to not be a success
2024-03-13T17:39:23.7506343Z     when the distribution_id does match a Distribution
2024-03-13T17:39:23.7507268Z       and the increase inventory operations fails
2024-03-13T17:39:23.9541735Z         should not delete the Distribution
2024-03-13T17:39:24.1611876Z         should not be successful and have the error message
2024-03-13T17:39:24.1612694Z       and the destroy! operation fails
2024-03-13T17:39:24.3688477Z         should not be successful and have the error message
2024-03-13T17:39:24.5673576Z         should not delete the Distribution
2024-03-13T17:39:24.5674080Z       and the operations succeed
2024-03-13T17:39:24.7707377Z         should increase the inventory of the storage location
2024-03-13T17:39:24.9727000Z         should be successful
2024-03-13T17:39:25.1777788Z         should destroy the Distribution
2024-03-13T17:39:25.1779151Z 
2024-03-13T17:39:25.1779346Z AllocateKitInventoryService
2024-03-13T17:39:25.1780570Z   #allocate
2024-03-13T17:39:25.1781555Z     when more than one kit is requested
2024-03-13T17:39:25.1782305Z       but one of the items is out of stock
2024-03-13T17:39:25.4348425Z         returns error and does not change kit or item quantity
2024-03-13T17:39:25.4349190Z     when inventory items are available
2024-03-13T17:39:25.7098801Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-13T17:39:25.7100027Z       when there are more then one line items
2024-03-13T17:39:25.7100654Z         when there kit is allocated once
2024-03-13T17:39:25.9777872Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-13T17:39:25.9778587Z         when same kit is allocated multiple times
2024-03-13T17:39:26.2757174Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-13T17:39:26.2758183Z       When kit is allocated more then once
2024-03-13T17:39:26.5675880Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-13T17:39:26.5677558Z   #error
2024-03-13T17:39:26.5678304Z     when the Store location organization doesn't match
2024-03-13T17:39:26.7817530Z       returns error
2024-03-13T17:39:26.7818760Z 
2024-03-13T17:39:26.7818995Z DeadlineService
2024-03-13T17:39:26.7819843Z   #next_deadline
2024-03-13T17:39:26.7820623Z     do from the partner group
2024-03-13T17:39:26.7821547Z       when the deadline is before today
2024-03-13T17:39:26.7884457Z         returns a date in the next month
2024-03-13T17:39:26.7885234Z       when the deadline is after today
2024-03-13T17:39:26.7937677Z         returns a date within the current month
2024-03-13T17:39:26.7938475Z       when the deadline is today
2024-03-13T17:39:26.7989984Z         returns a date in the next month
2024-03-13T17:39:26.7990628Z     from the organization
2024-03-13T17:39:26.7991631Z       when the deadline is today
2024-03-13T17:39:26.8044091Z         returns a date in the next month
2024-03-13T17:39:26.8044778Z       when the deadline is before today
2024-03-13T17:39:26.8096375Z         returns a date in the next month
2024-03-13T17:39:26.8097051Z       when the deadline is after today
2024-03-13T17:39:26.8148365Z         returns a date within the current month
2024-03-13T17:39:26.8149369Z 
2024-03-13T17:39:26.8149626Z County
2024-03-13T17:39:26.8185372Z   is expected to have many served_areas
2024-03-13T17:39:26.8185989Z   versioning
2024-03-13T17:39:26.8218952Z     is expected to be versioned
2024-03-13T17:39:26.8220069Z 
2024-03-13T17:39:26.8220252Z Adjustment
2024-03-13T17:39:26.8221856Z   behaves like itemizable
2024-03-13T17:39:26.8222631Z     .to_a
2024-03-13T17:39:26.8223590Z       with Flipper flag :deprecate_to_a enabled
2024-03-13T17:39:26.8566954Z         raises an error
2024-03-13T17:39:26.8567543Z       with Flipper flag :deprecate_to_a disabled
2024-03-13T17:39:26.8902903Z         calls line_item_values
2024-03-13T17:39:26.8903480Z     .line_items
2024-03-13T17:39:26.8904519Z       combine!
2024-03-13T17:39:26.9297187Z         combines multiple line_items with the same item_id into a single record
2024-03-13T17:39:26.9748664Z         incrementally combines line_items on donations that have already been created
2024-03-13T17:39:26.9749263Z       quantities_by_name
2024-03-13T17:39:27.0129657Z         returns a hash of items with id, name, and quantity
2024-03-13T17:39:27.0534020Z         leaves out zero-quantitied items if requested
2024-03-13T17:39:27.0534710Z       total
2024-03-13T17:39:27.0924103Z         has an item total
2024-03-13T17:39:27.0924721Z       sorted
2024-03-13T17:39:27.1493461Z         displays the items, sorted by name
2024-03-13T17:39:27.1494207Z   versioning
2024-03-13T17:39:27.1530987Z     is expected to be versioned
2024-03-13T17:39:27.1531588Z   nested line item attributes
2024-03-13T17:39:27.1947117Z     accepts them
2024-03-13T17:39:27.1947573Z   Scopes >
2024-03-13T17:39:27.2119028Z     `at_location` can filter out adjustments to a specific location
2024-03-13T17:39:27.2274564Z     `by_user` can filter out adjustments to a specific user
2024-03-13T17:39:27.2275137Z   Methods >
2024-03-13T17:39:27.4394498Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-13T17:39:27.4395658Z     split_difference
2024-03-13T17:39:27.5143295Z       gracefully handles adjustments with only negative
2024-03-13T17:39:27.5880642Z       gracefully handles adjustments with only positive
2024-03-13T17:39:27.6619796Z       returns two adjustment objects
2024-03-13T17:39:27.6620420Z   Validations >
2024-03-13T17:39:27.6713539Z     must belong to an organization
2024-03-13T17:39:27.6895025Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-13T17:39:27.7300026Z     allows you to remove all the inventory that exists in the storage location
2024-03-13T17:39:27.7300763Z 
2024-03-13T17:39:27.7301037Z EventDiffer
2024-03-13T17:39:27.9324350Z   should return a full diff
2024-03-13T17:39:27.9324882Z 
2024-03-13T17:39:27.9325439Z CustomDeviseMailer
2024-03-13T17:39:27.9326536Z   #invitation_instructions
2024-03-13T17:39:27.9327749Z     when other partner users invited
2024-03-13T17:39:27.9762878Z       invites to partner user
2024-03-13T17:39:27.9763495Z     when partner is invited
2024-03-13T17:39:28.0170594Z       invites to primary user
2024-03-13T17:39:28.0171169Z     when user is invited
2024-03-13T17:39:28.0354107Z       invites to user
2024-03-13T17:39:28.0535775Z       has invite expiration message
2024-03-13T17:39:28.0536710Z 
2024-03-13T17:39:28.0537021Z ProfileUpdateService
2024-03-13T17:39:28.0537961Z   #update
2024-03-13T17:39:28.0795104Z     updates the profile with the filtered and prepared params
2024-03-13T17:39:28.0984998Z W, [2024-03-13T10:39:28.098239 #2375]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-13T17:39:28.0986980Z W, [2024-03-13T10:39:28.098286 #2375]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-13T17:39:28.0989518Z W, [2024-03-13T10:39:28.098310 #2375]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-13T17:39:28.0992350Z W, [2024-03-13T10:39:28.098349 #2375]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-13T17:39:28.0994126Z 
2024-03-13T17:39:28.0994841Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-13T17:39:28.0995614Z 
2024-03-13T17:39:28.0997090Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-13T17:39:28.0998417Z      # Not yet implemented
2024-03-13T17:39:28.0998985Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-13T17:39:28.1205564Z 
2024-03-13T17:39:28.1205972Z Failures:
2024-03-13T17:39:28.1206345Z 
2024-03-13T17:39:28.1207177Z   1) Reports::AcquisitionReportService acquisition report should return the proper results on #report
2024-03-13T17:39:28.1208452Z      Failure/Error:
2024-03-13T17:39:28.1209072Z        expect(subject.report).to eq({
2024-03-13T17:39:28.1210006Z          entries: { "Disposable diapers distributed" => "240",
2024-03-13T17:39:28.1210867Z                     "Cloth diapers distributed" => "300",
2024-03-13T17:39:28.1211791Z                     "Average monthly disposable diapers distributed" => "143",
2024-03-13T17:39:28.1212679Z                     "Total product drives" => 2,
2024-03-13T17:39:28.1213503Z                     "Disposable diapers collected from drives" => "600",
2024-03-13T17:39:28.1214413Z                     "Cloth diapers collected from drives" => "900",
2024-03-13T17:39:28.1215163Z                     "Money raised from product drives" => "$60.00",
2024-03-13T17:39:28.1215946Z                     "Total product drives (virtual)" => 2,
2024-03-13T17:39:28.1216837Z                     "Money raised from product drives (virtual)" => "$20.00",
2024-03-13T17:39:28.1217458Z 
2024-03-13T17:39:28.1218810Z        expected: {:entries=>{"% cloth diapers donated"=>"89%", "% cloth diapers purchased"=>"11%", "% disposable diape...rtual)"=>2, "Vendors diapers purchased through"=>"Vendor 1, Vendor 2"}, :name=>"Diaper Acquisition"}
2024-03-13T17:39:28.1221638Z             got: {:entries=>{"% cloth diapers donated"=>"89%", "% cloth diapers purchased"=>"11%", "% disposable diape...rtual)"=>2, "Vendors diapers purchased through"=>"Vendor 1, Vendor 2"}, :name=>"Diaper Acquisition"}
2024-03-13T17:39:28.1223127Z 
2024-03-13T17:39:28.1223296Z        (compared using ==)
2024-03-13T17:39:28.1223611Z 
2024-03-13T17:39:28.1223753Z        Diff:
2024-03-13T17:39:28.1224209Z        @@ -1 +1 @@
2024-03-13T17:39:28.1230748Z        -:entries => {"% cloth diapers donated"=>"89%", "% cloth diapers purchased"=>"11%", "% disposable diapers donated"=>"78%", "% disposable diapers purchased"=>"22%", "Average monthly disposable diapers distributed"=>"143", "Cloth diapers collected from drives"=>"900", "Cloth diapers collected from drives (virtual)"=>"60", "Cloth diapers distributed"=>"300", "Disposable diapers collected from drives"=>"600", "Disposable diapers collected from drives (virtual)"=>"120", "Disposable diapers distributed"=>"240", "Money raised from product drives"=>"$60.00", "Money raised from product drives (virtual)"=>"$20.00", "Money spent purchasing diapers"=>"$60.00", "Purchased from"=>"Google, Walmart", "Total product drives"=>2, "Total product drives (virtual)"=>2, "Vendors diapers purchased through"=>"Vendor 1, Vendor 2"},
2024-03-13T17:39:28.1242228Z        +:entries => {"% cloth diapers donated"=>"89%", "% cloth diapers purchased"=>"11%", "% disposable diapers donated"=>"78%", "% disposable diapers purchased"=>"22%", "Average monthly disposable diapers distributed"=>"27", "Cloth diapers collected from drives"=>"900", "Cloth diapers collected from drives (virtual)"=>"60", "Cloth diapers distributed"=>"300", "Disposable diapers collected from drives"=>"600", "Disposable diapers collected from drives (virtual)"=>"120", "Disposable diapers distributed"=>"320", "Money raised from product drives"=>"$60.00", "Money raised from product drives (virtual)"=>"$20.00", "Money spent purchasing diapers"=>"$60.00", "Purchased from"=>"Google, Walmart", "Total product drives"=>2, "Total product drives (virtual)"=>2, "Vendors diapers purchased through"=>"Vendor 1, Vendor 2"},
2024-03-13T17:39:28.1248648Z      # ./spec/services/reports/acquisition_report_service_spec.rb:155:in `block (3 levels) in <top (required)>'
2024-03-13T17:39:28.1249586Z 
2024-03-13T17:39:28.1249900Z Finished in 37.01 seconds (files took 8.43 seconds to load)
2024-03-13T17:39:28.1250619Z 486 examples, 1 failure, 1 pending
2024-03-13T17:39:28.1250980Z 
2024-03-13T17:39:28.1251140Z Failed examples:
2024-03-13T17:39:28.1251382Z 
2024-03-13T17:39:28.1252579Z rspec ./spec/services/reports/acquisition_report_service_spec.rb:154 # Reports::AcquisitionReportService acquisition report should return the proper results on #report
2024-03-13T17:39:28.1253987Z 
2024-03-13T17:39:28.1254162Z Randomized with seed 42327
2024-03-13T17:39:28.1254472Z 
2024-03-13T17:39:28.4257800Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-13T17:39:28.4259736Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3964 / 6501 LOC (60.98%) covered.
2024-03-13T17:39:28.4997458Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_request_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-03-13T17:39:28.8858682Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-13T17:39:28.8860394Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10841 LOC (0.35%) covered.
2024-03-13T17:39:28.9135639Z ##[error]Process completed with exit code 1.
