2024-02-18T21:10:39.2552567Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-18T21:10:39.2554384Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-18T21:10:39.2596348Z shell: /usr/bin/bash -e {0}
2024-02-18T21:10:39.2596972Z env:
2024-02-18T21:10:39.2597637Z   POSTGRES_HOST: localhost
2024-02-18T21:10:39.2598280Z   DATABASE_HOST: localhost
2024-02-18T21:10:39.2598983Z   PG_USERNAME: postgres
2024-02-18T21:10:39.2599662Z   PG_PASSWORD: password
2024-02-18T21:10:39.2600294Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-18T21:10:39.2601005Z   POSTGRES_PORT: 5432
2024-02-18T21:10:39.2601677Z   PGHOST: localhost
2024-02-18T21:10:39.2602444Z   PGUSER: postgres
2024-02-18T21:10:39.2602953Z   RAILS_ENV: test
2024-02-18T21:10:39.2603703Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-18T21:10:39.2604498Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-18T21:10:39.2605356Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-18T21:10:39.2606155Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-18T21:10:39.2607217Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-18T21:10:39.2608522Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-18T21:10:39.2609744Z   EVENTS_READ: true
2024-02-18T21:10:39.2610453Z ##[endgroup]
2024-02-18T21:10:44.8957953Z W, [2024-02-18T21:10:44.895394 #2384]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-18T21:10:44.8959629Z W, [2024-02-18T21:10:44.895457 #2384]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T21:10:44.8961537Z W, [2024-02-18T21:10:44.895477 #2384]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T21:10:44.8965984Z W, [2024-02-18T21:10:44.895507 #2384]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-18T21:10:47.5438393Z W, [2024-02-18T21:10:47.543396 #2384]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-18T21:10:47.5441422Z W, [2024-02-18T21:10:47.543448 #2384]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T21:10:47.5445280Z W, [2024-02-18T21:10:47.543465 #2384]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T21:10:47.5450300Z W, [2024-02-18T21:10:47.543513 #2384]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-18T21:10:47.5503111Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-18T21:10:55.8499239Z 
2024-02-18T21:10:55.8500048Z Randomized with seed 52301
2024-02-18T21:10:56.8143107Z 
2024-02-18T21:10:56.8143752Z Audits
2024-02-18T21:10:56.8144765Z   while signed in as an organization admin
2024-02-18T21:10:56.8146545Z     GET #show
2024-02-18T21:10:56.9280057Z       is successful
2024-02-18T21:10:56.9280820Z     GET #edit
2024-02-18T21:10:56.9978439Z       is successful if the status of audit is `in_progress`
2024-02-18T21:10:57.0634483Z       redirects to #index if the status of audit is not `in_progress`
2024-02-18T21:10:57.0635487Z     GET #index
2024-02-18T21:10:57.1173797Z       is successful
2024-02-18T21:10:57.1174563Z     DELETE #destroy
2024-02-18T21:10:57.1175651Z       with valid params
2024-02-18T21:10:57.1614753Z         destroys the audit if the audit's status is `in_progress`
2024-02-18T21:10:57.2018268Z         destroys the audit if the audit's status is `confirms`
2024-02-18T21:10:57.2366164Z         can not destroy the audit if the audit's status is `finalized`
2024-02-18T21:10:57.2367187Z     POST #finalize
2024-02-18T21:10:57.3323256Z       sets the finalize status and saves an event
2024-02-18T21:10:57.3324231Z     POST #create
2024-02-18T21:10:57.3324806Z       with invalid params
2024-02-18T21:10:57.3738215Z         assigns a newly created but unsaved audit as @audit
2024-02-18T21:10:57.4279386Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-18T21:10:57.4667747Z         re-renders the 'new' template
2024-02-18T21:10:57.4668743Z       with valid params
2024-02-18T21:10:57.5103153Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-18T21:10:57.5487455Z         assigns a newly created audit as @audit
2024-02-18T21:10:57.5864416Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-18T21:10:57.6244043Z         creates a new Audit
2024-02-18T21:10:57.6629372Z         redirects to the #show after created audit
2024-02-18T21:10:57.6630247Z     GET #new
2024-02-18T21:10:57.7011446Z       is successful
2024-02-18T21:10:57.7012148Z 
2024-02-18T21:10:57.7012542Z Vendor
2024-02-18T21:10:57.7014183Z   when editing an existing vendor
2024-02-18T21:11:05.4599359Z     does not update a vendor with empty attributes
2024-02-18T21:11:06.2672732Z     can update the contact info for a vendor as a user
2024-02-18T21:11:06.2673712Z   when creating a new vendor
2024-02-18T21:11:06.9916203Z     cannot add a new vendor instance with empty attributes
2024-02-18T21:11:07.7699776Z     can create a new vendor instance as a user
2024-02-18T21:11:07.7700786Z   When vendor have purchases associated with them already
2024-02-18T21:11:08.3986864Z     can have a single vendor show semi-detailed stats about purchases
2024-02-18T21:11:09.0026910Z     can have existing vendors show in the #index with some summary stats
2024-02-18T21:11:09.0028052Z   When a user views the index page
2024-02-18T21:11:09.4806600Z     should have the vendor names in alphabetical order
2024-02-18T21:11:09.4807699Z 
2024-02-18T21:11:09.4807978Z Purchases
2024-02-18T21:11:09.4809399Z   while signed in as a normal user
2024-02-18T21:11:09.4810330Z     When creating a new purchase
2024-02-18T21:11:09.9773447Z       should not display inactive storage locations in dropdown
2024-02-18T21:11:09.9774508Z       via barcode entry
2024-02-18T21:11:10.7467416Z         a user can add items via scanning them in by barcode
2024-02-18T21:11:11.9804865Z         a user can add items that do not yet have a barcode
2024-02-18T21:11:12.8974088Z         User scan same barcode 2 times
2024-02-18T21:11:12.8974761Z       Editing purchase
2024-02-18T21:11:13.5324414Z         A user can view another organizations purchase
2024-02-18T21:11:14.0253261Z         A user can see purchased_from value
2024-02-18T21:11:14.0254560Z       via manual entry
2024-02-18T21:11:15.0280740Z         User can create a purchase using dollars decimal amount
2024-02-18T21:11:16.1269183Z         User can create a purchase IN THE PAST
2024-02-18T21:11:17.1376902Z         Does not include inactive items in the line item fields
2024-02-18T21:11:18.1801464Z         User can create vendor from purchase
2024-02-18T21:11:19.3526840Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-18T21:11:19.3527922Z         when creating a purchase incorrectly
2024-02-18T21:11:20.1555834Z           should display failure with error messages
2024-02-18T21:11:21.1109075Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-18T21:11:21.1110248Z     When visiting the index page
2024-02-18T21:11:21.1111435Z       When filtering on the index page
2024-02-18T21:11:21.9289464Z         User can filter the #index by storage location
2024-02-18T21:11:22.7559868Z         User can filter the #index by vendor
2024-02-18T21:11:22.7560572Z         behaves like Date Range Picker
2024-02-18T21:11:22.7561705Z           when choosing 'All Time'
2024-02-18T21:11:23.7259102Z             shows all the records
2024-02-18T21:11:23.7260009Z           when choosing a date range that only includes the previous week
2024-02-18T21:11:24.6546172Z             shows only 1 record
2024-02-18T21:11:24.6547435Z           when choosing 'Last Month'
2024-02-18T21:11:25.6277881Z             shows only 2 of the records
2024-02-18T21:11:25.6279004Z       In the middle of the year
2024-02-18T21:11:26.3523942Z         User sees purchased date column
2024-02-18T21:11:27.1320039Z         User can click to the new purchase form
2024-02-18T21:11:27.9053355Z         User sees total purchases value
2024-02-18T21:11:27.9054470Z     When visiting an existing purchase
2024-02-18T21:11:28.3716409Z       does not allow deletion of a purchase
2024-02-18T21:11:28.3717419Z   while signed in as an organization admin
2024-02-18T21:11:29.2396332Z     allows deletion of a purchase
2024-02-18T21:11:29.2397022Z 
2024-02-18T21:11:29.2397411Z User account management
2024-02-18T21:11:29.2398399Z   when not in staging
2024-02-18T21:11:30.1868474Z     should change an user name
2024-02-18T21:11:30.9582210Z     should fail when the email is invalid
2024-02-18T21:11:31.8479534Z     should change the email
2024-02-18T21:11:31.8480095Z   when in staging
2024-02-18T21:11:32.3774054Z     should not allow the user to change staging credentials
2024-02-18T21:11:32.8357907Z     should display staging warning
2024-02-18T21:11:32.8358521Z 
2024-02-18T21:11:32.8358822Z Admin Organization Management
2024-02-18T21:11:32.8361709Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-18T21:11:34.8482110Z     creates a new organization
2024-02-18T21:11:34.8482995Z   While signed in as an Administrative User (super admin)
2024-02-18T21:11:35.9245860Z     filters by organizations by name in organizations index page
2024-02-18T21:11:37.8088474Z     creates a new organization
2024-02-18T21:11:39.1033869Z     can view organization details
2024-02-18T21:11:39.1034497Z 
2024-02-18T21:11:39.1034842Z /partners/children
2024-02-18T21:11:39.1036192Z   GET #index
2024-02-18T21:11:39.1963738Z     should render without any issues
2024-02-18T21:11:39.2423621Z     should export CSV
2024-02-18T21:11:39.2424851Z 
2024-02-18T21:11:39.2425131Z StorageLocations
2024-02-18T21:11:39.2426734Z   While signed in
2024-02-18T21:11:39.2428700Z     GET #index
2024-02-18T21:11:39.2429434Z       csv
2024-02-18T21:11:39.2626459Z         succeeds
2024-02-18T21:11:39.3710562Z         includes headers followed by alphabetized item names
2024-02-18T21:11:39.3711536Z       html
2024-02-18T21:11:39.4072251Z         succeeds
2024-02-18T21:11:39.4072926Z         with inactive locations
2024-02-18T21:11:39.4453552Z           does not includes the inactive location
2024-02-18T21:11:39.4454765Z           with include_inactive_locations
2024-02-18T21:11:39.4828240Z             includes the inactive location
2024-02-18T21:11:39.4830926Z     POST #import_csv
2024-02-18T21:11:39.4832218Z       without a csv file
2024-02-18T21:11:39.4953392Z         redirects to :index
2024-02-18T21:11:39.5071122Z         presents a flash error message
2024-02-18T21:11:39.5071897Z       csv file with wrong headers
2024-02-18T21:11:39.5199828Z         redirects
2024-02-18T21:11:39.5319614Z         presents a flash error message
2024-02-18T21:11:39.5321586Z       with a csv file
2024-02-18T21:11:39.5465704Z         presents a flash notice message
2024-02-18T21:11:39.5515345Z         invokes .import_csv
2024-02-18T21:11:39.5659304Z         redirects
2024-02-18T21:11:39.5659879Z     GET #show
2024-02-18T21:11:39.5660915Z       html
2024-02-18T21:11:39.6350959Z         should return a correct response
2024-02-18T21:11:39.6351723Z         with version date set
2024-02-18T21:11:39.6352729Z           with no version found
2024-02-18T21:11:39.7093897Z             should show N/A
2024-02-18T21:11:39.7094832Z           with a version found
2024-02-18T21:11:39.8009887Z             should show the version specified
2024-02-18T21:11:39.8010906Z       csv
2024-02-18T21:11:39.8516324Z         should be successful
2024-02-18T21:11:39.8517180Z     GET #new
2024-02-18T21:11:40.0978689Z       returns http success
2024-02-18T21:11:40.0979261Z     PUT #deactivate
2024-02-18T21:11:40.1190984Z       discards
2024-02-18T21:11:40.1191820Z       with inventory
2024-02-18T21:11:40.1650248Z         does not discard
2024-02-18T21:11:40.1651052Z     GET #inventory
2024-02-18T21:11:40.1652446Z       when also including omitted items
2024-02-18T21:11:40.2134064Z         contains a collection of ducktyped entries that respond the same
2024-02-18T21:11:40.2620272Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-18T21:11:40.2621460Z       when also including inactive items
2024-02-18T21:11:40.3283573Z         returns a collection that also includes items that have been deactivated
2024-02-18T21:11:40.3284736Z       without any overrides
2024-02-18T21:11:40.3831347Z         returns a collection that only includes items at the storage location
2024-02-18T21:11:40.3832663Z     GET #destroy
2024-02-18T21:11:40.4120612Z       redirects to #index
2024-02-18T21:11:40.4121300Z     GET #edit
2024-02-18T21:11:40.4444415Z       returns http success
2024-02-18T21:11:40.4445125Z     Looking at a different organization
2024-02-18T21:11:40.6208667Z       redirects the user to the sign-in page for CRUD actions
2024-02-18T21:11:40.6209899Z     PUT #reactivate
2024-02-18T21:11:40.6393913Z       undiscards
2024-02-18T21:11:40.6394846Z   While not signed in
2024-02-18T21:11:40.6460060Z     redirects the user to the sign-in page for CRUD actions
2024-02-18T21:11:40.6461070Z 
2024-02-18T21:11:40.6461396Z Admin::Organizations
2024-02-18T21:11:40.6463071Z   When logged in as a non-admin user
2024-02-18T21:11:40.6464345Z     GET #index
2024-02-18T21:11:40.6598563Z       redirects
2024-02-18T21:11:40.6599357Z     GET #edit
2024-02-18T21:11:40.6728994Z       redirects
2024-02-18T21:11:40.6854189Z     PUT #update
2024-02-18T21:11:40.6854925Z       redirects
2024-02-18T21:11:40.6855780Z     GET #new
2024-02-18T21:11:40.6978591Z       redirects
2024-02-18T21:11:40.6979334Z     POST #create
2024-02-18T21:11:40.7117236Z       redirects
2024-02-18T21:11:40.7118009Z   When logged in as a super admin
2024-02-18T21:11:40.7119852Z     DELETE #destroy
2024-02-18T21:11:40.7120610Z       with a valid organization id
2024-02-18T21:11:41.2288087Z         redirects to #index
2024-02-18T21:11:41.2288754Z     DELETE #destroy
2024-02-18T21:11:41.5909785Z       redirects
2024-02-18T21:11:41.5910425Z     GET #show
2024-02-18T21:11:41.8038059Z       returns http success
2024-02-18T21:11:41.8038591Z     PUT #update
2024-02-18T21:11:41.8227019Z       redirect
2024-02-18T21:11:41.8227447Z     GET #edit
2024-02-18T21:11:42.0312069Z       returns http success
2024-02-18T21:11:42.0312781Z     GET #new
2024-02-18T21:11:42.0738615Z       returns http success
2024-02-18T21:11:42.0739699Z       when given a token that matches a account request that has already been processed
2024-02-18T21:11:42.3028824Z         should render new with a flash error message
2024-02-18T21:11:42.3029603Z       when given a valid account request token in the query parameters
2024-02-18T21:11:42.3609073Z         should render new with pre populate input fields from the account_request
2024-02-18T21:11:42.3609835Z     PATCH #update
2024-02-18T21:11:42.3610404Z       with an invalid update
2024-02-18T21:11:42.5732579Z         redirects to #edit with an error message
2024-02-18T21:11:42.7929317Z         returns http success
2024-02-18T21:11:42.7930147Z       with a valid update
2024-02-18T21:11:42.9812653Z         redirects to #index
2024-02-18T21:11:42.9813546Z     GET #index
2024-02-18T21:11:43.0116395Z       returns http success
2024-02-18T21:11:43.0117224Z     POST #create
2024-02-18T21:11:43.0117853Z       with valid params
2024-02-18T21:11:43.2673829Z         creates an organization and redirects to #index
2024-02-18T21:11:43.2674834Z       with invalid params
2024-02-18T21:11:43.4306868Z         does not create an organization and renders #create with an error message
2024-02-18T21:11:43.4310415Z 
2024-02-18T21:11:43.4312339Z Dashboard
2024-02-18T21:11:43.4313016Z   With a new essentials bank
2024-02-18T21:12:11.4328324Z     displays the getting started guide until the steps are completed
2024-02-18T21:12:11.4329046Z   With an existing essentials bank
2024-02-18T21:12:11.4330136Z     Donations
2024-02-18T21:12:12.3313542Z       has a link to create a new donation
2024-02-18T21:12:12.3315152Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T21:12:12.3316220Z         filtering to 'Last Month'
2024-02-18T21:12:13.8239929Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T21:12:13.8241835Z       given 1 Donation on 2024-01-31 (only if a valid date), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T21:12:13.8242759Z         filtering to 'This Month'
2024-02-18T21:12:17.1627712Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T21:12:17.1630561Z       given 1 Donation on 2024-01-19 (only if a valid date), 0 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:17.1631537Z         filtering to 'Last 30 Days'
2024-02-18T21:12:20.5249137Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T21:12:20.5251323Z       given 1 Donation on 2024-02-17 (only if a valid date), 1 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:20.5252678Z         filtering to 'Today'
2024-02-18T21:12:22.0463421Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T21:12:22.0464947Z       given 1 Donation on 2022-02-17 (only if a valid date), 1 during 2022-02-18..2023-11-09, and 1 on 2023-11-10
2024-02-18T21:12:22.0465987Z         filtering to '' (February 18, 2022 - November 9, 2023)
2024-02-18T21:12:23.4425220Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T21:12:23.4427093Z       given 1 Donation on 2024-02-11 (only if a valid date), 4 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:23.4428373Z         filtering to 'Last 7 Days'
2024-02-18T21:12:24.9736904Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T21:12:24.9738626Z       given 1 Donation on 2024-02-16 (only if a valid date), 0 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T21:12:24.9739792Z         filtering to 'Yesterday'
2024-02-18T21:12:28.3110272Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T21:12:28.3112413Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T21:12:28.3113738Z         filtering to 'This Year'
2024-02-18T21:12:29.7858524Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T21:12:29.7859598Z     Purchases
2024-02-18T21:12:30.6926731Z       has a link to create a new purchase
2024-02-18T21:12:30.6928868Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T21:12:30.6930387Z         filtering to 'This Month'
2024-02-18T21:12:32.2740632Z           shows correct 3 Recent Purchase link(s)
2024-02-18T21:12:32.2742496Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T21:12:32.2743739Z         filtering to 'Last Month'
2024-02-18T21:12:33.6650037Z           shows correct 1 Recent Purchase link(s)
2024-02-18T21:12:33.6651656Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 1 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:33.6652577Z         filtering to 'Today'
2024-02-18T21:12:35.0632172Z           shows correct 1 Recent Purchase link(s)
2024-02-18T21:12:35.0633911Z       given 1 Purchase on 2024-02-16  (unless 'All Time'), 3 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T21:12:35.0635214Z         filtering to 'Yesterday'
2024-02-18T21:12:36.5453229Z           shows correct 3 Recent Purchase link(s)
2024-02-18T21:12:36.5455177Z       given 1 Purchase on 2022-02-17  (unless 'All Time'), 3 during 2022-02-18..2023-11-28, and 1 on 2023-11-29
2024-02-18T21:12:36.5456873Z         filtering to '' (February 18, 2022 - November 28, 2023)
2024-02-18T21:12:38.0877438Z           shows correct 3 Recent Purchase link(s)
2024-02-18T21:12:38.0879551Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:38.0881101Z         filtering to 'Last 7 Days'
2024-02-18T21:12:39.6652114Z           shows correct 2 Recent Purchase link(s)
2024-02-18T21:12:39.6653867Z       given 1 Purchase on 2024-01-19  (unless 'All Time'), 0 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:39.6655371Z         filtering to 'Last 30 Days'
2024-02-18T21:12:43.0376068Z           shows correct 0 Recent Purchase link(s)
2024-02-18T21:12:43.0377730Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T21:12:43.0378605Z         filtering to 'This Year'
2024-02-18T21:12:44.4117263Z           shows correct 1 Recent Purchase link(s)
2024-02-18T21:12:44.4118214Z     Signage
2024-02-18T21:12:47.3087959Z       shows their organization name unless they have a logo set
2024-02-18T21:12:47.3089030Z     Product Drives
2024-02-18T21:12:47.8967283Z       has a widget for product drive summary data
2024-02-18T21:12:47.8968830Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 1 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:47.8969831Z         filtering to 'Today'
2024-02-18T21:12:49.2933170Z           shows the correct total money raised
2024-02-18T21:12:50.6972450Z           shows the correct total donations
2024-02-18T21:12:52.0865373Z           shows 1 Recent Donation link(s)
2024-02-18T21:12:52.0867325Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:12:52.0869016Z         filtering to 'Last 7 Days'
2024-02-18T21:12:55.4167166Z           shows 0 Recent Donation link(s)
2024-02-18T21:12:56.7613569Z           shows the correct total money raised
2024-02-18T21:12:58.1229671Z           shows the correct total donations
2024-02-18T21:12:58.1230718Z       Product drive behaviour with Mixed Donation types
2024-02-18T21:12:58.8528330Z         only counts product drive donations for product drive
2024-02-18T21:12:59.5938834Z         only counts product drive money raised
2024-02-18T21:13:00.3151287Z         only shows product drive donations as product drive donations
2024-02-18T21:13:00.3152860Z       given 1 Product Drive Donation on 2024-02-16 (unless 'All Time'), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T21:13:00.3154052Z         filtering to 'Yesterday'
2024-02-18T21:13:01.8459200Z           shows the correct total donations
2024-02-18T21:13:03.3705749Z           shows 3 Recent Donation link(s)
2024-02-18T21:13:04.8905043Z           shows the correct total money raised
2024-02-18T21:13:04.8906743Z       given 1 Product Drive Donation on 2022-02-17 (unless 'All Time'), 0 during 2022-02-18..2024-01-05, and 1 on 2024-01-06
2024-02-18T21:13:04.8908163Z         filtering to '' (February 18, 2022 - January 5, 2024)
2024-02-18T21:13:08.2299663Z           shows 0 Recent Donation link(s)
2024-02-18T21:13:09.5880387Z           shows the correct total donations
2024-02-18T21:13:10.9178032Z           shows the correct total money raised
2024-02-18T21:13:10.9179655Z       given 1 Product Drive Donation on 2024-01-19 (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:10.9180599Z         filtering to 'Last 30 Days'
2024-02-18T21:13:12.3897062Z           shows the correct total money raised
2024-02-18T21:13:13.8569672Z           shows the correct total donations
2024-02-18T21:13:15.3287992Z           shows 3 Recent Donation link(s)
2024-02-18T21:13:15.3289481Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T21:13:15.3290504Z         filtering to 'This Year'
2024-02-18T21:13:16.8414119Z           shows the correct total donations
2024-02-18T21:13:18.3858031Z           shows 3 Recent Donation link(s)
2024-02-18T21:13:19.8927345Z           shows the correct total money raised
2024-02-18T21:13:19.8929200Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T21:13:19.8930572Z         filtering to 'This Month'
2024-02-18T21:13:21.2804284Z           shows the correct total money raised
2024-02-18T21:13:22.7079190Z           shows 1 Recent Donation link(s)
2024-02-18T21:13:24.1040310Z           shows the correct total donations
2024-02-18T21:13:24.1042312Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T21:13:24.1043979Z         filtering to 'Last Month'
2024-02-18T21:13:27.4589735Z           shows 0 Recent Donation link(s)
2024-02-18T21:13:28.7890808Z           shows the correct total donations
2024-02-18T21:13:30.2612394Z           shows the correct total money raised
2024-02-18T21:13:30.2613279Z     Manufacturer Donations
2024-02-18T21:13:30.8803846Z       has a link to create a new donation
2024-02-18T21:13:30.8805629Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 3 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:30.8807045Z         filtering to 'Last 7 Days'
2024-02-18T21:13:32.6027148Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-18T21:13:32.6029597Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T21:13:32.6031115Z         filtering to 'Last Month'
2024-02-18T21:13:34.5092812Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T21:13:34.5096932Z       given 1 Manufacturer donating on 2024-02-16  (unless 'All Time'), 9 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T21:13:34.5098389Z         filtering to 'Yesterday'
2024-02-18T21:13:36.5684304Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T21:13:36.5685831Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 1 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:36.5686674Z         filtering to 'Today'
2024-02-18T21:13:38.0335877Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-18T21:13:38.0339389Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 9 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T21:13:38.0340989Z         filtering to 'This Month'
2024-02-18T21:13:40.5256343Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T21:13:40.5258607Z       given 1 Manufacturer donating on 2024-01-19  (unless 'All Time'), 5 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:40.5259764Z         filtering to 'Last 30 Days'
2024-02-18T21:13:42.5040590Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-18T21:13:42.5042420Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 7 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:42.5043438Z         filtering to 'All Time'
2024-02-18T21:13:44.5863619Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-18T21:13:44.5865661Z       given 1 Manufacturer donating on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2023-11-16, and 1 on 2023-11-17
2024-02-18T21:13:44.5867371Z         filtering to '' (February 18, 2022 - November 16, 2023)
2024-02-18T21:13:46.2802245Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T21:13:46.2804374Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 5 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T21:13:46.2805347Z         filtering to 'This Year'
2024-02-18T21:13:48.2518322Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-18T21:13:48.2520357Z     Distributions
2024-02-18T21:13:49.1703668Z       has a link to create a new distribution
2024-02-18T21:13:49.1705219Z       given 1 Distribution on 2022-02-17  (unless 'All Time'), 0 during 2022-02-18..2023-11-07, and 1 on 2023-11-08
2024-02-18T21:13:49.1706587Z         filtering to '' (February 18, 2022 - November 7, 2023)
2024-02-18T21:13:52.5322926Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:13:52.5324791Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:52.5326281Z         filtering to 'Today'
2024-02-18T21:13:55.9268764Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:13:55.9270517Z       given 1 Distribution on 2024-01-19  (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:55.9271512Z         filtering to 'Last 30 Days'
2024-02-18T21:13:57.3389701Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T21:13:57.3391768Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T21:13:57.3393050Z         filtering to 'Last Month'
2024-02-18T21:13:58.6885499Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T21:13:58.6887421Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:13:58.6888814Z         filtering to 'All Time'
2024-02-18T21:14:02.0345584Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:14:02.0347650Z       given 1 Distribution on 2024-02-16  (unless 'All Time'), 1 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T21:14:02.0349007Z         filtering to 'Yesterday'
2024-02-18T21:14:03.4095344Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T21:14:03.4097466Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T21:14:03.4098766Z         filtering to 'This Month'
2024-02-18T21:14:06.7770792Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:14:06.7772589Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T21:14:06.7774110Z         filtering to 'This Year'
2024-02-18T21:14:10.1326186Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:14:10.1327969Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T21:14:10.1329239Z         filtering to 'Last 7 Days'
2024-02-18T21:14:13.5161043Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T21:14:13.5162560Z     Inventory Totals
2024-02-18T21:14:13.5163340Z       Summary
2024-02-18T21:14:14.2231347Z         displays the on-hand totals
2024-02-18T21:14:14.2232170Z         when constrained to date range
2024-02-18T21:14:15.2825043Z           does not change
2024-02-18T21:14:15.2826774Z 
2024-02-18T21:14:15.2828501Z Organization management
2024-02-18T21:14:15.2829369Z   while signed in as an organization admin
2024-02-18T21:14:16.2656179Z     can re-activate a user in the organization
2024-02-18T21:14:16.7915999Z     can see 'Make user' button for admins
2024-02-18T21:14:17.7557404Z     can deactivate a user in the organization
2024-02-18T21:14:18.2489986Z     can re-invite a user to an organization after 7 days
2024-02-18T21:14:19.2271230Z     can add a new user to an organization
2024-02-18T21:14:19.2272080Z     Viewing the organization
2024-02-18T21:14:19.7717903Z       can view organization details
2024-02-18T21:14:19.7718788Z     Editing the organization
2024-02-18T21:14:20.7561555Z       can select if the org shows year-to-date values on the distribution printout
2024-02-18T21:14:21.7625434Z       can select if the org repackages essentials
2024-02-18T21:14:22.7395004Z       can select if the org distributes essentials monthly
2024-02-18T21:14:23.5951803Z       can set the NDBN Member ID
2024-02-18T21:14:24.4444001Z       can set a reminder and a deadline day
2024-02-18T21:14:26.0399854Z       can select and deselect Required Partner Fields
2024-02-18T21:14:27.0323601Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-18T21:14:28.2072397Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-18T21:14:29.1000258Z       can set a default storage location on the organization
2024-02-18T21:14:30.0837008Z       can enable if the org uses single step invite and approve partner process
2024-02-18T21:14:30.0838026Z   while signed in as a normal user
2024-02-18T21:14:30.5665072Z     cannot see 'Make user' button for admins
2024-02-18T21:14:31.0302122Z     can see summary details about the organization as a user
2024-02-18T21:14:31.0302848Z 
2024-02-18T21:14:31.0303139Z DonationSites
2024-02-18T21:14:31.0304094Z   while signed in
2024-02-18T21:14:31.0305097Z     GET #index
2024-02-18T21:14:31.0306381Z       html
2024-02-18T21:14:31.0685270Z         is expected to be successful
2024-02-18T21:14:31.0686045Z       csv
2024-02-18T21:14:31.0848910Z         is expected to be successful
2024-02-18T21:14:31.0849906Z 
2024-02-18T21:14:31.0850500Z /partners/profiles
2024-02-18T21:14:31.0851785Z   PUT #update
2024-02-18T21:14:31.1430642Z     updates the partner and profile
2024-02-18T21:14:31.1431726Z     when updating an existing value to a blank value
2024-02-18T21:14:31.2064940Z       does store N/A in the database
2024-02-18T21:14:31.2745187Z       updates the partner profile attribute to a blank value
2024-02-18T21:14:31.3270414Z       does not update other partner profile attributes to blank
2024-02-18T21:14:31.3271370Z     with no social media
2024-02-18T21:14:31.4334698Z       shows an error
2024-02-18T21:14:31.4335746Z   GET #edit
2024-02-18T21:14:31.5146991Z     displays the partner
2024-02-18T21:14:31.6110383Z     has "Yes" radio button value when value is true
2024-02-18T21:14:31.7068570Z     has "No" radio button value when value is false
2024-02-18T21:14:31.7984711Z     does not have default radio button value when value is nil
2024-02-18T21:14:31.7985836Z   GET #show
2024-02-18T21:14:31.8576233Z     displays the partner
2024-02-18T21:14:31.9133535Z     shows correct values for yes/no buttons
2024-02-18T21:14:31.9134341Z 
2024-02-18T21:14:31.9134581Z Kit management
2024-02-18T21:14:32.8126136Z   can create a new kit as a user with the proper quantity
2024-02-18T21:14:34.2940339Z   can allocate and deallocate quantity per storage location from kit index
2024-02-18T21:14:34.8751482Z   should not display inactive storage locations under allocations
2024-02-18T21:14:34.8752593Z   when there is no kit quantity
2024-02-18T21:14:36.0051483Z     will not change quantity amounts when deallocating
2024-02-18T21:14:36.0052836Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-18T21:14:37.1030807Z     will not change quantity amounts when allocating
2024-02-18T21:14:37.1031625Z 
2024-02-18T21:14:37.1031931Z /account_requests
2024-02-18T21:14:37.1033785Z   GET #confirm
2024-02-18T21:14:37.1034741Z     when given a token that has already been confirmed
2024-02-18T21:14:37.2990049Z       should render a error that says that is code provided is invalid
2024-02-18T21:14:37.2991047Z     when given a invalid token
2024-02-18T21:14:37.3056251Z       should render a error that says that is code provided is invalid
2024-02-18T21:14:37.3057248Z     when given a valid token
2024-02-18T21:14:37.3286678Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-18T21:14:37.3288078Z   GET #new
2024-02-18T21:14:37.3418641Z     renders a successful response
2024-02-18T21:14:37.3419139Z   GET #confirmation
2024-02-18T21:14:37.3419885Z     when given a valid token
2024-02-18T21:14:37.3559223Z       should render the confirmation template
2024-02-18T21:14:37.3560114Z     when given a invalid token
2024-02-18T21:14:37.3863006Z       should render a error that says that is code provided is invalid
2024-02-18T21:14:37.3864169Z     when given a token that has already been confirmed
2024-02-18T21:14:37.5553507Z       should render a error that says that is code provided is invalid
2024-02-18T21:14:37.5554480Z   POST #create
2024-02-18T21:14:37.5554957Z     with valid parameters
2024-02-18T21:14:37.5697166Z       redirects to the created account_request confirmation
2024-02-18T21:14:37.5820076Z       creates a new AccountRequest
2024-02-18T21:14:37.5970477Z       delivers the confirmation email via default queue
2024-02-18T21:14:37.5971185Z     with invalid parameters
2024-02-18T21:14:37.6167802Z       does not create a new AccountRequest
2024-02-18T21:14:37.6338196Z       renders a successful response (i.e. to display the 'new' template)
2024-02-18T21:14:37.6338970Z   GET #received
2024-02-18T21:14:37.6339573Z     when given a invalid token
2024-02-18T21:14:37.6399893Z       should render a error that says that is code provided is invalid
2024-02-18T21:14:37.6400889Z     when given a valid token
2024-02-18T21:14:37.6538718Z       should render the received template
2024-02-18T21:14:37.6539728Z 
2024-02-18T21:14:37.6539929Z Profiles
2024-02-18T21:14:37.6541257Z   GET #edit
2024-02-18T21:14:37.7507393Z     returns http success
2024-02-18T21:14:37.7508038Z   POST #update
2024-02-18T21:14:37.7508767Z     successful save
2024-02-18T21:14:37.7986863Z       update partner
2024-02-18T21:14:37.8422591Z       redirects to #show
2024-02-18T21:14:37.8423425Z     when updating an existing value to a blank value
2024-02-18T21:14:37.8905678Z       should have blank values
2024-02-18T21:14:37.9411912Z       update partner
2024-02-18T21:14:37.9412922Z 
2024-02-18T21:14:37.9413180Z Managing requests
2024-02-18T21:14:37.9414726Z   creating a request
2024-02-18T21:14:37.9415822Z     GIVEN a partner user is permitted to make a request
2024-02-18T21:14:37.9416905Z       WHEN they create a request with only a comment
2024-02-18T21:14:38.9060485Z         should be created without any issue
2024-02-18T21:14:38.9061290Z       WHEN they create a request inproperly by not inputting anything
2024-02-18T21:14:39.8250105Z         should show an error message with the instructions
2024-02-18T21:14:39.8250960Z       WHEN they create a request properly
2024-02-18T21:14:39.8252131Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T21:14:42.0742814Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-18T21:14:42.0744157Z   creating a individuals/family request
2024-02-18T21:14:42.0745002Z     GIVEN a partner user is permitted to make a request
2024-02-18T21:14:42.0746120Z       WHEN they create a request properly
2024-02-18T21:14:42.0747393Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T21:14:44.1741223Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-18T21:14:44.1742220Z       WHEN they create a request inproperly
2024-02-18T21:14:45.0906111Z         should show an error message with the instructions
2024-02-18T21:14:45.1794456Z W, [2024-02-18T13:14:45.179182 #2416]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-18T21:14:45.1796252Z W, [2024-02-18T13:14:45.179238 #2416]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T21:14:45.1798384Z W, [2024-02-18T13:14:45.179256 #2416]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T21:14:45.1800827Z W, [2024-02-18T13:14:45.179292 #2416]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-18T21:14:45.1802085Z 
2024-02-18T21:14:45.1802586Z Finished in 3 minutes 49.3 seconds (files took 8.07 seconds to load)
2024-02-18T21:14:45.1803593Z 235 examples, 0 failures
2024-02-18T21:14:45.1803978Z 
2024-02-18T21:14:45.1804205Z Randomized with seed 52301
2024-02-18T21:14:45.1804601Z 
2024-02-18T21:14:45.4836544Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3818 / 6400 LOC (59.66%) covered.
2024-02-18T21:14:45.9937668Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10657 LOC (0.36%) covered.
