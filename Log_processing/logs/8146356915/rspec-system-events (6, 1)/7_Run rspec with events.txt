2024-03-04T20:10:30.9462048Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T20:10:30.9462942Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T20:10:30.9491259Z shell: /usr/bin/bash -e {0}
2024-03-04T20:10:30.9491743Z env:
2024-03-04T20:10:30.9492071Z   POSTGRES_HOST: localhost
2024-03-04T20:10:30.9492424Z   DATABASE_HOST: localhost
2024-03-04T20:10:30.9492881Z   PG_USERNAME: postgres
2024-03-04T20:10:30.9493249Z   PG_PASSWORD: password
2024-03-04T20:10:30.9493629Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T20:10:30.9494131Z   POSTGRES_PORT: 5432
2024-03-04T20:10:30.9494453Z   PGHOST: localhost
2024-03-04T20:10:30.9494798Z   PGUSER: postgres
2024-03-04T20:10:30.9495217Z   RAILS_ENV: test
2024-03-04T20:10:30.9495583Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T20:10:30.9496042Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T20:10:30.9496474Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T20:10:30.9496917Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T20:10:30.9497559Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T20:10:30.9498184Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T20:10:30.9499043Z   EVENTS_READ: true
2024-03-04T20:10:30.9499491Z ##[endgroup]
2024-03-04T20:10:36.6537252Z W, [2024-03-04T20:10:36.653384 #2426]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T20:10:36.6539925Z W, [2024-03-04T20:10:36.653432 #2426]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:10:36.6542509Z W, [2024-03-04T20:10:36.653447 #2426]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:10:36.6547779Z W, [2024-03-04T20:10:36.653470 #2426]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T20:10:39.2021565Z W, [2024-03-04T20:10:39.201813 #2426]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T20:10:39.2023706Z W, [2024-03-04T20:10:39.201860 #2426]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:10:39.2025204Z W, [2024-03-04T20:10:39.201912 #2426]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:10:39.2027449Z W, [2024-03-04T20:10:39.201978 #2426]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T20:10:39.2079046Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T20:10:47.7210876Z 
2024-03-04T20:10:47.7211697Z Randomized with seed 63553
2024-03-04T20:10:48.6925364Z 
2024-03-04T20:10:48.6926213Z Admin::Partners
2024-03-04T20:10:48.6927024Z   When logged in as a super admin
2024-03-04T20:10:48.6928314Z     PUT #update
2024-03-04T20:10:48.6929022Z       unsuccessful save due to empty params
2024-03-04T20:10:48.7891736Z         renders #edit template with error message
2024-03-04T20:10:48.7892533Z       successful save
2024-03-04T20:10:48.8287997Z         updates partner
2024-03-04T20:10:48.8640943Z         redirects
2024-03-04T20:10:48.8641976Z     GET #edit
2024-03-04T20:10:48.9150545Z       returns http success
2024-03-04T20:10:48.9151298Z     GET #index
2024-03-04T20:10:48.9457758Z       returns http success
2024-03-04T20:10:48.9458568Z     GET #show
2024-03-04T20:10:48.9960325Z       returns http success
2024-03-04T20:10:48.9962023Z 
2024-03-04T20:10:48.9962363Z StorageLocations
2024-03-04T20:10:48.9963542Z   While signed in
2024-03-04T20:10:48.9965973Z     GET #destroy
2024-03-04T20:10:49.0437153Z       redirects to #index
2024-03-04T20:10:49.0437839Z     POST #import_csv
2024-03-04T20:10:49.0438666Z       without a csv file
2024-03-04T20:10:49.0588939Z         presents a flash error message
2024-03-04T20:10:49.0705835Z         redirects to :index
2024-03-04T20:10:49.0706557Z       csv file with wrong headers
2024-03-04T20:10:49.0852851Z         redirects
2024-03-04T20:10:49.0974998Z         presents a flash error message
2024-03-04T20:10:49.0975781Z       with a csv file
2024-03-04T20:10:49.1027718Z         invokes .import_csv
2024-03-04T20:10:49.1179901Z         presents a flash notice message
2024-03-04T20:10:49.1326380Z         redirects
2024-03-04T20:10:49.1326956Z     GET #index
2024-03-04T20:10:49.1328126Z       html
2024-03-04T20:10:49.1770426Z         succeeds
2024-03-04T20:10:49.1771146Z         with inactive locations
2024-03-04T20:10:49.2161455Z           does not includes the inactive location
2024-03-04T20:10:49.2162335Z           with include_inactive_locations
2024-03-04T20:10:49.2537606Z             includes the inactive location
2024-03-04T20:10:49.2538626Z       csv
2024-03-04T20:10:49.2723380Z         succeeds
2024-03-04T20:10:49.3920536Z         includes headers followed by alphabetized item names
2024-03-04T20:10:49.3921172Z     GET #new
2024-03-04T20:10:49.6894594Z       returns http success
2024-03-04T20:10:49.6895437Z     Looking at a different organization
2024-03-04T20:10:49.8649170Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T20:10:49.8650474Z     GET #edit
2024-03-04T20:10:49.9032418Z       returns http success
2024-03-04T20:10:49.9033514Z     GET #show
2024-03-04T20:10:49.9034062Z       html
2024-03-04T20:10:49.9739342Z         should return a correct response
2024-03-04T20:10:49.9740183Z         with version date set
2024-03-04T20:10:49.9740889Z           with no version found
2024-03-04T20:10:50.0474575Z             should show N/A
2024-03-04T20:10:50.0475360Z           with a version found
2024-03-04T20:10:50.1323051Z             should show the version specified
2024-03-04T20:10:50.1324207Z       csv
2024-03-04T20:10:50.1857050Z         should be successful
2024-03-04T20:10:50.1857852Z     PUT #reactivate
2024-03-04T20:10:50.2030190Z       undiscards
2024-03-04T20:10:50.2030832Z     PUT #deactivate
2024-03-04T20:10:50.2226316Z       discards
2024-03-04T20:10:50.2227434Z       with inventory
2024-03-04T20:10:50.2719096Z         does not discard
2024-03-04T20:10:50.2719850Z     GET #inventory
2024-03-04T20:10:50.2720782Z       when also including inactive items
2024-03-04T20:10:50.3411808Z         returns a collection that also includes items that have been deactivated
2024-03-04T20:10:50.3413116Z       when also including omitted items
2024-03-04T20:10:50.3903181Z         contains a collection of ducktyped entries that respond the same
2024-03-04T20:10:50.4392291Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T20:10:50.4393234Z       without any overrides
2024-03-04T20:10:50.4907091Z         returns a collection that only includes items at the storage location
2024-03-04T20:10:50.4908312Z   While not signed in
2024-03-04T20:10:50.4972540Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T20:10:50.4973147Z 
2024-03-04T20:10:50.4973342Z Profiles
2024-03-04T20:10:50.4974677Z   GET #edit
2024-03-04T20:10:50.6224769Z     returns http success
2024-03-04T20:10:50.6225739Z   POST #update
2024-03-04T20:10:50.6226382Z     when updating an existing value to a blank value
2024-03-04T20:10:50.6667783Z       update partner
2024-03-04T20:10:50.7081464Z       should have blank values
2024-03-04T20:10:50.7082146Z     successful save
2024-03-04T20:10:50.7504432Z       update partner
2024-03-04T20:10:50.7909743Z       redirects to #show
2024-03-04T20:10:50.7910521Z 
2024-03-04T20:10:50.7910876Z /partners/children
2024-03-04T20:10:50.7912228Z   GET #index
2024-03-04T20:10:50.8666508Z     should export CSV
2024-03-04T20:10:50.9260514Z     should render without any issues
2024-03-04T20:10:50.9261404Z 
2024-03-04T20:10:50.9261711Z Kit management
2024-03-04T20:10:57.2559005Z   can create a new kit as a user with the proper quantity
2024-03-04T20:10:57.8416585Z   should not display inactive storage locations under allocations
2024-03-04T20:10:59.3251310Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T20:10:59.3252373Z   when there is no kit quantity
2024-03-04T20:11:00.4653533Z     will not change quantity amounts when deallocating
2024-03-04T20:11:00.4655030Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T20:11:01.5842325Z     will not change quantity amounts when allocating
2024-03-04T20:11:01.5843039Z 
2024-03-04T20:11:01.5843278Z Organization management
2024-03-04T20:11:01.5844597Z   while signed in as an organization admin
2024-03-04T20:11:02.1891175Z     can re-invite a user to an organization after 7 days
2024-03-04T20:11:03.1475077Z     can add a new user to an organization
2024-03-04T20:11:04.1367142Z     can re-activate a user in the organization
2024-03-04T20:11:05.0868742Z     can deactivate a user in the organization
2024-03-04T20:11:05.6252637Z     can see 'Make user' button for admins
2024-03-04T20:11:05.6253323Z     Viewing the organization
2024-03-04T20:11:06.1837405Z       can view organization details
2024-03-04T20:11:06.1838040Z     Editing the organization
2024-03-04T20:11:07.1867490Z       can enable if the org uses single step invite and approve partner process
2024-03-04T20:11:08.1609258Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T20:11:09.1285039Z       can select if the org repackages essentials
2024-03-04T20:11:10.1115434Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T20:11:10.9516857Z       can set the NDBN Member ID
2024-03-04T20:11:12.1023555Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T20:11:12.9600996Z       can set a reminder and a deadline day
2024-03-04T20:11:13.9460428Z       can select if the org distributes essentials monthly
2024-03-04T20:11:15.3741272Z       can select and deselect Required Partner Fields
2024-03-04T20:11:16.1949783Z       can set a default storage location on the organization
2024-03-04T20:11:16.1951069Z   while signed in as a normal user
2024-03-04T20:11:16.6782120Z     cannot see 'Make user' button for admins
2024-03-04T20:11:17.1564317Z     can see summary details about the organization as a user
2024-03-04T20:11:17.1565016Z 
2024-03-04T20:11:17.1565259Z Vendor
2024-03-04T20:11:17.1566687Z   when creating a new vendor
2024-03-04T20:11:17.8979747Z     cannot add a new vendor instance with empty attributes
2024-03-04T20:11:18.6744957Z     can create a new vendor instance as a user
2024-03-04T20:11:18.6746277Z   When a user views the index page
2024-03-04T20:11:19.1504095Z     should have the vendor names in alphabetical order
2024-03-04T20:11:19.1504880Z   when editing an existing vendor
2024-03-04T20:11:19.9198967Z     does not update a vendor with empty attributes
2024-03-04T20:11:20.7012320Z     can update the contact info for a vendor as a user
2024-03-04T20:11:20.7014746Z   When vendor have purchases associated with them already
2024-03-04T20:11:21.3356425Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T20:11:21.9334283Z     can have existing vendors show in the #index with some summary stats
2024-03-04T20:11:21.9334996Z 
2024-03-04T20:11:21.9335357Z Donations
2024-03-04T20:11:21.9336408Z   while signed in
2024-03-04T20:11:21.9337501Z     GET #index
2024-03-04T20:11:21.9338454Z       csv
2024-03-04T20:11:21.9821259Z         is expected to be successful
2024-03-04T20:11:21.9822194Z       html
2024-03-04T20:11:22.0254825Z         should have the columns source and details
2024-03-04T20:11:22.0644552Z         is expected to be successful
2024-03-04T20:11:22.0645496Z         when given a misc donation
2024-03-04T20:11:22.1218298Z           should display Misc Donation and a truncated comment
2024-03-04T20:11:22.1219550Z         when given a donation site
2024-03-04T20:11:22.1753343Z           should display Donation Site and the name of the site
2024-03-04T20:11:22.1754313Z         when given a manufacturer
2024-03-04T20:11:22.2287527Z           should display Manufacturer and the manufacturer name
2024-03-04T20:11:22.2288817Z         when given a product drive
2024-03-04T20:11:22.2829102Z           should display Product Drive and the name of the drive
2024-03-04T20:11:22.2831022Z     when an non-finalized audit has been performed on the donated items
2024-03-04T20:11:22.4371003Z       does not shows a warning
2024-03-04T20:11:22.4371909Z     GET #edit
2024-03-04T20:11:22.4373092Z       when an finalized audit has been performed on the donated items
2024-03-04T20:11:22.5687278Z         shows a warning
2024-03-04T20:11:22.5688323Z     when no audit has been performed
2024-03-04T20:11:22.6733361Z       doesn't show a warning
2024-03-04T20:11:22.6733922Z 
2024-03-04T20:11:22.6736156Z Adjustments
2024-03-04T20:11:22.6736984Z   while signed in
2024-03-04T20:11:22.6737633Z     GET #index
2024-03-04T20:11:22.6738166Z       csv
2024-03-04T20:11:22.7053716Z         is expected to be successful
2024-03-04T20:11:22.7054634Z       html
2024-03-04T20:11:22.7476404Z         is successful
2024-03-04T20:11:22.7477551Z         when filtering by date
2024-03-04T20:11:22.7478398Z           when date parameters are not supplied
2024-03-04T20:11:22.7993811Z             returns all objects
2024-03-04T20:11:22.7994657Z           when date parameters are supplied
2024-03-04T20:11:22.8488936Z             only returns the correct objects
2024-03-04T20:11:22.8490059Z     GET #show
2024-03-04T20:11:22.8832765Z       is expected to be successful
2024-03-04T20:11:22.8833531Z     GET #new
2024-03-04T20:11:22.9200050Z       is successful
2024-03-04T20:11:22.9200800Z     POST #create
2024-03-04T20:11:22.9202082Z       with valid params
2024-03-04T20:11:22.9558468Z         creates a new Adjustment
2024-03-04T20:11:22.9844773Z         assigns a newly created adjustment as @adjustment
2024-03-04T20:11:23.0126617Z         redirects to the #show after created adjustment
2024-03-04T20:11:23.0408937Z         assigns a user id from the current user
2024-03-04T20:11:23.0410228Z       with invalid params
2024-03-04T20:11:23.0763408Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T20:11:23.1199974Z         re-renders the 'new' template
2024-03-04T20:11:23.1200635Z 
2024-03-04T20:11:23.1201303Z Managing requests
2024-03-04T20:11:23.1202517Z   creating a new quantity request
2024-03-04T20:11:23.1203526Z     GIVEN a partner user is permitted to make a request
2024-03-04T20:11:23.1204856Z       WHEN they create a request with only a comment
2024-03-04T20:11:24.1233829Z         should be created without any issue
2024-03-04T20:11:24.1235015Z       WHEN they create a request completely empty request
2024-03-04T20:11:25.0445575Z         should show an error message with the instructions
2024-03-04T20:11:25.0446380Z       Select Input Tests
2024-03-04T20:11:25.0446919Z         WHEN they reach the page
2024-03-04T20:11:25.9190420Z           should show the proper items in the select box
2024-03-04T20:11:25.9191071Z           WHEN they create a request improperly
2024-03-04T20:11:27.2283241Z             should show the proper items in the select box
2024-03-04T20:11:27.2284435Z       WHEN they create a request properly
2024-03-04T20:11:27.2285745Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T20:11:29.4947190Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T20:11:29.4948495Z       WHEN they create a request with blank lines
2024-03-04T20:11:30.9431284Z         should be created without any issue
2024-03-04T20:11:30.9432497Z   creating a # individuals request
2024-03-04T20:11:30.9433561Z     GIVEN a partner user is permitted to make a request
2024-03-04T20:11:30.9435145Z       WHEN they create a request with only a comment
2024-03-04T20:11:31.9164476Z         should be created without any issue
2024-03-04T20:11:31.9165626Z       WHEN they create a request completely empty request
2024-03-04T20:11:32.8885221Z         should show an error message with the instructions
2024-03-04T20:11:32.8886060Z       Select Input Tests
2024-03-04T20:11:32.8886746Z         WHEN they reach the page
2024-03-04T20:11:33.7484953Z           should show the proper items in the select box
2024-03-04T20:11:33.7485591Z           WHEN they create a request improperly
2024-03-04T20:11:35.0624525Z             should show the proper items in the select box
2024-03-04T20:11:35.0625537Z       WHEN they create a request with blank lines
2024-03-04T20:11:36.4411028Z         should be created without any issue
2024-03-04T20:11:36.4412013Z       WHEN they create a request properly
2024-03-04T20:11:36.4413102Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T20:11:38.5095162Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T20:11:38.5096656Z       WHEN they create a request improperly by not inputting anything
2024-03-04T20:11:39.4116997Z         should show an error message with the instructions
2024-03-04T20:11:39.4118434Z 
2024-03-04T20:11:39.4118741Z BarcodeItems
2024-03-04T20:11:39.4119827Z   While signed in
2024-03-04T20:11:39.4121284Z     GET #show
2024-03-04T20:11:39.4122053Z       with a global barcode item
2024-03-04T20:11:39.4486878Z         returns a 404
2024-03-04T20:11:39.4487687Z       with a normal barcode item
2024-03-04T20:11:39.4862642Z         returns http success
2024-03-04T20:11:39.4863441Z     GET #new
2024-03-04T20:11:39.5179696Z       returns http success
2024-03-04T20:11:39.5180555Z     GET #index
2024-03-04T20:11:39.5181191Z       html
2024-03-04T20:11:39.5610131Z         is expected to be successful
2024-03-04T20:11:39.5611082Z       csv
2024-03-04T20:11:39.5844450Z         is expected to be successful
2024-03-04T20:11:39.5845577Z     Looking at a different organization
2024-03-04T20:11:39.7681286Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T20:11:39.7682273Z     GET #find
2024-03-04T20:11:39.7683066Z       via ajax
2024-03-04T20:11:39.9764099Z         can find a barcode that's universally available
2024-03-04T20:11:40.1844615Z         can find a barcode that is scoped to just this organization
2024-03-04T20:11:40.1845671Z         when it's missing
2024-03-04T20:11:40.3841857Z           returns a 404
2024-03-04T20:11:40.3842844Z     DELETE #destroy
2024-03-04T20:11:40.4041236Z       disallows a non-superadmin to delete a global barcode
2024-03-04T20:11:40.4374930Z       redirects to the index
2024-03-04T20:11:40.6390166Z       disallows a user to delete someone else's barcode
2024-03-04T20:11:40.6391023Z     GET #edit
2024-03-04T20:11:40.6391588Z       with a global barcode item
2024-03-04T20:11:40.6695299Z         returns a 404
2024-03-04T20:11:40.6695966Z       with a normal barcode item
2024-03-04T20:11:40.7107029Z         returns http success
2024-03-04T20:11:40.7107928Z 
2024-03-04T20:11:40.7108306Z User account management
2024-03-04T20:11:40.7110138Z   when not in staging
2024-03-04T20:11:41.7766898Z     should change the email
2024-03-04T20:11:42.6690358Z     should change an user name
2024-03-04T20:11:43.4380902Z     should fail when the email is invalid
2024-03-04T20:11:43.4381799Z   when in staging
2024-03-04T20:11:43.9041443Z     should not allow the user to change staging credentials
2024-03-04T20:11:44.3482358Z     should display staging warning
2024-03-04T20:11:44.3483163Z 
2024-03-04T20:11:44.3483416Z /partners/profiles
2024-03-04T20:11:44.3484787Z   PUT #update
2024-03-04T20:11:44.4075244Z     updates the partner and profile
2024-03-04T20:11:44.4075801Z     with no social media
2024-03-04T20:11:44.5129926Z       shows an error
2024-03-04T20:11:44.5130731Z     when updating an existing value to a blank value
2024-03-04T20:11:44.5678553Z       does not update other partner profile attributes to blank
2024-03-04T20:11:44.6220043Z       updates the partner profile attribute to a blank value
2024-03-04T20:11:44.6770700Z       does store N/A in the database
2024-03-04T20:11:44.6771560Z   GET #edit
2024-03-04T20:11:44.7703852Z     has "No" radio button value when value is false
2024-03-04T20:11:44.9676247Z     has "Yes" radio button value when value is true
2024-03-04T20:11:45.1249316Z     does not have default radio button value when value is nil
2024-03-04T20:11:45.2149472Z     displays the partner
2024-03-04T20:11:45.2150319Z   GET #show
2024-03-04T20:11:45.2722720Z     displays the partner
2024-03-04T20:11:45.3276729Z     shows correct values for yes/no buttons
2024-03-04T20:11:45.3277659Z 
2024-03-04T20:11:45.3277882Z Purchases
2024-03-04T20:11:45.3279585Z   while signed in as an organization admin
2024-03-04T20:11:46.1804626Z     allows deletion of a purchase
2024-03-04T20:11:46.1805285Z   while signed in as a normal user
2024-03-04T20:11:46.1806147Z     When visiting the index page
2024-03-04T20:11:46.1807432Z       When filtering on the index page
2024-03-04T20:11:47.0142749Z         User can filter the #index by storage location
2024-03-04T20:11:47.8485056Z         User can filter the #index by vendor
2024-03-04T20:11:47.8485829Z         behaves like Date Range Picker
2024-03-04T20:11:47.8486646Z           when choosing a date range that only includes the previous week
2024-03-04T20:11:48.8197757Z             shows only 1 record
2024-03-04T20:11:48.8198673Z           when choosing 'Last Month'
2024-03-04T20:11:49.7763981Z             shows only 2 of the records
2024-03-04T20:11:49.7764758Z           when choosing 'All Time'
2024-03-04T20:11:50.7267542Z             shows all the records
2024-03-04T20:11:50.7268373Z       In the middle of the year
2024-03-04T20:11:51.5084185Z         User sees total purchases value
2024-03-04T20:11:52.3141440Z         User can click to the new purchase form
2024-03-04T20:11:53.0588768Z         User sees purchased date column
2024-03-04T20:11:53.0589713Z     When visiting an existing purchase
2024-03-04T20:11:53.5285499Z       does not allow deletion of a purchase
2024-03-04T20:11:53.5286418Z     When creating a new purchase
2024-03-04T20:11:54.0216339Z       should not display inactive storage locations in dropdown
2024-03-04T20:11:54.0217625Z       Editing purchase
2024-03-04T20:11:54.6318379Z         A user can view another organizations purchase
2024-03-04T20:11:55.1324062Z         A user can see purchased_from value
2024-03-04T20:11:55.1324790Z       via manual entry
2024-03-04T20:11:56.1812383Z         User can create vendor from purchase
2024-03-04T20:11:57.3535727Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T20:11:58.4429081Z         User can create a purchase IN THE PAST
2024-03-04T20:11:59.4481769Z         Does not include inactive items in the line item fields
2024-03-04T20:12:00.3353816Z         User can create a purchase using dollars decimal amount
2024-03-04T20:12:00.3354561Z         when creating a purchase incorrectly
2024-03-04T20:12:01.1552316Z           should display failure with error messages
2024-03-04T20:12:02.1496253Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T20:12:02.1497381Z       via barcode entry
2024-03-04T20:12:02.9320567Z         a user can add items via scanning them in by barcode
2024-03-04T20:12:03.9273452Z         User scan same barcode 2 times
2024-03-04T20:12:05.1495692Z         a user can add items that do not yet have a barcode
2024-03-04T20:12:05.1501210Z 
2024-03-04T20:12:05.1501527Z Dashboard
2024-03-04T20:12:05.1502718Z   With a new essentials bank
2024-03-04T20:12:33.1427546Z     displays the getting started guide until the steps are completed
2024-03-04T20:12:33.1428478Z   With an existing essentials bank
2024-03-04T20:12:33.1431227Z     Signage
2024-03-04T20:12:36.0445200Z       shows their organization name unless they have a logo set
2024-03-04T20:12:36.0446036Z     Inventory Totals
2024-03-04T20:12:36.0446638Z       Summary
2024-03-04T20:12:36.7901349Z         displays the on-hand totals
2024-03-04T20:12:36.7902126Z         when constrained to date range
2024-03-04T20:12:37.8408758Z           does not change
2024-03-04T20:12:37.8409981Z     Manufacturer Donations
2024-03-04T20:12:38.4545585Z       has a link to create a new donation
2024-03-04T20:12:38.4547476Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:12:38.4548802Z         filtering to 'Last Month'
2024-03-04T20:12:39.8658166Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T20:12:39.8660048Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:39.8660938Z         filtering to 'Today'
2024-03-04T20:12:41.2844376Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-04T20:12:41.2846516Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 5 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:41.2847902Z         filtering to 'All Time'
2024-03-04T20:12:43.0625953Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-04T20:12:43.0628002Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:43.0629342Z         filtering to 'Last 7 Days'
2024-03-04T20:12:44.6051443Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-04T20:12:44.6053496Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 5 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:12:44.6054367Z         filtering to 'Yesterday'
2024-03-04T20:12:46.5727491Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-03-04T20:12:46.5729458Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 6 during 2022-03-04..2023-10-16, and 1 on 2023-10-17
2024-03-04T20:12:46.5730889Z         filtering to '' (March 4, 2022 - October 16, 2023)
2024-03-04T20:12:48.5812987Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T20:12:48.5815619Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:48.5817061Z         filtering to 'Last 30 Days'
2024-03-04T20:12:50.4363789Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-04T20:12:50.4365164Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 8 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:12:50.4374186Z         filtering to 'This Year'
2024-03-04T20:12:52.7774828Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T20:12:52.7777025Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:12:52.7778351Z         filtering to 'This Month'
2024-03-04T20:12:54.3802039Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-04T20:12:54.3803157Z     Product Drives
2024-03-04T20:12:54.9736542Z       has a widget for product drive summary data
2024-03-04T20:12:54.9738706Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:12:54.9740389Z         filtering to 'This Month'
2024-03-04T20:12:58.3234889Z           shows 0 Recent Donation link(s)
2024-03-04T20:12:59.6539923Z           shows the correct total donations
2024-03-04T20:13:00.9984109Z           shows the correct total money raised
2024-03-04T20:13:00.9985660Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:00.9987950Z         filtering to 'Last 30 Days'
2024-03-04T20:13:02.3726559Z           shows the correct total money raised
2024-03-04T20:13:05.7005167Z           shows 0 Recent Donation link(s)
2024-03-04T20:13:07.0629563Z           shows the correct total donations
2024-03-04T20:13:07.0631395Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:13:07.0632419Z         filtering to 'This Year'
2024-03-04T20:13:08.5710135Z           shows 3 Recent Donation link(s)
2024-03-04T20:13:10.0826250Z           shows the correct total donations
2024-03-04T20:13:11.5668827Z           shows the correct total money raised
2024-03-04T20:13:11.5670422Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:11.5673291Z         filtering to 'Last 7 Days'
2024-03-04T20:13:13.0097832Z           shows the correct total money raised
2024-03-04T20:13:14.4345069Z           shows 2 Recent Donation link(s)
2024-03-04T20:13:15.8444080Z           shows the correct total donations
2024-03-04T20:13:15.8446383Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:13:15.8447256Z         filtering to 'Last Month'
2024-03-04T20:13:17.3434735Z           shows 2 Recent Donation link(s)
2024-03-04T20:13:18.7646575Z           shows the correct total donations
2024-03-04T20:13:20.2272345Z           shows the correct total money raised
2024-03-04T20:13:20.2273493Z       Product drive behaviour with Mixed Donation types
2024-03-04T20:13:20.9340548Z         only counts product drive donations for product drive
2024-03-04T20:13:21.6401779Z         only shows product drive donations as product drive donations
2024-03-04T20:13:22.3677930Z         only counts product drive money raised
2024-03-04T20:13:22.3679715Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 4 during 2022-03-04..2023-11-30, and 1 on 2023-12-01
2024-03-04T20:13:22.3681183Z         filtering to '' (March 4, 2022 - November 30, 2023)
2024-03-04T20:13:23.8606445Z           shows the correct total donations
2024-03-04T20:13:25.4066012Z           shows 3 Recent Donation link(s)
2024-03-04T20:13:26.9270626Z           shows the correct total money raised
2024-03-04T20:13:26.9272693Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:26.9273750Z         filtering to 'Today'
2024-03-04T20:13:30.2725101Z           shows 0 Recent Donation link(s)
2024-03-04T20:13:31.6030156Z           shows the correct total money raised
2024-03-04T20:13:32.9575183Z           shows the correct total donations
2024-03-04T20:13:32.9577065Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:13:32.9579393Z         filtering to 'Yesterday'
2024-03-04T20:13:34.3390057Z           shows the correct total money raised
2024-03-04T20:13:35.7366835Z           shows the correct total donations
2024-03-04T20:13:37.1059593Z           shows 1 Recent Donation link(s)
2024-03-04T20:13:37.1060456Z     Distributions
2024-03-04T20:13:38.0246978Z       has a link to create a new distribution
2024-03-04T20:13:38.0248760Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:13:38.0250234Z         filtering to 'Yesterday'
2024-03-04T20:13:39.4794916Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T20:13:39.4796831Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 3 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:39.4797662Z         filtering to 'All Time'
2024-03-04T20:13:40.9784763Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:13:40.9786597Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:40.9787805Z         filtering to 'Last 7 Days'
2024-03-04T20:13:42.5997944Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T20:13:42.5999827Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:13:42.6001314Z         filtering to 'This Month'
2024-03-04T20:13:46.0973107Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T20:13:46.0974768Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:46.0975812Z         filtering to 'Today'
2024-03-04T20:13:47.6272860Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:13:47.6274643Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 4 during 2022-03-04..2024-01-01, and 1 on 2024-01-02
2024-03-04T20:13:47.6276164Z         filtering to '' (March 4, 2022 - January 1, 2024)
2024-03-04T20:13:49.1504633Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:13:49.1506464Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:49.1507841Z         filtering to 'Last 30 Days'
2024-03-04T20:13:50.5517907Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T20:13:50.5519753Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:13:50.5521157Z         filtering to 'This Year'
2024-03-04T20:13:51.9792117Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:13:51.9793811Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:13:51.9794971Z         filtering to 'Last Month'
2024-03-04T20:13:53.4123158Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T20:13:53.4124082Z     Donations
2024-03-04T20:13:54.3239344Z       has a link to create a new donation
2024-03-04T20:13:54.3241066Z       given 1 Donation on 2024-01-31 (only if a valid date), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:13:54.3241948Z         filtering to 'Last Month'
2024-03-04T20:13:57.6736486Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T20:13:57.6738166Z       given 1 Donation on 2024-02-26 (only if a valid date), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:57.6739220Z         filtering to 'Last 7 Days'
2024-03-04T20:13:59.1042210Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T20:13:59.1043818Z       given 1 Donation on 2024-02-29 (only if a valid date), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:13:59.1045343Z         filtering to 'This Month'
2024-03-04T20:14:00.4775206Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:14:00.4776559Z       given 1 Donation on 2024-03-03 (only if a valid date), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:14:00.4777426Z         filtering to 'Today'
2024-03-04T20:14:02.0127576Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:14:02.0128887Z       given 1 Donation on 2024-02-03 (only if a valid date), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:14:02.0129745Z         filtering to 'Last 30 Days'
2024-03-04T20:14:03.5789564Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:14:03.5791201Z       given 1 Donation on 2024-03-02 (only if a valid date), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:14:03.5792322Z         filtering to 'Yesterday'
2024-03-04T20:14:04.9777967Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:14:04.9779544Z       given 1 Donation on 2022-03-03 (only if a valid date), 1 during 2022-03-04..2023-11-30, and 1 on 2023-12-01
2024-03-04T20:14:04.9780500Z         filtering to '' (March 4, 2022 - November 30, 2023)
2024-03-04T20:14:06.3703885Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:14:06.3705193Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:14:06.3706043Z         filtering to 'This Year'
2024-03-04T20:14:07.9092477Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:14:07.9093135Z     Purchases
2024-03-04T20:14:08.7956970Z       has a link to create a new purchase
2024-03-04T20:14:08.7958280Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 4 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:14:08.7959197Z         filtering to 'Yesterday'
2024-03-04T20:14:10.2997617Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:14:10.2999180Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:14:10.3000293Z         filtering to 'This Year'
2024-03-04T20:14:11.7784084Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:14:11.7785417Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 3 during 2022-03-04..2024-02-22, and 1 on 2024-02-23
2024-03-04T20:14:11.7786457Z         filtering to '' (March 4, 2022 - February 22, 2024)
2024-03-04T20:14:13.2672814Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:14:13.2674116Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:14:13.2674917Z         filtering to 'Today'
2024-03-04T20:14:14.7196603Z           shows correct 1 Recent Purchase link(s)
2024-03-04T20:14:14.7198161Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:14:14.7199264Z         filtering to 'Last 30 Days'
2024-03-04T20:14:16.2458299Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:14:16.2460060Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 2 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:14:16.2461197Z         filtering to 'This Month'
2024-03-04T20:14:17.6573936Z           shows correct 2 Recent Purchase link(s)
2024-03-04T20:14:17.6575509Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:14:17.6577041Z         filtering to 'Last 7 Days'
2024-03-04T20:14:19.0755245Z           shows correct 2 Recent Purchase link(s)
2024-03-04T20:14:19.0756658Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:14:19.0757735Z         filtering to 'Last Month'
2024-03-04T20:14:20.6027718Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:14:20.6029474Z 
2024-03-04T20:14:20.6029656Z Admin Organization Management
2024-03-04T20:14:20.6031177Z   While signed in as an Administrative User (super admin)
2024-03-04T20:14:22.5735367Z     creates a new organization
2024-03-04T20:14:23.6581871Z     filters by organizations by name in organizations index page
2024-03-04T20:14:24.9469246Z     can view organization details
2024-03-04T20:14:24.9469970Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T20:14:26.8374935Z     creates a new organization
2024-03-04T20:14:26.9241933Z W, [2024-03-04T12:14:26.923866 #2456]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T20:14:26.9244411Z W, [2024-03-04T12:14:26.923935 #2456]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:14:26.9248720Z W, [2024-03-04T12:14:26.923955 #2456]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:14:26.9251748Z W, [2024-03-04T12:14:26.923984 #2456]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T20:14:26.9253039Z 
2024-03-04T20:14:26.9253465Z Finished in 3 minutes 39.2 seconds (files took 8.28 seconds to load)
2024-03-04T20:14:26.9254307Z 233 examples, 0 failures
2024-03-04T20:14:26.9254654Z 
2024-03-04T20:14:26.9256160Z Randomized with seed 63553
2024-03-04T20:14:26.9256521Z 
2024-03-04T20:14:27.2213793Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3878 / 6475 LOC (59.89%) covered.
2024-03-04T20:14:27.7343675Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
