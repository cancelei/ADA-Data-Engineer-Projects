2024-02-29T21:33:21.1966731Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-29T21:33:21.1967609Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-29T21:33:21.1996354Z shell: /usr/bin/bash -e {0}
2024-02-29T21:33:21.1996846Z env:
2024-02-29T21:33:21.1997185Z   POSTGRES_HOST: localhost
2024-02-29T21:33:21.1997536Z   DATABASE_HOST: localhost
2024-02-29T21:33:21.1997973Z   PG_USERNAME: postgres
2024-02-29T21:33:21.1998375Z   PG_PASSWORD: password
2024-02-29T21:33:21.1998752Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-29T21:33:21.1999523Z   POSTGRES_PORT: 5432
2024-02-29T21:33:21.1999846Z   PGHOST: localhost
2024-02-29T21:33:21.2000178Z   PGUSER: postgres
2024-02-29T21:33:21.2000583Z   RAILS_ENV: test
2024-02-29T21:33:21.2000935Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-29T21:33:21.2001331Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-29T21:33:21.2001801Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-29T21:33:21.2002237Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-29T21:33:21.2002901Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-29T21:33:21.2003482Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-29T21:33:21.2004130Z   EVENTS_READ: true
2024-02-29T21:33:21.2004541Z ##[endgroup]
2024-02-29T21:33:26.8874567Z W, [2024-02-29T21:33:26.887125 #2332]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-29T21:33:26.8876966Z W, [2024-02-29T21:33:26.887174 #2332]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T21:33:26.8879655Z W, [2024-02-29T21:33:26.887190 #2332]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T21:33:26.8885149Z W, [2024-02-29T21:33:26.887220 #2332]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-29T21:33:29.3183258Z W, [2024-02-29T21:33:29.317996 #2332]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-29T21:33:29.3185934Z W, [2024-02-29T21:33:29.318042 #2332]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T21:33:29.3189602Z W, [2024-02-29T21:33:29.318060 #2332]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T21:33:29.3193918Z W, [2024-02-29T21:33:29.318114 #2332]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-29T21:33:29.3247532Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-29T21:33:37.7209519Z 
2024-02-29T21:33:37.7210454Z Randomized with seed 36436
2024-02-29T21:33:38.7178131Z 
2024-02-29T21:33:38.7178894Z Kit management
2024-02-29T21:33:40.3819256Z   should not display inactive storage locations under allocations
2024-02-29T21:33:41.8970744Z   can allocate and deallocate quantity per storage location from kit index
2024-02-29T21:33:42.8126787Z   can create a new kit as a user with the proper quantity
2024-02-29T21:33:42.8128036Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-29T21:33:43.9073183Z     will not change quantity amounts when allocating
2024-02-29T21:33:43.9074171Z   when there is no kit quantity
2024-02-29T21:33:45.0712256Z     will not change quantity amounts when deallocating
2024-02-29T21:33:45.0713141Z 
2024-02-29T21:33:45.0713572Z /account_requests
2024-02-29T21:33:45.0715375Z   POST #create
2024-02-29T21:33:45.0716304Z     with valid parameters
2024-02-29T21:33:45.1003858Z       delivers the confirmation email via default queue
2024-02-29T21:33:45.1151740Z       creates a new AccountRequest
2024-02-29T21:33:45.1292615Z       redirects to the created account_request confirmation
2024-02-29T21:33:45.1293824Z     with invalid parameters
2024-02-29T21:33:45.1512287Z       does not create a new AccountRequest
2024-02-29T21:33:45.1706893Z       renders a successful response (i.e. to display the 'new' template)
2024-02-29T21:33:45.1708659Z   GET #confirmation
2024-02-29T21:33:45.1709144Z     when given a valid token
2024-02-29T21:33:45.1876480Z       should render the confirmation template
2024-02-29T21:33:45.1877645Z     when given a token that has already been confirmed
2024-02-29T21:33:45.3703708Z       should render a error that says that is code provided is invalid
2024-02-29T21:33:45.3704761Z     when given a invalid token
2024-02-29T21:33:45.3763370Z       should render a error that says that is code provided is invalid
2024-02-29T21:33:45.3764421Z   GET #new
2024-02-29T21:33:45.3873546Z     renders a successful response
2024-02-29T21:33:45.3874310Z   GET #received
2024-02-29T21:33:45.3874923Z     when given a invalid token
2024-02-29T21:33:45.3929473Z       should render a error that says that is code provided is invalid
2024-02-29T21:33:45.3930456Z     when given a valid token
2024-02-29T21:33:45.4064992Z       should render the received template
2024-02-29T21:33:45.4066057Z   GET #confirm
2024-02-29T21:33:45.4066763Z     when given a valid token
2024-02-29T21:33:45.4233800Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-29T21:33:45.4235108Z     when given a token that has already been confirmed
2024-02-29T21:33:45.6016000Z       should render a error that says that is code provided is invalid
2024-02-29T21:33:45.6017261Z     when given a invalid token
2024-02-29T21:33:45.6078066Z       should render a error that says that is code provided is invalid
2024-02-29T21:33:45.6078800Z 
2024-02-29T21:33:45.6079295Z DonationSites
2024-02-29T21:33:45.6080343Z   while signed in
2024-02-29T21:33:45.6081158Z     GET #index
2024-02-29T21:33:45.6082238Z       csv
2024-02-29T21:33:45.6312241Z         is expected to be successful
2024-02-29T21:33:45.6313003Z       html
2024-02-29T21:33:45.6742756Z         is expected to be successful
2024-02-29T21:33:45.6743881Z 
2024-02-29T21:33:45.6744233Z Purchases
2024-02-29T21:33:45.6746316Z   while signed in as a normal user
2024-02-29T21:33:45.6747112Z     When creating a new purchase
2024-02-29T21:33:46.1979343Z       should not display inactive storage locations in dropdown
2024-02-29T21:33:46.1980035Z       via manual entry
2024-02-29T21:33:47.4529298Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-29T21:33:48.5584726Z         User can create a purchase IN THE PAST
2024-02-29T21:33:49.6161208Z         User can create vendor from purchase
2024-02-29T21:33:50.5162871Z         User can create a purchase using dollars decimal amount
2024-02-29T21:33:51.5150507Z         Does not include inactive items in the line item fields
2024-02-29T21:33:51.5151455Z         when creating a purchase incorrectly
2024-02-29T21:33:52.5007437Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-29T21:33:53.2993692Z           should display failure with error messages
2024-02-29T21:33:53.2995127Z       via barcode entry
2024-02-29T21:33:54.2061028Z         User scan same barcode 2 times
2024-02-29T21:33:54.9254646Z         a user can add items via scanning them in by barcode
2024-02-29T21:33:56.1269911Z         a user can add items that do not yet have a barcode
2024-02-29T21:33:56.1270615Z       Editing purchase
2024-02-29T21:33:56.6281497Z         A user can see purchased_from value
2024-02-29T21:33:57.2656449Z         A user can view another organizations purchase
2024-02-29T21:33:57.2657434Z     When visiting an existing purchase
2024-02-29T21:33:57.7288811Z       does not allow deletion of a purchase
2024-02-29T21:33:57.7289656Z     When visiting the index page
2024-02-29T21:33:57.7290324Z       When filtering on the index page
2024-02-29T21:33:58.5393696Z         User can filter the #index by storage location
2024-02-29T21:33:59.3712719Z         User can filter the #index by vendor
2024-02-29T21:33:59.3713855Z         behaves like Date Range Picker
2024-02-29T21:33:59.3714826Z           when choosing a date range that only includes the previous week
2024-02-29T21:34:00.3296410Z             shows only 1 record
2024-02-29T21:34:00.3297521Z           when choosing 'All Time'
2024-02-29T21:34:01.3069958Z             shows all the records
2024-02-29T21:34:01.3070856Z           when choosing 'Last Month'
2024-02-29T21:34:02.2665248Z             shows only 2 of the records
2024-02-29T21:34:02.2666392Z       In the middle of the year
2024-02-29T21:34:03.0311750Z         User sees total purchases value
2024-02-29T21:34:03.8112060Z         User can click to the new purchase form
2024-02-29T21:34:04.5486645Z         User sees purchased date column
2024-02-29T21:34:04.5487566Z   while signed in as an organization admin
2024-02-29T21:34:05.4161813Z     allows deletion of a purchase
2024-02-29T21:34:05.4162498Z 
2024-02-29T21:34:05.4162805Z Vendor
2024-02-29T21:34:05.4164445Z   When a user views the index page
2024-02-29T21:34:05.9070802Z     should have the vendor names in alphabetical order
2024-02-29T21:34:05.9071859Z   when creating a new vendor
2024-02-29T21:34:06.7426326Z     cannot add a new vendor instance with empty attributes
2024-02-29T21:34:07.5309813Z     can create a new vendor instance as a user
2024-02-29T21:34:07.5310770Z   when editing an existing vendor
2024-02-29T21:34:08.3086458Z     does not update a vendor with empty attributes
2024-02-29T21:34:09.0702874Z     can update the contact info for a vendor as a user
2024-02-29T21:34:09.0703905Z   When vendor have purchases associated with them already
2024-02-29T21:34:09.6836022Z     can have existing vendors show in the #index with some summary stats
2024-02-29T21:34:10.2813508Z     can have a single vendor show semi-detailed stats about purchases
2024-02-29T21:34:10.2814293Z 
2024-02-29T21:34:10.2814672Z /partners/profiles
2024-02-29T21:34:10.2816144Z   PUT #update
2024-02-29T21:34:10.3454205Z     updates the partner and profile
2024-02-29T21:34:10.3454918Z     when updating an existing value to a blank value
2024-02-29T21:34:10.3973754Z       does not update other partner profile attributes to blank
2024-02-29T21:34:10.4492282Z       updates the partner profile attribute to a blank value
2024-02-29T21:34:10.5083803Z       does store N/A in the database
2024-02-29T21:34:10.5084622Z     with no social media
2024-02-29T21:34:10.6280864Z       shows an error
2024-02-29T21:34:10.6281689Z   GET #show
2024-02-29T21:34:10.6860012Z     displays the partner
2024-02-29T21:34:10.7404647Z     shows correct values for yes/no buttons
2024-02-29T21:34:10.7406205Z   GET #edit
2024-02-29T21:34:10.8303741Z     has "No" radio button value when value is false
2024-02-29T21:34:10.9162966Z     displays the partner
2024-02-29T21:34:11.0084247Z     has "Yes" radio button value when value is true
2024-02-29T21:34:11.0975548Z     does not have default radio button value when value is nil
2024-02-29T21:34:11.0976463Z 
2024-02-29T21:34:11.0976740Z User account management
2024-02-29T21:34:11.0977483Z   when not in staging
2024-02-29T21:34:11.8749223Z     should fail when the email is invalid
2024-02-29T21:34:12.8119946Z     should change the email
2024-02-29T21:34:13.6995628Z     should change an user name
2024-02-29T21:34:13.6996510Z   when in staging
2024-02-29T21:34:14.1368894Z     should display staging warning
2024-02-29T21:34:14.5924724Z     should not allow the user to change staging credentials
2024-02-29T21:34:14.5925976Z 
2024-02-29T21:34:14.5926350Z Admin::Organizations
2024-02-29T21:34:14.5927741Z   When logged in as a non-admin user
2024-02-29T21:34:14.5928955Z     GET #edit
2024-02-29T21:34:14.6084619Z       redirects
2024-02-29T21:34:14.6085399Z     POST #create
2024-02-29T21:34:14.6226298Z       redirects
2024-02-29T21:34:14.6226931Z     GET #new
2024-02-29T21:34:14.6343538Z       redirects
2024-02-29T21:34:14.6344136Z     PUT #update
2024-02-29T21:34:14.6463658Z       redirects
2024-02-29T21:34:14.6464402Z     GET #index
2024-02-29T21:34:14.6582138Z       redirects
2024-02-29T21:34:14.6582803Z   When logged in as a super admin
2024-02-29T21:34:14.6585475Z     GET #show
2024-02-29T21:34:14.8833266Z       returns http success
2024-02-29T21:34:14.8834023Z     GET #edit
2024-02-29T21:34:15.0978865Z       returns http success
2024-02-29T21:34:15.0979585Z     DELETE #destroy
2024-02-29T21:34:15.0982106Z       with a valid organization id
2024-02-29T21:34:15.6354444Z         redirects to #index
2024-02-29T21:34:15.6356640Z     GET #new
2024-02-29T21:34:15.6754579Z       returns http success
2024-02-29T21:34:15.6755858Z       when given a token that matches a account request that has already been processed
2024-02-29T21:34:15.8885974Z         should render new with a flash error message
2024-02-29T21:34:15.8887315Z       when given a valid account request token in the query parameters
2024-02-29T21:34:15.9454234Z         should render new with pre populate input fields from the account_request
2024-02-29T21:34:15.9455584Z     PATCH #update
2024-02-29T21:34:15.9456096Z       with an invalid update
2024-02-29T21:34:16.1576780Z         redirects to #edit with an error message
2024-02-29T21:34:16.3767905Z         returns http success
2024-02-29T21:34:16.3768772Z       with a valid update
2024-02-29T21:34:16.5620962Z         redirects to #index
2024-02-29T21:34:16.5622017Z     PUT #update
2024-02-29T21:34:16.5807635Z       redirect
2024-02-29T21:34:16.5808196Z     GET #index
2024-02-29T21:34:16.6137429Z       returns http success
2024-02-29T21:34:16.6138285Z     POST #create
2024-02-29T21:34:16.6139003Z       with valid params
2024-02-29T21:34:16.8959985Z         creates an organization and redirects to #index
2024-02-29T21:34:16.8960766Z       with invalid params
2024-02-29T21:34:16.9365772Z         does not create an organization and renders #create with an error message
2024-02-29T21:34:16.9367028Z     DELETE #destroy
2024-02-29T21:34:17.2965000Z       redirects
2024-02-29T21:34:17.2967332Z 
2024-02-29T21:34:17.2967737Z Admin Organization Management
2024-02-29T21:34:17.2969530Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-29T21:34:19.1923123Z     creates a new organization
2024-02-29T21:34:19.1938828Z   While signed in as an Administrative User (super admin)
2024-02-29T21:34:20.4690605Z     can view organization details
2024-02-29T21:34:22.4572156Z     creates a new organization
2024-02-29T21:34:23.6161211Z     filters by organizations by name in organizations index page
2024-02-29T21:34:23.6161951Z 
2024-02-29T21:34:23.6162162Z /partners/children
2024-02-29T21:34:23.6163258Z   GET #index
2024-02-29T21:34:23.6906690Z     should export CSV
2024-02-29T21:34:23.7544137Z     should render without any issues
2024-02-29T21:34:23.7545089Z 
2024-02-29T21:34:23.7545654Z StorageLocations
2024-02-29T21:34:23.7546883Z   While not signed in
2024-02-29T21:34:23.7611590Z     redirects the user to the sign-in page for CRUD actions
2024-02-29T21:34:23.7612631Z   While signed in
2024-02-29T21:34:23.7613289Z     GET #inventory
2024-02-29T21:34:23.7614299Z       when also including omitted items
2024-02-29T21:34:23.8147720Z         contains a collection of ducktyped entries that respond the same
2024-02-29T21:34:23.8650144Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-29T21:34:23.8651904Z       when also including inactive items
2024-02-29T21:34:23.9326999Z         returns a collection that also includes items that have been deactivated
2024-02-29T21:34:23.9328018Z       without any overrides
2024-02-29T21:34:23.9858552Z         returns a collection that only includes items at the storage location
2024-02-29T21:34:23.9859657Z     GET #new
2024-02-29T21:34:24.4918384Z       returns http success
2024-02-29T21:34:24.4919165Z     GET #destroy
2024-02-29T21:34:24.5189783Z       redirects to #index
2024-02-29T21:34:24.5190534Z     GET #index
2024-02-29T21:34:24.5191038Z       csv
2024-02-29T21:34:24.6146486Z         includes headers followed by alphabetized item names
2024-02-29T21:34:24.6412733Z         succeeds
2024-02-29T21:34:24.6413464Z       html
2024-02-29T21:34:24.6783414Z         succeeds
2024-02-29T21:34:24.6784064Z         with inactive locations
2024-02-29T21:34:24.7160263Z           does not includes the inactive location
2024-02-29T21:34:24.7161375Z           with include_inactive_locations
2024-02-29T21:34:24.7530520Z             includes the inactive location
2024-02-29T21:34:24.7531399Z     GET #edit
2024-02-29T21:34:24.7860482Z       returns http success
2024-02-29T21:34:24.7861067Z     POST #import_csv
2024-02-29T21:34:24.7862021Z       without a csv file
2024-02-29T21:34:24.7981428Z         presents a flash error message
2024-02-29T21:34:24.8095243Z         redirects to :index
2024-02-29T21:34:24.8096109Z       csv file with wrong headers
2024-02-29T21:34:24.8219987Z         presents a flash error message
2024-02-29T21:34:24.8339772Z         redirects
2024-02-29T21:34:24.8340553Z       with a csv file
2024-02-29T21:34:24.8484186Z         redirects
2024-02-29T21:34:24.8627166Z         presents a flash notice message
2024-02-29T21:34:24.8679504Z         invokes .import_csv
2024-02-29T21:34:24.8680277Z     PUT #deactivate
2024-02-29T21:34:24.8875406Z       discards
2024-02-29T21:34:24.8876202Z       with inventory
2024-02-29T21:34:24.9361504Z         does not discard
2024-02-29T21:34:24.9362276Z     Looking at a different organization
2024-02-29T21:34:25.1100312Z       redirects the user to the sign-in page for CRUD actions
2024-02-29T21:34:25.1101572Z     GET #show
2024-02-29T21:34:25.1102189Z       csv
2024-02-29T21:34:25.1613227Z         should be successful
2024-02-29T21:34:25.1614250Z       html
2024-02-29T21:34:25.2275014Z         should return a correct response
2024-02-29T21:34:25.2276012Z         with version date set
2024-02-29T21:34:25.2276943Z           with a version found
2024-02-29T21:34:25.3143808Z             should show the version specified
2024-02-29T21:34:25.3144644Z           with no version found
2024-02-29T21:34:25.3888073Z             should show N/A
2024-02-29T21:34:25.3888996Z     PUT #reactivate
2024-02-29T21:34:25.4061156Z       undiscards
2024-02-29T21:34:25.4062111Z 
2024-02-29T21:34:25.4062538Z Managing requests
2024-02-29T21:34:25.4063831Z   creating a # individuals request
2024-02-29T21:34:25.4064925Z     GIVEN a partner user is permitted to make a request
2024-02-29T21:34:25.4065932Z       Select Input Tests
2024-02-29T21:34:25.4066660Z         WHEN they reach the page
2024-02-29T21:34:26.2615289Z           should show the proper items in the select box
2024-02-29T21:34:26.2615949Z           WHEN they create a request inproperly
2024-02-29T21:34:27.5832582Z             should show the proper items in the select box
2024-02-29T21:34:27.5833584Z       WHEN they create a request inproperly
2024-02-29T21:34:28.4832565Z         should show an error message with the instructions
2024-02-29T21:34:28.4833359Z       WHEN they create a request properly
2024-02-29T21:34:28.4834647Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-29T21:34:30.6033060Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-29T21:34:30.6035055Z   creating a new quantity request
2024-02-29T21:34:30.6035946Z     GIVEN a partner user is permitted to make a request
2024-02-29T21:34:30.6036929Z       Select Input Tests
2024-02-29T21:34:30.6037611Z         WHEN they reach the page
2024-02-29T21:34:31.5739848Z           should show the proper items in the select box
2024-02-29T21:34:31.5740559Z           WHEN they create a request inproperly
2024-02-29T21:34:32.9142690Z             should show the proper items in the select box
2024-02-29T21:34:32.9144051Z       WHEN they create a request inproperly by not inputting anything
2024-02-29T21:34:33.8251787Z         should show an error message with the instructions
2024-02-29T21:34:33.8252778Z       WHEN they create a request with only a comment
2024-02-29T21:34:34.7682094Z         should be created without any issue
2024-02-29T21:34:34.7683011Z       WHEN they create a request properly
2024-02-29T21:34:34.7684191Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-29T21:34:37.0017217Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-29T21:34:37.0018662Z 
2024-02-29T21:34:37.0018906Z Audits
2024-02-29T21:34:37.0020763Z   while signed in as an organization admin
2024-02-29T21:34:37.0022447Z     DELETE #destroy
2024-02-29T21:34:37.0023442Z       with valid params
2024-02-29T21:34:37.0462352Z         can not destroy the audit if the audit's status is `finalized`
2024-02-29T21:34:37.0834017Z         destroys the audit if the audit's status is `confirms`
2024-02-29T21:34:37.1195882Z         destroys the audit if the audit's status is `in_progress`
2024-02-29T21:34:37.1196796Z     GET #edit
2024-02-29T21:34:37.1816244Z       redirects to #index if the status of audit is not `in_progress`
2024-02-29T21:34:37.2521724Z       is successful if the status of audit is `in_progress`
2024-02-29T21:34:37.2522652Z     GET #new
2024-02-29T21:34:37.2912472Z       is successful
2024-02-29T21:34:37.2913434Z     GET #show
2024-02-29T21:34:37.3433848Z       is successful
2024-02-29T21:34:37.3434834Z     GET #index
2024-02-29T21:34:37.3989014Z       is successful
2024-02-29T21:34:37.3989778Z     POST #finalize
2024-02-29T21:34:37.4649896Z       sets the finalize status and saves an event
2024-02-29T21:34:37.4650832Z     POST #create
2024-02-29T21:34:37.4651461Z       with valid params
2024-02-29T21:34:37.5058060Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-29T21:34:37.5436932Z         assigns a newly created audit as @audit
2024-02-29T21:34:37.5810574Z         redirects to the #show after created audit
2024-02-29T21:34:37.6187100Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-29T21:34:37.6548982Z         creates a new Audit
2024-02-29T21:34:37.6550022Z       with invalid params
2024-02-29T21:34:37.8168198Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-29T21:34:37.9206887Z         assigns a newly created but unsaved audit as @audit
2024-02-29T21:34:37.9633282Z         re-renders the 'new' template
2024-02-29T21:34:37.9633922Z 
2024-02-29T21:34:37.9634167Z Profiles
2024-02-29T21:34:37.9635970Z   GET #edit
2024-02-29T21:34:38.0594003Z     returns http success
2024-02-29T21:34:38.0594791Z   POST #update
2024-02-29T21:34:38.0595402Z     when updating an existing value to a blank value
2024-02-29T21:34:38.1072941Z       should have blank values
2024-02-29T21:34:38.1559136Z       update partner
2024-02-29T21:34:38.1559693Z     successful save
2024-02-29T21:34:38.2059925Z       update partner
2024-02-29T21:34:38.2551222Z       redirects to #show
2024-02-29T21:34:38.2554456Z 
2024-02-29T21:34:38.2554797Z Dashboard
2024-02-29T21:34:38.2556086Z   With an existing essentials bank
2024-02-29T21:34:38.2557447Z     Signage
2024-02-29T21:34:41.1510204Z       shows their organization name unless they have a logo set
2024-02-29T21:34:41.1511717Z     Manufacturer Donations
2024-02-29T21:34:41.7419823Z       has a link to create a new donation
2024-02-29T21:34:41.7421440Z       given 1 Manufacturer donating on 2024-02-22  (unless 'All Time'), 5 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:34:41.7422992Z         filtering to 'Last 7 Days'
2024-02-29T21:34:43.8713847Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-29T21:34:43.8715527Z       given 1 Manufacturer donating on 2024-01-30  (unless 'All Time'), 0 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:34:43.8716431Z         filtering to 'Last 30 Days'
2024-02-29T21:34:45.2306684Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-29T21:34:45.2309147Z       given 1 Manufacturer donating on 2024-02-28  (unless 'All Time'), 4 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:34:45.2310397Z         filtering to 'Today'
2024-02-29T21:34:47.1989959Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-29T21:34:47.1992008Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:34:47.1993308Z         filtering to 'All Time'
2024-02-29T21:34:48.6657423Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-29T21:34:48.6659654Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 8 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:34:48.6661233Z         filtering to 'This Month'
2024-02-29T21:34:50.8664734Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-29T21:34:50.8666808Z       given 1 Manufacturer donating on 2024-02-27  (unless 'All Time'), 4 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T21:34:50.8667859Z         filtering to 'Yesterday'
2024-02-29T21:34:52.7529402Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-29T21:34:52.7531003Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 8 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T21:34:52.7531813Z         filtering to 'Last Month'
2024-02-29T21:34:55.0123198Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-29T21:34:55.0125145Z       given 1 Manufacturer donating on 2022-02-27  (unless 'All Time'), 7 during 2022-02-28..2023-10-09, and 1 on 2023-10-10
2024-02-29T21:34:55.0126748Z         filtering to '' (February 28, 2022 - October 9, 2023)
2024-02-29T21:34:57.0622238Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-29T21:34:57.0624575Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T21:34:57.0625977Z         filtering to 'This Year'
2024-02-29T21:34:58.4158736Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-29T21:34:58.4159831Z     Distributions
2024-02-29T21:34:59.3218115Z       has a link to create a new distribution
2024-02-29T21:34:59.3219709Z       given 1 Distribution on 2024-02-27  (unless 'All Time'), 0 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T21:34:59.3220866Z         filtering to 'Yesterday'
2024-02-29T21:35:02.7138609Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T21:35:02.7140685Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:02.7142481Z         filtering to 'All Time'
2024-02-29T21:35:06.0837932Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T21:35:06.0839922Z       given 1 Distribution on 2022-02-27  (unless 'All Time'), 0 during 2022-02-28..2023-11-09, and 1 on 2023-11-10
2024-02-29T21:35:06.0841461Z         filtering to '' (February 28, 2022 - November 9, 2023)
2024-02-29T21:35:09.4682963Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T21:35:09.4685211Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T21:35:09.4686498Z         filtering to 'This Year'
2024-02-29T21:35:10.8735042Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-29T21:35:10.8736886Z       given 1 Distribution on 2024-02-28  (unless 'All Time'), 0 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:10.8738109Z         filtering to 'Today'
2024-02-29T21:35:14.2306821Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T21:35:14.2309066Z       given 1 Distribution on 2024-02-22  (unless 'All Time'), 4 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:14.2310376Z         filtering to 'Last 7 Days'
2024-02-29T21:35:15.7228977Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T21:35:15.7230979Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T21:35:15.7232232Z         filtering to 'Last Month'
2024-02-29T21:35:17.2225721Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-29T21:35:17.2227543Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:17.2229274Z         filtering to 'This Month'
2024-02-29T21:35:18.6657413Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-29T21:35:18.6659191Z       given 1 Distribution on 2024-01-30  (unless 'All Time'), 4 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:18.6660292Z         filtering to 'Last 30 Days'
2024-02-29T21:35:20.2172311Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T21:35:20.2173264Z     Product Drives
2024-02-29T21:35:20.8542719Z       has a widget for product drive summary data
2024-02-29T21:35:20.8544560Z       given 1 Product Drive Donation on 2024-02-27 (unless 'All Time'), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T21:35:20.8545947Z         filtering to 'Yesterday'
2024-02-29T21:35:22.3988943Z           shows the correct total money raised
2024-02-29T21:35:23.9345131Z           shows 3 Recent Donation link(s)
2024-02-29T21:35:25.4150336Z           shows the correct total donations
2024-02-29T21:35:25.4152209Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:25.4153859Z         filtering to 'This Month'
2024-02-29T21:35:26.8139758Z           shows the correct total money raised
2024-02-29T21:35:28.2149560Z           shows the correct total donations
2024-02-29T21:35:29.5989633Z           shows 1 Recent Donation link(s)
2024-02-29T21:35:29.5991702Z       given 1 Product Drive Donation on 2024-02-22 (unless 'All Time'), 3 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:29.5993275Z         filtering to 'Last 7 Days'
2024-02-29T21:35:31.0892866Z           shows 3 Recent Donation link(s)
2024-02-29T21:35:32.5630438Z           shows the correct total donations
2024-02-29T21:35:34.0361727Z           shows the correct total money raised
2024-02-29T21:35:34.0363547Z       given 1 Product Drive Donation on 2022-02-27 (unless 'All Time'), 2 during 2022-02-28..2023-11-16, and 1 on 2023-11-17
2024-02-29T21:35:34.0365318Z         filtering to '' (February 28, 2022 - November 16, 2023)
2024-02-29T21:35:35.4631610Z           shows the correct total donations
2024-02-29T21:35:36.9106844Z           shows the correct total money raised
2024-02-29T21:35:38.3526880Z           shows 2 Recent Donation link(s)
2024-02-29T21:35:38.3529130Z       given 1 Product Drive Donation on 2024-02-28 (unless 'All Time'), 0 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:38.3530828Z         filtering to 'Today'
2024-02-29T21:35:41.7212818Z           shows 0 Recent Donation link(s)
2024-02-29T21:35:43.0673573Z           shows the correct total money raised
2024-02-29T21:35:44.3933754Z           shows the correct total donations
2024-02-29T21:35:44.3935215Z       given 1 Product Drive Donation on 2024-01-30 (unless 'All Time'), 1 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:35:44.3936282Z         filtering to 'Last 30 Days'
2024-02-29T21:35:45.7907230Z           shows the correct total money raised
2024-02-29T21:35:47.1711520Z           shows the correct total donations
2024-02-29T21:35:48.5655084Z           shows 1 Recent Donation link(s)
2024-02-29T21:35:48.5656975Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T21:35:48.5658459Z         filtering to 'This Year'
2024-02-29T21:35:49.9616576Z           shows the correct total money raised
2024-02-29T21:35:51.3772760Z           shows the correct total donations
2024-02-29T21:35:52.7611659Z           shows 1 Recent Donation link(s)
2024-02-29T21:35:52.7613704Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T21:35:52.7615624Z         filtering to 'Last Month'
2024-02-29T21:35:54.0809234Z           shows the correct total money raised
2024-02-29T21:35:55.4104169Z           shows the correct total donations
2024-02-29T21:35:58.7294350Z           shows 0 Recent Donation link(s)
2024-02-29T21:35:58.7295431Z       Product drive behaviour with Mixed Donation types
2024-02-29T21:35:59.4399910Z         only counts product drive money raised
2024-02-29T21:36:00.1644288Z         only counts product drive donations for product drive
2024-02-29T21:36:00.9032840Z         only shows product drive donations as product drive donations
2024-02-29T21:36:00.9033635Z     Purchases
2024-02-29T21:36:01.7865094Z       has a link to create a new purchase
2024-02-29T21:36:01.7866782Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T21:36:01.7868056Z         filtering to 'This Year'
2024-02-29T21:36:03.2892309Z           shows correct 3 Recent Purchase link(s)
2024-02-29T21:36:03.2894015Z       given 1 Purchase on 2024-02-22  (unless 'All Time'), 3 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:03.2895222Z         filtering to 'Last 7 Days'
2024-02-29T21:36:04.7661119Z           shows correct 3 Recent Purchase link(s)
2024-02-29T21:36:04.7664579Z       given 1 Purchase on 2024-01-30  (unless 'All Time'), 3 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:04.7665668Z         filtering to 'Last 30 Days'
2024-02-29T21:36:06.2429232Z           shows correct 3 Recent Purchase link(s)
2024-02-29T21:36:06.2431031Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T21:36:06.2432027Z         filtering to 'Last Month'
2024-02-29T21:36:07.6744453Z           shows correct 2 Recent Purchase link(s)
2024-02-29T21:36:07.6745707Z       given 1 Purchase on 2024-02-27  (unless 'All Time'), 1 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T21:36:07.6746798Z         filtering to 'Yesterday'
2024-02-29T21:36:09.0621359Z           shows correct 1 Recent Purchase link(s)
2024-02-29T21:36:09.0623215Z       given 1 Purchase on 2024-02-28  (unless 'All Time'), 4 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:09.0624367Z         filtering to 'Today'
2024-02-29T21:36:10.6437694Z           shows correct 3 Recent Purchase link(s)
2024-02-29T21:36:10.6442042Z       given 1 Purchase on 2022-02-27  (unless 'All Time'), 4 during 2022-02-28..2024-01-10, and 1 on 2024-01-11
2024-02-29T21:36:10.6443518Z         filtering to '' (February 28, 2022 - January 10, 2024)
2024-02-29T21:36:12.2839846Z           shows correct 3 Recent Purchase link(s)
2024-02-29T21:36:12.2841516Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:12.2842722Z         filtering to 'This Month'
2024-02-29T21:36:13.6571894Z           shows correct 1 Recent Purchase link(s)
2024-02-29T21:36:13.6572931Z     Donations
2024-02-29T21:36:14.6171264Z       has a link to create a new donation
2024-02-29T21:36:14.6173191Z       given 1 Donation on 2024-02-28 (only if a valid date), 3 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:14.6174476Z         filtering to 'Today'
2024-02-29T21:36:16.0791651Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T21:36:16.0794675Z       given 1 Donation on 2022-02-27 (only if a valid date), 0 during 2022-02-28..2023-11-05, and 1 on 2023-11-06
2024-02-29T21:36:16.0796028Z         filtering to '' (February 28, 2022 - November 5, 2023)
2024-02-29T21:36:19.4467674Z           shows the correct total and 0 Recent Donation link(s)
2024-02-29T21:36:19.4469652Z       given 1 Donation on 2024-01-30 (only if a valid date), 0 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:19.4470789Z         filtering to 'Last 30 Days'
2024-02-29T21:36:22.8151603Z           shows the correct total and 0 Recent Donation link(s)
2024-02-29T21:36:22.8153747Z       given 1 Donation on 2024-02-27 (only if a valid date), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T21:36:22.8155425Z         filtering to 'Yesterday'
2024-02-29T21:36:24.2763748Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T21:36:24.2765786Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T21:36:24.2767045Z         filtering to 'This Year'
2024-02-29T21:36:25.6615719Z           shows the correct total and 1 Recent Donation link(s)
2024-02-29T21:36:25.6617602Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T21:36:25.6839345Z         filtering to 'Last Month'
2024-02-29T21:36:27.1324208Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T21:36:27.1325452Z       given 1 Donation on 2024-02-22 (only if a valid date), 3 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:27.1326370Z         filtering to 'Last 7 Days'
2024-02-29T21:36:28.5832186Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T21:36:28.5833583Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T21:36:28.5834564Z         filtering to 'This Month'
2024-02-29T21:36:30.0206896Z           shows the correct total and 2 Recent Donation link(s)
2024-02-29T21:36:30.0207682Z     Inventory Totals
2024-02-29T21:36:30.0208853Z       Summary
2024-02-29T21:36:30.7529510Z         displays the on-hand totals
2024-02-29T21:36:30.7530411Z         when constrained to date range
2024-02-29T21:36:31.8111101Z           does not change
2024-02-29T21:36:31.8112244Z   With a new essentials bank
2024-02-29T21:36:59.7915269Z     displays the getting started guide until the steps are completed
2024-02-29T21:36:59.7916197Z 
2024-02-29T21:36:59.7916382Z Organization management
2024-02-29T21:36:59.7917970Z   while signed in as a normal user
2024-02-29T21:37:00.2609973Z     can see summary details about the organization as a user
2024-02-29T21:37:00.7298428Z     cannot see 'Make user' button for admins
2024-02-29T21:37:00.7306205Z   while signed in as an organization admin
2024-02-29T21:37:01.2286341Z     can re-invite a user to an organization after 7 days
2024-02-29T21:37:02.1862386Z     can deactivate a user in the organization
2024-02-29T21:37:02.6916635Z     can see 'Make user' button for admins
2024-02-29T21:37:03.6493258Z     can re-activate a user in the organization
2024-02-29T21:37:04.5866432Z     can add a new user to an organization
2024-02-29T21:37:04.5867134Z     Viewing the organization
2024-02-29T21:37:05.1419416Z       can view organization details
2024-02-29T21:37:05.1420175Z     Editing the organization
2024-02-29T21:37:05.9901397Z       can set the NDBN Member ID
2024-02-29T21:37:06.9905002Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-29T21:37:07.9715241Z       can select if the org repackages essentials
2024-02-29T21:37:08.8073106Z       can set a default storage location on the organization
2024-02-29T21:37:09.6535476Z       can set a reminder and a deadline day
2024-02-29T21:37:10.6112934Z       can select if the org shows year-to-date values on the distribution printout
2024-02-29T21:37:12.0726352Z       can select and deselect Required Partner Fields
2024-02-29T21:37:13.0421257Z       can enable if the org uses single step invite and approve partner process
2024-02-29T21:37:14.0058485Z       can select if the org distributes essentials monthly
2024-02-29T21:37:15.1705843Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-29T21:37:15.1850595Z W, [2024-02-29T13:37:15.184794 #2384]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-29T21:37:15.1852822Z W, [2024-02-29T13:37:15.184857 #2384]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T21:37:15.1871347Z W, [2024-02-29T13:37:15.184886 #2384]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T21:37:15.1874034Z W, [2024-02-29T13:37:15.184923 #2384]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-29T21:37:15.1875134Z 
2024-02-29T21:37:15.1875518Z Finished in 3 minutes 37.5 seconds (files took 8.17 seconds to load)
2024-02-29T21:37:15.1876313Z 239 examples, 0 failures
2024-02-29T21:37:15.1876621Z 
2024-02-29T21:37:15.1876793Z Randomized with seed 36436
2024-02-29T21:37:15.1877111Z 
2024-02-29T21:37:15.4930745Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3815 / 6426 LOC (59.37%) covered.
2024-02-29T21:37:16.0046604Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10679 LOC (0.36%) covered.
