2024-02-21T09:45:56.8182281Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-21T09:45:56.8183153Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-21T09:45:56.8214940Z shell: /usr/bin/bash -e {0}
2024-02-21T09:45:56.8215311Z env:
2024-02-21T09:45:56.8215778Z   POSTGRES_HOST: localhost
2024-02-21T09:45:56.8216126Z   DATABASE_HOST: localhost
2024-02-21T09:45:56.8216524Z   PG_USERNAME: postgres
2024-02-21T09:45:56.8216944Z   PG_PASSWORD: password
2024-02-21T09:45:56.8217315Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-21T09:45:56.8217781Z   POSTGRES_PORT: 5432
2024-02-21T09:45:56.8218092Z   PGHOST: localhost
2024-02-21T09:45:56.8218423Z   PGUSER: postgres
2024-02-21T09:45:56.8218819Z   RAILS_ENV: test
2024-02-21T09:45:56.8219171Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-21T09:45:56.8219625Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-21T09:45:56.8220102Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-21T09:45:56.8220539Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-21T09:45:56.8221165Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-21T09:45:56.8221775Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-21T09:45:56.8222381Z   EVENTS_READ: true
2024-02-21T09:45:56.8222766Z ##[endgroup]
2024-02-21T09:46:02.7209790Z W, [2024-02-21T09:46:02.720651 #2330]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-21T09:46:02.7211843Z W, [2024-02-21T09:46:02.720754 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:46:02.7213400Z W, [2024-02-21T09:46:02.720794 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:46:02.7216901Z W, [2024-02-21T09:46:02.720836 #2330]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-21T09:46:05.9468571Z W, [2024-02-21T09:46:05.946477 #2330]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-21T09:46:05.9472648Z W, [2024-02-21T09:46:05.946528 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:46:05.9475446Z W, [2024-02-21T09:46:05.946544 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:46:05.9479675Z W, [2024-02-21T09:46:05.946591 #2330]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-21T09:46:05.9534969Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-21T09:46:14.8498333Z 
2024-02-21T09:46:14.8499297Z Randomized with seed 10243
2024-02-21T09:46:15.8725962Z 
2024-02-21T09:46:15.8726727Z DonationSites
2024-02-21T09:46:15.8727878Z   while signed in
2024-02-21T09:46:15.8728688Z     GET #index
2024-02-21T09:46:15.8729671Z       csv
2024-02-21T09:46:15.9296545Z         is expected to be successful
2024-02-21T09:46:15.9297353Z       html
2024-02-21T09:46:15.9894903Z         is expected to be successful
2024-02-21T09:46:15.9896571Z 
2024-02-21T09:46:15.9898325Z Admin::Organizations
2024-02-21T09:46:15.9899166Z   When logged in as a non-admin user
2024-02-21T09:46:15.9899973Z     GET #new
2024-02-21T09:46:16.0081072Z       redirects
2024-02-21T09:46:16.0081695Z     GET #index
2024-02-21T09:46:16.0251637Z       redirects
2024-02-21T09:46:16.0252096Z     GET #edit
2024-02-21T09:46:16.0413316Z       redirects
2024-02-21T09:46:16.0414345Z     POST #create
2024-02-21T09:46:16.0679905Z       redirects
2024-02-21T09:46:16.0680609Z     PUT #update
2024-02-21T09:46:16.0841517Z       redirects
2024-02-21T09:46:16.0842291Z   When logged in as a super admin
2024-02-21T09:46:16.0844237Z     DELETE #destroy
2024-02-21T09:46:16.0845264Z       with a valid organization id
2024-02-21T09:46:16.6858574Z         redirects to #index
2024-02-21T09:46:16.6859573Z     GET #index
2024-02-21T09:46:16.7248037Z       returns http success
2024-02-21T09:46:16.7249139Z     DELETE #destroy
2024-02-21T09:46:17.1121339Z       redirects
2024-02-21T09:46:17.1122277Z     GET #show
2024-02-21T09:46:17.3475778Z       returns http success
2024-02-21T09:46:17.3940273Z     GET #new
2024-02-21T09:46:17.3940803Z       returns http success
2024-02-21T09:46:17.3941363Z       when given a valid account request token in the query parameters
2024-02-21T09:46:17.4664641Z         should render new with pre populate input fields from the account_request
2024-02-21T09:46:17.4665767Z       when given a token that matches a account request that has already been processed
2024-02-21T09:46:17.7066513Z         should render new with a flash error message
2024-02-21T09:46:17.7067722Z     PATCH #update
2024-02-21T09:46:17.7068326Z       with a valid update
2024-02-21T09:46:17.9087302Z         redirects to #index
2024-02-21T09:46:17.9088015Z       with an invalid update
2024-02-21T09:46:18.1594000Z         returns http success
2024-02-21T09:46:18.3935995Z         redirects to #edit with an error message
2024-02-21T09:46:18.3937169Z     GET #edit
2024-02-21T09:46:18.6286667Z       returns http success
2024-02-21T09:46:18.6287328Z     PUT #update
2024-02-21T09:46:18.6524474Z       redirect
2024-02-21T09:46:18.6525139Z     POST #create
2024-02-21T09:46:18.6525701Z       with valid params
2024-02-21T09:46:18.9857667Z         creates an organization and redirects to #index
2024-02-21T09:46:18.9858334Z       with invalid params
2024-02-21T09:46:19.0335616Z         does not create an organization and renders #create with an error message
2024-02-21T09:46:19.0336508Z 
2024-02-21T09:46:19.0336702Z Vendor
2024-02-21T09:46:19.0338359Z   When a user views the index page
2024-02-21T09:46:22.6711098Z     should have the vendor names in alphabetical order
2024-02-21T09:46:22.6712059Z   when editing an existing vendor
2024-02-21T09:46:23.4912951Z     can update the contact info for a vendor as a user
2024-02-21T09:46:24.3115481Z     does not update a vendor with empty attributes
2024-02-21T09:46:24.3116238Z   When vendor have purchases associated with them already
2024-02-21T09:46:24.9914099Z     can have existing vendors show in the #index with some summary stats
2024-02-21T09:46:25.6098079Z     can have a single vendor show semi-detailed stats about purchases
2024-02-21T09:46:25.6099288Z   when creating a new vendor
2024-02-21T09:46:26.4204817Z     can create a new vendor instance as a user
2024-02-21T09:46:27.1585624Z     cannot add a new vendor instance with empty attributes
2024-02-21T09:46:27.1586734Z 
2024-02-21T09:46:27.1586875Z Kit management
2024-02-21T09:46:28.8659947Z   can allocate and deallocate quantity per storage location from kit index
2024-02-21T09:46:29.7934032Z   can create a new kit as a user with the proper quantity
2024-02-21T09:46:30.3992154Z   should not display inactive storage locations under allocations
2024-02-21T09:46:30.3992876Z   when there is no kit quantity
2024-02-21T09:46:31.5708304Z     will not change quantity amounts when deallocating
2024-02-21T09:46:31.5709527Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-21T09:46:32.7077620Z     will not change quantity amounts when allocating
2024-02-21T09:46:32.7079439Z 
2024-02-21T09:46:32.7079901Z Profiles
2024-02-21T09:46:32.7082214Z   GET #edit
2024-02-21T09:46:32.8309711Z     returns http success
2024-02-21T09:46:32.8310746Z   POST #update
2024-02-21T09:46:32.8311387Z     when updating an existing value to a blank value
2024-02-21T09:46:32.8847872Z       should have blank values
2024-02-21T09:46:32.9382032Z       update partner
2024-02-21T09:46:32.9382821Z     successful save
2024-02-21T09:46:32.9915969Z       update partner
2024-02-21T09:46:33.0413167Z       redirects to #show
2024-02-21T09:46:33.0413821Z 
2024-02-21T09:46:33.0414145Z Audits
2024-02-21T09:46:33.0415788Z   while signed in as an organization admin
2024-02-21T09:46:33.0416955Z     POST #finalize
2024-02-21T09:46:33.1216179Z       sets the finalize status and saves an event
2024-02-21T09:46:33.1217131Z     GET #edit
2024-02-21T09:46:33.2114309Z       is successful if the status of audit is `in_progress`
2024-02-21T09:46:33.2850705Z       redirects to #index if the status of audit is not `in_progress`
2024-02-21T09:46:33.2851591Z     DELETE #destroy
2024-02-21T09:46:33.2851943Z       with valid params
2024-02-21T09:46:33.3275098Z         can not destroy the audit if the audit's status is `finalized`
2024-02-21T09:46:33.3733827Z         destroys the audit if the audit's status is `confirms`
2024-02-21T09:46:33.4190080Z         destroys the audit if the audit's status is `in_progress`
2024-02-21T09:46:33.4190837Z     GET #show
2024-02-21T09:46:33.4833265Z       is successful
2024-02-21T09:46:33.4834175Z     POST #create
2024-02-21T09:46:33.4835006Z       with invalid params
2024-02-21T09:46:33.5347435Z         re-renders the 'new' template
2024-02-21T09:46:33.6003033Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-21T09:46:33.6450732Z         assigns a newly created but unsaved audit as @audit
2024-02-21T09:46:33.6451365Z       with valid params
2024-02-21T09:46:33.6915880Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-21T09:46:33.7376467Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-21T09:46:33.7818997Z         creates a new Audit
2024-02-21T09:46:33.8250658Z         assigns a newly created audit as @audit
2024-02-21T09:46:33.8677851Z         redirects to the #show after created audit
2024-02-21T09:46:33.8679100Z     GET #new
2024-02-21T09:46:33.9181302Z       is successful
2024-02-21T09:46:33.9182280Z     GET #index
2024-02-21T09:46:33.9826058Z       is successful
2024-02-21T09:46:33.9827074Z 
2024-02-21T09:46:33.9827550Z Purchases
2024-02-21T09:46:33.9829875Z   while signed in as an organization admin
2024-02-21T09:46:35.1613377Z     allows deletion of a purchase
2024-02-21T09:46:35.1614430Z   while signed in as a normal user
2024-02-21T09:46:35.1615182Z     When visiting the index page
2024-02-21T09:46:35.1615857Z       In the middle of the year
2024-02-21T09:46:35.9329447Z         User sees total purchases value
2024-02-21T09:46:36.8541519Z         User can click to the new purchase form
2024-02-21T09:46:37.5991662Z         User sees purchased date column
2024-02-21T09:46:37.5992463Z       When filtering on the index page
2024-02-21T09:46:38.4475387Z         User can filter the #index by storage location
2024-02-21T09:46:39.3113386Z         User can filter the #index by vendor
2024-02-21T09:46:39.3114091Z         behaves like Date Range Picker
2024-02-21T09:46:39.3116633Z           when choosing 'Last Month'
2024-02-21T09:46:40.5335529Z             shows only 2 of the records
2024-02-21T09:46:40.5336478Z           when choosing a date range that only includes the previous week
2024-02-21T09:46:41.6232068Z             shows only 1 record
2024-02-21T09:46:41.6233232Z           when choosing 'All Time'
2024-02-21T09:46:42.6452164Z             shows all the records
2024-02-21T09:46:42.6453627Z     When visiting an existing purchase
2024-02-21T09:46:43.1772956Z       does not allow deletion of a purchase
2024-02-21T09:46:43.1773827Z     When creating a new purchase
2024-02-21T09:46:43.7152471Z       should not display inactive storage locations in dropdown
2024-02-21T09:46:43.7153546Z       via manual entry
2024-02-21T09:46:44.7901910Z         User can create vendor from purchase
2024-02-21T09:46:45.7931415Z         User can create a purchase using dollars decimal amount
2024-02-21T09:46:46.9033126Z         Does not include inactive items in the line item fields
2024-02-21T09:46:48.0772303Z         User can create a purchase IN THE PAST
2024-02-21T09:46:49.3558944Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-21T09:46:49.3560343Z         when creating a purchase incorrectly
2024-02-21T09:46:50.1615008Z           should display failure with error messages
2024-02-21T09:46:51.1757359Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-21T09:46:51.1758356Z       via barcode entry
2024-02-21T09:46:51.9346951Z         a user can add items via scanning them in by barcode
2024-02-21T09:46:52.8772005Z         User scan same barcode 2 times
2024-02-21T09:46:54.0971640Z         a user can add items that do not yet have a barcode
2024-02-21T09:46:54.0972309Z       Editing purchase
2024-02-21T09:46:54.6048628Z         A user can see purchased_from value
2024-02-21T09:46:55.2406558Z         A user can view another organizations purchase
2024-02-21T09:46:55.2407940Z 
2024-02-21T09:46:55.2409438Z User account management
2024-02-21T09:46:55.2410090Z   when not in staging
2024-02-21T09:46:56.1728125Z     should change an user name
2024-02-21T09:46:57.0900093Z     should change the email
2024-02-21T09:46:57.8758156Z     should fail when the email is invalid
2024-02-21T09:46:57.8759102Z   when in staging
2024-02-21T09:46:58.3343113Z     should display staging warning
2024-02-21T09:46:58.7756718Z     should not allow the user to change staging credentials
2024-02-21T09:46:58.7757465Z 
2024-02-21T09:46:58.7757720Z /account_requests
2024-02-21T09:46:58.7759474Z   GET #received
2024-02-21T09:46:58.7760341Z     when given a invalid token
2024-02-21T09:46:58.7850841Z       should render a error that says that is code provided is invalid
2024-02-21T09:46:58.7851924Z     when given a valid token
2024-02-21T09:46:58.8033082Z       should render the received template
2024-02-21T09:46:58.8034128Z   POST #create
2024-02-21T09:46:58.8035033Z     with valid parameters
2024-02-21T09:46:58.8198465Z       delivers the confirmation email via default queue
2024-02-21T09:46:58.8354329Z       creates a new AccountRequest
2024-02-21T09:46:58.8515235Z       redirects to the created account_request confirmation
2024-02-21T09:46:58.8516552Z     with invalid parameters
2024-02-21T09:46:58.8739603Z       does not create a new AccountRequest
2024-02-21T09:46:58.8922360Z       renders a successful response (i.e. to display the 'new' template)
2024-02-21T09:46:58.8923692Z   GET #confirmation
2024-02-21T09:46:58.8924235Z     when given a invalid token
2024-02-21T09:46:58.8991778Z       should render a error that says that is code provided is invalid
2024-02-21T09:46:58.8992963Z     when given a valid token
2024-02-21T09:46:58.9141333Z       should render the confirmation template
2024-02-21T09:46:58.9142547Z     when given a token that has already been confirmed
2024-02-21T09:46:59.1164200Z       should render a error that says that is code provided is invalid
2024-02-21T09:46:59.1165291Z   GET #confirm
2024-02-21T09:46:59.1166218Z     when given a valid token
2024-02-21T09:46:59.1379721Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-21T09:46:59.1380816Z     when given a token that has already been confirmed
2024-02-21T09:46:59.3403206Z       should render a error that says that is code provided is invalid
2024-02-21T09:46:59.3404095Z     when given a invalid token
2024-02-21T09:46:59.3477349Z       should render a error that says that is code provided is invalid
2024-02-21T09:46:59.3478057Z   GET #new
2024-02-21T09:46:59.3627961Z     renders a successful response
2024-02-21T09:46:59.3629020Z 
2024-02-21T09:46:59.3629286Z Admin Organization Management
2024-02-21T09:46:59.3630579Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-21T09:47:01.4033715Z     creates a new organization
2024-02-21T09:47:01.4034899Z   While signed in as an Administrative User (super admin)
2024-02-21T09:47:02.7141507Z     filters by organizations by name in organizations index page
2024-02-21T09:47:04.6966753Z     creates a new organization
2024-02-21T09:47:06.0276443Z     can view organization details
2024-02-21T09:47:06.0277029Z 
2024-02-21T09:47:06.0277472Z /partners/profiles
2024-02-21T09:47:06.0278620Z   GET #edit
2024-02-21T09:47:06.1337839Z     has "Yes" radio button value when value is true
2024-02-21T09:47:06.2374758Z     does not have default radio button value when value is nil
2024-02-21T09:47:06.3301889Z     displays the partner
2024-02-21T09:47:06.4302167Z     has "No" radio button value when value is false
2024-02-21T09:47:06.4303134Z   PUT #update
2024-02-21T09:47:06.4953406Z     updates the partner and profile
2024-02-21T09:47:06.4954074Z     with no social media
2024-02-21T09:47:06.6052940Z       shows an error
2024-02-21T09:47:06.6053864Z     when updating an existing value to a blank value
2024-02-21T09:47:06.6650709Z       updates the partner profile attribute to a blank value
2024-02-21T09:47:06.7258468Z       does not update other partner profile attributes to blank
2024-02-21T09:47:06.7937375Z       does store N/A in the database
2024-02-21T09:47:06.7938152Z   GET #show
2024-02-21T09:47:06.8580944Z     displays the partner
2024-02-21T09:47:06.9199202Z     shows correct values for yes/no buttons
2024-02-21T09:47:06.9200220Z 
2024-02-21T09:47:06.9200774Z StorageLocations
2024-02-21T09:47:06.9201833Z   While not signed in
2024-02-21T09:47:06.9280168Z     redirects the user to the sign-in page for CRUD actions
2024-02-21T09:47:06.9281440Z   While signed in
2024-02-21T09:47:06.9282579Z     GET #index
2024-02-21T09:47:06.9283819Z       csv
2024-02-21T09:47:06.9504965Z         succeeds
2024-02-21T09:47:07.0577222Z         includes headers followed by alphabetized item names
2024-02-21T09:47:07.0578159Z       html
2024-02-21T09:47:07.1018738Z         succeeds
2024-02-21T09:47:07.1019564Z         with inactive locations
2024-02-21T09:47:07.1437383Z           does not includes the inactive location
2024-02-21T09:47:07.1438390Z           with include_inactive_locations
2024-02-21T09:47:07.1856429Z             includes the inactive location
2024-02-21T09:47:07.1857578Z     GET #inventory
2024-02-21T09:47:07.1858187Z       when also including omitted items
2024-02-21T09:47:07.2480329Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-21T09:47:07.3042681Z         contains a collection of ducktyped entries that respond the same
2024-02-21T09:47:07.3043915Z       when also including inactive items
2024-02-21T09:47:07.3800819Z         returns a collection that also includes items that have been deactivated
2024-02-21T09:47:07.3802036Z       without any overrides
2024-02-21T09:47:07.4406574Z         returns a collection that only includes items at the storage location
2024-02-21T09:47:07.4408084Z     PUT #reactivate
2024-02-21T09:47:07.4603415Z       undiscards
2024-02-21T09:47:07.4604068Z     GET #destroy
2024-02-21T09:47:07.4885740Z       redirects to #index
2024-02-21T09:47:07.4886575Z     GET #show
2024-02-21T09:47:07.4887404Z       csv
2024-02-21T09:47:07.5460249Z         should be successful
2024-02-21T09:47:07.5461038Z       html
2024-02-21T09:47:07.6342909Z         should return a correct response
2024-02-21T09:47:07.6343887Z         with version date set
2024-02-21T09:47:07.6344553Z           with no version found
2024-02-21T09:47:07.7196331Z             should show N/A
2024-02-21T09:47:07.7197218Z           with a version found
2024-02-21T09:47:07.8116221Z             should show the version specified
2024-02-21T09:47:07.8117224Z     Looking at a different organization
2024-02-21T09:47:08.0015235Z       redirects the user to the sign-in page for CRUD actions
2024-02-21T09:47:08.0016327Z     POST #import_csv
2024-02-21T09:47:08.0016769Z       with a csv file
2024-02-21T09:47:08.0207467Z         redirects
2024-02-21T09:47:08.0410404Z         presents a flash notice message
2024-02-21T09:47:08.0479271Z         invokes .import_csv
2024-02-21T09:47:08.0480303Z       without a csv file
2024-02-21T09:47:08.0645964Z         presents a flash error message
2024-02-21T09:47:08.0815822Z         redirects to :index
2024-02-21T09:47:08.0817012Z       csv file with wrong headers
2024-02-21T09:47:08.0984370Z         redirects
2024-02-21T09:47:08.1140359Z         presents a flash error message
2024-02-21T09:47:08.1141539Z     PUT #deactivate
2024-02-21T09:47:08.1374555Z       discards
2024-02-21T09:47:08.1375342Z       with inventory
2024-02-21T09:47:08.1928973Z         does not discard
2024-02-21T09:47:08.1929750Z     GET #new
2024-02-21T09:47:08.5798930Z       returns http success
2024-02-21T09:47:08.5799704Z     GET #edit
2024-02-21T09:47:08.6211332Z       returns http success
2024-02-21T09:47:08.6212637Z 
2024-02-21T09:47:08.6212939Z Managing requests
2024-02-21T09:47:08.6214900Z   creating a request
2024-02-21T09:47:08.6216051Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:47:08.6217207Z       WHEN they create a request inproperly by not inputting anything
2024-02-21T09:47:09.5664373Z         should show an error message with the instructions
2024-02-21T09:47:09.5665431Z       WHEN they create a request properly
2024-02-21T09:47:09.5666684Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:47:11.9540238Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-21T09:47:11.9541502Z       WHEN they create a request with only a comment
2024-02-21T09:47:12.9224114Z         should be created without any issue
2024-02-21T09:47:12.9225033Z   creating a individuals/family request
2024-02-21T09:47:12.9226348Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:47:12.9227503Z       WHEN they create a request inproperly
2024-02-21T09:47:13.8873407Z         should show an error message with the instructions
2024-02-21T09:47:13.8874538Z       WHEN they create a request properly
2024-02-21T09:47:13.8876281Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:47:16.0566352Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-21T09:47:16.0570544Z 
2024-02-21T09:47:16.0570856Z Dashboard
2024-02-21T09:47:16.0573461Z   With a new essentials bank
2024-02-21T09:47:44.1466847Z     displays the getting started guide until the steps are completed
2024-02-21T09:47:44.1468142Z   With an existing essentials bank
2024-02-21T09:47:44.1468818Z     Donations
2024-02-21T09:47:45.0665239Z       has a link to create a new donation
2024-02-21T09:47:45.0666773Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:47:45.0667770Z         filtering to 'This Month'
2024-02-21T09:47:46.5907503Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:47:46.5909629Z       given 1 Donation on 2024-02-19 (only if a valid date), 3 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:47:46.5910623Z         filtering to 'Yesterday'
2024-02-21T09:47:48.1350822Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:47:48.1352650Z       given 1 Donation on 2024-01-22 (only if a valid date), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:47:48.1353984Z         filtering to 'Last 30 Days'
2024-02-21T09:47:49.8280483Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:47:49.8282493Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:47:49.8283825Z         filtering to 'Last Month'
2024-02-21T09:47:53.3791132Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:47:53.3792704Z       given 1 Donation on 2024-02-14 (only if a valid date), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:47:53.3793694Z         filtering to 'Last 7 Days'
2024-02-21T09:47:56.8291012Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:47:56.8292988Z       given 1 Donation on 2024-02-20 (only if a valid date), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:47:56.8294185Z         filtering to 'Today'
2024-02-21T09:47:58.3587633Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:47:58.3589456Z       given 1 Donation on 2022-02-20 (only if a valid date), 3 during 2022-02-21..2023-11-11, and 1 on 2023-11-12
2024-02-21T09:47:58.3590853Z         filtering to '' (February 21, 2022 - November 11, 2023)
2024-02-21T09:47:59.9782504Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:47:59.9784297Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:47:59.9785799Z         filtering to 'This Year'
2024-02-21T09:48:01.4222654Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:48:01.4223824Z     Product Drives
2024-02-21T09:48:02.0136631Z       has a widget for product drive summary data
2024-02-21T09:48:02.0138613Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:48:02.0139984Z         filtering to 'This Year'
2024-02-21T09:48:03.5190148Z           shows the correct total donations
2024-02-21T09:48:04.9955811Z           shows the correct total money raised
2024-02-21T09:48:06.6610180Z           shows 1 Recent Donation link(s)
2024-02-21T09:48:06.6612000Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 1 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:06.6613546Z         filtering to 'Last 7 Days'
2024-02-21T09:48:08.1338597Z           shows 1 Recent Donation link(s)
2024-02-21T09:48:09.5942494Z           shows the correct total donations
2024-02-21T09:48:11.0564278Z           shows the correct total money raised
2024-02-21T09:48:11.0566212Z       given 1 Product Drive Donation on 2024-01-22 (unless 'All Time'), 3 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:11.0567235Z         filtering to 'Last 30 Days'
2024-02-21T09:48:12.5830226Z           shows 3 Recent Donation link(s)
2024-02-21T09:48:14.1012790Z           shows the correct total money raised
2024-02-21T09:48:15.6696757Z           shows the correct total donations
2024-02-21T09:48:15.6698369Z       given 1 Product Drive Donation on 2022-02-20 (unless 'All Time'), 3 during 2022-02-21..2023-11-17, and 1 on 2023-11-18
2024-02-21T09:48:15.6699446Z         filtering to '' (February 21, 2022 - November 17, 2023)
2024-02-21T09:48:17.2209345Z           shows the correct total money raised
2024-02-21T09:48:18.8290809Z           shows the correct total donations
2024-02-21T09:48:20.3771822Z           shows 3 Recent Donation link(s)
2024-02-21T09:48:20.3773037Z       Product drive behaviour with Mixed Donation types
2024-02-21T09:48:21.1317256Z         only shows product drive donations as product drive donations
2024-02-21T09:48:21.9251742Z         only counts product drive donations for product drive
2024-02-21T09:48:22.6972724Z         only counts product drive money raised
2024-02-21T09:48:22.6974136Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:48:22.6975023Z         filtering to 'Last Month'
2024-02-21T09:48:24.3300366Z           shows the correct total money raised
2024-02-21T09:48:25.9303435Z           shows the correct total donations
2024-02-21T09:48:27.5485777Z           shows 3 Recent Donation link(s)
2024-02-21T09:48:27.5487408Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 0 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:27.5488540Z         filtering to 'Today'
2024-02-21T09:48:28.9931540Z           shows the correct total money raised
2024-02-21T09:48:32.3782130Z           shows 0 Recent Donation link(s)
2024-02-21T09:48:33.8211715Z           shows the correct total donations
2024-02-21T09:48:33.8213505Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:48:33.8214943Z         filtering to 'This Month'
2024-02-21T09:48:35.2305536Z           shows the correct total donations
2024-02-21T09:48:38.6437440Z           shows 0 Recent Donation link(s)
2024-02-21T09:48:40.0182269Z           shows the correct total money raised
2024-02-21T09:48:40.0184078Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:48:40.0185155Z         filtering to 'Yesterday'
2024-02-21T09:48:43.4344080Z           shows 0 Recent Donation link(s)
2024-02-21T09:48:44.8328492Z           shows the correct total money raised
2024-02-21T09:48:46.2722480Z           shows the correct total donations
2024-02-21T09:48:46.2723400Z     Manufacturer Donations
2024-02-21T09:48:46.8796465Z       has a link to create a new donation
2024-02-21T09:48:46.8798413Z       given 1 Manufacturer donating on 2024-01-22  (unless 'All Time'), 7 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:46.8799709Z         filtering to 'Last 30 Days'
2024-02-21T09:48:49.1411898Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-21T09:48:49.1413905Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 6 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:49.1415430Z         filtering to 'Today'
2024-02-21T09:48:51.4042406Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T09:48:51.4044344Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:48:51.4045649Z         filtering to 'This Year'
2024-02-21T09:48:53.2262468Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:48:53.2264089Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:48:53.2265126Z         filtering to 'All Time'
2024-02-21T09:48:54.8685272Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-21T09:48:54.8687015Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 9 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:48:54.8688214Z         filtering to 'Yesterday'
2024-02-21T09:48:57.4873614Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:48:57.4876002Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:48:57.4877148Z         filtering to 'Last Month'
2024-02-21T09:48:59.6231909Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T09:48:59.6234288Z       given 1 Manufacturer donating on 2022-02-20  (unless 'All Time'), 8 during 2022-02-21..2023-10-31, and 1 on 2023-11-01
2024-02-21T09:48:59.6236099Z         filtering to '' (February 21, 2022 - October 31, 2023)
2024-02-21T09:49:02.0619034Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:49:02.0621008Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 5 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:49:02.0622037Z         filtering to 'This Month'
2024-02-21T09:49:04.1485121Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-21T09:49:04.1487343Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 3 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:04.1488596Z         filtering to 'Last 7 Days'
2024-02-21T09:49:06.0736721Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:49:06.0737868Z     Distributions
2024-02-21T09:49:07.1293694Z       has a link to create a new distribution
2024-02-21T09:49:07.1295413Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:07.1296667Z         filtering to 'All Time'
2024-02-21T09:49:10.5949282Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T09:49:10.5951187Z       given 1 Distribution on 2024-01-22  (unless 'All Time'), 3 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:10.5952675Z         filtering to 'Last 30 Days'
2024-02-21T09:49:12.1374983Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:49:12.1376569Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:49:12.1377712Z         filtering to 'This Month'
2024-02-21T09:49:13.6359558Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T09:49:13.6361431Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 3 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:49:13.6362923Z         filtering to 'Yesterday'
2024-02-21T09:49:15.1983940Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:49:15.1985498Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:49:15.1986580Z         filtering to 'Last Month'
2024-02-21T09:49:16.6959092Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:49:16.6961136Z       given 1 Distribution on 2022-02-20  (unless 'All Time'), 1 during 2022-02-21..2024-02-19, and 1 on 2024-02-20
2024-02-21T09:49:16.6962569Z         filtering to '' (February 21, 2022 - February 19, 2024)
2024-02-21T09:49:18.1311777Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T09:49:18.1313690Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 2 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:18.1314915Z         filtering to 'Last 7 Days'
2024-02-21T09:49:19.6227159Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:49:19.6229048Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:49:19.6230484Z         filtering to 'This Year'
2024-02-21T09:49:21.1716850Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:49:21.1718808Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 3 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:21.1720030Z         filtering to 'Today'
2024-02-21T09:49:22.7794997Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:49:22.7795964Z     Signage
2024-02-21T09:49:25.6942720Z       shows their organization name unless they have a logo set
2024-02-21T09:49:25.6943785Z     Inventory Totals
2024-02-21T09:49:25.6944275Z       Summary
2024-02-21T09:49:26.4410363Z         displays the on-hand totals
2024-02-21T09:49:26.4411227Z         when constrained to date range
2024-02-21T09:49:27.5497508Z           does not change
2024-02-21T09:49:27.5498266Z     Purchases
2024-02-21T09:49:28.4862676Z       has a link to create a new purchase
2024-02-21T09:49:28.4863972Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 2 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:28.4864917Z         filtering to 'Today'
2024-02-21T09:49:29.9663561Z           shows correct 2 Recent Purchase link(s)
2024-02-21T09:49:29.9665223Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:29.9666506Z         filtering to 'Last 7 Days'
2024-02-21T09:49:33.3911669Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:49:33.3913631Z       given 1 Purchase on 2024-01-22  (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:49:33.3915202Z         filtering to 'Last 30 Days'
2024-02-21T09:49:34.9853373Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:49:34.9854863Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:49:34.9855936Z         filtering to 'Yesterday'
2024-02-21T09:49:36.4443483Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:49:36.4445012Z       given 1 Purchase on 2022-02-20  (unless 'All Time'), 1 during 2022-02-21..2024-01-28, and 1 on 2024-01-29
2024-02-21T09:49:36.4446254Z         filtering to '' (February 21, 2022 - January 28, 2024)
2024-02-21T09:49:37.9141793Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:49:37.9143336Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:49:37.9144480Z         filtering to 'This Month'
2024-02-21T09:49:41.2970764Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:49:41.2972286Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:49:41.2973366Z         filtering to 'This Year'
2024-02-21T09:49:42.8350896Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:49:42.8352402Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:49:42.8353482Z         filtering to 'Last Month'
2024-02-21T09:49:44.2745946Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:49:44.2747898Z 
2024-02-21T09:49:44.2748151Z /partners/children
2024-02-21T09:49:44.2749361Z   GET #index
2024-02-21T09:49:44.3624634Z     should export CSV
2024-02-21T09:49:44.4462419Z     should render without any issues
2024-02-21T09:49:44.4462994Z 
2024-02-21T09:49:44.4463488Z Organization management
2024-02-21T09:49:44.4465301Z   while signed in as a normal user
2024-02-21T09:49:44.9282765Z     cannot see 'Make user' button for admins
2024-02-21T09:49:45.3872196Z     can see summary details about the organization as a user
2024-02-21T09:49:45.3873078Z   while signed in as an organization admin
2024-02-21T09:49:46.3830512Z     can deactivate a user in the organization
2024-02-21T09:49:46.9048084Z     can re-invite a user to an organization after 7 days
2024-02-21T09:49:47.8771760Z     can add a new user to an organization
2024-02-21T09:49:48.3841022Z     can see 'Make user' button for admins
2024-02-21T09:49:49.3680316Z     can re-activate a user in the organization
2024-02-21T09:49:49.3681044Z     Viewing the organization
2024-02-21T09:49:49.9472383Z       can view organization details
2024-02-21T09:49:49.9473053Z     Editing the organization
2024-02-21T09:49:50.9769085Z       can select if the org distributes essentials monthly
2024-02-21T09:49:52.0057550Z       can select if the org shows year-to-date values on the distribution printout
2024-02-21T09:49:52.9891211Z       can enable if the org uses single step invite and approve partner process
2024-02-21T09:49:53.9733550Z       can select if the org repackages essentials
2024-02-21T09:49:54.8676883Z       can set a default storage location on the organization
2024-02-21T09:49:55.7418921Z       can set the NDBN Member ID
2024-02-21T09:49:56.9272057Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-21T09:49:58.4170989Z       can select and deselect Required Partner Fields
2024-02-21T09:49:59.3051201Z       can set a reminder and a deadline day
2024-02-21T09:50:00.2920289Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-21T09:50:00.3722962Z W, [2024-02-21T01:50:00.371937 #2385]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-21T09:50:00.3756341Z W, [2024-02-21T01:50:00.372015 #2385]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:50:00.3758691Z W, [2024-02-21T01:50:00.372035 #2385]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:50:00.3761452Z W, [2024-02-21T01:50:00.372065 #2385]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-21T09:50:00.3762616Z 
2024-02-21T09:50:00.3763009Z Finished in 3 minutes 45.5 seconds (files took 8.66 seconds to load)
2024-02-21T09:50:00.3763821Z 235 examples, 0 failures
2024-02-21T09:50:00.3772924Z 
2024-02-21T09:50:00.3773157Z Randomized with seed 10243
2024-02-21T09:50:00.3773505Z 
2024-02-21T09:50:00.9155360Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3819 / 6404 LOC (59.63%) covered.
2024-02-21T09:50:01.4468412Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
