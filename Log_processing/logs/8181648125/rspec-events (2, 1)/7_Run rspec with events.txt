2024-03-07T01:48:02.5196225Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:48:02.5197247Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:48:02.5247501Z shell: /usr/bin/bash -e {0}
2024-03-07T01:48:02.5247955Z env:
2024-03-07T01:48:02.5248304Z   POSTGRES_HOST: localhost
2024-03-07T01:48:02.5248800Z   DATABASE_HOST: localhost
2024-03-07T01:48:02.5249250Z   PG_USERNAME: postgres
2024-03-07T01:48:02.5249718Z   PG_PASSWORD: password
2024-03-07T01:48:02.5250103Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:48:02.5250538Z   POSTGRES_PORT: 5432
2024-03-07T01:48:02.5250976Z   PGHOST: localhost
2024-03-07T01:48:02.5251355Z   PGUSER: postgres
2024-03-07T01:48:02.5251717Z   RAILS_ENV: test
2024-03-07T01:48:02.5252417Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:48:02.5252900Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T01:48:02.5253326Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-07T01:48:02.5253850Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:48:02.5254497Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:48:02.5255237Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:48:02.5256151Z   EVENTS_READ: true
2024-03-07T01:48:02.5256526Z ##[endgroup]
2024-03-07T01:48:11.4360158Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/item_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/models/purchase_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/user_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/models/question_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/item_category_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/inventory_item_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/base_item_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/models/role_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/models/county_spec.rb" "spec/services/service_object_errors_mixin_spec.rb"
2024-03-07T01:48:20.1957398Z 
2024-03-07T01:48:20.1958577Z Randomized with seed 50638
2024-03-07T01:48:21.0046105Z 
2024-03-07T01:48:21.0046912Z PartnerMailer
2024-03-07T01:48:21.0048084Z   #recertification_request
2024-03-07T01:48:21.0494239Z     renders the body with text that indicates to recertify and link to where
2024-03-07T01:48:21.0731256Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:48:21.0732522Z   #application_approved
2024-03-07T01:48:21.1002530Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-07T01:48:21.1252249Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:48:21.1253321Z 
2024-03-07T01:48:21.1253624Z Reports::WarehouseReportService
2024-03-07T01:48:21.1254398Z   #report
2024-03-07T01:48:21.5022361Z     should print normal values
2024-03-07T01:48:21.6793476Z     should print zero values
2024-03-07T01:48:22.0361230Z     should print unknown warehouse type
2024-03-07T01:48:22.2175100Z     should print unknown square footage
2024-03-07T01:48:22.2175940Z 
2024-03-07T01:48:22.2176314Z Partner
2024-03-07T01:48:22.2178465Z   associations
2024-03-07T01:48:22.2220071Z     is expected to have many users dependent => destroy
2024-03-07T01:48:22.2270759Z     is expected to have many requests
2024-03-07T01:48:22.2324769Z     is expected to have many families dependent => destroy
2024-03-07T01:48:22.2364197Z     is expected to have many requestable_items through item_categories source => items
2024-03-07T01:48:22.2399542Z     is expected to have many children through families
2024-03-07T01:48:22.2456472Z     is expected to belong to partner_group optional: true
2024-03-07T01:48:22.2518394Z     is expected to belong to organization required: true
2024-03-07T01:48:22.2552622Z     is expected to have many requests
2024-03-07T01:48:22.2587506Z     is expected to have many item_categories through partner_group
2024-03-07T01:48:22.2640267Z     is expected to have many distributions
2024-03-07T01:48:22.2641032Z     primary_user
2024-03-07T01:48:22.2947448Z       should return the first user ever created for a partner
2024-03-07T01:48:22.2948417Z   #deactivated?
2024-03-07T01:48:22.2949190Z     when the status is 'deactivated'
2024-03-07T01:48:22.2994617Z       should return true
2024-03-07T01:48:22.2995446Z     when the status is not 'deactivated'
2024-03-07T01:48:22.3036895Z       should return false
2024-03-07T01:48:22.3037703Z   changing emails
2024-03-07T01:48:22.3315808Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-07T01:48:22.3644982Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-07T01:48:22.3964191Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-07T01:48:22.4226508Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-07T01:48:22.4487966Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-07T01:48:22.4759775Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-07T01:48:22.5011770Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-07T01:48:22.5012975Z   #profile
2024-03-07T01:48:22.5263162Z     should return the associated Partners::Profile record
2024-03-07T01:48:22.5264104Z   #quantity_year_to_date
2024-03-07T01:48:22.7508396Z     does not include quantities from distributions issued during the previous year
2024-03-07T01:48:22.9381202Z     includes all item quantities from distributions issued during the current year
2024-03-07T01:48:22.9382374Z   ActiveStorage validation
2024-03-07T01:48:22.9503397Z     validates that attachments are pdf or docs
2024-03-07T01:48:22.9504227Z   versioning
2024-03-07T01:48:22.9541172Z     is expected to be versioned
2024-03-07T01:48:22.9542729Z   Filters
2024-03-07T01:48:22.9543640Z     by_status
2024-03-07T01:48:22.9946799Z       yields deactivated partner when deactivated status provided
2024-03-07T01:48:23.0350701Z       yields partners with the provided status
2024-03-07T01:48:23.0351508Z   #csv_export_attributes
2024-03-07T01:48:23.0621391Z     includes contact person information from parnerbase
2024-03-07T01:48:23.0622643Z   #impact_metrics
2024-03-07T01:48:23.0623271Z     when partner has related information
2024-03-07T01:48:23.1305769Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-07T01:48:23.1306863Z     when partner don't have any related information
2024-03-07T01:48:23.1540418Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-07T01:48:23.1541821Z   #approvable?
2024-03-07T01:48:23.1542325Z     when status is awaiting_review
2024-03-07T01:48:23.1596601Z       should return true
2024-03-07T01:48:23.1599749Z     when status is invited
2024-03-07T01:48:23.1639807Z       should return true
2024-03-07T01:48:23.1640571Z     when status is not invited or awaiting_review
2024-03-07T01:48:23.1724488Z       should return false
2024-03-07T01:48:23.1726079Z   import_csv
2024-03-07T01:48:23.4966583Z     imports partners from a csv file with BOM encodings
2024-03-07T01:48:23.7153175Z     imports partners from a csv file and prevents multiple imports
2024-03-07T01:48:23.7154156Z   #deletable?
2024-03-07T01:48:23.7154797Z     when status is not uninvited
2024-03-07T01:48:23.7236715Z       should return false
2024-03-07T01:48:23.7237488Z     when status is uninvited
2024-03-07T01:48:23.7238823Z       when it has no other associations
2024-03-07T01:48:23.7359886Z         should return true
2024-03-07T01:48:23.7360663Z       when it has a profile and users
2024-03-07T01:48:23.7625564Z         should return false
2024-03-07T01:48:23.7626303Z       when it has a request
2024-03-07T01:48:23.7832181Z         should return false
2024-03-07T01:48:23.7833099Z       when it has a distribution
2024-03-07T01:48:23.7976433Z         should return false
2024-03-07T01:48:23.7977257Z       when it has a profile but no users
2024-03-07T01:48:23.8125547Z         should return true
2024-03-07T01:48:23.8126209Z   callbacks
2024-03-07T01:48:23.8339874Z     properly downcases email
2024-03-07T01:48:23.8340749Z   Validations >
2024-03-07T01:48:23.8394693Z     must belong to an organization
2024-03-07T01:48:23.8479890Z     validates the quota is a number but it is not required
2024-03-07T01:48:23.8761828Z     requires a unique name within an organization
2024-03-07T01:48:23.9001920Z     does not require a unique name between organizations
2024-03-07T01:48:23.9309201Z     requires a unique email that is formatted correctly
2024-03-07T01:48:23.9571711Z     still requires a unique email between organizations
2024-03-07T01:48:23.9572366Z 
2024-03-07T01:48:23.9572618Z User
2024-03-07T01:48:23.9573686Z   #role_added
2024-03-07T01:48:23.9936148Z     renders the body correctly
2024-03-07T01:48:23.9937051Z   #send_reset_password_instructions
2024-03-07T01:48:23.9938121Z     user gets an email with instructions
2024-03-07T01:48:24.0873629Z       sends an email with instructions
2024-03-07T01:48:24.0874648Z 
2024-03-07T01:48:24.0875235Z Reports::OtherProductsReportService
2024-03-07T01:48:24.0876036Z   #report
2024-03-07T01:48:24.2866192Z     should report zero values
2024-03-07T01:48:24.9242932Z     should report normal values
2024-03-07T01:48:24.9243805Z 
2024-03-07T01:48:24.9244094Z AccountRequestMailer
2024-03-07T01:48:24.9244765Z   #confirmation
2024-03-07T01:48:24.9462539Z     should be sent to the specified account_request email
2024-03-07T01:48:24.9573848Z     should be from no-reply@humanessentials.app
2024-03-07T01:48:24.9681110Z     should have the correct subject
2024-03-07T01:48:24.9682037Z     Text format
2024-03-07T01:48:24.9792247Z       should include the instruction video link
2024-03-07T01:48:24.9899731Z       should include the staging/demo account information
2024-03-07T01:48:25.0008199Z       should include the button to confirm the request
2024-03-07T01:48:25.0009228Z     HTML format
2024-03-07T01:48:25.0188670Z       should include the instruction video link
2024-03-07T01:48:25.0309328Z       should include the button to confirm the request
2024-03-07T01:48:25.0427841Z       should include the staging/demo account information
2024-03-07T01:48:25.0429249Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:48:25.0493067Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:48:25.0493983Z   #approval_request
2024-03-07T01:48:25.0641246Z     should include the admin link to create the new organization from the account request
2024-03-07T01:48:25.0774838Z     should include the admin link to reject the organization
2024-03-07T01:48:25.1063830Z     should include details of the account request
2024-03-07T01:48:25.1188481Z     should have the correct subject
2024-03-07T01:48:25.1317081Z     should be sent to the info@humanessentials.app email address
2024-03-07T01:48:25.1318374Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:48:25.1365579Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:48:25.1366544Z   #rejection
2024-03-07T01:48:25.1486438Z     should have the correct subject
2024-03-07T01:48:25.1606898Z     should include the rejection reason
2024-03-07T01:48:25.1717511Z     should be sent to the correct email address
2024-03-07T01:48:25.1718647Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:48:25.1765779Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:48:25.1766470Z 
2024-03-07T01:48:25.1766793Z DonationItemizedBreakdownService
2024-03-07T01:48:25.1767542Z   #fetch
2024-03-07T01:48:25.5762587Z     return the list of items donated with distributed
2024-03-07T01:48:25.5763366Z 
2024-03-07T01:48:25.5763530Z UserInviteService
2024-03-07T01:48:25.6797880Z   should invite a user with the partner role
2024-03-07T01:48:25.8826621Z   should create the user without a name with default role
2024-03-07T01:48:25.8827565Z   with a new user
2024-03-07T01:48:25.9106770Z     should create the user without name with role
2024-03-07T01:48:26.1089254Z     should create the user with roles
2024-03-07T01:48:26.1090091Z   with existing user
2024-03-07T01:48:26.3119996Z     should add roles to existing user
2024-03-07T01:48:26.3216695Z     should raise an error when reinviting an existing user with the same role
2024-03-07T01:48:26.3218141Z     with force: true
2024-03-07T01:48:26.3440862Z       should reinvite the user
2024-03-07T01:48:26.3441581Z 
2024-03-07T01:48:26.3442334Z Purchase
2024-03-07T01:48:26.3445319Z   versioning
2024-03-07T01:48:26.3490558Z     is expected to be versioned
2024-03-07T01:48:26.3491460Z   Validations >
2024-03-07T01:48:26.3601745Z     is valid if categories have no values
2024-03-07T01:48:26.3691775Z     must belong to an organization
2024-03-07T01:48:26.3901738Z     is invalid when the line items are invalid
2024-03-07T01:48:26.3998562Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:48:26.4188680Z     is not valid if any category is non-zero but does not add up to the total
2024-03-07T01:48:26.4270154Z     requires an inventory (storage location)
2024-03-07T01:48:26.4360377Z     is not valid if period supplies is non-zero but no other category is
2024-03-07T01:48:26.4444251Z     is valid if all categories add up to total
2024-03-07T01:48:26.4532242Z     is not valid if categories do not add up
2024-03-07T01:48:26.4533180Z   Scopes >
2024-03-07T01:48:26.4533960Z     during >
2024-03-07T01:48:26.4785001Z       returns all purchases created between two dates
2024-03-07T01:48:26.4785907Z   behaves like itemizable
2024-03-07T01:48:26.4786731Z     .line_items
2024-03-07T01:48:26.4787262Z       combine!
2024-03-07T01:48:26.5317223Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:48:26.5753738Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:48:26.5754879Z       sorted
2024-03-07T01:48:26.6347241Z         displays the items, sorted by name
2024-03-07T01:48:26.6348431Z       total
2024-03-07T01:48:26.6802459Z         has an item total
2024-03-07T01:48:26.6803012Z       quantities_by_name
2024-03-07T01:48:26.7200793Z         returns a hash of items with id, name, and quantity
2024-03-07T01:48:26.7601436Z         leaves out zero-quantitied items if requested
2024-03-07T01:48:26.7602074Z     .to_a
2024-03-07T01:48:26.7603181Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:48:26.7972654Z         calls line_item_values
2024-03-07T01:48:26.7973265Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:48:26.8349923Z         raises an error
2024-03-07T01:48:26.8350447Z   Associations >
2024-03-07T01:48:26.8350969Z     items >
2024-03-07T01:48:26.8555176Z       has_many
2024-03-07T01:48:26.8555630Z   Callbacks >
2024-03-07T01:48:26.8733478Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:48:26.8926368Z     automatically combines duplicate line_item records when they're created
2024-03-07T01:48:26.8927206Z   Methods >
2024-03-07T01:48:26.8927638Z     storage_view
2024-03-07T01:48:26.9602345Z       returns name of storage location
2024-03-07T01:48:26.9602934Z     remove
2024-03-07T01:48:27.0329061Z       fails gracefully if the item doesn't exist
2024-03-07T01:48:27.1017590Z       removes the item from the purchase
2024-03-07T01:48:27.1018202Z 
2024-03-07T01:48:27.1018408Z ItemCategory
2024-03-07T01:48:27.1019851Z   versioning
2024-03-07T01:48:27.1104712Z     is expected to be versioned
2024-03-07T01:48:27.1105412Z   assocations
2024-03-07T01:48:27.1146546Z     is expected to have many items
2024-03-07T01:48:27.1212337Z     is expected to have and belong to many partner_groups
2024-03-07T01:48:27.1269706Z     is expected to belong to organization required: true
2024-03-07T01:48:27.1270962Z   validations
2024-03-07T01:48:27.1352776Z     is expected to validate that the length of :description is at most 250
2024-03-07T01:48:27.1429788Z     is expected to validate that :organization cannot be empty/falsy
2024-03-07T01:48:27.1519485Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T01:48:27.1737911Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-07T01:48:27.1739295Z 
2024-03-07T01:48:27.1739522Z Request
2024-03-07T01:48:27.1740032Z   item data
2024-03-07T01:48:27.1834696Z     coerces item quantity and id to always be an integer before saving
2024-03-07T01:48:27.1835391Z   total_items
2024-03-07T01:48:27.1938665Z     adds the quantity of all items in the request
2024-03-07T01:48:27.1939483Z   versioning
2024-03-07T01:48:27.1974964Z     is expected to be versioned
2024-03-07T01:48:27.1975635Z   Enums >
2024-03-07T01:48:27.1976171Z     #status
2024-03-07T01:48:27.2187876Z       scopes
2024-03-07T01:48:27.2188787Z 
2024-03-07T01:48:27.2188989Z UiHelper
2024-03-07T01:48:27.2191144Z   optional_data_text
2024-03-07T01:48:27.2192177Z     when the field provided is blank
2024-03-07T01:48:27.2262581Z       should return the text Not-Provided in gray text
2024-03-07T01:48:27.2263636Z     when the field provided is not blank
2024-03-07T01:48:27.2309931Z       should return the content
2024-03-07T01:48:27.2310944Z 
2024-03-07T01:48:27.2311160Z HistoricalDataCacheJob
2024-03-07T01:48:27.4073699Z   queues the job
2024-03-07T01:48:27.6100858Z   caches the historical data
2024-03-07T01:48:27.6102499Z 
2024-03-07T01:48:27.6102806Z DistributionCreateService
2024-03-07T01:48:27.6103901Z   call
2024-03-07T01:48:27.6908410Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T01:48:27.7659399Z     returns a successful object with Scheduled distribution
2024-03-07T01:48:27.7660473Z     partner has send reminders setting set to true
2024-03-07T01:48:27.9555503Z       Sends a PartnerMailer
2024-03-07T01:48:27.9556316Z     partner has send reminders setting set to false
2024-03-07T01:48:28.0396100Z       does not send a PartnerMailer
2024-03-07T01:48:28.0397237Z     when there's not sufficient inventory
2024-03-07T01:48:28.1031852Z       preserves the Insufficiency error and is unsuccessful
2024-03-07T01:48:28.1032683Z     when provided with a request ID
2024-03-07T01:48:28.1841093Z       changes the status of the request
2024-03-07T01:48:28.1842153Z       and the request already has a distribution associated with it
2024-03-07T01:48:28.2600084Z         should not be successful
2024-03-07T01:48:28.2600808Z     when it fails to save
2024-03-07T01:48:28.3110633Z       preserves the error and is unsuccessful
2024-03-07T01:48:28.3111644Z     when the line item quantity is not positive
2024-03-07T01:48:28.3639771Z       preserves the RecordInvalid error and is unsuccessful
2024-03-07T01:48:28.3641369Z     when there's multiple line items and one has insufficient inventory
2024-03-07T01:48:28.4279075Z       preserves the Insufficiency error and is unsuccessful
2024-03-07T01:48:28.4279792Z     partner is deactivated
2024-03-07T01:48:28.5063240Z       does not send an email
2024-03-07T01:48:28.5064085Z 
2024-03-07T01:48:28.5064419Z RequestsConfirmationMailer
2024-03-07T01:48:28.5279557Z   handles duplicates
2024-03-07T01:48:28.5567738Z   pairs the right quantities with the right item names
2024-03-07T01:48:28.5568775Z   #confirmation_email
2024-03-07T01:48:28.5765951Z     renders the body
2024-03-07T01:48:28.5900228Z     renders the headers
2024-03-07T01:48:28.5900722Z 
2024-03-07T01:48:28.5900967Z Deadlinable
2024-03-07T01:48:28.5901987Z   validations
2024-03-07T01:48:28.5950902Z     validates that reminder day is not the same as deadline day
2024-03-07T01:48:28.6025114Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:48:28.6093903Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:48:28.6095127Z 
2024-03-07T01:48:28.6095418Z Partners::AuthorizedFamilyMember
2024-03-07T01:48:28.6095990Z   versioning
2024-03-07T01:48:28.6131302Z     is expected to be versioned
2024-03-07T01:48:28.6131959Z   #display_name
2024-03-07T01:48:28.6408719Z     should return the family member's first and last name
2024-03-07T01:48:28.6409689Z   associations
2024-03-07T01:48:28.6460720Z     is expected to have many child_item_requests dependent => nullify
2024-03-07T01:48:28.6501137Z     is expected to belong to family required: true
2024-03-07T01:48:28.6501754Z 
2024-03-07T01:48:28.6502266Z TextInterpolatorService
2024-03-07T01:48:28.6503201Z   #call
2024-03-07T01:48:28.6536451Z     returns interpolated text
2024-03-07T01:48:28.6537400Z     when text is nil
2024-03-07T01:48:28.6570666Z       returns nil
2024-03-07T01:48:28.6571518Z     when interpolations are empty
2024-03-07T01:48:28.6604123Z       returns text
2024-03-07T01:48:28.6604818Z     when text is empty
2024-03-07T01:48:28.6637956Z       returns empty string
2024-03-07T01:48:28.6638719Z     when interpolations are nil
2024-03-07T01:48:28.6671221Z       returns text
2024-03-07T01:48:28.6671983Z     when interpolations are not present
2024-03-07T01:48:28.6703746Z       returns text
2024-03-07T01:48:28.6704675Z 
2024-03-07T01:48:28.6704994Z Partners::UpdateFamily
2024-03-07T01:48:28.6706044Z   #call
2024-03-07T01:48:28.6707064Z     when family has children
2024-03-07T01:48:28.7191920Z       archives the family and its children
2024-03-07T01:48:28.7192892Z     when an error occurs during archiving
2024-03-07T01:48:28.7565260Z       does not archive the family or its children and adds error to the service
2024-03-07T01:48:28.7566038Z 
2024-03-07T01:48:28.7566260Z DistributionUpdateService
2024-03-07T01:48:28.7566885Z   resend_notification?
2024-03-07T01:48:28.8631302Z     changes any distribution content, resulting in resend_notification? = true
2024-03-07T01:48:28.9527415Z     changes the issue_date, resulting in resend_notification? = true
2024-03-07T01:48:29.0467545Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-07T01:48:29.0468339Z   call
2024-03-07T01:48:29.1501420Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T01:48:29.1502697Z 
2024-03-07T01:48:29.1502976Z DistributionContentChangeService
2024-03-07T01:48:29.1503978Z   #any_change?
2024-03-07T01:48:29.1504548Z     when there are line items removed
2024-03-07T01:48:29.1546337Z       returns true
2024-03-07T01:48:29.1547039Z     when there are line items removed and updated
2024-03-07T01:48:29.1585606Z       returns true
2024-03-07T01:48:29.1586388Z     when there are no changes in the line items
2024-03-07T01:48:29.1619934Z       returns true
2024-03-07T01:48:29.1620577Z     when there are line items updated
2024-03-07T01:48:29.1654457Z       returns true
2024-03-07T01:48:29.1655164Z   #changes
2024-03-07T01:48:29.1655812Z     when there are line items removed and updated
2024-03-07T01:48:29.1690162Z       returns true
2024-03-07T01:48:29.1690890Z 
2024-03-07T01:48:29.1691226Z Partners::RequestCreateService
2024-03-07T01:48:29.1691994Z   #call
2024-03-07T01:48:29.1693020Z     when the arguments are incorrect
2024-03-07T01:48:29.1693875Z       because no item_requests_attributes and comments were defined
2024-03-07T01:48:29.1998391Z         should return the Request object with an error
2024-03-07T01:48:29.1999311Z       because a unrecogonized item_id was provided
2024-03-07T01:48:29.2359252Z         should return the Request object with an error
2024-03-07T01:48:29.2360073Z     when the arguments are correct
2024-03-07T01:48:29.2743972Z       should notify the Partner via email
2024-03-07T01:48:29.3104035Z       should create a Request record
2024-03-07T01:48:29.3457185Z       should have no errors
2024-03-07T01:48:29.3458367Z       but a unexpected error occured during the save
2024-03-07T01:48:29.3459312Z         for the Request record
2024-03-07T01:48:29.3886011Z           should have an error with the raised error
2024-03-07T01:48:29.4275233Z           should NOT create a Request record
2024-03-07T01:48:29.4639658Z           should NOT notify the Partner via email
2024-03-07T01:48:29.4640655Z 
2024-03-07T01:48:29.4640899Z DistributionMailer
2024-03-07T01:48:29.4642202Z   #reminder_email
2024-03-07T01:48:29.4643562Z     with deliver_method: :pick_up
2024-03-07T01:48:29.5257816Z       renders the body with 'pick up' specified
2024-03-07T01:48:29.5258554Z     HTML format
2024-03-07T01:48:29.5768150Z       renders the body with organization's email text
2024-03-07T01:48:29.5769052Z     Text format
2024-03-07T01:48:29.6282777Z       renders the body with organization's email text
2024-03-07T01:48:29.6283991Z     with deliver_method: :delivery
2024-03-07T01:48:29.6844657Z       renders the body with 'delivery' specified
2024-03-07T01:48:29.6845848Z   #partner_mailer
2024-03-07T01:48:29.7400045Z     renders the body with organization's email text
2024-03-07T01:48:29.7958543Z     renders the body with distributions text
2024-03-07T01:48:29.7959772Z     with deliver_method: :pick_up
2024-03-07T01:48:29.8528870Z       renders the body with 'picked up' specified
2024-03-07T01:48:29.8530483Z       when parners profile pick_up_email is present
2024-03-07T01:48:29.9045234Z         sends email to the primary contact and partner`s pickup person
2024-03-07T01:48:29.9046497Z         when pickup person happens to be the same as the primary contact
2024-03-07T01:48:29.9549509Z           does not send email twice
2024-03-07T01:48:29.9550449Z     with deliver_method: :delivery
2024-03-07T01:48:30.0145751Z       sends copy of email only to the partner
2024-03-07T01:48:30.0690237Z       renders the body with 'delivered' specified
2024-03-07T01:48:30.0690917Z     with distribution changes
2024-03-07T01:48:30.1265596Z       renders the body with changes that happened in the distribution
2024-03-07T01:48:30.1266836Z 
2024-03-07T01:48:30.1267190Z HistoricalTrendService
2024-03-07T01:48:30.1267914Z   #series
2024-03-07T01:48:30.4155586Z     returns an array of items with their monthly data
2024-03-07T01:48:30.4156315Z 
2024-03-07T01:48:30.4156567Z DistributionReminder
2024-03-07T01:48:30.4157456Z   conditionally sending the emails
2024-03-07T01:48:30.4478039Z     sends mail for future distributions where the partner wants reminders
2024-03-07T01:48:30.4791263Z     sends mail for future distributions
2024-03-07T01:48:30.5164270Z     does not send mail for future distributions if the partner wants no reminders
2024-03-07T01:48:30.5868605Z     does not send mail for past distributions
2024-03-07T01:48:30.5869693Z     when the distribution_id does not match any Distribution
2024-03-07T01:48:30.5979816Z       does not send mail for non existent distributions
2024-03-07T01:48:30.5986447Z     when the partner is deactivated
2024-03-07T01:48:30.6667621Z       does not send mail
2024-03-07T01:48:30.6668244Z 
2024-03-07T01:48:30.6668920Z Reports::AdultIncontinenceReportService
2024-03-07T01:48:30.6670053Z   #report
2024-03-07T01:48:30.9194505Z     should report zero values
2024-03-07T01:48:30.9195281Z     with values
2024-03-07T01:48:31.5506948Z       should report normal values
2024-03-07T01:48:32.1847369Z       should handle null distribution quantity
2024-03-07T01:48:32.1848151Z 
2024-03-07T01:48:32.1848543Z ItemsController
2024-03-07T01:48:32.1849730Z   While signed in
2024-03-07T01:48:32.1851837Z     PATCH #restore
2024-03-07T01:48:32.1852786Z       with an active item
2024-03-07T01:48:32.2199066Z         does nothing
2024-03-07T01:48:32.2200061Z       with a soft-deleted item
2024-03-07T01:48:32.2423571Z         re-activates the item
2024-03-07T01:48:32.2424305Z       with another organizations item
2024-03-07T01:48:32.4348382Z         does nothing
2024-03-07T01:48:32.4349161Z     PATCH #remove_category
2024-03-07T01:48:32.6435614Z       should redirect to the previous category page
2024-03-07T01:48:32.8395452Z       should remove an item's category
2024-03-07T01:48:32.8396630Z     GET #new
2024-03-07T01:48:32.8520700Z       returns http success
2024-03-07T01:48:32.8521408Z     PUT #update
2024-03-07T01:48:32.8522147Z       visible
2024-03-07T01:48:32.8725313Z         should update visible_to_partners to true
2024-03-07T01:48:32.8726124Z       invisible
2024-03-07T01:48:32.8931189Z         should update visible_to_partners to false
2024-03-07T01:48:32.8932085Z     GET #edit
2024-03-07T01:48:32.9106657Z       returns http success
2024-03-07T01:48:32.9107692Z     DELETE #destroy
2024-03-07T01:48:32.9404968Z       redirects to #index
2024-03-07T01:48:32.9405689Z     GET #show
2024-03-07T01:48:32.9607366Z       returns http success
2024-03-07T01:48:32.9608204Z     Looking at a different organization
2024-03-07T01:48:33.1363665Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:48:33.1364740Z     POST #create
2024-03-07T01:48:33.1365298Z       with invalid params
2024-03-07T01:48:33.1522639Z         should show an error
2024-03-07T01:48:33.1523380Z       with valid params
2024-03-07T01:48:33.1715601Z         should redirect to the item page
2024-03-07T01:48:33.1916540Z         should create an item
2024-03-07T01:48:33.2115681Z         should accept params with dollar signs, periods, and commas
2024-03-07T01:48:33.2117193Z     GET #index
2024-03-07T01:48:33.2327497Z       returns http success
2024-03-07T01:48:33.2329895Z   While not signed in
2024-03-07T01:48:33.2429515Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:48:33.2430235Z 
2024-03-07T01:48:33.2430479Z PartnerInviteService
2024-03-07T01:48:33.2770977Z   should create invite
2024-03-07T01:48:33.3092092Z   should update the status of the partner to invited
2024-03-07T01:48:33.3093240Z   with force: true
2024-03-07T01:48:33.3414314Z     should send the force setting forward
2024-03-07T01:48:33.3416136Z 
2024-03-07T01:48:33.3416502Z DonationSite
2024-03-07T01:48:33.3418073Z   geocode
2024-03-07T01:48:33.3532090Z     adds coordinates to the database
2024-03-07T01:48:33.3532888Z   Validations >
2024-03-07T01:48:33.3571398Z     must belong to an organization
2024-03-07T01:48:33.3613187Z     is invalid without a name
2024-03-07T01:48:33.3655294Z     is invalid without an address
2024-03-07T01:48:33.3656250Z   versioning
2024-03-07T01:48:33.3690271Z     is expected to be versioned
2024-03-07T01:48:33.3691184Z   import_csv
2024-03-07T01:48:33.5480092Z     imports storage locations from a csv file
2024-03-07T01:48:33.5481186Z 
2024-03-07T01:48:33.5481443Z PartnerCreateService
2024-03-07T01:48:33.5482352Z   #call
2024-03-07T01:48:33.7346014Z     should return an instance of itself
2024-03-07T01:48:33.7347262Z     when the arguments are incorrect
2024-03-07T01:48:33.7348046Z       beacuse the partner_attrs are invalid
2024-03-07T01:48:33.9144997Z         should contain errors related to invalid partner attributes
2024-03-07T01:48:33.9146001Z     when the arguments are valid
2024-03-07T01:48:34.1003477Z       should create a new partner record with the organization provided
2024-03-07T01:48:34.4575805Z       should create the associated partner profile data
2024-03-07T01:48:34.4576903Z       but there was an unexpected issue with saving the
2024-03-07T01:48:34.4578072Z         Partners::Profile record
2024-03-07T01:48:34.6410929Z           should not create the associated partner records
2024-03-07T01:48:34.8238107Z           should not create the partner record for the organization
2024-03-07T01:48:34.8239121Z         Partner record
2024-03-07T01:48:35.0068377Z           should not create the partner record for the organization
2024-03-07T01:48:35.1856346Z           should not create the associated partner records
2024-03-07T01:48:35.1857114Z 
2024-03-07T01:48:35.1857460Z ApplicationController
2024-03-07T01:48:35.1858801Z   current_organization
2024-03-07T01:48:35.1860258Z     As a partner user
2024-03-07T01:48:35.2043456Z       should return nil
2024-03-07T01:48:35.2044474Z     As an org user
2024-03-07T01:48:35.5731987Z       should return the first org role
2024-03-07T01:48:35.5732856Z       with a changed current role
2024-03-07T01:48:35.9348782Z         should return the first org role
2024-03-07T01:48:35.9349596Z   current_partner
2024-03-07T01:48:35.9350515Z     As a partner user
2024-03-07T01:48:35.9908947Z       should return the first partner role
2024-03-07T01:48:36.0481005Z       with a changed current role
2024-03-07T01:48:36.0481880Z         should return the first partner role
2024-03-07T01:48:36.0482659Z     As an org user
2024-03-07T01:48:36.0620095Z       should return nil
2024-03-07T01:48:36.0621020Z   dashboard_path_from_current_role
2024-03-07T01:48:36.0621727Z     As a super admin
2024-03-07T01:48:36.0817350Z       links to the admin dashboard
2024-03-07T01:48:36.0818124Z     As a user without super admin status
2024-03-07T01:48:36.1016634Z       links to the general dashboard
2024-03-07T01:48:36.1017378Z 
2024-03-07T01:48:36.1017683Z User
2024-03-07T01:48:36.1084708Z   has a valid factory
2024-03-07T01:48:36.1085491Z   versioning
2024-03-07T01:48:36.1122003Z     is expected to be versioned
2024-03-07T01:48:36.1122723Z   omniauth
2024-03-07T01:48:36.1264882Z     retrieves the user from an omniauth context
2024-03-07T01:48:36.1265688Z   Scopes >
2024-03-07T01:48:36.1266760Z     ->alphabetized
2024-03-07T01:48:36.1494493Z       retrieves users in the correct order
2024-03-07T01:48:36.1495258Z   Validations >
2024-03-07T01:48:36.1690674Z     requires an email that is formatted correctly
2024-03-07T01:48:36.1775929Z     requires a name
2024-03-07T01:48:36.1776603Z   Scopes >
2024-03-07T01:48:36.1777302Z     ->alphabetized
2024-03-07T01:48:36.2208798Z       retrieves users in the correct order
2024-03-07T01:48:36.2209869Z   Methods >
2024-03-07T01:48:36.2270146Z     discarded?
2024-03-07T01:48:36.2358957Z     #invitation_status
2024-03-07T01:48:36.2447626Z     #reinvitable?
2024-03-07T01:48:36.3001873Z     #kind
2024-03-07T01:48:36.3002318Z 
2024-03-07T01:48:36.3002783Z NDBNMember
2024-03-07T01:48:36.3003333Z   #full_name
2024-03-07T01:48:36.3093468Z     should equal the id and the account name
2024-03-07T01:48:36.3094422Z   versioning
2024-03-07T01:48:36.3137483Z     is expected to be versioned
2024-03-07T01:48:36.3138422Z   validations
2024-03-07T01:48:36.3228849Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-07T01:48:36.3330972Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-07T01:48:36.3430437Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-07T01:48:36.3431806Z 
2024-03-07T01:48:36.3432096Z Exports::ExportRequestService
2024-03-07T01:48:36.3432801Z   .generate_csv_data
2024-03-07T01:48:36.5544766Z     includes rows for each request with correct columns of item quantity
2024-03-07T01:48:36.7592396Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-07T01:48:36.7593643Z 
2024-03-07T01:48:36.7594125Z BaseItem
2024-03-07T01:48:36.7594680Z   versioning
2024-03-07T01:48:36.7633903Z     is expected to be versioned
2024-03-07T01:48:36.7634844Z   Filtering >
2024-03-07T01:48:36.7635681Z     ->by_partner_key
2024-03-07T01:48:36.7686993Z       shows the Base Items by partner_key
2024-03-07T01:48:36.7688094Z     ->without_kit
2024-03-07T01:48:36.7741492Z       should not include the Kit BaseItem
2024-03-07T01:48:36.7742335Z   Validations >
2024-03-07T01:48:36.7790965Z     is invalid without a partner key
2024-03-07T01:48:36.7862265Z     is invalid without a uniqueness key
2024-03-07T01:48:36.7909106Z     is invalid without a name
2024-03-07T01:48:36.7977401Z     is invalid without a unique name
2024-03-07T01:48:36.7978191Z   Associations >
2024-03-07T01:48:36.8106733Z     keeps count of its associated items
2024-03-07T01:48:36.8107363Z 
2024-03-07T01:48:36.8107768Z Kit
2024-03-07T01:48:37.0220573Z   deactivate and reactivate
2024-03-07T01:48:37.0221379Z   #can_deactivate?
2024-03-07T01:48:37.0221962Z     with inventory items
2024-03-07T01:48:37.2399038Z       should return false
2024-03-07T01:48:37.2399839Z     without inventory items
2024-03-07T01:48:37.4362757Z       should return true
2024-03-07T01:48:37.4363562Z   Filtering >
2024-03-07T01:48:38.0145210Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:48:38.0197573Z     can filter
2024-03-07T01:48:38.0198273Z     ->by_partner_key
2024-03-07T01:48:38.4350981Z       shows the kits for a particular item
2024-03-07T01:48:38.4351714Z   Validations >
2024-03-07T01:48:38.4554179Z     is valid as built
2024-03-07T01:48:38.4759240Z     can't have negative value
2024-03-07T01:48:38.4945708Z     requires a name
2024-03-07T01:48:38.7028739Z     requires a unique name
2024-03-07T01:48:38.7214433Z     requires at least one item
2024-03-07T01:48:38.7408819Z     must belong to an organization
2024-03-07T01:48:38.7409427Z   versioning
2024-03-07T01:48:38.7449570Z     is expected to be versioned
2024-03-07T01:48:38.7450408Z   Value >
2024-03-07T01:48:38.7618788Z     converts dollars to cents
2024-03-07T01:48:38.7782166Z     converts cents to dollars
2024-03-07T01:48:38.7783074Z     .value_per_itemizable
2024-03-07T01:48:38.8175629Z       calculates values from associated items
2024-03-07T01:48:38.8176123Z 
2024-03-07T01:48:38.8176805Z Exports::ExportPurchasesCSVService
2024-03-07T01:48:38.8177921Z   #generate_csv_data
2024-03-07T01:48:38.9343898Z     should match the expected content for the csv
2024-03-07T01:48:38.9344654Z 
2024-03-07T01:48:38.9345113Z InventoryItem
2024-03-07T01:48:38.9384394Z   initializes the quantity to 0 if it was not specified
2024-03-07T01:48:38.9385327Z   Validations >
2024-03-07T01:48:38.9433291Z     requires an item
2024-03-07T01:48:38.9481243Z     requires an inventory association
2024-03-07T01:48:38.9482053Z     quantity >
2024-03-07T01:48:38.9541038Z       is less than the max integer
2024-03-07T01:48:38.9597145Z       is required
2024-03-07T01:48:38.9740742Z       is gte 0
2024-03-07T01:48:38.9796693Z       is numerical
2024-03-07T01:48:38.9797370Z   Filtering >
2024-03-07T01:48:38.9798406Z     ->by_partner_key
2024-03-07T01:48:38.9931453Z       shows the Base Items by partner_key
2024-03-07T01:48:38.9932296Z   versioning
2024-03-07T01:48:38.9969199Z     is expected to be versioned
2024-03-07T01:48:38.9969688Z 
2024-03-07T01:48:38.9970028Z PartnerMailerJob
2024-03-07T01:48:38.9970835Z   conditionally sending the emails
2024-03-07T01:48:39.2935107Z     sends mail for future distributions immediately
2024-03-07T01:48:39.4955936Z     does not send mail for past distributions
2024-03-07T01:48:39.4957350Z     when the distribution is for a deactivated partner
2024-03-07T01:48:39.7034591Z       does not send the email
2024-03-07T01:48:39.7035187Z 
2024-03-07T01:48:39.7035388Z County
2024-03-07T01:48:39.7121713Z   is expected to have many served_areas
2024-03-07T01:48:39.7122625Z   versioning
2024-03-07T01:48:39.7162480Z     is expected to be versioned
2024-03-07T01:48:39.7163216Z 
2024-03-07T01:48:39.7163510Z Question
2024-03-07T01:48:39.7164829Z   versioning
2024-03-07T01:48:39.7253176Z     is expected to be versioned
2024-03-07T01:48:39.7254058Z   validations
2024-03-07T01:48:39.7319691Z     is expected to validate that :answer cannot be empty/falsy
2024-03-07T01:48:39.7380234Z     is expected to validate that :title cannot be empty/falsy
2024-03-07T01:48:39.7508658Z     question for_banks and for_partners attributes can't both be false
2024-03-07T01:48:39.7509678Z   punctuate
2024-03-07T01:48:39.7552188Z     should punctuate each string in a given array
2024-03-07T01:48:39.7553113Z   scope for_partners
2024-03-07T01:48:39.7807043Z     should filter out questions that aren't meant for partners
2024-03-07T01:48:39.7808132Z   remove_redundant_error
2024-03-07T01:48:39.7853790Z     should return an array with only one error message related to the checkboxes.
2024-03-07T01:48:39.7854928Z   scope for_banks
2024-03-07T01:48:39.8118249Z     should filter out questions that aren't meant for banks
2024-03-07T01:48:39.8119313Z 
2024-03-07T01:48:39.8119609Z DistributionPdf
2024-03-07T01:48:39.8879452Z   #request_data
2024-03-07T01:48:39.9496849Z   #non_request_data
2024-03-07T01:48:39.9497336Z 
2024-03-07T01:48:39.9497580Z Audit
2024-03-07T01:48:39.9498739Z   versioning
2024-03-07T01:48:39.9588826Z     is expected to be versioned
2024-03-07T01:48:39.9589582Z   Validations >
2024-03-07T01:48:40.0167772Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-07T01:48:40.0450277Z     must belong to an organization
2024-03-07T01:48:40.1030204Z     can have line items that has quantity as a positive integer
2024-03-07T01:48:40.1574129Z     can not have line items that has quantity as negative integer
2024-03-07T01:48:40.2136364Z     can have line items that has quantity as zero
2024-03-07T01:48:40.2235828Z     must belong to an organization admin of its organization
2024-03-07T01:48:40.2762741Z     cannot have duplicate line items
2024-03-07T01:48:40.2763671Z   behaves like itemizable
2024-03-07T01:48:40.2764537Z     .line_items
2024-03-07T01:48:40.2765128Z       combine!
2024-03-07T01:48:40.3312478Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:48:40.3707068Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:48:40.3707886Z       sorted
2024-03-07T01:48:40.4839980Z         displays the items, sorted by name
2024-03-07T01:48:40.4840644Z       quantities_by_name
2024-03-07T01:48:40.5647301Z         returns a hash of items with id, name, and quantity
2024-03-07T01:48:40.6493045Z         leaves out zero-quantitied items if requested
2024-03-07T01:48:40.6493941Z       total
2024-03-07T01:48:40.7359271Z         has an item total
2024-03-07T01:48:40.7360062Z     .to_a
2024-03-07T01:48:40.7360644Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:48:40.7837453Z         calls line_item_values
2024-03-07T01:48:40.7838067Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:48:40.8315676Z         raises an error
2024-03-07T01:48:40.8316384Z   Methods >
2024-03-07T01:48:41.0652444Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-07T01:48:41.4188767Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-07T01:48:41.4190012Z   Scopes >
2024-03-07T01:48:41.4642360Z     `at_location` can filter out audits to a specific location
2024-03-07T01:48:41.4643151Z 
2024-03-07T01:48:41.4643330Z ApplicationHelper
2024-03-07T01:48:41.4645470Z   active_class
2024-03-07T01:48:41.4696270Z     Returns the controller name
2024-03-07T01:48:41.4696865Z   can_administrate?
2024-03-07T01:48:41.4698066Z     User is org admin and not part of org
2024-03-07T01:48:41.6667350Z       cannot administrate
2024-03-07T01:48:41.6668050Z     User is org admin and part of org
2024-03-07T01:48:41.6899510Z       can administrate
2024-03-07T01:48:41.6900213Z     User is part of org but not org admin
2024-03-07T01:48:41.7048002Z       cannot administrate
2024-03-07T01:48:41.7051308Z   default_title_content
2024-03-07T01:48:41.7052969Z     Organization does not exist
2024-03-07T01:48:41.7099280Z       returns a default name
2024-03-07T01:48:41.7100107Z     Organization exists
2024-03-07T01:48:41.8842090Z       returns the organization's name
2024-03-07T01:48:41.8843209Z   confirm_delete_msg
2024-03-07T01:48:41.8892004Z     subs in string
2024-03-07T01:48:41.8892771Z   step_container_helper
2024-03-07T01:48:41.8895319Z     active_index is equal to index
2024-03-07T01:48:41.8940522Z       returns active
2024-03-07T01:48:41.8941402Z     active_index is less than index
2024-03-07T01:48:41.8984278Z       returns empty string
2024-03-07T01:48:41.8985075Z     active_index is greater than index
2024-03-07T01:48:41.9027893Z       returns done
2024-03-07T01:48:41.9028567Z   flash_class
2024-03-07T01:48:41.9070426Z     returns appropriate class for error
2024-03-07T01:48:41.9112312Z     returns appropriate class for success
2024-03-07T01:48:41.9152644Z     returns appropriate class for notice
2024-03-07T01:48:41.9195501Z     returns appropriate class for alert
2024-03-07T01:48:41.9196092Z 
2024-03-07T01:48:41.9196502Z ItemsInTotalQuery
2024-03-07T01:48:41.9197149Z   items_in_total_query
2024-03-07T01:48:42.1420934Z     does not count transfers going in the negative direction
2024-03-07T01:48:42.3010352Z     returns a sum total of all in-flows
2024-03-07T01:48:42.5678225Z     does not count donations, purchases, adjustments to other storage locations
2024-03-07T01:48:42.9204917Z     counts shared items together
2024-03-07T01:48:43.1263606Z     does not count negative adjustments towards in-flow
2024-03-07T01:48:43.1264270Z 
2024-03-07T01:48:43.1264640Z Distribution
2024-03-07T01:48:43.1266811Z   versioning
2024-03-07T01:48:43.1308816Z     is expected to be versioned
2024-03-07T01:48:43.1309562Z   Callbacks >
2024-03-07T01:48:43.1832944Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:48:43.1833820Z     #before_save
2024-03-07T01:48:43.1835626Z       #reset_shipping_cost
2024-03-07T01:48:43.1836402Z         when delivery_method is other then shipped
2024-03-07T01:48:43.2140126Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-07T01:48:43.2141927Z   Methods >
2024-03-07T01:48:43.2142519Z     #future?
2024-03-07T01:48:43.2143085Z       when issued_at has passed
2024-03-07T01:48:43.2429695Z         returns false
2024-03-07T01:48:43.2430585Z       when issued_at has not passed
2024-03-07T01:48:43.2709340Z         returns true
2024-03-07T01:48:43.2710335Z     #copy_from_request
2024-03-07T01:48:43.2939972Z       copy over relevant request information into the distrubution
2024-03-07T01:48:43.2941119Z     #copy_line_items
2024-03-07T01:48:43.3346229Z       replicates line_items from a donation into a distribution
2024-03-07T01:48:43.3347167Z     #combine_duplicates
2024-03-07T01:48:43.3737832Z       condenses duplicate line_items if the item_ids match
2024-03-07T01:48:43.3738806Z     #distributed_at
2024-03-07T01:48:43.4219844Z       displays explicit issued_at date
2024-03-07T01:48:43.4476851Z       shows the hour and minutes if it has been provided
2024-03-07T01:48:43.4477815Z   Validations >
2024-03-07T01:48:43.4532128Z     must belong to an organization
2024-03-07T01:48:43.4688936Z     ensures the associated line_items are invalid with a nil quantity
2024-03-07T01:48:43.5098823Z     ensures the associated line_items are valid
2024-03-07T01:48:43.5151579Z     requires a storage location
2024-03-07T01:48:43.5205319Z     requires a partner
2024-03-07T01:48:43.5241135Z     ensures that any included items are found in the associated storage location
2024-03-07T01:48:43.5298662Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:48:43.5462609Z     ensures the associated line_items are invalid with a zero quantity
2024-03-07T01:48:43.5463744Z     when delivery method is other then shipped
2024-03-07T01:48:43.5742588Z       allows to save distribution
2024-03-07T01:48:43.5743519Z     when delivery method is shipped
2024-03-07T01:48:43.5744534Z       shipping cost is negative
2024-03-07T01:48:43.5809278Z         will not allow to save distribution
2024-03-07T01:48:43.5810141Z       shipping cost is none negative
2024-03-07T01:48:43.6097090Z         allows to save distribution
2024-03-07T01:48:43.6097966Z   behaves like itemizable
2024-03-07T01:48:43.6098643Z     .line_items
2024-03-07T01:48:43.6099837Z       total
2024-03-07T01:48:43.7004522Z         has an item total
2024-03-07T01:48:43.7005177Z       combine!
2024-03-07T01:48:43.7554449Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:48:43.7984269Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:48:43.7985047Z       sorted
2024-03-07T01:48:43.9223561Z         displays the items, sorted by name
2024-03-07T01:48:43.9224736Z       quantities_by_name
2024-03-07T01:48:44.0081303Z         leaves out zero-quantitied items if requested
2024-03-07T01:48:44.1151968Z         returns a hash of items with id, name, and quantity
2024-03-07T01:48:44.1152898Z     .to_a
2024-03-07T01:48:44.1154671Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:48:44.1318190Z         calls line_item_values
2024-03-07T01:48:44.1318872Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:48:44.1649727Z         raises an error
2024-03-07T01:48:44.1650447Z   CSV export >
2024-03-07T01:48:44.1651565Z     csv_export_attributes
2024-03-07T01:48:44.5754337Z       returns the set of attributes which define a row in case of distribution export
2024-03-07T01:48:44.5755300Z     for_csv_export >
2024-03-07T01:48:44.9221435Z       filters only to the given filter
2024-03-07T01:48:45.2567308Z       filters only to the given organization
2024-03-07T01:48:45.5831341Z       filters only to the given issue time range
2024-03-07T01:48:45.5831911Z   Scopes >
2024-03-07T01:48:45.5832814Z     by_location >
2024-03-07T01:48:45.6349184Z       only returns distributions with given location id
2024-03-07T01:48:45.6349924Z     this_week >
2024-03-07T01:48:45.6351993Z       When it's Sunday (end of the week)
2024-03-07T01:48:45.6855721Z         doesn't include distributions past Sunday
2024-03-07T01:48:45.6856519Z       When it's Tuesday (mid-week)
2024-03-07T01:48:45.7583853Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-07T01:48:45.7584783Z     by_item_id >
2024-03-07T01:48:45.8979472Z       only returns distributions with given item id
2024-03-07T01:48:45.8980299Z     during >
2024-03-07T01:48:45.9690144Z       returns all distributions created between two dates
2024-03-07T01:48:45.9690905Z     by_partner >
2024-03-07T01:48:46.0180311Z       only returns distributions with given partner id
2024-03-07T01:48:46.0181049Z 
2024-03-07T01:48:46.0181266Z AdjustmentCreateService
2024-03-07T01:48:46.0182350Z   call
2024-03-07T01:48:46.1131104Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-07T01:48:46.1693187Z     gives an error if we attempt to adjust inventory below 0
2024-03-07T01:48:46.2537303Z     increases stored inventory on a positive adjustment
2024-03-07T01:48:46.3496899Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-07T01:48:46.4430711Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-07T01:48:46.5206736Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-07T01:48:46.6044521Z     handles adjustments to multiple items
2024-03-07T01:48:46.6940590Z     decreases stored inventory on a negative adjustment
2024-03-07T01:48:46.7643743Z     does not allow inventory to be adjusted below 0
2024-03-07T01:48:46.7644326Z 
2024-03-07T01:48:46.7644499Z ProductDrive
2024-03-07T01:48:47.2856155Z   calculates and returns all donated organization item quantities by category and date
2024-03-07T01:48:47.5130647Z   calculates donation quantity by date
2024-03-07T01:48:47.7444949Z   calculates and returns all donated organization item quantities by name and date
2024-03-07T01:48:47.8927963Z   calculates in-kind value
2024-03-07T01:48:48.0381524Z   calculates donation quantity
2024-03-07T01:48:48.0382161Z   validations
2024-03-07T01:48:48.1830255Z     is expected not to be valid
2024-03-07T01:48:48.3239289Z     is expected not to be valid
2024-03-07T01:48:48.4588189Z     is expected not to be valid
2024-03-07T01:48:48.4588884Z   versioning
2024-03-07T01:48:48.5934674Z     is expected to be versioned
2024-03-07T01:48:48.5935308Z   scopes
2024-03-07T01:48:48.5935799Z     .by_item_category_id
2024-03-07T01:48:48.9341898Z       returns the product_drive with name some_name
2024-03-07T01:48:49.2601741Z       does not return other_name
2024-03-07T01:48:49.2602222Z     .within_date_range
2024-03-07T01:48:49.4127657Z       returns the product drive 1
2024-03-07T01:48:49.5578685Z       does not include product drive 2
2024-03-07T01:48:49.5579528Z     .by_name
2024-03-07T01:48:49.7034276Z       does not return other_name
2024-03-07T01:48:49.8562105Z       returns the product_drive with name some_name
2024-03-07T01:48:49.8562871Z   associations
2024-03-07T01:48:49.9549804Z     has_many product_drive_participants through donations
2024-03-07T01:48:50.0461845Z     has_many donations
2024-03-07T01:48:50.0462418Z   .search_date_range
2024-03-07T01:48:50.1942641Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-07T01:48:50.1943527Z   donation_source_view
2024-03-07T01:48:50.3496828Z     returns formatted text
2024-03-07T01:48:50.3497461Z   distinct_items
2024-03-07T01:48:50.7051911Z     doesn't double_count the items if there are two donations for the same item
2024-03-07T01:48:51.0552109Z     counts the items correctly for 1 donation with multiple items
2024-03-07T01:48:51.4124608Z     counts the distinct items correctly by given date
2024-03-07T01:48:51.7652315Z     counts the distinct items correctly by given category
2024-03-07T01:48:52.1118414Z     counts the distinct items correctly in overlapping donations
2024-03-07T01:48:52.1119131Z 
2024-03-07T01:48:52.1119327Z View::Inventory
2024-03-07T01:48:52.1121578Z   #quantity_for
2024-03-07T01:48:52.1122531Z     with storage location but no item id
2024-03-07T01:48:52.1985885Z       should return all items at that location
2024-03-07T01:48:52.1986405Z     with item id
2024-03-07T01:48:52.1986877Z       with no storage location
2024-03-07T01:48:52.2863955Z         should return quantities across all storage locations
2024-03-07T01:48:52.2864584Z       with storage location
2024-03-07T01:48:52.3711105Z         should return the quantity at that location
2024-03-07T01:48:52.3711908Z   .items_for_location
2024-03-07T01:48:52.4560548Z     should return the right values
2024-03-07T01:48:52.4561146Z     with include_omitted_items
2024-03-07T01:48:52.5480604Z       should add items not in the storage location
2024-03-07T01:48:52.5481287Z   #items_for_location
2024-03-07T01:48:52.6369174Z     should return the right values
2024-03-07T01:48:52.6369881Z     with include_omitted_items
2024-03-07T01:48:52.7269176Z       should add items not in the storage location
2024-03-07T01:48:52.7269743Z   #all_items
2024-03-07T01:48:52.8158230Z     should return all items across storage locations
2024-03-07T01:48:52.8159019Z   #storage_location_name
2024-03-07T01:48:52.9039300Z     should return the right name
2024-03-07T01:48:52.9039953Z   .total_inventory
2024-03-07T01:48:52.9923768Z     should return the total quantity
2024-03-07T01:48:52.9924835Z   #storage_locations_for_item
2024-03-07T01:48:53.0784061Z     should return all relevant IDs
2024-03-07T01:48:53.0784722Z   #total_value_in_dollars
2024-03-07T01:48:53.1666312Z     should return total value across the given location
2024-03-07T01:48:53.1666820Z 
2024-03-07T01:48:53.1667108Z PartnerFetchRequestableItemsService
2024-03-07T01:48:53.1668101Z   #call
2024-03-07T01:48:53.1797033Z     raises an error indiciating the partner does not exist with invalid id
2024-03-07T01:48:53.1797956Z     when the partner is not in any partner group
2024-03-07T01:48:53.2081420Z       is expected to be nil
2024-03-07T01:48:53.2082014Z       when the organization has no items
2024-03-07T01:48:53.2376102Z         should return no items
2024-03-07T01:48:53.2376721Z       when the organization has items
2024-03-07T01:48:53.2693819Z         is expected to eq [#<Item id: 3364, name: "Item 1", category: nil, created_at: "2024-03-06 17:48:53.255088363 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-07T01:48:53.3207670Z         should return only active and visible items
2024-03-07T01:48:53.3208420Z     org with any amount of items
2024-03-07T01:48:53.3211008Z       when the partner is in a partner group and has no items
2024-03-07T01:48:53.5266151Z         should return only active and visible items from partner
2024-03-07T01:48:53.5266947Z       when the partner is in a partner group and has items
2024-03-07T01:48:53.7534646Z         should return only active and visible items from partner
2024-03-07T01:48:53.7535533Z 
2024-03-07T01:48:53.7535758Z NotifyPartnerJob
2024-03-07T01:48:53.7536764Z   #perform
2024-03-07T01:48:53.7587433Z     avoids exception when request doesn't exist
2024-03-07T01:48:53.7688186Z     is expected to call RequestsConfirmationMailer
2024-03-07T01:48:53.7689179Z     when the request's partner is deactivated
2024-03-07T01:48:53.7969778Z       does not send the confirmation email
2024-03-07T01:48:53.7970370Z 
2024-03-07T01:48:53.7970660Z Partners::Child
2024-03-07T01:48:53.7971813Z   associations
2024-03-07T01:48:53.8015490Z     is expected to belong to family required: true
2024-03-07T01:48:53.8050729Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:48:53.8051273Z   #display_name
2024-03-07T01:48:53.8326944Z     should return a child's first and last name
2024-03-07T01:48:53.8327439Z   versioning
2024-03-07T01:48:53.8361447Z     is expected to be versioned
2024-03-07T01:48:53.8362315Z 
2024-03-07T01:48:53.8362490Z KitCreateService
2024-03-07T01:48:53.8363530Z   #call
2024-03-07T01:48:54.0274166Z     should return an the instance
2024-03-07T01:48:54.0274949Z     when the parameters provided are invalid
2024-03-07T01:48:54.0276068Z       because the kit_params is invalid for kit creation
2024-03-07T01:48:54.2040918Z         should have errors saying why the kit_params are invalid
2024-03-07T01:48:54.2095679Z       because the organization_id does not match any Organization
2024-03-07T01:48:54.2096591Z         should have an error on organization_id saying it does not match any Organization
2024-03-07T01:48:54.2097238Z     when the parameters are valid
2024-03-07T01:48:54.4070172Z       should create a new Item
2024-03-07T01:48:54.6032760Z       should create a new Kit
2024-03-07T01:48:54.8087868Z       should create the new Item associated with the Kit
2024-03-07T01:48:54.8088888Z       but an unexpected error gets raised
2024-03-07T01:48:55.0001659Z         should have an error that includes the raised error
2024-03-07T01:48:55.1949988Z         should not create the Kit
2024-03-07T01:48:55.3853137Z         should not create a Item
2024-03-07T01:48:55.3853808Z       but the ItemCreationService is unsuccesful
2024-03-07T01:48:55.5813159Z         should have an error that includes the error
2024-03-07T01:48:55.7727987Z         should not create a Item
2024-03-07T01:48:55.9607615Z         should not create the Kit
2024-03-07T01:48:55.9608167Z 
2024-03-07T01:48:55.9608763Z DistributionByCountyReportService
2024-03-07T01:48:55.9609473Z   get_breakdown
2024-03-07T01:48:56.0509869Z     divides the item numbers and values according to the partner profile
2024-03-07T01:48:56.1234695Z     will have 100% unspecified shows if no served_areas
2024-03-07T01:48:56.3103702Z     handles multiple partners with overlapping service areas properly
2024-03-07T01:48:56.3104533Z 
2024-03-07T01:48:56.3104744Z ProductDriveParticipant
2024-03-07T01:48:56.3105288Z   Methods
2024-03-07T01:48:56.3106239Z     volume
2024-03-07T01:48:56.3826855Z       retrieves the amount of product that has been donated by participant
2024-03-07T01:48:56.3827769Z     donation_source_view
2024-03-07T01:48:56.3828308Z       no contact name
2024-03-07T01:48:56.3894645Z         is expected to be nil
2024-03-07T01:48:56.3895383Z       contact name present
2024-03-07T01:48:56.3962300Z         is expected to eq "Contact Name (participant)"
2024-03-07T01:48:56.3963216Z     volume_by_product_drive
2024-03-07T01:48:56.5558013Z       retrieves the amount of product that has been donated through specific product drive
2024-03-07T01:48:56.5558879Z   versioning
2024-03-07T01:48:56.5595522Z     is expected to be versioned
2024-03-07T01:48:56.5596100Z   Validations
2024-03-07T01:48:56.5656561Z     is invalid unless it has either a phone number or an email
2024-03-07T01:48:56.5689774Z     is invalid without an organization
2024-03-07T01:48:56.5690401Z   behaves like provideable
2024-03-07T01:48:56.5691127Z     geocode
2024-03-07T01:48:56.5750879Z       adds coordinates to the database
2024-03-07T01:48:56.5752295Z     import_csv
2024-03-07T01:48:56.7569172Z       imports from a csv file
2024-03-07T01:48:56.7569725Z     Validations
2024-03-07T01:48:56.7616198Z       is invalid without an organization
2024-03-07T01:48:56.7685431Z       is invalid unless it has either a contact name or a business name
2024-03-07T01:48:56.7686422Z 
2024-03-07T01:48:56.7686786Z Partners::FamilyRequestCreateService
2024-03-07T01:48:56.7687700Z   #call
2024-03-07T01:48:56.7688879Z     when the arguments are correct
2024-03-07T01:48:56.7689636Z       with children
2024-03-07T01:48:56.8789351Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-07T01:48:56.8790537Z       without children
2024-03-07T01:48:56.9101425Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-07T01:48:56.9102530Z     when the arguments are incorrect
2024-03-07T01:48:56.9103171Z       because a unrecognized item_id was provided
2024-03-07T01:48:56.9358458Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T01:48:56.9359509Z       because no family_requests_attributes were defined
2024-03-07T01:48:56.9598739Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T01:48:56.9599701Z 
2024-03-07T01:48:56.9599994Z Reports::PeriodSupplyReportService
2024-03-07T01:48:56.9600965Z   #report
2024-03-07T01:48:57.1437500Z     should report zero values
2024-03-07T01:48:57.1438454Z     with values
2024-03-07T01:48:57.7675811Z       should report normal values
2024-03-07T01:48:57.7676328Z 
2024-03-07T01:48:57.7676509Z ReminderDeadlineJob
2024-03-07T01:48:57.7677193Z   #perform
2024-03-07T01:48:57.7905235Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-07T01:48:57.7906228Z 
2024-03-07T01:48:57.7906546Z Exports::ExportDonationsCSVService
2024-03-07T01:48:57.7907281Z   #generate_csv_data
2024-03-07T01:48:57.9031324Z     should match the expected content for the csv
2024-03-07T01:48:57.9031918Z 
2024-03-07T01:48:57.9032086Z AddRoleService
2024-03-07T01:48:57.9032708Z   #call
2024-03-07T01:48:57.9033688Z     when the role already exists
2024-03-07T01:48:58.1077895Z       should raise an error for super admin
2024-03-07T01:48:58.3087286Z       should raise an error
2024-03-07T01:48:58.3087968Z     when the role does not yet exist
2024-03-07T01:48:58.5132749Z       should add the user role when asked to add admin
2024-03-07T01:48:58.7178603Z       works with super admin
2024-03-07T01:48:58.9171226Z       should add the role
2024-03-07T01:48:59.1309839Z       works with a partner
2024-03-07T01:48:59.1310420Z 
2024-03-07T01:48:59.1353350Z Role
2024-03-07T01:48:59.1353917Z   is expected to accepts_nested_attributes_for :users
2024-03-07T01:48:59.1354619Z   Associations
2024-03-07T01:48:59.1419267Z     is expected to have and belong to many users
2024-03-07T01:48:59.1458342Z     is expected to belong to resource optional: true
2024-03-07T01:48:59.1459303Z   versioning
2024-03-07T01:48:59.1497863Z     is expected to be versioned
2024-03-07T01:48:59.1498446Z   Validations
2024-03-07T01:48:59.1551792Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-07T01:48:59.1552675Z 
2024-03-07T01:48:59.1552824Z Item
2024-03-07T01:48:59.1553834Z   after update
2024-03-07T01:48:59.1554817Z     when item does not have kit
2024-03-07T01:48:59.1705541Z       does not raise any errors
2024-03-07T01:48:59.1706150Z     when item has the kit
2024-03-07T01:48:59.3712184Z       updates kit name
2024-03-07T01:48:59.3712763Z   Validations >
2024-03-07T01:48:59.3832566Z     requires that items quantity are not a negative number
2024-03-07T01:48:59.3881597Z     requires a Base Item base
2024-03-07T01:48:59.3933624Z     must belong to an organization
2024-03-07T01:48:59.4066796Z     requires a unique name
2024-03-07T01:48:59.4067435Z   distribution_quantity and package size
2024-03-07T01:48:59.4195922Z     have nil values if an empty string is passed
2024-03-07T01:48:59.4196666Z   versioning
2024-03-07T01:48:59.4232926Z     is expected to be versioned
2024-03-07T01:48:59.4233529Z   Methods >
2024-03-07T01:48:59.4234584Z     #reactivate!
2024-03-07T01:48:59.4235347Z       given an array of item ids
2024-03-07T01:48:59.4453866Z         sets the active trait to true for all of them
2024-03-07T01:48:59.4454601Z       given a single item id
2024-03-07T01:48:59.4580556Z         sets the active trait to true for that item
2024-03-07T01:48:59.4581269Z     storage_locations_containing
2024-03-07T01:48:59.4937026Z       retrieves all storage locations that contain an item
2024-03-07T01:48:59.4937591Z     destroy
2024-03-07T01:48:59.5170813Z       only hides an item that has history
2024-03-07T01:48:59.5333253Z       actually destroys an item that doesn't have history
2024-03-07T01:48:59.7457499Z       deactivates the kit if it exists
2024-03-07T01:48:59.7458200Z     barcodes_for
2024-03-07T01:48:59.7727160Z       retrieves all BarcodeItems associated with an item
2024-03-07T01:48:59.7727893Z     has_history?
2024-03-07T01:48:59.8494999Z       identifies items that have been used previously
2024-03-07T01:48:59.8495592Z     other?
2024-03-07T01:48:59.8624579Z       is true for items that are partner_key 'other'
2024-03-07T01:48:59.8625320Z     barcoded_items >
2024-03-07T01:48:59.8968369Z       returns a collection of items that have barcodes associated with them
2024-03-07T01:48:59.8969371Z   Assocations >
2024-03-07T01:48:59.9014425Z     is expected to belong to item_category optional: true
2024-03-07T01:48:59.9015157Z   Filtering >
2024-03-07T01:48:59.9212182Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:48:59.9245913Z     can filter
2024-03-07T01:48:59.9529417Z     ->active shows items that are still active
2024-03-07T01:48:59.9568906Z     ->by_size returns all items with the same size, per their BaseItem parent (FAILED - 1)
2024-03-07T01:48:59.9570071Z     ->disposable
2024-03-07T01:48:59.9859428Z       returns records associated with disposable diapers
2024-03-07T01:48:59.9860280Z     ->cloth_diapers
2024-03-07T01:49:00.0216974Z       returns records associated with disposable diapers
2024-03-07T01:49:00.0217993Z     ->by_partner_key
2024-03-07T01:49:00.0387437Z       filters by partner key
2024-03-07T01:49:00.0388185Z     ->by_base_item
2024-03-07T01:49:00.0560726Z       shows the items for a particular base_item
2024-03-07T01:49:00.2549827Z       can be chained to organization to constrain it to just 1 org's items
2024-03-07T01:49:00.2551080Z   default_quantity
2024-03-07T01:49:00.2641533Z     should return the value of distribution_quantity if it is set
2024-03-07T01:49:00.2724073Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-07T01:49:00.2804669Z     should return 50 if column is not set
2024-03-07T01:49:00.2882079Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-07T01:49:00.2882814Z 
2024-03-07T01:49:00.2883143Z InventoryAggregate
2024-03-07T01:49:00.2884064Z   individual events
2024-03-07T01:49:00.6027147Z     should process a donation destroyed event
2024-03-07T01:49:00.8883205Z     should process a snapshot event
2024-03-07T01:49:01.1909411Z     should process a transfer event
2024-03-07T01:49:01.4970426Z     should process a kit allocation event
2024-03-07T01:49:01.7800930Z     should process a donation event after a new storage location is created
2024-03-07T01:49:02.1849340Z     should process a kit deallocation event
2024-03-07T01:49:02.4787052Z     should process a purchase event
2024-03-07T01:49:02.7830874Z     should process a distribution event
2024-03-07T01:49:03.0848810Z     should process an adjustment event
2024-03-07T01:49:03.3951679Z     should process a purchase destroyed event
2024-03-07T01:49:03.6991757Z     should process an audit event
2024-03-07T01:49:04.0437011Z     should process a distribution destroyed event
2024-03-07T01:49:04.3356800Z     should process a donation event
2024-03-07T01:49:04.6586499Z     should process a transfer destroy event
2024-03-07T01:49:04.6587247Z   validation
2024-03-07T01:49:04.6587691Z     subsequent event is incorrect
2024-03-07T01:49:04.9123652Z       should handle negative quantities
2024-03-07T01:49:05.2932641Z       should add the event to the message
2024-03-07T01:49:05.2933408Z     current event is incorrect
2024-03-07T01:49:05.6406776Z       should raise a bare error
2024-03-07T01:49:05.6407501Z   multiple events
2024-03-07T01:49:05.9129406Z     should handle changing storage location
2024-03-07T01:49:06.2306795Z     should handle intervening audits
2024-03-07T01:49:06.5110157Z     should handle timing correctly
2024-03-07T01:49:06.7920348Z     should ignore unusable snapshots
2024-03-07T01:49:07.2040827Z     should process multiple events
2024-03-07T01:49:07.2041364Z 
2024-03-07T01:49:07.2041532Z RequestMailer
2024-03-07T01:49:07.2042637Z   #request_cancel_partner_notification
2024-03-07T01:49:07.2214951Z     renders the body with correct text with partner information
2024-03-07T01:49:07.2345856Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:49:07.2347999Z 
2024-03-07T01:49:07.2348321Z Donation
2024-03-07T01:49:07.2349840Z   Methods >
2024-03-07T01:49:07.2350717Z     money_raised
2024-03-07T01:49:07.2932786Z       tracks the money raised in a donation
2024-03-07T01:49:07.2933371Z     remove
2024-03-07T01:49:07.3615958Z       fails gracefully if the item doesn't exist
2024-03-07T01:49:07.4238225Z       removes the item from the donation
2024-03-07T01:49:07.4821009Z       works with either an id or an object
2024-03-07T01:49:07.4821752Z     source_view
2024-03-07T01:49:07.4822222Z       not from a drive
2024-03-07T01:49:07.4985000Z         returns source
2024-03-07T01:49:07.4985543Z       from a drive
2024-03-07T01:49:07.4986207Z         participant known
2024-03-07T01:49:07.4986964Z           contact name present
2024-03-07T01:49:07.5111695Z             returns participant display name
2024-03-07T01:49:07.5112352Z           no contact name
2024-03-07T01:49:07.5234325Z             returns drive display name
2024-03-07T01:49:07.5234966Z         unknown participant
2024-03-07T01:49:07.5340229Z           returns drive display name
2024-03-07T01:49:07.5340860Z       details
2024-03-07T01:49:07.5341671Z         manufacturer
2024-03-07T01:49:07.5455898Z           returns manufacturer name
2024-03-07T01:49:07.5456558Z         product drive
2024-03-07T01:49:07.5564082Z           returns product_drive name
2024-03-07T01:49:07.5565080Z         donation site
2024-03-07T01:49:07.5672500Z           returns donation_site name
2024-03-07T01:49:07.5673132Z         misc
2024-03-07T01:49:07.5762498Z           returns a truncated comment
2024-03-07T01:49:07.5763278Z   Scopes >
2024-03-07T01:49:07.5764162Z     during >
2024-03-07T01:49:07.5963585Z       returns all donations created between two dates
2024-03-07T01:49:07.5964306Z     by_source >
2024-03-07T01:49:07.5964755Z       when source is not a symbol
2024-03-07T01:49:07.5965349Z         when source comes from the SOURCES hash
2024-03-07T01:49:07.6137375Z           returns all donations with the provided source
2024-03-07T01:49:07.6138115Z         when source is invalid
2024-03-07T01:49:07.6375788Z           does not throw errors, returns no results
2024-03-07T01:49:07.6376627Z       when source is a symbol
2024-03-07T01:49:07.6377185Z         when source is invalid
2024-03-07T01:49:07.6562976Z           does not throw errors, returns no results
2024-03-07T01:49:07.6563562Z         when source is valid
2024-03-07T01:49:07.6738737Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-07T01:49:07.6742913Z   versioning
2024-03-07T01:49:07.6777908Z     is expected to be versioned
2024-03-07T01:49:07.6778416Z   Validations >
2024-03-07T01:49:07.6907389Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-07T01:49:07.6975513Z     requires a source from the list of available sources
2024-03-07T01:49:07.7027156Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:49:07.7070905Z     must belong to an organization
2024-03-07T01:49:07.7226608Z     is invalid when the line items are invalid
2024-03-07T01:49:07.7270685Z     requires an inventory (storage location)
2024-03-07T01:49:07.7382922Z     requires a donation_site if the source is 'Donation Site'
2024-03-07T01:49:07.7502837Z     requires a product drive participant if the source is 'Product Drive'
2024-03-07T01:49:07.7503747Z   Callbacks >
2024-03-07T01:49:07.7662029Z     automatically combines duplicate line_item records when they're created
2024-03-07T01:49:07.7790347Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:49:07.7793152Z   behaves like itemizable
2024-03-07T01:49:07.7794282Z     .to_a
2024-03-07T01:49:07.7795138Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:49:07.8131355Z         raises an error
2024-03-07T01:49:07.8132013Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:49:07.8467898Z         calls line_item_values
2024-03-07T01:49:07.8468573Z     .line_items
2024-03-07T01:49:07.8469737Z       quantities_by_name
2024-03-07T01:49:07.8818556Z         leaves out zero-quantitied items if requested
2024-03-07T01:49:07.9157054Z         returns a hash of items with id, name, and quantity
2024-03-07T01:49:07.9158205Z       total
2024-03-07T01:49:07.9518648Z         has an item total
2024-03-07T01:49:07.9519242Z       combine!
2024-03-07T01:49:07.9944106Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:49:08.0416799Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:49:08.0417745Z       sorted
2024-03-07T01:49:08.0962372Z         displays the items, sorted by name
2024-03-07T01:49:08.0963089Z   SOURCES
2024-03-07T01:49:08.1003984Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-07T01:49:08.1036768Z     the hash is immutable
2024-03-07T01:49:08.1071180Z     the hash values are immutable
2024-03-07T01:49:08.1071776Z   Associations >
2024-03-07T01:49:08.1072217Z     items >
2024-03-07T01:49:08.1232994Z       has_many
2024-03-07T01:49:08.1233945Z 
2024-03-07T01:49:08.1234164Z Partners::Family
2024-03-07T01:49:08.1236231Z   #search_non_archived
2024-03-07T01:49:08.2210221Z     should return all families if one is passed in
2024-03-07T01:49:08.3172029Z     should return non-archived families if zero is passed in
2024-03-07T01:49:08.3172671Z   #total_children_count
2024-03-07T01:49:08.3232081Z     should return the family's total children count
2024-03-07T01:49:08.3232925Z   validations
2024-03-07T01:49:08.3318339Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-07T01:49:08.3398104Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-07T01:49:08.3474387Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-07T01:49:08.3475280Z   versioning
2024-03-07T01:49:08.3511814Z     is expected to be versioned
2024-03-07T01:49:08.3512385Z   associations
2024-03-07T01:49:08.3554082Z     is expected to belong to partner required: true
2024-03-07T01:49:08.3587870Z     is expected to have many authorized_family_members dependent => destroy
2024-03-07T01:49:08.3623046Z     is expected to have many children dependent => destroy
2024-03-07T01:49:08.3623852Z   #guardian_display_name
2024-03-07T01:49:08.3673617Z     should return the guardian's first and last name
2024-03-07T01:49:08.3674345Z   #create_authorized
2024-03-07T01:49:08.3955580Z     should include authorized family members
2024-03-07T01:49:08.3956337Z 
2024-03-07T01:49:08.3956699Z ServiceObjectErrorsMixin
2024-03-07T01:49:08.3957535Z   self.included
2024-03-07T01:49:08.3996386Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-07T01:49:08.3997143Z 
2024-03-07T01:49:08.3997351Z AccountRequestsController
2024-03-07T01:49:08.3997966Z   routing
2024-03-07T01:49:08.4036673Z     routes to #new
2024-03-07T01:49:08.4072924Z     routes to #create
2024-03-07T01:49:08.6987505Z 
2024-03-07T01:49:08.6988245Z Failures:
2024-03-07T01:49:08.6988637Z 
2024-03-07T01:49:08.6989795Z   1) Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:49:08.6991447Z      Failure/Error: size4 = create(:base_item, size: "4")
2024-03-07T01:49:08.6992226Z 
2024-03-07T01:49:08.6994441Z      NoMethodError:
2024-03-07T01:49:08.6995921Z        undefined method `size=' for #<BaseItem id: nil, name: "10T Diapers", category: nil, created_at: nil, updated_at: nil, item_count: nil, partner_key: "10t_diapers">
2024-03-07T01:49:08.6997407Z      # ./spec/models/item_spec.rb:53:in `block (3 levels) in <top (required)>'
2024-03-07T01:49:08.7008596Z 
2024-03-07T01:49:08.7009019Z Finished in 48.47 seconds (files took 8.53 seconds to load)
2024-03-07T01:49:08.7009871Z 600 examples, 1 failure
2024-03-07T01:49:08.7010216Z 
2024-03-07T01:49:08.7013471Z Failed examples:
2024-03-07T01:49:08.7013783Z 
2024-03-07T01:49:08.7014894Z rspec ./spec/models/item_spec.rb:52 # Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:49:08.7016046Z 
2024-03-07T01:49:08.7016246Z Randomized with seed 50638
2024-03-07T01:49:08.7016555Z 
2024-03-07T01:49:09.0116549Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:49:09.0118353Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3766 / 6435 LOC (58.52%) covered.
2024-03-07T01:49:09.0856688Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/item_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/models/purchase_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/user_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/models/question_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/item_category_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/inventory_item_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/base_item_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/models/role_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/models/county_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" failed
2024-03-07T01:49:09.4752362Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:49:09.4754361Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10705 LOC (0.35%) covered.
2024-03-07T01:49:09.5015716Z ##[error]Process completed with exit code 1.
