2024-02-21T09:14:53.3356723Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-21T09:14:53.3358189Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-21T09:14:53.3386493Z shell: /usr/bin/bash -e {0}
2024-02-21T09:14:53.3386847Z env:
2024-02-21T09:14:53.3387187Z   POSTGRES_HOST: localhost
2024-02-21T09:14:53.3387643Z   DATABASE_HOST: localhost
2024-02-21T09:14:53.3388030Z   PG_USERNAME: postgres
2024-02-21T09:14:53.3388411Z   PG_PASSWORD: password
2024-02-21T09:14:53.3388808Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-21T09:14:53.3389226Z   POSTGRES_PORT: 5432
2024-02-21T09:14:53.3389569Z   PGHOST: localhost
2024-02-21T09:14:53.3389963Z   PGUSER: postgres
2024-02-21T09:14:53.3390306Z   RAILS_ENV: test
2024-02-21T09:14:53.3390629Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-21T09:14:53.3391145Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-21T09:14:53.3391811Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-21T09:14:53.3392263Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-21T09:14:53.3392900Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-21T09:14:53.3393519Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-21T09:14:53.3394244Z   EVENTS_READ: true
2024-02-21T09:14:53.3394580Z ##[endgroup]
2024-02-21T09:14:58.8891535Z W, [2024-02-21T09:14:58.888797 #2364]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-21T09:14:58.8893542Z W, [2024-02-21T09:14:58.888846 #2364]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:14:58.8896132Z W, [2024-02-21T09:14:58.888870 #2364]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:14:58.8901285Z W, [2024-02-21T09:14:58.888899 #2364]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-21T09:15:02.9391687Z W, [2024-02-21T09:15:02.938798 #2364]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-21T09:15:02.9393216Z W, [2024-02-21T09:15:02.938844 #2364]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:15:02.9394796Z W, [2024-02-21T09:15:02.938868 #2364]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:15:02.9397212Z W, [2024-02-21T09:15:02.938910 #2364]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-21T09:15:02.9449387Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-21T09:15:11.1346153Z 
2024-02-21T09:15:11.1347287Z Randomized with seed 48718
2024-02-21T09:15:12.1228057Z 
2024-02-21T09:15:12.1228802Z Admin::Organizations
2024-02-21T09:15:12.1229824Z   When logged in as a super admin
2024-02-21T09:15:12.1231842Z     DELETE #destroy
2024-02-21T09:15:12.5419797Z       redirects
2024-02-21T09:15:12.5420671Z     GET #index
2024-02-21T09:15:12.5892758Z       returns http success
2024-02-21T09:15:12.5893439Z     GET #edit
2024-02-21T09:15:12.8235461Z       returns http success
2024-02-21T09:15:12.8236272Z     DELETE #destroy
2024-02-21T09:15:12.8236838Z       with a valid organization id
2024-02-21T09:15:13.3373361Z         redirects to #index
2024-02-21T09:15:13.3374174Z     PUT #update
2024-02-21T09:15:13.3572337Z       redirect
2024-02-21T09:15:13.5652015Z     GET #show
2024-02-21T09:15:13.5653035Z       returns http success
2024-02-21T09:15:13.5653805Z     POST #create
2024-02-21T09:15:13.5654496Z       with invalid params
2024-02-21T09:15:13.6105204Z         does not create an organization and renders #create with an error message
2024-02-21T09:15:13.6106275Z       with valid params
2024-02-21T09:15:13.9110107Z         creates an organization and redirects to #index
2024-02-21T09:15:13.9110770Z     GET #new
2024-02-21T09:15:13.9484698Z       returns http success
2024-02-21T09:15:13.9485496Z       when given a valid account request token in the query parameters
2024-02-21T09:15:14.0147554Z         should render new with pre populate input fields from the account_request
2024-02-21T09:15:14.0148995Z       when given a token that matches a account request that has already been processed
2024-02-21T09:15:14.2345873Z         should render new with a flash error message
2024-02-21T09:15:14.2346801Z     PATCH #update
2024-02-21T09:15:14.2347340Z       with an invalid update
2024-02-21T09:15:14.4455390Z         redirects to #edit with an error message
2024-02-21T09:15:14.6516711Z         returns http success
2024-02-21T09:15:14.6517590Z       with a valid update
2024-02-21T09:15:14.8477056Z         redirects to #index
2024-02-21T09:15:14.8478124Z   When logged in as a non-admin user
2024-02-21T09:15:14.8479136Z     POST #create
2024-02-21T09:15:14.8629179Z       redirects
2024-02-21T09:15:14.8629785Z     PUT #update
2024-02-21T09:15:14.8750362Z       redirects
2024-02-21T09:15:14.8750967Z     GET #edit
2024-02-21T09:15:14.8869738Z       redirects
2024-02-21T09:15:14.8870349Z     GET #new
2024-02-21T09:15:14.8987728Z       redirects
2024-02-21T09:15:14.8988502Z     GET #index
2024-02-21T09:15:14.9105631Z       redirects
2024-02-21T09:15:14.9106637Z 
2024-02-21T09:15:14.9107045Z Profiles
2024-02-21T09:15:14.9108441Z   POST #update
2024-02-21T09:15:14.9109312Z     successful save
2024-02-21T09:15:14.9595375Z       update partner
2024-02-21T09:15:15.0013583Z       redirects to #show
2024-02-21T09:15:15.0015100Z     when updating an existing value to a blank value
2024-02-21T09:15:15.0461790Z       should have blank values
2024-02-21T09:15:15.0917045Z       update partner
2024-02-21T09:15:15.0917806Z   GET #edit
2024-02-21T09:15:15.1977718Z     returns http success
2024-02-21T09:15:15.1982102Z 
2024-02-21T09:15:15.1983289Z Dashboard
2024-02-21T09:15:15.1984654Z   With an existing essentials bank
2024-02-21T09:15:15.1985514Z     Donations
2024-02-21T09:15:22.4302399Z       has a link to create a new donation
2024-02-21T09:15:22.4304137Z       given 1 Donation on 2024-01-22 (only if a valid date), 1 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:22.4305157Z         filtering to 'Last 30 Days'
2024-02-21T09:15:23.8374718Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:15:23.8377097Z       given 1 Donation on 2024-02-14 (only if a valid date), 1 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:23.8377881Z         filtering to 'Last 7 Days'
2024-02-21T09:15:25.2254052Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:15:25.2255958Z       given 1 Donation on 2024-01-31 (only if a valid date), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:15:25.2256917Z         filtering to 'This Month'
2024-02-21T09:15:26.7349584Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:15:26.7351587Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:15:26.7352879Z         filtering to 'This Year'
2024-02-21T09:15:30.0745385Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:15:30.0747199Z       given 1 Donation on 2024-02-20 (only if a valid date), 3 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:30.0748624Z         filtering to 'Today'
2024-02-21T09:15:31.5482430Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:15:31.5484225Z       given 1 Donation on 2024-02-19 (only if a valid date), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:15:31.5485408Z         filtering to 'Yesterday'
2024-02-21T09:15:32.9488223Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:15:32.9490020Z       given 1 Donation on 2022-02-20 (only if a valid date), 2 during 2022-02-21..2024-02-10, and 1 on 2024-02-11
2024-02-21T09:15:32.9491643Z         filtering to '' (February 21, 2022 - February 10, 2024)
2024-02-21T09:15:34.4026521Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:15:34.4027998Z       given 1 Donation on 2023-12-31 (only if a valid date), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:15:34.4030244Z         filtering to 'Last Month'
2024-02-21T09:15:35.8054504Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:15:35.8055478Z     Inventory Totals
2024-02-21T09:15:35.8056610Z       Summary
2024-02-21T09:15:36.5014012Z         displays the on-hand totals
2024-02-21T09:15:37.5347028Z         when constrained to date range
2024-02-21T09:15:37.5347848Z           does not change
2024-02-21T09:15:37.5348450Z     Distributions
2024-02-21T09:15:38.4373513Z       has a link to create a new distribution
2024-02-21T09:15:38.4375174Z       given 1 Distribution on 2024-01-22  (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:38.4376448Z         filtering to 'Last 30 Days'
2024-02-21T09:15:39.8438762Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:15:39.8440796Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:39.8442063Z         filtering to 'Today'
2024-02-21T09:15:41.2214436Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T09:15:41.2215955Z       given 1 Distribution on 2022-02-20  (unless 'All Time'), 2 during 2022-02-21..2023-09-17, and 1 on 2023-09-18
2024-02-21T09:15:41.2216925Z         filtering to '' (February 21, 2022 - September 17, 2023)
2024-02-21T09:15:42.6564773Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:15:42.6566493Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:15:42.6567626Z         filtering to 'Last Month'
2024-02-21T09:15:44.1805069Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T09:15:44.1806941Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 3 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:44.1808067Z         filtering to 'All Time'
2024-02-21T09:15:45.5705168Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:15:45.5707187Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:15:45.5708029Z         filtering to 'This Month'
2024-02-21T09:15:47.0034823Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:15:47.0036449Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 4 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:15:47.0037626Z         filtering to 'Yesterday'
2024-02-21T09:15:48.4771023Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:15:48.4773091Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 1 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:48.4774431Z         filtering to 'Last 7 Days'
2024-02-21T09:15:49.8360656Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T09:15:49.8362496Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:15:49.8363411Z         filtering to 'This Year'
2024-02-21T09:15:51.2489821Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:15:51.2490860Z     Manufacturer Donations
2024-02-21T09:15:51.8501783Z       has a link to create a new donation
2024-02-21T09:15:51.8503331Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 7 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:51.8504866Z         filtering to 'Today'
2024-02-21T09:15:53.9000468Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-21T09:15:53.9002173Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:15:53.9003013Z         filtering to 'Yesterday'
2024-02-21T09:15:55.2479545Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:15:55.2481243Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:15:55.2482148Z         filtering to 'This Month'
2024-02-21T09:15:56.5904447Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:15:56.5906110Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 5 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:56.5907102Z         filtering to 'All Time'
2024-02-21T09:15:58.3549674Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T09:15:58.3551605Z       given 1 Manufacturer donating on 2024-01-22  (unless 'All Time'), 0 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:58.3552595Z         filtering to 'Last 30 Days'
2024-02-21T09:15:59.7318827Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:15:59.7320727Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:15:59.7322055Z         filtering to 'Last 7 Days'
2024-02-21T09:16:01.0978845Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:16:01.0980846Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:16:01.0982439Z         filtering to 'Last Month'
2024-02-21T09:16:02.6067462Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-21T09:16:02.6069787Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:16:02.6075462Z         filtering to 'This Year'
2024-02-21T09:16:04.1307280Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-21T09:16:04.1309087Z       given 1 Manufacturer donating on 2022-02-20  (unless 'All Time'), 8 during 2022-02-21..2024-01-28, and 1 on 2024-01-29
2024-02-21T09:16:04.1310150Z         filtering to '' (February 21, 2022 - January 28, 2024)
2024-02-21T09:16:06.3764679Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:16:06.3765573Z     Purchases
2024-02-21T09:16:07.2681207Z       has a link to create a new purchase
2024-02-21T09:16:07.2682909Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:16:07.2684364Z         filtering to 'Last Month'
2024-02-21T09:16:08.6501923Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:16:08.6503788Z       given 1 Purchase on 2022-02-20  (unless 'All Time'), 2 during 2022-02-21..2023-10-24, and 1 on 2023-10-25
2024-02-21T09:16:08.6505002Z         filtering to '' (February 21, 2022 - October 24, 2023)
2024-02-21T09:16:10.0600055Z           shows correct 2 Recent Purchase link(s)
2024-02-21T09:16:10.0601768Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:16:10.0603037Z         filtering to 'This Year'
2024-02-21T09:16:11.5430848Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:16:11.5432582Z       given 1 Purchase on 2024-01-22  (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:16:11.5434027Z         filtering to 'Last 30 Days'
2024-02-21T09:16:13.0864371Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:16:13.0866295Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 2 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:16:13.0867596Z         filtering to 'Today'
2024-02-21T09:16:14.5059541Z           shows correct 2 Recent Purchase link(s)
2024-02-21T09:16:14.5060851Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:16:14.5061804Z         filtering to 'Yesterday'
2024-02-21T09:16:17.8433617Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:16:17.8466874Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:16:17.8468687Z         filtering to 'Last 7 Days'
2024-02-21T09:16:19.4743161Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:16:19.4744685Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:16:19.4745618Z         filtering to 'This Month'
2024-02-21T09:16:21.0232922Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:16:21.0233964Z     Product Drives
2024-02-21T09:16:21.5977096Z       has a widget for product drive summary data
2024-02-21T09:16:21.5978112Z       Product drive behaviour with Mixed Donation types
2024-02-21T09:16:22.3288489Z         only shows product drive donations as product drive donations
2024-02-21T09:16:23.0391190Z         only counts product drive money raised
2024-02-21T09:16:23.7500205Z         only counts product drive donations for product drive
2024-02-21T09:16:23.7501607Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:16:23.7502636Z         filtering to 'This Month'
2024-02-21T09:16:27.0878553Z           shows 0 Recent Donation link(s)
2024-02-21T09:16:28.4180460Z           shows the correct total donations
2024-02-21T09:16:29.7522755Z           shows the correct total money raised
2024-02-21T09:16:29.7524628Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:16:29.7525567Z         filtering to 'This Year'
2024-02-21T09:16:31.0735604Z           shows the correct total money raised
2024-02-21T09:16:32.4926548Z           shows the correct total donations
2024-02-21T09:16:35.8075540Z           shows 0 Recent Donation link(s)
2024-02-21T09:16:35.8077002Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:16:35.8078200Z         filtering to 'Last Month'
2024-02-21T09:16:37.1391297Z           shows the correct total donations
2024-02-21T09:16:38.4521927Z           shows the correct total money raised
2024-02-21T09:16:41.7703887Z           shows 0 Recent Donation link(s)
2024-02-21T09:16:41.7706211Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 3 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:16:41.7707553Z         filtering to 'Last 7 Days'
2024-02-21T09:16:43.2374666Z           shows the correct total money raised
2024-02-21T09:16:44.7155450Z           shows 3 Recent Donation link(s)
2024-02-21T09:16:46.1836163Z           shows the correct total donations
2024-02-21T09:16:46.1838190Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:16:46.1839608Z         filtering to 'Yesterday'
2024-02-21T09:16:47.6174033Z           shows the correct total money raised
2024-02-21T09:16:48.9687154Z           shows the correct total donations
2024-02-21T09:16:52.3018539Z           shows 0 Recent Donation link(s)
2024-02-21T09:16:52.3021199Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:16:52.3023288Z         filtering to 'Today'
2024-02-21T09:16:53.7324492Z           shows 1 Recent Donation link(s)
2024-02-21T09:16:55.1366514Z           shows the correct total money raised
2024-02-21T09:16:56.5257583Z           shows the correct total donations
2024-02-21T09:16:56.5259431Z       given 1 Product Drive Donation on 2022-02-20 (unless 'All Time'), 0 during 2022-02-21..2023-11-09, and 1 on 2023-11-10
2024-02-21T09:16:56.5261090Z         filtering to '' (February 21, 2022 - November 9, 2023)
2024-02-21T09:16:59.8896847Z           shows 0 Recent Donation link(s)
2024-02-21T09:17:01.2677638Z           shows the correct total donations
2024-02-21T09:17:02.6875565Z           shows the correct total money raised
2024-02-21T09:17:02.6877405Z       given 1 Product Drive Donation on 2024-01-22 (unless 'All Time'), 0 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:17:02.6878417Z         filtering to 'Last 30 Days'
2024-02-21T09:17:04.1885172Z           shows the correct total donations
2024-02-21T09:17:05.5094534Z           shows the correct total money raised
2024-02-21T09:17:08.8540937Z           shows 0 Recent Donation link(s)
2024-02-21T09:17:08.8541749Z     Signage
2024-02-21T09:17:11.7479025Z       shows their organization name unless they have a logo set
2024-02-21T09:17:11.7480101Z   With a new essentials bank
2024-02-21T09:17:39.6726890Z     displays the getting started guide until the steps are completed
2024-02-21T09:17:39.6727783Z 
2024-02-21T09:17:39.6728057Z /account_requests
2024-02-21T09:17:39.6729841Z   GET #confirm
2024-02-21T09:17:39.6730798Z     when given a valid token
2024-02-21T09:17:39.6978197Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-21T09:17:39.6979446Z     when given a token that has already been confirmed
2024-02-21T09:17:39.8791871Z       should render a error that says that is code provided is invalid
2024-02-21T09:17:39.8792898Z     when given a invalid token
2024-02-21T09:17:39.8852531Z       should render a error that says that is code provided is invalid
2024-02-21T09:17:39.8853678Z   GET #received
2024-02-21T09:17:39.8854346Z     when given a valid token
2024-02-21T09:17:39.8990504Z       should render the received template
2024-02-21T09:17:39.8991266Z     when given a invalid token
2024-02-21T09:17:39.9045700Z       should render a error that says that is code provided is invalid
2024-02-21T09:17:39.9047005Z   GET #confirmation
2024-02-21T09:17:39.9047721Z     when given a token that has already been confirmed
2024-02-21T09:17:40.0871615Z       should render a error that says that is code provided is invalid
2024-02-21T09:17:40.0872550Z     when given a valid token
2024-02-21T09:17:40.1006500Z       should render the confirmation template
2024-02-21T09:17:40.1007581Z     when given a invalid token
2024-02-21T09:17:40.1060277Z       should render a error that says that is code provided is invalid
2024-02-21T09:17:40.1061478Z   GET #new
2024-02-21T09:17:40.1175159Z     renders a successful response
2024-02-21T09:17:40.1175848Z   POST #create
2024-02-21T09:17:40.1176635Z     with valid parameters
2024-02-21T09:17:40.1294505Z       redirects to the created account_request confirmation
2024-02-21T09:17:40.1396691Z       delivers the confirmation email via default queue
2024-02-21T09:17:40.1573907Z       creates a new AccountRequest
2024-02-21T09:17:40.1574669Z     with invalid parameters
2024-02-21T09:17:40.1772074Z       does not create a new AccountRequest
2024-02-21T09:17:40.1940804Z       renders a successful response (i.e. to display the 'new' template)
2024-02-21T09:17:40.1941598Z 
2024-02-21T09:17:40.1942189Z Audits
2024-02-21T09:17:40.1943004Z   while signed in as an organization admin
2024-02-21T09:17:40.1944662Z     GET #edit
2024-02-21T09:17:40.2617571Z       is successful if the status of audit is `in_progress`
2024-02-21T09:17:40.3240810Z       redirects to #index if the status of audit is not `in_progress`
2024-02-21T09:17:40.3241856Z     POST #create
2024-02-21T09:17:40.3242404Z       with invalid params
2024-02-21T09:17:40.3651056Z         re-renders the 'new' template
2024-02-21T09:17:40.4191191Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-21T09:17:40.4578946Z         assigns a newly created but unsaved audit as @audit
2024-02-21T09:17:40.4579843Z       with valid params
2024-02-21T09:17:40.4958462Z         redirects to the #show after created audit
2024-02-21T09:17:40.5337935Z         assigns a newly created audit as @audit
2024-02-21T09:17:40.5705925Z         creates a new Audit
2024-02-21T09:17:40.6061902Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-21T09:17:40.6439050Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-21T09:17:40.6440232Z     GET #index
2024-02-21T09:17:40.7067953Z       is successful
2024-02-21T09:17:40.7576770Z     GET #show
2024-02-21T09:17:40.7577408Z       is successful
2024-02-21T09:17:40.7578200Z     GET #new
2024-02-21T09:17:40.7947098Z       is successful
2024-02-21T09:17:40.7947855Z     DELETE #destroy
2024-02-21T09:17:40.7948892Z       with valid params
2024-02-21T09:17:40.8305116Z         destroys the audit if the audit's status is `confirms`
2024-02-21T09:17:40.8670099Z         destroys the audit if the audit's status is `in_progress`
2024-02-21T09:17:40.9016339Z         can not destroy the audit if the audit's status is `finalized`
2024-02-21T09:17:40.9017260Z     POST #finalize
2024-02-21T09:17:40.9663567Z       sets the finalize status and saves an event
2024-02-21T09:17:40.9664581Z 
2024-02-21T09:17:40.9664939Z Managing requests
2024-02-21T09:17:40.9666374Z   creating a individuals/family request
2024-02-21T09:17:40.9667348Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:17:40.9668478Z       WHEN they create a request inproperly
2024-02-21T09:17:41.8766205Z         should show an error message with the instructions
2024-02-21T09:17:41.8767394Z       WHEN they create a request properly
2024-02-21T09:17:41.8768593Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:17:44.1371991Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-21T09:17:44.1373285Z   creating a request
2024-02-21T09:17:44.1374076Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:17:44.1375313Z       WHEN they create a request inproperly by not inputting anything
2024-02-21T09:17:45.0392270Z         should show an error message with the instructions
2024-02-21T09:17:45.0392952Z       WHEN they create a request properly
2024-02-21T09:17:45.0394517Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:17:47.2634998Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-21T09:17:47.2636811Z       WHEN they create a request with only a comment
2024-02-21T09:17:48.2109957Z         should be created without any issue
2024-02-21T09:17:48.2111295Z 
2024-02-21T09:17:48.2111737Z Organization management
2024-02-21T09:17:48.2113294Z   while signed in as a normal user
2024-02-21T09:17:48.6874135Z     can see summary details about the organization as a user
2024-02-21T09:17:49.1674061Z     cannot see 'Make user' button for admins
2024-02-21T09:17:49.1675178Z   while signed in as an organization admin
2024-02-21T09:17:50.1374801Z     can re-activate a user in the organization
2024-02-21T09:17:50.6119503Z     can re-invite a user to an organization after 7 days
2024-02-21T09:17:51.5584527Z     can add a new user to an organization
2024-02-21T09:17:52.0687984Z     can see 'Make user' button for admins
2024-02-21T09:17:53.0299003Z     can deactivate a user in the organization
2024-02-21T09:17:53.0299927Z     Editing the organization
2024-02-21T09:17:54.0009444Z       can select if the org repackages essentials
2024-02-21T09:17:54.8241539Z       can set a reminder and a deadline day
2024-02-21T09:17:55.7779193Z       can select if the org distributes essentials monthly
2024-02-21T09:17:56.7265997Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-21T09:17:57.6890926Z       can select if the org shows year-to-date values on the distribution printout
2024-02-21T09:17:58.5222542Z       can set the NDBN Member ID
2024-02-21T09:17:59.6675781Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-21T09:18:00.6286801Z       can enable if the org uses single step invite and approve partner process
2024-02-21T09:18:01.5678726Z       can set a default storage location on the organization
2024-02-21T09:18:03.0133690Z       can select and deselect Required Partner Fields
2024-02-21T09:18:03.0134510Z     Viewing the organization
2024-02-21T09:18:03.5638432Z       can view organization details
2024-02-21T09:18:03.5639649Z 
2024-02-21T09:18:03.5639929Z /partners/profiles
2024-02-21T09:18:03.5642108Z   GET #show
2024-02-21T09:18:03.6204363Z     displays the partner
2024-02-21T09:18:03.6720563Z     shows correct values for yes/no buttons
2024-02-21T09:18:03.6721607Z   GET #edit
2024-02-21T09:18:03.7608565Z     does not have default radio button value when value is nil
2024-02-21T09:18:03.8451297Z     has "No" radio button value when value is false
2024-02-21T09:18:03.9274892Z     displays the partner
2024-02-21T09:18:04.0247294Z     has "Yes" radio button value when value is true
2024-02-21T09:18:04.0248388Z   PUT #update
2024-02-21T09:18:04.0815671Z     updates the partner and profile
2024-02-21T09:18:04.0816438Z     with no social media
2024-02-21T09:18:04.1768182Z       shows an error
2024-02-21T09:18:04.1768946Z     when updating an existing value to a blank value
2024-02-21T09:18:04.2312803Z       does store N/A in the database
2024-02-21T09:18:04.2845745Z       does not update other partner profile attributes to blank
2024-02-21T09:18:04.3357875Z       updates the partner profile attribute to a blank value
2024-02-21T09:18:04.3358692Z 
2024-02-21T09:18:04.3358895Z Vendor
2024-02-21T09:18:04.3360849Z   When vendor have purchases associated with them already
2024-02-21T09:18:04.9138113Z     can have existing vendors show in the #index with some summary stats
2024-02-21T09:18:05.4840200Z     can have a single vendor show semi-detailed stats about purchases
2024-02-21T09:18:05.4841224Z   when editing an existing vendor
2024-02-21T09:18:06.2304431Z     does not update a vendor with empty attributes
2024-02-21T09:18:06.9773873Z     can update the contact info for a vendor as a user
2024-02-21T09:18:06.9774830Z   When a user views the index page
2024-02-21T09:18:07.4345893Z     should have the vendor names in alphabetical order
2024-02-21T09:18:07.4346996Z   when creating a new vendor
2024-02-21T09:18:08.2750506Z     can create a new vendor instance as a user
2024-02-21T09:18:08.9896492Z     cannot add a new vendor instance with empty attributes
2024-02-21T09:18:08.9897527Z 
2024-02-21T09:18:08.9897965Z User account management
2024-02-21T09:18:08.9899245Z   when not in staging
2024-02-21T09:18:09.8459426Z     should change an user name
2024-02-21T09:18:10.7049510Z     should change the email
2024-02-21T09:18:11.4490290Z     should fail when the email is invalid
2024-02-21T09:18:11.4490938Z   when in staging
2024-02-21T09:18:11.8862885Z     should display staging warning
2024-02-21T09:18:12.3345995Z     should not allow the user to change staging credentials
2024-02-21T09:18:12.3346719Z 
2024-02-21T09:18:12.3346947Z DonationSites
2024-02-21T09:18:12.3348011Z   while signed in
2024-02-21T09:18:12.3349061Z     GET #index
2024-02-21T09:18:12.3349888Z       html
2024-02-21T09:18:12.3712214Z         is expected to be successful
2024-02-21T09:18:12.3712875Z       csv
2024-02-21T09:18:12.3872133Z         is expected to be successful
2024-02-21T09:18:12.3873090Z 
2024-02-21T09:18:12.3873467Z Admin Organization Management
2024-02-21T09:18:12.3875279Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-21T09:18:14.2804985Z     creates a new organization
2024-02-21T09:18:14.2805970Z   While signed in as an Administrative User (super admin)
2024-02-21T09:18:15.3114157Z     filters by organizations by name in organizations index page
2024-02-21T09:18:17.1424894Z     creates a new organization
2024-02-21T09:18:18.4034687Z     can view organization details
2024-02-21T09:18:18.4035434Z 
2024-02-21T09:18:18.4035725Z Kit management
2024-02-21T09:18:18.9884044Z   should not display inactive storage locations under allocations
2024-02-21T09:18:19.8702952Z   can create a new kit as a user with the proper quantity
2024-02-21T09:18:21.3399717Z   can allocate and deallocate quantity per storage location from kit index
2024-02-21T09:18:21.3401077Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-21T09:18:22.4343835Z     will not change quantity amounts when allocating
2024-02-21T09:18:22.4344990Z   when there is no kit quantity
2024-02-21T09:18:23.5857108Z     will not change quantity amounts when deallocating
2024-02-21T09:18:23.5858494Z 
2024-02-21T09:18:23.5859078Z StorageLocations
2024-02-21T09:18:23.5860410Z   While not signed in
2024-02-21T09:18:23.5936128Z     redirects the user to the sign-in page for CRUD actions
2024-02-21T09:18:23.5937203Z   While signed in
2024-02-21T09:18:23.5938419Z     Looking at a different organization
2024-02-21T09:18:23.7663368Z       redirects the user to the sign-in page for CRUD actions
2024-02-21T09:18:23.7664435Z     GET #inventory
2024-02-21T09:18:23.7664841Z       when also including inactive items
2024-02-21T09:18:23.8362114Z         returns a collection that also includes items that have been deactivated
2024-02-21T09:18:23.8363027Z       without any overrides
2024-02-21T09:18:23.8899460Z         returns a collection that only includes items at the storage location
2024-02-21T09:18:23.8900797Z       when also including omitted items
2024-02-21T09:18:23.9407237Z         contains a collection of ducktyped entries that respond the same
2024-02-21T09:18:23.9885907Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-21T09:18:23.9887014Z     PUT #deactivate
2024-02-21T09:18:24.0085206Z       discards
2024-02-21T09:18:24.0085992Z       with inventory
2024-02-21T09:18:24.0549230Z         does not discard
2024-02-21T09:18:24.0549918Z     PUT #reactivate
2024-02-21T09:18:24.0712262Z       undiscards
2024-02-21T09:18:24.0712833Z     GET #index
2024-02-21T09:18:24.0713579Z       csv
2024-02-21T09:18:24.1686510Z         includes headers followed by alphabetized item names
2024-02-21T09:18:24.1863965Z         succeeds
2024-02-21T09:18:24.1864687Z       html
2024-02-21T09:18:24.2209763Z         succeeds
2024-02-21T09:18:24.2210881Z         with inactive locations
2024-02-21T09:18:24.2561627Z           does not includes the inactive location
2024-02-21T09:18:24.2562598Z           with include_inactive_locations
2024-02-21T09:18:24.2914195Z             includes the inactive location
2024-02-21T09:18:24.2915353Z     GET #new
2024-02-21T09:18:24.7251702Z       returns http success
2024-02-21T09:18:24.7252594Z     GET #show
2024-02-21T09:18:24.7253132Z       html
2024-02-21T09:18:24.7923187Z         should return a correct response
2024-02-21T09:18:24.7924298Z         with version date set
2024-02-21T09:18:24.7925084Z           with a version found
2024-02-21T09:18:24.8706260Z             should show the version specified
2024-02-21T09:18:24.8707272Z           with no version found
2024-02-21T09:18:24.9393863Z             should show N/A
2024-02-21T09:18:24.9394537Z       csv
2024-02-21T09:18:24.9963127Z         should be successful
2024-02-21T09:18:24.9963970Z     POST #import_csv
2024-02-21T09:18:24.9964850Z       with a csv file
2024-02-21T09:18:25.0139723Z         redirects
2024-02-21T09:18:25.0291658Z         presents a flash notice message
2024-02-21T09:18:25.0345954Z         invokes .import_csv
2024-02-21T09:18:25.0346622Z       without a csv file
2024-02-21T09:18:25.0462222Z         redirects to :index
2024-02-21T09:18:25.0577371Z         presents a flash error message
2024-02-21T09:18:25.0578030Z       csv file with wrong headers
2024-02-21T09:18:25.0704036Z         redirects
2024-02-21T09:18:25.0824834Z         presents a flash error message
2024-02-21T09:18:25.0825564Z     GET #destroy
2024-02-21T09:18:25.1075819Z       redirects to #index
2024-02-21T09:18:25.1076509Z     GET #edit
2024-02-21T09:18:25.1418030Z       returns http success
2024-02-21T09:18:25.1418802Z 
2024-02-21T09:18:25.1419166Z /partners/children
2024-02-21T09:18:25.1420093Z   GET #index
2024-02-21T09:18:25.2257222Z     should render without any issues
2024-02-21T09:18:25.2746648Z     should export CSV
2024-02-21T09:18:25.2747643Z 
2024-02-21T09:18:25.2747947Z Purchases
2024-02-21T09:18:25.2749645Z   while signed in as a normal user
2024-02-21T09:18:25.2750695Z     When visiting an existing purchase
2024-02-21T09:18:25.7341311Z       does not allow deletion of a purchase
2024-02-21T09:18:25.7342171Z     When visiting the index page
2024-02-21T09:18:25.7342933Z       In the middle of the year
2024-02-21T09:18:26.4513383Z         User sees total purchases value
2024-02-21T09:18:27.1676246Z         User sees purchased date column
2024-02-21T09:18:27.9308258Z         User can click to the new purchase form
2024-02-21T09:18:27.9309095Z       When filtering on the index page
2024-02-21T09:18:28.7489815Z         User can filter the #index by storage location
2024-02-21T09:18:29.5499521Z         User can filter the #index by vendor
2024-02-21T09:18:29.5500015Z         behaves like Date Range Picker
2024-02-21T09:18:29.5501405Z           when choosing a date range that only includes the previous week
2024-02-21T09:18:30.4786997Z             shows only 1 record
2024-02-21T09:18:30.4787900Z           when choosing 'All Time'
2024-02-21T09:18:31.4112910Z             shows all the records
2024-02-21T09:18:31.4113599Z           when choosing 'Last Month'
2024-02-21T09:18:32.3496382Z             shows only 2 of the records
2024-02-21T09:18:32.3497716Z     When creating a new purchase
2024-02-21T09:18:32.8464250Z       should not display inactive storage locations in dropdown
2024-02-21T09:18:32.8465068Z       Editing purchase
2024-02-21T09:18:33.4691529Z         A user can view another organizations purchase
2024-02-21T09:18:33.9568194Z         A user can see purchased_from value
2024-02-21T09:18:33.9569056Z       via manual entry
2024-02-21T09:18:35.0253241Z         User can create a purchase IN THE PAST
2024-02-21T09:18:36.0461087Z         User can create vendor from purchase
2024-02-21T09:18:37.0337845Z         Does not include inactive items in the line item fields
2024-02-21T09:18:37.9024453Z         User can create a purchase using dollars decimal amount
2024-02-21T09:18:39.0523151Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-21T09:18:39.0523879Z         when creating a purchase incorrectly
2024-02-21T09:18:40.0228012Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-21T09:18:40.7961674Z           should display failure with error messages
2024-02-21T09:18:40.7962468Z       via barcode entry
2024-02-21T09:18:41.9979677Z         a user can add items that do not yet have a barcode
2024-02-21T09:18:42.6862579Z         a user can add items via scanning them in by barcode
2024-02-21T09:18:43.5849387Z         User scan same barcode 2 times
2024-02-21T09:18:43.5850420Z   while signed in as an organization admin
2024-02-21T09:18:44.4324582Z     allows deletion of a purchase
2024-02-21T09:18:44.5107446Z W, [2024-02-21T01:18:44.510533 #2422]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-21T09:18:44.5109162Z W, [2024-02-21T01:18:44.510585 #2422]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:18:44.5112631Z W, [2024-02-21T01:18:44.510609 #2422]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:18:44.5116264Z W, [2024-02-21T01:18:44.510640 #2422]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-21T09:18:44.5117421Z 
2024-02-21T09:18:44.5117817Z Finished in 3 minutes 33.4 seconds (files took 7.96 seconds to load)
2024-02-21T09:18:44.5118586Z 235 examples, 0 failures
2024-02-21T09:18:44.5118873Z 
2024-02-21T09:18:44.5119039Z Randomized with seed 48718
2024-02-21T09:18:44.5119360Z 
2024-02-21T09:18:44.8092145Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6404 LOC (59.65%) covered.
2024-02-21T09:18:45.3198833Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
