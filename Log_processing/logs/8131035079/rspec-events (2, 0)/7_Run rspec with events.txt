2024-03-03T14:58:25.6905262Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-03T14:58:25.6906216Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-03T14:58:25.6933845Z shell: /usr/bin/bash -e {0}
2024-03-03T14:58:25.6934250Z env:
2024-03-03T14:58:25.6934568Z   POSTGRES_HOST: localhost
2024-03-03T14:58:25.6935043Z   DATABASE_HOST: localhost
2024-03-03T14:58:25.6935413Z   PG_USERNAME: postgres
2024-03-03T14:58:25.6935744Z   PG_PASSWORD: password
2024-03-03T14:58:25.6936213Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-03T14:58:25.6936628Z   POSTGRES_PORT: 5432
2024-03-03T14:58:25.6937035Z   PGHOST: localhost
2024-03-03T14:58:25.6937353Z   PGUSER: postgres
2024-03-03T14:58:25.6937686Z   RAILS_ENV: test
2024-03-03T14:58:25.6938109Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-03T14:58:25.6938558Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-03T14:58:25.6938948Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-03T14:58:25.6939431Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-03T14:58:25.6940006Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-03T14:58:25.6940717Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-03T14:58:25.6941598Z   EVENTS_READ: true
2024-03-03T14:58:25.6941948Z ##[endgroup]
2024-03-03T14:58:31.3223597Z W, [2024-03-03T14:58:31.322034 #2255]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-03T14:58:31.3225321Z W, [2024-03-03T14:58:31.322083 #2255]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-03T14:58:31.3226831Z W, [2024-03-03T14:58:31.322106 #2255]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-03T14:58:31.3229694Z W, [2024-03-03T14:58:31.322141 #2255]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-03T14:58:34.7930217Z W, [2024-03-03T14:58:34.792711 #2255]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-03T14:58:34.7931436Z W, [2024-03-03T14:58:34.792762 #2255]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-03T14:58:34.7932903Z W, [2024-03-03T14:58:34.792792 #2255]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-03T14:58:34.7935013Z W, [2024-03-03T14:58:34.792848 #2255]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-03T14:58:34.8001075Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-03-03T14:58:43.2438586Z 
2024-03-03T14:58:43.2439286Z Randomized with seed 1041
2024-03-03T14:58:45.0351904Z 
2024-03-03T14:58:45.0352966Z Exports::ExportPurchasesCSVService
2024-03-03T14:58:45.0353808Z   #generate_csv_data
2024-03-03T14:58:45.1983100Z     should match the expected content for the csv
2024-03-03T14:58:45.1983984Z 
2024-03-03T14:58:45.1984294Z PartnerRequestRecertificationService
2024-03-03T14:58:45.1985048Z   #call
2024-03-03T14:58:45.1986130Z     when the arguments are correct
2024-03-03T14:58:45.2296011Z       should queue sending the notice to the partner
2024-03-03T14:58:45.2607415Z       should change the partner status to approved
2024-03-03T14:58:45.2877992Z       should have no errors
2024-03-03T14:58:45.2878828Z       but a unexpected error occurred during the save
2024-03-03T14:58:45.2879732Z         for partner approval
2024-03-03T14:58:45.3129255Z           should NOT queue sending the notice to the partner
2024-03-03T14:58:45.3367035Z           should have an error with the raised error
2024-03-03T14:58:45.3616331Z           should not change the partner status to recertification_required
2024-03-03T14:58:45.3617527Z     when the partner is deactivated
2024-03-03T14:58:45.3888352Z       does not send an email
2024-03-03T14:58:45.3889239Z     when the arguments are incorrect
2024-03-03T14:58:45.3890197Z       because the partner has already been requested to recertify
2024-03-03T14:58:45.4184148Z         should return the PartnerRequestRecertificationService object with an error
2024-03-03T14:58:45.4185382Z 
2024-03-03T14:58:45.4186226Z DispersedPastDatesGenerator
2024-03-03T14:58:45.4186918Z   #next
2024-03-03T14:58:45.4237236Z     returns equally dispersed dates between all time ranges
2024-03-03T14:58:45.4238031Z   constants
2024-03-03T14:58:45.4270807Z     has 4 day ranges for generation of past dates
2024-03-03T14:58:45.4271442Z 
2024-03-03T14:58:45.4271672Z OrganizationMailer
2024-03-03T14:58:45.4272558Z   #partner_approval_request
2024-03-03T14:58:45.4566718Z     renders the body with correct text with partner information
2024-03-03T14:58:45.4807188Z     includes a link to the relevant partner
2024-03-03T14:58:45.5039420Z     should be sent to the partner main email with the correct subject line
2024-03-03T14:58:45.5040094Z 
2024-03-03T14:58:45.5040313Z StorageLocation
2024-03-03T14:58:45.5041436Z   versioning
2024-03-03T14:58:45.5077353Z     is expected to be versioned
2024-03-03T14:58:45.5078009Z   Filtering >
2024-03-03T14:58:45.5165157Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-03T14:58:45.6032028Z     ->containing yields only inventories that have that item
2024-03-03T14:58:45.6032839Z   Methods >
2024-03-03T14:58:45.6034746Z     StorageLocation.items_inventoried
2024-03-03T14:58:45.6840581Z       returns a collection of items that are stored within inventories
2024-03-03T14:58:45.6841407Z     decrease_inventory
2024-03-03T14:58:45.8188404Z       decreases inventory quantities from an itemizable object
2024-03-03T14:58:45.8189306Z       when there is insufficient inventory available
2024-03-03T14:58:45.8275137Z         gives informative errors
2024-03-03T14:58:45.8359396Z         does not change inventory quantities if there is an error
2024-03-03T14:58:45.8360425Z     inventory_total_value_in_dollars
2024-03-03T14:58:45.8480259Z       returns 0 when there are no items in this storage location
2024-03-03T14:58:45.8943561Z       returns total value of all items in this storage location
2024-03-03T14:58:45.9309529Z       returns a value including cents if the total isn't an even dollar amount
2024-03-03T14:58:45.9310328Z     size
2024-03-03T14:58:45.9772601Z       returns total quantity of all items in this storage location
2024-03-03T14:58:45.9773522Z     geocode
2024-03-03T14:58:45.9877499Z       adds coordinates to the database
2024-03-03T14:58:45.9878203Z     csv_export_attributes
2024-03-03T14:58:46.0522390Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-03T14:58:46.0523276Z     import_csv
2024-03-03T14:58:46.0643339Z       imports storage locations from a csv file
2024-03-03T14:58:46.0644075Z     item_total
2024-03-03T14:58:46.1029565Z       retrieves the total for a single item
2024-03-03T14:58:46.1030554Z     import_inventory
2024-03-03T14:58:46.4658432Z       imports storage locations from a csv file
2024-03-03T14:58:46.4659566Z     increase_inventory
2024-03-03T14:58:46.4660224Z       when increasing with an inactive item
2024-03-03T14:58:46.5785892Z         re-activates the item as part of the creation process
2024-03-03T14:58:46.6844390Z       when providing a new item that does not yet exist
2024-03-03T14:58:46.6845500Z         creates those new inventory items in the storage location
2024-03-03T14:58:46.6846364Z       With existing inventory
2024-03-03T14:58:46.7899416Z         increases inventory quantities from an itemizable object
2024-03-03T14:58:46.7900343Z   Validations >
2024-03-03T14:58:46.7965888Z     is expected to validate that :name cannot be empty/falsy
2024-03-03T14:58:46.8024731Z     is expected to validate that :address cannot be empty/falsy
2024-03-03T14:58:46.8078810Z     is expected to validate that :organization cannot be empty/falsy
2024-03-03T14:58:46.8079788Z   Callbacks >
2024-03-03T14:58:46.8080304Z     before_destroy
2024-03-03T14:58:46.8428859Z       does not delete storage locations with inventory items on it
2024-03-03T14:58:46.9025065Z       deletes storage locations with no inventory items on it
2024-03-03T14:58:46.9026103Z 
2024-03-03T14:58:46.9026356Z UserInviteService
2024-03-03T14:58:46.9027120Z   with a new user
2024-03-03T14:58:47.1713767Z     should create the user with roles
2024-03-03T14:58:47.1714800Z   with existing user
2024-03-03T14:58:47.1814196Z     should raise an error when reinviting an existing user with the same role
2024-03-03T14:58:47.3805221Z     should add roles to existing user
2024-03-03T14:58:47.3806030Z     with force: true
2024-03-03T14:58:47.4036922Z       should reinvite the user
2024-03-03T14:58:47.4039021Z 
2024-03-03T14:58:47.4039466Z Donation
2024-03-03T14:58:47.4040967Z   behaves like itemizable
2024-03-03T14:58:47.4041742Z     .line_items
2024-03-03T14:58:47.4043007Z       total
2024-03-03T14:58:47.4489848Z         has an item total
2024-03-03T14:58:47.4490578Z       quantities_by_name
2024-03-03T14:58:47.4839251Z         leaves out zero-quantitied items if requested
2024-03-03T14:58:47.5175584Z         returns a hash of items with id, name, and quantity
2024-03-03T14:58:47.5176360Z       sorted
2024-03-03T14:58:47.5673547Z         displays the items, sorted by name
2024-03-03T14:58:47.5674232Z       combine!
2024-03-03T14:58:47.6074195Z         combines multiple line_items with the same item_id into a single record
2024-03-03T14:58:47.6527054Z         incrementally combines line_items on donations that have already been created
2024-03-03T14:58:47.6528038Z     .to_a
2024-03-03T14:58:47.6528739Z       with Flipper flag :deprecate_to_a enabled
2024-03-03T14:58:47.6864301Z         raises an error
2024-03-03T14:58:47.6864994Z       with Flipper flag :deprecate_to_a disabled
2024-03-03T14:58:47.7203224Z         calls line_item_values
2024-03-03T14:58:47.7204040Z   Methods >
2024-03-03T14:58:47.7205237Z     money_raised
2024-03-03T14:58:47.7801977Z       tracks the money raised in a donation
2024-03-03T14:58:47.7802487Z     source_view
2024-03-03T14:58:47.7803103Z       details
2024-03-03T14:58:47.7804200Z         misc
2024-03-03T14:58:47.7885602Z           returns a truncated comment
2024-03-03T14:58:47.7886255Z         donation site
2024-03-03T14:58:47.7997030Z           returns donation_site name (FAILED - 1)
2024-03-03T14:58:47.7997647Z         product drive
2024-03-03T14:58:47.8149875Z           returns product_drive name
2024-03-03T14:58:47.8150624Z         manufacturer
2024-03-03T14:58:47.8293929Z           returns manufacturer name
2024-03-03T14:58:47.8294700Z       from a drive
2024-03-03T14:58:47.8295361Z         participant known
2024-03-03T14:58:47.8296109Z           no contact name
2024-03-03T14:58:47.8470160Z             returns drive display name
2024-03-03T14:58:47.8470994Z           contact name present
2024-03-03T14:58:47.8587700Z             returns participant display name
2024-03-03T14:58:47.8588564Z         unknown participant
2024-03-03T14:58:47.8686557Z           returns drive display name
2024-03-03T14:58:47.8687292Z       not from a drive
2024-03-03T14:58:47.8789451Z         returns source
2024-03-03T14:58:47.8790092Z     remove
2024-03-03T14:58:47.9389877Z       works with either an id or an object
2024-03-03T14:58:48.0010856Z       removes the item from the donation
2024-03-03T14:58:48.0666231Z       fails gracefully if the item doesn't exist
2024-03-03T14:58:48.0666789Z   versioning
2024-03-03T14:58:48.0699867Z     is expected to be versioned
2024-03-03T14:58:48.0700474Z   Scopes >
2024-03-03T14:58:48.0701126Z     during >
2024-03-03T14:58:48.0878532Z       returns all donations created between two dates
2024-03-03T14:58:48.0879133Z     by_source >
2024-03-03T14:58:48.0879701Z       when source is a symbol
2024-03-03T14:58:48.0880805Z         when source is invalid
2024-03-03T14:58:48.1050752Z           does not throw errors, returns no results
2024-03-03T14:58:48.1051611Z         when source is valid
2024-03-03T14:58:48.1216598Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-03T14:58:48.1217617Z       when source is not a symbol
2024-03-03T14:58:48.1218435Z         when source comes from the SOURCES hash
2024-03-03T14:58:48.1383317Z           returns all donations with the provided source
2024-03-03T14:58:48.1384502Z         when source is invalid
2024-03-03T14:58:48.1546846Z           does not throw errors, returns no results
2024-03-03T14:58:48.1547849Z   SOURCES
2024-03-03T14:58:48.1583207Z     the hash values are immutable
2024-03-03T14:58:48.1615572Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-03T14:58:48.1649059Z     the hash is immutable
2024-03-03T14:58:48.1649704Z   Validations >
2024-03-03T14:58:48.1766499Z     requires a donation_site if the source is 'Donation Site'
2024-03-03T14:58:48.1809010Z     must belong to an organization
2024-03-03T14:58:48.1926113Z     requires a product drive participant if the source is 'Product Drive'
2024-03-03T14:58:48.2040685Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-03T14:58:48.2181086Z     is invalid when the line items are invalid
2024-03-03T14:58:48.2246202Z     requires a source from the list of available sources
2024-03-03T14:58:48.2294720Z     ensures that the issued at is no earlier than 2000
2024-03-03T14:58:48.2334715Z     requires an inventory (storage location)
2024-03-03T14:58:48.2335833Z   Associations >
2024-03-03T14:58:48.2336455Z     items >
2024-03-03T14:58:48.2485779Z       has_many
2024-03-03T14:58:48.2486380Z   Callbacks >
2024-03-03T14:58:48.2635295Z     automatically combines duplicate line_item records when they're created
2024-03-03T14:58:48.2757077Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-03T14:58:48.2758229Z 
2024-03-03T14:58:48.2758494Z OrganizationUpdateService
2024-03-03T14:58:48.2759158Z   #update
2024-03-03T14:58:48.2760079Z     when object is invalid
2024-03-03T14:58:48.4484718Z       should not update and return false
2024-03-03T14:58:48.4485477Z     when organization has partners
2024-03-03T14:58:48.4486715Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-03T14:58:48.6733396Z         should allow the disabling of request flags in organization and its partners
2024-03-03T14:58:48.6734892Z       when all of a single partner's request flags will be disabled
2024-03-03T14:58:48.8915714Z         should add an error message to the organization
2024-03-03T14:58:49.1090711Z         should NOT change request flags in organization or its partners
2024-03-03T14:58:49.1091721Z     when object is valid
2024-03-03T14:58:49.2838225Z       should update and return true
2024-03-03T14:58:49.2838892Z   #update_partner_flags
2024-03-03T14:58:49.2839681Z     when request flags have changed
2024-03-03T14:58:49.5061556Z       should update partners when disabling child and individual request flags
2024-03-03T14:58:49.7242899Z       should update partners when disabling quantity-based request flags
2024-03-03T14:58:49.9348044Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-03T14:58:49.9348858Z     when request flags haven't changed
2024-03-03T14:58:50.1487140Z       should not update partners
2024-03-03T14:58:50.1488060Z 
2024-03-03T14:58:50.1488427Z Exports::ExportDistributionsCSVService
2024-03-03T14:58:50.1489267Z   #generate_csv_data
2024-03-03T14:58:50.3239613Z     should match the expected content for the csv
2024-03-03T14:58:50.3240480Z     when a new item is added
2024-03-03T14:58:50.4998002Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-03T14:58:50.6789506Z       should add it to the end of the row
2024-03-03T14:58:50.6790505Z     when there are no distributions but the report is requested
2024-03-03T14:58:50.8423825Z       returns a csv with only headers and no rows
2024-03-03T14:58:50.8424550Z 
2024-03-03T14:58:50.8424856Z TextInterpolatorService
2024-03-03T14:58:50.8425627Z   #call
2024-03-03T14:58:50.8462757Z     returns interpolated text
2024-03-03T14:58:50.8463504Z     when text is nil
2024-03-03T14:58:50.8497832Z       returns nil
2024-03-03T14:58:50.8498480Z     when interpolations are nil
2024-03-03T14:58:50.8529714Z       returns text
2024-03-03T14:58:50.8530903Z     when interpolations are empty
2024-03-03T14:58:50.8564460Z       returns text
2024-03-03T14:58:50.8565143Z     when interpolations are not present
2024-03-03T14:58:50.8601424Z       returns text
2024-03-03T14:58:50.8602071Z     when text is empty
2024-03-03T14:58:50.8633572Z       returns empty string
2024-03-03T14:58:50.8634335Z 
2024-03-03T14:58:50.8634890Z PartnerCreateService
2024-03-03T14:58:50.8635982Z   #call
2024-03-03T14:58:51.0407358Z     should return an instance of itself
2024-03-03T14:58:51.0408368Z     when the arguments are incorrect
2024-03-03T14:58:51.0409146Z       beacuse the partner_attrs are invalid
2024-03-03T14:58:51.2114393Z         should contain errors related to invalid partner attributes
2024-03-03T14:58:51.2115767Z     when the arguments are valid
2024-03-03T14:58:51.3901912Z       should create the associated partner profile data
2024-03-03T14:58:51.5722169Z       should create a new partner record with the organization provided
2024-03-03T14:58:51.5723324Z       but there was an unexpected issue with saving the
2024-03-03T14:58:51.5724224Z         Partners::Profile record
2024-03-03T14:58:51.7452105Z           should not create the partner record for the organization
2024-03-03T14:58:51.9185661Z           should not create the associated partner records
2024-03-03T14:58:51.9186486Z         Partner record
2024-03-03T14:58:52.0958989Z           should not create the partner record for the organization
2024-03-03T14:58:52.2775952Z           should not create the associated partner records
2024-03-03T14:58:52.2776806Z 
2024-03-03T14:58:52.2777366Z Reports::AcquisitionReportService
2024-03-03T14:58:52.2778274Z   acquisition report
2024-03-03T14:58:53.1510878Z     should return the proper results on #report
2024-03-03T14:58:53.1511492Z 
2024-03-03T14:58:53.1512065Z Reports::SummaryReportService
2024-03-03T14:58:53.1512734Z   #report
2024-03-03T14:58:53.6007027Z     should report negative values
2024-03-03T14:58:53.7801385Z     should report zero values
2024-03-03T14:58:54.2254650Z     should report positive values
2024-03-03T14:58:54.2255241Z 
2024-03-03T14:58:54.2255533Z Deadlinable
2024-03-03T14:58:54.2256497Z   validations
2024-03-03T14:58:54.2339265Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-03T14:58:54.2411358Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-03T14:58:54.2454594Z     validates that reminder day is not the same as deadline day
2024-03-03T14:58:54.2455702Z 
2024-03-03T14:58:54.2456042Z Reports::PartnerInfoReportService
2024-03-03T14:58:54.2456885Z   #report
2024-03-03T14:58:54.4702164Z     should report normal values
2024-03-03T14:58:54.6341262Z     should report zero values
2024-03-03T14:58:54.6342855Z 
2024-03-03T14:58:54.6343168Z Organization
2024-03-03T14:58:54.6345789Z   valid_items
2024-03-03T14:58:54.8172791Z     returns an array of item partner keys
2024-03-03T14:58:54.9940510Z     only shows active valid items
2024-03-03T14:58:54.9941522Z     with invisible items
2024-03-03T14:58:55.0222388Z       only shows active and visible items
2024-03-03T14:58:55.0223264Z   address
2024-03-03T14:58:55.0258115Z     returns an empty string when the org has no address components
2024-03-03T14:58:55.0290439Z     does not add a trailing space when the zip code is missing
2024-03-03T14:58:55.0325789Z     does not add any separators before the city when street is missing
2024-03-03T14:58:55.0359089Z     does not add any separators after street when city, state, and zip are missing
2024-03-03T14:58:55.0390745Z     correctly formats an address string with commas and spaces
2024-03-03T14:58:55.0391672Z   Associations >
2024-03-03T14:58:55.0439197Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-03T14:58:55.0473471Z     is expected to have many users through roles
2024-03-03T14:58:55.0523618Z     is expected to have many item_categories
2024-03-03T14:58:55.0524639Z     distributions
2024-03-03T14:58:55.0525287Z       upcoming
2024-03-03T14:58:55.1258848Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-03T14:58:55.1259981Z     barcode_items
2024-03-03T14:58:55.3263711Z       returns only this organization's barcodes, no globals
2024-03-03T14:58:55.3264830Z       .all
2024-03-03T14:58:55.5099098Z         includes global barcode items also
2024-03-03T14:58:55.5099885Z     items
2024-03-03T14:58:55.5100777Z       .during.bottom
2024-03-03T14:58:57.6174763Z         return just 3 elements
2024-03-03T14:58:59.5547097Z         return 3 least used items
2024-03-03T14:58:59.5547850Z       .during.top
2024-03-03T14:59:01.5179809Z         return just 3 elements
2024-03-03T14:59:03.4793931Z         return 3 most used items
2024-03-03T14:59:03.4795149Z       .during
2024-03-03T14:59:05.4262851Z         return ranking of all items
2024-03-03T14:59:05.4263726Z       .other
2024-03-03T14:59:07.3503723Z         returns all items for this organization designated 'other'
2024-03-03T14:59:07.3504693Z     users
2024-03-03T14:59:07.3505697Z       when a organizaton has a user that has two roles
2024-03-03T14:59:07.5419470Z         should returns users without duplications
2024-03-03T14:59:07.5420598Z   validations
2024-03-03T14:59:07.5553928Z     validates that at least one distribution type is enabled
2024-03-03T14:59:07.7380119Z     validates that short names are unique
2024-03-03T14:59:07.7446735Z     validates that attachment file size is not higher than 1 MB
2024-03-03T14:59:07.7517031Z     validates that attachments are png or jpgs
2024-03-03T14:59:07.7517807Z   reminder_day
2024-03-03T14:59:07.7626577Z     can only contain numbers 1-28
2024-03-03T14:59:07.7627339Z   versioning
2024-03-03T14:59:07.7662430Z     is expected to be versioned
2024-03-03T14:59:07.7663192Z   .seed_items
2024-03-03T14:59:07.7663872Z     when no organization is provided
2024-03-03T14:59:08.3850019Z       updates all organizations
2024-03-03T14:59:08.3850869Z     when provided with an organization to seed
2024-03-03T14:59:08.6951726Z       loads the base items into Item records
2024-03-03T14:59:08.6952621Z   #assign_attributes_from_account_request
2024-03-03T14:59:08.7114305Z     should assign the proper attributes to the organization
2024-03-03T14:59:08.7115312Z   from_email
2024-03-03T14:59:08.8944666Z     returns admin email when it's empty
2024-03-03T14:59:09.0708425Z     returns email when present
2024-03-03T14:59:09.2585227Z     returns admin email when it's empty space
2024-03-03T14:59:09.4545211Z     returns admin email when not present
2024-03-03T14:59:09.4545929Z   earliest reporting year
2024-03-03T14:59:09.6949859Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-03T14:59:09.8661683Z     is the organization created year if no associated data
2024-03-03T14:59:09.8662581Z   #short_name
2024-03-03T14:59:09.8733485Z     can only contain valid characters
2024-03-03T14:59:09.8734300Z   #seed_items
2024-03-03T14:59:10.0557074Z     allows a single base item to be seeded
2024-03-03T14:59:10.2343172Z     allows a collection of items to be seeded
2024-03-03T14:59:10.2344201Z     when given an item name that already exists, but with an 'other' partner key
2024-03-03T14:59:10.4184758Z       updates the old item to use the new base item as its base
2024-03-03T14:59:10.4185388Z     when given an item that already exists
2024-03-03T14:59:10.5939996Z       gracefully skips the item
2024-03-03T14:59:10.5940995Z   default storage location
2024-03-03T14:59:10.6022565Z     associates the default storage location with a storage location
2024-03-03T14:59:10.6058215Z     returns nil when not set
2024-03-03T14:59:10.6059086Z   geocode
2024-03-03T14:59:10.7757366Z     adds coordinates to the database
2024-03-03T14:59:10.7758247Z   deadline_day
2024-03-03T14:59:10.7859297Z     can only contain numbers 1-28
2024-03-03T14:59:10.7859805Z   total_inventory
2024-03-03T14:59:10.9562043Z     returns 0 if there is nothing
2024-03-03T14:59:11.1912431Z     returns a sum total of all inventory at all storage locations
2024-03-03T14:59:11.1914289Z   #ordered_requests
2024-03-03T14:59:11.3927588Z     puts active requests before fulfilled requests
2024-03-03T14:59:11.3928522Z     ordering of requests with matching status
2024-03-03T14:59:11.5814156Z       puts the most recently updated request before older requests
2024-03-03T14:59:11.5815072Z   after_create
2024-03-03T14:59:11.6015010Z     should update the state of the account request
2024-03-03T14:59:11.6016111Z   is_active
2024-03-03T14:59:11.9635100Z     returns active organizations
2024-03-03T14:59:11.9635843Z 
2024-03-03T14:59:11.9636139Z DonationDestroyService
2024-03-03T14:59:11.9637038Z   #call
2024-03-03T14:59:11.9638728Z     when the organization_id matches no Organization
2024-03-03T14:59:11.9679613Z       to not be a success
2024-03-03T14:59:11.9680334Z     when the donation destroy fails
2024-03-03T14:59:11.9749641Z       to not be a success
2024-03-03T14:59:11.9750450Z     when the donation succesfully gets destroyed
2024-03-03T14:59:11.9978896Z       to be a success
2024-03-03T14:59:11.9980233Z     when storage_location fails to decrease the inventory of the donation
2024-03-03T14:59:12.0032165Z       to not be a success
2024-03-03T14:59:12.0033134Z     when the donation_id matches no Donation owned by the organization
2024-03-03T14:59:12.0070431Z       to not be a success
2024-03-03T14:59:12.0070895Z 
2024-03-03T14:59:12.0071278Z Exports::ExportRequestService
2024-03-03T14:59:12.0072497Z   .generate_csv_data
2024-03-03T14:59:12.2072864Z     includes rows for each request with correct columns of item quantity
2024-03-03T14:59:12.4090534Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-03T14:59:12.4091648Z 
2024-03-03T14:59:12.4091898Z Vendor
2024-03-03T14:59:12.4092446Z   behaves like provideable
2024-03-03T14:59:12.4093180Z     geocode
2024-03-03T14:59:12.4153318Z       adds coordinates to the database
2024-03-03T14:59:12.4154147Z     import_csv
2024-03-03T14:59:12.5937469Z       imports from a csv file
2024-03-03T14:59:12.5938002Z     Validations
2024-03-03T14:59:12.5975936Z       is invalid without an organization
2024-03-03T14:59:12.6035831Z       is invalid unless it has either a contact name or a business name
2024-03-03T14:59:12.6036821Z   Methods
2024-03-03T14:59:12.6037347Z     volume
2024-03-03T14:59:12.6738639Z       retrieves the amount of product that has been bought from this vendor
2024-03-03T14:59:12.6739688Z   versioning
2024-03-03T14:59:12.6775665Z     is expected to be versioned
2024-03-03T14:59:12.6776185Z 
2024-03-03T14:59:12.6776417Z PartnerMailerJob
2024-03-03T14:59:12.6777263Z   conditionally sending the emails
2024-03-03T14:59:12.8701854Z     does not send mail for past distributions
2024-03-03T14:59:13.1657394Z     sends mail for future distributions immediately
2024-03-03T14:59:13.1658485Z     when the distribution is for a deactivated partner
2024-03-03T14:59:13.3713457Z       does not send the email
2024-03-03T14:59:13.3714026Z 
2024-03-03T14:59:13.3714504Z RequestsConfirmationMailer
2024-03-03T14:59:13.4039191Z   pairs the right quantities with the right item names
2024-03-03T14:59:13.4214726Z   handles duplicates
2024-03-03T14:59:13.4215629Z   #confirmation_email
2024-03-03T14:59:13.4386228Z     renders the body
2024-03-03T14:59:13.4511715Z     renders the headers
2024-03-03T14:59:13.4512307Z 
2024-03-03T14:59:13.4512512Z CustomDeviseMailer
2024-03-03T14:59:13.4513510Z   #invitation_instructions
2024-03-03T14:59:13.4514777Z     when user is invited
2024-03-03T14:59:13.4701483Z       has invite expiration message
2024-03-03T14:59:13.4880738Z       invites to user
2024-03-03T14:59:13.4881670Z     when other partner users invited
2024-03-03T14:59:13.5284762Z       invites to partner user
2024-03-03T14:59:13.5285575Z     when partner is invited
2024-03-03T14:59:13.5701105Z       invites to primary user
2024-03-03T14:59:13.5701780Z 
2024-03-03T14:59:13.5702523Z DistributionDestroyService
2024-03-03T14:59:13.5703193Z   #call
2024-03-03T14:59:13.5704316Z     when the distribution_id matches no Distribution
2024-03-03T14:59:13.5742349Z       to not be a success
2024-03-03T14:59:13.5743038Z     when the distribution_id does match a Distribution
2024-03-03T14:59:13.5743926Z       and the operations succeed
2024-03-03T14:59:13.7849117Z         should be successful
2024-03-03T14:59:13.9884792Z         should increase the inventory of the storage location
2024-03-03T14:59:14.2035905Z         should destroy the Distribution
2024-03-03T14:59:14.2037056Z       and the increase inventory operations fails
2024-03-03T14:59:14.3973740Z         should not delete the Distribution
2024-03-03T14:59:14.5959773Z         should not be successful and have the error message
2024-03-03T14:59:14.5960596Z       and the destroy! operation fails
2024-03-03T14:59:14.8055125Z         should not delete the Distribution
2024-03-03T14:59:15.0024278Z         should not be successful and have the error message
2024-03-03T14:59:15.0024947Z 
2024-03-03T14:59:15.0025235Z Reports::ChildrenServedReportService
2024-03-03T14:59:15.0026472Z   #report
2024-03-03T14:59:15.4938254Z     should work with no distribution_quantity
2024-03-03T14:59:16.1426016Z     should report normal values
2024-03-03T14:59:16.3227190Z     should report zero values
2024-03-03T14:59:16.3227821Z 
2024-03-03T14:59:16.3228159Z ProductDrive
2024-03-03T14:59:16.5593265Z   calculates donation quantity by date
2024-03-03T14:59:16.6982812Z   calculates donation quantity
2024-03-03T14:59:16.8427678Z   calculates in-kind value
2024-03-03T14:59:17.0664749Z   calculates and returns all donated organization item quantities by name and date
2024-03-03T14:59:17.5673816Z   calculates and returns all donated organization item quantities by category and date
2024-03-03T14:59:17.5675069Z   donation_source_view
2024-03-03T14:59:17.7211753Z     returns formatted text
2024-03-03T14:59:17.7212470Z   scopes
2024-03-03T14:59:17.7213223Z     .by_name
2024-03-03T14:59:17.8680705Z       does not return other_name
2024-03-03T14:59:18.0116940Z       returns the product_drive with name some_name
2024-03-03T14:59:18.0117892Z     .within_date_range
2024-03-03T14:59:18.1536693Z       returns the product drive 1
2024-03-03T14:59:18.2969929Z       does not include product drive 2
2024-03-03T14:59:18.2970690Z     .by_item_category_id
2024-03-03T14:59:18.6260823Z       returns the product_drive with name some_name
2024-03-03T14:59:18.9623822Z       does not return other_name
2024-03-03T14:59:18.9624719Z   distinct_items
2024-03-03T14:59:19.3137219Z     counts the distinct items correctly by given date
2024-03-03T14:59:19.6551337Z     counts the distinct items correctly in overlapping donations
2024-03-03T14:59:19.9877173Z     doesn't double_count the items if there are two donations for the same item
2024-03-03T14:59:20.3338038Z     counts the items correctly for 1 donation with multiple items
2024-03-03T14:59:20.6955568Z     counts the distinct items correctly by given category
2024-03-03T14:59:20.6956864Z   versioning
2024-03-03T14:59:20.8382007Z     is expected to be versioned
2024-03-03T14:59:20.8382815Z   validations
2024-03-03T14:59:20.9800075Z     is expected not to be valid
2024-03-03T14:59:21.1220359Z     is expected not to be valid
2024-03-03T14:59:21.2593236Z     is expected not to be valid
2024-03-03T14:59:21.2593973Z   .search_date_range
2024-03-03T14:59:21.3989126Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-03T14:59:21.3990316Z   associations
2024-03-03T14:59:21.4877669Z     has_many product_drive_participants through donations
2024-03-03T14:59:21.5751836Z     has_many donations
2024-03-03T14:59:21.5752281Z 
2024-03-03T14:59:21.5752510Z ProductDriveHelper
2024-03-03T14:59:21.5754999Z   #is_virtual
2024-03-03T14:59:21.5756541Z     when the product drive wasn't held virtually
2024-03-03T14:59:21.5830958Z       is expected to eq "No"
2024-03-03T14:59:21.5832273Z     when a product drive was not provided
2024-03-03T14:59:21.5875018Z       without argument
2024-03-03T14:59:21.5916363Z       with blank argument
2024-03-03T14:59:21.5917171Z     when the product drive was held virtually
2024-03-03T14:59:21.5968884Z       is expected to eq "Yes"
2024-03-03T14:59:21.5969810Z 
2024-03-03T14:59:21.5970063Z Question
2024-03-03T14:59:21.5971666Z   versioning
2024-03-03T14:59:21.6055422Z     is expected to be versioned
2024-03-03T14:59:21.6056088Z   scope for_partners
2024-03-03T14:59:21.6350565Z     should filter out questions that aren't meant for partners
2024-03-03T14:59:21.6351510Z   validations
2024-03-03T14:59:21.6410723Z     is expected to validate that :answer cannot be empty/falsy
2024-03-03T14:59:21.6471013Z     is expected to validate that :title cannot be empty/falsy
2024-03-03T14:59:21.6560941Z     question for_banks and for_partners attributes can't both be false
2024-03-03T14:59:21.6561838Z   scope for_banks
2024-03-03T14:59:21.6795697Z     should filter out questions that aren't meant for banks
2024-03-03T14:59:21.6796549Z   punctuate
2024-03-03T14:59:21.6837166Z     should punctuate each string in a given array
2024-03-03T14:59:21.6837903Z   remove_redundant_error
2024-03-03T14:59:21.6877235Z     should return an array with only one error message related to the checkboxes.
2024-03-03T14:59:21.6877975Z 
2024-03-03T14:59:21.6878348Z Partners::Child
2024-03-03T14:59:21.6879021Z   associations
2024-03-03T14:59:21.7013875Z     is expected to have many child_item_requests dependent => destroy
2024-03-03T14:59:21.7055783Z     is expected to belong to family required: true
2024-03-03T14:59:21.7056598Z   versioning
2024-03-03T14:59:21.7093083Z     is expected to be versioned
2024-03-03T14:59:21.7093972Z   #display_name
2024-03-03T14:59:21.7558070Z     should return a child's first and last name
2024-03-03T14:59:21.7558801Z 
2024-03-03T14:59:21.7559052Z AllocateKitInventoryService
2024-03-03T14:59:21.7559796Z   #error
2024-03-03T14:59:21.7560968Z     when the Store location organization doesn't match
2024-03-03T14:59:21.9771398Z       returns error
2024-03-03T14:59:21.9772043Z   #allocate
2024-03-03T14:59:21.9772922Z     when inventory items are available
2024-03-03T14:59:22.2549901Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-03T14:59:22.2551505Z       when there are more then one line items
2024-03-03T14:59:22.2552357Z         when same kit is allocated multiple times
2024-03-03T14:59:22.5543582Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-03T14:59:22.5545009Z         when there kit is allocated once
2024-03-03T14:59:22.8325861Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-03T14:59:22.8326812Z       When kit is allocated more then once
2024-03-03T14:59:23.1320139Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-03T14:59:23.1321043Z     when more than one kit is requested
2024-03-03T14:59:23.1321818Z       but one of the items is out of stock
2024-03-03T14:59:23.3944962Z         returns error and does not change kit or item quantity
2024-03-03T14:59:23.3945902Z 
2024-03-03T14:59:23.3946273Z Kit
2024-03-03T14:59:23.6006882Z   deactivate and reactivate
2024-03-03T14:59:23.6007619Z   Validations >
2024-03-03T14:59:23.6183419Z     must belong to an organization
2024-03-03T14:59:23.6358654Z     can't have negative value
2024-03-03T14:59:23.6513329Z     requires a name
2024-03-03T14:59:23.6678658Z     requires at least one item
2024-03-03T14:59:23.6833586Z     is valid as built
2024-03-03T14:59:23.8785546Z     requires a unique name
2024-03-03T14:59:23.8786301Z   Filtering >
2024-03-03T14:59:24.4280147Z     ->alphabetized retrieves items in alphabetical order
2024-03-03T14:59:24.4316629Z     can filter
2024-03-03T14:59:24.4317454Z     ->by_partner_key
2024-03-03T14:59:24.6591609Z       shows the kits for a particular item
2024-03-03T14:59:24.6592483Z   #can_deactivate?
2024-03-03T14:59:24.6593686Z     with inventory items
2024-03-03T14:59:24.8768219Z       should return false
2024-03-03T14:59:24.8768988Z     without inventory items
2024-03-03T14:59:25.0655506Z       should return true
2024-03-03T14:59:25.0656229Z   versioning
2024-03-03T14:59:25.0694608Z     is expected to be versioned
2024-03-03T14:59:25.0695256Z   Value >
2024-03-03T14:59:25.0848526Z     converts cents to dollars
2024-03-03T14:59:25.1004326Z     converts dollars to cents
2024-03-03T14:59:25.1004972Z     .value_per_itemizable
2024-03-03T14:59:25.1384360Z       calculates values from associated items
2024-03-03T14:59:25.1385004Z 
2024-03-03T14:59:25.1385325Z ItemizableUpdateService
2024-03-03T14:59:25.1385959Z   increases
2024-03-03T14:59:25.2811397Z     should update quantity in same storage location
2024-03-03T14:59:25.4194099Z     should update quantity in different locations
2024-03-03T14:59:25.4195285Z   decreases
2024-03-03T14:59:25.5671494Z     should update quantity in different locations
2024-03-03T14:59:25.7113042Z     should update quantity in same storage location
2024-03-03T14:59:25.7113813Z 
2024-03-03T14:59:25.7114134Z Partners::RequestCreateService
2024-03-03T14:59:25.7115346Z   #call
2024-03-03T14:59:25.7116004Z     when the arguments are correct
2024-03-03T14:59:25.7555422Z       should create a Request record
2024-03-03T14:59:25.7900761Z       should have no errors
2024-03-03T14:59:25.8264952Z       should notify the Partner via email
2024-03-03T14:59:25.8265700Z       but a unexpected error occured during the save
2024-03-03T14:59:25.8266597Z         for the Request record
2024-03-03T14:59:25.8617600Z           should have an error with the raised error
2024-03-03T14:59:25.8949681Z           should NOT notify the Partner via email
2024-03-03T14:59:25.9287170Z           should NOT create a Request record
2024-03-03T14:59:25.9289944Z     when the arguments are incorrect
2024-03-03T14:59:25.9291097Z       because no item_requests_attributes and comments were defined
2024-03-03T14:59:25.9542231Z         should return the Request object with an error
2024-03-03T14:59:25.9543227Z       because a unrecogonized item_id was provided
2024-03-03T14:59:25.9828522Z         should return the Request object with an error
2024-03-03T14:59:25.9829436Z 
2024-03-03T14:59:25.9829742Z ProfileUpdateService
2024-03-03T14:59:25.9830662Z   #update
2024-03-03T14:59:26.0068259Z     updates the profile with the filtered and prepared params
2024-03-03T14:59:26.0068818Z 
2024-03-03T14:59:26.0068954Z AddRoleService
2024-03-03T14:59:26.0069760Z   #call
2024-03-03T14:59:26.0070813Z     when the role already exists
2024-03-03T14:59:26.1973814Z       should raise an error
2024-03-03T14:59:26.3852951Z       should raise an error for super admin
2024-03-03T14:59:26.3853728Z     when the role does not yet exist
2024-03-03T14:59:26.5805860Z       should add the user role when asked to add admin
2024-03-03T14:59:26.7736388Z       works with super admin
2024-03-03T14:59:26.9807504Z       works with a partner
2024-03-03T14:59:27.1675790Z       should add the role
2024-03-03T14:59:27.1676748Z 
2024-03-03T14:59:27.1677191Z ItemsOutTotalQuery
2024-03-03T14:59:27.1678204Z   items_out_total_query
2024-03-03T14:59:27.2903936Z     returns a sum total of all out-flows
2024-03-03T14:59:27.2904638Z 
2024-03-03T14:59:27.2905186Z PartnerGroup
2024-03-03T14:59:27.2906151Z   associations
2024-03-03T14:59:27.2990007Z     is expected to have many partners
2024-03-03T14:59:27.3042170Z     is expected to belong to organization required: true
2024-03-03T14:59:27.3099701Z     is expected to have and belong to many item_categories
2024-03-03T14:59:27.3100479Z   DB constraints
2024-03-03T14:59:27.3101099Z     reminder_day <= 28
2024-03-03T14:59:27.3174903Z       raises error if unmet
2024-03-03T14:59:27.3175771Z     deadline_day <= 28
2024-03-03T14:59:27.3244618Z       raises error if unmet
2024-03-03T14:59:27.3245316Z     send_reminders IS NOT NULL
2024-03-03T14:59:27.3311329Z       raises error if unmet
2024-03-03T14:59:27.3312040Z   versioning
2024-03-03T14:59:27.3345473Z     is expected to be versioned
2024-03-03T14:59:27.3347945Z   Validations >
2024-03-03T14:59:27.3389514Z     must belong to an organization
2024-03-03T14:59:27.3621995Z     does not require a unique name between organizations
2024-03-03T14:59:27.3708253Z     requires a unique name within an organization
2024-03-03T14:59:27.3709165Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-03T14:59:27.3756540Z       should not be valid
2024-03-03T14:59:27.3757070Z 
2024-03-03T14:59:27.3757389Z ServiceObjectErrorsMixin
2024-03-03T14:59:27.3758063Z   self.included
2024-03-03T14:59:27.3804245Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-03T14:59:27.3805103Z 
2024-03-03T14:59:27.3805451Z ApplicationHelper
2024-03-03T14:59:27.3807073Z   step_container_helper
2024-03-03T14:59:27.3808228Z     active_index is equal to index
2024-03-03T14:59:27.3854823Z       returns active
2024-03-03T14:59:27.3855403Z     active_index is less than index
2024-03-03T14:59:27.3896059Z       returns empty string
2024-03-03T14:59:27.3898486Z     active_index is greater than index
2024-03-03T14:59:27.3939329Z       returns done
2024-03-03T14:59:27.3940239Z   flash_class
2024-03-03T14:59:27.3982892Z     returns appropriate class for alert
2024-03-03T14:59:27.4024236Z     returns appropriate class for error
2024-03-03T14:59:27.4065480Z     returns appropriate class for notice
2024-03-03T14:59:27.4105191Z     returns appropriate class for success
2024-03-03T14:59:27.4105899Z   default_title_content
2024-03-03T14:59:27.4106896Z     Organization does not exist
2024-03-03T14:59:27.4151854Z       returns a default name
2024-03-03T14:59:27.4152580Z     Organization exists
2024-03-03T14:59:27.5842175Z       returns the organization's name
2024-03-03T14:59:27.5842925Z   confirm_delete_msg
2024-03-03T14:59:27.5886003Z     subs in string
2024-03-03T14:59:27.5886546Z   active_class
2024-03-03T14:59:27.5929287Z     Returns the controller name
2024-03-03T14:59:27.5930254Z   can_administrate?
2024-03-03T14:59:27.5931103Z     User is org admin and part of org
2024-03-03T14:59:27.6135649Z       can administrate
2024-03-03T14:59:27.6136448Z     User is part of org but not org admin
2024-03-03T14:59:27.6266947Z       cannot administrate
2024-03-03T14:59:27.6267755Z     User is org admin and not part of org
2024-03-03T14:59:27.8200554Z       cannot administrate
2024-03-03T14:59:27.8201307Z 
2024-03-03T14:59:27.8201641Z DeadlineService
2024-03-03T14:59:27.8202807Z   #next_deadline
2024-03-03T14:59:27.8203922Z     do from the partner group
2024-03-03T14:59:27.8204939Z       when the deadline is before today
2024-03-03T14:59:27.8265093Z         returns a date in the next month
2024-03-03T14:59:27.8265891Z       when the deadline is today
2024-03-03T14:59:27.8318456Z         returns a date in the next month
2024-03-03T14:59:27.8319314Z       when the deadline is after today
2024-03-03T14:59:27.8373108Z         returns a date within the current month
2024-03-03T14:59:27.8374380Z     from the organization
2024-03-03T14:59:27.8375279Z       when the deadline is today
2024-03-03T14:59:27.8426118Z         returns a date in the next month
2024-03-03T14:59:27.8427426Z       when the deadline is after today
2024-03-03T14:59:27.8477408Z         returns a date within the current month
2024-03-03T14:59:27.8478237Z       when the deadline is before today
2024-03-03T14:59:27.8529467Z         returns a date in the next month
2024-03-03T14:59:27.8530837Z 
2024-03-03T14:59:27.8531200Z ItemsController
2024-03-03T14:59:27.8532422Z   While not signed in
2024-03-03T14:59:27.8620258Z     redirects the user to the sign-in page for CRUD actions
2024-03-03T14:59:27.8621142Z   While signed in
2024-03-03T14:59:27.8621916Z     GET #index
2024-03-03T14:59:27.8842985Z       returns http success
2024-03-03T14:59:27.8843914Z     PATCH #remove_category
2024-03-03T14:59:28.0867669Z       should remove an item's category
2024-03-03T14:59:28.2810775Z       should redirect to the previous category page
2024-03-03T14:59:28.2811591Z     POST #create
2024-03-03T14:59:28.2812439Z       with valid params
2024-03-03T14:59:28.2991004Z         should redirect to the item page
2024-03-03T14:59:28.3160200Z         should accept params with dollar signs, periods, and commas
2024-03-03T14:59:28.3339452Z         should create an item
2024-03-03T14:59:28.3339996Z       with invalid params
2024-03-03T14:59:28.3475041Z         should show an error
2024-03-03T14:59:28.3475955Z     DELETE #destroy
2024-03-03T14:59:28.3702376Z       redirects to #index
2024-03-03T14:59:28.3702933Z     PATCH #restore
2024-03-03T14:59:28.3703939Z       with an active item
2024-03-03T14:59:28.3900626Z         does nothing
2024-03-03T14:59:28.3901600Z       with a soft-deleted item
2024-03-03T14:59:28.4102675Z         re-activates the item
2024-03-03T14:59:28.4103477Z       with another organizations item
2024-03-03T14:59:28.5975765Z         does nothing
2024-03-03T14:59:28.5976506Z     PUT #update
2024-03-03T14:59:28.5977092Z       visible
2024-03-03T14:59:28.6173917Z         should update visible_to_partners to true
2024-03-03T14:59:28.6174709Z       invisible
2024-03-03T14:59:28.6366749Z         should update visible_to_partners to false
2024-03-03T14:59:28.6368169Z     Looking at a different organization
2024-03-03T14:59:28.8096723Z       redirects the user to the sign-in page for CRUD actions
2024-03-03T14:59:28.8097793Z     GET #edit
2024-03-03T14:59:28.8258325Z       returns http success
2024-03-03T14:59:28.8259032Z     GET #show
2024-03-03T14:59:28.8454907Z       returns http success
2024-03-03T14:59:28.8455705Z     GET #new
2024-03-03T14:59:28.8572057Z       returns http success
2024-03-03T14:59:28.8572762Z 
2024-03-03T14:59:28.8573159Z Partners::ItemRequest
2024-03-03T14:59:28.8574188Z   associations
2024-03-03T14:59:28.8619402Z     is expected to belong to request class_name => ::Request required: true
2024-03-03T14:59:28.8654391Z     is expected to have many child_item_requests dependent => destroy
2024-03-03T14:59:28.8687344Z     is expected to have many children through child_item_requests
2024-03-03T14:59:28.8688399Z   validations
2024-03-03T14:59:28.8747864Z     is expected to validate that :name cannot be empty/falsy
2024-03-03T14:59:28.8806604Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-03T14:59:28.8863976Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-03T14:59:28.8921844Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-03T14:59:28.8922952Z   versioning
2024-03-03T14:59:28.8958170Z     is expected to be versioned
2024-03-03T14:59:28.8958864Z 
2024-03-03T14:59:28.8959230Z DistributionContentChangeService
2024-03-03T14:59:28.8960441Z   #any_change?
2024-03-03T14:59:28.8961399Z     when there are line items updated
2024-03-03T14:59:28.8994288Z       returns true
2024-03-03T14:59:28.8997396Z     when there are line items removed and updated
2024-03-03T14:59:28.9030645Z       returns true
2024-03-03T14:59:28.9031281Z     when there are no changes in the line items
2024-03-03T14:59:28.9065486Z       returns true
2024-03-03T14:59:28.9066083Z     when there are line items removed
2024-03-03T14:59:28.9099117Z       returns true
2024-03-03T14:59:28.9099896Z   #changes
2024-03-03T14:59:28.9100544Z     when there are line items removed and updated
2024-03-03T14:59:28.9135779Z       returns true
2024-03-03T14:59:28.9137499Z 
2024-03-03T14:59:28.9137729Z Distribution
2024-03-03T14:59:28.9139401Z   CSV export >
2024-03-03T14:59:28.9140062Z     for_csv_export >
2024-03-03T14:59:29.2310508Z       filters only to the given organization
2024-03-03T14:59:29.5517707Z       filters only to the given issue time range
2024-03-03T14:59:29.8740100Z       filters only to the given filter
2024-03-03T14:59:29.8741152Z     csv_export_attributes
2024-03-03T14:59:30.2693504Z       returns the set of attributes which define a row in case of distribution export
2024-03-03T14:59:30.2694796Z   Validations >
2024-03-03T14:59:30.2745305Z     requires a partner
2024-03-03T14:59:30.2800391Z     ensures that the issued at is no earlier than 2000
2024-03-03T14:59:30.2848764Z     must belong to an organization
2024-03-03T14:59:30.3237494Z     ensures the associated line_items are valid
2024-03-03T14:59:30.3284833Z     requires a storage location
2024-03-03T14:59:30.3490448Z     ensures that any included items are found in the associated storage location
2024-03-03T14:59:30.3643270Z     ensures the associated line_items are invalid with a nil quantity
2024-03-03T14:59:30.3644292Z     ensures the associated line_items are invalid with a zero quantity
2024-03-03T14:59:30.3645117Z     when delivery method is other then shipped
2024-03-03T14:59:30.3908462Z       allows to save distribution
2024-03-03T14:59:30.3909036Z     when delivery method is shipped
2024-03-03T14:59:30.3909733Z       shipping cost is negative
2024-03-03T14:59:30.3968084Z         will not allow to save distribution
2024-03-03T14:59:30.3968699Z       shipping cost is none negative
2024-03-03T14:59:30.4226120Z         allows to save distribution
2024-03-03T14:59:30.4226766Z   behaves like itemizable
2024-03-03T14:59:30.4227723Z     .to_a
2024-03-03T14:59:30.4228573Z       with Flipper flag :deprecate_to_a disabled
2024-03-03T14:59:30.4557333Z         calls line_item_values
2024-03-03T14:59:30.4557929Z       with Flipper flag :deprecate_to_a enabled
2024-03-03T14:59:30.4878118Z         raises an error
2024-03-03T14:59:30.4878646Z     .line_items
2024-03-03T14:59:30.4879722Z       quantities_by_name
2024-03-03T14:59:30.5801110Z         returns a hash of items with id, name, and quantity
2024-03-03T14:59:30.6647651Z         leaves out zero-quantitied items if requested
2024-03-03T14:59:30.6648286Z       combine!
2024-03-03T14:59:30.7077430Z         combines multiple line_items with the same item_id into a single record
2024-03-03T14:59:30.7615524Z         incrementally combines line_items on donations that have already been created
2024-03-03T14:59:30.7616347Z       sorted
2024-03-03T14:59:30.8807220Z         displays the items, sorted by name
2024-03-03T14:59:30.8807783Z       total
2024-03-03T14:59:30.9660777Z         has an item total
2024-03-03T14:59:30.9661279Z   versioning
2024-03-03T14:59:30.9695933Z     is expected to be versioned
2024-03-03T14:59:30.9696511Z   Scopes >
2024-03-03T14:59:30.9697442Z     by_item_id >
2024-03-03T14:59:31.0992520Z       only returns distributions with given item id
2024-03-03T14:59:31.0993112Z     by_location >
2024-03-03T14:59:31.1470606Z       only returns distributions with given location id
2024-03-03T14:59:31.1471320Z     during >
2024-03-03T14:59:31.2178025Z       returns all distributions created between two dates
2024-03-03T14:59:31.2178720Z     this_week >
2024-03-03T14:59:31.2179380Z       When it's Sunday (end of the week)
2024-03-03T14:59:31.2663312Z         doesn't include distributions past Sunday
2024-03-03T14:59:31.2663975Z       When it's Tuesday (mid-week)
2024-03-03T14:59:31.3371298Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-03T14:59:31.3372154Z     by_partner >
2024-03-03T14:59:31.3860344Z       only returns distributions with given partner id
2024-03-03T14:59:31.3861002Z   Callbacks >
2024-03-03T14:59:31.4671737Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-03T14:59:31.4673583Z     #before_save
2024-03-03T14:59:31.4681208Z       #reset_shipping_cost
2024-03-03T14:59:31.4683503Z         when delivery_method is other then shipped
2024-03-03T14:59:31.5332937Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-03T14:59:31.5333937Z   Methods >
2024-03-03T14:59:31.5334252Z     #future?
2024-03-03T14:59:31.5344921Z       when issued_at has passed
2024-03-03T14:59:31.6005209Z         returns false
2024-03-03T14:59:31.6005733Z       when issued_at has not passed
2024-03-03T14:59:31.6365243Z         returns true
2024-03-03T14:59:31.6370763Z     #copy_line_items
2024-03-03T14:59:31.7180076Z       replicates line_items from a donation into a distribution
2024-03-03T14:59:31.7181061Z     #copy_from_request
2024-03-03T14:59:31.7428002Z       copy over relevant request information into the distrubution
2024-03-03T14:59:31.7428931Z     #distributed_at
2024-03-03T14:59:31.7696372Z       shows the hour and minutes if it has been provided
2024-03-03T14:59:31.8190310Z       displays explicit issued_at date
2024-03-03T14:59:31.8190916Z     #combine_duplicates
2024-03-03T14:59:31.8594253Z       condenses duplicate line_items if the item_ids match
2024-03-03T14:59:31.8595158Z 
2024-03-03T14:59:31.8595339Z InventoryCheckService
2024-03-03T14:59:31.8596240Z   call
2024-03-03T14:59:31.8597214Z     error
2024-03-03T14:59:31.9374808Z       should set the error
2024-03-03T14:59:31.9375369Z     alert
2024-03-03T14:59:32.0118770Z       should set the alert
2024-03-03T14:59:32.0121450Z 
2024-03-03T14:59:32.0121736Z Partners::FetchPartnersToRemindNowService
2024-03-03T14:59:32.0122513Z   .fetch
2024-03-03T14:59:32.0123918Z     when there is a partner
2024-03-03T14:59:32.0124814Z       that does NOT have a organization with a global reminder & deadline
2024-03-03T14:59:32.0125814Z         and is a part of a partner group that does have them defined
2024-03-03T14:59:32.0126850Z           that is not for today
2024-03-03T14:59:32.0478793Z             should NOT include that partner
2024-03-03T14:59:32.0479533Z           that is for today
2024-03-03T14:59:32.0829952Z             should include that partner
2024-03-03T14:59:32.0830689Z             but the partner is deactivated
2024-03-03T14:59:32.1229586Z               should NOT include that partner
2024-03-03T14:59:32.1230568Z       that has an organization with a global reminder & deadline
2024-03-03T14:59:32.1231496Z         that is for today
2024-03-03T14:59:32.1528243Z           should include that partner
2024-03-03T14:59:32.1528950Z           and has send_reminder=false
2024-03-03T14:59:32.1860022Z             should NOT include that partner
2024-03-03T14:59:32.1860796Z           but the partner is deactivated
2024-03-03T14:59:32.2190374Z             should NOT include that partner
2024-03-03T14:59:32.2191217Z         AND a partner group that does have them defined
2024-03-03T14:59:32.2550462Z           should remind based on the partner group instead of the organization level reminder
2024-03-03T14:59:32.2551300Z           but the partner is deactivated
2024-03-03T14:59:32.2931546Z             should NOT include that partner
2024-03-03T14:59:32.2933256Z         that is not for today
2024-03-03T14:59:32.3213614Z           should NOT include that partner
2024-03-03T14:59:32.3217276Z 
2024-03-03T14:59:32.3217559Z Manufacturer
2024-03-03T14:59:32.3218541Z   Validations
2024-03-03T14:59:32.4936341Z     must belong to an organization
2024-03-03T14:59:32.5022367Z     must have a unique name within organization
2024-03-03T14:59:32.5023047Z   Private Methods
2024-03-03T14:59:32.5023474Z     #exists_in_org?
2024-03-03T14:59:32.6748086Z       returns true if manufacturer exists in an organization
2024-03-03T14:59:32.6748832Z   Methods
2024-03-03T14:59:32.6749210Z     volume
2024-03-03T14:59:32.7396901Z       retrieves the amount of product that has been donated by manufacturer
2024-03-03T14:59:32.8711034Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-03T14:59:33.0115581Z       ignores the amount of product from other manufacturers
2024-03-03T14:59:33.0116235Z   versioning
2024-03-03T14:59:33.0198136Z     is expected to be versioned
2024-03-03T14:59:33.0199553Z 
2024-03-03T14:59:33.0199749Z Item
2024-03-03T14:59:33.0201352Z   after update
2024-03-03T14:59:33.0202080Z     when item has the kit
2024-03-03T14:59:33.2231706Z       updates kit name
2024-03-03T14:59:33.2232209Z     when item does not have kit
2024-03-03T14:59:33.2358085Z       does not raise any errors
2024-03-03T14:59:33.2358621Z   Methods >
2024-03-03T14:59:33.2359801Z     barcodes_for
2024-03-03T14:59:33.2555468Z       retrieves all BarcodeItems associated with an item
2024-03-03T14:59:33.2556148Z     has_history?
2024-03-03T14:59:33.3302716Z       identifies items that have been used previously
2024-03-03T14:59:33.3303718Z     #reactivate!
2024-03-03T14:59:33.3304133Z       given an array of item ids
2024-03-03T14:59:33.3528673Z         sets the active trait to true for all of them
2024-03-03T14:59:33.3529330Z       given a single item id
2024-03-03T14:59:33.3661966Z         sets the active trait to true for that item
2024-03-03T14:59:33.3662576Z     destroy
2024-03-03T14:59:33.3899051Z       only hides an item that has history
2024-03-03T14:59:33.4066154Z       actually destroys an item that doesn't have history
2024-03-03T14:59:33.6215470Z       deactivates the kit if it exists
2024-03-03T14:59:33.6216142Z     storage_locations_containing
2024-03-03T14:59:33.6571224Z       retrieves all storage locations that contain an item
2024-03-03T14:59:33.6571909Z     other?
2024-03-03T14:59:33.6696844Z       is true for items that are partner_key 'other'
2024-03-03T14:59:33.6697500Z     barcoded_items >
2024-03-03T14:59:33.7041954Z       returns a collection of items that have barcodes associated with them
2024-03-03T14:59:33.7042890Z   distribution_quantity and package size
2024-03-03T14:59:33.7166212Z     have nil values if an empty string is passed
2024-03-03T14:59:33.7167237Z   Filtering >
2024-03-03T14:59:33.7200688Z     can filter
2024-03-03T14:59:33.7383968Z     ->alphabetized retrieves items in alphabetical order
2024-03-03T14:59:33.7646184Z     ->active shows items that are still active
2024-03-03T14:59:33.7853358Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-03T14:59:33.7854321Z     ->by_partner_key
2024-03-03T14:59:33.8008225Z       filters by partner key
2024-03-03T14:59:33.8008855Z     ->by_base_item
2024-03-03T14:59:33.9929377Z       can be chained to organization to constrain it to just 1 org's items
2024-03-03T14:59:34.0094912Z       shows the items for a particular base_item
2024-03-03T14:59:34.0096344Z     ->disposable
2024-03-03T14:59:34.0384974Z       returns records associated with disposable diapers
2024-03-03T14:59:34.0385885Z     ->cloth_diapers
2024-03-03T14:59:34.0671163Z       returns records associated with disposable diapers
2024-03-03T14:59:34.0671947Z   Assocations >
2024-03-03T14:59:34.0716277Z     is expected to belong to item_category optional: true
2024-03-03T14:59:34.0717059Z   Validations >
2024-03-03T14:59:34.0829707Z     requires that items quantity are not a negative number
2024-03-03T14:59:34.0960642Z     requires a unique name
2024-03-03T14:59:34.1006483Z     requires a Base Item base
2024-03-03T14:59:34.1056875Z     must belong to an organization
2024-03-03T14:59:34.1058159Z   versioning
2024-03-03T14:59:34.1091950Z     is expected to be versioned
2024-03-03T14:59:34.1093249Z   default_quantity
2024-03-03T14:59:34.1171675Z     should return 50 if column is not set
2024-03-03T14:59:34.1252646Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-03T14:59:34.1328625Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-03T14:59:34.1404957Z     should return the value of distribution_quantity if it is set
2024-03-03T14:59:34.1405869Z 
2024-03-03T14:59:34.1406135Z BaseItem
2024-03-03T14:59:34.1407055Z   Associations >
2024-03-03T14:59:34.1522153Z     keeps count of its associated items
2024-03-03T14:59:34.1522780Z   versioning
2024-03-03T14:59:34.1555469Z     is expected to be versioned
2024-03-03T14:59:34.1556113Z   Filtering >
2024-03-03T14:59:34.1556742Z     ->without_kit
2024-03-03T14:59:34.1606005Z       should not include the Kit BaseItem
2024-03-03T14:59:34.1606759Z     ->by_partner_key
2024-03-03T14:59:34.1653431Z       shows the Base Items by partner_key
2024-03-03T14:59:34.1654062Z   Validations >
2024-03-03T14:59:34.1719816Z     is invalid without a uniqueness key
2024-03-03T14:59:34.1784654Z     is invalid without a unique name
2024-03-03T14:59:34.1826766Z     is invalid without a partner key
2024-03-03T14:59:34.1869071Z     is invalid without a name
2024-03-03T14:59:34.1869640Z 
2024-03-03T14:59:34.1869899Z DistributionPdf
2024-03-03T14:59:34.2440842Z   #non_request_data
2024-03-03T14:59:34.3071336Z   #request_data
2024-03-03T14:59:34.3071980Z 
2024-03-03T14:59:34.3072218Z DistributionsController
2024-03-03T14:59:34.3073345Z   While signed in
2024-03-03T14:59:34.3074333Z     POST #create
2024-03-03T14:59:34.3076427Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-03T14:59:34.3988616Z         redirects with a flash notice and a flash alert
2024-03-03T14:59:34.3989417Z       when line item quantity is not positive
2024-03-03T14:59:34.4511513Z         flashes an error
2024-03-03T14:59:34.4512494Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-03T14:59:34.5320242Z         redirects with a flash notice and a flash error
2024-03-03T14:59:34.5323878Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-03T14:59:34.6015809Z         redirects with a flash notice and a flash error
2024-03-03T14:59:34.6016559Z     PUT #update
2024-03-03T14:59:34.6017539Z       when distribution has items updated for minimum quantity
2024-03-03T14:59:34.7410871Z         redirects with a flash notice and send send_notification
2024-03-03T14:59:34.7412273Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-03T14:59:34.8541849Z         redirects with a flash notice and a flash error
2024-03-03T14:59:34.8542819Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-03T14:59:34.9641404Z         redirects with a flash notice and a flash error
2024-03-03T14:59:34.9642469Z 
2024-03-03T14:59:34.9642649Z Audit
2024-03-03T14:59:34.9644280Z   Scopes >
2024-03-03T14:59:35.0137938Z     `at_location` can filter out audits to a specific location
2024-03-03T14:59:35.0138685Z   versioning
2024-03-03T14:59:35.0172515Z     is expected to be versioned
2024-03-03T14:59:35.0173107Z   behaves like itemizable
2024-03-03T14:59:35.0173934Z     .to_a
2024-03-03T14:59:35.0174963Z       with Flipper flag :deprecate_to_a enabled
2024-03-03T14:59:35.0638922Z         raises an error
2024-03-03T14:59:35.0640187Z       with Flipper flag :deprecate_to_a disabled
2024-03-03T14:59:35.1116040Z         calls line_item_values
2024-03-03T14:59:35.1116622Z     .line_items
2024-03-03T14:59:35.1118256Z       quantities_by_name
2024-03-03T14:59:35.1905696Z         leaves out zero-quantitied items if requested
2024-03-03T14:59:35.2702068Z         returns a hash of items with id, name, and quantity
2024-03-03T14:59:35.2702754Z       sorted
2024-03-03T14:59:35.3792586Z         displays the items, sorted by name
2024-03-03T14:59:35.3793035Z       combine!
2024-03-03T14:59:35.4315104Z         combines multiple line_items with the same item_id into a single record
2024-03-03T14:59:35.4681279Z         incrementally combines line_items on donations that have already been created
2024-03-03T14:59:35.4682194Z       total
2024-03-03T14:59:35.5430926Z         has an item total
2024-03-03T14:59:35.5431694Z   Methods >
2024-03-03T14:59:35.8843810Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-03T14:59:36.1189158Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-03T14:59:36.1189903Z   Validations >
2024-03-03T14:59:36.1725914Z     can have line items that has quantity as zero
2024-03-03T14:59:36.2254912Z     can have line items that has quantity as a positive integer
2024-03-03T14:59:36.2767990Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-03T14:59:36.3278363Z     cannot have duplicate line items
2024-03-03T14:59:36.3787086Z     can not have line items that has quantity as negative integer
2024-03-03T14:59:36.4063004Z     must belong to an organization
2024-03-03T14:59:36.4157385Z     must belong to an organization admin of its organization
2024-03-03T14:59:36.4158366Z 
2024-03-03T14:59:36.4158568Z AccountRequest
2024-03-03T14:59:36.4284504Z   #confirm!
2024-03-03T14:59:36.4406361Z   #reject!
2024-03-03T14:59:36.4406993Z   .get_by_identity_token
2024-03-03T14:59:36.4408131Z     when the identity_token provided does not match any AccountRequest
2024-03-03T14:59:36.4442790Z       should return nil
2024-03-03T14:59:36.4443478Z     when the identity_token corresponds to an existing AccountRequest
2024-03-03T14:59:36.4532807Z       should return the corresponding AccountRequest
2024-03-03T14:59:36.4533445Z   validations
2024-03-03T14:59:36.4665269Z     is expected to validate that :email is case-sensitively unique
2024-03-03T14:59:36.4786167Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-03T14:59:36.4930678Z     is expected to validate that :email cannot be empty/falsy
2024-03-03T14:59:36.5062602Z     is expected to validate that :name cannot be empty/falsy
2024-03-03T14:59:36.5179522Z     is expected to validate that the length of :request_details is at least 50
2024-03-03T14:59:36.5275648Z     is expected not to allow :email to be ‹"not_email"›
2024-03-03T14:59:36.5366059Z     is expected to allow :email to be ‹"rubin_luettgen@koelpin-cronin.test"›
2024-03-03T14:59:36.5367139Z     when the email provided is already used by an existing user
2024-03-03T14:59:36.5550566Z       should not allow the email
2024-03-03T14:59:36.5551405Z     when the email provided is already used by an existing organization
2024-03-03T14:59:36.7307228Z       should not allow the email
2024-03-03T14:59:36.7307799Z   versioning
2024-03-03T14:59:36.7344465Z     is expected to be versioned
2024-03-03T14:59:36.7344991Z   #identity_token
2024-03-03T14:59:36.7433747Z     should return a JWT token that contains the id of the account_request_id
2024-03-03T14:59:36.7436844Z     when the account_request is not persisted
2024-03-03T14:59:36.7522958Z       should raise an error
2024-03-03T14:59:36.7523444Z   #processed?
2024-03-03T14:59:36.7524501Z     when the account request has a associated organization
2024-03-03T14:59:36.9319259Z       should return true
2024-03-03T14:59:36.9319965Z     when the account request has no associated organization
2024-03-03T14:59:36.9410563Z       should return false
2024-03-03T14:59:36.9411085Z   associations
2024-03-03T14:59:36.9467552Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-03T14:59:36.9499166Z     is expected to have one organization class_name => Organization
2024-03-03T14:59:36.9499818Z 
2024-03-03T14:59:36.9500052Z DistributionByCountyReportService
2024-03-03T14:59:36.9500683Z   get_breakdown
2024-03-03T14:59:37.0203338Z     will have 100% unspecified shows if no served_areas
2024-03-03T14:59:37.1137936Z     divides the item numbers and values according to the partner profile
2024-03-03T14:59:37.2885869Z     handles multiple partners with overlapping service areas properly
2024-03-03T14:59:37.2886554Z 
2024-03-03T14:59:37.2886752Z Partners::ServedArea
2024-03-03T14:59:37.2933816Z   is expected to belong to partner_profile required: true
2024-03-03T14:59:37.3067951Z   must only allow integer client shares
2024-03-03T14:59:37.3301444Z   must only allow valid client share values
2024-03-03T14:59:37.3341305Z   is expected to belong to county required: true
2024-03-03T14:59:37.3341945Z   versioning
2024-03-03T14:59:37.3376694Z     is expected to be versioned
2024-03-03T14:59:37.3377230Z 
2024-03-03T14:59:37.3377449Z Partners::AuthorizedFamilyMember
2024-03-03T14:59:37.3378493Z   versioning
2024-03-03T14:59:37.3411589Z     is expected to be versioned
2024-03-03T14:59:37.3412096Z   #display_name
2024-03-03T14:59:37.3672950Z     should return the family member's first and last name
2024-03-03T14:59:37.3673571Z   associations
2024-03-03T14:59:37.3710152Z     is expected to have many child_item_requests dependent => nullify
2024-03-03T14:59:37.3749302Z     is expected to belong to family required: true
2024-03-03T14:59:37.3749954Z 
2024-03-03T14:59:37.3750171Z HistoricalDataCacheJob
2024-03-03T14:59:37.5582532Z   caches the historical data
2024-03-03T14:59:37.7242368Z   queues the job
2024-03-03T14:59:37.7242913Z 
2024-03-03T14:59:37.7243379Z InventoryItem
2024-03-03T14:59:37.7278099Z   initializes the quantity to 0 if it was not specified
2024-03-03T14:59:37.7278789Z   Validations >
2024-03-03T14:59:37.7323593Z     requires an item
2024-03-03T14:59:37.7370088Z     requires an inventory association
2024-03-03T14:59:37.7370644Z     quantity >
2024-03-03T14:59:37.7504525Z       is gte 0
2024-03-03T14:59:37.7560714Z       is required
2024-03-03T14:59:37.7615430Z       is numerical
2024-03-03T14:59:37.7670252Z       is less than the max integer
2024-03-03T14:59:37.7670813Z   versioning
2024-03-03T14:59:37.7705134Z     is expected to be versioned
2024-03-03T14:59:37.7705671Z   Filtering >
2024-03-03T14:59:37.7706544Z     ->by_partner_key
2024-03-03T14:59:37.7843045Z       shows the Base Items by partner_key
2024-03-03T14:59:37.7843577Z 
2024-03-03T14:59:37.7843737Z EventDiffer
2024-03-03T14:59:38.0037556Z   should return a full diff
2024-03-03T14:59:38.0037888Z 
2024-03-03T14:59:38.0037977Z Request
2024-03-03T14:59:38.0038913Z   versioning
2024-03-03T14:59:38.0078216Z     is expected to be versioned
2024-03-03T14:59:38.0078748Z   item data
2024-03-03T14:59:38.0158249Z     coerces item quantity and id to always be an integer before saving
2024-03-03T14:59:38.0160750Z   Enums >
2024-03-03T14:59:38.0161360Z     #status
2024-03-03T14:59:38.0363661Z       scopes
2024-03-03T14:59:38.0364070Z   total_items
2024-03-03T14:59:38.0457185Z     adds the quantity of all items in the request
2024-03-03T14:59:38.0457661Z 
2024-03-03T14:59:38.0457818Z ReminderDeadlineMailer
2024-03-03T14:59:38.0458789Z   notify deadline
2024-03-03T14:59:38.0745535Z     renders the sender email
2024-03-03T14:59:38.1007291Z     renders the body
2024-03-03T14:59:38.1269020Z     renders the subject
2024-03-03T14:59:38.1527928Z     renders the receiver email
2024-03-03T14:59:38.1529351Z 
2024-03-03T14:59:38.1529566Z DonationsController
2024-03-03T14:59:38.1531297Z   While signed in as an organization admin >
2024-03-03T14:59:38.1532128Z     DELETE #destroy
2024-03-03T14:59:38.1835310Z       redirects to the index
2024-03-03T14:59:38.1835788Z   While signed in as a normal user >
2024-03-03T14:59:38.1837431Z     DELETE #destroy
2024-03-03T14:59:38.1992580Z       redirects to the dashboard path
2024-03-03T14:59:38.1992992Z     GET #show
2024-03-03T14:59:38.2156811Z       returns http success
2024-03-03T14:59:38.2157439Z     GET #index
2024-03-03T14:59:38.2300087Z       returns http success
2024-03-03T14:59:38.2300625Z     GET #edit
2024-03-03T14:59:38.2491087Z       returns http success
2024-03-03T14:59:38.2491601Z     PUT#update
2024-03-03T14:59:38.3643166Z       updates storage quantity correctly
2024-03-03T14:59:38.3730192Z       redirects to index after update (FAILED - 2)
2024-03-03T14:59:38.3731281Z       when removing a line item
2024-03-03T14:59:38.4787415Z         updates storage invetory item quantity correctly
2024-03-03T14:59:38.4788171Z       when changing storage location
2024-03-03T14:59:38.5856336Z         updates storage quantity correctly
2024-03-03T14:59:38.5894717Z         rolls back updates if quantity would go below 0
2024-03-03T14:59:38.5895415Z     POST#create
2024-03-03T14:59:38.5974628Z       renders GET#new with error on failure (FAILED - 3)
2024-03-03T14:59:38.6050586Z       redirects to GET#edit on success (FAILED - 4)
2024-03-03T14:59:38.6051266Z     GET #new
2024-03-03T14:59:38.6178463Z       returns http success
2024-03-03T14:59:38.6179108Z   calculating total money raised for all donations
2024-03-03T14:59:38.6214265Z     returns zero for an empty array of donations
2024-03-03T14:59:38.6337213Z     correctly calculates the total
2024-03-03T14:59:38.6337911Z   calculating total value of multiple donations
2024-03-03T14:59:38.6374451Z     returns zero for an empty array of donations
2024-03-03T14:59:38.7707054Z     works correctly for multiple line items per donation
2024-03-03T14:59:38.7708302Z 
2024-03-03T14:59:38.7708473Z RequestDestroyService
2024-03-03T14:59:38.7709284Z   #call
2024-03-03T14:59:38.7827767Z     should return an instance of itself
2024-03-03T14:59:38.7829082Z     when the request's partner is deactivated
2024-03-03T14:59:38.8084122Z       should have errors
2024-03-03T14:59:38.8084720Z     when the request_id matches no request
2024-03-03T14:59:38.8121836Z       should not be successful and have errors indicating request id is invalid
2024-03-03T14:59:38.8122787Z     when the request is already discarded
2024-03-03T14:59:38.8216246Z       should not be successful and have errors
2024-03-03T14:59:38.8216954Z     when there are no validation errors
2024-03-03T14:59:38.8326611Z       should send a email notification to the partner
2024-03-03T14:59:38.8445983Z       should update the discarded_at column on the request
2024-03-03T14:59:38.8563646Z       should update the status column on the request
2024-03-03T14:59:38.8564526Z 
2024-03-03T14:59:38.8564707Z User
2024-03-03T14:59:38.8621568Z   has a valid factory
2024-03-03T14:59:38.8622116Z   versioning
2024-03-03T14:59:38.8656745Z     is expected to be versioned
2024-03-03T14:59:38.8657315Z   Scopes >
2024-03-03T14:59:38.8657849Z     ->alphabetized
2024-03-03T14:59:38.9028057Z       retrieves users in the correct order
2024-03-03T14:59:38.9029045Z   omniauth
2024-03-03T14:59:38.9153733Z     retrieves the user from an omniauth context
2024-03-03T14:59:38.9154401Z   Scopes >
2024-03-03T14:59:38.9155116Z     ->alphabetized
2024-03-03T14:59:38.9365376Z       retrieves users in the correct order
2024-03-03T14:59:38.9365904Z   Validations >
2024-03-03T14:59:38.9555413Z     requires an email that is formatted correctly
2024-03-03T14:59:38.9639087Z     requires a name
2024-03-03T14:59:38.9639513Z   Methods >
2024-03-03T14:59:39.0102932Z     #kind
2024-03-03T14:59:39.0179711Z     #invitation_status
2024-03-03T14:59:39.0256248Z     #reinvitable?
2024-03-03T14:59:39.0304690Z     discarded?
2024-03-03T14:59:39.0305295Z 
2024-03-03T14:59:39.0305491Z DistributionReminder
2024-03-03T14:59:39.0306422Z   conditionally sending the emails
2024-03-03T14:59:39.0655409Z     sends mail for future distributions where the partner wants reminders
2024-03-03T14:59:39.0943602Z     sends mail for future distributions
2024-03-03T14:59:39.1215664Z     does not send mail for future distributions if the partner wants no reminders
2024-03-03T14:59:39.1486668Z     does not send mail for past distributions
2024-03-03T14:59:39.1487472Z     when the distribution_id does not match any Distribution
2024-03-03T14:59:39.1530338Z       does not send mail for non existent distributions
2024-03-03T14:59:39.1531015Z     when the partner is deactivated
2024-03-03T14:59:39.1805729Z       does not send mail
2024-03-03T14:59:39.1806472Z 
2024-03-03T14:59:39.1806651Z PartnerInviteService
2024-03-03T14:59:39.2107353Z   should update the status of the partner to invited
2024-03-03T14:59:39.2404083Z   should create invite
2024-03-03T14:59:39.2404551Z   with force: true
2024-03-03T14:59:39.2699840Z     should send the force setting forward
2024-03-03T14:59:39.2700311Z 
2024-03-03T14:59:39.2700464Z ItemsInTotalQuery
2024-03-03T14:59:39.2701401Z   items_in_total_query
2024-03-03T14:59:39.4906374Z     does not count negative adjustments towards in-flow
2024-03-03T14:59:39.6512043Z     returns a sum total of all in-flows
2024-03-03T14:59:39.8824839Z     does not count transfers going in the negative direction
2024-03-03T14:59:40.2311785Z     counts shared items together
2024-03-03T14:59:40.5060487Z     does not count donations, purchases, adjustments to other storage locations
2024-03-03T14:59:40.5286731Z W, [2024-03-03T06:59:40.528477 #2307]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-03T14:59:40.5288378Z W, [2024-03-03T06:59:40.528516 #2307]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-03T14:59:40.5290204Z W, [2024-03-03T06:59:40.528530 #2307]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-03T14:59:40.5291714Z W, [2024-03-03T06:59:40.528554 #2307]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-03T14:59:40.5806774Z 
2024-03-03T14:59:40.5807015Z Failures:
2024-03-03T14:59:40.5807271Z 
2024-03-03T14:59:40.5807763Z   1) Donation Methods > source_view details donation site returns donation_site name
2024-03-03T14:59:40.5808819Z      Failure/Error: let(:donation_site) { create(:donation_site) }
2024-03-03T14:59:40.5836660Z 
2024-03-03T14:59:40.5838460Z      ActiveRecord::RecordInvalid:
2024-03-03T14:59:40.5840133Z        Validation failed: Contact name can't be blank, Email can't be blank, Email is invalid, Phone can't be blank, Phone must be a valid phone number
2024-03-03T14:59:40.5841839Z      # ./spec/models/donation_spec.rb:247:in `block (6 levels) in <top (required)>'
2024-03-03T14:59:40.5848342Z      # ./spec/models/donation_spec.rb:248:in `block (6 levels) in <top (required)>'
2024-03-03T14:59:40.5849488Z      # ./spec/models/donation_spec.rb:251:in `block (6 levels) in <top (required)>'
2024-03-03T14:59:40.5850190Z 
2024-03-03T14:59:40.5850833Z   2) DonationsController While signed in as a normal user > PUT#update redirects to index after update
2024-03-03T14:59:40.5852328Z      Failure/Error: donation = create(:donation_site_donation)
2024-03-03T14:59:40.5852878Z 
2024-03-03T14:59:40.5853067Z      ActiveRecord::RecordInvalid:
2024-03-03T14:59:40.5854580Z        Validation failed: Contact name can't be blank, Email can't be blank, Email is invalid, Phone can't be blank, Phone must be a valid phone number
2024-03-03T14:59:40.5856322Z      # ./spec/controllers/donations_controller_spec.rb:50:in `block (4 levels) in <top (required)>'
2024-03-03T14:59:40.5857121Z 
2024-03-03T14:59:40.5857805Z   3) DonationsController While signed in as a normal user > POST#create renders GET#new with error on failure
2024-03-03T14:59:40.5859048Z      Failure/Error: let!(:donation_site) { create(:donation_site) }
2024-03-03T14:59:40.5859617Z 
2024-03-03T14:59:40.5859798Z      ActiveRecord::RecordInvalid:
2024-03-03T14:59:40.5861269Z        Validation failed: Contact name can't be blank, Email can't be blank, Email is invalid, Phone can't be blank, Phone must be a valid phone number
2024-03-03T14:59:40.5862999Z      # ./spec/controllers/donations_controller_spec.rb:28:in `block (4 levels) in <top (required)>'
2024-03-03T14:59:40.5863799Z 
2024-03-03T14:59:40.5864435Z   4) DonationsController While signed in as a normal user > POST#create redirects to GET#edit on success
2024-03-03T14:59:40.5865637Z      Failure/Error: let!(:donation_site) { create(:donation_site) }
2024-03-03T14:59:40.5866204Z 
2024-03-03T14:59:40.5866389Z      ActiveRecord::RecordInvalid:
2024-03-03T14:59:40.5867839Z        Validation failed: Contact name can't be blank, Email can't be blank, Email is invalid, Phone can't be blank, Phone must be a valid phone number
2024-03-03T14:59:40.5869548Z      # ./spec/controllers/donations_controller_spec.rb:28:in `block (4 levels) in <top (required)>'
2024-03-03T14:59:40.5870342Z 
2024-03-03T14:59:40.5870652Z Finished in 57.29 seconds (files took 8.22 seconds to load)
2024-03-03T14:59:40.5871350Z 575 examples, 4 failures
2024-03-03T14:59:40.5871643Z 
2024-03-03T14:59:40.5871802Z Failed examples:
2024-03-03T14:59:40.5872044Z 
2024-03-03T14:59:40.5872833Z rspec ./spec/models/donation_spec.rb:250 # Donation Methods > source_view details donation site returns donation_site name
2024-03-03T14:59:40.5875158Z rspec ./spec/controllers/donations_controller_spec.rb:49 # DonationsController While signed in as a normal user > PUT#update redirects to index after update
2024-03-03T14:59:40.5877511Z rspec ./spec/controllers/donations_controller_spec.rb:41 # DonationsController While signed in as a normal user > POST#create renders GET#new with error on failure
2024-03-03T14:59:40.5879877Z rspec ./spec/controllers/donations_controller_spec.rb:31 # DonationsController While signed in as a normal user > POST#create redirects to GET#edit on success
2024-03-03T14:59:40.5881152Z 
2024-03-03T14:59:40.5882733Z Randomized with seed 1041
2024-03-03T14:59:40.5883303Z 
2024-03-03T14:59:41.0639649Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-03T14:59:41.0641752Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3970 / 6428 LOC (61.76%) covered.
2024-03-03T14:59:41.1121616Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-03-03T14:59:41.4842134Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-03T14:59:41.4843743Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10680 LOC (0.36%) covered.
2024-03-03T14:59:41.5124136Z ##[error]Process completed with exit code 1.
