2024-03-07T21:46:54.2901740Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T21:46:54.2902617Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T21:46:54.2953277Z shell: /usr/bin/bash -e {0}
2024-03-07T21:46:54.2953781Z env:
2024-03-07T21:46:54.2954085Z   POSTGRES_HOST: localhost
2024-03-07T21:46:54.2954474Z   DATABASE_HOST: localhost
2024-03-07T21:46:54.2954933Z   PG_USERNAME: postgres
2024-03-07T21:46:54.2955295Z   PG_PASSWORD: password
2024-03-07T21:46:54.2955749Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T21:46:54.2956135Z   POSTGRES_PORT: 5432
2024-03-07T21:46:54.2956496Z   PGHOST: localhost
2024-03-07T21:46:54.2956890Z   PGUSER: postgres
2024-03-07T21:46:54.2957239Z   RAILS_ENV: test
2024-03-07T21:46:54.2957593Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-07T21:46:54.2958048Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T21:46:54.2958462Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-07T21:46:54.2958894Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T21:46:54.2959524Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T21:46:54.2960134Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T21:46:54.2960897Z   EVENTS_READ: true
2024-03-07T21:46:54.2961434Z ##[endgroup]
2024-03-07T21:47:00.0395960Z W, [2024-03-07T21:47:00.039102 #2304]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-07T21:47:00.0398122Z W, [2024-03-07T21:47:00.039153 #2304]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:47:00.0400824Z W, [2024-03-07T21:47:00.039168 #2304]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:47:00.0406139Z W, [2024-03-07T21:47:00.039189 #2304]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-07T21:47:02.6944804Z W, [2024-03-07T21:47:02.694169 #2304]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-07T21:47:02.6946658Z W, [2024-03-07T21:47:02.694210 #2304]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:47:02.6948210Z W, [2024-03-07T21:47:02.694230 #2304]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:47:02.6950427Z W, [2024-03-07T21:47:02.694273 #2304]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-07T21:47:02.7016542Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-03-07T21:47:11.3503894Z 
2024-03-07T21:47:11.3504587Z Randomized with seed 54495
2024-03-07T21:47:12.2005103Z 
2024-03-07T21:47:12.2005874Z UserInviteService
2024-03-07T21:47:12.4886820Z   should create the user without a name with default role
2024-03-07T21:47:12.5167623Z   should invite a user with the partner role
2024-03-07T21:47:12.5168464Z   with existing user
2024-03-07T21:47:12.5495370Z     should raise an error when reinviting an existing user with the same role
2024-03-07T21:47:12.7372318Z     should add roles to existing user
2024-03-07T21:47:12.7373049Z     with force: true
2024-03-07T21:47:12.7580299Z       should reinvite the user
2024-03-07T21:47:12.7580983Z   with a new user
2024-03-07T21:47:12.7844057Z     should create the user without name with role
2024-03-07T21:47:12.9751042Z     should create the user with roles
2024-03-07T21:47:12.9751607Z 
2024-03-07T21:47:12.9751790Z User
2024-03-07T21:47:12.9816669Z   has a valid factory
2024-03-07T21:47:12.9817464Z   omniauth
2024-03-07T21:47:12.9957937Z     retrieves the user from an omniauth context
2024-03-07T21:47:12.9958737Z   versioning
2024-03-07T21:47:12.9994038Z     is expected to be versioned
2024-03-07T21:47:12.9994724Z   Validations >
2024-03-07T21:47:13.0075374Z     requires a name
2024-03-07T21:47:13.0255748Z     requires an email that is formatted correctly
2024-03-07T21:47:13.0256652Z   Methods >
2024-03-07T21:47:13.0333248Z     #reinvitable?
2024-03-07T21:47:13.0380197Z     discarded?
2024-03-07T21:47:13.0838787Z     #kind
2024-03-07T21:47:13.0916358Z     #invitation_status
2024-03-07T21:47:13.0917484Z   Scopes >
2024-03-07T21:47:13.0918354Z     ->alphabetized
2024-03-07T21:47:13.1142554Z       retrieves users in the correct order
2024-03-07T21:47:13.1143318Z   Scopes >
2024-03-07T21:47:13.1144076Z     ->alphabetized
2024-03-07T21:47:13.1537366Z       retrieves users in the correct order
2024-03-07T21:47:13.1538016Z 
2024-03-07T21:47:13.1538279Z ItemsInTotalQuery
2024-03-07T21:47:13.1538993Z   items_in_total_query
2024-03-07T21:47:13.3725462Z     returns a sum total of all in-flows
2024-03-07T21:47:13.6329121Z     does not count donations, purchases, adjustments to other storage locations
2024-03-07T21:47:13.8392560Z     does not count transfers going in the negative direction
2024-03-07T21:47:14.0421791Z     does not count negative adjustments towards in-flow
2024-03-07T21:47:14.3665795Z     counts shared items together
2024-03-07T21:47:14.3666375Z 
2024-03-07T21:47:14.3666944Z PartnerRequestRecertificationService
2024-03-07T21:47:14.3667602Z   #call
2024-03-07T21:47:14.3668653Z     when the arguments are incorrect
2024-03-07T21:47:14.3670042Z       because the partner has already been requested to recertify
2024-03-07T21:47:14.3978265Z         should return the PartnerRequestRecertificationService object with an error
2024-03-07T21:47:14.3979786Z     when the partner is deactivated
2024-03-07T21:47:14.4270754Z       does not send an email
2024-03-07T21:47:14.4271430Z     when the arguments are correct
2024-03-07T21:47:14.4583175Z       should change the partner status to approved
2024-03-07T21:47:14.4867533Z       should queue sending the notice to the partner
2024-03-07T21:47:14.5154953Z       should have no errors
2024-03-07T21:47:14.5155873Z       but a unexpected error occurred during the save
2024-03-07T21:47:14.5156651Z         for partner approval
2024-03-07T21:47:14.5411201Z           should have an error with the raised error
2024-03-07T21:47:14.5663392Z           should NOT queue sending the notice to the partner
2024-03-07T21:47:14.5927736Z           should not change the partner status to recertification_required
2024-03-07T21:47:14.5928725Z 
2024-03-07T21:47:14.5929074Z Question
2024-03-07T21:47:14.5930405Z   validations
2024-03-07T21:47:14.6172933Z     question for_banks and for_partners attributes can't both be false
2024-03-07T21:47:14.6233205Z     is expected to validate that :answer cannot be empty/falsy
2024-03-07T21:47:14.6293356Z     is expected to validate that :title cannot be empty/falsy
2024-03-07T21:47:14.6294410Z   scope for_banks
2024-03-07T21:47:14.6542592Z     should filter out questions that aren't meant for banks
2024-03-07T21:47:14.6543157Z   punctuate
2024-03-07T21:47:14.6586407Z     should punctuate each string in a given array
2024-03-07T21:47:14.6587306Z   versioning
2024-03-07T21:47:14.6621986Z     is expected to be versioned
2024-03-07T21:47:14.6622636Z   scope for_partners
2024-03-07T21:47:14.6864518Z     should filter out questions that aren't meant for partners
2024-03-07T21:47:14.6865091Z   remove_redundant_error
2024-03-07T21:47:14.6908813Z     should return an array with only one error message related to the checkboxes.
2024-03-07T21:47:14.6909636Z 
2024-03-07T21:47:14.6909939Z Exports::ExportPurchasesCSVService
2024-03-07T21:47:14.6910606Z   #generate_csv_data
2024-03-07T21:47:14.8044784Z     should match the expected content for the csv
2024-03-07T21:47:14.8045395Z 
2024-03-07T21:47:14.8045567Z BaseItem
2024-03-07T21:47:14.8047133Z   versioning
2024-03-07T21:47:14.8084911Z     is expected to be versioned
2024-03-07T21:47:14.8085600Z   Associations >
2024-03-07T21:47:14.8202758Z     keeps count of its associated items
2024-03-07T21:47:14.8203546Z   Validations >
2024-03-07T21:47:14.8271859Z     is invalid without a unique name
2024-03-07T21:47:14.8336707Z     is invalid without a uniqueness key
2024-03-07T21:47:14.8380732Z     is invalid without a partner key
2024-03-07T21:47:14.8424664Z     is invalid without a name
2024-03-07T21:47:14.8425394Z   Filtering >
2024-03-07T21:47:14.8426212Z     ->by_partner_key
2024-03-07T21:47:14.8475978Z       shows the Base Items by partner_key
2024-03-07T21:47:14.8476903Z     ->without_kit
2024-03-07T21:47:14.8553129Z       should not include the Kit BaseItem
2024-03-07T21:47:14.8553870Z 
2024-03-07T21:47:14.8554142Z ServiceObjectErrorsMixin
2024-03-07T21:47:14.8554952Z   self.included
2024-03-07T21:47:14.8591027Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-07T21:47:14.8591836Z 
2024-03-07T21:47:14.8592110Z DistributionDestroyService
2024-03-07T21:47:14.8593594Z   #call
2024-03-07T21:47:14.8594263Z     when the distribution_id does match a Distribution
2024-03-07T21:47:14.8594890Z       and the increase inventory operations fails
2024-03-07T21:47:15.0721316Z         should not be successful and have the error message
2024-03-07T21:47:15.2896605Z         should not delete the Distribution
2024-03-07T21:47:15.2897906Z       and the destroy! operation fails
2024-03-07T21:47:15.4945643Z         should not be successful and have the error message
2024-03-07T21:47:15.6940056Z         should not delete the Distribution
2024-03-07T21:47:15.6941191Z       and the operations succeed
2024-03-07T21:47:15.8987695Z         should be successful
2024-03-07T21:47:16.0992668Z         should increase the inventory of the storage location
2024-03-07T21:47:16.3058502Z         should destroy the Distribution
2024-03-07T21:47:16.3059435Z     when the distribution_id matches no Distribution
2024-03-07T21:47:16.3098400Z       to not be a success
2024-03-07T21:47:16.3099148Z 
2024-03-07T21:47:16.3099501Z DistributionByCountyReportService
2024-03-07T21:47:16.3100361Z   get_breakdown
2024-03-07T21:47:16.4022440Z     divides the item numbers and values according to the partner profile
2024-03-07T21:47:16.4690619Z     will have 100% unspecified shows if no served_areas
2024-03-07T21:47:16.6487258Z     handles multiple partners with overlapping service areas properly
2024-03-07T21:47:16.6488074Z 
2024-03-07T21:47:16.6488337Z ItemizableUpdateService
2024-03-07T21:47:16.6488908Z   decreases
2024-03-07T21:47:16.7590772Z     should raise an error if any item is inactive
2024-03-07T21:47:16.8884499Z     should update quantity in same storage location
2024-03-07T21:47:17.0183160Z     should update quantity in different locations
2024-03-07T21:47:17.0184061Z   increases
2024-03-07T21:47:17.1591528Z     should update quantity in different locations
2024-03-07T21:47:17.2919755Z     should update quantity in same storage location
2024-03-07T21:47:17.3797161Z     should raise an error if any item is inactive
2024-03-07T21:47:17.3798140Z 
2024-03-07T21:47:17.3798369Z PartnerInviteService
2024-03-07T21:47:17.4103331Z   should create invite
2024-03-07T21:47:17.4398328Z   should update the status of the partner to invited
2024-03-07T21:47:17.4399230Z   with force: true
2024-03-07T21:47:17.4687064Z     should send the force setting forward
2024-03-07T21:47:17.4687663Z 
2024-03-07T21:47:17.4688057Z InventoryCheckService
2024-03-07T21:47:17.4688666Z   call
2024-03-07T21:47:17.4689811Z     error
2024-03-07T21:47:17.5463568Z       should set the error
2024-03-07T21:47:17.5464263Z     alert
2024-03-07T21:47:17.6181325Z       should set the alert
2024-03-07T21:47:17.6182174Z 
2024-03-07T21:47:17.6182679Z ProductDriveHelper
2024-03-07T21:47:17.6184132Z   #is_virtual
2024-03-07T21:47:17.6185540Z     when a product drive was not provided
2024-03-07T21:47:17.6256998Z       without argument
2024-03-07T21:47:17.6302190Z       with blank argument
2024-03-07T21:47:17.6303006Z     when the product drive wasn't held virtually
2024-03-07T21:47:17.6412773Z       is expected to eq "No"
2024-03-07T21:47:17.6413590Z     when the product drive was held virtually
2024-03-07T21:47:17.6469282Z       is expected to eq "Yes"
2024-03-07T21:47:17.6470165Z 
2024-03-07T21:47:17.6470628Z DistributionReminder
2024-03-07T21:47:17.6471620Z   conditionally sending the emails
2024-03-07T21:47:17.6763014Z     does not send mail for future distributions if the partner wants no reminders
2024-03-07T21:47:17.7069789Z     sends mail for future distributions where the partner wants reminders
2024-03-07T21:47:17.7395297Z     sends mail for future distributions
2024-03-07T21:47:17.7670731Z     does not send mail for past distributions
2024-03-07T21:47:17.7672111Z     when the distribution_id does not match any Distribution
2024-03-07T21:47:17.7730971Z       does not send mail for non existent distributions
2024-03-07T21:47:17.7732030Z     when the partner is deactivated
2024-03-07T21:47:17.8099070Z       does not send mail
2024-03-07T21:47:17.8100619Z 
2024-03-07T21:47:17.8101037Z Donation
2024-03-07T21:47:17.8103097Z   Scopes >
2024-03-07T21:47:17.8104646Z     during >
2024-03-07T21:47:17.8290187Z       returns all donations created between two dates
2024-03-07T21:47:17.8290730Z     by_source >
2024-03-07T21:47:17.8291733Z       when source is a symbol
2024-03-07T21:47:17.8292708Z         when source is invalid
2024-03-07T21:47:17.8523410Z           does not throw errors, returns no results
2024-03-07T21:47:17.8524454Z         when source is valid
2024-03-07T21:47:17.8683608Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-07T21:47:17.8684427Z       when source is not a symbol
2024-03-07T21:47:17.8685017Z         when source comes from the SOURCES hash
2024-03-07T21:47:17.8848924Z           returns all donations with the provided source
2024-03-07T21:47:17.8849994Z         when source is invalid
2024-03-07T21:47:17.9010386Z           does not throw errors, returns no results
2024-03-07T21:47:17.9011151Z   Associations >
2024-03-07T21:47:17.9012208Z     items >
2024-03-07T21:47:17.9235212Z       has_many
2024-03-07T21:47:17.9235829Z   Callbacks >
2024-03-07T21:47:17.9362116Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T21:47:17.9516080Z     automatically combines duplicate line_item records when they're created
2024-03-07T21:47:17.9517116Z   Methods >
2024-03-07T21:47:17.9517836Z     source_view
2024-03-07T21:47:17.9518353Z       not from a drive
2024-03-07T21:47:17.9672772Z         returns source
2024-03-07T21:47:17.9673555Z       details
2024-03-07T21:47:17.9674118Z         donation site
2024-03-07T21:47:17.9821794Z           returns donation_site name
2024-03-07T21:47:17.9822548Z         misc
2024-03-07T21:47:17.9904048Z           returns a truncated comment
2024-03-07T21:47:17.9905006Z         product drive
2024-03-07T21:47:18.0006313Z           returns product_drive name
2024-03-07T21:47:18.0007089Z         manufacturer
2024-03-07T21:47:18.0111608Z           returns manufacturer name
2024-03-07T21:47:18.0112293Z       from a drive
2024-03-07T21:47:18.0113050Z         unknown participant
2024-03-07T21:47:18.0212390Z           returns drive display name
2024-03-07T21:47:18.0213995Z         participant known
2024-03-07T21:47:18.0214706Z           no contact name
2024-03-07T21:47:18.0333821Z             returns drive display name
2024-03-07T21:47:18.0334609Z           contact name present
2024-03-07T21:47:18.0453036Z             returns participant display name
2024-03-07T21:47:18.0453836Z     remove
2024-03-07T21:47:18.1030958Z       works with either an id or an object
2024-03-07T21:47:18.1629552Z       removes the item from the donation
2024-03-07T21:47:18.2264202Z       fails gracefully if the item doesn't exist
2024-03-07T21:47:18.2266598Z     money_raised
2024-03-07T21:47:18.2854138Z       tracks the money raised in a donation
2024-03-07T21:47:18.2855079Z   versioning
2024-03-07T21:47:18.2891871Z     is expected to be versioned
2024-03-07T21:47:18.2892567Z   Validations >
2024-03-07T21:47:18.3012066Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-07T21:47:18.3169337Z     is invalid when the line items are invalid
2024-03-07T21:47:18.3293830Z     requires a donation_site if the source is 'Donation Site'
2024-03-07T21:47:18.3414413Z     requires a product drive participant if the source is 'Product Drive'
2024-03-07T21:47:18.3479220Z     requires a source from the list of available sources
2024-03-07T21:47:18.3522576Z     requires an inventory (storage location)
2024-03-07T21:47:18.3573041Z     ensures that the issued at is no earlier than 2000
2024-03-07T21:47:18.3616840Z     must belong to an organization
2024-03-07T21:47:18.3617649Z   behaves like itemizable
2024-03-07T21:47:18.3618674Z     .to_a
2024-03-07T21:47:18.3619472Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:47:18.3960187Z         raises an error
2024-03-07T21:47:18.3960899Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:47:18.4279405Z         calls line_item_values
2024-03-07T21:47:18.4280172Z     .line_items
2024-03-07T21:47:18.4281114Z       quantities_by_name
2024-03-07T21:47:18.4616728Z         returns a hash of items with id, name, and quantity
2024-03-07T21:47:18.4960415Z         leaves out zero-quantitied items if requested
2024-03-07T21:47:18.4961125Z       total
2024-03-07T21:47:18.5294467Z         has an item total
2024-03-07T21:47:18.5295220Z       sorted
2024-03-07T21:47:18.5781182Z         displays the items, sorted by name
2024-03-07T21:47:18.5781961Z       combine!
2024-03-07T21:47:18.6233639Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:47:18.6609128Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:47:18.6610530Z   SOURCES
2024-03-07T21:47:18.6645266Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-07T21:47:18.6678917Z     the hash is immutable
2024-03-07T21:47:18.6712109Z     the hash values are immutable
2024-03-07T21:47:18.6713020Z 
2024-03-07T21:47:18.6713408Z StorageLocation
2024-03-07T21:47:18.6714552Z   versioning
2024-03-07T21:47:18.6749476Z     is expected to be versioned
2024-03-07T21:47:18.6750580Z   Callbacks >
2024-03-07T21:47:18.6751223Z     before_destroy
2024-03-07T21:47:18.7446128Z       deletes storage locations with no inventory items on it
2024-03-07T21:47:18.7826908Z       does not delete storage locations with inventory items on it
2024-03-07T21:47:18.7827814Z   Validations >
2024-03-07T21:47:18.7896665Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T21:47:18.7953280Z     is expected to validate that :organization cannot be empty/falsy
2024-03-07T21:47:18.8012934Z     is expected to validate that :address cannot be empty/falsy
2024-03-07T21:47:18.8013918Z   Filtering >
2024-03-07T21:47:18.8715220Z     ->containing yields only inventories that have that item
2024-03-07T21:47:18.8800138Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-07T21:47:18.8801190Z   Methods >
2024-03-07T21:47:18.8802209Z     item_total
2024-03-07T21:47:18.9178935Z       retrieves the total for a single item
2024-03-07T21:47:18.9179819Z     decrease_inventory
2024-03-07T21:47:19.0210005Z       decreases inventory quantities from an itemizable object
2024-03-07T21:47:19.0211071Z       when there is insufficient inventory available
2024-03-07T21:47:19.0291071Z         gives informative errors
2024-03-07T21:47:19.0367854Z         does not change inventory quantities if there is an error
2024-03-07T21:47:19.0368824Z     increase_inventory
2024-03-07T21:47:19.0369652Z       With existing inventory
2024-03-07T21:47:19.1391468Z         increases inventory quantities from an itemizable object
2024-03-07T21:47:19.1392616Z       when providing a new item that does not yet exist
2024-03-07T21:47:19.2431746Z         creates those new inventory items in the storage location
2024-03-07T21:47:19.2432658Z     StorageLocation.items_inventoried
2024-03-07T21:47:19.3231449Z       returns a collection of items that are stored within inventories
2024-03-07T21:47:19.3232119Z     csv_export_attributes
2024-03-07T21:47:19.3880609Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-07T21:47:19.3881704Z     geocode
2024-03-07T21:47:19.3985115Z       adds coordinates to the database
2024-03-07T21:47:19.3985987Z     inventory_total_value_in_dollars
2024-03-07T21:47:19.4443353Z       returns total value of all items in this storage location
2024-03-07T21:47:19.4810067Z       returns a value including cents if the total isn't an even dollar amount
2024-03-07T21:47:19.4919541Z       returns 0 when there are no items in this storage location
2024-03-07T21:47:19.4920496Z     import_inventory
2024-03-07T21:47:19.7836693Z       imports storage locations from a csv file
2024-03-07T21:47:19.7837543Z     import_csv
2024-03-07T21:47:19.7958189Z       imports storage locations from a csv file
2024-03-07T21:47:19.7958902Z     size
2024-03-07T21:47:19.8431800Z       returns total quantity of all items in this storage location
2024-03-07T21:47:19.8432492Z 
2024-03-07T21:47:19.8432943Z Reports::PartnerInfoReportService
2024-03-07T21:47:19.8433595Z   #report
2024-03-07T21:47:20.0776116Z     should report normal values
2024-03-07T21:47:20.2447412Z     should report zero values
2024-03-07T21:47:20.2448400Z 
2024-03-07T21:47:20.2448735Z DistributionContentChangeService
2024-03-07T21:47:20.2450048Z   #any_change?
2024-03-07T21:47:20.2451469Z     when there are line items updated
2024-03-07T21:47:20.2487832Z       returns true
2024-03-07T21:47:20.2488579Z     when there are line items removed
2024-03-07T21:47:20.2520001Z       returns true
2024-03-07T21:47:20.2520643Z     when there are no changes in the line items
2024-03-07T21:47:20.2553898Z       returns true
2024-03-07T21:47:20.2554527Z     when there are line items removed and updated
2024-03-07T21:47:20.2587730Z       returns true
2024-03-07T21:47:20.2588444Z   #changes
2024-03-07T21:47:20.2589019Z     when there are line items removed and updated
2024-03-07T21:47:20.2621262Z       returns true
2024-03-07T21:47:20.2621748Z 
2024-03-07T21:47:20.2622046Z RequestsConfirmationMailer
2024-03-07T21:47:20.2898028Z   handles duplicates
2024-03-07T21:47:20.3173798Z   pairs the right quantities with the right item names
2024-03-07T21:47:20.3174500Z   #confirmation_email
2024-03-07T21:47:20.3430270Z     renders the body
2024-03-07T21:47:20.3568396Z     renders the headers
2024-03-07T21:47:20.3568826Z 
2024-03-07T21:47:20.3569192Z Exports::ExportDistributionsCSVService
2024-03-07T21:47:20.3570128Z   #generate_csv_data
2024-03-07T21:47:20.5370900Z     should match the expected content for the csv
2024-03-07T21:47:20.5371775Z     when a new item is added
2024-03-07T21:47:20.7217960Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-07T21:47:20.8997564Z       should add it to the end of the row
2024-03-07T21:47:20.8998873Z     when there are no distributions but the report is requested
2024-03-07T21:47:21.2409482Z       returns a csv with only headers and no rows
2024-03-07T21:47:21.2410250Z 
2024-03-07T21:47:21.2410814Z Request
2024-03-07T21:47:21.2411377Z   total_items
2024-03-07T21:47:21.2523486Z     adds the quantity of all items in the request
2024-03-07T21:47:21.2524289Z   Enums >
2024-03-07T21:47:21.2524643Z     #status
2024-03-07T21:47:21.2728362Z       scopes
2024-03-07T21:47:21.2729127Z   versioning
2024-03-07T21:47:21.2767658Z     is expected to be versioned
2024-03-07T21:47:21.2768431Z   item data
2024-03-07T21:47:21.2845165Z     coerces item quantity and id to always be an integer before saving
2024-03-07T21:47:21.2845915Z 
2024-03-07T21:47:21.2846217Z Partners::ServedArea
2024-03-07T21:47:21.2992276Z   must only allow integer client shares
2024-03-07T21:47:21.3235764Z   must only allow valid client share values
2024-03-07T21:47:21.3284596Z   is expected to belong to county required: true
2024-03-07T21:47:21.3331232Z   is expected to belong to partner_profile required: true
2024-03-07T21:47:21.3332613Z   versioning
2024-03-07T21:47:21.3369438Z     is expected to be versioned
2024-03-07T21:47:21.3369884Z 
2024-03-07T21:47:21.3370398Z EventDiffer
2024-03-07T21:47:21.5309930Z   should return a full diff
2024-03-07T21:47:21.5310475Z 
2024-03-07T21:47:21.5310820Z Reports::SummaryReportService
2024-03-07T21:47:21.5311665Z   #report
2024-03-07T21:47:21.7044733Z     should report zero values
2024-03-07T21:47:22.1465238Z     should report negative values
2024-03-07T21:47:22.5939304Z     should report positive values
2024-03-07T21:47:22.5939935Z 
2024-03-07T21:47:22.5940116Z Deadlinable
2024-03-07T21:47:22.5940898Z   validations
2024-03-07T21:47:22.6024238Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T21:47:22.6098553Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T21:47:22.6140939Z     validates that reminder day is not the same as deadline day
2024-03-07T21:47:22.6141557Z 
2024-03-07T21:47:22.6141799Z PartnerCreateService
2024-03-07T21:47:22.6142571Z   #call
2024-03-07T21:47:22.7915793Z     should return an instance of itself
2024-03-07T21:47:22.7916546Z     when the arguments are valid
2024-03-07T21:47:22.9831994Z       should create a new partner record with the organization provided
2024-03-07T21:47:23.1701886Z       should create the associated partner profile data
2024-03-07T21:47:23.1703127Z       but there was an unexpected issue with saving the
2024-03-07T21:47:23.1703911Z         Partner record
2024-03-07T21:47:23.3564141Z           should not create the partner record for the organization
2024-03-07T21:47:23.5320292Z           should not create the associated partner records
2024-03-07T21:47:23.5321266Z         Partners::Profile record
2024-03-07T21:47:23.7155040Z           should not create the associated partner records
2024-03-07T21:47:23.8967349Z           should not create the partner record for the organization
2024-03-07T21:47:23.8968593Z     when the arguments are incorrect
2024-03-07T21:47:23.8969342Z       beacuse the partner_attrs are invalid
2024-03-07T21:47:24.0720903Z         should contain errors related to invalid partner attributes
2024-03-07T21:47:24.0721941Z 
2024-03-07T21:47:24.0722188Z ApplicationHelper
2024-03-07T21:47:24.0724963Z   can_administrate?
2024-03-07T21:47:24.0726303Z     User is org admin and part of org
2024-03-07T21:47:24.0950828Z       can administrate
2024-03-07T21:47:24.0951587Z     User is part of org but not org admin
2024-03-07T21:47:24.1087275Z       cannot administrate
2024-03-07T21:47:24.1088049Z     User is org admin and not part of org
2024-03-07T21:47:24.2959212Z       cannot administrate
2024-03-07T21:47:24.2959935Z   flash_class
2024-03-07T21:47:24.3009111Z     returns appropriate class for alert
2024-03-07T21:47:24.3051365Z     returns appropriate class for error
2024-03-07T21:47:24.3091087Z     returns appropriate class for notice
2024-03-07T21:47:24.3132239Z     returns appropriate class for success
2024-03-07T21:47:24.3134836Z   confirm_delete_msg
2024-03-07T21:47:24.3176421Z     subs in string
2024-03-07T21:47:24.3177037Z   default_title_content
2024-03-07T21:47:24.3178215Z     Organization exists
2024-03-07T21:47:24.4888065Z       returns the organization's name
2024-03-07T21:47:24.4888886Z     Organization does not exist
2024-03-07T21:47:24.4939050Z       returns a default name
2024-03-07T21:47:24.4939780Z   active_class
2024-03-07T21:47:24.4981603Z     Returns the controller name
2024-03-07T21:47:24.4982359Z   step_container_helper
2024-03-07T21:47:24.4983290Z     active_index is greater than index
2024-03-07T21:47:24.5025034Z       returns done
2024-03-07T21:47:24.5025714Z     active_index is less than index
2024-03-07T21:47:24.5067243Z       returns empty string
2024-03-07T21:47:24.5068127Z     active_index is equal to index
2024-03-07T21:47:24.5109547Z       returns active
2024-03-07T21:47:24.5110596Z 
2024-03-07T21:47:24.5111080Z ProfileUpdateService
2024-03-07T21:47:24.5111913Z   #update
2024-03-07T21:47:24.5358297Z     updates the profile with the filtered and prepared params
2024-03-07T21:47:24.5359033Z 
2024-03-07T21:47:24.5359356Z Vendor
2024-03-07T21:47:24.5360215Z   Methods
2024-03-07T21:47:24.5361051Z     volume
2024-03-07T21:47:24.6058585Z       retrieves the amount of product that has been bought from this vendor
2024-03-07T21:47:24.6059583Z   versioning
2024-03-07T21:47:24.6096321Z     is expected to be versioned
2024-03-07T21:47:24.6097445Z   behaves like provideable
2024-03-07T21:47:24.6098196Z     geocode
2024-03-07T21:47:24.6155087Z       adds coordinates to the database
2024-03-07T21:47:24.6155985Z     Validations
2024-03-07T21:47:24.6218274Z       is invalid unless it has either a contact name or a business name
2024-03-07T21:47:24.6251577Z       is invalid without an organization
2024-03-07T21:47:24.6255450Z     import_csv
2024-03-07T21:47:24.8032275Z       imports from a csv file
2024-03-07T21:47:24.8033182Z 
2024-03-07T21:47:24.8035006Z Manufacturer
2024-03-07T21:47:24.8035510Z   versioning
2024-03-07T21:47:24.8071895Z     is expected to be versioned
2024-03-07T21:47:24.8072633Z   Validations
2024-03-07T21:47:24.8159891Z     must have a unique name within organization
2024-03-07T21:47:24.9858178Z     must belong to an organization
2024-03-07T21:47:24.9859010Z   Methods
2024-03-07T21:47:24.9859435Z     volume
2024-03-07T21:47:25.1156399Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-07T21:47:25.1755295Z       retrieves the amount of product that has been donated by manufacturer
2024-03-07T21:47:25.3031064Z       ignores the amount of product from other manufacturers
2024-03-07T21:47:25.3032215Z   Private Methods
2024-03-07T21:47:25.3032948Z     #exists_in_org?
2024-03-07T21:47:25.4812958Z       returns true if manufacturer exists in an organization
2024-03-07T21:47:25.4813713Z 
2024-03-07T21:47:25.4813968Z Partners::ItemRequest
2024-03-07T21:47:25.4814876Z   versioning
2024-03-07T21:47:25.4912854Z     is expected to be versioned
2024-03-07T21:47:25.4913434Z   validations
2024-03-07T21:47:25.4977753Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T21:47:25.5035234Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-07T21:47:25.5091452Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-07T21:47:25.5151532Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-07T21:47:25.5152517Z   associations
2024-03-07T21:47:25.5205070Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T21:47:25.5241353Z     is expected to have many children through child_item_requests
2024-03-07T21:47:25.5281533Z     is expected to belong to request class_name => ::Request required: true
2024-03-07T21:47:25.5282503Z 
2024-03-07T21:47:25.5282767Z DonationDestroyService
2024-03-07T21:47:25.5283395Z   #call
2024-03-07T21:47:25.5284951Z     when the donation succesfully gets destroyed
2024-03-07T21:47:25.5552747Z       to be a success
2024-03-07T21:47:25.5553438Z     when the donation destroy fails
2024-03-07T21:47:25.5603319Z       to not be a success
2024-03-07T21:47:25.5604161Z     when the organization_id matches no Organization
2024-03-07T21:47:25.5640027Z       to not be a success
2024-03-07T21:47:25.5640765Z     when the donation_id matches no Donation owned by the organization
2024-03-07T21:47:25.5680903Z       to not be a success
2024-03-07T21:47:25.5681533Z     when storage_location fails to decrease the inventory of the donation
2024-03-07T21:47:25.5727058Z       to not be a success
2024-03-07T21:47:25.5730491Z 
2024-03-07T21:47:25.5730684Z AccountRequest
2024-03-07T21:47:25.5939598Z   #reject!
2024-03-07T21:47:25.6060805Z   #confirm!
2024-03-07T21:47:25.6061827Z   #processed?
2024-03-07T21:47:25.6063022Z     when the account request has no associated organization
2024-03-07T21:47:25.6157416Z       should return false
2024-03-07T21:47:25.6158231Z     when the account request has a associated organization
2024-03-07T21:47:25.7967168Z       should return true
2024-03-07T21:47:25.7967917Z   validations
2024-03-07T21:47:25.8101992Z     is expected to validate that the length of :request_details is at least 50
2024-03-07T21:47:25.8225063Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-07T21:47:25.8366297Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T21:47:25.8469961Z     is expected to allow :email to be ‹"armando@langosh-hilpert.test"›
2024-03-07T21:47:25.8571238Z     is expected not to allow :email to be ‹"not_email"›
2024-03-07T21:47:25.8705971Z     is expected to validate that :email is case-sensitively unique
2024-03-07T21:47:25.8857821Z     is expected to validate that :email cannot be empty/falsy
2024-03-07T21:47:25.8858647Z     when the email provided is already used by an existing user
2024-03-07T21:47:25.9058078Z       should not allow the email
2024-03-07T21:47:25.9058796Z     when the email provided is already used by an existing organization
2024-03-07T21:47:26.0876398Z       should not allow the email
2024-03-07T21:47:26.0877453Z   #identity_token
2024-03-07T21:47:26.0973671Z     should return a JWT token that contains the id of the account_request_id
2024-03-07T21:47:26.0974847Z     when the account_request is not persisted
2024-03-07T21:47:26.1061179Z       should raise an error
2024-03-07T21:47:26.1061894Z   associations
2024-03-07T21:47:26.1119749Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-07T21:47:26.1155471Z     is expected to have one organization class_name => Organization
2024-03-07T21:47:26.1156184Z   versioning
2024-03-07T21:47:26.1190410Z     is expected to be versioned
2024-03-07T21:47:26.1191154Z   .get_by_identity_token
2024-03-07T21:47:26.1192031Z     when the identity_token corresponds to an existing AccountRequest
2024-03-07T21:47:26.1282567Z       should return the corresponding AccountRequest
2024-03-07T21:47:26.1283679Z     when the identity_token provided does not match any AccountRequest
2024-03-07T21:47:26.1315646Z       should return nil
2024-03-07T21:47:26.1316486Z 
2024-03-07T21:47:26.1316906Z Partners::RequestCreateService
2024-03-07T21:47:26.1317807Z   #call
2024-03-07T21:47:26.1318923Z     when the arguments are correct
2024-03-07T21:47:26.1712135Z       should create a Request record
2024-03-07T21:47:26.2080355Z       should notify the Partner via email
2024-03-07T21:47:26.2446979Z       should have no errors
2024-03-07T21:47:26.2447783Z       but a unexpected error occured during the save
2024-03-07T21:47:26.2448670Z         for the Request record
2024-03-07T21:47:26.2795559Z           should NOT create a Request record
2024-03-07T21:47:26.3138236Z           should have an error with the raised error
2024-03-07T21:47:26.3485850Z           should NOT notify the Partner via email
2024-03-07T21:47:26.3486845Z     when the arguments are incorrect
2024-03-07T21:47:26.3487739Z       because a unrecogonized item_id was provided
2024-03-07T21:47:26.3788438Z         should return the Request object with an error
2024-03-07T21:47:26.3789306Z       because no item_requests_attributes and comments were defined
2024-03-07T21:47:26.4086594Z         should return the Request object with an error
2024-03-07T21:47:26.4087523Z 
2024-03-07T21:47:26.4087746Z DistributionsController
2024-03-07T21:47:26.4088479Z   While signed in
2024-03-07T21:47:26.4089288Z     POST #create
2024-03-07T21:47:26.4090568Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-07T21:47:26.5054966Z         redirects with a flash notice and a flash error
2024-03-07T21:47:26.5056397Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-07T21:47:26.5862349Z         redirects with a flash notice and a flash alert
2024-03-07T21:47:26.5863293Z       when line item quantity is not positive
2024-03-07T21:47:26.6391714Z         flashes an error
2024-03-07T21:47:26.6392691Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T21:47:26.7176233Z         redirects with a flash notice and a flash error
2024-03-07T21:47:26.7177717Z     PUT #update
2024-03-07T21:47:26.7178534Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T21:47:26.8275621Z         redirects with a flash notice and a flash error
2024-03-07T21:47:26.8276824Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-07T21:47:26.9381500Z         redirects with a flash notice and a flash error
2024-03-07T21:47:26.9382524Z       when distribution has items updated for minimum quantity
2024-03-07T21:47:27.0635962Z         redirects with a flash notice and send send_notification
2024-03-07T21:47:27.0637182Z 
2024-03-07T21:47:27.0637392Z Item
2024-03-07T21:47:27.0639455Z   Assocations >
2024-03-07T21:47:27.0689999Z     is expected to belong to item_category optional: true
2024-03-07T21:47:27.0691073Z   after update
2024-03-07T21:47:27.0691683Z     when item does not have kit
2024-03-07T21:47:27.0870553Z       does not raise any errors
2024-03-07T21:47:27.0871442Z     when item has the kit
2024-03-07T21:47:27.2801606Z       updates kit name
2024-03-07T21:47:27.2802262Z   Filtering >
2024-03-07T21:47:27.2990858Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T21:47:27.3259347Z     ->active shows items that are still active
2024-03-07T21:47:27.3292887Z     can filter
2024-03-07T21:47:27.3498315Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T21:47:27.3499605Z     ->by_base_item
2024-03-07T21:47:27.3652959Z       shows the items for a particular base_item
2024-03-07T21:47:27.5627103Z       can be chained to organization to constrain it to just 1 org's items
2024-03-07T21:47:27.5628175Z     ->cloth_diapers
2024-03-07T21:47:27.5904175Z       returns records associated with disposable diapers
2024-03-07T21:47:27.5905335Z     ->disposable
2024-03-07T21:47:27.6177652Z       returns records associated with disposable diapers
2024-03-07T21:47:27.6178642Z     ->by_partner_key
2024-03-07T21:47:27.6336260Z       filters by partner key
2024-03-07T21:47:27.6336980Z   default_quantity
2024-03-07T21:47:27.6417978Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-07T21:47:27.6496429Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-07T21:47:27.6577912Z     should return the value of distribution_quantity if it is set
2024-03-07T21:47:27.6654102Z     should return 50 if column is not set
2024-03-07T21:47:27.6655175Z   distribution_quantity and package size
2024-03-07T21:47:27.6779942Z     have nil values if an empty string is passed
2024-03-07T21:47:27.6780762Z   Methods >
2024-03-07T21:47:27.6781642Z     #reactivate!
2024-03-07T21:47:27.6782691Z       given an array of item ids
2024-03-07T21:47:27.7002353Z         sets the active trait to true for all of them
2024-03-07T21:47:27.7003241Z       given a single item id
2024-03-07T21:47:27.7130118Z         sets the active trait to true for that item
2024-03-07T21:47:27.7131139Z     other?
2024-03-07T21:47:27.7251012Z       is true for items that are partner_key 'other'
2024-03-07T21:47:27.7251847Z     destroy
2024-03-07T21:47:27.7482775Z       only hides an item that has history
2024-03-07T21:47:27.9648145Z       deactivates the kit if it exists
2024-03-07T21:47:27.9849368Z       actually destroys an item that doesn't have history
2024-03-07T21:47:27.9850282Z     barcoded_items >
2024-03-07T21:47:28.0239350Z       returns a collection of items that have barcodes associated with them
2024-03-07T21:47:28.0240645Z     storage_locations_containing
2024-03-07T21:47:28.0598388Z       retrieves all storage locations that contain an item
2024-03-07T21:47:28.0599475Z     has_history?
2024-03-07T21:47:28.1320568Z       identifies items that have been used previously
2024-03-07T21:47:28.1321474Z     barcodes_for
2024-03-07T21:47:28.1517063Z       retrieves all BarcodeItems associated with an item
2024-03-07T21:47:28.1517971Z   versioning
2024-03-07T21:47:28.1553786Z     is expected to be versioned
2024-03-07T21:47:28.1554671Z   Validations >
2024-03-07T21:47:28.1669437Z     requires that items quantity are not a negative number
2024-03-07T21:47:28.1797261Z     requires a unique name
2024-03-07T21:47:28.1844025Z     requires a Base Item base
2024-03-07T21:47:28.1895669Z     must belong to an organization
2024-03-07T21:47:28.1896226Z 
2024-03-07T21:47:28.1896651Z Exports::ExportRequestService
2024-03-07T21:47:28.1897852Z   .generate_csv_data
2024-03-07T21:47:28.3982127Z     includes rows for each request with correct columns of item quantity
2024-03-07T21:47:28.6007648Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-07T21:47:28.6009466Z 
2024-03-07T21:47:28.6009894Z DispersedPastDatesGenerator
2024-03-07T21:47:28.6011106Z   #next
2024-03-07T21:47:28.6066441Z     returns equally dispersed dates between all time ranges
2024-03-07T21:47:28.6067378Z   constants
2024-03-07T21:47:28.6099850Z     has 4 day ranges for generation of past dates
2024-03-07T21:47:28.6100432Z 
2024-03-07T21:47:28.6100669Z RequestDestroyService
2024-03-07T21:47:28.6101534Z   #call
2024-03-07T21:47:28.6224398Z     should return an instance of itself
2024-03-07T21:47:28.6225123Z     when the request is already discarded
2024-03-07T21:47:28.6331047Z       should not be successful and have errors
2024-03-07T21:47:28.6331635Z     when the request_id matches no request
2024-03-07T21:47:28.6369795Z       should not be successful and have errors indicating request id is invalid
2024-03-07T21:47:28.6370889Z     when the request's partner is deactivated
2024-03-07T21:47:28.6645983Z       should have errors
2024-03-07T21:47:28.6646952Z     when there are no validation errors
2024-03-07T21:47:28.6780403Z       should update the status column on the request
2024-03-07T21:47:28.6898928Z       should send a email notification to the partner
2024-03-07T21:47:28.7028070Z       should update the discarded_at column on the request
2024-03-07T21:47:28.7028904Z 
2024-03-07T21:47:28.7029290Z Partners::Child
2024-03-07T21:47:28.7030405Z   associations
2024-03-07T21:47:28.7164543Z     is expected to belong to family required: true
2024-03-07T21:47:28.7204837Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T21:47:28.7205481Z   #display_name
2024-03-07T21:47:28.7664801Z     should return a child's first and last name
2024-03-07T21:47:28.7665488Z   versioning
2024-03-07T21:47:28.7700501Z     is expected to be versioned
2024-03-07T21:47:28.7701202Z 
2024-03-07T21:47:28.7701517Z Reports::ChildrenServedReportService
2024-03-07T21:47:28.7702804Z   #disposable_diapers_from_kits_total
2024-03-07T21:47:29.0556419Z     calculates the number of disposable diapers that have been distributed within kits (FAILED - 1)
2024-03-07T21:47:29.0557271Z   #report
2024-03-07T21:47:29.2269644Z     should report zero values
2024-03-07T21:47:29.8101260Z     should report normal values
2024-03-07T21:47:30.3857370Z     should work with no distribution_quantity
2024-03-07T21:47:30.3857987Z 
2024-03-07T21:47:30.3858268Z AddRoleService
2024-03-07T21:47:30.3859958Z   #call
2024-03-07T21:47:30.3860490Z     when the role does not yet exist
2024-03-07T21:47:30.5805514Z       should add the user role when asked to add admin
2024-03-07T21:47:30.7937846Z       works with a partner
2024-03-07T21:47:30.9831356Z       works with super admin
2024-03-07T21:47:31.1749833Z       should add the role
2024-03-07T21:47:31.1750637Z     when the role already exists
2024-03-07T21:47:31.3645551Z       should raise an error for super admin
2024-03-07T21:47:31.5602931Z       should raise an error
2024-03-07T21:47:31.5604061Z 
2024-03-07T21:47:31.5604397Z PartnerGroup
2024-03-07T21:47:31.5605995Z   associations
2024-03-07T21:47:31.5714326Z     is expected to belong to organization required: true
2024-03-07T21:47:31.5749395Z     is expected to have many partners
2024-03-07T21:47:31.5808563Z     is expected to have and belong to many item_categories
2024-03-07T21:47:31.5809656Z   Validations >
2024-03-07T21:47:31.6047402Z     does not require a unique name between organizations
2024-03-07T21:47:31.6142523Z     requires a unique name within an organization
2024-03-07T21:47:31.6185130Z     must belong to an organization
2024-03-07T21:47:31.6186087Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-07T21:47:31.6236371Z       should not be valid
2024-03-07T21:47:31.6237467Z   versioning
2024-03-07T21:47:31.6271348Z     is expected to be versioned
2024-03-07T21:47:31.6272234Z   DB constraints
2024-03-07T21:47:31.6272858Z     send_reminders IS NOT NULL
2024-03-07T21:47:31.6341264Z       raises error if unmet
2024-03-07T21:47:31.6342103Z     deadline_day <= 28
2024-03-07T21:47:31.6408689Z       raises error if unmet
2024-03-07T21:47:31.6409465Z     reminder_day <= 28
2024-03-07T21:47:31.6476432Z       raises error if unmet
2024-03-07T21:47:31.6477169Z 
2024-03-07T21:47:31.6478674Z Reports::AcquisitionReportService
2024-03-07T21:47:31.6479275Z   acquisition report
2024-03-07T21:47:32.7790603Z     should return the proper results on #report
2024-03-07T21:47:33.7115927Z     returns the correct quantity of disposable diapers from kits
2024-03-07T21:47:33.7116690Z 
2024-03-07T21:47:33.7117015Z OrganizationUpdateService
2024-03-07T21:47:33.7117955Z   #update_partner_flags
2024-03-07T21:47:33.7118575Z     when request flags have changed
2024-03-07T21:47:33.9257538Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-07T21:47:34.1505911Z       should update partners when disabling child and individual request flags
2024-03-07T21:47:34.3654176Z       should update partners when disabling quantity-based request flags
2024-03-07T21:47:34.3655244Z     when request flags haven't changed
2024-03-07T21:47:34.5844473Z       should not update partners
2024-03-07T21:47:34.5845291Z   #update
2024-03-07T21:47:34.5845863Z     when object is valid
2024-03-07T21:47:34.7584539Z       should update and return true
2024-03-07T21:47:34.7585317Z     when organization has partners
2024-03-07T21:47:34.7586464Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-07T21:47:34.9922275Z         should allow the disabling of request flags in organization and its partners
2024-03-07T21:47:34.9923372Z       when all of a single partner's request flags will be disabled
2024-03-07T21:47:35.2059901Z         should add an error message to the organization
2024-03-07T21:47:35.4224929Z         should NOT change request flags in organization or its partners
2024-03-07T21:47:35.4225947Z     when object is invalid
2024-03-07T21:47:35.6012401Z       should not update and return false
2024-03-07T21:47:35.6013106Z 
2024-03-07T21:47:35.6013327Z PartnerMailerJob
2024-03-07T21:47:35.6014154Z   conditionally sending the emails
2024-03-07T21:47:35.9017500Z     sends mail for future distributions immediately
2024-03-07T21:47:36.0989800Z     does not send mail for past distributions
2024-03-07T21:47:36.0991083Z     when the distribution is for a deactivated partner
2024-03-07T21:47:36.4636751Z       does not send the email
2024-03-07T21:47:36.4638493Z 
2024-03-07T21:47:36.4638746Z Distribution
2024-03-07T21:47:36.4640832Z   behaves like itemizable
2024-03-07T21:47:36.4641794Z     .line_items
2024-03-07T21:47:36.4643011Z       quantities_by_name
2024-03-07T21:47:36.5495797Z         returns a hash of items with id, name, and quantity
2024-03-07T21:47:36.6352000Z         leaves out zero-quantitied items if requested
2024-03-07T21:47:36.6352657Z       sorted
2024-03-07T21:47:36.7549730Z         displays the items, sorted by name
2024-03-07T21:47:36.7550529Z       total
2024-03-07T21:47:36.8427953Z         has an item total
2024-03-07T21:47:36.8428773Z       combine!
2024-03-07T21:47:36.8984039Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:47:36.9405612Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:47:36.9406914Z     .to_a
2024-03-07T21:47:36.9407555Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:47:36.9745600Z         calls line_item_values
2024-03-07T21:47:36.9746618Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:47:37.0063996Z         raises an error
2024-03-07T21:47:37.0064604Z   versioning
2024-03-07T21:47:37.0097843Z     is expected to be versioned
2024-03-07T21:47:37.0098399Z   Scopes >
2024-03-07T21:47:37.0099968Z     during >
2024-03-07T21:47:37.0791000Z       returns all distributions created between two dates
2024-03-07T21:47:37.0791738Z     this_week >
2024-03-07T21:47:37.0792470Z       When it's Tuesday (mid-week)
2024-03-07T21:47:37.1481849Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-07T21:47:37.1482701Z       When it's Sunday (end of the week)
2024-03-07T21:47:37.1949176Z         doesn't include distributions past Sunday
2024-03-07T21:47:37.1950030Z     by_location >
2024-03-07T21:47:37.2431054Z       only returns distributions with given location id
2024-03-07T21:47:37.2431887Z     by_partner >
2024-03-07T21:47:37.2900554Z       only returns distributions with given partner id
2024-03-07T21:47:37.2901586Z     by_item_id >
2024-03-07T21:47:37.4194361Z       only returns distributions with given item id
2024-03-07T21:47:37.4195445Z   Validations >
2024-03-07T21:47:37.4254193Z     ensures that the issued at is no earlier than 2000
2024-03-07T21:47:37.4286438Z     ensures that any included items are found in the associated storage location
2024-03-07T21:47:37.4663005Z     ensures the associated line_items are valid
2024-03-07T21:47:37.4809433Z     ensures the associated line_items are invalid with a zero quantity
2024-03-07T21:47:37.4855507Z     requires a storage location
2024-03-07T21:47:37.5026866Z     ensures the associated line_items are invalid with a nil quantity
2024-03-07T21:47:37.5075535Z     must belong to an organization
2024-03-07T21:47:37.5121669Z     requires a partner
2024-03-07T21:47:37.5122479Z     when delivery method is other then shipped
2024-03-07T21:47:37.5370233Z       allows to save distribution
2024-03-07T21:47:37.5371101Z     when delivery method is shipped
2024-03-07T21:47:37.5371830Z       shipping cost is none negative
2024-03-07T21:47:37.5619541Z         allows to save distribution
2024-03-07T21:47:37.5620392Z       shipping cost is negative
2024-03-07T21:47:37.5675673Z         will not allow to save distribution
2024-03-07T21:47:37.5676508Z   CSV export >
2024-03-07T21:47:37.5677280Z     csv_export_attributes
2024-03-07T21:47:37.9644015Z       returns the set of attributes which define a row in case of distribution export
2024-03-07T21:47:37.9645314Z     for_csv_export >
2024-03-07T21:47:38.2927662Z       filters only to the given filter
2024-03-07T21:47:38.6161266Z       filters only to the given organization
2024-03-07T21:47:38.9363058Z       filters only to the given issue time range
2024-03-07T21:47:38.9363977Z   Callbacks >
2024-03-07T21:47:38.9823723Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T21:47:38.9824905Z     #before_save
2024-03-07T21:47:38.9825649Z       #reset_shipping_cost
2024-03-07T21:47:38.9826386Z         when delivery_method is other then shipped
2024-03-07T21:47:39.0082414Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-07T21:47:39.0083525Z   Methods >
2024-03-07T21:47:39.0085611Z     #copy_from_request
2024-03-07T21:47:39.0312966Z       copy over relevant request information into the distrubution
2024-03-07T21:47:39.0314011Z     #future?
2024-03-07T21:47:39.0314541Z       when issued_at has not passed
2024-03-07T21:47:39.0571248Z         returns true
2024-03-07T21:47:39.0571814Z       when issued_at has passed
2024-03-07T21:47:39.0830892Z         returns false
2024-03-07T21:47:39.0831743Z     #copy_line_items
2024-03-07T21:47:39.1236876Z       replicates line_items from a donation into a distribution
2024-03-07T21:47:39.1237710Z     #distributed_at
2024-03-07T21:47:39.1493414Z       shows the hour and minutes if it has been provided
2024-03-07T21:47:39.1948594Z       displays explicit issued_at date
2024-03-07T21:47:39.1949391Z     #combine_duplicates
2024-03-07T21:47:39.2423031Z       condenses duplicate line_items if the item_ids match
2024-03-07T21:47:39.2424426Z 
2024-03-07T21:47:39.2424685Z DonationsController
2024-03-07T21:47:39.2426152Z   calculating total money raised for all donations
2024-03-07T21:47:39.2468546Z     returns zero for an empty array of donations
2024-03-07T21:47:39.2596918Z     correctly calculates the total
2024-03-07T21:47:39.2597493Z   While signed in as a normal user >
2024-03-07T21:47:39.2598847Z     GET #index
2024-03-07T21:47:39.2755942Z       returns http success
2024-03-07T21:47:39.2756473Z     GET #new
2024-03-07T21:47:39.2880610Z       returns http success
2024-03-07T21:47:39.2881124Z     PUT#update
2024-03-07T21:47:39.3230465Z       redirects to index after update
2024-03-07T21:47:39.4252854Z       updates storage quantity correctly
2024-03-07T21:47:39.4253715Z       when removing a line item
2024-03-07T21:47:39.5234523Z         updates storage invetory item quantity correctly
2024-03-07T21:47:39.5235259Z       when changing storage location
2024-03-07T21:47:39.6239499Z         updates storage quantity correctly
2024-03-07T21:47:39.6277322Z         rolls back updates if quantity would go below 0
2024-03-07T21:47:39.6277898Z     GET #show
2024-03-07T21:47:39.6431867Z       returns http success
2024-03-07T21:47:39.6432325Z     DELETE #destroy
2024-03-07T21:47:39.6577536Z       redirects to the dashboard path
2024-03-07T21:47:39.6578035Z     GET #edit
2024-03-07T21:47:39.6767158Z       returns http success
2024-03-07T21:47:39.6767750Z     POST#create
2024-03-07T21:47:39.7142654Z       redirects to GET#edit on success
2024-03-07T21:47:39.7321155Z       renders GET#new with error on failure
2024-03-07T21:47:39.7321885Z   While signed in as an organization admin >
2024-03-07T21:47:39.7322512Z     DELETE #destroy
2024-03-07T21:47:39.7614806Z       redirects to the index
2024-03-07T21:47:39.7615449Z   calculating total value of multiple donations
2024-03-07T21:47:39.7652379Z     returns zero for an empty array of donations
2024-03-07T21:47:39.8911534Z     works correctly for multiple line items per donation
2024-03-07T21:47:39.8912164Z 
2024-03-07T21:47:39.8912418Z TextInterpolatorService
2024-03-07T21:47:39.8913460Z   #call
2024-03-07T21:47:39.9020377Z     returns interpolated text
2024-03-07T21:47:39.9020966Z     when text is empty
2024-03-07T21:47:39.9060442Z       returns empty string
2024-03-07T21:47:39.9061000Z     when interpolations are empty
2024-03-07T21:47:39.9096598Z       returns text
2024-03-07T21:47:39.9097061Z     when text is nil
2024-03-07T21:47:39.9128676Z       returns nil
2024-03-07T21:47:39.9129172Z     when interpolations are nil
2024-03-07T21:47:39.9164627Z       returns text
2024-03-07T21:47:39.9165152Z     when interpolations are not present
2024-03-07T21:47:39.9201506Z       returns text
2024-03-07T21:47:39.9202450Z 
2024-03-07T21:47:39.9202717Z ProductDrive
2024-03-07T21:47:40.1471916Z   calculates and returns all donated organization item quantities by name and date
2024-03-07T21:47:40.2812595Z   calculates donation quantity
2024-03-07T21:47:40.5015718Z   calculates donation quantity by date
2024-03-07T21:47:40.9991554Z   calculates and returns all donated organization item quantities by category and date
2024-03-07T21:47:41.1390700Z   calculates in-kind value
2024-03-07T21:47:41.1391314Z   versioning
2024-03-07T21:47:41.2720373Z     is expected to be versioned
2024-03-07T21:47:41.2720982Z   donation_source_view
2024-03-07T21:47:41.4029746Z     returns formatted text
2024-03-07T21:47:41.4030302Z   validations
2024-03-07T21:47:41.5469748Z     is expected not to be valid
2024-03-07T21:47:41.6835064Z     is expected not to be valid
2024-03-07T21:47:41.8232268Z     is expected not to be valid
2024-03-07T21:47:41.8232917Z   .search_date_range
2024-03-07T21:47:41.9601705Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-07T21:47:41.9602572Z   scopes
2024-03-07T21:47:41.9602929Z     .within_date_range
2024-03-07T21:47:42.0951739Z       returns the product drive 1
2024-03-07T21:47:42.2346831Z       does not include product drive 2
2024-03-07T21:47:42.2347452Z     .by_name
2024-03-07T21:47:42.3754061Z       returns the product_drive with name some_name
2024-03-07T21:47:42.5178368Z       does not return other_name
2024-03-07T21:47:42.5179011Z     .by_item_category_id
2024-03-07T21:47:42.8403748Z       returns the product_drive with name some_name
2024-03-07T21:47:43.1779817Z       does not return other_name
2024-03-07T21:47:43.1780450Z   distinct_items
2024-03-07T21:47:43.5189480Z     counts the items correctly for 1 donation with multiple items
2024-03-07T21:47:43.8593598Z     counts the distinct items correctly in overlapping donations
2024-03-07T21:47:44.2097666Z     counts the distinct items correctly by given category
2024-03-07T21:47:44.5416044Z     counts the distinct items correctly by given date
2024-03-07T21:47:44.8840288Z     doesn't double_count the items if there are two donations for the same item
2024-03-07T21:47:44.8840896Z   associations
2024-03-07T21:47:44.9712541Z     has_many donations
2024-03-07T21:47:45.0554759Z     has_many product_drive_participants through donations
2024-03-07T21:47:45.0555371Z 
2024-03-07T21:47:45.0555601Z OrganizationMailer
2024-03-07T21:47:45.0556715Z   #partner_approval_request
2024-03-07T21:47:45.0829428Z     includes a link to the relevant partner
2024-03-07T21:47:45.1074752Z     renders the body with correct text with partner information
2024-03-07T21:47:45.1334307Z     should be sent to the partner main email with the correct subject line
2024-03-07T21:47:45.1335188Z 
2024-03-07T21:47:45.1335857Z Partners::FetchPartnersToRemindNowService
2024-03-07T21:47:45.1336528Z   .fetch
2024-03-07T21:47:45.1337618Z     when there is a partner
2024-03-07T21:47:45.1339054Z       that does NOT have a organization with a global reminder & deadline
2024-03-07T21:47:45.1340005Z         and is a part of a partner group that does have them defined
2024-03-07T21:47:45.1340692Z           that is for today
2024-03-07T21:47:45.1693629Z             should include that partner
2024-03-07T21:47:45.1694297Z             but the partner is deactivated
2024-03-07T21:47:45.2064733Z               should NOT include that partner
2024-03-07T21:47:45.2065391Z           that is not for today
2024-03-07T21:47:45.2395704Z             should NOT include that partner
2024-03-07T21:47:45.2396749Z       that has an organization with a global reminder & deadline
2024-03-07T21:47:45.2398014Z         AND a partner group that does have them defined
2024-03-07T21:47:45.2746042Z           should remind based on the partner group instead of the organization level reminder
2024-03-07T21:47:45.2746963Z           but the partner is deactivated
2024-03-07T21:47:45.3133095Z             should NOT include that partner
2024-03-07T21:47:45.3133664Z         that is for today
2024-03-07T21:47:45.3419198Z           should include that partner
2024-03-07T21:47:45.3419856Z           but the partner is deactivated
2024-03-07T21:47:45.3738855Z             should NOT include that partner
2024-03-07T21:47:45.3739532Z           and has send_reminder=false
2024-03-07T21:47:45.4057363Z             should NOT include that partner
2024-03-07T21:47:45.4058040Z         that is not for today
2024-03-07T21:47:45.4341480Z           should NOT include that partner
2024-03-07T21:47:45.4343200Z 
2024-03-07T21:47:45.4343510Z DeadlineService
2024-03-07T21:47:45.4344159Z   #next_deadline
2024-03-07T21:47:45.4345091Z     from the organization
2024-03-07T21:47:45.4346498Z       when the deadline is before today
2024-03-07T21:47:45.4404127Z         returns a date in the next month
2024-03-07T21:47:45.4404827Z       when the deadline is after today
2024-03-07T21:47:45.4456704Z         returns a date within the current month
2024-03-07T21:47:45.4457622Z       when the deadline is today
2024-03-07T21:47:45.4509307Z         returns a date in the next month
2024-03-07T21:47:45.4509966Z     do from the partner group
2024-03-07T21:47:45.4510958Z       when the deadline is before today
2024-03-07T21:47:45.4563348Z         returns a date in the next month
2024-03-07T21:47:45.4564002Z       when the deadline is today
2024-03-07T21:47:45.4617481Z         returns a date in the next month
2024-03-07T21:47:45.4618168Z       when the deadline is after today
2024-03-07T21:47:45.4670663Z         returns a date within the current month
2024-03-07T21:47:45.4671621Z 
2024-03-07T21:47:45.4671828Z ReminderDeadlineMailer
2024-03-07T21:47:45.4672805Z   notify deadline
2024-03-07T21:47:45.4958252Z     renders the body
2024-03-07T21:47:45.5230523Z     renders the sender email
2024-03-07T21:47:45.5496575Z     renders the receiver email
2024-03-07T21:47:45.5774291Z     renders the subject
2024-03-07T21:47:45.5774829Z 
2024-03-07T21:47:45.5775170Z HistoricalDataCacheJob
2024-03-07T21:47:45.7496389Z   queues the job
2024-03-07T21:47:45.9322980Z   caches the historical data
2024-03-07T21:47:45.9324185Z 
2024-03-07T21:47:45.9324385Z Organization
2024-03-07T21:47:45.9327107Z   geocode
2024-03-07T21:47:46.1049476Z     adds coordinates to the database
2024-03-07T21:47:46.1049930Z   default storage location
2024-03-07T21:47:46.1095596Z     associates the default storage location with a storage location
2024-03-07T21:47:46.1127427Z     returns nil when not set
2024-03-07T21:47:46.1127971Z   validations
2024-03-07T21:47:46.2834918Z     validates that short names are unique
2024-03-07T21:47:46.2899094Z     validates that attachment file size is not higher than 1 MB
2024-03-07T21:47:46.2989303Z     validates that at least one distribution type is enabled
2024-03-07T21:47:46.3055027Z     validates that attachments are png or jpgs
2024-03-07T21:47:46.3056190Z   #seed_items
2024-03-07T21:47:46.4922134Z     allows a collection of items to be seeded
2024-03-07T21:47:46.6729126Z     allows a single base item to be seeded
2024-03-07T21:47:46.6730414Z     when given an item name that already exists, but with an 'other' partner key
2024-03-07T21:47:46.8628108Z       updates the old item to use the new base item as its base
2024-03-07T21:47:46.8628946Z     when given an item that already exists
2024-03-07T21:47:47.0473368Z       gracefully skips the item
2024-03-07T21:47:47.0473986Z   Associations >
2024-03-07T21:47:47.0515198Z     is expected to have many users through roles
2024-03-07T21:47:47.0561365Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-07T21:47:47.0596336Z     is expected to have many item_categories
2024-03-07T21:47:47.0597028Z     distributions
2024-03-07T21:47:47.0597618Z       upcoming
2024-03-07T21:47:47.1301041Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-07T21:47:47.1302055Z     users
2024-03-07T21:47:47.1304535Z       when a organizaton has a user that has two roles
2024-03-07T21:47:47.3157128Z         should returns users without duplications
2024-03-07T21:47:47.3157805Z     barcode_items
2024-03-07T21:47:47.5048387Z       returns only this organization's barcodes, no globals
2024-03-07T21:47:47.5049118Z       .all
2024-03-07T21:47:47.6935846Z         includes global barcode items also
2024-03-07T21:47:47.6937334Z     items
2024-03-07T21:47:47.6937814Z       .during.top
2024-03-07T21:47:49.6458775Z         return 3 most used items
2024-03-07T21:47:51.5821422Z         return just 3 elements
2024-03-07T21:47:51.5821961Z       .other
2024-03-07T21:47:53.5200147Z         returns all items for this organization designated 'other'
2024-03-07T21:47:53.5200968Z       .during
2024-03-07T21:47:55.4779413Z         return ranking of all items
2024-03-07T21:47:55.4780076Z       .during.bottom
2024-03-07T21:47:57.4248951Z         return just 3 elements
2024-03-07T21:47:59.3779432Z         return 3 least used items
2024-03-07T21:47:59.3780083Z   valid_items
2024-03-07T21:47:59.5486701Z     returns an array of item partner keys
2024-03-07T21:47:59.7229332Z     only shows active valid items
2024-03-07T21:47:59.7229990Z     with invisible items
2024-03-07T21:47:59.7511513Z       only shows active and visible items
2024-03-07T21:47:59.7512120Z   is_active
2024-03-07T21:48:00.1132251Z     returns active organizations
2024-03-07T21:48:00.1132851Z   reminder_day
2024-03-07T21:48:00.1250896Z     can only contain numbers 1-28
2024-03-07T21:48:00.1251437Z   versioning
2024-03-07T21:48:00.1287145Z     is expected to be versioned
2024-03-07T21:48:00.1287669Z   #short_name
2024-03-07T21:48:00.1350217Z     can only contain valid characters
2024-03-07T21:48:00.1351137Z   deadline_day
2024-03-07T21:48:00.1445560Z     can only contain numbers 1-28
2024-03-07T21:48:00.1446115Z   after_create
2024-03-07T21:48:00.1639611Z     should update the state of the account request
2024-03-07T21:48:00.1640511Z   from_email
2024-03-07T21:48:00.3357622Z     returns email when present
2024-03-07T21:48:00.5273746Z     returns admin email when not present
2024-03-07T21:48:00.7158743Z     returns admin email when it's empty space
2024-03-07T21:48:00.9065471Z     returns admin email when it's empty
2024-03-07T21:48:00.9066095Z   #assign_attributes_from_account_request
2024-03-07T21:48:00.9152732Z     should assign the proper attributes to the organization
2024-03-07T21:48:00.9153456Z   total_inventory
2024-03-07T21:48:01.0839413Z     returns 0 if there is nothing
2024-03-07T21:48:01.3215874Z     returns a sum total of all inventory at all storage locations
2024-03-07T21:48:01.3216685Z   .seed_items
2024-03-07T21:48:01.3217357Z     when provided with an organization to seed
2024-03-07T21:48:01.6310032Z       loads the base items into Item records
2024-03-07T21:48:01.6310746Z     when no organization is provided
2024-03-07T21:48:02.2688651Z       updates all organizations
2024-03-07T21:48:02.2689451Z   earliest reporting year
2024-03-07T21:48:02.4423866Z     is the organization created year if no associated data
2024-03-07T21:48:02.6775245Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-07T21:48:02.6776242Z   #ordered_requests
2024-03-07T21:48:02.8717684Z     puts active requests before fulfilled requests
2024-03-07T21:48:03.0667271Z     ordering of requests with matching status
2024-03-07T21:48:03.0668223Z       puts the most recently updated request before older requests
2024-03-07T21:48:03.0669026Z   address
2024-03-07T21:48:03.0706393Z     does not add any separators after street when city, state, and zip are missing
2024-03-07T21:48:03.0738748Z     correctly formats an address string with commas and spaces
2024-03-07T21:48:03.0771458Z     does not add any separators before the city when street is missing
2024-03-07T21:48:03.0804425Z     returns an empty string when the org has no address components
2024-03-07T21:48:03.0837071Z     does not add a trailing space when the zip code is missing
2024-03-07T21:48:03.0837821Z 
2024-03-07T21:48:03.0838125Z AllocateKitInventoryService
2024-03-07T21:48:03.0839107Z   #error
2024-03-07T21:48:03.0840140Z     when the Store location organization doesn't match
2024-03-07T21:48:03.2917895Z       returns error
2024-03-07T21:48:03.2918381Z   #allocate
2024-03-07T21:48:03.2919622Z     when more than one kit is requested
2024-03-07T21:48:03.2920459Z       but one of the items is out of stock
2024-03-07T21:48:03.5592359Z         returns error and does not change kit or item quantity
2024-03-07T21:48:03.5593204Z     when inventory items are available
2024-03-07T21:48:03.8259453Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-07T21:48:03.8260759Z       When kit is allocated more then once
2024-03-07T21:48:04.1114637Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-07T21:48:04.1115410Z       when there are more then one line items
2024-03-07T21:48:04.1115875Z         when same kit is allocated multiple times
2024-03-07T21:48:04.4046552Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T21:48:04.4047221Z         when there kit is allocated once
2024-03-07T21:48:04.6677686Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T21:48:04.6679039Z 
2024-03-07T21:48:04.6679217Z Audit
2024-03-07T21:48:04.6681113Z   behaves like itemizable
2024-03-07T21:48:04.6681778Z     .line_items
2024-03-07T21:48:04.6682718Z       sorted
2024-03-07T21:48:04.7878611Z         displays the items, sorted by name
2024-03-07T21:48:04.7879274Z       combine!
2024-03-07T21:48:04.8262702Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:48:04.8825226Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:48:04.8826074Z       quantities_by_name
2024-03-07T21:48:04.9599624Z         returns a hash of items with id, name, and quantity
2024-03-07T21:48:05.0390691Z         leaves out zero-quantitied items if requested
2024-03-07T21:48:05.0391379Z       total
2024-03-07T21:48:05.1160448Z         has an item total
2024-03-07T21:48:05.1160957Z     .to_a
2024-03-07T21:48:05.1162193Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:48:05.1636731Z         calls line_item_values
2024-03-07T21:48:05.1637391Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:48:05.2116240Z         raises an error
2024-03-07T21:48:05.2116982Z   Methods >
2024-03-07T21:48:05.5596300Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-07T21:48:05.8042223Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-07T21:48:05.8043273Z   versioning
2024-03-07T21:48:05.8085387Z     is expected to be versioned
2024-03-07T21:48:05.8086238Z   Validations >
2024-03-07T21:48:05.8398814Z     must belong to an organization
2024-03-07T21:48:05.8946744Z     cannot have duplicate line items
2024-03-07T21:48:05.9528674Z     can have line items that has quantity as zero
2024-03-07T21:48:06.0089408Z     can not have line items that has quantity as negative integer
2024-03-07T21:48:06.0649379Z     can have line items that has quantity as a positive integer
2024-03-07T21:48:06.0750633Z     must belong to an organization admin of its organization
2024-03-07T21:48:06.1285260Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-07T21:48:06.1286223Z   Scopes >
2024-03-07T21:48:06.1728993Z     `at_location` can filter out audits to a specific location
2024-03-07T21:48:06.1729663Z 
2024-03-07T21:48:06.1729844Z ItemsOutTotalQuery
2024-03-07T21:48:06.1730661Z   items_out_total_query
2024-03-07T21:48:06.2864338Z     returns a sum total of all out-flows
2024-03-07T21:48:06.2864838Z 
2024-03-07T21:48:06.2865069Z Partners::AuthorizedFamilyMember
2024-03-07T21:48:06.2866215Z   versioning
2024-03-07T21:48:06.2902702Z     is expected to be versioned
2024-03-07T21:48:06.2903221Z   associations
2024-03-07T21:48:06.2946797Z     is expected to belong to family required: true
2024-03-07T21:48:06.2983855Z     is expected to have many child_item_requests dependent => nullify
2024-03-07T21:48:06.2984583Z   #display_name
2024-03-07T21:48:06.3247573Z     should return the family member's first and last name
2024-03-07T21:48:06.3248793Z 
2024-03-07T21:48:06.3249075Z ItemsController
2024-03-07T21:48:06.3250132Z   While not signed in
2024-03-07T21:48:06.3335013Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T21:48:06.3335730Z   While signed in
2024-03-07T21:48:06.3336684Z     PATCH #remove_category
2024-03-07T21:48:06.5237160Z       should redirect to the previous category page
2024-03-07T21:48:06.7160095Z       should remove an item's category
2024-03-07T21:48:06.7160732Z     GET #show
2024-03-07T21:48:06.7361225Z       returns http success
2024-03-07T21:48:06.7361748Z     DELETE #destroy
2024-03-07T21:48:06.7585972Z       redirects to #index
2024-03-07T21:48:06.7586487Z     GET #edit
2024-03-07T21:48:06.7739614Z       returns http success
2024-03-07T21:48:06.7740131Z     GET #index
2024-03-07T21:48:06.7907916Z       returns http success
2024-03-07T21:48:06.7908483Z     Looking at a different organization
2024-03-07T21:48:06.9601312Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T21:48:06.9601903Z     GET #new
2024-03-07T21:48:06.9714548Z       returns http success
2024-03-07T21:48:06.9715084Z     PUT #update
2024-03-07T21:48:06.9715827Z       invisible
2024-03-07T21:48:06.9899699Z         should update visible_to_partners to false
2024-03-07T21:48:06.9900695Z       visible
2024-03-07T21:48:07.0089371Z         should update visible_to_partners to true
2024-03-07T21:48:07.0090006Z     POST #create
2024-03-07T21:48:07.0090844Z       with valid params
2024-03-07T21:48:07.0269354Z         should create an item
2024-03-07T21:48:07.0435425Z         should accept params with dollar signs, periods, and commas
2024-03-07T21:48:07.0602210Z         should redirect to the item page
2024-03-07T21:48:07.0602946Z       with invalid params
2024-03-07T21:48:07.0806535Z         should show an error
2024-03-07T21:48:07.0807061Z     PATCH #restore
2024-03-07T21:48:07.0807902Z       with an active item
2024-03-07T21:48:07.1018286Z         does nothing
2024-03-07T21:48:07.1018999Z       with a soft-deleted item
2024-03-07T21:48:07.1230290Z         re-activates the item
2024-03-07T21:48:07.1230862Z       with another organizations item
2024-03-07T21:48:07.3148240Z         does nothing
2024-03-07T21:48:07.3149496Z 
2024-03-07T21:48:07.3149734Z InventoryItem
2024-03-07T21:48:07.3186916Z   initializes the quantity to 0 if it was not specified
2024-03-07T21:48:07.3187602Z   Filtering >
2024-03-07T21:48:07.3188198Z     ->by_partner_key
2024-03-07T21:48:07.3318150Z       shows the Base Items by partner_key
2024-03-07T21:48:07.3319067Z   versioning
2024-03-07T21:48:07.3352199Z     is expected to be versioned
2024-03-07T21:48:07.3352699Z   Validations >
2024-03-07T21:48:07.3401507Z     requires an inventory association
2024-03-07T21:48:07.3445406Z     requires an item
2024-03-07T21:48:07.3445831Z     quantity >
2024-03-07T21:48:07.3588162Z       is gte 0
2024-03-07T21:48:07.3646738Z       is less than the max integer
2024-03-07T21:48:07.3703033Z       is required
2024-03-07T21:48:07.3760451Z       is numerical
2024-03-07T21:48:07.3761418Z 
2024-03-07T21:48:07.3761560Z Kit
2024-03-07T21:48:07.5813301Z   deactivate and reactivate
2024-03-07T21:48:07.5813903Z   versioning
2024-03-07T21:48:07.5854003Z     is expected to be versioned
2024-03-07T21:48:07.5854576Z   Filtering >
2024-03-07T21:48:08.1421702Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T21:48:08.1457800Z     can filter
2024-03-07T21:48:08.1458804Z     ->by_partner_key
2024-03-07T21:48:08.3817854Z       shows the kits for a particular item
2024-03-07T21:48:08.3818595Z   #can_deactivate?
2024-03-07T21:48:08.3819279Z     without inventory items
2024-03-07T21:48:08.5705668Z       should return true
2024-03-07T21:48:08.5706072Z     with inventory items
2024-03-07T21:48:08.7813795Z       should return false
2024-03-07T21:48:08.7814366Z   Value >
2024-03-07T21:48:08.7974230Z     converts cents to dollars
2024-03-07T21:48:08.8128937Z     converts dollars to cents
2024-03-07T21:48:08.8129519Z     .value_per_itemizable
2024-03-07T21:48:08.8490415Z       calculates values from associated items
2024-03-07T21:48:08.8491048Z   Validations >
2024-03-07T21:48:08.8645722Z     is valid as built
2024-03-07T21:48:09.0644435Z     requires a unique name
2024-03-07T21:48:09.0810993Z     must belong to an organization
2024-03-07T21:48:09.0979103Z     requires at least one item
2024-03-07T21:48:09.1142488Z     requires a name
2024-03-07T21:48:09.1310055Z     can't have negative value
2024-03-07T21:48:09.1310506Z 
2024-03-07T21:48:09.1310711Z DistributionPdf
2024-03-07T21:48:09.1888203Z   #non_request_data
2024-03-07T21:48:09.2545911Z   #request_data
2024-03-07T21:48:09.2546460Z 
2024-03-07T21:48:09.2546841Z CustomDeviseMailer
2024-03-07T21:48:09.2547987Z   #invitation_instructions
2024-03-07T21:48:09.2549123Z     when user is invited
2024-03-07T21:48:09.2737965Z       invites to user
2024-03-07T21:48:09.2919225Z       has invite expiration message
2024-03-07T21:48:09.2919809Z     when partner is invited
2024-03-07T21:48:09.3328110Z       invites to primary user
2024-03-07T21:48:09.3328708Z     when other partner users invited
2024-03-07T21:48:09.3735940Z       invites to partner user
2024-03-07T21:48:09.4003365Z W, [2024-03-07T13:48:09.400067 #2355]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-07T21:48:09.4005837Z W, [2024-03-07T13:48:09.400121 #2355]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:48:09.4009325Z W, [2024-03-07T13:48:09.400152 #2355]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:48:09.4011155Z W, [2024-03-07T13:48:09.400188 #2355]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-07T21:48:09.4188899Z 
2024-03-07T21:48:09.4189083Z Failures:
2024-03-07T21:48:09.4189316Z 
2024-03-07T21:48:09.4191956Z   1) Reports::ChildrenServedReportService#disposable_diapers_from_kits_total calculates the number of disposable diapers that have been distributed within kits
2024-03-07T21:48:09.4193675Z      Failure/Error: expect(service.disposable_diapers_from_kits_total).to eq(20)
2024-03-07T21:48:09.4194451Z 
2024-03-07T21:48:09.4194754Z        expected: 20
2024-03-07T21:48:09.4195298Z             got: 30
2024-03-07T21:48:09.4195742Z 
2024-03-07T21:48:09.4196038Z        (compared using ==)
2024-03-07T21:48:09.4197083Z      # ./spec/services/reports/children_served_report_service_spec.rb:134:in `block (3 levels) in <top (required)>'
2024-03-07T21:48:09.4211499Z 
2024-03-07T21:48:09.4211856Z Finished in 58.05 seconds (files took 8.42 seconds to load)
2024-03-07T21:48:09.4212588Z 581 examples, 1 failure
2024-03-07T21:48:09.4212885Z 
2024-03-07T21:48:09.4213033Z Failed examples:
2024-03-07T21:48:09.4213281Z 
2024-03-07T21:48:09.4214651Z rspec ./spec/services/reports/children_served_report_service_spec.rb:112 # Reports::ChildrenServedReportService#disposable_diapers_from_kits_total calculates the number of disposable diapers that have been distributed within kits
2024-03-07T21:48:09.4216539Z 
2024-03-07T21:48:09.4216709Z Randomized with seed 54495
2024-03-07T21:48:09.4217028Z 
2024-03-07T21:48:09.7369687Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T21:48:09.7371765Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 4015 / 6490 LOC (61.86%) covered.
2024-03-07T21:48:09.8061530Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-03-07T21:48:10.1946582Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T21:48:10.1948388Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10823 LOC (0.35%) covered.
2024-03-07T21:48:10.2206398Z ##[error]Process completed with exit code 1.
