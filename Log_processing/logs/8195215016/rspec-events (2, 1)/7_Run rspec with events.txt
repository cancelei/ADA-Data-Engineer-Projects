2024-03-07T21:47:01.1568591Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T21:47:01.1569469Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T21:47:01.1619553Z shell: /usr/bin/bash -e {0}
2024-03-07T21:47:01.1620051Z env:
2024-03-07T21:47:01.1620329Z   POSTGRES_HOST: localhost
2024-03-07T21:47:01.1620717Z   DATABASE_HOST: localhost
2024-03-07T21:47:01.1621173Z   PG_USERNAME: postgres
2024-03-07T21:47:01.1621537Z   PG_PASSWORD: password
2024-03-07T21:47:01.1621928Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T21:47:01.1622357Z   POSTGRES_PORT: 5432
2024-03-07T21:47:01.1622709Z   PGHOST: localhost
2024-03-07T21:47:01.1623053Z   PGUSER: postgres
2024-03-07T21:47:01.1623441Z   RAILS_ENV: test
2024-03-07T21:47:01.1623810Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-07T21:47:01.1624208Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T21:47:01.1624667Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-07T21:47:01.1625118Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T21:47:01.1625734Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T21:47:01.1626361Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T21:47:01.1627230Z   EVENTS_READ: true
2024-03-07T21:47:01.1627630Z ##[endgroup]
2024-03-07T21:47:06.8156372Z W, [2024-03-07T21:47:06.815238 #2678]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-07T21:47:06.8158792Z W, [2024-03-07T21:47:06.815303 #2678]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:47:06.8161057Z W, [2024-03-07T21:47:06.815330 #2678]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:47:06.8164105Z W, [2024-03-07T21:47:06.815367 #2678]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-07T21:47:09.7493235Z W, [2024-03-07T21:47:09.748929 #2678]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-07T21:47:09.7496194Z W, [2024-03-07T21:47:09.748982 #2678]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:47:09.7498913Z W, [2024-03-07T21:47:09.749009 #2678]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:47:09.7501073Z W, [2024-03-07T21:47:09.749063 #2678]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-07T21:47:09.7565043Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-03-07T21:47:18.3451005Z 
2024-03-07T21:47:18.3451790Z Randomized with seed 40857
2024-03-07T21:47:19.1210437Z 
2024-03-07T21:47:19.1211441Z KitCreateService
2024-03-07T21:47:19.1212084Z   #call
2024-03-07T21:47:19.3381890Z     should return an the instance
2024-03-07T21:47:19.3382594Z     when the parameters are valid
2024-03-07T21:47:19.5335142Z       should create the new Item associated with the Kit
2024-03-07T21:47:19.7348084Z       should create a new Item
2024-03-07T21:47:19.9243959Z       should create a new Kit
2024-03-07T21:47:19.9244755Z       but the ItemCreationService is unsuccesful
2024-03-07T21:47:20.1149881Z         should not create a Item
2024-03-07T21:47:20.3286254Z         should have an error that includes the error
2024-03-07T21:47:20.5227329Z         should not create the Kit
2024-03-07T21:47:20.5228205Z       but an unexpected error gets raised
2024-03-07T21:47:20.7113146Z         should not create a Item
2024-03-07T21:47:20.9069106Z         should not create the Kit
2024-03-07T21:47:21.1196455Z         should have an error that includes the raised error
2024-03-07T21:47:21.1197468Z     when the parameters provided are invalid
2024-03-07T21:47:21.1198394Z       because the kit_params is invalid for kit creation
2024-03-07T21:47:21.2995609Z         should have errors saying why the kit_params are invalid
2024-03-07T21:47:21.2996371Z       because the organization_id does not match any Organization
2024-03-07T21:47:21.3049952Z         should have an error on organization_id saying it does not match any Organization
2024-03-07T21:47:21.3050959Z 
2024-03-07T21:47:21.3051412Z Partners::FamilyRequestCreateService
2024-03-07T21:47:21.3052375Z   #call
2024-03-07T21:47:21.3053294Z     when the arguments are incorrect
2024-03-07T21:47:21.3054285Z       because no family_requests_attributes were defined
2024-03-07T21:47:21.3297187Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T21:47:21.3298593Z       because a unrecognized item_id was provided
2024-03-07T21:47:21.3535402Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T21:47:21.3537032Z     when the arguments are correct
2024-03-07T21:47:21.3537739Z       without children
2024-03-07T21:47:21.3870098Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-07T21:47:21.3871559Z       with children
2024-03-07T21:47:21.5285327Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-07T21:47:21.5286251Z 
2024-03-07T21:47:21.5286513Z ApplicationController
2024-03-07T21:47:21.5287762Z   dashboard_path_from_current_role
2024-03-07T21:47:21.5288969Z     As a super admin
2024-03-07T21:47:21.5522836Z       links to the admin dashboard
2024-03-07T21:47:21.5523449Z     As a user without super admin status
2024-03-07T21:47:21.5714826Z       links to the general dashboard
2024-03-07T21:47:21.5715604Z   current_partner
2024-03-07T21:47:21.5716472Z     As a partner user
2024-03-07T21:47:21.6221594Z       should return the first partner role
2024-03-07T21:47:21.6222457Z       with a changed current role
2024-03-07T21:47:21.6753021Z         should return the first partner role
2024-03-07T21:47:21.6753797Z     As an org user
2024-03-07T21:47:21.6886305Z       should return nil
2024-03-07T21:47:21.6887086Z   current_organization
2024-03-07T21:47:21.6888116Z     As a partner user
2024-03-07T21:47:21.7036378Z       should return nil
2024-03-07T21:47:21.7037382Z     As an org user
2024-03-07T21:47:22.0674381Z       should return the first org role
2024-03-07T21:47:22.0675058Z       with a changed current role
2024-03-07T21:47:22.4305998Z         should return the first org role
2024-03-07T21:47:22.4306692Z 
2024-03-07T21:47:22.4306957Z DonationItemizedBreakdownService
2024-03-07T21:47:22.4308149Z   #fetch
2024-03-07T21:47:22.8517406Z     return the list of items donated with distributed
2024-03-07T21:47:22.8518069Z 
2024-03-07T21:47:22.8518806Z UsersRole
2024-03-07T21:47:22.8519313Z   versioning
2024-03-07T21:47:22.8567891Z     is expected to be versioned
2024-03-07T21:47:22.8568854Z   #current_role_for
2024-03-07T21:47:22.8569588Z     for super admin
2024-03-07T21:47:22.8738551Z       should return super admin
2024-03-07T21:47:22.8739275Z     for org admin
2024-03-07T21:47:22.8939628Z       should return org admin
2024-03-07T21:47:22.8940408Z     for org user
2024-03-07T21:47:22.9062122Z       should return org user
2024-03-07T21:47:22.9062803Z     for partner user
2024-03-07T21:47:22.9189360Z       should return partner user
2024-03-07T21:47:22.9189816Z 
2024-03-07T21:47:22.9190225Z Exports::ExportReportCSVService
2024-03-07T21:47:22.9190917Z   .generate_csv_data
2024-03-07T21:47:22.9226453Z     creates a CSV string
2024-03-07T21:47:22.9261700Z     creates CSV data including headers
2024-03-07T21:47:22.9262350Z 
2024-03-07T21:47:22.9262677Z NDBNMember
2024-03-07T21:47:22.9263950Z   versioning
2024-03-07T21:47:22.9324319Z     is expected to be versioned
2024-03-07T21:47:22.9325036Z   #full_name
2024-03-07T21:47:22.9363123Z     should equal the id and the account name
2024-03-07T21:47:22.9363972Z   validations
2024-03-07T21:47:22.9441401Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-07T21:47:22.9505287Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-07T21:47:22.9557666Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-07T21:47:22.9558235Z 
2024-03-07T21:47:22.9558452Z HistoricalTrendsHelper
2024-03-07T21:47:22.9559869Z   #last_12_months
2024-03-07T21:47:22.9605926Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-07T21:47:22.9647918Z     returns the last 12 months starting from July when the current month is June
2024-03-07T21:47:22.9688868Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-07T21:47:22.9689811Z 
2024-03-07T21:47:22.9690252Z DonationSitesController
2024-03-07T21:47:22.9691340Z   While not signed in
2024-03-07T21:47:22.9797783Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T21:47:22.9798688Z   While signed in
2024-03-07T21:47:22.9799569Z     POST #import_csv
2024-03-07T21:47:22.9800553Z       behaves like csv import
2024-03-07T21:47:22.9801861Z         without a csv file
2024-03-07T21:47:22.9989470Z           presents a flash error message
2024-03-07T21:47:23.0102132Z           redirects to :index
2024-03-07T21:47:23.0102960Z         with a csv file
2024-03-07T21:47:23.0257921Z           presents a flash notice message
2024-03-07T21:47:23.0307222Z           invokes .import_csv
2024-03-07T21:47:23.0434616Z           redirects to :index
2024-03-07T21:47:23.0435599Z         csv file with wrong headers
2024-03-07T21:47:23.0549910Z           redirects to :index
2024-03-07T21:47:23.0655497Z           presents a flash error message
2024-03-07T21:47:23.0656978Z     GET #index
2024-03-07T21:47:23.0783878Z       returns http success
2024-03-07T21:47:23.0784567Z     Looking at a different organization
2024-03-07T21:47:23.2500523Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T21:47:23.2501243Z     GET #show
2024-03-07T21:47:23.2644437Z       returns http success
2024-03-07T21:47:23.2645123Z     GET #new
2024-03-07T21:47:23.2748961Z       returns http success
2024-03-07T21:47:23.2749613Z     GET #edit
2024-03-07T21:47:23.2876438Z       returns http success
2024-03-07T21:47:23.2877317Z     DELETE #destroy
2024-03-07T21:47:23.3045386Z       returns http success
2024-03-07T21:47:23.3046117Z 
2024-03-07T21:47:23.3046650Z DonationCreateService
2024-03-07T21:47:23.3047576Z   #call
2024-03-07T21:47:23.3252964Z     should create the donation
2024-03-07T21:47:23.3253578Z 
2024-03-07T21:47:23.3254012Z BroadcastAnnouncement
2024-03-07T21:47:23.3367406Z   should validate a valid announcement
2024-03-07T21:47:23.3420156Z   should validate a good link
2024-03-07T21:47:23.3461692Z   is expected to belong to user required: true
2024-03-07T21:47:23.3511366Z   is expected to validate that :message cannot be empty/falsy
2024-03-07T21:47:23.3565139Z   should roughly check if link is valid
2024-03-07T21:47:23.3599845Z   is expected to belong to organization optional: true
2024-03-07T21:47:23.3600559Z   filter_announcements
2024-03-07T21:47:23.3737933Z     shouldn't include expired announcements
2024-03-07T21:47:23.3880766Z     sorts announcements from most recently created to last
2024-03-07T21:47:23.4002714Z     should include only announcements from the passed organization
2024-03-07T21:47:23.4003828Z   expired?
2024-03-07T21:47:23.4058563Z     should be true if the announcement is expired
2024-03-07T21:47:23.4111585Z     should be false if the announcement has not expired
2024-03-07T21:47:23.4112641Z   versioning
2024-03-07T21:47:23.4145826Z     is expected to be versioned
2024-03-07T21:47:23.4146684Z 
2024-03-07T21:47:23.4147053Z Partners::Profile
2024-03-07T21:47:23.4181442Z   must allow deleting served_areas
2024-03-07T21:47:23.4182190Z   versioning
2024-03-07T21:47:23.4215488Z     is expected to be versioned
2024-03-07T21:47:23.4216641Z   social media info validation for profile
2024-03-07T21:47:23.4217524Z     no social media presence and the checkbox is checked
2024-03-07T21:47:23.4275209Z       should be valid
2024-03-07T21:47:23.4276168Z     has social media presence and the checkbox is unchecked
2024-03-07T21:47:23.4343755Z       with every social media option it should be valid
2024-03-07T21:47:23.4409153Z       with just twitter it should be valid
2024-03-07T21:47:23.4475254Z       with just facebook it should be valid
2024-03-07T21:47:23.4541101Z       with just instagram it should be valid
2024-03-07T21:47:23.4607570Z       with just a website it should be valid
2024-03-07T21:47:23.4608779Z     no social media presence and the checkbox isn't checked
2024-03-07T21:47:23.4662746Z       should not be valid
2024-03-07T21:47:23.4877087Z       should be valid if media_information is not needed
2024-03-07T21:47:23.4877996Z   associations
2024-03-07T21:47:23.4922750Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-07T21:47:23.4963616Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-07T21:47:23.5012323Z     is expected to have many served_areas
2024-03-07T21:47:23.5051694Z     is expected to have a has_many_attached called documents
2024-03-07T21:47:23.5052828Z   request settings validation for profile
2024-03-07T21:47:23.5053628Z     no settings are set to true
2024-03-07T21:47:23.5131288Z       should not be valid
2024-03-07T21:47:23.5132063Z     at least one request type is set to true
2024-03-07T21:47:23.5205890Z       should be valid when enable_individual_requests is true
2024-03-07T21:47:23.5276783Z       should be valid when enable_quantity_based_requests is true
2024-03-07T21:47:23.5349264Z       should be valid when enable_child_based_requests is true
2024-03-07T21:47:23.5350138Z   client share behaviour
2024-03-07T21:47:23.5350872Z     multiple
2024-03-07T21:47:23.5608275Z       sums the client shares
2024-03-07T21:47:23.5760882Z       is valid if client share sum is 100
2024-03-07T21:47:23.5762318Z     no served areas
2024-03-07T21:47:23.5810047Z       has 0 client share
2024-03-07T21:47:23.5810653Z 
2024-03-07T21:47:23.5811503Z ItemsInQuery
2024-03-07T21:47:23.5812153Z   items_in
2024-03-07T21:47:23.8677442Z     returns a collection with the fields name, item_id, quantity
2024-03-07T21:47:24.1792567Z     does not count negative adjustments towards in-flow
2024-03-07T21:47:24.4310561Z     includes donations, purchases, adjustments, transfers among sources
2024-03-07T21:47:24.7579888Z     does not count transfers going in the negative direction
2024-03-07T21:47:24.7580903Z 
2024-03-07T21:47:24.7581113Z NotifyPartnerJob
2024-03-07T21:47:24.7646158Z   #perform
2024-03-07T21:47:24.7646974Z     avoids exception when request doesn't exist
2024-03-07T21:47:24.7755526Z     is expected to call RequestsConfirmationMailer
2024-03-07T21:47:24.7756535Z     when the request's partner is deactivated
2024-03-07T21:47:24.8032042Z       does not send the confirmation email
2024-03-07T21:47:24.8032781Z 
2024-03-07T21:47:24.8032998Z ReminderDeadlineJob
2024-03-07T21:47:24.8033784Z   #perform
2024-03-07T21:47:24.8250734Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-07T21:47:24.8251689Z 
2024-03-07T21:47:24.8252013Z Reports::AdultIncontinenceReportService
2024-03-07T21:47:24.8252815Z   #report
2024-03-07T21:47:25.0058018Z     should report zero values
2024-03-07T21:47:25.0058753Z     with values
2024-03-07T21:47:25.6252015Z       should report normal values
2024-03-07T21:47:26.2279805Z       should handle null distribution quantity
2024-03-07T21:47:26.2280786Z 
2024-03-07T21:47:26.2281094Z Partners::UpdateFamily
2024-03-07T21:47:26.2281720Z   #call
2024-03-07T21:47:26.2282523Z     when family has children
2024-03-07T21:47:26.2682614Z       archives the family and its children
2024-03-07T21:47:26.2683546Z     when an error occurs during archiving
2024-03-07T21:47:26.3030999Z       does not archive the family or its children and adds error to the service
2024-03-07T21:47:26.3032074Z 
2024-03-07T21:47:26.3032293Z KitAllocation
2024-03-07T21:47:26.3035512Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-07T21:47:26.3037261Z   versioning
2024-03-07T21:47:26.3126496Z     is expected to be versioned
2024-03-07T21:47:26.3127132Z 
2024-03-07T21:47:26.3127346Z User
2024-03-07T21:47:26.3128540Z   #send_reset_password_instructions
2024-03-07T21:47:26.3129371Z     user gets an email with instructions
2024-03-07T21:47:26.4085175Z       sends an email with instructions
2024-03-07T21:47:26.4086230Z   #role_added
2024-03-07T21:47:26.4474688Z     renders the body correctly
2024-03-07T21:47:26.4475496Z 
2024-03-07T21:47:26.4475757Z ProductDriveParticipant
2024-03-07T21:47:26.4477067Z   Validations
2024-03-07T21:47:26.4586130Z     is invalid without an organization
2024-03-07T21:47:26.4648798Z     is invalid unless it has either a phone number or an email
2024-03-07T21:47:26.4650095Z   behaves like provideable
2024-03-07T21:47:26.4650805Z     import_csv
2024-03-07T21:47:26.6423562Z       imports from a csv file
2024-03-07T21:47:26.6424266Z     geocode
2024-03-07T21:47:26.6485319Z       adds coordinates to the database
2024-03-07T21:47:26.6485856Z     Validations
2024-03-07T21:47:26.6548877Z       is invalid unless it has either a contact name or a business name
2024-03-07T21:47:26.6586204Z       is invalid without an organization
2024-03-07T21:47:26.6586889Z   versioning
2024-03-07T21:47:26.6623869Z     is expected to be versioned
2024-03-07T21:47:26.6624637Z   Methods
2024-03-07T21:47:26.6625222Z     donation_source_view
2024-03-07T21:47:26.6626125Z       no contact name
2024-03-07T21:47:26.6683655Z         is expected to be nil
2024-03-07T21:47:26.6684304Z       contact name present
2024-03-07T21:47:26.6742396Z         is expected to eq "Contact Name (participant)"
2024-03-07T21:47:26.6743326Z     volume_by_product_drive
2024-03-07T21:47:26.8209432Z       retrieves the amount of product that has been donated through specific product drive
2024-03-07T21:47:26.8210828Z     volume
2024-03-07T21:47:26.8839068Z       retrieves the amount of product that has been donated by participant
2024-03-07T21:47:26.8839828Z 
2024-03-07T21:47:26.8840174Z PartnerFetchRequestableItemsService
2024-03-07T21:47:26.8841135Z   #call
2024-03-07T21:47:26.8965611Z     raises an error indiciating the partner does not exist with invalid id
2024-03-07T21:47:26.8966263Z     org with any amount of items
2024-03-07T21:47:26.8967259Z       when the partner is in a partner group and has no items
2024-03-07T21:47:27.1002016Z         should return only active and visible items from partner
2024-03-07T21:47:27.1003191Z       when the partner is in a partner group and has items
2024-03-07T21:47:27.3257108Z         should return only active and visible items from partner
2024-03-07T21:47:27.3258348Z     when the partner is not in any partner group
2024-03-07T21:47:27.3537952Z       is expected to be nil
2024-03-07T21:47:27.3538487Z       when the organization has items
2024-03-07T21:47:27.3842294Z         is expected to eq [#<Item id: 1112, name: "Item 1", category: nil, created_at: "2024-03-07 13:47:27.370559409 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-07T21:47:27.4323135Z         should return only active and visible items
2024-03-07T21:47:27.4323704Z       when the organization has no items
2024-03-07T21:47:27.4601689Z         should return no items
2024-03-07T21:47:27.4602852Z 
2024-03-07T21:47:27.4603112Z ItemCategory
2024-03-07T21:47:27.4604671Z   versioning
2024-03-07T21:47:27.4639614Z     is expected to be versioned
2024-03-07T21:47:27.4640324Z   validations
2024-03-07T21:47:27.4712370Z     is expected to validate that the length of :description is at most 250
2024-03-07T21:47:27.4785104Z     is expected to validate that :organization cannot be empty/falsy
2024-03-07T21:47:27.4863196Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T21:47:27.5042155Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-07T21:47:27.5043419Z   assocations
2024-03-07T21:47:27.5076437Z     is expected to have many items
2024-03-07T21:47:27.5120580Z     is expected to belong to organization required: true
2024-03-07T21:47:27.5178645Z     is expected to have and belong to many partner_groups
2024-03-07T21:47:27.5179475Z 
2024-03-07T21:47:27.5179877Z TransfersController
2024-03-07T21:47:27.5180834Z   While not signed in
2024-03-07T21:47:27.5315530Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T21:47:27.5316630Z   While signed in
2024-03-07T21:47:27.5317252Z     GET #index
2024-03-07T21:47:27.5561076Z       returns http success
2024-03-07T21:47:27.5562006Z       when filtering by date
2024-03-07T21:47:27.5562794Z         when date parameters are not supplied
2024-03-07T21:47:27.5940328Z           returns all objects
2024-03-07T21:47:27.5941018Z         when date parameters are supplied
2024-03-07T21:47:27.6314526Z           only returns the correct obejects
2024-03-07T21:47:27.6315510Z     POST #create
2024-03-07T21:47:27.6710771Z       redirects to #show when successful
2024-03-07T21:47:27.6848887Z       renders to #new when failing
2024-03-07T21:47:27.6849650Z     Looking at a different organization
2024-03-07T21:47:27.8698193Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T21:47:27.8698960Z     GET #show
2024-03-07T21:47:27.8946982Z       returns http success
2024-03-07T21:47:27.8947685Z     GET #new
2024-03-07T21:47:27.9071032Z       returns http success
2024-03-07T21:47:27.9072315Z 
2024-03-07T21:47:27.9072702Z LineItem
2024-03-07T21:47:27.9074596Z   Validations >
2024-03-07T21:47:27.9220772Z     requires a quantity
2024-03-07T21:47:28.0093322Z     the quantity must be a valid integer and cannot be 0
2024-03-07T21:47:28.0187123Z     requires an item
2024-03-07T21:47:28.0187717Z   Methods >
2024-03-07T21:47:28.0188291Z     #value_per_line_item
2024-03-07T21:47:28.0189445Z       item has no value
2024-03-07T21:47:28.0311878Z         is expected to eq 0
2024-03-07T21:47:28.0312644Z       item has value and quantity
2024-03-07T21:47:28.0480032Z         is expected to eq 25
2024-03-07T21:47:28.0480794Z     item packages
2024-03-07T21:47:28.0481563Z       #package_count
2024-03-07T21:47:28.0482471Z         has packages
2024-03-07T21:47:28.0648900Z           is expected to eq "1"
2024-03-07T21:47:28.0649700Z         does not have packages
2024-03-07T21:47:28.0772898Z           is expected to be falsy
2024-03-07T21:47:28.0773639Z       #has_packages
2024-03-07T21:47:28.0774503Z         item has package size
2024-03-07T21:47:28.0949212Z           is expected to be truthy
2024-03-07T21:47:28.0949887Z         item has no package size
2024-03-07T21:47:28.1080892Z           is expected to be falsy
2024-03-07T21:47:28.1081738Z   versioning
2024-03-07T21:47:28.1118850Z     is expected to be versioned
2024-03-07T21:47:28.1119626Z   package_count
2024-03-07T21:47:28.1316142Z     is nil if there is no package_size
2024-03-07T21:47:28.1502867Z     is equal to the quanity divided by the package_size
2024-03-07T21:47:28.1503811Z   Scopes >
2024-03-07T21:47:28.1504552Z     ->active
2024-03-07T21:47:28.1826752Z       retrieves only those with active status
2024-03-07T21:47:28.1827801Z 
2024-03-07T21:47:28.1828011Z Adjustment
2024-03-07T21:47:28.1829781Z   behaves like itemizable
2024-03-07T21:47:28.1830614Z     .to_a
2024-03-07T21:47:28.1831513Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:47:28.2169435Z         calls line_item_values
2024-03-07T21:47:28.2170252Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:47:28.2517818Z         raises an error
2024-03-07T21:47:28.2518669Z     .line_items
2024-03-07T21:47:28.2519542Z       quantities_by_name
2024-03-07T21:47:28.2934719Z         leaves out zero-quantitied items if requested
2024-03-07T21:47:28.3307435Z         returns a hash of items with id, name, and quantity
2024-03-07T21:47:28.3308331Z       sorted
2024-03-07T21:47:28.3910580Z         displays the items, sorted by name
2024-03-07T21:47:28.3911177Z       combine!
2024-03-07T21:47:28.4397202Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:47:28.4808546Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:47:28.4809521Z       total
2024-03-07T21:47:28.5200176Z         has an item total
2024-03-07T21:47:28.5201091Z   Methods >
2024-03-07T21:47:28.7213166Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-07T21:47:28.7214517Z     split_difference
2024-03-07T21:47:28.7979850Z       gracefully handles adjustments with only negative
2024-03-07T21:47:28.8728350Z       gracefully handles adjustments with only positive
2024-03-07T21:47:28.9459198Z       returns two adjustment objects
2024-03-07T21:47:28.9459987Z   Validations >
2024-03-07T21:47:28.9845749Z     allows you to remove all the inventory that exists in the storage location
2024-03-07T21:47:29.0006248Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-07T21:47:29.0081754Z     must belong to an organization
2024-03-07T21:47:29.0082619Z   Scopes >
2024-03-07T21:47:29.0313105Z     `by_user` can filter out adjustments to a specific user
2024-03-07T21:47:29.0481666Z     `at_location` can filter out adjustments to a specific location
2024-03-07T21:47:29.0482810Z   nested line item attributes
2024-03-07T21:47:29.0909416Z     accepts them
2024-03-07T21:47:29.0909986Z   versioning
2024-03-07T21:47:29.0945807Z     is expected to be versioned
2024-03-07T21:47:29.0946596Z 
2024-03-07T21:47:29.0946908Z Reports::PeriodSupplyReportService
2024-03-07T21:47:29.0947695Z   #report
2024-03-07T21:47:29.2806796Z     should report zero values
2024-03-07T21:47:29.2807659Z     with values
2024-03-07T21:47:29.9134028Z       should report normal values
2024-03-07T21:47:29.9134615Z 
2024-03-07T21:47:29.9135342Z RequestMailer
2024-03-07T21:47:29.9136307Z   #request_cancel_partner_notification
2024-03-07T21:47:29.9305189Z     should be sent to the partner main email with the correct subject line
2024-03-07T21:47:29.9435355Z     renders the body with correct text with partner information
2024-03-07T21:47:29.9436198Z 
2024-03-07T21:47:29.9436370Z InventoryAggregate
2024-03-07T21:47:29.9437284Z   multiple events
2024-03-07T21:47:30.2009532Z     should ignore unusable snapshots
2024-03-07T21:47:30.4703116Z     should handle timing correctly
2024-03-07T21:47:30.7425231Z     should handle changing storage location
2024-03-07T21:47:31.0648354Z     should handle intervening audits
2024-03-07T21:47:31.4656167Z     should process multiple events
2024-03-07T21:47:31.4657025Z   individual events
2024-03-07T21:47:31.7639948Z     should process an adjustment event
2024-03-07T21:47:32.0774846Z     should process a distribution event
2024-03-07T21:47:32.3907675Z     should process an audit event
2024-03-07T21:47:32.6846784Z     should process a donation event
2024-03-07T21:47:32.9915577Z     should process a transfer event
2024-03-07T21:47:33.2968690Z     should process a transfer destroy event
2024-03-07T21:47:33.6017315Z     should process a kit allocation event
2024-03-07T21:47:33.8861543Z     should process a purchase event
2024-03-07T21:47:34.1731923Z     should process a donation event after a new storage location is created
2024-03-07T21:47:34.4493804Z     should process a snapshot event
2024-03-07T21:47:34.9294867Z     should process a kit deallocation event
2024-03-07T21:47:35.3090778Z     should process a donation destroyed event
2024-03-07T21:47:35.6177146Z     should process a purchase destroyed event
2024-03-07T21:47:35.9421933Z     should process a distribution destroyed event
2024-03-07T21:47:35.9422746Z   validation
2024-03-07T21:47:35.9423254Z     subsequent event is incorrect
2024-03-07T21:47:36.2357509Z       should add the event to the message
2024-03-07T21:47:36.4888355Z       should handle negative quantities
2024-03-07T21:47:36.4889229Z     current event is incorrect
2024-03-07T21:47:36.7502959Z       should raise a bare error
2024-03-07T21:47:36.7503490Z 
2024-03-07T21:47:36.7503813Z DistributionUpdateService
2024-03-07T21:47:36.7505041Z   resend_notification?
2024-03-07T21:47:36.8478577Z     changes any distribution content, resulting in resend_notification? = true
2024-03-07T21:47:36.9384079Z     changes the issue_date, resulting in resend_notification? = true
2024-03-07T21:47:37.0254572Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-07T21:47:37.0255497Z   call
2024-03-07T21:47:37.1239389Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T21:47:37.1240629Z 
2024-03-07T21:47:37.1240776Z CalendarService
2024-03-07T21:47:37.4347091Z   #time_zones
2024-03-07T21:47:37.4347657Z   .calendar
2024-03-07T21:47:37.4945341Z     should print the calendar correctly
2024-03-07T21:47:37.4946009Z 
2024-03-07T21:47:37.4946457Z Reports::WarehouseReportService
2024-03-07T21:47:37.4947098Z   #report
2024-03-07T21:47:37.6953476Z     should print zero values
2024-03-07T21:47:38.0412589Z     should print unknown warehouse type
2024-03-07T21:47:38.3954276Z     should print normal values
2024-03-07T21:47:38.5731503Z     should print unknown square footage
2024-03-07T21:47:38.5732181Z 
2024-03-07T21:47:38.5732406Z AdjustmentCreateService
2024-03-07T21:47:38.5733226Z   call
2024-03-07T21:47:38.6637637Z     decreases stored inventory on a negative adjustment
2024-03-07T21:47:38.7557414Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-07T21:47:38.8402549Z     increases stored inventory on a positive adjustment
2024-03-07T21:47:38.9324165Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-07T21:47:38.9970618Z     does not allow inventory to be adjusted below 0
2024-03-07T21:47:39.0496130Z     gives an error if we attempt to adjust inventory below 0
2024-03-07T21:47:39.1280126Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-07T21:47:39.2021440Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-07T21:47:39.2852166Z     handles adjustments to multiple items
2024-03-07T21:47:39.2852946Z 
2024-03-07T21:47:39.2853277Z Partners::ChildItemRequest
2024-03-07T21:47:39.2854494Z   #quantity
2024-03-07T21:47:39.2918901Z     should return the quantity divided by the number of children
2024-03-07T21:47:39.2920053Z   #ordered_item_diaperid
2024-03-07T21:47:39.2956345Z     should return the item_id on the item_request
2024-03-07T21:47:39.2957349Z   versioning
2024-03-07T21:47:39.2990956Z     is expected to be versioned
2024-03-07T21:47:39.2991692Z   associations
2024-03-07T21:47:39.3034083Z     is expected to belong to child required: true
2024-03-07T21:47:39.3069989Z     is expected to belong to authorized_family_member optional: true
2024-03-07T21:47:39.3108274Z     is expected to belong to item_request required: true
2024-03-07T21:47:39.3108947Z 
2024-03-07T21:47:39.3109459Z TransferDestroyService
2024-03-07T21:47:39.3110178Z   #call
2024-03-07T21:47:39.3111485Z     when an issue occurs in transaction
2024-03-07T21:47:39.3113254Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-07T21:47:39.4911175Z         should return a OpenStruct with the raised error
2024-03-07T21:47:39.4912220Z       because the transfer destroy raised an error
2024-03-07T21:47:39.6892977Z         should return a OpenStruct with the raised error
2024-03-07T21:47:39.6894620Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-07T21:47:39.8800792Z         should return a OpenStruct with the raised error
2024-03-07T21:47:39.8801545Z       because the transfer_id does not match any Transfer
2024-03-07T21:47:40.0647809Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-07T21:47:40.0649066Z     when there are no issues
2024-03-07T21:47:40.2629655Z       should execute the expected methods
2024-03-07T21:47:40.4672488Z       should return an OpenStruct with success? set to true
2024-03-07T21:47:40.4673397Z     because transfer should not be deleted
2024-03-07T21:47:40.6501959Z       should return an OpenStruct with the raised error
2024-03-07T21:47:40.6502751Z 
2024-03-07T21:47:40.6503057Z ItemCreateService
2024-03-07T21:47:40.6503677Z   #call
2024-03-07T21:47:40.6504701Z     when there are no issues
2024-03-07T21:47:40.8200588Z       should return an OpenStruct with success? set to true and the item
2024-03-07T21:47:40.9874356Z       should execute the expected methods
2024-03-07T21:47:40.9875261Z     when an issue occurs in transaction
2024-03-07T21:47:40.9876363Z       because the item create raised an error
2024-03-07T21:47:41.1559050Z         should return a OpenStruct with the raised error
2024-03-07T21:47:41.1560330Z       because the organization_id does not match any Organization
2024-03-07T21:47:41.3316694Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-07T21:47:41.3317603Z       because a inventory item creation failed and raised an error
2024-03-07T21:47:41.5088905Z         should return a OpenStruct with the raised error
2024-03-07T21:47:41.5089839Z 
2024-03-07T21:47:41.5090143Z Event
2024-03-07T21:47:41.5091152Z   #most_recent_snapshot
2024-03-07T21:47:41.7476162Z     should not include an unusable snapshot
2024-03-07T21:47:41.9893393Z     should include the last usable snapshot
2024-03-07T21:47:41.9894102Z 
2024-03-07T21:47:41.9894301Z ItemsOutQuery
2024-03-07T21:47:41.9895282Z   items_out_query
2024-03-07T21:47:42.0998700Z     includes distributions, adjustments, transfers among sources
2024-03-07T21:47:42.2094233Z     returns a collection with the fields name, item_id, quantity
2024-03-07T21:47:42.2095008Z 
2024-03-07T21:47:42.2095449Z RequestsTotalItemsService
2024-03-07T21:47:42.2099066Z   #calculate
2024-03-07T21:47:42.2100708Z     when item name is nil
2024-03-07T21:47:42.2228021Z       return Unknown Item
2024-03-07T21:47:42.2228763Z     when provided requests is nil
2024-03-07T21:47:42.2265340Z       is expected to be blank
2024-03-07T21:47:42.2266267Z     when the request items is not blank
2024-03-07T21:47:42.2406546Z       return items with correct quantities calculated
2024-03-07T21:47:42.2541679Z       return the names of items correctly
2024-03-07T21:47:42.2542766Z     when provided with requests that have no request items
2024-03-07T21:47:42.2614151Z       is expected to be blank
2024-03-07T21:47:42.2614956Z 
2024-03-07T21:47:42.2615268Z Role
2024-03-07T21:47:42.2651033Z   is expected to accepts_nested_attributes_for :users
2024-03-07T21:47:42.2651956Z   Associations
2024-03-07T21:47:42.2712696Z     is expected to have and belong to many users
2024-03-07T21:47:42.2748575Z     is expected to belong to resource optional: true
2024-03-07T21:47:42.2749419Z   versioning
2024-03-07T21:47:42.2782736Z     is expected to be versioned
2024-03-07T21:47:42.2783467Z   Validations
2024-03-07T21:47:42.2829980Z     is expected to validate that :resource_type is either â€¹"Organization"â€º or â€¹"Partner"â€º
2024-03-07T21:47:42.2831025Z 
2024-03-07T21:47:42.2831305Z SyncNDBNMembers
2024-03-07T21:47:42.2831916Z   .sync
2024-03-07T21:47:42.2832551Z     when the HTTP request does not get a response of 200
2024-03-07T21:47:42.3035228Z       should raise an error regarding the response code
2024-03-07T21:47:42.3036203Z     when the HTTP request is successful
2024-03-07T21:47:42.3037297Z       when the account name of a NDBN Member has changed
2024-03-07T21:47:42.3163159Z         should update the account name of the corresponding NDBN Member
2024-03-07T21:47:42.3164003Z       when no new NDBN Member has been added
2024-03-07T21:47:42.3285745Z         should not add any new NDBN Members
2024-03-07T21:47:42.3286612Z       when there are no exisiting NDBN Member records
2024-03-07T21:47:42.3383016Z         should create the NDBN Member records
2024-03-07T21:47:42.3384599Z 
2024-03-07T21:47:42.3384851Z View::Inventory
2024-03-07T21:47:42.3386554Z   #quantity_for
2024-03-07T21:47:42.3387545Z     with item id
2024-03-07T21:47:42.3388459Z       with storage location
2024-03-07T21:47:42.4268654Z         should return the quantity at that location
2024-03-07T21:47:42.4269572Z       with no storage location
2024-03-07T21:47:42.5189252Z         should return quantities across all storage locations
2024-03-07T21:47:42.5193535Z     with storage location but no item id
2024-03-07T21:47:42.6070515Z       should return all items at that location
2024-03-07T21:47:42.6071034Z   #all_items
2024-03-07T21:47:42.6945482Z     should return all items across storage locations
2024-03-07T21:47:42.6946357Z   .total_inventory
2024-03-07T21:47:42.7805370Z     should return the total quantity
2024-03-07T21:47:42.7806397Z   #storage_locations_for_item
2024-03-07T21:47:42.8660551Z     should return all relevant IDs
2024-03-07T21:47:42.8661371Z   #items_for_location
2024-03-07T21:47:42.9518686Z     should return the right values
2024-03-07T21:47:42.9519537Z     with include_omitted_items
2024-03-07T21:47:43.0388096Z       should add items not in the storage location
2024-03-07T21:47:43.0390248Z   .items_for_location
2024-03-07T21:47:43.1230079Z     should return the right values
2024-03-07T21:47:43.1230621Z     with include_omitted_items
2024-03-07T21:47:43.2091311Z       should add items not in the storage location
2024-03-07T21:47:43.2092153Z   #total_value_in_dollars
2024-03-07T21:47:43.2937807Z     should return total value across the given location
2024-03-07T21:47:43.2938602Z   #storage_location_name
2024-03-07T21:47:43.3781474Z     should return the right name
2024-03-07T21:47:43.3782212Z 
2024-03-07T21:47:43.3782512Z Partners::Family
2024-03-07T21:47:43.3784625Z   versioning
2024-03-07T21:47:43.3823103Z     is expected to be versioned
2024-03-07T21:47:43.3823811Z   validations
2024-03-07T21:47:43.3905273Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-07T21:47:43.3981422Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-07T21:47:43.4059039Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-07T21:47:43.4060239Z   #create_authorized
2024-03-07T21:47:43.4336752Z     should include authorized family members
2024-03-07T21:47:43.4337775Z   #guardian_display_name
2024-03-07T21:47:43.4391710Z     should return the guardian's first and last name
2024-03-07T21:47:43.4392596Z   #total_children_count
2024-03-07T21:47:43.4442019Z     should return the family's total children count
2024-03-07T21:47:43.4442900Z   associations
2024-03-07T21:47:43.4480694Z     is expected to have many children dependent => destroy
2024-03-07T21:47:43.4521656Z     is expected to belong to partner required: true
2024-03-07T21:47:43.4555796Z     is expected to have many authorized_family_members dependent => destroy
2024-03-07T21:47:43.4556692Z   #search_non_archived
2024-03-07T21:47:43.5431840Z     should return all families if one is passed in
2024-03-07T21:47:43.6292885Z     should return non-archived families if zero is passed in
2024-03-07T21:47:43.6293642Z 
2024-03-07T21:47:43.6293833Z DonationSite
2024-03-07T21:47:43.6294894Z   Validations >
2024-03-07T21:47:43.6339318Z     is invalid without an address
2024-03-07T21:47:43.6379540Z     is invalid without a name
2024-03-07T21:47:43.6412841Z     must belong to an organization
2024-03-07T21:47:43.6413740Z   versioning
2024-03-07T21:47:43.6448110Z     is expected to be versioned
2024-03-07T21:47:43.6448791Z   geocode
2024-03-07T21:47:43.6504718Z     adds coordinates to the database
2024-03-07T21:47:43.6505552Z   import_csv
2024-03-07T21:47:43.8347590Z     imports storage locations from a csv file
2024-03-07T21:47:43.8348237Z 
2024-03-07T21:47:43.8348503Z Partners::RequestApprovalService
2024-03-07T21:47:43.8349155Z   #call
2024-03-07T21:47:43.8350317Z     when the partner is not yet awaiting approval
2024-03-07T21:47:43.8654921Z       should set the status on the partner record to awaiting_review
2024-03-07T21:47:43.8939103Z       should send an email notification to the partner's organization
2024-03-07T21:47:43.8940640Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-07T21:47:43.9220783Z       does not have an error
2024-03-07T21:47:43.9221597Z     when the partner is already awaiting approval
2024-03-07T21:47:43.9492102Z       should return an error saying it the partner is already requested approval
2024-03-07T21:47:43.9493540Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-07T21:47:43.9495346Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-07T21:47:43.9742075Z       should return an error re social media
2024-03-07T21:47:43.9744532Z 
2024-03-07T21:47:43.9744819Z PartnerProfileUpdateService
2024-03-07T21:47:43.9745887Z   #call
2024-03-07T21:47:43.9747038Z     when served area client shares pre-exist
2024-03-07T21:47:43.9747958Z       and the new values are incorrect
2024-03-07T21:47:44.0030857Z         maintains the old values and returns failure
2024-03-07T21:47:44.0031843Z       and the new values are correct
2024-03-07T21:47:44.0032650Z         and there are no other errors
2024-03-07T21:47:44.0324150Z           replaces the old values and returns success
2024-03-07T21:47:44.0325025Z         and there are errors on the profile
2024-03-07T21:47:44.0596649Z           maintains the old values and returns failure
2024-03-07T21:47:44.0597997Z     when there are no pre-existing served areas
2024-03-07T21:47:44.0598907Z       and the new values are correct
2024-03-07T21:47:44.0795526Z         stores the new values and returns success
2024-03-07T21:47:44.0796602Z         and there are other errors in the profile
2024-03-07T21:47:44.0981518Z           does not store the new values and it returns a failure
2024-03-07T21:47:44.0982515Z       and the new values are incorrect
2024-03-07T21:47:44.1156523Z 0
2024-03-07T21:47:44.1165394Z         does not store the new values and returns a failure
2024-03-07T21:47:44.1166345Z 
2024-03-07T21:47:44.1166771Z UiHelper
2024-03-07T21:47:44.1169279Z   optional_data_text
2024-03-07T21:47:44.1169959Z     when the field provided is blank
2024-03-07T21:47:44.1223997Z       should return the text Not-Provided in gray text
2024-03-07T21:47:44.1224576Z     when the field provided is not blank
2024-03-07T21:47:44.1275339Z       should return the content
2024-03-07T21:47:44.1276305Z 
2024-03-07T21:47:44.1277478Z Reports::OtherProductsReportService
2024-03-07T21:47:44.1278043Z   #report
2024-03-07T21:47:44.3087661Z     should report zero values
2024-03-07T21:47:44.9159222Z     should report normal values
2024-03-07T21:47:44.9159784Z 
2024-03-07T21:47:44.9160026Z DistributionCreateService
2024-03-07T21:47:44.9161108Z   call
2024-03-07T21:47:44.9931070Z     returns a successful object with Scheduled distribution
2024-03-07T21:47:45.0706280Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T21:47:45.0707316Z     partner is deactivated
2024-03-07T21:47:45.1485122Z       does not send an email
2024-03-07T21:47:45.1485913Z     when the line item quantity is not positive
2024-03-07T21:47:45.1969444Z       preserves the RecordInvalid error and is unsuccessful
2024-03-07T21:47:45.1970292Z     when there's not sufficient inventory
2024-03-07T21:47:45.2548752Z       preserves the Insufficiency error and is unsuccessful
2024-03-07T21:47:45.2550395Z     when there's multiple line items and one has insufficient inventory
2024-03-07T21:47:45.3160607Z       preserves the Insufficiency error and is unsuccessful
2024-03-07T21:47:45.3161779Z     when provided with a request ID
2024-03-07T21:47:45.4021369Z       changes the status of the request
2024-03-07T21:47:45.4022195Z       and the request already has a distribution associated with it
2024-03-07T21:47:45.4748608Z         should not be successful
2024-03-07T21:47:45.4750587Z     when it fails to save
2024-03-07T21:47:45.5253802Z       preserves the error and is unsuccessful
2024-03-07T21:47:45.5254642Z     partner has send reminders setting set to false
2024-03-07T21:47:45.5999335Z       does not send a PartnerMailer
2024-03-07T21:47:45.6000188Z     partner has send reminders setting set to true
2024-03-07T21:47:45.7792769Z       Sends a PartnerMailer
2024-03-07T21:47:45.7793343Z 
2024-03-07T21:47:45.7793665Z DistributionItemizedBreakdownService
2024-03-07T21:47:45.7794688Z   #fetch_csv
2024-03-07T21:47:46.1732062Z     should output the expected output but in CSV format
2024-03-07T21:47:46.1733297Z   #fetch
2024-03-07T21:47:46.5574321Z     should include the break down of items distributed with onhand data
2024-03-07T21:47:46.5575399Z 
2024-03-07T21:47:46.5575699Z DeallocateKitInventoryService
2024-03-07T21:47:46.5576608Z   #deallocate
2024-03-07T21:47:46.5577170Z     when inventory items are available
2024-03-07T21:47:46.5578459Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-07T21:47:46.8819420Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-07T21:47:46.8820956Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-07T21:47:47.1575488Z         raises error about KitAllocation not found
2024-03-07T21:47:47.1577412Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-07T21:47:47.4457377Z         raises error about inconsistent inventory in or out
2024-03-07T21:47:47.4458368Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-07T21:47:47.7675301Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-07T21:47:47.7677118Z   #error
2024-03-07T21:47:47.7678273Z     when the storage location organization doesn't match
2024-03-07T21:47:47.9918795Z       returns error
2024-03-07T21:47:47.9919786Z 
2024-03-07T21:47:47.9920174Z Transfer
2024-03-07T21:47:47.9921789Z   versioning
2024-03-07T21:47:47.9960734Z     is expected to be versioned
2024-03-07T21:47:47.9961465Z   Methods >
2024-03-07T21:47:48.2075741Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-07T21:47:48.2076857Z   Validations >
2024-03-07T21:47:48.5445756Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-07T21:47:48.5665371Z     must have storage locations set
2024-03-07T21:47:48.6315701Z     requires that the line items must have sufficient quantity in the inventory
2024-03-07T21:47:48.6396035Z     must belong to an organization
2024-03-07T21:47:48.6514479Z     must have different storage locations
2024-03-07T21:47:48.6758659Z     requires that each line item exists in the inventory
2024-03-07T21:47:48.6759543Z   Scopes >
2024-03-07T21:47:48.6980468Z     `from_location` can filter out transfers from a specific location
2024-03-07T21:47:48.7191765Z     `to_location` can filter out transfers to a specific location
2024-03-07T21:47:48.7192687Z   behaves like itemizable
2024-03-07T21:47:48.7193432Z     .line_items
2024-03-07T21:47:48.7193885Z       sorted
2024-03-07T21:47:48.7884990Z         displays the items, sorted by name
2024-03-07T21:47:48.7885993Z       combine!
2024-03-07T21:47:48.8149785Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:47:48.8605834Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:47:48.8607073Z       total
2024-03-07T21:47:48.9089997Z         has an item total
2024-03-07T21:47:48.9090837Z       quantities_by_name
2024-03-07T21:47:48.9585646Z         returns a hash of items with id, name, and quantity
2024-03-07T21:47:49.0072119Z         leaves out zero-quantitied items if requested
2024-03-07T21:47:49.0073175Z     .to_a
2024-03-07T21:47:49.0073775Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:47:49.0421690Z         calls line_item_values
2024-03-07T21:47:49.0422659Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:47:49.0762615Z         raises an error
2024-03-07T21:47:49.0766005Z 
2024-03-07T21:47:49.0766382Z AccountRequestsController
2024-03-07T21:47:49.0767212Z   routing
2024-03-07T21:47:49.0810015Z     routes to #create
2024-03-07T21:47:49.0844463Z     routes to #new
2024-03-07T21:47:49.0845137Z 
2024-03-07T21:47:49.0845822Z RequestItem
2024-03-07T21:47:49.0846530Z   Methods >
2024-03-07T21:47:49.0847546Z     #from_json
2024-03-07T21:47:49.3308716Z       has the correct amount on hand
2024-03-07T21:47:49.5756300Z       has the correct amount on hand for location
2024-03-07T21:47:49.8179928Z       has the correct name
2024-03-07T21:47:50.0770055Z       has the correct quantity
2024-03-07T21:47:50.0770568Z 
2024-03-07T21:47:50.0770915Z Exports::ExportDonationsCSVService
2024-03-07T21:47:50.0771773Z   #generate_csv_data
2024-03-07T21:47:50.1838066Z     should match the expected content for the csv
2024-03-07T21:47:50.1838790Z 
2024-03-07T21:47:50.1839292Z AccountRequestMailer
2024-03-07T21:47:50.1840269Z   #approval_request
2024-03-07T21:47:50.2094424Z     should include the admin link to create the new organization from the account request
2024-03-07T21:47:50.2238030Z     should include the admin link to reject the organization
2024-03-07T21:47:50.2359666Z     should be sent to the info@humanessentials.app email address
2024-03-07T21:47:50.2632971Z     should include details of the account request
2024-03-07T21:47:50.2760431Z     should have the correct subject
2024-03-07T21:47:50.2761663Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T21:47:50.2808535Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T21:47:50.2809885Z   #rejection
2024-03-07T21:47:50.2929047Z     should have the correct subject
2024-03-07T21:47:50.3041925Z     should include the rejection reason
2024-03-07T21:47:50.3151754Z     should be sent to the correct email address
2024-03-07T21:47:50.3152737Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T21:47:50.3199460Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T21:47:50.3200327Z   #confirmation
2024-03-07T21:47:50.3320326Z     should have the correct subject
2024-03-07T21:47:50.3436293Z     should be sent to the specified account_request email
2024-03-07T21:47:50.3549927Z     should be from no-reply@humanessentials.app
2024-03-07T21:47:50.3550690Z     Text format
2024-03-07T21:47:50.3665204Z       should include the instruction video link
2024-03-07T21:47:50.3782192Z       should include the staging/demo account information
2024-03-07T21:47:50.3895556Z       should include the button to confirm the request
2024-03-07T21:47:50.3897052Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T21:47:50.3941861Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T21:47:50.3942706Z     HTML format
2024-03-07T21:47:50.4058603Z       should include the staging/demo account information
2024-03-07T21:47:50.4172878Z       should include the button to confirm the request
2024-03-07T21:47:50.4285886Z       should include the instruction video link
2024-03-07T21:47:50.4286561Z 
2024-03-07T21:47:50.4286876Z HistoricalTrendService
2024-03-07T21:47:50.4287500Z   #series
2024-03-07T21:47:50.7022907Z     returns an array of items with their monthly data
2024-03-07T21:47:50.7023684Z 
2024-03-07T21:47:50.7024037Z PartnerApprovalService
2024-03-07T21:47:50.7025503Z   #call
2024-03-07T21:47:50.7026984Z     when the arguments are incorrect
2024-03-07T21:47:50.7027865Z       because the partner is not approvable
2024-03-07T21:47:50.7280114Z         should return the PartnerApprovalService object with an error
2024-03-07T21:47:50.7281171Z     when the arguments are correct
2024-03-07T21:47:50.7576314Z       should change the partner status to approved
2024-03-07T21:47:50.7916910Z       should have no errors
2024-03-07T21:47:50.8212918Z       should send an email notification to the partner
2024-03-07T21:47:50.8214175Z       but a unexpected error occured during the save
2024-03-07T21:47:50.8215033Z         for partner approval
2024-03-07T21:47:50.8469626Z           should not send an email notification to the partner
2024-03-07T21:47:50.8922377Z           should not change the partner status to approved
2024-03-07T21:47:50.9018539Z           should have an error with the raised error
2024-03-07T21:47:50.9019818Z 
2024-03-07T21:47:50.9020032Z HelpController
2024-03-07T21:47:50.9021390Z   While signed in as a normal user >
2024-03-07T21:47:50.9022091Z     GET #show
2024-03-07T21:47:50.9093901Z       does not display help page when the user logs out
2024-03-07T21:47:50.9232269Z       returns http success
2024-03-07T21:47:50.9234130Z 
2024-03-07T21:47:50.9234346Z Partner
2024-03-07T21:47:50.9236701Z   callbacks
2024-03-07T21:47:50.9448739Z     properly downcases email
2024-03-07T21:47:50.9449273Z   #profile
2024-03-07T21:47:50.9685199Z     should return the associated Partners::Profile record
2024-03-07T21:47:50.9685998Z   associations
2024-03-07T21:47:50.9725476Z     is expected to have many families dependent => destroy
2024-03-07T21:47:50.9758291Z     is expected to have many requests
2024-03-07T21:47:50.9793193Z     is expected to have many distributions
2024-03-07T21:47:50.9828381Z     is expected to have many children through families
2024-03-07T21:47:50.9860239Z     is expected to have many requests
2024-03-07T21:47:50.9895043Z     is expected to have many requestable_items through item_categories source => items
2024-03-07T21:47:50.9952846Z     is expected to belong to organization required: true
2024-03-07T21:47:51.0006358Z     is expected to belong to partner_group optional: true
2024-03-07T21:47:51.0041344Z     is expected to have many item_categories through partner_group
2024-03-07T21:47:51.0076129Z     is expected to have many users dependent => destroy
2024-03-07T21:47:51.0076870Z     primary_user
2024-03-07T21:47:51.0353798Z       should return the first user ever created for a partner
2024-03-07T21:47:51.0354554Z   Validations >
2024-03-07T21:47:51.0410362Z     must belong to an organization
2024-03-07T21:47:51.0502381Z     validates the quota is a number but it is not required
2024-03-07T21:47:51.0798043Z     requires a unique email that is formatted correctly
2024-03-07T21:47:51.1059513Z     does not require a unique name between organizations
2024-03-07T21:47:51.1333954Z     requires a unique name within an organization
2024-03-07T21:47:51.1610209Z     still requires a unique email between organizations
2024-03-07T21:47:51.1610923Z   #approvable?
2024-03-07T21:47:51.1611649Z     when status is invited
2024-03-07T21:47:51.1656601Z       should return true
2024-03-07T21:47:51.1657230Z     when status is not invited or awaiting_review
2024-03-07T21:47:51.1745574Z       should return false
2024-03-07T21:47:51.1746143Z     when status is awaiting_review
2024-03-07T21:47:51.1787218Z       should return true
2024-03-07T21:47:51.1787761Z   ActiveStorage validation
2024-03-07T21:47:51.1902278Z     validates that attachments are pdf or docs
2024-03-07T21:47:51.1902943Z   Filters
2024-03-07T21:47:51.1903325Z     by_status
2024-03-07T21:47:51.2315210Z       yields deactivated partner when deactivated status provided
2024-03-07T21:47:51.2703164Z       yields partners with the provided status
2024-03-07T21:47:51.2703846Z   changing emails
2024-03-07T21:47:51.2981128Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-07T21:47:51.3294203Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-07T21:47:51.3544571Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-07T21:47:51.3786087Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-07T21:47:51.4246619Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-07T21:47:51.4561376Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-07T21:47:51.4810722Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-07T21:47:51.4811864Z   versioning
2024-03-07T21:47:51.4845319Z     is expected to be versioned
2024-03-07T21:47:51.4845887Z   #deactivated?
2024-03-07T21:47:51.4846832Z     when the status is not 'deactivated'
2024-03-07T21:47:51.4889005Z       should return false
2024-03-07T21:47:51.4889677Z     when the status is 'deactivated'
2024-03-07T21:47:51.4930559Z       should return true
2024-03-07T21:47:51.4931101Z   #impact_metrics
2024-03-07T21:47:51.4932165Z     when partner don't have any related information
2024-03-07T21:47:51.5169141Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-07T21:47:51.5169850Z     when partner has related information
2024-03-07T21:47:51.5635236Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-07T21:47:51.5636377Z   #deletable?
2024-03-07T21:47:51.5636666Z     when status is not uninvited
2024-03-07T21:47:51.5715463Z       should return false
2024-03-07T21:47:51.5715979Z     when status is uninvited
2024-03-07T21:47:51.5716876Z       when it has a request
2024-03-07T21:47:51.5881827Z         should return false
2024-03-07T21:47:51.5882429Z       when it has no other associations
2024-03-07T21:47:51.5991771Z         should return true
2024-03-07T21:47:51.5992336Z       when it has a profile and users
2024-03-07T21:47:51.6239151Z         should return false
2024-03-07T21:47:51.6239700Z       when it has a profile but no users
2024-03-07T21:47:51.6387674Z         should return true
2024-03-07T21:47:51.6388191Z       when it has a distribution
2024-03-07T21:47:51.6526285Z         should return false
2024-03-07T21:47:51.6527019Z   #csv_export_attributes
2024-03-07T21:47:51.6768643Z     includes contact person information from parnerbase
2024-03-07T21:47:51.6769328Z   import_csv
2024-03-07T21:47:51.9883675Z     imports partners from a csv file with BOM encodings
2024-03-07T21:47:52.2041001Z     imports partners from a csv file and prevents multiple imports
2024-03-07T21:47:52.2041527Z   #quantity_year_to_date
2024-03-07T21:47:52.3823064Z     includes all item quantities from distributions issued during the current year
2024-03-07T21:47:52.5595334Z     does not include quantities from distributions issued during the previous year
2024-03-07T21:47:52.5596097Z 
2024-03-07T21:47:52.5596208Z PartnerMailer
2024-03-07T21:47:52.5597447Z   #application_approved
2024-03-07T21:47:52.5879252Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-07T21:47:52.6130537Z     should be sent to the partner main email with the correct subject line
2024-03-07T21:47:52.6131512Z   #recertification_request
2024-03-07T21:47:52.6364353Z     renders the body with text that indicates to recertify and link to where
2024-03-07T21:47:52.6592621Z     should be sent to the partner main email with the correct subject line
2024-03-07T21:47:52.6593310Z 
2024-03-07T21:47:52.6593444Z County
2024-03-07T21:47:52.6630477Z   is expected to have many served_areas
2024-03-07T21:47:52.6631051Z   versioning
2024-03-07T21:47:52.6666849Z     is expected to be versioned
2024-03-07T21:47:52.6668168Z 
2024-03-07T21:47:52.6668322Z BarcodeItem
2024-03-07T21:47:52.6669591Z   Barcodes of BaseItems ('Global')
2024-03-07T21:47:52.6825742Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-07T21:47:52.6826501Z     filters >
2024-03-07T21:47:52.6978994Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-07T21:47:52.7091444Z       ->by_value returns the barcode with that value
2024-03-07T21:47:52.7244709Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-07T21:47:52.7245463Z     validations >
2024-03-07T21:47:52.7333760Z       enforces uniqueness in the global scope
2024-03-07T21:47:52.7412104Z       allows multiple barcodes to point at the same base item
2024-03-07T21:47:52.7487265Z       is valid with or without an organization
2024-03-07T21:47:52.7487940Z       quantity >
2024-03-07T21:47:52.7542461Z         is an integer
2024-03-07T21:47:52.7595815Z         is not nil
2024-03-07T21:47:52.7649193Z         is not a negative number
2024-03-07T21:47:52.7649766Z       value >
2024-03-07T21:47:52.7704390Z         requires a value
2024-03-07T21:47:52.7704894Z       item >
2024-03-07T21:47:52.7759661Z         is invalid without an item associated with it
2024-03-07T21:47:52.7760384Z     scopes >
2024-03-07T21:47:52.7762369Z       global
2024-03-07T21:47:52.7929273Z         includes all barcodes, for both base items and regular items
2024-03-07T21:47:52.7930048Z   versioning
2024-03-07T21:47:52.7964908Z     is expected to be versioned
2024-03-07T21:47:52.7965497Z   Organization barcodes
2024-03-07T21:47:52.8082483Z     updates a counter in Item whenever it tracks a new barcode
2024-03-07T21:47:52.8083263Z     validations >
2024-03-07T21:47:52.8244898Z       enforces value uniqueness within the organization
2024-03-07T21:47:52.8369159Z       does not enforce value uniqueness compared with the global scope
2024-03-07T21:47:52.8599675Z       does not enforces value uniqueness across organizations
2024-03-07T21:47:52.8742989Z       is valid only with an organization
2024-03-07T21:47:52.8854949Z       allows multiple barcodes to point at the same item
2024-03-07T21:47:52.8855683Z       quantity >
2024-03-07T21:47:52.8946434Z         is an integer
2024-03-07T21:47:52.9035327Z         is not nil
2024-03-07T21:47:52.9124464Z         is not a negative number
2024-03-07T21:47:52.9125035Z       item >
2024-03-07T21:47:52.9218170Z         is invalid without an item associated with it
2024-03-07T21:47:52.9218825Z       value >
2024-03-07T21:47:52.9317629Z         requires a value
2024-03-07T21:47:52.9318229Z     to_h >
2024-03-07T21:47:52.9432705Z       emits a hash for a line_item
2024-03-07T21:47:52.9433290Z     filters >
2024-03-07T21:47:52.9629000Z       ->item_id shows only barcodes for a specific item_id
2024-03-07T21:47:52.9629733Z     scopes >
2024-03-07T21:47:53.1569532Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-07T21:47:53.1780030Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-07T21:47:53.1891216Z       ->by_value returns the barcode with that value
2024-03-07T21:47:53.1892297Z     when searching for a barcode where there is a global and local with the same value
2024-03-07T21:47:53.2193478Z       favors the local barcode
2024-03-07T21:47:53.2194951Z 
2024-03-07T21:47:53.2195126Z Purchase
2024-03-07T21:47:53.2196835Z   Callbacks >
2024-03-07T21:47:53.2397657Z     automatically combines duplicate line_item records when they're created
2024-03-07T21:47:53.2580386Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T21:47:53.2581323Z   Validations >
2024-03-07T21:47:53.2766439Z     is invalid when the line items are invalid
2024-03-07T21:47:53.2854749Z     is valid if all categories add up to total
2024-03-07T21:47:53.2931962Z     must belong to an organization
2024-03-07T21:47:53.3014325Z     is valid if categories have no values
2024-03-07T21:47:53.3089197Z     requires an inventory (storage location)
2024-03-07T21:47:53.3176109Z     is not valid if period supplies is non-zero but no other category is
2024-03-07T21:47:53.3354296Z     is not valid if any category is non-zero but does not add up to the total
2024-03-07T21:47:53.3435196Z     ensures that the issued at is no earlier than 2000
2024-03-07T21:47:53.3521738Z     is not valid if categories do not add up
2024-03-07T21:47:53.3522394Z   Methods >
2024-03-07T21:47:53.3522920Z     storage_view
2024-03-07T21:47:53.4174090Z       returns name of storage location
2024-03-07T21:47:53.4174776Z     remove
2024-03-07T21:47:53.4906267Z       fails gracefully if the item doesn't exist
2024-03-07T21:47:53.5570308Z       removes the item from the purchase
2024-03-07T21:47:53.5571157Z   versioning
2024-03-07T21:47:53.5608190Z     is expected to be versioned
2024-03-07T21:47:53.5608783Z   behaves like itemizable
2024-03-07T21:47:53.5609648Z     .to_a
2024-03-07T21:47:53.5610391Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T21:47:53.5973949Z         calls line_item_values
2024-03-07T21:47:53.5974639Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T21:47:53.6351240Z         raises an error
2024-03-07T21:47:53.6352120Z     .line_items
2024-03-07T21:47:53.6353041Z       combine!
2024-03-07T21:47:53.6785834Z         combines multiple line_items with the same item_id into a single record
2024-03-07T21:47:53.7268435Z         incrementally combines line_items on donations that have already been created
2024-03-07T21:47:53.7269291Z       sorted
2024-03-07T21:47:53.7838514Z         displays the items, sorted by name
2024-03-07T21:47:53.7839174Z       total
2024-03-07T21:47:53.8227784Z         has an item total
2024-03-07T21:47:53.8228328Z       quantities_by_name
2024-03-07T21:47:53.8631974Z         leaves out zero-quantitied items if requested
2024-03-07T21:47:53.9019499Z         returns a hash of items with id, name, and quantity
2024-03-07T21:47:53.9020367Z   Associations >
2024-03-07T21:47:53.9021093Z     items >
2024-03-07T21:47:53.9211975Z       has_many
2024-03-07T21:47:53.9212520Z   Scopes >
2024-03-07T21:47:53.9213217Z     during >
2024-03-07T21:47:53.9450864Z       returns all purchases created between two dates
2024-03-07T21:47:53.9452217Z 
2024-03-07T21:47:53.9452461Z OrganizationStats
2024-03-07T21:47:53.9453722Z   storage_locations_added method >
2024-03-07T21:47:53.9454562Z     current org is nil >
2024-03-07T21:47:53.9488272Z       should return 0
2024-03-07T21:47:53.9488779Z     current org is not nil >
2024-03-07T21:47:53.9522079Z       should return actual count of locations
2024-03-07T21:47:53.9522710Z   partners_added method >
2024-03-07T21:47:53.9523435Z     current org is not nil >
2024-03-07T21:47:53.9557431Z       should return actual count of partners
2024-03-07T21:47:53.9558068Z     current org is nil >
2024-03-07T21:47:53.9589633Z       should return 0
2024-03-07T21:47:53.9590209Z   donation_sites_added method >
2024-03-07T21:47:53.9591073Z     current org is nil >
2024-03-07T21:47:53.9624228Z       should return 0
2024-03-07T21:47:53.9624706Z     current org is not nil >
2024-03-07T21:47:53.9657874Z       should return actual count of donation sites
2024-03-07T21:47:53.9658560Z   locations_with_inventory method >
2024-03-07T21:47:53.9659314Z     current org is nil >
2024-03-07T21:47:53.9691418Z       should return an empty array
2024-03-07T21:47:53.9692097Z     current org is not nil + no locations have items >
2024-03-07T21:47:53.9754277Z       should return an empty array
2024-03-07T21:47:53.9754980Z     current org is not nil + locations have items >
2024-03-07T21:47:54.0084456Z       should return storage location
2024-03-07T21:47:54.0085477Z 
2024-03-07T21:47:54.0085671Z DistributionMailer
2024-03-07T21:47:54.0087177Z   #reminder_email
2024-03-07T21:47:54.0088147Z     with deliver_method: :pick_up
2024-03-07T21:47:54.0651120Z       renders the body with 'pick up' specified
2024-03-07T21:47:54.0651809Z     Text format
2024-03-07T21:47:54.1106013Z       renders the body with organization's email text
2024-03-07T21:47:54.1106717Z     with deliver_method: :delivery
2024-03-07T21:47:54.1594123Z       renders the body with 'delivery' specified
2024-03-07T21:47:54.1594801Z     HTML format
2024-03-07T21:47:54.2166074Z       renders the body with organization's email text
2024-03-07T21:47:54.2166832Z   #partner_mailer
2024-03-07T21:47:54.2694709Z     renders the body with organization's email text
2024-03-07T21:47:54.3179188Z     renders the body with distributions text
2024-03-07T21:47:54.3179897Z     with deliver_method: :delivery
2024-03-07T21:47:54.3699428Z       sends copy of email only to the partner
2024-03-07T21:47:54.4229170Z       renders the body with 'delivered' specified
2024-03-07T21:47:54.4229895Z     with deliver_method: :pick_up
2024-03-07T21:47:54.4764843Z       renders the body with 'picked up' specified
2024-03-07T21:47:54.4765642Z       when parners profile pick_up_email is present
2024-03-07T21:47:54.5300364Z         sends email to the primary contact and partner`s pickup person
2024-03-07T21:47:54.5301442Z         when pickup person happens to be the same as the primary contact
2024-03-07T21:47:54.5807406Z           does not send email twice
2024-03-07T21:47:54.5808044Z     with distribution changes
2024-03-07T21:47:54.6378561Z       renders the body with changes that happened in the distribution
2024-03-07T21:47:54.6379478Z 
2024-03-07T21:47:54.6379682Z RemoveRoleService
2024-03-07T21:47:54.6380190Z   #call
2024-03-07T21:47:54.6381190Z     when the role exists
2024-03-07T21:47:54.8393480Z       should work with a type and ID instead of role ID
2024-03-07T21:47:55.0368829Z       should remove the admin role when removing user role
2024-03-07T21:47:55.2244657Z       should remove the role
2024-03-07T21:47:55.2245292Z     when not enough information provided
2024-03-07T21:47:55.4143913Z       should raise an error
2024-03-07T21:47:55.4144357Z     when the role does not exist
2024-03-07T21:47:55.6004088Z       should raise an error
2024-03-07T21:47:55.6363402Z W, [2024-03-07T13:47:55.636070 #2730]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-07T21:47:55.6365532Z W, [2024-03-07T13:47:55.636119 #2730]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-07T21:47:55.6368315Z W, [2024-03-07T13:47:55.636137 #2730]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-07T21:47:55.6371381Z W, [2024-03-07T13:47:55.636166 #2730]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-07T21:47:55.6372050Z 
2024-03-07T21:47:55.6372408Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-07T21:47:55.6372834Z 
2024-03-07T21:47:55.6373468Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-07T21:47:55.6374239Z      # Not yet implemented
2024-03-07T21:47:55.6374559Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-07T21:47:55.6374816Z 
2024-03-07T21:47:55.6375449Z   2) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-07T21:47:55.6376592Z      # Temporarily skipped with xit
2024-03-07T21:47:55.6377040Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-07T21:47:55.6377390Z 
2024-03-07T21:47:55.6377579Z Finished in 37.29 seconds (files took 8.37 seconds to load)
2024-03-07T21:47:55.6378008Z 508 examples, 0 failures, 2 pending
2024-03-07T21:47:55.6378235Z 
2024-03-07T21:47:55.6378343Z Randomized with seed 40857
2024-03-07T21:47:55.6378528Z 
2024-03-07T21:47:56.1291506Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3780 / 6490 LOC (58.24%) covered.
2024-03-07T21:47:56.5682884Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10823 LOC (0.35%) covered.
