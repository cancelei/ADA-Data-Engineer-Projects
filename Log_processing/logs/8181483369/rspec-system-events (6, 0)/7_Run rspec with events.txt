2024-03-07T01:31:47.1035114Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:31:47.1035997Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:31:47.1087591Z shell: /usr/bin/bash -e {0}
2024-03-07T01:31:47.1088182Z env:
2024-03-07T01:31:47.1088517Z   POSTGRES_HOST: localhost
2024-03-07T01:31:47.1088976Z   DATABASE_HOST: localhost
2024-03-07T01:31:47.1089386Z   PG_USERNAME: postgres
2024-03-07T01:31:47.1089733Z   PG_PASSWORD: password
2024-03-07T01:31:47.1090190Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:31:47.1090622Z   POSTGRES_PORT: 5432
2024-03-07T01:31:47.1090996Z   PGHOST: localhost
2024-03-07T01:31:47.1091432Z   PGUSER: postgres
2024-03-07T01:31:47.1091771Z   RAILS_ENV: test
2024-03-07T01:31:47.1092505Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:31:47.1093060Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-07T01:31:47.1093435Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-07T01:31:47.1093898Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:31:47.1094572Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:31:47.1095182Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:31:47.1095926Z   EVENTS_READ: true
2024-03-07T01:31:47.1096266Z ##[endgroup]
2024-03-07T01:31:53.3594034Z I, [2024-03-07T01:31:53.358949 #2413]  INFO -- : [knapsack_pro] Generating RSpec test examples JSON report for slow test files to prepare it to be split by test examples (by individual test cases). Thanks to that, a single slow test file can be split across parallel CI nodes. Analyzing 1 slow test files.
2024-03-07T01:32:02.2031098Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 2537 / 6688 LOC (37.93%) covered.
2024-03-07T01:32:05.7698952Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/partners/family_requests_system_spec.rb" "spec/system/distributions_by_county_system_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:3:8:1:1]" "spec/system/log_in_system_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:2]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:3:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:2]" "spec/system/dashboard_system_spec.rb[1:2:4:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:3:1]" "spec/system/dashboard_system_spec.rb[1:2:7:1]" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/product_drive_participants_requests_spec.rb" "spec/requests/reports/annual_reports_requests_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb" "spec/requests/events_requests_spec.rb"
2024-03-07T01:32:14.0584051Z Run options: include {:ids=>{"./spec/system/dashboard_system_spec.rb"=>["1:2:3:8:1:1", "1:2:7:7:1:1", "1:2:5:4:1:1", "1:2:5:6:1:1", "1:2:5:9:1:2", "1:2:3:2:1:1", "1:2:5:2:1:2", "1:2:4:2:1:1", "1:2:3:1", "1:2:7:1", "1:2:5:10:1"]}}
2024-03-07T01:32:14.0701252Z 
2024-03-07T01:32:14.0703460Z Randomized with seed 52271
2024-03-07T01:32:15.0432138Z 
2024-03-07T01:32:15.0433167Z Admin::BaseItems
2024-03-07T01:32:15.0437028Z   When logged in as an organization admin
2024-03-07T01:32:15.0438598Z     GET #index
2024-03-07T01:32:15.0825141Z       returns http success
2024-03-07T01:32:15.0825671Z     POST #create
2024-03-07T01:32:15.1049874Z       redirects
2024-03-07T01:32:15.1050712Z     DELETE #destroy
2024-03-07T01:32:15.1173840Z       redirects
2024-03-07T01:32:15.1174439Z     GET #show
2024-03-07T01:32:15.1293002Z       returns http success
2024-03-07T01:32:15.1293692Z     GET #edit
2024-03-07T01:32:15.1411397Z       returns http success
2024-03-07T01:32:15.1412152Z     PUT #update
2024-03-07T01:32:15.1535876Z       redirect
2024-03-07T01:32:15.1536666Z     GET #new
2024-03-07T01:32:15.1655202Z       returns http success
2024-03-07T01:32:15.1656340Z 
2024-03-07T01:32:15.1656737Z Authentication
2024-03-07T01:32:15.1658389Z   Deactivated user
2024-03-07T01:32:16.7916658Z     should not allow the user to log in
2024-03-07T01:32:16.7917234Z   Success
2024-03-07T01:32:17.4389173Z     should show dashboard upon signin
2024-03-07T01:32:17.4390052Z   Showing the modal warning in staging
2024-03-07T01:32:17.4390992Z     when accessing /users/sign_in not in the staging environment
2024-03-07T01:32:17.8506869Z       should not render the modal
2024-03-07T01:32:17.8507589Z     when accessing /users/sign_in in the staging environment
2024-03-07T01:32:18.2849153Z       should render the modal
2024-03-07T01:32:18.2850196Z     when accessing /users/password/new not in the staging environment
2024-03-07T01:32:18.6901579Z       should not render the modal
2024-03-07T01:32:18.6902540Z     when accessing /users/password/new in the staging environment
2024-03-07T01:32:19.1211552Z       should render the modal
2024-03-07T01:32:19.1212683Z 
2024-03-07T01:32:19.1213042Z ProductDriveParticipants
2024-03-07T01:32:19.1214512Z   While signed in
2024-03-07T01:32:19.1216333Z     GET #index
2024-03-07T01:32:19.1216957Z       csv
2024-03-07T01:32:19.1499857Z         is expected to be successful
2024-03-07T01:32:19.1500971Z       html
2024-03-07T01:32:19.1827194Z         is expected to be successful
2024-03-07T01:32:19.1827892Z     GET #show
2024-03-07T01:32:19.2131024Z       returns http success
2024-03-07T01:32:19.2131645Z     XHR #create
2024-03-07T01:32:19.2448996Z       successful create
2024-03-07T01:32:19.2751832Z       flash error
2024-03-07T01:32:19.2752418Z     POST #import_csv
2024-03-07T01:32:19.2753333Z       without a csv file
2024-03-07T01:32:19.2878938Z         presents a flash error message
2024-03-07T01:32:19.2988846Z         redirects to :index
2024-03-07T01:32:19.2989613Z       with a csv file
2024-03-07T01:32:19.3192375Z         redirects
2024-03-07T01:32:19.3241775Z         invokes .import_csv
2024-03-07T01:32:19.3417345Z         presents a flash notice message
2024-03-07T01:32:19.3418102Z       csv file with wrong headers
2024-03-07T01:32:19.3535992Z         redirects
2024-03-07T01:32:19.3651707Z         presents a flash error message
2024-03-07T01:32:19.3652480Z     GET #new
2024-03-07T01:32:19.3932128Z       returns http success
2024-03-07T01:32:19.3932916Z     Looking at a different organization
2024-03-07T01:32:19.5579568Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:32:19.5580757Z     POST #create
2024-03-07T01:32:19.5892242Z       flash error
2024-03-07T01:32:19.6043268Z       successful create
2024-03-07T01:32:19.6044032Z     GET #edit
2024-03-07T01:32:19.6349021Z       returns http success
2024-03-07T01:32:19.6350072Z   While not signed in
2024-03-07T01:32:19.6407800Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:32:19.6408430Z 
2024-03-07T01:32:19.6408971Z Admin::Organizations
2024-03-07T01:32:19.6409992Z   When logged in as a super admin
2024-03-07T01:32:19.6411536Z     DELETE #destroy
2024-03-07T01:32:19.6412373Z       with a valid organization id
2024-03-07T01:32:20.1619464Z         redirects to #index
2024-03-07T01:32:20.1620644Z     GET #edit
2024-03-07T01:32:20.3821551Z       returns http success
2024-03-07T01:32:20.3822927Z     GET #index
2024-03-07T01:32:20.4134598Z       returns http success
2024-03-07T01:32:20.4135709Z     PATCH #update
2024-03-07T01:32:20.4136507Z       with an invalid update
2024-03-07T01:32:20.6332283Z         redirects to #edit with an error message
2024-03-07T01:32:20.8435976Z         returns http success
2024-03-07T01:32:20.8436792Z       with a valid update
2024-03-07T01:32:21.0298460Z         redirects to #index
2024-03-07T01:32:21.0299338Z     GET #show
2024-03-07T01:32:21.2346111Z       returns http success
2024-03-07T01:32:21.2347168Z     DELETE #destroy
2024-03-07T01:32:21.5843140Z       redirects
2024-03-07T01:32:21.5843989Z     PUT #update
2024-03-07T01:32:21.6031723Z       redirect
2024-03-07T01:32:21.6032349Z     POST #create
2024-03-07T01:32:21.6033409Z       with valid params
2024-03-07T01:32:21.9022376Z         creates an organization and redirects to #index
2024-03-07T01:32:21.9023518Z       with invalid params
2024-03-07T01:32:21.9469750Z         does not create an organization and renders #create with an error message
2024-03-07T01:32:21.9470844Z     GET #new
2024-03-07T01:32:21.9826124Z       returns http success
2024-03-07T01:32:21.9827370Z       when given a token that matches a account request that has already been processed
2024-03-07T01:32:22.2285826Z         should render new with a flash error message
2024-03-07T01:32:22.2286985Z       when given a valid account request token in the query parameters
2024-03-07T01:32:22.2847721Z         should render new with pre populate input fields from the account_request
2024-03-07T01:32:22.2849062Z   When logged in as a non-admin user
2024-03-07T01:32:22.2849783Z     POST #create
2024-03-07T01:32:22.2991887Z       redirects
2024-03-07T01:32:22.2992505Z     PUT #update
2024-03-07T01:32:22.3112789Z       redirects
2024-03-07T01:32:22.3113437Z     GET #index
2024-03-07T01:32:22.3231714Z       redirects
2024-03-07T01:32:22.3232335Z     GET #edit
2024-03-07T01:32:22.3349723Z       redirects
2024-03-07T01:32:22.3350507Z     GET #new
2024-03-07T01:32:22.3466368Z       redirects
2024-03-07T01:32:22.3468260Z 
2024-03-07T01:32:22.3468848Z Distributions
2024-03-07T01:32:23.1367886Z   errors if user does not fill storage_location
2024-03-07T01:32:25.0123103Z   allows completion of corrected distribution with depleted inventory item
2024-03-07T01:32:25.0124223Z   When going to the Pick Ups & Deliveries page
2024-03-07T01:32:25.7113786Z     appears distribution in calendar with correct time & timezone
2024-03-07T01:32:25.7114589Z   When creating a distribution from a donation
2024-03-07T01:32:27.2250560Z     completes successfully
2024-03-07T01:32:27.2251117Z     when editing that distribution
2024-03-07T01:32:29.5715456Z       User creates a distribution from a donation then tries to make the quantity too big
2024-03-07T01:32:31.8738018Z       User creates a distribution from a donation then edits it
2024-03-07T01:32:34.9544870Z       User creates duplicate line items
2024-03-07T01:32:34.9545855Z   When creating a distribution and items have value
2024-03-07T01:32:35.7574592Z     the user sees value in row on index page
2024-03-07T01:32:36.7899655Z     the user sees value per item on show page
2024-03-07T01:32:37.8664244Z     the user sees total value on show page
2024-03-07T01:32:38.7831398Z     the user sees total value on index page
2024-03-07T01:32:38.7832531Z   When showing a individual distribution
2024-03-07T01:32:39.3972100Z     Show partner name in title
2024-03-07T01:32:39.3973144Z   When creating a new distribution manually
2024-03-07T01:32:40.1483698Z     Displays a complete form after validation errors
2024-03-07T01:32:40.7940155Z     should not display inactive storage locations in dropdown
2024-03-07T01:32:40.7941418Z     when the quantity is lower than the on hand recommended quantity
2024-03-07T01:32:41.6322536Z       should display an alert (FAILED - 1)
2024-03-07T01:32:41.6324655Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-display-an-alert_2024-03-06-17-32-41.496.html[0m
2024-03-07T01:32:41.6327396Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-display-an-alert_2024-03-06-17-32-41.496.png[0m
2024-03-07T01:32:41.6329992Z     when there is insufficient inventory to fulfill the Distribution
2024-03-07T01:32:42.6178881Z       gracefully handles the error
2024-03-07T01:32:42.6179854Z     when there is a default storage location
2024-03-07T01:32:43.1916682Z       automatically selects the default storage location
2024-03-07T01:32:43.1917649Z     when the quantity is lower than the on hand minimum quantity
2024-03-07T01:32:44.3394106Z       should display an error
2024-03-07T01:32:44.3395433Z     when the delivery_method is shipped and shipping cost is none-negative
2024-03-07T01:32:45.2664685Z       Allows a distribution to be created
2024-03-07T01:32:45.2665700Z     when the delivery_method is not shipped
2024-03-07T01:32:48.2355496Z       Allows a distribution to be created and shipping cost field not visible
2024-03-07T01:32:48.2356574Z   via barcode entry
2024-03-07T01:32:49.0203216Z     allows users to add items via scanning them in by barcode
2024-03-07T01:32:50.4671215Z     a user can add items that do not yet have a barcode
2024-03-07T01:32:50.4671922Z   When attempting to edit a distribution
2024-03-07T01:32:50.4672859Z     when logged as Admin
2024-03-07T01:32:51.4964364Z       can click on Edit button and a warning appears
2024-03-07T01:32:52.1931293Z       can be accessed directly
2024-03-07T01:32:52.1932083Z     after the distribution issued_at has passed or it has been marked complete
2024-03-07T01:32:53.2447761Z       cannot be accessed directly
2024-03-07T01:32:53.9733937Z       does not contain a Edit button
2024-03-07T01:32:53.9734812Z   when filtering on the index page
2024-03-07T01:32:54.9690005Z     filters by partner
2024-03-07T01:32:55.9133056Z     filters by state
2024-03-07T01:32:57.2115341Z     filters by item id
2024-03-07T01:32:58.5676994Z     filters by item category id
2024-03-07T01:32:59.1399446Z     should not display inactive storage locations in dropdown
2024-03-07T01:32:59.1400426Z     behaves like Date Range Picker
2024-03-07T01:32:59.1401475Z       when choosing 'All Time'
2024-03-07T01:33:00.2475352Z         shows all the records
2024-03-07T01:33:00.2476430Z       when choosing 'Last Month'
2024-03-07T01:33:01.3498842Z         shows only 2 of the records
2024-03-07T01:33:01.3499827Z       when choosing a date range that only includes the previous week
2024-03-07T01:33:02.4219007Z         shows only 1 record
2024-03-07T01:33:02.4220218Z   When creating a distribution from a request
2024-03-07T01:33:03.6478108Z     sets the distribution id and fulfilled status on the request
2024-03-07T01:33:05.1488946Z     maintains the connection with the request even when there are initial errors
2024-03-07T01:33:05.1490310Z   With an existing distribution
2024-03-07T01:33:06.4796514Z     disallows the user from changing the quantity above the inventory quantity
2024-03-07T01:33:07.4719152Z     the user can reclaim it
2024-03-07T01:33:08.8127718Z     allows the user can change the issued_at date
2024-03-07T01:33:10.3310086Z     sends an email if reminders are enabled
2024-03-07T01:33:11.6394500Z     the user can make changes
2024-03-07T01:33:11.6395352Z     when one of the items has been 'deleted'
2024-03-07T01:33:12.6259835Z       the user can still reclaim it
2024-03-07T01:33:12.6260785Z     when delivery method is shipped and shipping cost is none negative
2024-03-07T01:33:13.9530662Z       should update distribution and display shipping_cost field
2024-03-07T01:33:13.9531741Z     when delivery method is not shipped
2024-03-07T01:33:17.1291212Z       should not display shipping_cost field
2024-03-07T01:33:17.1292140Z 
2024-03-07T01:33:17.1294730Z Annual Reports
2024-03-07T01:33:17.1296029Z   While signed in
2024-03-07T01:33:17.1297259Z     GET /show
2024-03-07T01:33:17.2354014Z       retrieves and updated the existing report if it exists
2024-03-07T01:33:17.3268556Z       returns http success
2024-03-07T01:33:17.3548683Z       returns not found if the year params is not number
2024-03-07T01:33:17.3898566Z       retrieves and uses the existing report if it exists
2024-03-07T01:33:17.3899681Z     POST /recalculate
2024-03-07T01:33:17.4681076Z       recalculates an existing report
2024-03-07T01:33:17.5601929Z       recalculates new reports
2024-03-07T01:33:17.5602795Z     GET /index
2024-03-07T01:33:17.5953710Z       returns http success
2024-03-07T01:33:17.5954145Z 
2024-03-07T01:33:17.5954723Z BroadcastAnnouncements
2024-03-07T01:33:17.5956184Z   POST /create
2024-03-07T01:33:17.5956926Z     with valid parameters
2024-03-07T01:33:17.6206091Z       creates a new BroadcastAnnouncement then redirects
2024-03-07T01:33:17.6206763Z     with invalid parameters
2024-03-07T01:33:17.6595488Z       does not create a new BroadcastAnnouncement
2024-03-07T01:33:17.6916073Z       does not render a successful response
2024-03-07T01:33:17.6917024Z   GET /edit
2024-03-07T01:33:17.7257901Z     render a successful response
2024-03-07T01:33:17.7258624Z   GET /new
2024-03-07T01:33:17.7560458Z     renders a successful response
2024-03-07T01:33:17.7561320Z   DELETE /destroy
2024-03-07T01:33:17.7765414Z     destroys the requested announcement then redirects
2024-03-07T01:33:17.7766249Z   PATCH /update
2024-03-07T01:33:17.7766999Z     with invalid parameters
2024-03-07T01:33:17.8135715Z       does not render a successful response
2024-03-07T01:33:17.8136496Z     with valid parameters
2024-03-07T01:33:17.8336358Z       updates the requested announcement and redirects
2024-03-07T01:33:17.8337171Z   GET /index
2024-03-07T01:33:17.8661318Z     renders a successful response
2024-03-07T01:33:17.8661992Z 
2024-03-07T01:33:17.8662291Z BarcodeItems
2024-03-07T01:33:17.8662910Z   While signed in
2024-03-07T01:33:17.8664417Z     Looking at a different organization
2024-03-07T01:33:18.0445823Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:33:18.0447155Z     GET #new
2024-03-07T01:33:18.0804851Z       returns http success
2024-03-07T01:33:18.0805936Z     GET #find
2024-03-07T01:33:18.0806505Z       via ajax
2024-03-07T01:33:18.0891267Z         can find a barcode that's universally available (FAILED - 2)
2024-03-07T01:33:18.0965334Z         can find a barcode that is scoped to just this organization (FAILED - 3)
2024-03-07T01:33:18.0966522Z         when it's missing
2024-03-07T01:33:18.1038601Z           returns a 404 (FAILED - 4)
2024-03-07T01:33:18.1039484Z     GET #index
2024-03-07T01:33:18.1040306Z       csv
2024-03-07T01:33:18.1284170Z         is expected to be successful
2024-03-07T01:33:18.1285314Z       html
2024-03-07T01:33:18.1726451Z         is expected to be successful
2024-03-07T01:33:18.1727593Z     DELETE #destroy
2024-03-07T01:33:18.2048105Z       redirects to the index
2024-03-07T01:33:18.2164731Z       disallows a non-superadmin to delete a global barcode (FAILED - 5)
2024-03-07T01:33:18.4069214Z       disallows a user to delete someone else's barcode
2024-03-07T01:33:18.4070186Z     GET #edit
2024-03-07T01:33:18.4071013Z       with a global barcode item
2024-03-07T01:33:18.4144220Z         returns a 404 (FAILED - 6)
2024-03-07T01:33:18.4145057Z       with a normal barcode item
2024-03-07T01:33:18.4554099Z         returns http success
2024-03-07T01:33:18.4555018Z     GET #show
2024-03-07T01:33:18.4555999Z       with a normal barcode item
2024-03-07T01:33:18.4923650Z         returns http success
2024-03-07T01:33:18.4924576Z       with a global barcode item
2024-03-07T01:33:18.5000480Z         returns a 404 (FAILED - 7)
2024-03-07T01:33:18.5003979Z 
2024-03-07T01:33:18.5004347Z Dashboard
2024-03-07T01:33:18.5005828Z   With an existing essentials bank
2024-03-07T01:33:18.5008472Z     Donations
2024-03-07T01:33:19.4421214Z       has a link to create a new donation
2024-03-07T01:33:19.4423279Z       given 1 Donation on 2022-03-05 (only if a valid date), 2 during 2022-03-06..2023-09-28, and 1 on 2023-09-29
2024-03-07T01:33:19.4424805Z         filtering to '' (March 6, 2022 - September 28, 2023)
2024-03-07T01:33:20.9551649Z           shows the correct total and 2 Recent Donation link(s)
2024-03-07T01:33:20.9553829Z       given 1 Donation on 2024-01-31 (only if a valid date), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:33:20.9555715Z         filtering to 'Last Month'
2024-03-07T01:33:22.4141978Z           shows the correct total and 1 Recent Donation link(s)
2024-03-07T01:33:22.4143735Z     Product Drives
2024-03-07T01:33:22.4146411Z       given 1 Product Drive Donation on 2024-02-28 (unless 'All Time'), 3 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:33:22.4147330Z         filtering to 'Last 7 Days'
2024-03-07T01:33:23.9405122Z           shows the correct total donations
2024-03-07T01:33:23.9406132Z       Product drive behaviour with Mixed Donation types
2024-03-07T01:33:24.6783141Z         only counts product drive donations for product drive
2024-03-07T01:33:24.6785114Z       given 1 Product Drive Donation on 2022-03-05 (unless 'All Time'), 2 during 2022-03-06..2023-10-16, and 1 on 2023-10-17
2024-03-07T01:33:24.6786556Z         filtering to '' (March 6, 2022 - October 16, 2023)
2024-03-07T01:33:26.1272738Z           shows the correct total money raised
2024-03-07T01:33:26.1274367Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 1 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:33:26.1277393Z         filtering to 'Today'
2024-03-07T01:33:27.5078375Z           shows the correct total money raised
2024-03-07T01:33:27.5080545Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-07T01:33:27.5081800Z         filtering to 'This Month'
2024-03-07T01:33:29.0336402Z           shows the correct total donations
2024-03-07T01:33:29.0337258Z     Distributions
2024-03-07T01:33:29.9425961Z       has a link to create a new distribution
2024-03-07T01:33:29.9427977Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:33:29.9429343Z         filtering to 'Last Month'
2024-03-07T01:33:31.5855489Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-07T01:33:31.5858422Z     Purchases
2024-03-07T01:33:31.5862418Z       given 1 Purchase on 2024-03-05  (unless 'All Time'), 4 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:33:31.5863877Z         filtering to 'Today'
2024-03-07T01:33:33.1710238Z           shows correct 3 Recent Purchase link(s)
2024-03-07T01:33:33.1716355Z 
2024-03-07T01:33:33.1716861Z Distributions by County
2024-03-07T01:33:33.1717785Z   handles time ranges properly
2024-03-07T01:33:34.9653695Z     works for all time
2024-03-07T01:33:36.7610259Z     works for this year
2024-03-07T01:33:36.7610973Z 
2024-03-07T01:33:36.7611275Z /partners/children
2024-03-07T01:33:36.7612720Z   GET #index
2024-03-07T01:33:36.8708366Z     should render without any issues
2024-03-07T01:33:36.9242092Z     should export CSV
2024-03-07T01:33:36.9242742Z 
2024-03-07T01:33:36.9242951Z Family requests
2024-03-07T01:33:36.9244891Z   for children with different items, from different families
2024-03-07T01:33:38.6077881Z     it creates family requests
2024-03-07T01:33:38.6078882Z   filtering children
2024-03-07T01:33:39.6072900Z     user can see a list of children filtered by guardian name
2024-03-07T01:33:40.5928160Z     user can see a list of children filtered by first_name
2024-03-07T01:33:40.5928933Z 
2024-03-07T01:33:40.5929192Z Admin Organization Management
2024-03-07T01:33:40.5930706Z   While signed in as an Administrative User (super admin)
2024-03-07T01:33:42.9248092Z     creates a new organization
2024-03-07T01:33:44.3489951Z     can view organization details
2024-03-07T01:33:45.5051722Z     filters by organizations by name in organizations index page
2024-03-07T01:33:45.5053786Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-07T01:33:47.5584397Z     creates a new organization
2024-03-07T01:33:47.5585630Z 
2024-03-07T01:33:47.5586067Z Managing requests
2024-03-07T01:33:47.5588051Z   creating a new quantity request
2024-03-07T01:33:47.5589402Z     GIVEN a partner user is permitted to make a request
2024-03-07T01:33:47.5590954Z       WHEN they create a request with blank lines
2024-03-07T01:33:49.0406208Z         should be created without any issue
2024-03-07T01:33:49.0407100Z       WHEN they create a request with only a comment
2024-03-07T01:33:50.0226178Z         should be created without any issue
2024-03-07T01:33:50.0227299Z       Select Input Tests
2024-03-07T01:33:50.0228028Z         WHEN they reach the page
2024-03-07T01:33:50.9028734Z           should show the proper items in the select box
2024-03-07T01:33:50.9029406Z           WHEN they create a request improperly
2024-03-07T01:33:52.2588340Z             should show the proper items in the select box
2024-03-07T01:33:52.2589369Z       WHEN they create a request completely empty request
2024-03-07T01:33:53.1711097Z         should show an error message with the instructions
2024-03-07T01:33:53.1712244Z       WHEN they create a request properly
2024-03-07T01:33:53.1713534Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-07T01:33:55.4433771Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-07T01:33:55.4434867Z   creating a # individuals request
2024-03-07T01:33:55.4436731Z     GIVEN a partner user is permitted to make a request
2024-03-07T01:33:55.4437998Z       WHEN they create a request improperly by not inputting anything
2024-03-07T01:33:56.3985045Z         should show an error message with the instructions
2024-03-07T01:33:56.3986149Z       WHEN they create a request completely empty request
2024-03-07T01:33:57.3551544Z         should show an error message with the instructions
2024-03-07T01:33:57.3552429Z       WHEN they create a request with only a comment
2024-03-07T01:33:58.3257572Z         should be created without any issue
2024-03-07T01:33:58.3258545Z       WHEN they create a request with blank lines
2024-03-07T01:33:59.7532315Z         should be created without any issue
2024-03-07T01:33:59.7533527Z       WHEN they create a request properly
2024-03-07T01:33:59.7534832Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-07T01:34:01.9133328Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-07T01:34:01.9134748Z       Select Input Tests
2024-03-07T01:34:01.9135731Z         WHEN they reach the page
2024-03-07T01:34:02.7850601Z           should show the proper items in the select box
2024-03-07T01:34:02.7851856Z           WHEN they create a request improperly
2024-03-07T01:34:04.1464953Z             should show the proper items in the select box
2024-03-07T01:34:04.1467960Z 
2024-03-07T01:34:04.1468344Z Purchases
2024-03-07T01:34:04.1469661Z   While signed in as a user >
2024-03-07T01:34:04.1471700Z     GET #edit
2024-03-07T01:34:04.2119617Z       returns http success
2024-03-07T01:34:04.2708923Z       storage location is correct
2024-03-07T01:34:04.2709666Z       when no audit has been performed
2024-03-07T01:34:04.3916004Z         does not show a warning
2024-03-07T01:34:04.3917293Z       when non-finalized audit has been performed on the purchased items
2024-03-07T01:34:04.5382040Z         does not show a warning
2024-03-07T01:34:04.5382824Z       when an finalized audit has been performed on the purchased items
2024-03-07T01:34:04.6873532Z         shows a warning
2024-03-07T01:34:04.6874322Z     POST#create
2024-03-07T01:34:04.6874888Z       on success
2024-03-07T01:34:04.7352642Z         accepts :amount_spent_in_cents with dollar signs, commas, and periods
2024-03-07T01:34:04.7835518Z         redirects to GET#edit
2024-03-07T01:34:04.8406677Z         storage location defaults to organizations storage location
2024-03-07T01:34:04.8407707Z       on failure
2024-03-07T01:34:04.8991662Z         renders GET#new with error
2024-03-07T01:34:04.8992725Z     PUT#update
2024-03-07T01:34:04.9434961Z       redirects to index after update
2024-03-07T01:34:05.0639547Z       updates storage quantity correctly
2024-03-07T01:34:05.0640173Z       when changing storage location
2024-03-07T01:34:05.0683469Z         rollsback updates if quantity would go below 0
2024-03-07T01:34:05.1860713Z         updates storage quantity correctly
2024-03-07T01:34:05.3045238Z       when removing a line item
2024-03-07T01:34:05.3046248Z         updates storage invetory item quantity correctly
2024-03-07T01:34:05.3047445Z     GET #index
2024-03-07T01:34:05.3048110Z       html
2024-03-07T01:34:05.3566659Z         is expected to be successful
2024-03-07T01:34:05.3567843Z       csv
2024-03-07T01:34:05.3889894Z         is expected to be successful
2024-03-07T01:34:05.3891007Z     GET #new
2024-03-07T01:34:05.4367641Z       is expected to be successful
2024-03-07T01:34:05.4368636Z     DELETE #destroy
2024-03-07T01:34:05.4636369Z       does not delete a purchase
2024-03-07T01:34:05.4884509Z       redirects to the dashboard
2024-03-07T01:34:05.4885578Z     GET #show
2024-03-07T01:34:05.5321895Z       returns http success
2024-03-07T01:34:05.5322757Z   While signed in as an organizational admin
2024-03-07T01:34:05.5323773Z     DELETE #destroy
2024-03-07T01:34:05.6466036Z       decreases storage location inventory
2024-03-07T01:34:05.6870554Z       redirects to the index
2024-03-07T01:34:05.7274509Z       displays the proper flash notice
2024-03-07T01:34:05.7675332Z       deletes a purchase
2024-03-07T01:34:05.7676115Z 
2024-03-07T01:34:05.7676694Z Events
2024-03-07T01:34:05.7677938Z   When not signed in
2024-03-07T01:34:05.7900875Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:34:05.7902056Z   When signed in
2024-03-07T01:34:05.7902441Z     GET #index
2024-03-07T01:34:06.3563841Z       should be successful
2024-03-07T01:34:06.3564769Z       with type filter
2024-03-07T01:34:06.9013675Z         should not include the adjustment
2024-03-07T01:34:06.9014787Z       with storage location filter
2024-03-07T01:34:07.4631557Z         should not include the other storage location
2024-03-07T01:34:07.4632211Z       with eventable_id
2024-03-07T01:34:08.2185354Z         should only show events from that eventable
2024-03-07T01:34:08.7907907Z       with item filter
2024-03-07T01:34:08.7908845Z         should not include the other item
2024-03-07T01:34:08.7909621Z       with date filter
2024-03-07T01:34:09.3543292Z         should not include the old donation
2024-03-07T01:34:09.7158307Z 
2024-03-07T01:34:09.7159152Z Failures:
2024-03-07T01:34:09.7159649Z 
2024-03-07T01:34:09.7161217Z   1) Distributions When creating a new distribution manually when the quantity is lower than the on hand recommended quantity should display an alert
2024-03-07T01:34:09.7164155Z      Failure/Error: select item.name, from: "distribution_line_items_attributes_0_item_id"
2024-03-07T01:34:09.7166938Z 
2024-03-07T01:34:09.7167819Z      Ferrum::JavaScriptError:
2024-03-07T01:34:09.7169202Z        TypeError: Cannot read properties of null (reading 'dispatchEvent')
2024-03-07T01:34:09.7170208Z            at Cuprite.trigger (<anonymous>:412:10)
2024-03-07T01:34:09.7171147Z            at Cuprite.select (<anonymous>:359:12)
2024-03-07T01:34:09.7172035Z            at HTMLOptionElement.<anonymous> (<anonymous>:1:31)
2024-03-07T01:34:09.7172597Z 
2024-03-07T01:34:09.7174893Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_distributions_when_creating_a_new_distribution_manually_when_the_quantity_is_lower_than_the_on_hand_recommended_quantity_should_display_an_alert_430.png
2024-03-07T01:34:09.7177126Z 
2024-03-07T01:34:09.7177133Z 
2024-03-07T01:34:09.7178173Z      # ./spec/system/distribution_system_spec.rb:122:in `block (4 levels) in <top (required)>'
2024-03-07T01:34:09.7178992Z 
2024-03-07T01:34:09.7179852Z   2) BarcodeItems While signed in GET #find via ajax can find a barcode that's universally available
2024-03-07T01:34:09.7183945Z      Failure/Error: let!(:global_barcode) { create(:global_barcode_item) }
2024-03-07T01:34:09.7184902Z 
2024-03-07T01:34:09.7185244Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7186129Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7188349Z      # ./spec/requests/barcode_items_requests_spec.rb:72:in `block (4 levels) in <top (required)>'
2024-03-07T01:34:09.7189218Z 
2024-03-07T01:34:09.7189974Z   3) BarcodeItems While signed in GET #find via ajax can find a barcode that is scoped to just this organization
2024-03-07T01:34:09.7191434Z      Failure/Error: let!(:global_barcode) { create(:global_barcode_item) }
2024-03-07T01:34:09.7192253Z 
2024-03-07T01:34:09.7192510Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7193434Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7194702Z      # ./spec/requests/barcode_items_requests_spec.rb:72:in `block (4 levels) in <top (required)>'
2024-03-07T01:34:09.7195601Z 
2024-03-07T01:34:09.7196272Z   4) BarcodeItems While signed in GET #find via ajax when it's missing returns a 404
2024-03-07T01:34:09.7197523Z      Failure/Error: let!(:global_barcode) { create(:global_barcode_item) }
2024-03-07T01:34:09.7198188Z 
2024-03-07T01:34:09.7198590Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7199522Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7200673Z      # ./spec/requests/barcode_items_requests_spec.rb:72:in `block (4 levels) in <top (required)>'
2024-03-07T01:34:09.7201584Z 
2024-03-07T01:34:09.7202434Z   5) BarcodeItems While signed in DELETE #destroy disallows a non-superadmin to delete a global barcode
2024-03-07T01:34:09.7203772Z      Failure/Error: global_barcode = create(:global_barcode_item)
2024-03-07T01:34:09.7204433Z 
2024-03-07T01:34:09.7204684Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7205651Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7206804Z      # ./spec/requests/barcode_items_requests_spec.rb:114:in `block (4 levels) in <top (required)>'
2024-03-07T01:34:09.7207687Z 
2024-03-07T01:34:09.7208337Z   6) BarcodeItems While signed in GET #edit with a global barcode item returns a 404
2024-03-07T01:34:09.7209794Z      Failure/Error: get edit_barcode_item_path(default_params.merge(id: create(:global_barcode_item)))
2024-03-07T01:34:09.7210661Z 
2024-03-07T01:34:09.7210957Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7211927Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7213111Z      # ./spec/requests/barcode_items_requests_spec.rb:49:in `block (5 levels) in <top (required)>'
2024-03-07T01:34:09.7213934Z 
2024-03-07T01:34:09.7214532Z   7) BarcodeItems While signed in GET #show with a global barcode item returns a 404
2024-03-07T01:34:09.7215985Z      Failure/Error: get barcode_item_path(default_params.merge(id: create(:global_barcode_item)))
2024-03-07T01:34:09.7216870Z 
2024-03-07T01:34:09.7217118Z      ActiveModel::MissingAttributeError:
2024-03-07T01:34:09.7217998Z        can't write unknown attribute `barcode_count`
2024-03-07T01:34:09.7219226Z      # ./spec/requests/barcode_items_requests_spec.rb:65:in `block (5 levels) in <top (required)>'
2024-03-07T01:34:09.7220315Z 
2024-03-07T01:34:09.7220753Z Finished in 1 minute 55.55 seconds (files took 8.07 seconds to load)
2024-03-07T01:34:09.7221776Z 190 examples, 7 failures
2024-03-07T01:34:09.7222119Z 
2024-03-07T01:34:09.7222359Z Failed examples:
2024-03-07T01:34:09.7222648Z 
2024-03-07T01:34:09.7224153Z rspec ./spec/system/distribution_system_spec.rb:111 # Distributions When creating a new distribution manually when the quantity is lower than the on hand recommended quantity should display an alert
2024-03-07T01:34:09.7229261Z rspec ./spec/requests/barcode_items_requests_spec.rb:85 # BarcodeItems While signed in GET #find via ajax can find a barcode that's universally available
2024-03-07T01:34:09.7230866Z rspec ./spec/requests/barcode_items_requests_spec.rb:77 # BarcodeItems While signed in GET #find via ajax can find a barcode that is scoped to just this organization
2024-03-07T01:34:09.7232322Z rspec ./spec/requests/barcode_items_requests_spec.rb:94 # BarcodeItems While signed in GET #find via ajax when it's missing returns a 404
2024-03-07T01:34:09.7233952Z rspec ./spec/requests/barcode_items_requests_spec.rb:111 # BarcodeItems While signed in DELETE #destroy disallows a non-superadmin to delete a global barcode
2024-03-07T01:34:09.7235329Z rspec ./spec/requests/barcode_items_requests_spec.rb:48 # BarcodeItems While signed in GET #edit with a global barcode item returns a 404
2024-03-07T01:34:09.7236554Z rspec ./spec/requests/barcode_items_requests_spec.rb:64 # BarcodeItems While signed in GET #show with a global barcode item returns a 404
2024-03-07T01:34:09.7237254Z 
2024-03-07T01:34:09.7237526Z Randomized with seed 52271
2024-03-07T01:34:09.7238005Z 
2024-03-07T01:34:10.2237189Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:34:10.2239093Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 4049 / 6473 LOC (62.55%) covered.
2024-03-07T01:34:10.3468706Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/partners/family_requests_system_spec.rb" "spec/system/distributions_by_county_system_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:3:8:1:1]" "spec/system/log_in_system_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:2]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:3:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:2]" "spec/system/dashboard_system_spec.rb[1:2:4:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:3:1]" "spec/system/dashboard_system_spec.rb[1:2:7:1]" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/product_drive_participants_requests_spec.rb" "spec/requests/reports/annual_reports_requests_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb" "spec/requests/events_requests_spec.rb" failed
2024-03-07T01:34:10.7526271Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:34:10.7528493Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10760 LOC (0.35%) covered.
2024-03-07T01:34:10.7795140Z ##[error]Process completed with exit code 1.
