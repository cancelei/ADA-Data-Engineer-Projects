2024-02-27T23:51:05.4133283Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-27T23:51:05.4134204Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-27T23:51:05.4162962Z shell: /usr/bin/bash -e {0}
2024-02-27T23:51:05.4163323Z env:
2024-02-27T23:51:05.4163772Z   POSTGRES_HOST: localhost
2024-02-27T23:51:05.4164175Z   DATABASE_HOST: localhost
2024-02-27T23:51:05.4164622Z   PG_USERNAME: postgres
2024-02-27T23:51:05.4165011Z   PG_PASSWORD: password
2024-02-27T23:51:05.4165345Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-27T23:51:05.4165833Z   POSTGRES_PORT: 5432
2024-02-27T23:51:05.4166186Z   PGHOST: localhost
2024-02-27T23:51:05.4166538Z   PGUSER: postgres
2024-02-27T23:51:05.4166898Z   RAILS_ENV: test
2024-02-27T23:51:05.4167255Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-27T23:51:05.4167705Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-27T23:51:05.4168163Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-27T23:51:05.4168618Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-27T23:51:05.4169216Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-27T23:51:05.4169834Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-27T23:51:05.4170484Z   EVENTS_READ: true
2024-02-27T23:51:05.4170878Z ##[endgroup]
2024-02-27T23:51:11.1854924Z W, [2024-02-27T23:51:11.185161 #2337]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-27T23:51:11.1856237Z W, [2024-02-27T23:51:11.185225 #2337]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-27T23:51:11.1857901Z W, [2024-02-27T23:51:11.185251 #2337]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-27T23:51:11.1861104Z W, [2024-02-27T23:51:11.185286 #2337]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-27T23:51:13.7723344Z W, [2024-02-27T23:51:13.771957 #2337]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-27T23:51:13.7725755Z W, [2024-02-27T23:51:13.772004 #2337]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-27T23:51:13.7728348Z W, [2024-02-27T23:51:13.772020 #2337]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-27T23:51:13.7730957Z W, [2024-02-27T23:51:13.772064 #2337]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-27T23:51:13.7782962Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-27T23:51:22.2308323Z 
2024-02-27T23:51:22.2309468Z Randomized with seed 51054
2024-02-27T23:51:23.2432896Z 
2024-02-27T23:51:23.2433586Z Kit management
2024-02-27T23:52:18.9841245Z   can create a new kit as a user with the proper quantity
2024-02-27T23:52:19.5782657Z   should not display inactive storage locations under allocations
2024-02-27T23:52:21.2490066Z   can allocate and deallocate quantity per storage location from kit index
2024-02-27T23:52:21.2491168Z   when there is no kit quantity
2024-02-27T23:52:22.4227471Z     will not change quantity amounts when deallocating
2024-02-27T23:52:22.4228595Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-27T23:52:23.5700430Z     will not change quantity amounts when allocating
2024-02-27T23:52:23.5701319Z 
2024-02-27T23:52:23.5702136Z /partners/children
2024-02-27T23:52:23.5703318Z   GET #index
2024-02-27T23:52:23.6538813Z     should export CSV
2024-02-27T23:52:23.7181473Z     should render without any issues
2024-02-27T23:52:23.7182506Z 
2024-02-27T23:52:23.7183145Z Organization management
2024-02-27T23:52:23.7183954Z   while signed in as a normal user
2024-02-27T23:52:24.3404119Z     cannot see 'Make user' button for admins
2024-02-27T23:52:24.8076712Z     can see summary details about the organization as a user
2024-02-27T23:52:24.8077499Z   while signed in as an organization admin
2024-02-27T23:52:25.8359556Z     can add a new user to an organization
2024-02-27T23:52:26.3458668Z     can see 'Make user' button for admins
2024-02-27T23:52:27.5866903Z     can re-activate a user in the organization
2024-02-27T23:52:28.1029360Z     can re-invite a user to an organization after 7 days
2024-02-27T23:52:29.0615470Z     can deactivate a user in the organization
2024-02-27T23:52:29.0616407Z     Viewing the organization
2024-02-27T23:52:29.6451686Z       can view organization details
2024-02-27T23:52:29.6452499Z     Editing the organization
2024-02-27T23:52:30.9318624Z       can select if the org shows year-to-date values on the distribution printout
2024-02-27T23:52:31.9082698Z       can select if the org repackages essentials
2024-02-27T23:52:32.8917076Z       can select if the org distributes essentials monthly
2024-02-27T23:52:33.7373471Z       can set the NDBN Member ID
2024-02-27T23:52:35.2409053Z       can select and deselect Required Partner Fields
2024-02-27T23:52:36.2105865Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-27T23:52:37.0534296Z       can set a reminder and a deadline day
2024-02-27T23:52:37.9087280Z       can set a default storage location on the organization
2024-02-27T23:52:39.1765961Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-27T23:52:40.1740766Z       can enable if the org uses single step invite and approve partner process
2024-02-27T23:52:40.1742744Z 
2024-02-27T23:52:40.1743071Z StorageLocations
2024-02-27T23:52:40.1747052Z   While signed in
2024-02-27T23:52:40.1749335Z     POST #import_csv
2024-02-27T23:52:40.1750607Z       csv file with wrong headers
2024-02-27T23:52:40.1920371Z         redirects
2024-02-27T23:52:40.2067923Z         presents a flash error message
2024-02-27T23:52:40.2068930Z       with a csv file
2024-02-27T23:52:40.2233634Z         redirects
2024-02-27T23:52:40.2288001Z         invokes .import_csv
2024-02-27T23:52:40.2447929Z         presents a flash notice message
2024-02-27T23:52:40.2448561Z       without a csv file
2024-02-27T23:52:40.2569546Z         presents a flash error message
2024-02-27T23:52:40.2685170Z         redirects to :index
2024-02-27T23:52:40.2685756Z     GET #new
2024-02-27T23:52:42.3719640Z       returns http success
2024-02-27T23:52:42.3720400Z     GET #edit
2024-02-27T23:52:42.4095492Z       returns http success
2024-02-27T23:52:42.4096539Z     GET #destroy
2024-02-27T23:52:42.4420602Z       redirects to #index
2024-02-27T23:52:42.4421331Z     PUT #reactivate
2024-02-27T23:52:42.4593715Z       undiscards
2024-02-27T23:52:42.4594278Z     GET #inventory
2024-02-27T23:52:42.4595021Z       when also including omitted items
2024-02-27T23:52:42.5135766Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-27T23:52:42.5635891Z         contains a collection of ducktyped entries that respond the same
2024-02-27T23:52:42.6306972Z       when also including inactive items
2024-02-27T23:52:42.6308082Z         returns a collection that also includes items that have been deactivated
2024-02-27T23:52:42.6308979Z       without any overrides
2024-02-27T23:52:42.6866932Z         returns a collection that only includes items at the storage location
2024-02-27T23:52:42.6867998Z     GET #show
2024-02-27T23:52:42.6868710Z       html
2024-02-27T23:52:42.7641418Z         should return a correct response
2024-02-27T23:52:42.7642119Z         with version date set
2024-02-27T23:52:42.7643017Z           with no version found
2024-02-27T23:52:42.8400943Z             should show N/A
2024-02-27T23:52:42.8401623Z           with a version found
2024-02-27T23:52:42.9235420Z             should show the version specified
2024-02-27T23:52:42.9236088Z       csv
2024-02-27T23:52:42.9743904Z         should be successful
2024-02-27T23:52:42.9744784Z     Looking at a different organization
2024-02-27T23:52:43.1488892Z       redirects the user to the sign-in page for CRUD actions
2024-02-27T23:52:43.1490028Z     PUT #deactivate
2024-02-27T23:52:43.1695291Z       discards
2024-02-27T23:52:43.1696063Z       with inventory
2024-02-27T23:52:43.2260228Z         does not discard
2024-02-27T23:52:43.2261031Z     GET #index
2024-02-27T23:52:43.2262220Z       html
2024-02-27T23:52:43.2635207Z         succeeds
2024-02-27T23:52:43.2635916Z         with inactive locations
2024-02-27T23:52:43.3011108Z           does not includes the inactive location
2024-02-27T23:52:43.3012112Z           with include_inactive_locations
2024-02-27T23:52:43.3399258Z             includes the inactive location
2024-02-27T23:52:43.3400419Z       csv
2024-02-27T23:52:43.4428707Z         includes headers followed by alphabetized item names
2024-02-27T23:52:43.4626391Z         succeeds
2024-02-27T23:52:43.4627385Z   While not signed in
2024-02-27T23:52:43.4692140Z     redirects the user to the sign-in page for CRUD actions
2024-02-27T23:52:43.4693026Z 
2024-02-27T23:52:43.4694935Z Managing requests
2024-02-27T23:52:43.4695532Z   creating a # individuals request
2024-02-27T23:52:43.4696927Z     GIVEN a partner user is permitted to make a request
2024-02-27T23:52:43.4698067Z       WHEN they create a request properly
2024-02-27T23:52:43.4699385Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-27T23:52:45.7667792Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-27T23:52:45.7669183Z       WHEN they create a request inproperly
2024-02-27T23:52:47.0920145Z         should show an error message with the instructions
2024-02-27T23:52:48.4015162Z         should show invalid values in the form
2024-02-27T23:52:48.4015961Z       Select Input Tests
2024-02-27T23:52:48.4016683Z         WHEN they reach the page
2024-02-27T23:52:49.2816334Z           should show the proper items in the select box
2024-02-27T23:52:49.2817742Z           WHEN they create a request inproperly
2024-02-27T23:52:50.6404196Z             should show the proper items in the select box
2024-02-27T23:52:50.6405646Z   creating a new quantity request
2024-02-27T23:52:50.6407084Z     GIVEN a partner user is permitted to make a request
2024-02-27T23:52:50.6408915Z       WHEN they create a request with only a comment
2024-02-27T23:52:51.5793460Z         should be created without any issue
2024-02-27T23:52:51.5794595Z       WHEN they create a request properly
2024-02-27T23:52:51.5795648Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-27T23:52:53.8354006Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-27T23:52:53.8355478Z       WHEN a request has invalid values
2024-02-27T23:52:55.2703947Z         should show invalid values in the form
2024-02-27T23:52:56.5640499Z         should show an error message with the instructions
2024-02-27T23:52:56.5641422Z       Select Input Tests
2024-02-27T23:52:56.5642204Z         WHEN they reach the page
2024-02-27T23:52:57.4158891Z           should show the proper items in the select box
2024-02-27T23:52:57.4159881Z           WHEN they create a request inproperly
2024-02-27T23:52:58.7542936Z             should show the proper items in the select box
2024-02-27T23:52:58.7543978Z       WHEN they create a request inproperly by not inputting anything
2024-02-27T23:52:59.6901676Z         should show an error message with the instructions
2024-02-27T23:52:59.6906386Z 
2024-02-27T23:52:59.6906751Z /account_requests
2024-02-27T23:52:59.6908678Z   GET #received
2024-02-27T23:52:59.6909815Z     when given a invalid token
2024-02-27T23:52:59.7003857Z       should render a error that says that is code provided is invalid
2024-02-27T23:52:59.7004530Z     when given a valid token
2024-02-27T23:52:59.7274101Z       should render the received template
2024-02-27T23:52:59.7274753Z   GET #confirmation
2024-02-27T23:52:59.7275725Z     when given a token that has already been confirmed
2024-02-27T23:52:59.9214477Z       should render a error that says that is code provided is invalid
2024-02-27T23:52:59.9215314Z     when given a valid token
2024-02-27T23:52:59.9377018Z       should render the confirmation template
2024-02-27T23:52:59.9378074Z     when given a invalid token
2024-02-27T23:52:59.9443577Z       should render a error that says that is code provided is invalid
2024-02-27T23:52:59.9444581Z   POST #create
2024-02-27T23:52:59.9445291Z     with valid parameters
2024-02-27T23:52:59.9585253Z       creates a new AccountRequest
2024-02-27T23:52:59.9714329Z       redirects to the created account_request confirmation
2024-02-27T23:52:59.9832202Z       delivers the confirmation email via default queue
2024-02-27T23:52:59.9833152Z     with invalid parameters
2024-02-27T23:53:00.0031035Z       renders a successful response (i.e. to display the 'new' template)
2024-02-27T23:53:00.0236102Z       does not create a new AccountRequest
2024-02-27T23:53:00.0237024Z   GET #new
2024-02-27T23:53:00.0362145Z     renders a successful response
2024-02-27T23:53:00.0363019Z   GET #confirm
2024-02-27T23:53:00.0363607Z     when given a invalid token
2024-02-27T23:53:00.0431321Z       should render a error that says that is code provided is invalid
2024-02-27T23:53:00.0432366Z     when given a valid token
2024-02-27T23:53:00.0640194Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-27T23:53:00.0641868Z     when given a token that has already been confirmed
2024-02-27T23:53:00.2539817Z       should render a error that says that is code provided is invalid
2024-02-27T23:53:00.2540753Z 
2024-02-27T23:53:00.2540983Z Profiles
2024-02-27T23:53:00.2542642Z   POST #update
2024-02-27T23:53:00.2543624Z     successful save
2024-02-27T23:53:00.3066017Z       redirects to #show
2024-02-27T23:53:00.3544305Z       update partner
2024-02-27T23:53:00.3545219Z     when updating an existing value to a blank value
2024-02-27T23:53:00.4009537Z       should have blank values
2024-02-27T23:53:00.4486655Z       update partner
2024-02-27T23:53:00.4487235Z   GET #edit
2024-02-27T23:53:00.5596523Z     returns http success
2024-02-27T23:53:00.5597337Z 
2024-02-27T23:53:00.5597601Z Purchases
2024-02-27T23:53:00.5598910Z   while signed in as an organization admin
2024-02-27T23:53:02.4070968Z     allows deletion of a purchase
2024-02-27T23:53:02.4072010Z   while signed in as a normal user
2024-02-27T23:53:02.4072806Z     When visiting an existing purchase
2024-02-27T23:53:02.8700231Z       does not allow deletion of a purchase
2024-02-27T23:53:02.8700875Z     When creating a new purchase
2024-02-27T23:53:03.4288564Z       should not display inactive storage locations in dropdown
2024-02-27T23:53:03.4289231Z       via barcode entry
2024-02-27T23:53:04.3759750Z         a user can add items via scanning them in by barcode
2024-02-27T23:53:05.5775033Z         a user can add items that do not yet have a barcode
2024-02-27T23:53:06.5064311Z         User scan same barcode 2 times
2024-02-27T23:53:06.5065096Z       Editing purchase
2024-02-27T23:53:07.1240454Z         A user can view another organizations purchase
2024-02-27T23:53:07.7777570Z         A user can see purchased_from value
2024-02-27T23:53:07.7778356Z       via manual entry
2024-02-27T23:53:08.9874287Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-27T23:53:10.1083900Z         User can create a purchase IN THE PAST
2024-02-27T23:53:11.1792040Z         User can create vendor from purchase
2024-02-27T23:53:12.2198441Z         Does not include inactive items in the line item fields
2024-02-27T23:53:13.1350794Z         User can create a purchase using dollars decimal amount
2024-02-27T23:53:13.1351496Z         when creating a purchase incorrectly
2024-02-27T23:53:14.1428001Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-27T23:53:15.0444661Z           should display failure with error messages
2024-02-27T23:53:15.0446203Z     When visiting the index page
2024-02-27T23:53:15.0447323Z       In the middle of the year
2024-02-27T23:53:15.8356948Z         User can click to the new purchase form
2024-02-27T23:53:16.5958665Z         User sees total purchases value
2024-02-27T23:53:17.3594381Z         User sees purchased date column
2024-02-27T23:53:17.3595113Z       When filtering on the index page
2024-02-27T23:53:18.1953547Z         User can filter the #index by vendor
2024-02-27T23:53:19.0422001Z         User can filter the #index by storage location
2024-02-27T23:53:19.0423129Z         behaves like Date Range Picker
2024-02-27T23:53:19.0424048Z           when choosing 'All Time'
2024-02-27T23:53:20.0340877Z             shows all the records
2024-02-27T23:53:20.0342172Z           when choosing a date range that only includes the previous week
2024-02-27T23:53:21.0054985Z             shows only 1 record
2024-02-27T23:53:21.0056008Z           when choosing 'Last Month'
2024-02-27T23:53:21.9756151Z             shows only 2 of the records
2024-02-27T23:53:21.9758212Z 
2024-02-27T23:53:21.9758499Z DonationSites
2024-02-27T23:53:21.9760104Z   while signed in
2024-02-27T23:53:21.9760920Z     GET #index
2024-02-27T23:53:21.9762006Z       csv
2024-02-27T23:53:22.0028626Z         is expected to be successful
2024-02-27T23:53:22.0029443Z       html
2024-02-27T23:53:22.0464199Z         is expected to be successful
2024-02-27T23:53:22.0464845Z 
2024-02-27T23:53:22.0465597Z User account management
2024-02-27T23:53:22.0466553Z   when in staging
2024-02-27T23:53:22.6143543Z     should not allow the user to change staging credentials
2024-02-27T23:53:23.0956915Z     should display staging warning
2024-02-27T23:53:23.0957730Z   when not in staging
2024-02-27T23:53:24.0611436Z     should change the email
2024-02-27T23:53:24.8328057Z     should fail when the email is invalid
2024-02-27T23:53:25.7361596Z     should change an user name
2024-02-27T23:53:25.7367357Z 
2024-02-27T23:53:25.7368160Z Dashboard
2024-02-27T23:53:25.7368952Z   With a new essentials bank
2024-02-27T23:53:53.7795197Z     displays the getting started guide until the steps are completed
2024-02-27T23:53:53.7796980Z   With an existing essentials bank
2024-02-27T23:53:53.7797690Z     Purchases
2024-02-27T23:53:54.8153319Z       has a link to create a new purchase
2024-02-27T23:53:54.8154985Z       given 1 Purchase on 2024-02-25  (unless 'All Time'), 2 during 2024-02-26..2024-02-26, and 1 on 2024-02-27
2024-02-27T23:53:54.8156469Z         filtering to 'Yesterday'
2024-02-27T23:53:56.2511957Z           shows correct 2 Recent Purchase link(s)
2024-02-27T23:53:56.2513997Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-27T23:53:56.2515315Z         filtering to 'This Year'
2024-02-27T23:53:59.6034768Z           shows correct 0 Recent Purchase link(s)
2024-02-27T23:53:59.6036440Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-27T23:53:59.6037738Z         filtering to 'This Month'
2024-02-27T23:54:01.0499769Z           shows correct 1 Recent Purchase link(s)
2024-02-27T23:54:01.0501631Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-27T23:54:01.0503494Z         filtering to 'Last Month'
2024-02-27T23:54:02.5565940Z           shows correct 3 Recent Purchase link(s)
2024-02-27T23:54:02.5567437Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 3 during 2024-02-21..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:02.5568689Z         filtering to 'Last 7 Days'
2024-02-27T23:54:04.1436814Z           shows correct 3 Recent Purchase link(s)
2024-02-27T23:54:04.1438612Z       given 1 Purchase on 2024-01-28  (unless 'All Time'), 3 during 2024-01-29..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:04.1439859Z         filtering to 'Last 30 Days'
2024-02-27T23:54:05.6543484Z           shows correct 3 Recent Purchase link(s)
2024-02-27T23:54:05.6545441Z       given 1 Purchase on 2022-02-26  (unless 'All Time'), 4 during 2022-02-27..2024-02-10, and 1 on 2024-02-11
2024-02-27T23:54:05.6546931Z         filtering to '' (February 27, 2022 - February 10, 2024)
2024-02-27T23:54:07.2094092Z           shows correct 3 Recent Purchase link(s)
2024-02-27T23:54:07.2095927Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 4 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:07.2097406Z         filtering to 'Today'
2024-02-27T23:54:08.7450907Z           shows correct 3 Recent Purchase link(s)
2024-02-27T23:54:08.7451973Z     Donations
2024-02-27T23:54:09.6670072Z       has a link to create a new donation
2024-02-27T23:54:09.6672026Z       given 1 Donation on 2024-02-20 (only if a valid date), 1 during 2024-02-21..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:09.6673345Z         filtering to 'Last 7 Days'
2024-02-27T23:54:11.1243284Z           shows the correct total and 1 Recent Donation link(s)
2024-02-27T23:54:11.1244827Z       given 1 Donation on 2024-01-31 (only if a valid date), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-27T23:54:11.1245847Z         filtering to 'This Month'
2024-02-27T23:54:12.8064109Z           shows the correct total and 3 Recent Donation link(s)
2024-02-27T23:54:12.8065569Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-27T23:54:12.8066689Z         filtering to 'This Year'
2024-02-27T23:54:16.1675588Z           shows the correct total and 0 Recent Donation link(s)
2024-02-27T23:54:16.1677421Z       given 1 Donation on 2024-01-28 (only if a valid date), 1 during 2024-01-29..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:16.1678424Z         filtering to 'Last 30 Days'
2024-02-27T23:54:17.5700515Z           shows the correct total and 1 Recent Donation link(s)
2024-02-27T23:54:17.5702660Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-27T23:54:17.5704579Z         filtering to 'Last Month'
2024-02-27T23:54:18.9698924Z           shows the correct total and 1 Recent Donation link(s)
2024-02-27T23:54:18.9700966Z       given 1 Donation on 2022-02-26 (only if a valid date), 0 during 2022-02-27..2023-09-06, and 1 on 2023-09-07
2024-02-27T23:54:18.9702691Z         filtering to '' (February 27, 2022 - September 6, 2023)
2024-02-27T23:54:22.3479130Z           shows the correct total and 0 Recent Donation link(s)
2024-02-27T23:54:22.3481062Z       given 1 Donation on 2024-02-25 (only if a valid date), 1 during 2024-02-26..2024-02-26, and 1 on 2024-02-27
2024-02-27T23:54:22.3483497Z         filtering to 'Yesterday'
2024-02-27T23:54:23.7424493Z           shows the correct total and 1 Recent Donation link(s)
2024-02-27T23:54:23.7426026Z       given 1 Donation on 2024-02-26 (only if a valid date), 1 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:23.7427398Z         filtering to 'Today'
2024-02-27T23:54:25.1506493Z           shows the correct total and 1 Recent Donation link(s)
2024-02-27T23:54:25.1510475Z     Manufacturer Donations
2024-02-27T23:54:25.7412384Z       has a link to create a new donation
2024-02-27T23:54:25.7414424Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 9 during 2024-02-21..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:25.7415895Z         filtering to 'Last 7 Days'
2024-02-27T23:54:28.3164217Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-27T23:54:28.3166211Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-27T23:54:28.3167776Z         filtering to 'Last Month'
2024-02-27T23:54:29.9397996Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-27T23:54:29.9399912Z       given 1 Manufacturer donating on 2022-02-26  (unless 'All Time'), 0 during 2022-02-27..2023-10-10, and 1 on 2023-10-11
2024-02-27T23:54:29.9401588Z         filtering to '' (February 27, 2022 - October 10, 2023)
2024-02-27T23:54:31.3777849Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-27T23:54:31.3779686Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-27T23:54:31.3780552Z         filtering to 'This Year'
2024-02-27T23:54:32.8879332Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-27T23:54:32.8881349Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 6 during 2000-01-01..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:32.8882688Z         filtering to 'All Time'
2024-02-27T23:54:34.6856166Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-27T23:54:34.6858197Z       given 1 Manufacturer donating on 2024-01-28  (unless 'All Time'), 6 during 2024-01-29..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:34.6859807Z         filtering to 'Last 30 Days'
2024-02-27T23:54:36.6924249Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-27T23:54:36.6926634Z       given 1 Manufacturer donating on 2024-02-25  (unless 'All Time'), 7 during 2024-02-26..2024-02-26, and 1 on 2024-02-27
2024-02-27T23:54:36.6927992Z         filtering to 'Yesterday'
2024-02-27T23:54:39.0741577Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-27T23:54:39.0743537Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 3 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:39.0745008Z         filtering to 'Today'
2024-02-27T23:54:40.8371712Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-27T23:54:40.8374086Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-27T23:54:40.8375588Z         filtering to 'This Month'
2024-02-27T23:54:42.5286392Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-27T23:54:42.5287990Z     Distributions
2024-02-27T23:54:43.5065263Z       has a link to create a new distribution
2024-02-27T23:54:43.5066714Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 4 during 2000-01-01..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:43.5067754Z         filtering to 'All Time'
2024-02-27T23:54:44.9537978Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-27T23:54:44.9539808Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 2 during 2024-02-21..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:44.9541230Z         filtering to 'Last 7 Days'
2024-02-27T23:54:46.3492478Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-27T23:54:46.3494329Z       given 1 Distribution on 2022-02-26  (unless 'All Time'), 1 during 2022-02-27..2023-09-12, and 1 on 2023-09-13
2024-02-27T23:54:46.3495280Z         filtering to '' (February 27, 2022 - September 12, 2023)
2024-02-27T23:54:47.8219931Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-27T23:54:47.8221527Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-27T23:54:47.8222759Z         filtering to 'Last Month'
2024-02-27T23:54:49.2939059Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-27T23:54:49.2940717Z       given 1 Distribution on 2024-02-25  (unless 'All Time'), 2 during 2024-02-26..2024-02-26, and 1 on 2024-02-27
2024-02-27T23:54:49.2941980Z         filtering to 'Yesterday'
2024-02-27T23:54:50.7562432Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-27T23:54:50.7564582Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-27T23:54:50.7565507Z         filtering to 'This Year'
2024-02-27T23:54:52.2195477Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-27T23:54:52.2197237Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-27T23:54:52.2198165Z         filtering to 'This Month'
2024-02-27T23:54:53.6516669Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-27T23:54:53.6518172Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 1 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:53.6519379Z         filtering to 'Today'
2024-02-27T23:54:55.0467424Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-27T23:54:55.0469368Z       given 1 Distribution on 2024-01-28  (unless 'All Time'), 4 during 2024-01-29..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:54:55.0470646Z         filtering to 'Last 30 Days'
2024-02-27T23:54:56.5363133Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-27T23:54:56.5364173Z     Product Drives
2024-02-27T23:54:57.1373142Z       has a widget for product drive summary data
2024-02-27T23:54:57.1374753Z       given 1 Product Drive Donation on 2024-02-25 (unless 'All Time'), 2 during 2024-02-26..2024-02-26, and 1 on 2024-02-27
2024-02-27T23:54:57.1376189Z         filtering to 'Yesterday'
2024-02-27T23:54:58.6184952Z           shows the correct total money raised
2024-02-27T23:55:00.0750169Z           shows the correct total donations
2024-02-27T23:55:01.5414063Z           shows 2 Recent Donation link(s)
2024-02-27T23:55:01.5415768Z       given 1 Product Drive Donation on 2022-02-26 (unless 'All Time'), 3 during 2022-02-27..2024-01-23, and 1 on 2024-01-24
2024-02-27T23:55:01.5417058Z         filtering to '' (February 27, 2022 - January 23, 2024)
2024-02-27T23:55:03.0562252Z           shows the correct total donations
2024-02-27T23:55:04.6085012Z           shows the correct total money raised
2024-02-27T23:55:06.1321967Z           shows 3 Recent Donation link(s)
2024-02-27T23:55:06.1323849Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 4 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:55:06.1325611Z         filtering to 'Today'
2024-02-27T23:55:07.6642551Z           shows 3 Recent Donation link(s)
2024-02-27T23:55:09.2322972Z           shows the correct total donations
2024-02-27T23:55:10.7881039Z           shows the correct total money raised
2024-02-27T23:55:10.7882688Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-27T23:55:10.7884363Z         filtering to 'This Month'
2024-02-27T23:55:12.1452822Z           shows the correct total donations
2024-02-27T23:55:13.5587755Z           shows the correct total money raised
2024-02-27T23:55:16.9165361Z           shows 0 Recent Donation link(s)
2024-02-27T23:55:16.9167477Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 4 during 2024-02-21..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:55:16.9168896Z         filtering to 'Last 7 Days'
2024-02-27T23:55:18.4644768Z           shows 3 Recent Donation link(s)
2024-02-27T23:55:20.0582217Z           shows the correct total donations
2024-02-27T23:55:21.6152273Z           shows the correct total money raised
2024-02-27T23:55:21.6154326Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-27T23:55:21.6155717Z         filtering to 'Last Month'
2024-02-27T23:55:23.0691237Z           shows the correct total money raised
2024-02-27T23:55:24.5946857Z           shows 2 Recent Donation link(s)
2024-02-27T23:55:26.0564717Z           shows the correct total donations
2024-02-27T23:55:26.0566635Z       given 1 Product Drive Donation on 2024-01-28 (unless 'All Time'), 3 during 2024-01-29..2024-02-27, and 1 on 2024-02-28
2024-02-27T23:55:26.0568086Z         filtering to 'Last 30 Days'
2024-02-27T23:55:27.5528384Z           shows 3 Recent Donation link(s)
2024-02-27T23:55:29.0691931Z           shows the correct total donations
2024-02-27T23:55:30.5562781Z           shows the correct total money raised
2024-02-27T23:55:30.5564894Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-27T23:55:30.5566365Z         filtering to 'This Year'
2024-02-27T23:55:32.0644353Z           shows the correct total money raised
2024-02-27T23:55:33.5517188Z           shows the correct total donations
2024-02-27T23:55:35.0444593Z           shows 3 Recent Donation link(s)
2024-02-27T23:55:35.0445655Z       Product drive behaviour with Mixed Donation types
2024-02-27T23:55:35.7819872Z         only counts product drive money raised
2024-02-27T23:55:36.5417744Z         only shows product drive donations as product drive donations
2024-02-27T23:55:37.2650889Z         only counts product drive donations for product drive
2024-02-27T23:55:37.2651853Z     Signage
2024-02-27T23:55:40.1692138Z       shows their organization name unless they have a logo set
2024-02-27T23:55:40.1692917Z     Inventory Totals
2024-02-27T23:55:40.1693881Z       Summary
2024-02-27T23:55:40.9161897Z         displays the on-hand totals
2024-02-27T23:55:40.9163212Z         when constrained to date range
2024-02-27T23:55:42.0161237Z           does not change
2024-02-27T23:55:42.0163471Z 
2024-02-27T23:55:42.0163877Z /partners/profiles
2024-02-27T23:55:42.0165370Z   PUT #update
2024-02-27T23:55:42.0777960Z     updates the partner and profile
2024-02-27T23:55:42.0778728Z     with no social media
2024-02-27T23:55:42.1883123Z       shows an error
2024-02-27T23:55:42.1884046Z     when updating an existing value to a blank value
2024-02-27T23:55:42.2432823Z       updates the partner profile attribute to a blank value
2024-02-27T23:55:42.2989191Z       does not update other partner profile attributes to blank
2024-02-27T23:55:42.3544352Z       does store N/A in the database
2024-02-27T23:55:42.3545475Z   GET #show
2024-02-27T23:55:42.4162990Z     shows correct values for yes/no buttons
2024-02-27T23:55:42.4660000Z     displays the partner
2024-02-27T23:55:42.4661175Z   GET #edit
2024-02-27T23:55:42.5518586Z     has "No" radio button value when value is false
2024-02-27T23:55:42.6364737Z     has "Yes" radio button value when value is true
2024-02-27T23:55:42.7344382Z     does not have default radio button value when value is nil
2024-02-27T23:55:42.8230792Z     displays the partner
2024-02-27T23:55:42.8231443Z 
2024-02-27T23:55:42.8231717Z Admin Organization Management
2024-02-27T23:55:42.8233111Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-27T23:55:44.8710946Z     creates a new organization
2024-02-27T23:55:44.8711753Z   While signed in as an Administrative User (super admin)
2024-02-27T23:55:45.9691110Z     filters by organizations by name in organizations index page
2024-02-27T23:55:47.8667187Z     creates a new organization
2024-02-27T23:55:49.1629928Z     can view organization details
2024-02-27T23:55:49.1631479Z 
2024-02-27T23:55:49.1857458Z Admin::Organizations
2024-02-27T23:55:49.1858499Z   When logged in as a non-admin user
2024-02-27T23:55:49.1859064Z     PUT #update
2024-02-27T23:55:49.1862089Z       redirects
2024-02-27T23:55:49.1862686Z     GET #new
2024-02-27T23:55:49.1971199Z       redirects
2024-02-27T23:55:49.1971632Z     GET #index
2024-02-27T23:55:49.2105945Z       redirects
2024-02-27T23:55:49.2106295Z     GET #edit
2024-02-27T23:55:49.2231581Z       redirects
2024-02-27T23:55:49.2232017Z     POST #create
2024-02-27T23:55:49.2375309Z       redirects
2024-02-27T23:55:49.2375997Z   When logged in as a super admin
2024-02-27T23:55:49.2378009Z     PATCH #update
2024-02-27T23:55:49.2378891Z       with an invalid update
2024-02-27T23:55:49.4474062Z         redirects to #edit with an error message
2024-02-27T23:55:49.6557595Z         returns http success
2024-02-27T23:55:49.6558060Z       with a valid update
2024-02-27T23:55:49.8524135Z         redirects to #index
2024-02-27T23:55:49.8524808Z     GET #show
2024-02-27T23:55:50.0676586Z       returns http success
2024-02-27T23:55:50.0677234Z     GET #new
2024-02-27T23:55:50.1060167Z       returns http success
2024-02-27T23:55:50.1060985Z       when given a valid account request token in the query parameters
2024-02-27T23:55:50.1623614Z         should render new with pre populate input fields from the account_request
2024-02-27T23:55:50.1624902Z       when given a token that matches a account request that has already been processed
2024-02-27T23:55:50.3802248Z         should render new with a flash error message
2024-02-27T23:55:50.3802991Z     GET #edit
2024-02-27T23:55:50.5875118Z       returns http success
2024-02-27T23:55:50.5875732Z     POST #create
2024-02-27T23:55:50.5876274Z       with invalid params
2024-02-27T23:55:50.6311667Z         does not create an organization and renders #create with an error message
2024-02-27T23:55:50.6312645Z       with valid params
2024-02-27T23:55:50.8422666Z         creates an organization and redirects to #index
2024-02-27T23:55:50.8423271Z     DELETE #destroy
2024-02-27T23:55:50.8423951Z       with a valid organization id
2024-02-27T23:55:51.3907319Z         redirects to #index
2024-02-27T23:55:51.3907950Z     GET #index
2024-02-27T23:55:51.4233016Z       returns http success
2024-02-27T23:55:51.4233431Z     PUT #update
2024-02-27T23:55:51.4430878Z       redirect
2024-02-27T23:55:51.4431388Z     DELETE #destroy
2024-02-27T23:55:51.8058038Z       redirects
2024-02-27T23:55:51.8058784Z 
2024-02-27T23:55:51.8059230Z Audits
2024-02-27T23:55:51.8060330Z   while signed in as an organization admin
2024-02-27T23:55:51.8061563Z     GET #edit
2024-02-27T23:55:51.8767112Z       is successful if the status of audit is `in_progress`
2024-02-27T23:55:51.9390817Z       redirects to #index if the status of audit is not `in_progress`
2024-02-27T23:55:51.9391656Z     GET #index
2024-02-27T23:55:51.9935778Z       is successful
2024-02-27T23:55:51.9936309Z     GET #new
2024-02-27T23:55:52.0318674Z       is successful
2024-02-27T23:55:52.0319164Z     GET #show
2024-02-27T23:55:52.0833544Z       is successful
2024-02-27T23:55:52.0834063Z     POST #finalize
2024-02-27T23:55:52.1485867Z       sets the finalize status and saves an event
2024-02-27T23:55:52.1486808Z     DELETE #destroy
2024-02-27T23:55:52.1487126Z       with valid params
2024-02-27T23:55:52.1856333Z         destroys the audit if the audit's status is `in_progress`
2024-02-27T23:55:52.2220330Z         can not destroy the audit if the audit's status is `finalized`
2024-02-27T23:55:52.2595455Z         destroys the audit if the audit's status is `confirms`
2024-02-27T23:55:52.2596236Z     POST #create
2024-02-27T23:55:52.2597032Z       with invalid params
2024-02-27T23:55:52.3004937Z         assigns a newly created but unsaved audit as @audit
2024-02-27T23:55:52.3403933Z         re-renders the 'new' template
2024-02-27T23:55:52.3942904Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-27T23:55:52.3943669Z       with valid params
2024-02-27T23:55:52.4323588Z         creates a new Audit
2024-02-27T23:55:52.4699635Z         assigns a newly created audit as @audit
2024-02-27T23:55:52.5083491Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-27T23:55:52.5460794Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-27T23:55:52.5846494Z         redirects to the #show after created audit
2024-02-27T23:55:52.5847633Z 
2024-02-27T23:55:52.5847886Z Vendor
2024-02-27T23:55:52.5850074Z   when editing an existing vendor
2024-02-27T23:55:53.3558635Z     can update the contact info for a vendor as a user
2024-02-27T23:55:54.1376781Z     does not update a vendor with empty attributes
2024-02-27T23:55:54.1377600Z   When a user views the index page
2024-02-27T23:55:54.6205173Z     should have the vendor names in alphabetical order
2024-02-27T23:55:54.6205984Z   when creating a new vendor
2024-02-27T23:55:55.4079857Z     can create a new vendor instance as a user
2024-02-27T23:55:56.1510040Z     cannot add a new vendor instance with empty attributes
2024-02-27T23:55:56.1510712Z   When vendor have purchases associated with them already
2024-02-27T23:55:56.7607913Z     can have existing vendors show in the #index with some summary stats
2024-02-27T23:55:57.3657241Z     can have a single vendor show semi-detailed stats about purchases
2024-02-27T23:55:57.4164824Z W, [2024-02-27T15:55:57.416165 #2388]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-27T23:55:57.4166607Z W, [2024-02-27T15:55:57.416231 #2388]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-27T23:55:57.4168809Z W, [2024-02-27T15:55:57.416256 #2388]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-27T23:55:57.4171603Z W, [2024-02-27T15:55:57.416293 #2388]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-27T23:55:57.4172801Z 
2024-02-27T23:55:57.4173204Z Finished in 4 minutes 35.2 seconds (files took 8.23 seconds to load)
2024-02-27T23:55:57.4174000Z 242 examples, 0 failures
2024-02-27T23:55:57.4175765Z 
2024-02-27T23:55:57.4175980Z Randomized with seed 51054
2024-02-27T23:55:57.4176337Z 
2024-02-27T23:55:57.7230092Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3824 / 6431 LOC (59.46%) covered.
2024-02-27T23:55:58.2511808Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10684 LOC (0.36%) covered.
