2024-02-25T15:16:08.9307348Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-25T15:16:08.9308186Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-25T15:16:08.9336493Z shell: /usr/bin/bash -e {0}
2024-02-25T15:16:08.9336866Z env:
2024-02-25T15:16:08.9337191Z   POSTGRES_HOST: localhost
2024-02-25T15:16:08.9337662Z   DATABASE_HOST: localhost
2024-02-25T15:16:08.9338053Z   PG_USERNAME: postgres
2024-02-25T15:16:08.9338415Z   PG_PASSWORD: password
2024-02-25T15:16:08.9338871Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-25T15:16:08.9339284Z   POSTGRES_PORT: 5432
2024-02-25T15:16:08.9339605Z   PGHOST: localhost
2024-02-25T15:16:08.9340037Z   PGUSER: postgres
2024-02-25T15:16:08.9340374Z   RAILS_ENV: test
2024-02-25T15:16:08.9340960Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-02-25T15:16:08.9341508Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-25T15:16:08.9341911Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-02-25T15:16:08.9342448Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-25T15:16:08.9342973Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-25T15:16:08.9343651Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-25T15:16:08.9344390Z   EVENTS_READ: true
2024-02-25T15:16:08.9344723Z ##[endgroup]
2024-02-25T15:16:18.4417616Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/models/audit_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/adjustment_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/models/request_item_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/models/event_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/models/line_item_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/vendor_spec.rb" "spec/events/event_differ_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/models/partners/profile_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/models/question_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/item_category_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/models/county_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/service_object_errors_mixin_spec.rb"
2024-02-25T15:16:26.9510951Z 
2024-02-25T15:16:26.9511716Z Randomized with seed 43899
2024-02-25T15:16:27.9468272Z 
2024-02-25T15:16:27.9469310Z DistributionReminder
2024-02-25T15:16:27.9470050Z   conditionally sending the emails
2024-02-25T15:16:28.0088357Z     sends mail for future distributions where the partner wants reminders
2024-02-25T15:16:28.0385788Z     sends mail for future distributions
2024-02-25T15:16:28.0669844Z     does not send mail for future distributions if the partner wants no reminders
2024-02-25T15:16:28.0947293Z     does not send mail for past distributions
2024-02-25T15:16:28.0948180Z     when the distribution_id does not match any Distribution
2024-02-25T15:16:28.0992329Z       does not send mail for non existent distributions
2024-02-25T15:16:28.0993161Z     when the partner is deactivated
2024-02-25T15:16:28.1289537Z       does not send mail
2024-02-25T15:16:28.1290040Z 
2024-02-25T15:16:28.1290548Z Vendor
2024-02-25T15:16:28.1291485Z   versioning
2024-02-25T15:16:28.1392700Z     is expected to be versioned
2024-02-25T15:16:28.1393628Z   Methods
2024-02-25T15:16:28.1394186Z     volume
2024-02-25T15:16:28.2493116Z       retrieves the amount of product that has been bought from this vendor
2024-02-25T15:16:28.2494508Z   behaves like provideable
2024-02-25T15:16:28.2495051Z     import_csv
2024-02-25T15:16:28.4287242Z       imports from a csv file
2024-02-25T15:16:28.4288132Z     Validations
2024-02-25T15:16:28.4332671Z       is invalid without an organization
2024-02-25T15:16:28.4399969Z       is invalid unless it has either a contact name or a business name
2024-02-25T15:16:28.4401253Z     geocode
2024-02-25T15:16:28.4470761Z       adds coordinates to the database
2024-02-25T15:16:28.4471734Z 
2024-02-25T15:16:28.4472295Z DonationsController
2024-02-25T15:16:28.4473575Z   While signed in as a normal user >
2024-02-25T15:16:28.4474877Z     GET #show
2024-02-25T15:16:28.4877828Z       returns http success
2024-02-25T15:16:28.4878457Z     DELETE #destroy
2024-02-25T15:16:28.5143156Z       redirects to the dashboard path
2024-02-25T15:16:28.5144100Z     GET #edit
2024-02-25T15:16:28.5434681Z       returns http success
2024-02-25T15:16:28.5435616Z     PUT#update
2024-02-25T15:16:28.5881230Z       redirects to index after update
2024-02-25T15:16:28.7081760Z       updates storage quantity correctly
2024-02-25T15:16:28.7082576Z       when changing storage location
2024-02-25T15:16:28.8387527Z         updates storage quantity correctly
2024-02-25T15:16:28.8431091Z         rolls back updates if quantity would go below 0
2024-02-25T15:16:28.8432173Z       when removing a line item
2024-02-25T15:16:28.9550510Z         updates storage invetory item quantity correctly
2024-02-25T15:16:28.9551695Z     POST#create
2024-02-25T15:16:28.9959048Z       redirects to GET#edit on success
2024-02-25T15:16:29.0140148Z       renders GET#new with error on failure
2024-02-25T15:16:29.0141240Z     GET #new
2024-02-25T15:16:29.0265163Z       returns http success
2024-02-25T15:16:29.0265888Z     GET #index
2024-02-25T15:16:29.0403112Z       returns http success
2024-02-25T15:16:29.0403993Z   While signed in as an organization admin >
2024-02-25T15:16:29.0404939Z     DELETE #destroy
2024-02-25T15:16:29.0740646Z       redirects to the index
2024-02-25T15:16:29.0742148Z   calculating total money raised for all donations
2024-02-25T15:16:29.0781851Z     returns zero for an empty array of donations
2024-02-25T15:16:29.0909416Z     correctly calculates the total
2024-02-25T15:16:29.0910555Z   calculating total value of multiple donations
2024-02-25T15:16:29.2310181Z     works correctly for multiple line items per donation
2024-02-25T15:16:29.2354002Z     returns zero for an empty array of donations
2024-02-25T15:16:29.2354972Z 
2024-02-25T15:16:29.2355462Z ItemCategory
2024-02-25T15:16:29.2356645Z   assocations
2024-02-25T15:16:29.2446022Z     is expected to have many items
2024-02-25T15:16:29.2504136Z     is expected to belong to organization required: true
2024-02-25T15:16:29.2564774Z     is expected to have and belong to many partner_groups
2024-02-25T15:16:29.2565885Z   validations
2024-02-25T15:16:29.2654840Z     is expected to validate that :organization cannot be empty/falsy
2024-02-25T15:16:29.2731086Z     is expected to validate that the length of :description is at most 250
2024-02-25T15:16:29.2929925Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-02-25T15:16:29.3018987Z     is expected to validate that :name cannot be empty/falsy
2024-02-25T15:16:29.3019953Z   versioning
2024-02-25T15:16:29.3053382Z     is expected to be versioned
2024-02-25T15:16:29.3056471Z 
2024-02-25T15:16:29.3056821Z DistributionsController
2024-02-25T15:16:29.3057701Z   While signed in
2024-02-25T15:16:29.3058554Z     POST #create
2024-02-25T15:16:29.3060097Z       multiple line_items that have inventory quantity below minimum quantity
2024-02-25T15:16:29.3982874Z         redirects with a flash notice and a flash error
2024-02-25T15:16:29.3984109Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T15:16:29.4713048Z         redirects with a flash notice and a flash error
2024-02-25T15:16:29.4714112Z       when line item quantity is not positive
2024-02-25T15:16:29.5258829Z         flashes an error
2024-02-25T15:16:29.5260129Z       multiple line_items that have inventory quantity below recommended quantity
2024-02-25T15:16:29.6089109Z         redirects with a flash notice and a flash alert
2024-02-25T15:16:29.6090182Z     PUT #update
2024-02-25T15:16:29.6090884Z       when distribution has items updated for minimum quantity
2024-02-25T15:16:29.7572286Z         redirects with a flash notice and send send_notification
2024-02-25T15:16:29.7573842Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T15:16:29.8701095Z         redirects with a flash notice and a flash error
2024-02-25T15:16:29.9865677Z       when distribution causes inventory quantity to be below recommended quantity
2024-02-25T15:16:29.9866963Z         redirects with a flash notice and a flash error
2024-02-25T15:16:29.9867527Z 
2024-02-25T15:16:29.9867822Z DistributionContentChangeService
2024-02-25T15:16:29.9868502Z   #any_change?
2024-02-25T15:16:29.9869075Z     when there are no changes in the line items
2024-02-25T15:16:29.9907048Z       returns true
2024-02-25T15:16:29.9907803Z     when there are line items removed
2024-02-25T15:16:29.9943651Z       returns true
2024-02-25T15:16:29.9944338Z     when there are line items removed and updated
2024-02-25T15:16:29.9977812Z       returns true
2024-02-25T15:16:29.9978394Z     when there are line items updated
2024-02-25T15:16:30.0013163Z       returns true
2024-02-25T15:16:30.0013876Z   #changes
2024-02-25T15:16:30.0014686Z     when there are line items removed and updated
2024-02-25T15:16:30.0049942Z       returns true
2024-02-25T15:16:30.0050412Z 
2024-02-25T15:16:30.0050704Z ReminderDeadlineJob
2024-02-25T15:16:30.0051616Z   #perform
2024-02-25T15:16:30.0311404Z     should queue up reminder deadline emails for all partners that should be reminded
2024-02-25T15:16:30.0312534Z 
2024-02-25T15:16:30.0312884Z Reports::PartnerInfoReportService
2024-02-25T15:16:30.0313756Z   #report
2024-02-25T15:16:30.2037118Z     should report zero values
2024-02-25T15:16:30.4357608Z     should report normal values
2024-02-25T15:16:30.4358224Z 
2024-02-25T15:16:30.4358417Z NDBNMember
2024-02-25T15:16:30.4360640Z   validations
2024-02-25T15:16:30.4449851Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-02-25T15:16:30.4514181Z     is expected to validate that :account_name cannot be empty/falsy
2024-02-25T15:16:30.4583746Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-02-25T15:16:30.4584811Z   versioning
2024-02-25T15:16:30.4618813Z     is expected to be versioned
2024-02-25T15:16:30.4619735Z   #full_name
2024-02-25T15:16:30.4654066Z     should equal the id and the account name
2024-02-25T15:16:30.4654717Z 
2024-02-25T15:16:30.4655139Z OrganizationMailer
2024-02-25T15:16:30.4656136Z   #partner_approval_request
2024-02-25T15:16:30.4940609Z     renders the body with correct text with partner information
2024-02-25T15:16:30.5273830Z     includes a link to the relevant partner
2024-02-25T15:16:30.5543979Z     should be sent to the partner main email with the correct subject line
2024-02-25T15:16:30.5544840Z 
2024-02-25T15:16:30.5545066Z ProductDrive
2024-02-25T15:16:30.7957296Z   calculates donation quantity by date
2024-02-25T15:16:31.0391779Z   calculates and returns all donated organization item quantities by name and date
2024-02-25T15:16:31.1942190Z   calculates in-kind value
2024-02-25T15:16:31.3363187Z   calculates donation quantity
2024-02-25T15:16:31.3364202Z   donation_source_view
2024-02-25T15:16:31.4892682Z     returns formatted text
2024-02-25T15:16:31.4893522Z   scopes
2024-02-25T15:16:31.4894305Z     .by_name
2024-02-25T15:16:31.6461362Z       does not return other_name
2024-02-25T15:16:31.7985897Z       returns the product_drive with name some_name
2024-02-25T15:16:31.7986856Z     .within_date_range
2024-02-25T15:16:31.9591778Z       does not include product drive 2
2024-02-25T15:16:32.1112703Z       returns the product drive 1
2024-02-25T15:16:32.1113780Z   .search_date_range
2024-02-25T15:16:32.2523897Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-02-25T15:16:32.2524961Z   versioning
2024-02-25T15:16:32.4051901Z     is expected to be versioned
2024-02-25T15:16:32.4052765Z   associations
2024-02-25T15:16:32.5019775Z     has_many donations
2024-02-25T15:16:32.5937690Z     has_many product_drive_participants through donations
2024-02-25T15:16:32.5938595Z   distinct_items
2024-02-25T15:16:32.7940435Z     counts the distince items correctly by given date
2024-02-25T15:16:32.9810822Z 249250251    counts the items correctly for 1 donation with multiple items
2024-02-25T15:16:33.1602427Z     counts the distinct items correctly in overlapping donations
2024-02-25T15:16:33.3483326Z     doesn't double_count the items if there are two donations for the same item
2024-02-25T15:16:33.3484580Z   validations
2024-02-25T15:16:33.4994910Z     is expected not to be valid
2024-02-25T15:16:33.6479688Z     is expected not to be valid
2024-02-25T15:16:33.7949233Z     is expected not to be valid
2024-02-25T15:16:33.7949873Z 
2024-02-25T15:16:33.7950075Z ItemsInQuery
2024-02-25T15:16:33.7950812Z   items_in
2024-02-25T15:16:34.1685897Z     does not count transfers going in the negative direction
2024-02-25T15:16:34.5141319Z     does not count negative adjustments towards in-flow
2024-02-25T15:16:34.7978926Z     includes donations, purchases, adjustments, transfers among sources
2024-02-25T15:16:35.0797985Z     returns a collection with the fields name, item_id, quantity
2024-02-25T15:16:35.0798695Z 
2024-02-25T15:16:35.0798975Z DonationCreateService
2024-02-25T15:16:35.0799496Z   #call
2024-02-25T15:16:35.1008742Z     should create the donation
2024-02-25T15:16:35.1009266Z 
2024-02-25T15:16:35.1009563Z InventoryItem
2024-02-25T15:16:35.1048178Z   initializes the quantity to 0 if it was not specified
2024-02-25T15:16:35.1049066Z   Validations >
2024-02-25T15:16:35.1097243Z     requires an item
2024-02-25T15:16:35.1146194Z     requires an inventory association
2024-02-25T15:16:35.1146990Z     quantity >
2024-02-25T15:16:35.1201273Z       is less than the max integer
2024-02-25T15:16:35.1253885Z       is required
2024-02-25T15:16:35.1307288Z       is numerical
2024-02-25T15:16:35.1448571Z       is gte 0
2024-02-25T15:16:35.1449211Z   Filtering >
2024-02-25T15:16:35.1449977Z     ->by_partner_key
2024-02-25T15:16:35.1577367Z       shows the Base Items by partner_key
2024-02-25T15:16:35.1578200Z   versioning
2024-02-25T15:16:35.1611408Z     is expected to be versioned
2024-02-25T15:16:35.1612589Z 
2024-02-25T15:16:35.1612958Z Purchase
2024-02-25T15:16:35.1614690Z   behaves like itemizable
2024-02-25T15:16:35.1615772Z     .line_items
2024-02-25T15:16:35.1616780Z       combine!
2024-02-25T15:16:35.2111839Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:16:35.2548258Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:16:35.2549281Z       total
2024-02-25T15:16:35.3013278Z         has an item total
2024-02-25T15:16:35.3014059Z       quantities_by_name
2024-02-25T15:16:35.3462259Z         returns a hash of items with id, name, and quantity
2024-02-25T15:16:35.3894109Z         leaves out zero-quantitied items if requested
2024-02-25T15:16:35.3895217Z       sorted
2024-02-25T15:16:35.4457026Z         displays the items, sorted by name
2024-02-25T15:16:35.4458184Z     .to_a
2024-02-25T15:16:35.4459040Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:16:35.4841357Z         calls line_item_values
2024-02-25T15:16:35.4842295Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:16:35.5230663Z         raises an error
2024-02-25T15:16:35.5231316Z   versioning
2024-02-25T15:16:35.5270616Z     is expected to be versioned
2024-02-25T15:16:35.5271271Z   Scopes >
2024-02-25T15:16:35.5271787Z     during >
2024-02-25T15:16:35.5524390Z       returns all purchases created between two dates
2024-02-25T15:16:35.5525153Z   Associations >
2024-02-25T15:16:35.5525729Z     items >
2024-02-25T15:16:35.5727384Z       has_many
2024-02-25T15:16:35.5728132Z   Callbacks >
2024-02-25T15:16:35.5919429Z     automatically combines duplicate line_item records when they're created
2024-02-25T15:16:35.6091484Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T15:16:35.6092768Z   Validations >
2024-02-25T15:16:35.6165226Z     requires an inventory (storage location)
2024-02-25T15:16:35.6242492Z     ensures that the issued at is no earlier than 2000
2024-02-25T15:16:35.6325170Z     is not valid if categories do not add up
2024-02-25T15:16:35.6402175Z     is valid if categories have no values
2024-02-25T15:16:35.6567136Z     is not valid if any category is non-zero but does not add up to the total
2024-02-25T15:16:35.6651501Z     is not valid if period supplies is non-zero but no other category is
2024-02-25T15:16:35.6731553Z     is valid if all categories add up to total
2024-02-25T15:16:35.6805842Z     must belong to an organization
2024-02-25T15:16:35.6982604Z     is invalid when the line items are invalid
2024-02-25T15:16:35.6983599Z   Methods >
2024-02-25T15:16:35.6984130Z     remove
2024-02-25T15:16:35.7792244Z       fails gracefully if the item doesn't exist
2024-02-25T15:16:35.8492175Z       removes the item from the purchase
2024-02-25T15:16:35.8493047Z     storage_view
2024-02-25T15:16:35.9151424Z       returns name of storage location
2024-02-25T15:16:35.9152908Z 
2024-02-25T15:16:35.9153453Z Partners::ServedArea
2024-02-25T15:16:35.9226701Z   is expected to belong to partner_profile required: true
2024-02-25T15:16:35.9267598Z   is expected to belong to county required: true
2024-02-25T15:16:35.9478594Z   must only allow integer client shares
2024-02-25T15:16:35.9738082Z   must only allow valid client share values
2024-02-25T15:16:35.9739128Z   versioning
2024-02-25T15:16:35.9775489Z     is expected to be versioned
2024-02-25T15:16:35.9776024Z 
2024-02-25T15:16:35.9776201Z County
2024-02-25T15:16:35.9811042Z   is expected to have many served_areas
2024-02-25T15:16:35.9811803Z   versioning
2024-02-25T15:16:35.9847846Z     is expected to be versioned
2024-02-25T15:16:35.9848294Z 
2024-02-25T15:16:35.9848696Z Reports::AcquisitionReportService
2024-02-25T15:16:35.9849483Z   acquisition report
2024-02-25T15:16:36.8940481Z     should return the proper results on #report
2024-02-25T15:16:36.8941111Z 
2024-02-25T15:16:36.8942568Z Exports::ExportDistributionsCSVService
2024-02-25T15:16:36.8943792Z   #generate_csv_data
2024-02-25T15:16:37.0783060Z     should match the expected content for the csv
2024-02-25T15:16:37.0783833Z     when a new item is added
2024-02-25T15:16:37.2748231Z       should add it to the end of the row
2024-02-25T15:16:37.4644009Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-02-25T15:16:37.4645194Z     when there are no distributions but the report is requested
2024-02-25T15:16:37.6437730Z       returns a csv with only headers and no rows
2024-02-25T15:16:37.6438540Z 
2024-02-25T15:16:37.6438682Z ItemsOutQuery
2024-02-25T15:16:37.6439634Z   items_out_query
2024-02-25T15:16:37.7641897Z     includes distributions, adjustments, transfers among sources
2024-02-25T15:16:37.8832917Z     returns a collection with the fields name, item_id, quantity
2024-02-25T15:16:37.8833500Z 
2024-02-25T15:16:37.8833634Z DistributionPdf
2024-02-25T15:16:37.9547813Z   #non_request_data
2024-02-25T15:16:38.0236104Z   #request_data
2024-02-25T15:16:38.0236981Z 
2024-02-25T15:16:38.0237502Z DeallocateKitInventoryService
2024-02-25T15:16:38.0238480Z   #deallocate
2024-02-25T15:16:38.0239094Z     when inventory items are available
2024-02-25T15:16:38.0240270Z       when decrease_by is less then kit's quantity in inventory_in
2024-02-25T15:16:38.3722450Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-02-25T15:16:38.3723915Z       when kit_allocation not exist for inventory_in or inventory_out
2024-02-25T15:16:38.6579879Z         raises error about KitAllocation not found
2024-02-25T15:16:38.6580930Z       when decrease_by is greater then kit's quantity in inventory_in
2024-02-25T15:16:38.9656010Z         raises error about inconsistent inventory in or out
2024-02-25T15:16:38.9656992Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-02-25T15:16:39.2990503Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-02-25T15:16:39.2991700Z   #error
2024-02-25T15:16:39.2992375Z     when the storage location organization doesn't match
2024-02-25T15:16:39.5241876Z       returns error
2024-02-25T15:16:39.5242361Z 
2024-02-25T15:16:39.5242883Z ServiceObjectErrorsMixin
2024-02-25T15:16:39.5243774Z   self.included
2024-02-25T15:16:39.5293209Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-02-25T15:16:39.5293964Z 
2024-02-25T15:16:39.5294177Z BarcodeItem
2024-02-25T15:16:39.5295585Z   versioning
2024-02-25T15:16:39.5388048Z     is expected to be versioned
2024-02-25T15:16:39.5516826Z   Organization barcodes
2024-02-25T15:16:39.5517955Z     updates a counter in Item whenever it tracks a new barcode
2024-02-25T15:16:39.5518897Z     scopes >
2024-02-25T15:16:39.7472378Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-02-25T15:16:39.7695911Z       #by_item_partner_key returns barcodes that match the partner key
2024-02-25T15:16:39.7814860Z       ->by_value returns the barcode with that value
2024-02-25T15:16:39.7815965Z     validations >
2024-02-25T15:16:39.8054250Z       does not enforces value uniqueness across organizations
2024-02-25T15:16:39.8182093Z       allows multiple barcodes to point at the same item
2024-02-25T15:16:39.8342399Z       enforces value uniqueness within the organization
2024-02-25T15:16:39.8494658Z       is valid only with an organization
2024-02-25T15:16:39.8617357Z       does not enforce value uniqueness compared with the global scope
2024-02-25T15:16:39.8618316Z       value >
2024-02-25T15:16:39.8709253Z         requires a value
2024-02-25T15:16:39.8710288Z       item >
2024-02-25T15:16:39.8805732Z         is invalid without an item associated with it
2024-02-25T15:16:39.8806666Z       quantity >
2024-02-25T15:16:39.8897412Z         is an integer
2024-02-25T15:16:39.8989624Z         is not nil
2024-02-25T15:16:39.9079071Z         is not a negative number
2024-02-25T15:16:39.9080114Z     when searching for a barcode where there is a global and local with the same value
2024-02-25T15:16:39.9393166Z       favors the local barcode
2024-02-25T15:16:39.9394000Z     to_h >
2024-02-25T15:16:39.9522851Z       emits a hash for a line_item
2024-02-25T15:16:39.9523572Z     filters >
2024-02-25T15:16:39.9733395Z       ->item_id shows only barcodes for a specific item_id
2024-02-25T15:16:39.9734296Z   Barcodes of BaseItems ('Global')
2024-02-25T15:16:39.9828215Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-02-25T15:16:39.9829154Z     scopes >
2024-02-25T15:16:39.9829902Z       global
2024-02-25T15:16:39.9985616Z         includes all barcodes, for both base items and regular items
2024-02-25T15:16:39.9986513Z     filters >
2024-02-25T15:16:40.0143900Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-02-25T15:16:40.0296974Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-02-25T15:16:40.0421026Z       ->by_value returns the barcode with that value
2024-02-25T15:16:40.0422658Z     validations >
2024-02-25T15:16:40.0519818Z       enforces uniqueness in the global scope
2024-02-25T15:16:40.0600569Z       is valid with or without an organization
2024-02-25T15:16:40.0678212Z       allows multiple barcodes to point at the same base item
2024-02-25T15:16:40.0679115Z       quantity >
2024-02-25T15:16:40.0731075Z         is an integer
2024-02-25T15:16:40.0781513Z         is not nil
2024-02-25T15:16:40.0830850Z         is not a negative number
2024-02-25T15:16:40.0831759Z       value >
2024-02-25T15:16:40.0883922Z         requires a value
2024-02-25T15:16:40.0884615Z       item >
2024-02-25T15:16:40.0936451Z         is invalid without an item associated with it
2024-02-25T15:16:40.0937528Z 
2024-02-25T15:16:40.0938312Z OrganizationUpdateService
2024-02-25T15:16:40.0939342Z   #update_partner_flags
2024-02-25T15:16:40.0940303Z     when request flags have changed
2024-02-25T15:16:40.4778194Z       should NOT update partners' request flags when enabling request flags on the organization
2024-02-25T15:16:40.7122138Z       should update partners when disabling quantity-based request flags
2024-02-25T15:16:40.9443105Z       should update partners when disabling child and individual request flags
2024-02-25T15:16:40.9444337Z     when request flags haven't changed
2024-02-25T15:16:41.1685167Z       should not update partners
2024-02-25T15:16:41.1686038Z   #update
2024-02-25T15:16:41.1686571Z     when object is invalid
2024-02-25T15:16:41.3432489Z       should not update and return false
2024-02-25T15:16:41.3433464Z     when organization has partners
2024-02-25T15:16:41.3434709Z       when all of a single partner's request flags WILL NOT be disabled
2024-02-25T15:16:41.5769730Z         should allow the disabling of request flags in organization and its partners
2024-02-25T15:16:41.5770951Z       when all of a single partner's request flags will be disabled
2024-02-25T15:16:41.7934674Z         should NOT change request flags in organization or its partners
2024-02-25T15:16:42.0066628Z         should add an error message to the organization
2024-02-25T15:16:42.0067537Z     when object is valid
2024-02-25T15:16:42.1859677Z       should update and return true
2024-02-25T15:16:42.1860278Z 
2024-02-25T15:16:42.1860666Z Partners::FamilyRequestCreateService
2024-02-25T15:16:42.1861696Z   #call
2024-02-25T15:16:42.1862703Z     when the arguments are correct
2024-02-25T15:16:42.1863663Z       with children
2024-02-25T15:16:42.3350987Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-02-25T15:16:42.3351938Z       without children
2024-02-25T15:16:42.3664173Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-02-25T15:16:42.3665643Z     when the arguments are incorrect
2024-02-25T15:16:42.3666573Z       because a unrecognized item_id was provided
2024-02-25T15:16:42.3917716Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-25T15:16:42.3918977Z       because no family_requests_attributes were defined
2024-02-25T15:16:42.4168835Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-25T15:16:42.4170080Z 
2024-02-25T15:16:42.4170504Z Reports::OtherProductsReportService
2024-02-25T15:16:42.4171290Z   #report
2024-02-25T15:16:43.0497554Z     should report normal values
2024-02-25T15:16:43.2425087Z     should report zero values
2024-02-25T15:16:43.2428474Z 
2024-02-25T15:16:43.2429006Z ApplicationHelper
2024-02-25T15:16:43.2431193Z   confirm_delete_msg
2024-02-25T15:16:43.2487428Z     subs in string
2024-02-25T15:16:43.2488744Z   can_administrate?
2024-02-25T15:16:43.2489635Z     User is part of org but not org admin
2024-02-25T15:16:43.2652638Z       cannot administrate
2024-02-25T15:16:43.2653414Z     User is org admin and not part of org
2024-02-25T15:16:43.4763563Z       cannot administrate
2024-02-25T15:16:43.4764796Z     User is org admin and part of org
2024-02-25T15:16:43.5004389Z       can administrate
2024-02-25T15:16:43.5005357Z   flash_class
2024-02-25T15:16:43.5068243Z     returns appropriate class for success
2024-02-25T15:16:43.5115937Z     returns appropriate class for alert
2024-02-25T15:16:43.5162508Z     returns appropriate class for error
2024-02-25T15:16:43.5208815Z     returns appropriate class for notice
2024-02-25T15:16:43.5209549Z   active_class
2024-02-25T15:16:43.5257069Z     Returns the controller name (FAILED - 1)
2024-02-25T15:16:43.5257914Z   default_title_content
2024-02-25T15:16:43.5258901Z     Organization exists
2024-02-25T15:16:43.6994961Z       returns the organization's name
2024-02-25T15:16:43.6996416Z     Organization does not exist
2024-02-25T15:16:43.7051522Z       returns a default name
2024-02-25T15:16:43.7052304Z   step_container_helper
2024-02-25T15:16:43.7053949Z     active_index is greater than index
2024-02-25T15:16:43.7104002Z       returns done
2024-02-25T15:16:43.7104700Z     active_index is equal to index
2024-02-25T15:16:43.7152972Z       returns active
2024-02-25T15:16:43.7153684Z     active_index is less than index
2024-02-25T15:16:43.7201044Z       returns empty string
2024-02-25T15:16:43.7203465Z 
2024-02-25T15:16:43.7203883Z Distribution
2024-02-25T15:16:43.7205634Z   CSV export >
2024-02-25T15:16:43.7206639Z     for_csv_export >
2024-02-25T15:16:44.0664904Z       filters only to the given issue time range
2024-02-25T15:16:44.4074451Z       filters only to the given organization
2024-02-25T15:16:44.7436316Z       filters only to the given filter
2024-02-25T15:16:44.7437397Z     csv_export_attributes
2024-02-25T15:16:45.1543636Z       returns the set of attributes which define a row in case of distribution export
2024-02-25T15:16:45.1544664Z   versioning
2024-02-25T15:16:45.1580760Z     is expected to be versioned
2024-02-25T15:16:45.1581589Z   behaves like itemizable
2024-02-25T15:16:45.1584295Z     .line_items
2024-02-25T15:16:45.1585308Z       combine!
2024-02-25T15:16:45.2132963Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:16:45.2569071Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:16:45.2570156Z       quantities_by_name
2024-02-25T15:16:45.3456936Z         returns a hash of items with id, name, and quantity
2024-02-25T15:16:45.4519194Z         leaves out zero-quantitied items if requested
2024-02-25T15:16:45.4520134Z       sorted
2024-02-25T15:16:45.5796342Z         displays the items, sorted by name
2024-02-25T15:16:45.5797203Z       total
2024-02-25T15:16:45.6709788Z         has an item total
2024-02-25T15:16:45.6710462Z     .to_a
2024-02-25T15:16:45.6711627Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:16:45.7060840Z         raises an error
2024-02-25T15:16:45.7061673Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:16:45.7402046Z         calls line_item_values
2024-02-25T15:16:45.7402850Z   Validations >
2024-02-25T15:16:45.7457127Z     requires a storage location
2024-02-25T15:16:45.7508193Z     requires a partner
2024-02-25T15:16:45.7542361Z     ensures that any included items are found in the associated storage location
2024-02-25T15:16:45.7701887Z     ensures the associated line_items are invalid with a zero quantity
2024-02-25T15:16:45.7854146Z     ensures the associated line_items are invalid with a nil quantity
2024-02-25T15:16:45.7905658Z     must belong to an organization
2024-02-25T15:16:45.8317853Z     ensures the associated line_items are valid
2024-02-25T15:16:45.8382052Z     ensures that the issued at is no earlier than 2000
2024-02-25T15:16:45.8382917Z     when delivery method is shipped
2024-02-25T15:16:45.8383808Z       shipping cost is negative
2024-02-25T15:16:45.8442845Z         will not allow to save distribution
2024-02-25T15:16:45.8443655Z       shipping cost is none negative
2024-02-25T15:16:45.8737480Z         allows to save distribution
2024-02-25T15:16:45.8738484Z     when delivery method is other then shipped
2024-02-25T15:16:45.9013288Z       allows to save distribution
2024-02-25T15:16:45.9014250Z   Scopes >
2024-02-25T15:16:45.9014773Z     during >
2024-02-25T15:16:45.9745933Z       returns all distributions created between two dates
2024-02-25T15:16:45.9746821Z     by_location >
2024-02-25T15:16:46.0254941Z       only returns distributions with given location id
2024-02-25T15:16:46.0256000Z     this_week >
2024-02-25T15:16:46.0256775Z       When it's Tuesday (mid-week)
2024-02-25T15:16:46.0979769Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-02-25T15:16:46.0981163Z       When it's Sunday (end of the week)
2024-02-25T15:16:46.1471742Z         doesn't include distributions past Sunday
2024-02-25T15:16:46.1472878Z     by_partner >
2024-02-25T15:16:46.2043312Z       only returns distributions with given partner id
2024-02-25T15:16:46.2044467Z     by_item_id >
2024-02-25T15:16:46.3403305Z       only returns distributions with given item id
2024-02-25T15:16:46.3404322Z   Methods >
2024-02-25T15:16:46.3405284Z     #copy_from_request
2024-02-25T15:16:46.3641984Z       copy over relevant request information into the distrubution
2024-02-25T15:16:46.3642901Z     #copy_line_items
2024-02-25T15:16:46.4066350Z       replicates line_items from a donation into a distribution
2024-02-25T15:16:46.4067367Z     #distributed_at
2024-02-25T15:16:46.4342444Z       shows the hour and minutes if it has been provided
2024-02-25T15:16:46.4862516Z       displays explicit issued_at date
2024-02-25T15:16:46.4863393Z     #combine_duplicates
2024-02-25T15:16:46.5290494Z       condenses duplicate line_items if the item_ids match
2024-02-25T15:16:46.5291510Z     #future?
2024-02-25T15:16:46.5292111Z       when issued_at has passed
2024-02-25T15:16:46.5575686Z         returns false
2024-02-25T15:16:46.5576398Z       when issued_at has not passed
2024-02-25T15:16:46.5858491Z         returns true
2024-02-25T15:16:46.5859227Z   Callbacks >
2024-02-25T15:16:46.6386766Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T15:16:46.6388033Z     #before_save
2024-02-25T15:16:46.6388565Z       #reset_shipping_cost
2024-02-25T15:16:46.6389391Z         when delivery_method is other then shipped
2024-02-25T15:16:46.6677285Z           distribution will be created successfully and the shipping_cost will be zero
2024-02-25T15:16:46.6678249Z 
2024-02-25T15:16:46.6678500Z RequestsTotalItemsService
2024-02-25T15:16:46.6679425Z   #calculate
2024-02-25T15:16:46.6680858Z     when provided requests is nil
2024-02-25T15:16:46.6721366Z       is expected to be blank
2024-02-25T15:16:46.6722429Z     when provided with requests that have no request items
2024-02-25T15:16:46.6814864Z       is expected to be blank
2024-02-25T15:16:46.6815824Z     when item name is nil
2024-02-25T15:16:46.6945955Z       return Unknown Item
2024-02-25T15:16:46.6946748Z     when the request items is not blank
2024-02-25T15:16:46.7097183Z       return items with correct quantities calculated
2024-02-25T15:16:46.7234334Z       return the names of items correctly
2024-02-25T15:16:46.7235164Z 
2024-02-25T15:16:46.7235764Z Exports::ExportRequestService
2024-02-25T15:16:46.7236680Z   .generate_csv_data
2024-02-25T15:16:46.9293420Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-02-25T15:16:47.1305561Z     includes rows for each request with correct columns of item quantity
2024-02-25T15:16:47.1306519Z 
2024-02-25T15:16:47.1306818Z Exports::ExportPurchasesCSVService
2024-02-25T15:16:47.1307771Z   #generate_csv_data
2024-02-25T15:16:47.2464649Z     should match the expected content for the csv
2024-02-25T15:16:47.2465307Z 
2024-02-25T15:16:47.2465654Z Reports::WarehouseReportService
2024-02-25T15:16:47.2466593Z   #report
2024-02-25T15:16:47.4298914Z     should print unknown square footage
2024-02-25T15:16:47.7832828Z     should print normal values
2024-02-25T15:16:47.9565109Z     should print zero values
2024-02-25T15:16:48.3116512Z     should print unknown warehouse type
2024-02-25T15:16:48.3117182Z 
2024-02-25T15:16:48.3117533Z LineItem
2024-02-25T15:16:48.3118999Z   Validations >
2024-02-25T15:16:48.3226877Z     requires an item
2024-02-25T15:16:48.3375667Z     requires a quantity
2024-02-25T15:16:48.4259887Z     the quantity must be a valid integer and cannot be 0
2024-02-25T15:16:48.4261128Z   Scopes >
2024-02-25T15:16:48.4261682Z     ->active
2024-02-25T15:16:48.4590487Z       retrieves only those with active status
2024-02-25T15:16:48.4591606Z   Methods >
2024-02-25T15:16:48.4592186Z     #value_per_line_item
2024-02-25T15:16:48.4592841Z       item has value and quantity
2024-02-25T15:16:48.4781663Z         is expected to eq 25
2024-02-25T15:16:48.4782474Z       item has no value
2024-02-25T15:16:48.4916590Z         is expected to eq 0
2024-02-25T15:16:48.4917312Z     item packages
2024-02-25T15:16:48.4918328Z       #has_packages
2024-02-25T15:16:48.4919404Z         item has no package size
2024-02-25T15:16:48.5050217Z           is expected to be falsy
2024-02-25T15:16:48.5050957Z         item has package size
2024-02-25T15:16:48.5264828Z           is expected to be truthy
2024-02-25T15:16:48.5265663Z       #package_count
2024-02-25T15:16:48.5266486Z         does not have packages
2024-02-25T15:16:48.5403037Z           is expected to be falsy
2024-02-25T15:16:48.5403791Z         has packages
2024-02-25T15:16:48.5594476Z           is expected to eq "1"
2024-02-25T15:16:48.5595735Z   versioning
2024-02-25T15:16:48.5633612Z     is expected to be versioned
2024-02-25T15:16:48.5634235Z   package_count
2024-02-25T15:16:48.5839378Z     is nil if there is no package_size
2024-02-25T15:16:48.6034646Z     is equal to the quanity divided by the package_size
2024-02-25T15:16:48.6035568Z 
2024-02-25T15:16:48.6035781Z Request
2024-02-25T15:16:48.6037210Z   total_items
2024-02-25T15:16:48.6135713Z     adds the quantity of all items in the request
2024-02-25T15:16:48.6136562Z   Enums >
2024-02-25T15:16:48.6137302Z     #status
2024-02-25T15:16:48.6349513Z       scopes
2024-02-25T15:16:48.6350115Z   item data
2024-02-25T15:16:48.6429321Z     coerces item quantity and id to always be an integer before saving
2024-02-25T15:16:48.6430278Z   versioning
2024-02-25T15:16:48.6467205Z     is expected to be versioned
2024-02-25T15:16:48.6469573Z 
2024-02-25T15:16:48.6469957Z Partner
2024-02-25T15:16:48.6471946Z   #deletable?
2024-02-25T15:16:48.6472768Z     when status is not uninvited
2024-02-25T15:16:48.6550761Z       should return false
2024-02-25T15:16:48.6551297Z     when status is uninvited
2024-02-25T15:16:48.6552580Z       when it has a distribution
2024-02-25T15:16:48.6702677Z         should return false
2024-02-25T15:16:48.6703412Z       when it has a request
2024-02-25T15:16:48.6859869Z         should return false
2024-02-25T15:16:48.6860669Z       when it has no other associations
2024-02-25T15:16:48.6972841Z         should return true
2024-02-25T15:16:48.6976180Z       when it has a profile but no users
2024-02-25T15:16:48.7136737Z         should return true
2024-02-25T15:16:48.7137726Z       when it has a profile and users
2024-02-25T15:16:48.7411486Z         should return false
2024-02-25T15:16:48.7412328Z   ActiveStorage validation
2024-02-25T15:16:48.7538826Z     validates that attachments are pdf or docs
2024-02-25T15:16:48.7539669Z   associations
2024-02-25T15:16:48.7581435Z     is expected to have many distributions
2024-02-25T15:16:48.7622977Z     is expected to have many requestable_items through item_categories source => items
2024-02-25T15:16:48.7656846Z     is expected to have many requests
2024-02-25T15:16:48.7710960Z     is expected to belong to partner_group optional: true
2024-02-25T15:16:48.7745945Z     is expected to have many requests
2024-02-25T15:16:48.7781831Z     is expected to have many families dependent => destroy
2024-02-25T15:16:48.7816527Z     is expected to have many item_categories through partner_group
2024-02-25T15:16:48.7852380Z     is expected to have many children through families
2024-02-25T15:16:48.7911024Z     is expected to belong to organization required: true
2024-02-25T15:16:48.7947592Z     is expected to have many users dependent => destroy
2024-02-25T15:16:48.7948523Z     primary_user
2024-02-25T15:16:48.8254318Z       should return the first user ever created for a partner
2024-02-25T15:16:48.8255514Z   #deactivated?
2024-02-25T15:16:48.8256415Z     when the status is 'deactivated'
2024-02-25T15:16:48.8301431Z       should return true
2024-02-25T15:16:48.8302497Z     when the status is not 'deactivated'
2024-02-25T15:16:48.8345401Z       should return false
2024-02-25T15:16:48.8346237Z   #quantity_year_to_date
2024-02-25T15:16:49.0175830Z     includes all item quantities from distributions issued during the current year
2024-02-25T15:16:49.2106111Z     does not include quantities from distributions issued during the previous year
2024-02-25T15:16:49.2106979Z   changing emails
2024-02-25T15:16:49.2480377Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-02-25T15:16:49.2772310Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-02-25T15:16:49.3108418Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-02-25T15:16:49.3375626Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-02-25T15:16:49.3659129Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-02-25T15:16:49.3935762Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-02-25T15:16:49.4226869Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-02-25T15:16:49.4228276Z   #csv_export_attributes
2024-02-25T15:16:49.4519806Z     includes contact person information from parnerbase
2024-02-25T15:16:49.4520817Z   #impact_metrics
2024-02-25T15:16:49.4521472Z     when partner has related information
2024-02-25T15:16:49.5072436Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-02-25T15:16:49.5073540Z     when partner don't have any related information
2024-02-25T15:16:49.5345895Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-02-25T15:16:49.5347044Z   callbacks
2024-02-25T15:16:49.5598671Z     properly downcases email
2024-02-25T15:16:49.5599345Z   versioning
2024-02-25T15:16:49.5640164Z     is expected to be versioned
2024-02-25T15:16:49.5641036Z   Validations >
2024-02-25T15:16:49.5979988Z     requires a unique email that is formatted correctly
2024-02-25T15:16:49.6266091Z     does not require a unique name between organizations
2024-02-25T15:16:49.6598673Z     requires a unique name within an organization
2024-02-25T15:16:49.6668293Z     must belong to an organization
2024-02-25T15:16:49.6975432Z     still requires a unique email between organizations
2024-02-25T15:16:49.7076076Z     validates the quota is a number but it is not required
2024-02-25T15:16:49.7077049Z   import_csv
2024-02-25T15:16:50.0455371Z     imports partners from a csv file with BOM encodings
2024-02-25T15:16:50.2749194Z     imports partners from a csv file and prevents multiple imports
2024-02-25T15:16:50.2750453Z   #profile
2024-02-25T15:16:50.3034741Z     should return the associated Partners::Profile record
2024-02-25T15:16:50.3035874Z   Filters
2024-02-25T15:16:50.3036560Z     by_status
2024-02-25T15:16:50.3489693Z       yields deactivated partner when deactivated status provided
2024-02-25T15:16:50.3953111Z       yields partners with the provided status
2024-02-25T15:16:50.3954108Z   #approvable?
2024-02-25T15:16:50.3954638Z     when status is invited
2024-02-25T15:16:50.4008472Z       should return true
2024-02-25T15:16:50.4009278Z     when status is not invited or awaiting_review
2024-02-25T15:16:50.4091530Z       should return false
2024-02-25T15:16:50.4092450Z     when status is awaiting_review
2024-02-25T15:16:50.4139130Z       should return true
2024-02-25T15:16:50.4140058Z 
2024-02-25T15:16:50.4140277Z Kit
2024-02-25T15:16:50.6288416Z   deactivate and reactivate
2024-02-25T15:16:50.6289110Z   Value >
2024-02-25T15:16:50.6456034Z     converts dollars to cents
2024-02-25T15:16:50.6624315Z     converts cents to dollars
2024-02-25T15:16:50.6625302Z     .value_per_itemizable
2024-02-25T15:16:50.7048753Z       calculates values from associated items
2024-02-25T15:16:50.7049560Z   Filtering >
2024-02-25T15:16:51.2859911Z     ->alphabetized retrieves items in alphabetical order
2024-02-25T15:16:51.2898004Z     can filter
2024-02-25T15:16:51.2899095Z     ->by_partner_key
2024-02-25T15:16:51.5305763Z       shows the kits for a particular item
2024-02-25T15:16:51.5306727Z   versioning
2024-02-25T15:16:51.5345468Z     is expected to be versioned
2024-02-25T15:16:51.5346222Z   Validations >
2024-02-25T15:16:51.5528008Z     must belong to an organization
2024-02-25T15:16:51.7646122Z     requires a unique name
2024-02-25T15:16:51.7841198Z     can't have negative value
2024-02-25T15:16:51.8033212Z     is valid as built
2024-02-25T15:16:51.8215540Z     requires at least one item
2024-02-25T15:16:51.8403509Z     requires a name
2024-02-25T15:16:51.8404165Z   #can_deactivate?
2024-02-25T15:16:51.8404712Z     with inventory items
2024-02-25T15:16:52.0658115Z       should return false
2024-02-25T15:16:52.0658898Z     without inventory items
2024-02-25T15:16:52.2712609Z       should return true
2024-02-25T15:16:52.2713294Z 
2024-02-25T15:16:52.2713721Z RequestsConfirmationMailer
2024-02-25T15:16:52.2925440Z   handles duplicates
2024-02-25T15:16:52.3222813Z   pairs the right quantities with the right item names
2024-02-25T15:16:52.3224037Z   #confirmation_email
2024-02-25T15:16:52.3418508Z     renders the body
2024-02-25T15:16:52.3650178Z     renders the headers
2024-02-25T15:16:52.3650637Z 
2024-02-25T15:16:52.3650903Z Question
2024-02-25T15:16:52.3652762Z   remove_redundant_error
2024-02-25T15:16:52.3821269Z     should return an array with only one error message related to the checkboxes.
2024-02-25T15:16:52.3822471Z   scope for_banks
2024-02-25T15:16:52.4179750Z     should filter out questions that aren't meant for banks
2024-02-25T15:16:52.4180708Z   versioning
2024-02-25T15:16:52.4223145Z     is expected to be versioned
2024-02-25T15:16:52.4224050Z   punctuate
2024-02-25T15:16:52.4269651Z     should punctuate each string in a given array
2024-02-25T15:16:52.4270515Z   scope for_partners
2024-02-25T15:16:52.4527141Z     should filter out questions that aren't meant for partners
2024-02-25T15:16:52.4528111Z   validations
2024-02-25T15:16:52.4633354Z     question for_banks and for_partners attributes can't both be false
2024-02-25T15:16:52.4700520Z     is expected to validate that :title cannot be empty/falsy
2024-02-25T15:16:52.4760058Z     is expected to validate that :answer cannot be empty/falsy
2024-02-25T15:16:52.4760777Z 
2024-02-25T15:16:52.4761262Z RequestItem
2024-02-25T15:16:52.4764330Z   Methods >
2024-02-25T15:16:52.4765016Z     #from_json
2024-02-25T15:16:52.7385733Z       has the correct quantity
2024-02-25T15:16:52.9877794Z       has the correct amount on hand for location
2024-02-25T15:16:53.2433070Z       has the correct amount on hand
2024-02-25T15:16:53.4869586Z       has the correct name
2024-02-25T15:16:53.4870352Z 
2024-02-25T15:16:53.4870689Z DonationSitesController
2024-02-25T15:16:53.4871949Z   While signed in
2024-02-25T15:16:53.4873663Z     GET #new
2024-02-25T15:16:53.5007531Z       returns http success
2024-02-25T15:16:53.5008032Z     GET #index
2024-02-25T15:16:53.5121627Z       returns http success
2024-02-25T15:16:53.5122470Z     POST #import_csv
2024-02-25T15:16:53.5123330Z       behaves like csv import
2024-02-25T15:16:53.5124164Z         with a csv file
2024-02-25T15:16:53.5164859Z           invokes .import_csv
2024-02-25T15:16:53.5325512Z           presents a flash notice message
2024-02-25T15:16:53.5462624Z           redirects to :index
2024-02-25T15:16:53.5463264Z         csv file with wrong headers
2024-02-25T15:16:53.5569138Z           redirects to :index
2024-02-25T15:16:53.5675461Z           presents a flash error message
2024-02-25T15:16:53.5676380Z         without a csv file
2024-02-25T15:16:53.5785087Z           presents a flash error message
2024-02-25T15:16:53.5901607Z           redirects to :index
2024-02-25T15:16:53.6313829Z     GET #show
2024-02-25T15:16:53.6315900Z       returns http success
2024-02-25T15:16:53.6316416Z     GET #edit
2024-02-25T15:16:53.6324317Z       returns http success
2024-02-25T15:16:53.6325181Z     Looking at a different organization
2024-02-25T15:16:53.8056972Z       redirects the user to the sign-in page for CRUD actions
2024-02-25T15:16:53.8057880Z     DELETE #destroy
2024-02-25T15:16:53.8213158Z       returns http success
2024-02-25T15:16:53.8213831Z   While not signed in
2024-02-25T15:16:53.8272127Z     redirects the user to the sign-in page for CRUD actions
2024-02-25T15:16:53.8272811Z 
2024-02-25T15:16:53.8273120Z Partners::Profile
2024-02-25T15:16:53.8307917Z   must allow deleting served_areas
2024-02-25T15:16:53.8308467Z   associations
2024-02-25T15:16:53.8351499Z     is expected to have a has_many_attached called documents
2024-02-25T15:16:53.8407665Z     is expected to have a has_one_attached called proof_of_form_990
2024-02-25T15:16:53.8511431Z     is expected to have a has_one_attached called proof_of_partner_status
2024-02-25T15:16:53.8552414Z     is expected to have many served_areas
2024-02-25T15:16:53.8553004Z   client share behaviour
2024-02-25T15:16:53.8553832Z     no served areas
2024-02-25T15:16:53.8618653Z       has 0 client share
2024-02-25T15:16:53.8619267Z     multiple
2024-02-25T15:16:53.8795837Z       sums the client shares
2024-02-25T15:16:53.8968155Z       is valid if client share sum is 100
2024-02-25T15:16:53.8968898Z   social media info validation for profile
2024-02-25T15:16:53.8970092Z     has social media presence and the checkbox is unchecked
2024-02-25T15:16:53.9057376Z       with every social media option it should be valid
2024-02-25T15:16:53.9139434Z       with just twitter it should be valid
2024-02-25T15:16:53.9218525Z       with just a website it should be valid
2024-02-25T15:16:53.9297393Z       with just facebook it should be valid
2024-02-25T15:16:53.9375697Z       with just instagram it should be valid
2024-02-25T15:16:53.9376508Z     no social media presence and the checkbox is checked
2024-02-25T15:16:53.9440268Z       should be valid
2024-02-25T15:16:53.9441278Z     no social media presence and the checkbox isn't checked
2024-02-25T15:16:53.9505718Z       should not be valid
2024-02-25T15:16:53.9610763Z       should be valid if media_information is not needed
2024-02-25T15:16:53.9611943Z   request settings validation for profile
2024-02-25T15:16:53.9612592Z     no settings are set to true
2024-02-25T15:16:53.9668316Z       should not be valid
2024-02-25T15:16:53.9668929Z     at least one request type is set to true
2024-02-25T15:16:53.9749944Z       should be valid when enable_child_based_requests is true
2024-02-25T15:16:53.9827772Z       should be valid when enable_individual_requests is true
2024-02-25T15:16:53.9906025Z       should be valid when enable_quantity_based_requests is true
2024-02-25T15:16:53.9906807Z   versioning
2024-02-25T15:16:53.9945039Z     is expected to be versioned
2024-02-25T15:16:53.9945877Z 
2024-02-25T15:16:53.9946176Z TransferDestroyService
2024-02-25T15:16:53.9947129Z   #call
2024-02-25T15:16:53.9948335Z     because transfer should not be deleted
2024-02-25T15:16:54.1863349Z       should return an OpenStruct with the raised error
2024-02-25T15:16:54.1864255Z     when an issue occurs in transaction
2024-02-25T15:16:54.1865136Z       because the transfer destroy raised an error
2024-02-25T15:16:54.4223268Z         should return a OpenStruct with the raised error
2024-02-25T15:16:54.4224293Z       because the transfer_id does not match any Transfer
2024-02-25T15:16:54.7561134Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-02-25T15:16:54.7562112Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-02-25T15:16:54.9404718Z         should return a OpenStruct with the raised error
2024-02-25T15:16:54.9405912Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-02-25T15:16:55.1291087Z         should return a OpenStruct with the raised error
2024-02-25T15:16:55.1291889Z     when there are no issues
2024-02-25T15:16:55.3378247Z       should execute the expected methods
2024-02-25T15:16:55.5579810Z       should return an OpenStruct with success? set to true
2024-02-25T15:16:55.5583634Z 
2024-02-25T15:16:55.5584023Z AccountRequestMailer
2024-02-25T15:16:55.5585257Z   #confirmation
2024-02-25T15:16:55.5823117Z     should have the correct subject
2024-02-25T15:16:55.5949914Z     should be sent to the specified account_request email
2024-02-25T15:16:55.6075439Z     should be from no-reply@humanessentials.app
2024-02-25T15:16:55.6075981Z     Text format
2024-02-25T15:16:55.6200021Z       should include the staging/demo account information
2024-02-25T15:16:55.6323895Z       should include the button to confirm the request
2024-02-25T15:16:55.6448375Z       should include the instruction video link
2024-02-25T15:16:55.6448899Z     HTML format
2024-02-25T15:16:55.6568759Z       should include the staging/demo account information
2024-02-25T15:16:55.6692135Z       should include the button to confirm the request
2024-02-25T15:16:55.6813056Z       should include the instruction video link
2024-02-25T15:16:55.6813772Z     when the account_request_id provided does not match any AccountRequest
2024-02-25T15:16:55.6861450Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-25T15:16:55.6862057Z   #approval_request
2024-02-25T15:16:55.7008409Z     should include the admin link to reject the organization
2024-02-25T15:16:55.7145925Z     should include the admin link to create the new organization from the account request
2024-02-25T15:16:55.7446268Z     should include details of the account request
2024-02-25T15:16:55.7589977Z     should have the correct subject
2024-02-25T15:16:55.7720349Z     should be sent to the info@humanessentials.app email address
2024-02-25T15:16:55.7721092Z     when the account_request_id provided does not match any AccountRequest
2024-02-25T15:16:55.7770002Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-25T15:16:55.7770579Z   #rejection
2024-02-25T15:16:55.7899872Z     should have the correct subject
2024-02-25T15:16:55.8027489Z     should include the rejection reason
2024-02-25T15:16:55.8148064Z     should be sent to the correct email address
2024-02-25T15:16:55.8148994Z     when the account_request_id provided does not match any AccountRequest
2024-02-25T15:16:55.8197256Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-25T15:16:55.8198283Z 
2024-02-25T15:16:55.8198427Z AddRoleService
2024-02-25T15:16:55.8199647Z   #call
2024-02-25T15:16:55.8200452Z     when the role does not yet exist
2024-02-25T15:16:56.0103451Z       should add the role
2024-02-25T15:16:56.2136764Z       should add the user role when asked to add admin
2024-02-25T15:16:56.4230426Z       works with a partner
2024-02-25T15:16:56.6188868Z       works with super admin
2024-02-25T15:16:56.6189298Z     when the role already exists
2024-02-25T15:16:56.8166154Z       should raise an error
2024-02-25T15:16:57.0196369Z       should raise an error for super admin
2024-02-25T15:16:57.0199898Z 
2024-02-25T15:16:57.0200105Z DonationSite
2024-02-25T15:16:57.0201596Z   Validations >
2024-02-25T15:16:57.0248569Z     is invalid without an address
2024-02-25T15:16:57.0294202Z     is invalid without a name
2024-02-25T15:16:57.0333097Z     must belong to an organization
2024-02-25T15:16:57.0333536Z   geocode
2024-02-25T15:16:57.0391689Z     adds coordinates to the database
2024-02-25T15:16:57.0392156Z   import_csv
2024-02-25T15:16:57.2181307Z     imports storage locations from a csv file
2024-02-25T15:16:57.2181800Z   versioning
2024-02-25T15:16:57.2219146Z     is expected to be versioned
2024-02-25T15:16:57.2220018Z 
2024-02-25T15:16:57.2220162Z InventoryAggregate
2024-02-25T15:16:57.2221589Z   validation
2024-02-25T15:16:57.2222517Z     subsequent event is incorrect
2024-02-25T15:16:57.5331021Z       should add the event to the message
2024-02-25T15:16:57.5331708Z     current event is incorrect
2024-02-25T15:16:57.7722161Z       should raise a bare error
2024-02-25T15:16:57.7722643Z   multiple events
2024-02-25T15:16:58.0381400Z     should handle changing storage location
2024-02-25T15:16:58.4456116Z     should process multiple events
2024-02-25T15:16:58.7297039Z     should ignore unusable snapshots
2024-02-25T15:16:59.0441440Z     should handle intervening audits
2024-02-25T15:16:59.3125698Z     should handle timing correctly
2024-02-25T15:16:59.3126296Z   individual events
2024-02-25T15:16:59.6363886Z     should process a transfer destroy event
2024-02-25T15:16:59.9431167Z     should process a distribution event
2024-02-25T15:17:00.2411164Z     should process a donation event
2024-02-25T15:17:00.5380692Z     should process a purchase event
2024-02-25T15:17:00.8694499Z     should process a distribution destroyed event
2024-02-25T15:17:01.1790177Z     should process a donation destroyed event
2024-02-25T15:17:01.4713534Z     should process a snapshot event
2024-02-25T15:17:01.8106944Z     should process an audit event
2024-02-25T15:17:02.1462968Z     should process a purchase destroyed event
2024-02-25T15:17:02.4769468Z     should process an adjustment event
2024-02-25T15:17:02.7889717Z     should process a transfer event
2024-02-25T15:17:03.0940565Z     should process a donation event after a new storage location is created
2024-02-25T15:17:03.4977034Z     should process a kit deallocation event
2024-02-25T15:17:03.8198419Z     should process a kit allocation event
2024-02-25T15:17:03.8198991Z 
2024-02-25T15:17:03.8199128Z User
2024-02-25T15:17:03.8200307Z   #send_reset_password_instructions
2024-02-25T15:17:03.8201289Z     user gets an email with instructions
2024-02-25T15:17:03.9140231Z       sends an email with instructions
2024-02-25T15:17:03.9140846Z   #role_added
2024-02-25T15:17:03.9529410Z     renders the body correctly
2024-02-25T15:17:03.9529878Z 
2024-02-25T15:17:03.9530083Z Partners::UpdateFamily
2024-02-25T15:17:03.9531002Z   #call
2024-02-25T15:17:03.9532244Z     when an error occurs during archiving
2024-02-25T15:17:03.9921027Z       does not archive the family or its children and adds error to the service
2024-02-25T15:17:03.9922011Z     when family has children
2024-02-25T15:17:04.0328380Z       archives the family and its children
2024-02-25T15:17:04.0329419Z 
2024-02-25T15:17:04.0329652Z Exports::ExportReportCSVService
2024-02-25T15:17:04.0330190Z   .generate_csv_data
2024-02-25T15:17:04.0368293Z     creates CSV data including headers
2024-02-25T15:17:04.0401665Z     creates a CSV string
2024-02-25T15:17:04.0402143Z 
2024-02-25T15:17:04.0402359Z Event
2024-02-25T15:17:04.0403324Z   #most_recent_snapshot
2024-02-25T15:17:04.3008518Z     should not include an unusable snapshot
2024-02-25T15:17:04.5581575Z     should include the last usable snapshot
2024-02-25T15:17:04.5582249Z 
2024-02-25T15:17:04.5582711Z DistributionCreateService
2024-02-25T15:17:04.5583822Z   call
2024-02-25T15:17:04.6352116Z     returns a successful object with Scheduled distribution
2024-02-25T15:17:04.8113201Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-25T15:17:04.8114381Z     when the line item quantity is not positive
2024-02-25T15:17:04.9281025Z       preserves the RecordInvalid error and is unsuccessful
2024-02-25T15:17:04.9281867Z     partner is deactivated
2024-02-25T15:17:05.0502852Z       does not send an email
2024-02-25T15:17:05.0503625Z     partner has send reminders setting set to true
2024-02-25T15:17:05.2442156Z       Sends a PartnerMailer
2024-02-25T15:17:05.2443089Z     when there's not sufficient inventory
2024-02-25T15:17:05.3097826Z       preserves the Insufficiency error and is unsuccessful
2024-02-25T15:17:05.3099190Z     when there's multiple line items and one has insufficient inventory
2024-02-25T15:17:05.3791410Z       preserves the Insufficiency error and is unsuccessful
2024-02-25T15:17:05.3791976Z     when it fails to save
2024-02-25T15:17:05.4491164Z       preserves the error and is unsuccessful
2024-02-25T15:17:05.4492099Z     partner has send reminders setting set to false
2024-02-25T15:17:05.5334242Z       does not send a PartnerMailer
2024-02-25T15:17:05.5334873Z     when provided with a request ID
2024-02-25T15:17:05.6365882Z       changes the status of the request
2024-02-25T15:17:05.6366656Z       and the request already has a distribution associated with it
2024-02-25T15:17:05.7114877Z         should not be successful
2024-02-25T15:17:05.7116008Z 
2024-02-25T15:17:05.7116295Z KitCreateService
2024-02-25T15:17:05.7117421Z   #call
2024-02-25T15:17:05.9070382Z     should return an the instance
2024-02-25T15:17:05.9071187Z     when the parameters provided are invalid
2024-02-25T15:17:05.9072086Z       because the organization_id does not match any Organization
2024-02-25T15:17:05.9126644Z         should have an error on organization_id saying it does not match any Organization
2024-02-25T15:17:05.9127752Z       because the kit_params is invalid for kit creation
2024-02-25T15:17:06.0842697Z         should have errors saying why the kit_params are invalid
2024-02-25T15:17:06.0843518Z     when the parameters are valid
2024-02-25T15:17:06.2731605Z       should create a new Item
2024-02-25T15:17:06.4639943Z       should create the new Item associated with the Kit
2024-02-25T15:17:06.6510052Z       should create a new Kit
2024-02-25T15:17:06.6510778Z       but an unexpected error gets raised
2024-02-25T15:17:06.8396962Z         should not create the Kit
2024-02-25T15:17:07.0290748Z         should not create a Item
2024-02-25T15:17:07.2256788Z         should have an error that includes the raised error
2024-02-25T15:17:07.2257699Z       but the ItemCreationService is unsuccesful
2024-02-25T15:17:07.4213491Z         should have an error that includes the error
2024-02-25T15:17:07.6192660Z         should not create the Kit
2024-02-25T15:17:07.8108275Z         should not create a Item
2024-02-25T15:17:07.8109394Z 
2024-02-25T15:17:07.8109672Z Audit
2024-02-25T15:17:07.8111116Z   Methods >
2024-02-25T15:17:08.0461583Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-02-25T15:17:08.3839234Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-02-25T15:17:08.3840637Z   versioning
2024-02-25T15:17:08.3879786Z     is expected to be versioned
2024-02-25T15:17:08.3880355Z   behaves like itemizable
2024-02-25T15:17:08.3881152Z     .to_a
2024-02-25T15:17:08.3882067Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:17:08.4397878Z         raises an error
2024-02-25T15:17:08.4398513Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:17:08.4898542Z         calls line_item_values
2024-02-25T15:17:08.4899157Z     .line_items
2024-02-25T15:17:08.4899995Z       quantities_by_name
2024-02-25T15:17:08.5722430Z         leaves out zero-quantitied items if requested
2024-02-25T15:17:08.6545344Z         returns a hash of items with id, name, and quantity
2024-02-25T15:17:08.6546130Z       total
2024-02-25T15:17:08.7348882Z         has an item total
2024-02-25T15:17:08.7349446Z       combine!
2024-02-25T15:17:08.7794767Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:17:08.8387689Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:17:08.8388610Z       sorted
2024-02-25T15:17:08.9572336Z         displays the items, sorted by name
2024-02-25T15:17:08.9573038Z   Scopes >
2024-02-25T15:17:09.0024611Z     `at_location` can filter out audits to a specific location
2024-02-25T15:17:09.0025736Z   Validations >
2024-02-25T15:17:09.0607188Z     can have line items that has quantity as zero
2024-02-25T15:17:09.1170621Z     can have line items that has quantity as a positive integer
2024-02-25T15:17:09.1733100Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-02-25T15:17:09.2038522Z     must belong to an organization
2024-02-25T15:17:09.2611299Z     can not have line items that has quantity as negative integer
2024-02-25T15:17:09.3172480Z     cannot have duplicate line items
2024-02-25T15:17:09.3286437Z     must belong to an organization admin of its organization
2024-02-25T15:17:09.3287412Z 
2024-02-25T15:17:09.3287904Z ProductDriveHelper
2024-02-25T15:17:09.3291210Z   #is_virtual
2024-02-25T15:17:09.3295039Z     when the product drive was held virtually
2024-02-25T15:17:09.3350968Z       is expected to eq "Yes"
2024-02-25T15:17:09.3351842Z     when the product drive wasn't held virtually
2024-02-25T15:17:09.3403185Z       is expected to eq "No"
2024-02-25T15:17:09.3403780Z     when a product drive was not provided
2024-02-25T15:17:09.3446801Z       with blank argument
2024-02-25T15:17:09.3487449Z       without argument
2024-02-25T15:17:09.3488513Z 
2024-02-25T15:17:09.3488747Z Partners::ChildItemRequest
2024-02-25T15:17:09.3490370Z   #ordered_item_diaperid
2024-02-25T15:17:09.3552433Z     should return the item_id on the item_request
2024-02-25T15:17:09.3553084Z   associations
2024-02-25T15:17:09.3594572Z     is expected to belong to authorized_family_member optional: true
2024-02-25T15:17:09.3634259Z     is expected to belong to child required: true
2024-02-25T15:17:09.3674393Z     is expected to belong to item_request required: true
2024-02-25T15:17:09.3675120Z   #quantity
2024-02-25T15:17:09.3716016Z     should return the quantity divided by the number of children
2024-02-25T15:17:09.3716868Z   versioning
2024-02-25T15:17:09.3750015Z     is expected to be versioned
2024-02-25T15:17:09.3750569Z 
2024-02-25T15:17:09.3750834Z Reports::AdultIncontinenceReportService
2024-02-25T15:17:09.3751717Z   #report
2024-02-25T15:17:09.5558274Z     should report zero values
2024-02-25T15:17:09.5558839Z     with values
2024-02-25T15:17:10.1577656Z       should report normal values
2024-02-25T15:17:10.7883156Z       should handle null distribution quantity
2024-02-25T15:17:10.7883868Z 
2024-02-25T15:17:10.7884043Z EventDiffer
2024-02-25T15:17:10.9860177Z   should return a full diff
2024-02-25T15:17:10.9860677Z 
2024-02-25T15:17:10.9860957Z ItemizableUpdateService
2024-02-25T15:17:10.9861415Z   decreases
2024-02-25T15:17:11.1367503Z     should update quantity in different locations
2024-02-25T15:17:11.2855789Z     should update quantity in same storage location
2024-02-25T15:17:11.2856640Z   increases
2024-02-25T15:17:11.4340502Z     should update quantity in different locations
2024-02-25T15:17:11.5772763Z     should update quantity in same storage location
2024-02-25T15:17:11.5773322Z 
2024-02-25T15:17:11.5773524Z BroadcastAnnouncement
2024-02-25T15:17:11.5889153Z   is expected to validate that :message cannot be empty/falsy
2024-02-25T15:17:11.5951449Z   should validate a valid announcement
2024-02-25T15:17:11.5992795Z   is expected to belong to user required: true
2024-02-25T15:17:11.6104119Z   should roughly check if link is valid
2024-02-25T15:17:11.6162624Z   should validate a good link
2024-02-25T15:17:11.6202168Z   is expected to belong to organization optional: true
2024-02-25T15:17:11.6202848Z   versioning
2024-02-25T15:17:11.6240297Z     is expected to be versioned
2024-02-25T15:17:11.6240941Z   expired?
2024-02-25T15:17:11.6299660Z     should be false if the announcement has not expired
2024-02-25T15:17:11.6356244Z     should be true if the announcement is expired
2024-02-25T15:17:11.6357097Z   filter_announcements
2024-02-25T15:17:11.6501764Z     shouldn't include expired announcements
2024-02-25T15:17:11.6638321Z     sorts announcements from most recently created to last
2024-02-25T15:17:11.6764053Z     should include only announcements from the passed organization
2024-02-25T15:17:11.6764969Z 
2024-02-25T15:17:11.6765191Z PartnerFetchRequestableItemsService
2024-02-25T15:17:11.6765942Z   #call
2024-02-25T15:17:11.6767226Z     when the partner is in a partner group
2024-02-25T15:17:11.7275880Z       should return all active and visible items specified by the item associated with
2024-02-25T15:17:11.7276988Z     when the partner id does not match any Partner
2024-02-25T15:17:11.7321814Z       raise an error indiciating the partner does not exist
2024-02-25T15:17:11.7322632Z     when the partner is not in any partner group
2024-02-25T15:17:11.7612065Z       should return all active and visible items
2024-02-25T15:17:11.7612673Z 
2024-02-25T15:17:11.7612880Z NotifyPartnerJob
2024-02-25T15:17:11.7613804Z   #perform
2024-02-25T15:17:11.7662347Z     avoids exception when request doesn't exist
2024-02-25T15:17:11.7764059Z     is expected to call RequestsConfirmationMailer
2024-02-25T15:17:11.7764971Z     when the request's partner is deactivated
2024-02-25T15:17:11.8053280Z       does not send the confirmation email
2024-02-25T15:17:11.8054365Z 
2024-02-25T15:17:11.8054532Z Adjustment
2024-02-25T15:17:11.8056261Z   versioning
2024-02-25T15:17:11.8096331Z     is expected to be versioned
2024-02-25T15:17:11.8096974Z   Validations >
2024-02-25T15:17:11.8514817Z     allows you to remove all the inventory that exists in the storage location
2024-02-25T15:17:11.8598374Z     must belong to an organization
2024-02-25T15:17:11.8771231Z     allows you to add inventory that doesn't yet exist in the storage location
2024-02-25T15:17:11.8772186Z   behaves like itemizable
2024-02-25T15:17:11.8772644Z     .line_items
2024-02-25T15:17:11.8773224Z       quantities_by_name
2024-02-25T15:17:11.9183580Z         leaves out zero-quantitied items if requested
2024-02-25T15:17:11.9600571Z         returns a hash of items with id, name, and quantity
2024-02-25T15:17:11.9601076Z       combine!
2024-02-25T15:17:12.0053030Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:17:12.0581737Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:17:12.0582651Z       sorted
2024-02-25T15:17:12.1158817Z         displays the items, sorted by name
2024-02-25T15:17:12.1159479Z       total
2024-02-25T15:17:12.1579994Z         has an item total
2024-02-25T15:17:12.1581466Z     .to_a
2024-02-25T15:17:12.1582002Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:17:12.1943060Z         raises an error
2024-02-25T15:17:12.1943660Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:17:12.2316864Z         calls line_item_values
2024-02-25T15:17:12.2318596Z   Methods >
2024-02-25T15:17:12.4345796Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-02-25T15:17:12.4347357Z     split_difference
2024-02-25T15:17:12.5130260Z       returns two adjustment objects
2024-02-25T15:17:12.5904723Z       gracefully handles adjustments with only positive
2024-02-25T15:17:12.6689850Z       gracefully handles adjustments with only negative
2024-02-25T15:17:12.6690377Z   Scopes >
2024-02-25T15:17:12.6860497Z     `at_location` can filter out adjustments to a specific location
2024-02-25T15:17:12.7013216Z     `by_user` can filter out adjustments to a specific user
2024-02-25T15:17:12.7013859Z   nested line item attributes
2024-02-25T15:17:12.7426225Z     accepts them
2024-02-25T15:17:12.7426621Z 
2024-02-25T15:17:12.7427018Z HistoricalTrendService
2024-02-25T15:17:12.7428077Z   #series
2024-02-25T15:17:13.0615547Z     returns an array of items with their monthly data
2024-02-25T15:17:13.0617382Z 
2024-02-25T15:17:13.0617630Z Donation
2024-02-25T15:17:13.0619232Z   SOURCES
2024-02-25T15:17:13.0659213Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-02-25T15:17:13.0690472Z     the hash is immutable
2024-02-25T15:17:13.0723362Z     the hash values are immutable
2024-02-25T15:17:13.0723840Z   Callbacks >
2024-02-25T15:17:13.0892718Z     automatically combines duplicate line_item records when they're created
2024-02-25T15:17:13.1024363Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T15:17:13.1025356Z   Methods >
2024-02-25T15:17:13.1025745Z     source_view
2024-02-25T15:17:13.1026164Z       not from a drive
2024-02-25T15:17:13.1174143Z         returns source
2024-02-25T15:17:13.1174645Z       from a drive
2024-02-25T15:17:13.1177526Z         unknown participant
2024-02-25T15:17:13.1276511Z           returns drive display name
2024-02-25T15:17:13.1277139Z         participant known
2024-02-25T15:17:13.1277836Z           contact name present
2024-02-25T15:17:13.1404805Z             returns participant display name
2024-02-25T15:17:13.1405506Z           no contact name
2024-02-25T15:17:13.1537187Z             returns drive display name
2024-02-25T15:17:13.1538127Z     money_raised
2024-02-25T15:17:13.2188012Z       tracks the money raised in a donation
2024-02-25T15:17:13.2188701Z     remove
2024-02-25T15:17:13.2898602Z       removes the item from the donation
2024-02-25T15:17:13.3613410Z       fails gracefully if the item doesn't exist
2024-02-25T15:17:13.4271710Z       works with either an id or an object
2024-02-25T15:17:13.4272406Z   Scopes >
2024-02-25T15:17:13.4272968Z     by_source >
2024-02-25T15:17:13.4274221Z       when source is not a symbol
2024-02-25T15:17:13.4276942Z         when source comes from the SOURCES hash
2024-02-25T15:17:13.4468445Z           returns all donations with the provided source
2024-02-25T15:17:13.4468995Z         when source is invalid
2024-02-25T15:17:13.4653148Z           does not throw errors, returns no results
2024-02-25T15:17:13.4653872Z       when source is a symbol
2024-02-25T15:17:13.4654533Z         when source is invalid
2024-02-25T15:17:13.4835825Z           does not throw errors, returns no results
2024-02-25T15:17:13.4836510Z         when source is valid
2024-02-25T15:17:13.5020506Z           allows a symbol as an argument, referencing the SOURCES hash
2024-02-25T15:17:13.5021380Z     during >
2024-02-25T15:17:13.5208717Z       returns all donations created between two dates
2024-02-25T15:17:13.5209465Z   behaves like itemizable
2024-02-25T15:17:13.5210245Z     .line_items
2024-02-25T15:17:13.5211415Z       total
2024-02-25T15:17:13.5566511Z         has an item total
2024-02-25T15:17:13.5567140Z       combine!
2024-02-25T15:17:13.6032088Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:17:13.6446415Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:17:13.6447076Z       quantities_by_name
2024-02-25T15:17:13.6804645Z         leaves out zero-quantitied items if requested
2024-02-25T15:17:13.7128622Z         returns a hash of items with id, name, and quantity
2024-02-25T15:17:13.7129386Z       sorted
2024-02-25T15:17:13.7638245Z         displays the items, sorted by name
2024-02-25T15:17:13.7638949Z     .to_a
2024-02-25T15:17:13.7639762Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:17:13.7992059Z         raises an error
2024-02-25T15:17:13.7992716Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:17:13.8333715Z         calls line_item_values
2024-02-25T15:17:13.8334476Z   Validations >
2024-02-25T15:17:13.8449993Z     ensures that the issued at is no earlier than 2000
2024-02-25T15:17:13.8631891Z     requires a donation_site if the source is 'Donation Site'
2024-02-25T15:17:13.8880379Z     requires a product drive participant if the source is 'Product Drive'
2024-02-25T15:17:13.9026633Z     requires a source from the list of available sources
2024-02-25T15:17:13.9284128Z     is invalid when the line items are invalid
2024-02-25T15:17:13.9549828Z     requires a manufacturer if the source is 'Manufacturer'
2024-02-25T15:17:13.9636808Z     requires an inventory (storage location)
2024-02-25T15:17:13.9723343Z     must belong to an organization
2024-02-25T15:17:13.9723946Z   Associations >
2024-02-25T15:17:13.9724694Z     items >
2024-02-25T15:17:14.0984021Z       has_many
2024-02-25T15:17:14.0984541Z   versioning
2024-02-25T15:17:14.1029904Z     is expected to be versioned
2024-02-25T15:17:14.1030426Z 
2024-02-25T15:17:14.1030650Z DistributionByCountyReportService
2024-02-25T15:17:14.1031799Z   get_breakdown
2024-02-25T15:17:14.1954144Z     divides the item numbers and values according to the partner profile
2024-02-25T15:17:14.2681519Z     will have 100% unspecified shows if no served_areas
2024-02-25T15:17:14.4511750Z     handles multiple partners with overlapping service areas properly
2024-02-25T15:17:14.4513474Z 
2024-02-25T15:17:14.4513679Z AccountRequestsController
2024-02-25T15:17:14.4515821Z   routing
2024-02-25T15:17:14.4559139Z     routes to #new
2024-02-25T15:17:14.4597991Z     routes to #create
2024-02-25T15:17:14.4598731Z 
2024-02-25T15:17:14.4599000Z Partners::Child
2024-02-25T15:17:14.4600213Z   associations
2024-02-25T15:17:14.4646445Z     is expected to belong to family required: true
2024-02-25T15:17:14.4684458Z     is expected to have many child_item_requests dependent => destroy
2024-02-25T15:17:14.4685316Z   versioning
2024-02-25T15:17:14.4720993Z     is expected to be versioned
2024-02-25T15:17:14.4721581Z   #display_name
2024-02-25T15:17:14.5030610Z     should return a child's first and last name
2024-02-25T15:17:14.5031171Z 
2024-02-25T15:17:14.5031357Z ApplicationController
2024-02-25T15:17:14.5033073Z   current_organization
2024-02-25T15:17:14.5039927Z     As an org user
2024-02-25T15:17:14.8693640Z       should return the first org role
2024-02-25T15:17:14.8694297Z       with a changed current role
2024-02-25T15:17:15.2193145Z         should return the first org role
2024-02-25T15:17:15.2193862Z     As a partner user
2024-02-25T15:17:15.2351532Z       should return nil
2024-02-25T15:17:15.2352120Z   current_partner
2024-02-25T15:17:15.2353207Z     As a partner user
2024-02-25T15:17:15.2920257Z       should return the first partner role
2024-02-25T15:17:15.2920978Z       with a changed current role
2024-02-25T15:17:15.3472339Z         should return the first partner role
2024-02-25T15:17:15.3473051Z     As an org user
2024-02-25T15:17:15.3612201Z       should return nil
2024-02-25T15:17:15.3612764Z   dashboard_path_from_current_role
2024-02-25T15:17:15.3613828Z     As a super admin
2024-02-25T15:17:15.3807251Z       links to the admin dashboard
2024-02-25T15:17:15.3807909Z     As a user without super admin status
2024-02-25T15:17:15.4003644Z       links to the general dashboard
2024-02-25T15:17:15.7717689Z 
2024-02-25T15:17:15.7718242Z Failures:
2024-02-25T15:17:15.7718612Z 
2024-02-25T15:17:15.7720400Z   1) ApplicationHelper active_class Returns the controller name
2024-02-25T15:17:15.7721921Z      Failure/Error: if name.include?(controller_path) || name.find { |n| request.path.ends_with?(n) }
2024-02-25T15:17:15.7723052Z 
2024-02-25T15:17:15.7723173Z      NoMethodError:
2024-02-25T15:17:15.7723839Z        undefined method `find' for "foo":String
2024-02-25T15:17:15.7724424Z      # ./app/helpers/application_helper.rb:18:in `active_class'
2024-02-25T15:17:15.7725237Z      # ./spec/helpers/application_helper_spec.rb:32:in `block (3 levels) in <top (required)>'
2024-02-25T15:17:15.7738951Z 
2024-02-25T15:17:15.7739372Z Finished in 48.81 seconds (files took 8.28 seconds to load)
2024-02-25T15:17:15.7740127Z 603 examples, 1 failure
2024-02-25T15:17:15.7740505Z 
2024-02-25T15:17:15.7740710Z Failed examples:
2024-02-25T15:17:15.7741021Z 
2024-02-25T15:17:15.7741986Z rspec ./spec/helpers/application_helper_spec.rb:31 # ApplicationHelper active_class Returns the controller name
2024-02-25T15:17:15.7743707Z 
2024-02-25T15:17:15.7743925Z Randomized with seed 43899
2024-02-25T15:17:15.7744268Z 
2024-02-25T15:17:16.0981857Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T15:17:16.0984015Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3919 / 6454 LOC (60.72%) covered.
2024-02-25T15:17:16.1556442Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/models/audit_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/adjustment_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/models/request_item_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/models/event_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/models/line_item_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/vendor_spec.rb" "spec/events/event_differ_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/models/partners/profile_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/models/question_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/item_category_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/models/county_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" failed
2024-02-25T15:17:16.5400333Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T15:17:16.5402423Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10719 LOC (0.35%) covered.
2024-02-25T15:17:16.5693331Z ##[error]Process completed with exit code 1.
