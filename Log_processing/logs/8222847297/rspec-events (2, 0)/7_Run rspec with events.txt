2024-03-10T15:02:10.0105407Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-10T15:02:10.0106329Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-10T15:02:10.0157882Z shell: /usr/bin/bash -e {0}
2024-03-10T15:02:10.0158435Z env:
2024-03-10T15:02:10.0158805Z   POSTGRES_HOST: localhost
2024-03-10T15:02:10.0159226Z   DATABASE_HOST: localhost
2024-03-10T15:02:10.0159729Z   PG_USERNAME: postgres
2024-03-10T15:02:10.0160140Z   PG_PASSWORD: password
2024-03-10T15:02:10.0160615Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-10T15:02:10.0161062Z   POSTGRES_PORT: 5432
2024-03-10T15:02:10.0161399Z   PGHOST: localhost
2024-03-10T15:02:10.0161830Z   PGUSER: postgres
2024-03-10T15:02:10.0162205Z   RAILS_ENV: test
2024-03-10T15:02:10.0162865Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-10T15:02:10.0163454Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-10T15:02:10.0163875Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-10T15:02:10.0164332Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-10T15:02:10.0164968Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-10T15:02:10.0165637Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-10T15:02:10.0166420Z   EVENTS_READ: true
2024-03-10T15:02:10.0166785Z ##[endgroup]
2024-03-10T15:02:19.7059845Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/purchase_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/calendar_service_spec.rb" "spec/models/account_request_spec.rb" "spec/models/event_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/line_item_spec.rb" "spec/models/partners/family_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/item_category_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/base_item_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/controllers/admins_controller_spec.rb"
2024-03-10T15:02:28.5324881Z 
2024-03-10T15:02:28.5325606Z Randomized with seed 58801
2024-03-10T15:02:29.3763359Z 
2024-03-10T15:02:29.3764380Z EventDiffer
2024-03-10T15:02:29.6009323Z   should return a full diff
2024-03-10T15:02:29.6010936Z 
2024-03-10T15:02:29.6011194Z AccountRequest
2024-03-10T15:02:29.6262577Z   #reject!
2024-03-10T15:02:29.6391445Z   #confirm!
2024-03-10T15:02:29.6392018Z   versioning
2024-03-10T15:02:29.6429796Z     is expected to be versioned
2024-03-10T15:02:29.6430595Z   associations
2024-03-10T15:02:29.6467895Z     is expected to have one organization class_name => Organization
2024-03-10T15:02:29.6526885Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-10T15:02:29.6528121Z   #identity_token
2024-03-10T15:02:29.6614348Z     should return a JWT token that contains the id of the account_request_id
2024-03-10T15:02:29.6615354Z     when the account_request is not persisted
2024-03-10T15:02:29.6714368Z       should raise an error
2024-03-10T15:02:29.6715265Z   .get_by_identity_token
2024-03-10T15:02:29.6716599Z     when the identity_token corresponds to an existing AccountRequest
2024-03-10T15:02:29.6806617Z       should return the corresponding AccountRequest
2024-03-10T15:02:29.6807658Z     when the identity_token provided does not match any AccountRequest
2024-03-10T15:02:29.6841614Z       should return nil
2024-03-10T15:02:29.6842232Z   #processed?
2024-03-10T15:02:29.6843198Z     when the account request has no associated organization
2024-03-10T15:02:29.6939767Z       should return false
2024-03-10T15:02:29.6940673Z     when the account request has a associated organization
2024-03-10T15:02:29.8744191Z       should return true
2024-03-10T15:02:29.8744982Z   validations
2024-03-10T15:02:29.8860664Z     is expected not to allow :email to be â€¹"not_email"â€º
2024-03-10T15:02:29.8994995Z     is expected to validate that :email is case-sensitively unique
2024-03-10T15:02:29.9116595Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-10T15:02:29.9236805Z     is expected to validate that the length of :request_details is at least 50
2024-03-10T15:02:29.9377505Z     is expected to validate that :email cannot be empty/falsy
2024-03-10T15:02:29.9514100Z     is expected to validate that :name cannot be empty/falsy
2024-03-10T15:02:29.9617948Z     is expected to allow :email to be â€¹"farrah@dickinson.example"â€º
2024-03-10T15:02:29.9618873Z     when the email provided is already used by an existing user
2024-03-10T15:02:29.9812442Z       should not allow the email
2024-03-10T15:02:29.9813497Z     when the email provided is already used by an existing organization
2024-03-10T15:02:30.1566861Z       should not allow the email
2024-03-10T15:02:30.1567543Z 
2024-03-10T15:02:30.1567794Z InventoryItem
2024-03-10T15:02:30.1604794Z   initializes the quantity to 0 if it was not specified
2024-03-10T15:02:30.1606032Z   versioning
2024-03-10T15:02:30.1640235Z     is expected to be versioned
2024-03-10T15:02:30.1641015Z   Filtering >
2024-03-10T15:02:30.1641970Z     ->by_partner_key
2024-03-10T15:02:30.1771562Z       shows the Base Items by partner_key
2024-03-10T15:02:30.1772396Z   Validations >
2024-03-10T15:02:30.1820398Z     requires an inventory association
2024-03-10T15:02:30.2071789Z     requires an item
2024-03-10T15:02:30.2073098Z     quantity >
2024-03-10T15:02:30.2134622Z       is less than the max integer
2024-03-10T15:02:30.2194840Z       is required
2024-03-10T15:02:30.2250045Z       is numerical
2024-03-10T15:02:30.2394242Z       is gte 0
2024-03-10T15:02:30.2395803Z 
2024-03-10T15:02:30.2396270Z Organization
2024-03-10T15:02:30.2401149Z   after_create
2024-03-10T15:02:30.2603900Z     should update the state of the account request
2024-03-10T15:02:30.2604949Z   address
2024-03-10T15:02:30.2645033Z     does not add any separators after street when city, state, and zip are missing
2024-03-10T15:02:30.2681928Z     correctly formats an address string with commas and spaces
2024-03-10T15:02:30.2714382Z     does not add a trailing space when the zip code is missing
2024-03-10T15:02:30.2749548Z     returns an empty string when the org has no address components
2024-03-10T15:02:30.2784368Z     does not add any separators before the city when street is missing
2024-03-10T15:02:30.2785534Z   #seed_items
2024-03-10T15:02:30.4613555Z     allows a single base item to be seeded
2024-03-10T15:02:30.6510355Z     allows a collection of items to be seeded
2024-03-10T15:02:30.6511238Z     when given an item that already exists
2024-03-10T15:02:30.8393205Z       gracefully skips the item
2024-03-10T15:02:30.8394195Z     when given an item name that already exists, but with an 'other' partner key
2024-03-10T15:02:31.0350094Z       updates the old item to use the new base item as its base
2024-03-10T15:02:31.0350788Z   deadline_day
2024-03-10T15:02:31.0461688Z     can only contain numbers 1-28
2024-03-10T15:02:31.0462747Z   validations
2024-03-10T15:02:31.0537186Z     validates that attachment file size is not higher than 1 MB
2024-03-10T15:02:31.2387813Z     validates that short names are unique
2024-03-10T15:02:31.2491756Z     validates that at least one distribution type is enabled
2024-03-10T15:02:31.2565183Z     validates that attachments are png or jpgs
2024-03-10T15:02:31.2566214Z   .seed_items
2024-03-10T15:02:31.2566796Z     when no organization is provided
2024-03-10T15:02:31.8818558Z       updates all organizations
2024-03-10T15:02:31.8819400Z     when provided with an organization to seed
2024-03-10T15:02:32.2184351Z       loads the base items into Item records
2024-03-10T15:02:32.2185159Z   is_active
2024-03-10T15:02:32.5868446Z     returns active organizations
2024-03-10T15:02:32.5869286Z   total_inventory
2024-03-10T15:02:32.7635054Z     returns 0 if there is nothing
2024-03-10T15:02:33.0156083Z     returns a sum total of all inventory at all storage locations
2024-03-10T15:02:33.0157074Z   versioning
2024-03-10T15:02:33.0194830Z     is expected to be versioned
2024-03-10T15:02:33.0195503Z   valid_items
2024-03-10T15:02:33.2003644Z     returns an array of item partner keys
2024-03-10T15:02:33.3764927Z     only shows active valid items
2024-03-10T15:02:33.3765591Z     with invisible items
2024-03-10T15:02:33.4057970Z       only shows active and visible items
2024-03-10T15:02:33.4058675Z   from_email
2024-03-10T15:02:33.5926730Z     returns admin email when it's empty space
2024-03-10T15:02:33.7932532Z     returns admin email when not present
2024-03-10T15:02:33.9676018Z     returns email when present
2024-03-10T15:02:34.1622229Z     returns admin email when it's empty
2024-03-10T15:02:34.1623111Z   default storage location
2024-03-10T15:02:34.1665557Z     returns nil when not set
2024-03-10T15:02:34.1710920Z     associates the default storage location with a storage location
2024-03-10T15:02:34.1711967Z   geocode
2024-03-10T15:02:34.3444641Z     adds coordinates to the database
2024-03-10T15:02:34.3445358Z   #ordered_requests
2024-03-10T15:02:34.5447115Z     puts active requests before fulfilled requests
2024-03-10T15:02:34.5448106Z     ordering of requests with matching status
2024-03-10T15:02:34.7403474Z       puts the most recently updated request before older requests
2024-03-10T15:02:34.7404145Z   earliest reporting year
2024-03-10T15:02:34.9472931Z     is the organization created year if no associated data
2024-03-10T15:02:35.2078373Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-10T15:02:35.2079816Z   Associations >
2024-03-10T15:02:35.2133286Z     is expected to have many item_categories
2024-03-10T15:02:35.2178105Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-10T15:02:35.2211879Z     is expected to have many users through roles
2024-03-10T15:02:35.2212764Z     barcode_items
2024-03-10T15:02:35.4105323Z       returns only this organization's barcodes, no globals
2024-03-10T15:02:35.4106554Z       .all
2024-03-10T15:02:35.6031036Z         includes global barcode items also
2024-03-10T15:02:35.6031665Z     users
2024-03-10T15:02:35.6032430Z       when a organizaton has a user that has two roles
2024-03-10T15:02:35.8139555Z         should returns users without duplications
2024-03-10T15:02:35.8140770Z     distributions
2024-03-10T15:02:35.8141343Z       upcoming
2024-03-10T15:02:35.8913405Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-10T15:02:35.8914298Z     items
2024-03-10T15:02:35.8914659Z       .during
2024-03-10T15:02:37.8653058Z         return ranking of all items
2024-03-10T15:02:37.8653778Z       .during.top
2024-03-10T15:02:39.8293004Z         return 3 most used items
2024-03-10T15:02:41.7684715Z         return just 3 elements
2024-03-10T15:02:41.7685540Z       .during.bottom
2024-03-10T15:02:43.7496707Z         return just 3 elements
2024-03-10T15:02:45.7057287Z         return 3 least used items
2024-03-10T15:02:45.7058147Z       .other
2024-03-10T15:02:47.6963478Z         returns all items for this organization designated 'other'
2024-03-10T15:02:47.6964468Z   #short_name
2024-03-10T15:02:47.7042040Z     can only contain valid characters
2024-03-10T15:02:47.7042817Z   reminder_day
2024-03-10T15:02:47.7159388Z     can only contain numbers 1-28
2024-03-10T15:02:47.7160246Z   #assign_attributes_from_account_request
2024-03-10T15:02:47.7251590Z     should assign the proper attributes to the organization
2024-03-10T15:02:47.7254380Z 
2024-03-10T15:02:47.7255051Z Reports::AdultIncontinenceReportService
2024-03-10T15:02:47.7255856Z   #report
2024-03-10T15:02:47.9117355Z     should report zero values
2024-03-10T15:02:47.9118326Z     with values
2024-03-10T15:02:48.5190664Z       should handle null distribution quantity
2024-03-10T15:02:49.1388268Z       should report normal values
2024-03-10T15:02:49.1389090Z 
2024-03-10T15:02:49.1389336Z BaseItem
2024-03-10T15:02:49.1390847Z   Filtering >
2024-03-10T15:02:49.1391764Z     ->without_kit
2024-03-10T15:02:49.1447436Z       should not include the Kit BaseItem
2024-03-10T15:02:49.1448536Z     ->by_partner_key
2024-03-10T15:02:49.1499169Z       shows the Base Items by partner_key
2024-03-10T15:02:49.1500032Z   Associations >
2024-03-10T15:02:49.1625403Z     keeps count of its associated items
2024-03-10T15:02:49.1626244Z   versioning
2024-03-10T15:02:49.1660228Z     is expected to be versioned
2024-03-10T15:02:49.1661160Z   Validations >
2024-03-10T15:02:49.1731406Z     is invalid without a unique name
2024-03-10T15:02:49.1776688Z     is invalid without a name
2024-03-10T15:02:49.1821589Z     is invalid without a partner key
2024-03-10T15:02:49.1888007Z     is invalid without a uniqueness key
2024-03-10T15:02:49.1888905Z 
2024-03-10T15:02:49.1889387Z PartnerGroup
2024-03-10T15:02:49.1892540Z   DB constraints
2024-03-10T15:02:49.1893789Z     send_reminders IS NOT NULL
2024-03-10T15:02:49.2027850Z       raises error if unmet
2024-03-10T15:02:49.2028589Z     reminder_day <= 28
2024-03-10T15:02:49.2099346Z       raises error if unmet
2024-03-10T15:02:49.2100052Z     deadline_day <= 28
2024-03-10T15:02:49.2167642Z       raises error if unmet
2024-03-10T15:02:49.2168538Z   Validations >
2024-03-10T15:02:49.2213386Z     must belong to an organization
2024-03-10T15:02:49.2303083Z     requires a unique name within an organization
2024-03-10T15:02:49.2540757Z     does not require a unique name between organizations
2024-03-10T15:02:49.2541944Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-10T15:02:49.2592254Z       should not be valid
2024-03-10T15:02:49.2592949Z   associations
2024-03-10T15:02:49.2643202Z     is expected to belong to organization required: true
2024-03-10T15:02:49.2676936Z     is expected to have many partners
2024-03-10T15:02:49.2741798Z     is expected to have and belong to many item_categories
2024-03-10T15:02:49.2742925Z   versioning
2024-03-10T15:02:49.2780897Z     is expected to be versioned
2024-03-10T15:02:49.2781792Z 
2024-03-10T15:02:49.2782193Z Partners::RequestCreateService
2024-03-10T15:02:49.2783268Z   #call
2024-03-10T15:02:49.2784259Z     when the arguments are incorrect
2024-03-10T15:02:49.2785476Z       because no item_requests_attributes and comments were defined
2024-03-10T15:02:49.3139640Z         should return the Request object with an error
2024-03-10T15:02:49.3140313Z       because a unrecogonized item_id was provided
2024-03-10T15:02:49.3496799Z         should return the Request object with an error
2024-03-10T15:02:49.3497840Z     when the arguments are correct
2024-03-10T15:02:49.3883896Z       should have no errors
2024-03-10T15:02:49.4285924Z       should notify the Partner via email
2024-03-10T15:02:49.4667079Z       should create a Request record
2024-03-10T15:02:49.4667945Z       but a unexpected error occured during the save
2024-03-10T15:02:49.4668927Z         for the Request record
2024-03-10T15:02:49.5023128Z           should NOT notify the Partner via email
2024-03-10T15:02:49.5366501Z           should have an error with the raised error
2024-03-10T15:02:49.5718008Z           should NOT create a Request record
2024-03-10T15:02:49.5719828Z 
2024-03-10T15:02:49.5720093Z DistributionReminder
2024-03-10T15:02:49.5721085Z   conditionally sending the emails
2024-03-10T15:02:49.6011694Z     does not send mail for past distributions
2024-03-10T15:02:49.6315058Z     sends mail for future distributions
2024-03-10T15:02:49.6601873Z     sends mail for future distributions where the partner wants reminders
2024-03-10T15:02:49.6880087Z     does not send mail for future distributions if the partner wants no reminders
2024-03-10T15:02:49.6880980Z     when the distribution_id does not match any Distribution
2024-03-10T15:02:49.6925524Z       does not send mail for non existent distributions
2024-03-10T15:02:49.6926280Z     when the partner is deactivated
2024-03-10T15:02:49.7211484Z       does not send mail
2024-03-10T15:02:49.7212273Z 
2024-03-10T15:02:49.7212566Z AllocateKitInventoryService
2024-03-10T15:02:49.7213601Z   #error
2024-03-10T15:02:49.7214602Z     when the Store location organization doesn't match
2024-03-10T15:02:49.9589026Z       returns error
2024-03-10T15:02:49.9590055Z   #allocate
2024-03-10T15:02:49.9590706Z     when more than one kit is requested
2024-03-10T15:02:49.9591666Z       but one of the items is out of stock
2024-03-10T15:02:50.2351049Z         returns error and does not change kit or item quantity
2024-03-10T15:02:50.2352928Z     when inventory items are available
2024-03-10T15:02:50.5036069Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-10T15:02:50.5036944Z       When kit is allocated more then once
2024-03-10T15:02:50.7933613Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-10T15:02:50.7934641Z       when there are more then one line items
2024-03-10T15:02:50.7935430Z         when there kit is allocated once
2024-03-10T15:02:51.1015470Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-10T15:02:51.1016898Z         when same kit is allocated multiple times
2024-03-10T15:02:51.5264988Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-10T15:02:51.5265780Z 
2024-03-10T15:02:51.5266043Z DeallocateKitInventoryService
2024-03-10T15:02:51.5267469Z   #deallocate
2024-03-10T15:02:51.5268337Z     when inventory items are available
2024-03-10T15:02:51.5270213Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-10T15:02:51.8488491Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-10T15:02:51.8490514Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-10T15:02:52.1442115Z         raises error about inconsistent inventory in or out
2024-03-10T15:02:52.1443212Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-10T15:02:52.4853470Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-10T15:02:52.4855197Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-10T15:02:52.7727390Z         raises error about KitAllocation not found
2024-03-10T15:02:52.7728278Z   #error
2024-03-10T15:02:52.7729403Z     when the storage location organization doesn't match
2024-03-10T15:02:53.0111873Z       returns error
2024-03-10T15:02:53.0112453Z 
2024-03-10T15:02:53.0112960Z Audit
2024-03-10T15:02:53.0114286Z   Methods >
2024-03-10T15:02:53.2713494Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-10T15:02:53.6443847Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-10T15:02:53.6445770Z   versioning
2024-03-10T15:02:53.6484502Z     is expected to be versioned
2024-03-10T15:02:53.6485238Z   Scopes >
2024-03-10T15:02:53.6971325Z     `at_location` can filter out audits to a specific location
2024-03-10T15:02:53.6972358Z   behaves like itemizable
2024-03-10T15:02:53.6972989Z     .to_a
2024-03-10T15:02:53.6973825Z       with Flipper flag :deprecate_to_a enabled
2024-03-10T15:02:53.7518800Z         raises an error
2024-03-10T15:02:53.7519680Z       with Flipper flag :deprecate_to_a disabled
2024-03-10T15:02:53.8070139Z         calls line_item_values
2024-03-10T15:02:53.8070940Z     .line_items
2024-03-10T15:02:53.8071566Z       sorted
2024-03-10T15:02:53.9341695Z         displays the items, sorted by name
2024-03-10T15:02:53.9342628Z       quantities_by_name
2024-03-10T15:02:54.0298830Z         leaves out zero-quantitied items if requested
2024-03-10T15:02:54.1215051Z         returns a hash of items with id, name, and quantity
2024-03-10T15:02:54.1215985Z       combine!
2024-03-10T15:02:54.1653683Z         incrementally combines line_items on donations that have already been created
2024-03-10T15:02:54.2294635Z         combines multiple line_items with the same item_id into a single record
2024-03-10T15:02:54.2295594Z       total
2024-03-10T15:02:54.3194664Z         has an item total
2024-03-10T15:02:54.3195451Z   Validations >
2024-03-10T15:02:54.3507957Z     must belong to an organization
2024-03-10T15:02:54.4098969Z     can have line items that has quantity as zero
2024-03-10T15:02:54.4697756Z     cannot have duplicate line items
2024-03-10T15:02:54.5280312Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-10T15:02:54.5848531Z     can not have line items that has quantity as negative integer
2024-03-10T15:02:54.6443260Z     can have line items that has quantity as a positive integer
2024-03-10T15:02:54.6555127Z     must belong to an organization admin of its organization
2024-03-10T15:02:54.6555839Z 
2024-03-10T15:02:54.6556089Z AccountRequestsController
2024-03-10T15:02:54.6557141Z   routing
2024-03-10T15:02:54.6601831Z     routes to #create
2024-03-10T15:02:54.6639664Z     routes to #new
2024-03-10T15:02:54.6640225Z 
2024-03-10T15:02:54.6640571Z RequestMailer
2024-03-10T15:02:54.6641641Z   #request_cancel_partner_notification
2024-03-10T15:02:54.6844328Z     renders the body with correct text with partner information
2024-03-10T15:02:54.7002900Z     should be sent to the partner main email with the correct subject line
2024-03-10T15:02:54.7003744Z 
2024-03-10T15:02:54.7004295Z StorageLocation
2024-03-10T15:02:54.7005212Z   Callbacks >
2024-03-10T15:02:54.7006097Z     before_destroy
2024-03-10T15:02:54.7640644Z       deletes storage locations with no inventory items on it
2024-03-10T15:02:54.8031270Z       does not delete storage locations with inventory items on it
2024-03-10T15:02:54.8032532Z   Methods >
2024-03-10T15:02:54.8033101Z     inventory_total_value_in_dollars
2024-03-10T15:02:54.8158269Z       returns 0 when there are no items in this storage location
2024-03-10T15:02:54.8745343Z       returns total value of all items in this storage location
2024-03-10T15:02:54.9167853Z       returns a value including cents if the total isn't an even dollar amount
2024-03-10T15:02:54.9168882Z     decrease_inventory
2024-03-10T15:02:55.0284411Z       decreases inventory quantities from an itemizable object
2024-03-10T15:02:55.0285486Z       when there is insufficient inventory available
2024-03-10T15:02:55.0379566Z         does not change inventory quantities if there is an error
2024-03-10T15:02:55.0466165Z         gives informative errors
2024-03-10T15:02:55.0467135Z     size
2024-03-10T15:02:55.0975247Z       returns total quantity of all items in this storage location
2024-03-10T15:02:55.0976265Z     item_total
2024-03-10T15:02:55.1377105Z       retrieves the total for a single item
2024-03-10T15:02:55.1378201Z     geocode
2024-03-10T15:02:55.1499730Z       adds coordinates to the database
2024-03-10T15:02:55.1500427Z     import_csv
2024-03-10T15:02:55.1641647Z       imports storage locations from a csv file
2024-03-10T15:02:55.1642397Z     import_inventory
2024-03-10T15:02:55.4720661Z       imports storage locations from a csv file
2024-03-10T15:02:55.4721540Z     csv_export_attributes
2024-03-10T15:02:55.5433439Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-10T15:02:55.5434969Z     StorageLocation.items_inventoried
2024-03-10T15:02:55.6344702Z       returns a collection of items that are stored within inventories
2024-03-10T15:02:55.6346079Z     increase_inventory
2024-03-10T15:02:55.6347105Z       With existing inventory
2024-03-10T15:02:55.7533362Z         increases inventory quantities from an itemizable object
2024-03-10T15:02:55.7534462Z       when providing a new item that does not yet exist
2024-03-10T15:02:55.8661697Z         creates those new inventory items in the storage location
2024-03-10T15:02:55.8662489Z   Filtering >
2024-03-10T15:02:55.9507704Z     ->containing yields only inventories that have that item
2024-03-10T15:02:55.9607598Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-10T15:02:55.9608710Z   versioning
2024-03-10T15:02:55.9645035Z     is expected to be versioned
2024-03-10T15:02:55.9645854Z   Validations >
2024-03-10T15:02:55.9709162Z     is expected to validate that :name cannot be empty/falsy
2024-03-10T15:02:55.9768605Z     is expected to validate that :address cannot be empty/falsy
2024-03-10T15:02:55.9822975Z     is expected to validate that :organization cannot be empty/falsy
2024-03-10T15:02:55.9823859Z 
2024-03-10T15:02:55.9824180Z DistributionPdf
2024-03-10T15:02:56.0447725Z   #non_request_data
2024-03-10T15:02:56.1118449Z   #request_data
2024-03-10T15:02:56.1118934Z 
2024-03-10T15:02:56.1119201Z Partners::ChildItemRequest
2024-03-10T15:02:56.1120550Z   associations
2024-03-10T15:02:56.1230508Z     is expected to belong to child required: true
2024-03-10T15:02:56.1269904Z     is expected to belong to item_request required: true
2024-03-10T15:02:56.1305301Z     is expected to belong to authorized_family_member optional: true
2024-03-10T15:02:56.1306309Z   versioning
2024-03-10T15:02:56.1339927Z     is expected to be versioned
2024-03-10T15:02:56.1340854Z   #ordered_item_diaperid
2024-03-10T15:02:56.1400321Z     should return the item_id on the item_request
2024-03-10T15:02:56.1401351Z   #quantity
2024-03-10T15:02:56.1439596Z     should return the quantity divided by the number of children
2024-03-10T15:02:56.1440307Z 
2024-03-10T15:02:56.1440661Z DonationItemizedBreakdownService
2024-03-10T15:02:56.1441941Z   #fetch
2024-03-10T15:02:56.5387562Z     return the list of items donated with distributed
2024-03-10T15:02:56.5388615Z 
2024-03-10T15:02:56.5388883Z DistributionUpdateService
2024-03-10T15:02:56.5389426Z   resend_notification?
2024-03-10T15:02:56.6302791Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-10T15:02:56.7256426Z     changes any distribution content, resulting in resend_notification? = true
2024-03-10T15:02:56.8180825Z     changes the issue_date, resulting in resend_notification? = true
2024-03-10T15:02:56.8181725Z   call
2024-03-10T15:02:56.9190359Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-10T15:02:56.9191305Z 
2024-03-10T15:02:56.9191769Z Partners::ItemRequest
2024-03-10T15:02:56.9192425Z   validations
2024-03-10T15:02:56.9262243Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-10T15:02:56.9323277Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-10T15:02:56.9382695Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-10T15:02:56.9440228Z     is expected to validate that :name cannot be empty/falsy
2024-03-10T15:02:56.9441167Z   versioning
2024-03-10T15:02:56.9477295Z     is expected to be versioned
2024-03-10T15:02:56.9478361Z   associations
2024-03-10T15:02:56.9515823Z     is expected to have many child_item_requests dependent => destroy
2024-03-10T15:02:56.9550564Z     is expected to have many children through child_item_requests
2024-03-10T15:02:56.9592181Z     is expected to belong to request class_name => ::Request required: true
2024-03-10T15:02:56.9592960Z 
2024-03-10T15:02:56.9593305Z Exports::ExportReportCSVService
2024-03-10T15:02:56.9594061Z   .generate_csv_data
2024-03-10T15:02:56.9630830Z     creates a CSV string
2024-03-10T15:02:56.9664475Z     creates CSV data including headers
2024-03-10T15:02:56.9665034Z 
2024-03-10T15:02:56.9665285Z ReminderDeadlineMailer
2024-03-10T15:02:56.9666601Z   notify deadline
2024-03-10T15:02:56.9976240Z     renders the body
2024-03-10T15:02:57.0289112Z     renders the sender email
2024-03-10T15:02:57.0579936Z     renders the subject
2024-03-10T15:02:57.0872873Z     renders the receiver email
2024-03-10T15:02:57.0873728Z 
2024-03-10T15:02:57.0874051Z Partners::Family
2024-03-10T15:02:57.0875600Z   #create_authorized
2024-03-10T15:02:57.1372172Z     should include authorized family members
2024-03-10T15:02:57.1373086Z   #guardian_display_name
2024-03-10T15:02:57.1434184Z     should return the guardian's first and last name
2024-03-10T15:02:57.1435257Z   associations
2024-03-10T15:02:57.1479719Z     is expected to belong to partner required: true
2024-03-10T15:02:57.1514747Z     is expected to have many authorized_family_members dependent => destroy
2024-03-10T15:02:57.1571244Z     is expected to have many children dependent => destroy
2024-03-10T15:02:57.1572223Z   #search_non_archived
2024-03-10T15:02:57.2550044Z     should return non-archived families if zero is passed in
2024-03-10T15:02:57.3509989Z     should return all families if one is passed in
2024-03-10T15:02:57.3510891Z   #total_children_count
2024-03-10T15:02:57.3563407Z     should return the family's total children count
2024-03-10T15:02:57.3564154Z   validations
2024-03-10T15:02:57.3644115Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-10T15:02:57.3719682Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-10T15:02:57.3797857Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-10T15:02:57.3799248Z   versioning
2024-03-10T15:02:57.3833839Z     is expected to be versioned
2024-03-10T15:02:57.3834519Z 
2024-03-10T15:02:57.3834735Z ItemsInQuery
2024-03-10T15:02:57.3835800Z   items_in
2024-03-10T15:02:57.6489225Z     includes donations, purchases, adjustments, transfers among sources
2024-03-10T15:02:57.9251447Z     returns a collection with the fields name, item_id, quantity
2024-03-10T15:02:58.2790689Z     does not count negative adjustments towards in-flow
2024-03-10T15:02:58.6279165Z     does not count transfers going in the negative direction
2024-03-10T15:02:58.6279877Z 
2024-03-10T15:02:58.6280253Z Exports::ExportDonationsCSVService
2024-03-10T15:02:58.6281213Z   #generate_csv_data
2024-03-10T15:02:58.7579365Z     should match the expected content for the csv
2024-03-10T15:02:58.7579918Z 
2024-03-10T15:02:58.7580531Z ItemCreateService
2024-03-10T15:02:58.7581032Z   #call
2024-03-10T15:02:58.7581547Z     when an issue occurs in transaction
2024-03-10T15:02:58.7582651Z       because a inventory item creation failed and raised an error
2024-03-10T15:02:58.9432070Z         should return a OpenStruct with the raised error
2024-03-10T15:02:58.9433023Z       because the organization_id does not match any Organization
2024-03-10T15:02:59.1205333Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-10T15:02:59.1206106Z       because the item create raised an error
2024-03-10T15:02:59.2925657Z         should return a OpenStruct with the raised error
2024-03-10T15:02:59.2926302Z     when there are no issues
2024-03-10T15:02:59.4761439Z       should return an OpenStruct with success? set to true and the item
2024-03-10T15:02:59.6508207Z       should execute the expected methods
2024-03-10T15:02:59.6509007Z 
2024-03-10T15:02:59.6509503Z RequestDestroyService
2024-03-10T15:02:59.6511343Z   #call
2024-03-10T15:02:59.6652101Z     should return an instance of itself
2024-03-10T15:02:59.6653063Z     when the request_id matches no request
2024-03-10T15:02:59.6698333Z       should not be successful and have errors indicating request id is invalid
2024-03-10T15:02:59.6699463Z     when the request is already discarded
2024-03-10T15:02:59.6810661Z       should not be successful and have errors
2024-03-10T15:02:59.6811705Z     when the request's partner is deactivated
2024-03-10T15:02:59.7098425Z       should have errors
2024-03-10T15:02:59.7098931Z     when there are no validation errors
2024-03-10T15:02:59.7238686Z       should update the discarded_at column on the request
2024-03-10T15:02:59.7368660Z       should send a email notification to the partner
2024-03-10T15:02:59.7503723Z       should update the status column on the request
2024-03-10T15:02:59.7504734Z 
2024-03-10T15:02:59.7505014Z DistributionCreateService
2024-03-10T15:02:59.7506193Z   call
2024-03-10T15:02:59.8266134Z     returns a successful object with Scheduled distribution
2024-03-10T15:02:59.9024008Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-10T15:02:59.9025552Z     when it fails to save
2024-03-10T15:02:59.9559607Z       preserves the error and is unsuccessful
2024-03-10T15:02:59.9560710Z     when there's not sufficient inventory
2024-03-10T15:03:00.0185983Z       preserves the Insufficiency error and is unsuccessful
2024-03-10T15:03:00.0187217Z     partner is deactivated
2024-03-10T15:03:00.1033517Z       does not send an email
2024-03-10T15:03:00.1034089Z     when provided with a request ID
2024-03-10T15:03:00.1881288Z       changes the status of the request
2024-03-10T15:03:00.1882300Z       and the request already has a distribution associated with it
2024-03-10T15:03:00.2654678Z         should not be successful
2024-03-10T15:03:00.2655648Z     partner has send reminders setting set to false
2024-03-10T15:03:00.3425411Z       does not send a PartnerMailer
2024-03-10T15:03:00.3426362Z     partner has send reminders setting set to true
2024-03-10T15:03:00.5315702Z       Sends a PartnerMailer
2024-03-10T15:03:00.5316549Z     when the line item quantity is not positive
2024-03-10T15:03:00.5849614Z       preserves the RecordInvalid error and is unsuccessful
2024-03-10T15:03:00.5850591Z     when there's multiple line items and one has insufficient inventory
2024-03-10T15:03:00.6524385Z       preserves the Insufficiency error and is unsuccessful
2024-03-10T15:03:00.6525248Z 
2024-03-10T15:03:00.6525455Z Manufacturer
2024-03-10T15:03:00.6526550Z   Validations
2024-03-10T15:03:00.6673553Z     must have a unique name within organization
2024-03-10T15:03:00.8422773Z     must belong to an organization
2024-03-10T15:03:00.8423942Z   Private Methods
2024-03-10T15:03:00.8424523Z     #exists_in_org?
2024-03-10T15:03:01.0230160Z       returns true if manufacturer exists in an organization
2024-03-10T15:03:01.0231428Z   versioning
2024-03-10T15:03:01.0269847Z     is expected to be versioned
2024-03-10T15:03:01.0271986Z   Methods
2024-03-10T15:03:01.0272777Z     volume
2024-03-10T15:03:01.0954120Z       retrieves the amount of product that has been donated by manufacturer
2024-03-10T15:03:01.2312414Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-10T15:03:01.3719782Z       ignores the amount of product from other manufacturers
2024-03-10T15:03:01.3720454Z 
2024-03-10T15:03:01.3720797Z DonationSitesController
2024-03-10T15:03:01.3721923Z   While not signed in
2024-03-10T15:03:01.3808233Z     redirects the user to the sign-in page for CRUD actions
2024-03-10T15:03:01.3809184Z   While signed in
2024-03-10T15:03:01.3809912Z     Looking at a different organization
2024-03-10T15:03:01.5560951Z       redirects the user to the sign-in page for CRUD actions
2024-03-10T15:03:01.5561845Z     DELETE #destroy
2024-03-10T15:03:01.5836021Z       returns http success
2024-03-10T15:03:01.5836799Z     GET #show
2024-03-10T15:03:01.5988959Z       returns http success
2024-03-10T15:03:01.5989684Z     GET #new
2024-03-10T15:03:01.6104613Z       returns http success
2024-03-10T15:03:01.6105428Z     GET #edit
2024-03-10T15:03:01.6251150Z       returns http success
2024-03-10T15:03:01.6252313Z     POST #import_csv
2024-03-10T15:03:01.6253101Z       behaves like csv import
2024-03-10T15:03:01.6253911Z         csv file with wrong headers
2024-03-10T15:03:01.6409279Z           redirects to :index
2024-03-10T15:03:01.6535117Z           presents a flash error message
2024-03-10T15:03:01.6536024Z         with a csv file
2024-03-10T15:03:01.6687255Z           redirects to :index
2024-03-10T15:03:01.6743615Z           invokes .import_csv
2024-03-10T15:03:01.6892656Z           presents a flash notice message
2024-03-10T15:03:01.6893688Z         without a csv file
2024-03-10T15:03:01.7008351Z           presents a flash error message
2024-03-10T15:03:01.7118047Z           redirects to :index
2024-03-10T15:03:01.7119539Z     GET #index
2024-03-10T15:03:01.7239700Z       returns http success
2024-03-10T15:03:01.7240306Z 
2024-03-10T15:03:01.7240543Z CalendarService
2024-03-10T15:03:02.0393517Z   #time_zones
2024-03-10T15:03:02.0394486Z   .calendar
2024-03-10T15:03:02.1070577Z     should print the calendar correctly
2024-03-10T15:03:02.1071283Z 
2024-03-10T15:03:02.1071566Z Reports::PartnerInfoReportService
2024-03-10T15:03:02.1072514Z   #report
2024-03-10T15:03:02.3548164Z     should report normal values
2024-03-10T15:03:02.5356572Z     should report zero values
2024-03-10T15:03:02.5357154Z 
2024-03-10T15:03:02.5357987Z DonationDestroyService
2024-03-10T15:03:02.5358722Z   #call
2024-03-10T15:03:02.5360418Z     when storage_location fails to decrease the inventory of the donation
2024-03-10T15:03:02.5418789Z       to not be a success
2024-03-10T15:03:02.5419689Z     when the donation succesfully gets destroyed
2024-03-10T15:03:02.5722869Z       to be a success
2024-03-10T15:03:02.5723660Z     when the organization_id matches no Organization
2024-03-10T15:03:02.5767771Z       to not be a success
2024-03-10T15:03:02.5768718Z     when the donation_id matches no Donation owned by the organization
2024-03-10T15:03:02.5810497Z       to not be a success
2024-03-10T15:03:02.5811092Z     when the donation destroy fails
2024-03-10T15:03:02.5862381Z       to not be a success
2024-03-10T15:03:02.5863333Z 
2024-03-10T15:03:02.5863646Z TextInterpolatorService
2024-03-10T15:03:02.5864568Z   #call
2024-03-10T15:03:02.5901631Z     returns interpolated text
2024-03-10T15:03:02.5902707Z     when interpolations are nil
2024-03-10T15:03:02.5941249Z       returns text
2024-03-10T15:03:02.5942643Z     when interpolations are not present
2024-03-10T15:03:02.5980608Z       returns text
2024-03-10T15:03:02.5983581Z     when text is nil
2024-03-10T15:03:02.6022261Z       returns nil
2024-03-10T15:03:02.6022979Z     when interpolations are empty
2024-03-10T15:03:02.6061300Z       returns text
2024-03-10T15:03:02.6061972Z     when text is empty
2024-03-10T15:03:02.6099651Z       returns empty string
2024-03-10T15:03:02.6100425Z 
2024-03-10T15:03:02.6101097Z BroadcastAnnouncement
2024-03-10T15:03:02.6238494Z   should validate a good link
2024-03-10T15:03:02.6312415Z   should roughly check if link is valid
2024-03-10T15:03:02.6362041Z   is expected to belong to organization optional: true
2024-03-10T15:03:02.6432299Z   should validate a valid announcement
2024-03-10T15:03:02.6497706Z   is expected to validate that :message cannot be empty/falsy
2024-03-10T15:03:02.6545504Z   is expected to belong to user required: true
2024-03-10T15:03:02.6546533Z   expired?
2024-03-10T15:03:02.6615477Z     should be false if the announcement has not expired
2024-03-10T15:03:02.6687336Z     should be true if the announcement is expired
2024-03-10T15:03:02.6688057Z   versioning
2024-03-10T15:03:02.6735681Z     is expected to be versioned
2024-03-10T15:03:02.6736310Z   filter_announcements
2024-03-10T15:03:02.6912807Z     shouldn't include expired announcements
2024-03-10T15:03:02.7074610Z     sorts announcements from most recently created to last
2024-03-10T15:03:02.7221071Z     should include only announcements from the passed organization
2024-03-10T15:03:02.7221842Z 
2024-03-10T15:03:02.7222083Z Question
2024-03-10T15:03:02.7222649Z   remove_redundant_error
2024-03-10T15:03:02.7329643Z     should return an array with only one error message related to the checkboxes.
2024-03-10T15:03:02.7331099Z   versioning
2024-03-10T15:03:02.7375012Z     is expected to be versioned
2024-03-10T15:03:02.7376008Z   scope for_partners
2024-03-10T15:03:02.7717207Z     should filter out questions that aren't meant for partners
2024-03-10T15:03:02.7718491Z   scope for_banks
2024-03-10T15:03:02.7984370Z     should filter out questions that aren't meant for banks
2024-03-10T15:03:02.7985051Z   punctuate
2024-03-10T15:03:02.8034920Z     should punctuate each string in a given array
2024-03-10T15:03:02.8036966Z   validations
2024-03-10T15:03:02.8148879Z     question for_banks and for_partners attributes can't both be false
2024-03-10T15:03:02.8228323Z     is expected to validate that :title cannot be empty/falsy
2024-03-10T15:03:02.8301042Z     is expected to validate that :answer cannot be empty/falsy
2024-03-10T15:03:02.8301863Z 
2024-03-10T15:03:02.8302092Z ItemCategory
2024-03-10T15:03:02.8303008Z   assocations
2024-03-10T15:03:02.8384774Z     is expected to have many items
2024-03-10T15:03:02.8452274Z     is expected to belong to organization required: true
2024-03-10T15:03:02.8520400Z     is expected to have and belong to many partner_groups
2024-03-10T15:03:02.8521337Z   versioning
2024-03-10T15:03:02.8567000Z     is expected to be versioned
2024-03-10T15:03:02.8567789Z   validations
2024-03-10T15:03:02.8667771Z     is expected to validate that :organization cannot be empty/falsy
2024-03-10T15:03:02.8767221Z     is expected to validate that :name cannot be empty/falsy
2024-03-10T15:03:02.8980874Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-10T15:03:02.9053923Z     is expected to validate that the length of :description is at most 250
2024-03-10T15:03:02.9055028Z 
2024-03-10T15:03:02.9055252Z Adjustment
2024-03-10T15:03:02.9057018Z   Validations >
2024-03-10T15:03:02.9143771Z     must belong to an organization
2024-03-10T15:03:02.9573027Z     allows you to remove all the inventory that exists in the storage location
2024-03-10T15:03:02.9744937Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-10T15:03:02.9745906Z   Scopes >
2024-03-10T15:03:02.9916040Z     `at_location` can filter out adjustments to a specific location
2024-03-10T15:03:03.0075364Z     `by_user` can filter out adjustments to a specific user
2024-03-10T15:03:03.0076637Z   nested line item attributes
2024-03-10T15:03:03.0490863Z     accepts them
2024-03-10T15:03:03.0491711Z   Methods >
2024-03-10T15:03:03.2697151Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-10T15:03:03.2698545Z     split_difference
2024-03-10T15:03:03.3484409Z       gracefully handles adjustments with only positive
2024-03-10T15:03:03.4301872Z       gracefully handles adjustments with only negative
2024-03-10T15:03:03.5131045Z       returns two adjustment objects
2024-03-10T15:03:03.5131876Z   versioning
2024-03-10T15:03:03.5173260Z     is expected to be versioned
2024-03-10T15:03:03.5173977Z   behaves like itemizable
2024-03-10T15:03:03.5174820Z     .line_items
2024-03-10T15:03:03.5175822Z       quantities_by_name
2024-03-10T15:03:03.5613725Z         leaves out zero-quantitied items if requested
2024-03-10T15:03:03.6032384Z         returns a hash of items with id, name, and quantity
2024-03-10T15:03:03.6033307Z       sorted
2024-03-10T15:03:03.6644254Z         displays the items, sorted by name
2024-03-10T15:03:03.6645303Z       total
2024-03-10T15:03:03.7067823Z         has an item total
2024-03-10T15:03:03.7068780Z       combine!
2024-03-10T15:03:03.7563445Z         incrementally combines line_items on donations that have already been created
2024-03-10T15:03:03.7994181Z         combines multiple line_items with the same item_id into a single record
2024-03-10T15:03:03.7995563Z     .to_a
2024-03-10T15:03:03.7996217Z       with Flipper flag :deprecate_to_a disabled
2024-03-10T15:03:03.8362090Z         calls line_item_values
2024-03-10T15:03:03.8363143Z       with Flipper flag :deprecate_to_a enabled
2024-03-10T15:03:03.8736877Z         raises an error
2024-03-10T15:03:03.8737387Z 
2024-03-10T15:03:03.8738000Z ReminderDeadlineJob
2024-03-10T15:03:03.8738763Z   #perform
2024-03-10T15:03:03.8985284Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-10T15:03:03.8986321Z 
2024-03-10T15:03:03.8987091Z Purchase
2024-03-10T15:03:03.8988285Z   Scopes >
2024-03-10T15:03:03.8989213Z     during >
2024-03-10T15:03:03.9249065Z       returns all purchases created between two dates
2024-03-10T15:03:03.9249963Z   Validations >
2024-03-10T15:03:03.9345884Z     is not valid if categories do not add up
2024-03-10T15:03:03.9530657Z     is invalid when the line items are invalid
2024-03-10T15:03:03.9622908Z     is valid if all categories add up to total
2024-03-10T15:03:03.9797931Z     is not valid if any category is non-zero but does not add up to the total
2024-03-10T15:03:03.9877205Z     must belong to an organization
2024-03-10T15:03:03.9951864Z     requires an inventory (storage location)
2024-03-10T15:03:04.0033103Z     is valid if categories have no values
2024-03-10T15:03:04.0118558Z     is not valid if period supplies is non-zero but no other category is
2024-03-10T15:03:04.0204754Z     ensures that the issued at is no earlier than 2000
2024-03-10T15:03:04.0205698Z   versioning
2024-03-10T15:03:04.0240698Z     is expected to be versioned
2024-03-10T15:03:04.0242587Z   Methods >
2024-03-10T15:03:04.0243186Z     storage_view
2024-03-10T15:03:04.0891442Z       returns name of storage location
2024-03-10T15:03:04.0892542Z     remove
2024-03-10T15:03:04.1613147Z       fails gracefully if the item doesn't exist
2024-03-10T15:03:04.2283955Z       removes the item from the purchase
2024-03-10T15:03:04.2284835Z   behaves like itemizable
2024-03-10T15:03:04.2285662Z     .line_items
2024-03-10T15:03:04.2286206Z       combine!
2024-03-10T15:03:04.2724613Z         combines multiple line_items with the same item_id into a single record
2024-03-10T15:03:04.3294313Z         incrementally combines line_items on donations that have already been created
2024-03-10T15:03:04.3295710Z       sorted
2024-03-10T15:03:04.3937010Z         displays the items, sorted by name
2024-03-10T15:03:04.3938189Z       quantities_by_name
2024-03-10T15:03:04.4406945Z         leaves out zero-quantitied items if requested
2024-03-10T15:03:04.4836362Z         returns a hash of items with id, name, and quantity
2024-03-10T15:03:04.4837563Z       total
2024-03-10T15:03:04.5300540Z         has an item total
2024-03-10T15:03:04.5301537Z     .to_a
2024-03-10T15:03:04.5302103Z       with Flipper flag :deprecate_to_a enabled
2024-03-10T15:03:04.5712316Z         raises an error
2024-03-10T15:03:04.5713452Z       with Flipper flag :deprecate_to_a disabled
2024-03-10T15:03:04.6112280Z         calls line_item_values
2024-03-10T15:03:04.6113031Z   Callbacks >
2024-03-10T15:03:04.6326447Z     automatically combines duplicate line_item records when they're created
2024-03-10T15:03:04.6519161Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-10T15:03:04.6520152Z   Associations >
2024-03-10T15:03:04.6520542Z     items >
2024-03-10T15:03:04.6731190Z       has_many
2024-03-10T15:03:04.6731777Z 
2024-03-10T15:03:04.6732504Z Partners::RequestApprovalService
2024-03-10T15:03:04.6733253Z   #call
2024-03-10T15:03:04.6734405Z     when the partner is already awaiting approval
2024-03-10T15:03:04.7039247Z       should return an error saying it the partner is already requested approval
2024-03-10T15:03:04.7040131Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-10T15:03:04.7041991Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-10T15:03:04.7343411Z       should return an error re social media
2024-03-10T15:03:04.7344717Z     when the partner is not yet awaiting approval
2024-03-10T15:03:04.7688560Z       should set the status on the partner record to awaiting_review
2024-03-10T15:03:04.8008189Z       should send an email notification to the partner's organization
2024-03-10T15:03:04.8009326Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-10T15:03:04.8328628Z       does not have an error
2024-03-10T15:03:04.8329289Z 
2024-03-10T15:03:04.8329762Z PartnerProfileUpdateService
2024-03-10T15:03:04.8330697Z   #call
2024-03-10T15:03:04.8332154Z     when served area client shares pre-exist
2024-03-10T15:03:04.8333295Z       and the new values are incorrect
2024-03-10T15:03:04.8752669Z         maintains the old values and returns failure
2024-03-10T15:03:04.8753672Z       and the new values are correct
2024-03-10T15:03:04.8754637Z         and there are errors on the profile
2024-03-10T15:03:04.9076811Z           maintains the old values and returns failure
2024-03-10T15:03:04.9077826Z         and there are no other errors
2024-03-10T15:03:04.9407224Z           replaces the old values and returns success
2024-03-10T15:03:04.9408493Z     when there are no pre-existing served areas
2024-03-10T15:03:04.9409248Z       and the new values are incorrect
2024-03-10T15:03:04.9612199Z 0
2024-03-10T15:03:04.9624424Z         does not store the new values and returns a failure
2024-03-10T15:03:04.9625253Z       and the new values are correct
2024-03-10T15:03:04.9854581Z         stores the new values and returns success
2024-03-10T15:03:04.9855310Z         and there are other errors in the profile
2024-03-10T15:03:05.0066601Z           does not store the new values and it returns a failure
2024-03-10T15:03:05.0067838Z 
2024-03-10T15:03:05.0068096Z DeadlineService
2024-03-10T15:03:05.0069168Z   #next_deadline
2024-03-10T15:03:05.0070099Z     from the organization
2024-03-10T15:03:05.0071003Z       when the deadline is today
2024-03-10T15:03:05.0139523Z         returns a date in the next month
2024-03-10T15:03:05.0140578Z       when the deadline is after today
2024-03-10T15:03:05.0207613Z         returns a date within the current month
2024-03-10T15:03:05.0208799Z       when the deadline is before today
2024-03-10T15:03:05.0270771Z         returns a date in the next month
2024-03-10T15:03:05.0271756Z     do from the partner group
2024-03-10T15:03:05.0272955Z       when the deadline is after today
2024-03-10T15:03:05.0337427Z         returns a date within the current month
2024-03-10T15:03:05.0338579Z       when the deadline is before today
2024-03-10T15:03:05.0399291Z         returns a date in the next month
2024-03-10T15:03:05.0400070Z       when the deadline is today
2024-03-10T15:03:05.0459063Z         returns a date in the next month
2024-03-10T15:03:05.0669769Z 
2024-03-10T15:03:05.0670287Z DistributionContentChangeService
2024-03-10T15:03:05.0670917Z   #changes
2024-03-10T15:03:05.0671276Z     when there are line items removed and updated
2024-03-10T15:03:05.0671675Z       returns true
2024-03-10T15:03:05.0671935Z   #any_change?
2024-03-10T15:03:05.0672239Z     when there are no changes in the line items
2024-03-10T15:03:05.0672604Z       returns true
2024-03-10T15:03:05.0672918Z     when there are line items removed and updated
2024-03-10T15:03:05.0673288Z       returns true
2024-03-10T15:03:05.0673567Z     when there are line items removed
2024-03-10T15:03:05.0673903Z       returns true
2024-03-10T15:03:05.0674346Z     when there are line items updated
2024-03-10T15:03:05.0674914Z       returns true
2024-03-10T15:03:05.0675908Z 
2024-03-10T15:03:05.0676079Z RemoveRoleService
2024-03-10T15:03:05.0677210Z   #call
2024-03-10T15:03:05.0678605Z     when not enough information provided
2024-03-10T15:03:05.2691501Z       should raise an error
2024-03-10T15:03:05.2692300Z     when the role does not exist
2024-03-10T15:03:05.4678413Z       should raise an error
2024-03-10T15:03:05.4679411Z     when the role exists
2024-03-10T15:03:05.6741711Z       should remove the role
2024-03-10T15:03:05.8763467Z       should work with a type and ID instead of role ID
2024-03-10T15:03:06.1052858Z       should remove the admin role when removing user role
2024-03-10T15:03:06.1053341Z 
2024-03-10T15:03:06.1053573Z DispersedPastDatesGenerator
2024-03-10T15:03:06.1054747Z   #next
2024-03-10T15:03:06.1119907Z     returns equally dispersed dates between all time ranges
2024-03-10T15:03:06.1120841Z   constants
2024-03-10T15:03:06.1156902Z     has 4 day ranges for generation of past dates
2024-03-10T15:03:06.1157669Z 
2024-03-10T15:03:06.1157882Z OrganizationUpdateService
2024-03-10T15:03:06.1159126Z   #update
2024-03-10T15:03:06.1160324Z     when object is valid
2024-03-10T15:03:06.3068639Z       should update and return true
2024-03-10T15:03:06.3069257Z     when organization has partners
2024-03-10T15:03:06.3070247Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-10T15:03:06.5530314Z         should allow the disabling of request flags in organization and its partners
2024-03-10T15:03:06.5531727Z       when all of a single partner's request flags will be disabled
2024-03-10T15:03:06.8649379Z         should add an error message to the organization
2024-03-10T15:03:07.2241786Z         should NOT change request flags in organization or its partners
2024-03-10T15:03:07.2242615Z     when object is invalid
2024-03-10T15:03:07.4186452Z       should not update and return false
2024-03-10T15:03:07.4187470Z   #update_partner_flags
2024-03-10T15:03:07.4188307Z     when request flags haven't changed
2024-03-10T15:03:07.6694966Z       should not update partners
2024-03-10T15:03:07.6695578Z     when request flags have changed
2024-03-10T15:03:07.9146164Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-10T15:03:08.1564454Z       should update partners when disabling child and individual request flags
2024-03-10T15:03:08.3821719Z       should update partners when disabling quantity-based request flags
2024-03-10T15:03:08.3822475Z 
2024-03-10T15:03:08.3822683Z ItemizableUpdateService
2024-03-10T15:03:08.3823171Z   increases
2024-03-10T15:03:08.5233138Z     should update quantity in same storage location
2024-03-10T15:03:08.6262865Z     should raise an error if any item is inactive
2024-03-10T15:03:08.7648027Z     should update quantity in different locations
2024-03-10T15:03:08.7648508Z   decreases
2024-03-10T15:03:08.9077639Z     should update quantity in different locations
2024-03-10T15:03:09.0510168Z     should update quantity in same storage location
2024-03-10T15:03:09.1682277Z     should raise an error if any item is inactive
2024-03-10T15:03:09.1682843Z 
2024-03-10T15:03:09.1683026Z ProfileUpdateService
2024-03-10T15:03:09.1683769Z   #update
2024-03-10T15:03:09.1955597Z     updates the profile with the filtered and prepared params
2024-03-10T15:03:09.1956253Z 
2024-03-10T15:03:09.1956419Z AddRoleService
2024-03-10T15:03:09.1956903Z   #call
2024-03-10T15:03:09.1957863Z     when the role does not yet exist
2024-03-10T15:03:09.3993719Z       should add the user role when asked to add admin
2024-03-10T15:03:09.5948109Z       works with super admin
2024-03-10T15:03:09.7889119Z       should add the role
2024-03-10T15:03:10.0108115Z       works with a partner
2024-03-10T15:03:10.0108769Z     when the role already exists
2024-03-10T15:03:10.2202005Z       should raise an error for super admin
2024-03-10T15:03:10.4259555Z       should raise an error
2024-03-10T15:03:10.4260105Z 
2024-03-10T15:03:10.4260393Z Reports::AcquisitionReportService
2024-03-10T15:03:10.4261452Z   acquisition report
2024-03-10T15:03:11.4387062Z     should return the proper results on #report
2024-03-10T15:03:11.4387657Z 
2024-03-10T15:03:11.4387848Z ApplicationController
2024-03-10T15:03:11.4389238Z   dashboard_path_from_current_role
2024-03-10T15:03:11.4390151Z     As a super admin
2024-03-10T15:03:11.4607911Z       links to the admin dashboard
2024-03-10T15:03:11.4608703Z     As a user without super admin status
2024-03-10T15:03:11.4812266Z       links to the general dashboard
2024-03-10T15:03:11.4812899Z   current_partner
2024-03-10T15:03:11.4813725Z     As an org user
2024-03-10T15:03:11.4953052Z       should return nil
2024-03-10T15:03:11.4953619Z     As a partner user
2024-03-10T15:03:11.5494302Z       should return the first partner role
2024-03-10T15:03:11.5494949Z       with a changed current role
2024-03-10T15:03:11.6046352Z         should return the first partner role
2024-03-10T15:03:11.6048778Z   current_organization
2024-03-10T15:03:11.6049705Z     As an org user
2024-03-10T15:03:11.9678019Z       should return the first org role
2024-03-10T15:03:11.9678515Z       with a changed current role
2024-03-10T15:03:12.3228978Z         should return the first org role
2024-03-10T15:03:12.3229695Z     As a partner user
2024-03-10T15:03:12.3444450Z       should return nil
2024-03-10T15:03:12.3445160Z 
2024-03-10T15:03:12.3445530Z PartnerFetchRequestableItemsService
2024-03-10T15:03:12.3446552Z   #call
2024-03-10T15:03:12.3577961Z     raises an error indiciating the partner does not exist with invalid id
2024-03-10T15:03:12.3578863Z     org with any amount of items
2024-03-10T15:03:12.3579555Z       when the partner is in a partner group and has no items
2024-03-10T15:03:12.5618160Z         should return only active and visible items from partner
2024-03-10T15:03:12.5619115Z       when the partner is in a partner group and has items
2024-03-10T15:03:12.7962912Z         should return only active and visible items from partner
2024-03-10T15:03:12.7963747Z     when the partner is not in any partner group
2024-03-10T15:03:12.8273778Z       is expected to be nil
2024-03-10T15:03:12.8274265Z       when the organization has items
2024-03-10T15:03:12.8611747Z         is expected to eq [#<Item id: 4238, name: "Item 1", category: nil, created_at: "2024-03-10 08:03:12.845870917 -0700", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-10T15:03:12.9137921Z         should return only active and visible items
2024-03-10T15:03:12.9138704Z       when the organization has no items
2024-03-10T15:03:12.9464383Z         should return no items
2024-03-10T15:03:12.9465719Z 
2024-03-10T15:03:12.9465938Z DistributionsController
2024-03-10T15:03:12.9467358Z   While signed in
2024-03-10T15:03:12.9468454Z     PUT #update
2024-03-10T15:03:12.9470298Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-10T15:03:13.0617804Z         redirects with a flash notice and a flash error
2024-03-10T15:03:13.0619101Z       when distribution has items updated for minimum quantity
2024-03-10T15:03:13.2003221Z         redirects with a flash notice and send send_notification
2024-03-10T15:03:13.2004280Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-10T15:03:13.3145991Z         redirects with a flash notice and a flash error
2024-03-10T15:03:13.3147118Z     POST #create
2024-03-10T15:03:13.3148261Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-10T15:03:13.4054508Z         redirects with a flash notice and a flash error
2024-03-10T15:03:13.4055804Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-10T15:03:13.4822165Z         redirects with a flash notice and a flash error
2024-03-10T15:03:13.4823218Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-10T15:03:13.5716351Z         redirects with a flash notice and a flash alert
2024-03-10T15:03:13.5717212Z       when line item quantity is not positive
2024-03-10T15:03:13.6354760Z         flashes an error
2024-03-10T15:03:13.6355433Z 
2024-03-10T15:03:13.6355608Z UiHelper
2024-03-10T15:03:13.6357947Z   optional_data_text
2024-03-10T15:03:13.6358888Z     when the field provided is not blank
2024-03-10T15:03:13.6419980Z       should return the content
2024-03-10T15:03:13.6420651Z     when the field provided is blank
2024-03-10T15:03:13.6478627Z       should return the text Not-Provided in gray text
2024-03-10T15:03:13.6479337Z 
2024-03-10T15:03:13.6479673Z DonationCreateService
2024-03-10T15:03:13.6480612Z   #call
2024-03-10T15:03:13.6722713Z     should create the donation
2024-03-10T15:03:13.6723217Z 
2024-03-10T15:03:13.6723654Z PartnerRequestRecertificationService
2024-03-10T15:03:13.6724461Z   #call
2024-03-10T15:03:13.6725921Z     when the arguments are incorrect
2024-03-10T15:03:13.6726793Z       because the partner has already been requested to recertify
2024-03-10T15:03:13.7078448Z         should return the PartnerRequestRecertificationService object with an error
2024-03-10T15:03:13.7079490Z     when the partner is deactivated
2024-03-10T15:03:13.7420622Z       does not send an email
2024-03-10T15:03:13.7421310Z     when the arguments are correct
2024-03-10T15:03:13.7783057Z       should change the partner status to approved
2024-03-10T15:03:13.8119180Z       should queue sending the notice to the partner
2024-03-10T15:03:13.8457748Z       should have no errors
2024-03-10T15:03:13.8458527Z       but a unexpected error occurred during the save
2024-03-10T15:03:13.8459238Z         for partner approval
2024-03-10T15:03:13.8758278Z           should have an error with the raised error
2024-03-10T15:03:13.9055521Z           should NOT queue sending the notice to the partner
2024-03-10T15:03:13.9366524Z           should not change the partner status to recertification_required
2024-03-10T15:03:13.9367755Z 
2024-03-10T15:03:13.9368288Z OrganizationMailer
2024-03-10T15:03:13.9369311Z   #partner_approval_request
2024-03-10T15:03:13.9635242Z     should be sent to the partner main email with the correct subject line
2024-03-10T15:03:13.9879773Z     renders the body with correct text with partner information
2024-03-10T15:03:14.0123649Z     includes a link to the relevant partner
2024-03-10T15:03:14.0124310Z 
2024-03-10T15:03:14.0124551Z Event
2024-03-10T15:03:14.0125415Z   #most_recent_snapshot
2024-03-10T15:03:14.2545742Z     should not include an unusable snapshot
2024-03-10T15:03:14.4946345Z     should include the last usable snapshot
2024-03-10T15:03:14.4947272Z 
2024-03-10T15:03:14.4947688Z DistributionItemizedBreakdownService
2024-03-10T15:03:14.4948438Z   #fetch
2024-03-10T15:03:14.8762354Z     should include the break down of items distributed with onhand data
2024-03-10T15:03:14.8763219Z   #fetch_csv
2024-03-10T15:03:15.2646398Z     should output the expected output but in CSV format
2024-03-10T15:03:15.2647108Z 
2024-03-10T15:03:15.2647379Z View::Inventory
2024-03-10T15:03:15.2649184Z   #items_for_location
2024-03-10T15:03:15.3571577Z     should return the right values
2024-03-10T15:03:15.3572260Z     with include_omitted_items
2024-03-10T15:03:15.4575744Z       should add items not in the storage location (FAILED - 1)
2024-03-10T15:03:15.4576395Z   #total_value_in_dollars
2024-03-10T15:03:15.5466320Z     should return total value across the given location
2024-03-10T15:03:15.5467312Z   #quantity_for
2024-03-10T15:03:15.5467827Z     with storage location but no item id
2024-03-10T15:03:15.6344376Z       should return all items at that location
2024-03-10T15:03:15.6345115Z     with item id
2024-03-10T15:03:15.6345581Z       with no storage location
2024-03-10T15:03:15.7210537Z         should return quantities across all storage locations
2024-03-10T15:03:15.7211057Z       with storage location
2024-03-10T15:03:15.8098321Z         should return the quantity at that location
2024-03-10T15:03:15.8098847Z   #storage_location_name
2024-03-10T15:03:15.9292996Z     should return the right name
2024-03-10T15:03:15.9303506Z   .total_inventory
2024-03-10T15:03:16.1220965Z     should return the total quantity
2024-03-10T15:03:16.1221646Z   #all_items
2024-03-10T15:03:16.2710651Z     should return all items across storage locations
2024-03-10T15:03:16.2711155Z   #storage_locations_for_item
2024-03-10T15:03:16.3623588Z     should return all relevant IDs
2024-03-10T15:03:16.3624263Z   .items_for_location
2024-03-10T15:03:16.4539374Z     should return the right values
2024-03-10T15:03:16.4540169Z     with include_omitted_items
2024-03-10T15:03:16.5422574Z       should add items not in the storage location (FAILED - 2)
2024-03-10T15:03:16.5423224Z 
2024-03-10T15:03:16.5423333Z DonationSite
2024-03-10T15:03:16.5424765Z   geocode
2024-03-10T15:03:16.5487033Z     adds coordinates to the database
2024-03-10T15:03:16.5487438Z   Validations >
2024-03-10T15:03:16.5530392Z     is invalid without a name
2024-03-10T15:03:16.5566106Z     must belong to an organization
2024-03-10T15:03:16.5607717Z     is invalid without an address
2024-03-10T15:03:16.5608163Z   versioning
2024-03-10T15:03:16.5642191Z     is expected to be versioned
2024-03-10T15:03:16.5642580Z   import_csv
2024-03-10T15:03:16.7479563Z     imports storage locations from a csv file
2024-03-10T15:03:16.7480495Z 
2024-03-10T15:03:16.7480656Z LineItem
2024-03-10T15:03:16.7482260Z   Validations >
2024-03-10T15:03:16.7627123Z     requires a quantity
2024-03-10T15:03:16.7715144Z     requires an item
2024-03-10T15:03:16.8578502Z     the quantity must be a valid integer and cannot be 0
2024-03-10T15:03:16.8579175Z   package_count
2024-03-10T15:03:16.8778863Z     is nil if there is no package_size
2024-03-10T15:03:16.8971789Z     is equal to the quanity divided by the package_size
2024-03-10T15:03:16.8972481Z   Scopes >
2024-03-10T15:03:16.8973092Z     ->active
2024-03-10T15:03:16.9310389Z       retrieves only those with active status
2024-03-10T15:03:16.9311111Z   Methods >
2024-03-10T15:03:16.9311583Z     #value_per_line_item
2024-03-10T15:03:16.9312556Z       item has value and quantity
2024-03-10T15:03:16.9507668Z         is expected to eq 25
2024-03-10T15:03:16.9508256Z       item has no value
2024-03-10T15:03:16.9649514Z         is expected to eq 0
2024-03-10T15:03:16.9650072Z     item packages
2024-03-10T15:03:16.9653263Z       #has_packages
2024-03-10T15:03:16.9654180Z         item has package size
2024-03-10T15:03:16.9842678Z           is expected to be truthy
2024-03-10T15:03:16.9843364Z         item has no package size
2024-03-10T15:03:16.9982145Z           is expected to be falsy
2024-03-10T15:03:16.9982772Z       #package_count
2024-03-10T15:03:16.9985743Z         does not have packages
2024-03-10T15:03:17.0131080Z           is expected to be falsy
2024-03-10T15:03:17.0131701Z         has packages
2024-03-10T15:03:17.0329186Z           is expected to eq "1"
2024-03-10T15:03:17.0329823Z   versioning
2024-03-10T15:03:17.0372738Z     is expected to be versioned
2024-03-10T15:03:17.0373335Z 
2024-03-10T15:03:17.0373714Z Exports::ExportPurchasesCSVService
2024-03-10T15:03:17.0374643Z   #generate_csv_data
2024-03-10T15:03:17.1600719Z     should match the expected content for the csv
2024-03-10T15:03:17.1602844Z 
2024-03-10T15:03:17.1603135Z HistoricalDataCacheJob
2024-03-10T15:03:17.3317561Z   queues the job
2024-03-10T15:03:17.5223828Z   caches the historical data
2024-03-10T15:03:17.7802366Z 
2024-03-10T15:03:17.7803657Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-10T15:03:17.7804180Z 
2024-03-10T15:03:17.7804860Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-10T15:03:17.7805740Z      # Temporarily skipped with xit
2024-03-10T15:03:17.7806205Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-10T15:03:17.8056717Z 
2024-03-10T15:03:17.8057391Z Failures:
2024-03-10T15:03:17.8057771Z 
2024-03-10T15:03:17.8058699Z   1) View::Inventory#items_for_location with include_omitted_items should add items not in the storage location
2024-03-10T15:03:17.8060189Z      Failure/Error: expect(results.length).to eq(3)
2024-03-10T15:03:17.8060799Z 
2024-03-10T15:03:17.8061000Z        expected: 3
2024-03-10T15:03:17.8061499Z             got: 2
2024-03-10T15:03:17.8061695Z 
2024-03-10T15:03:17.8061840Z        (compared using ==)
2024-03-10T15:03:17.8062489Z      # ./spec/models/view/inventory_spec.rb:80:in `block (4 levels) in <top (required)>'
2024-03-10T15:03:17.8063355Z 
2024-03-10T15:03:17.8063769Z   2) View::Inventory.items_for_location with include_omitted_items should add items not in the storage location
2024-03-10T15:03:17.8064454Z      Failure/Error: expect(results.length).to eq(3)
2024-03-10T15:03:17.8064747Z 
2024-03-10T15:03:17.8064848Z        expected: 3
2024-03-10T15:03:17.8065110Z             got: 2
2024-03-10T15:03:17.8065271Z 
2024-03-10T15:03:17.8065376Z        (compared using ==)
2024-03-10T15:03:17.8065881Z      # ./spec/models/view/inventory_spec.rb:48:in `block (4 levels) in <top (required)>'
2024-03-10T15:03:17.8074668Z 
2024-03-10T15:03:17.8075201Z Finished in 49.25 seconds (files took 8.57 seconds to load)
2024-03-10T15:03:17.8075982Z 477 examples, 2 failures, 1 pending
2024-03-10T15:03:17.8076376Z 
2024-03-10T15:03:17.8076544Z Failed examples:
2024-03-10T15:03:17.8078221Z 
2024-03-10T15:03:17.8079470Z rspec ./spec/models/view/inventory_spec.rb:78 # View::Inventory#items_for_location with include_omitted_items should add items not in the storage location
2024-03-10T15:03:17.8081816Z rspec ./spec/models/view/inventory_spec.rb:46 # View::Inventory.items_for_location with include_omitted_items should add items not in the storage location
2024-03-10T15:03:17.8082914Z 
2024-03-10T15:03:17.8083032Z Randomized with seed 58801
2024-03-10T15:03:17.8083238Z 
2024-03-10T15:03:18.1361002Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-10T15:03:18.1362502Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3844 / 6485 LOC (59.28%) covered.
2024-03-10T15:03:18.1961214Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/purchase_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/calendar_service_spec.rb" "spec/models/account_request_spec.rb" "spec/models/event_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/line_item_spec.rb" "spec/models/partners/family_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/item_category_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/base_item_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/controllers/admins_controller_spec.rb" failed
2024-03-10T15:03:18.5802306Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-10T15:03:18.5804508Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10791 LOC (0.35%) covered.
2024-03-10T15:03:18.6071824Z ##[error]Process completed with exit code 1.
