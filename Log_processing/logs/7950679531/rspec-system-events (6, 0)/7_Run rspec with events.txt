2024-02-18T17:45:06.1580342Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-18T17:45:06.1581282Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-18T17:45:06.1609155Z shell: /usr/bin/bash -e {0}
2024-02-18T17:45:06.1609509Z env:
2024-02-18T17:45:06.1609952Z   POSTGRES_HOST: localhost
2024-02-18T17:45:06.1610352Z   DATABASE_HOST: localhost
2024-02-18T17:45:06.1610805Z   PG_USERNAME: postgres
2024-02-18T17:45:06.1611183Z   PG_PASSWORD: password
2024-02-18T17:45:06.1611537Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-18T17:45:06.1612023Z   POSTGRES_PORT: 5432
2024-02-18T17:45:06.1612374Z   PGHOST: localhost
2024-02-18T17:45:06.1612710Z   PGUSER: postgres
2024-02-18T17:45:06.1613122Z   RAILS_ENV: test
2024-02-18T17:45:06.1613446Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-18T17:45:06.1613879Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-18T17:45:06.1614343Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-18T17:45:06.1615022Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-18T17:45:06.1615649Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-18T17:45:06.1616276Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-18T17:45:06.1616924Z   EVENTS_READ: true
2024-02-18T17:45:06.1617329Z ##[endgroup]
2024-02-18T17:45:11.7205733Z W, [2024-02-18T17:45:11.720166 #2337]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-18T17:45:11.7208709Z W, [2024-02-18T17:45:11.720229 #2337]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:45:11.7211766Z W, [2024-02-18T17:45:11.720248 #2337]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:45:11.7218253Z W, [2024-02-18T17:45:11.720276 #2337]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-18T17:45:14.4132644Z W, [2024-02-18T17:45:14.412973 #2337]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-18T17:45:14.4134857Z W, [2024-02-18T17:45:14.413016 #2337]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:45:14.4136683Z W, [2024-02-18T17:45:14.413036 #2337]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:45:14.4139204Z W, [2024-02-18T17:45:14.413090 #2337]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-18T17:45:14.4190671Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-18T17:45:22.6978356Z 
2024-02-18T17:45:22.6979296Z Randomized with seed 48752
2024-02-18T17:45:23.7459493Z 
2024-02-18T17:45:23.7460102Z Audits
2024-02-18T17:45:23.7462180Z   while signed in as an organization admin
2024-02-18T17:45:23.7463713Z     GET #new
2024-02-18T17:45:23.8490121Z       is successful
2024-02-18T17:45:23.8490802Z     DELETE #destroy
2024-02-18T17:45:23.8491400Z       with valid params
2024-02-18T17:45:23.9030249Z         destroys the audit if the audit's status is `in_progress`
2024-02-18T17:45:23.9390304Z         destroys the audit if the audit's status is `confirms`
2024-02-18T17:45:23.9719679Z         can not destroy the audit if the audit's status is `finalized`
2024-02-18T17:45:23.9720688Z     POST #finalize
2024-02-18T17:45:24.0443681Z       sets the finalize status and saves an event
2024-02-18T17:45:24.0444517Z     GET #show
2024-02-18T17:45:24.0944257Z       is successful
2024-02-18T17:45:24.0945029Z     POST #create
2024-02-18T17:45:24.0945594Z       with invalid params
2024-02-18T17:45:24.1316915Z         assigns a newly created but unsaved audit as @audit
2024-02-18T17:45:24.1848239Z         re-renders the 'new' template
2024-02-18T17:45:24.2433341Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-18T17:45:24.2434785Z       with valid params
2024-02-18T17:45:24.2830823Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-18T17:45:24.3201559Z         assigns a newly created audit as @audit
2024-02-18T17:45:24.3563753Z         creates a new Audit
2024-02-18T17:45:24.3952887Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-18T17:45:24.4330132Z         redirects to the #show after created audit
2024-02-18T17:45:24.4331024Z     GET #edit
2024-02-18T17:45:24.4906684Z       is successful if the status of audit is `in_progress`
2024-02-18T17:45:24.5515612Z       redirects to #index if the status of audit is not `in_progress`
2024-02-18T17:45:24.5518303Z     GET #index
2024-02-18T17:45:24.6051398Z       is successful
2024-02-18T17:45:24.6052161Z 
2024-02-18T17:45:24.6052449Z Purchases
2024-02-18T17:45:24.6054405Z   while signed in as an organization admin
2024-02-18T17:45:31.8983868Z     allows deletion of a purchase
2024-02-18T17:45:31.8984578Z   while signed in as a normal user
2024-02-18T17:45:31.8985498Z     When visiting the index page
2024-02-18T17:45:31.8986557Z       In the middle of the year
2024-02-18T17:45:32.7302733Z         User can click to the new purchase form
2024-02-18T17:45:33.4739456Z         User sees total purchases value
2024-02-18T17:45:34.2150652Z         User sees purchased date column
2024-02-18T17:45:34.2151448Z       When filtering on the index page
2024-02-18T17:45:35.0234576Z         User can filter the #index by vendor
2024-02-18T17:45:35.8367908Z         User can filter the #index by storage location
2024-02-18T17:45:35.8369085Z         behaves like Date Range Picker
2024-02-18T17:45:35.8370124Z           when choosing 'All Time'
2024-02-18T17:45:36.8406857Z             shows all the records
2024-02-18T17:45:36.8407925Z           when choosing a date range that only includes the previous week
2024-02-18T17:45:37.7769909Z             shows only 1 record
2024-02-18T17:45:37.7771336Z           when choosing 'Last Month'
2024-02-18T17:45:38.7326991Z             shows only 2 of the records
2024-02-18T17:45:38.7328114Z     When visiting an existing purchase
2024-02-18T17:45:39.1949360Z       does not allow deletion of a purchase
2024-02-18T17:45:39.1950018Z     When creating a new purchase
2024-02-18T17:45:39.6815361Z       should not display inactive storage locations in dropdown
2024-02-18T17:45:39.6816110Z       via manual entry
2024-02-18T17:45:40.5739827Z         User can create a purchase using dollars decimal amount
2024-02-18T17:45:41.5927331Z         User can create vendor from purchase
2024-02-18T17:45:42.6931834Z         User can create a purchase IN THE PAST
2024-02-18T17:45:43.8634006Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-18T17:45:44.8747615Z         Does not include inactive items in the line item fields
2024-02-18T17:45:44.8748427Z         when creating a purchase incorrectly
2024-02-18T17:45:45.8564591Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-18T17:45:46.6698286Z           should display failure with error messages
2024-02-18T17:45:46.6699136Z       via barcode entry
2024-02-18T17:45:47.5877673Z         User scan same barcode 2 times
2024-02-18T17:45:48.3103487Z         a user can add items via scanning them in by barcode
2024-02-18T17:45:49.5000005Z         a user can add items that do not yet have a barcode
2024-02-18T17:45:49.5000991Z       Editing purchase
2024-02-18T17:45:50.1426614Z         A user can view another organizations purchase
2024-02-18T17:45:50.6477785Z         A user can see purchased_from value
2024-02-18T17:45:50.6478950Z 
2024-02-18T17:45:50.6479546Z User account management
2024-02-18T17:45:50.6481022Z   when not in staging
2024-02-18T17:45:51.5530943Z     should change an user name
2024-02-18T17:45:52.3381646Z     should fail when the email is invalid
2024-02-18T17:45:53.2175282Z     should change the email
2024-02-18T17:45:53.2176127Z   when in staging
2024-02-18T17:45:53.7882006Z     should display staging warning
2024-02-18T17:45:54.2565657Z     should not allow the user to change staging credentials
2024-02-18T17:45:54.2566533Z 
2024-02-18T17:45:54.2566898Z /partners/children
2024-02-18T17:45:54.2568015Z   GET #index
2024-02-18T17:45:54.3524399Z     should render without any issues
2024-02-18T17:45:54.4016468Z     should export CSV
2024-02-18T17:45:54.4017444Z 
2024-02-18T17:45:54.4018055Z Managing requests
2024-02-18T17:45:54.4019384Z   creating a request
2024-02-18T17:45:54.4020361Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:45:54.4021879Z       WHEN they create a request inproperly by not inputting anything
2024-02-18T17:45:55.3044844Z         should show an error message with the instructions
2024-02-18T17:45:55.3046083Z       WHEN they create a request with only a comment
2024-02-18T17:45:56.2900953Z         should be created without any issue
2024-02-18T17:45:56.2901696Z       WHEN they create a request properly
2024-02-18T17:45:56.2902618Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:45:58.5804077Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-18T17:45:58.5805248Z   creating a individuals/family request
2024-02-18T17:45:58.5806135Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:45:58.5807333Z       WHEN they create a request inproperly
2024-02-18T17:45:59.4884306Z         should show an error message with the instructions
2024-02-18T17:45:59.4885555Z       WHEN they create a request properly
2024-02-18T17:45:59.4886840Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:46:01.6028233Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-18T17:46:01.6029473Z 
2024-02-18T17:46:01.6029785Z Organization management
2024-02-18T17:46:01.6031320Z   while signed in as an organization admin
2024-02-18T17:46:02.5647015Z     can add a new user to an organization
2024-02-18T17:46:03.0520874Z     can see 'Make user' button for admins
2024-02-18T17:46:04.2440247Z     can re-activate a user in the organization
2024-02-18T17:46:05.2085626Z     can deactivate a user in the organization
2024-02-18T17:46:05.7032494Z     can re-invite a user to an organization after 7 days
2024-02-18T17:46:05.7033437Z     Viewing the organization
2024-02-18T17:46:06.2627250Z       can view organization details
2024-02-18T17:46:06.2628288Z     Editing the organization
2024-02-18T17:46:07.8154531Z       can select and deselect Required Partner Fields
2024-02-18T17:46:08.9766551Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-18T17:46:09.8424101Z       can set a reminder and a deadline day
2024-02-18T17:46:10.8458926Z       can select if the org repackages essentials
2024-02-18T17:46:11.8190758Z       can enable if the org uses single step invite and approve partner process
2024-02-18T17:46:12.6822853Z       can set a default storage location on the organization
2024-02-18T17:46:13.6452005Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-18T17:46:14.6929850Z       can select if the org shows year-to-date values on the distribution printout
2024-02-18T17:46:15.5332239Z       can set the NDBN Member ID
2024-02-18T17:46:16.5029426Z       can select if the org distributes essentials monthly
2024-02-18T17:46:16.5030137Z   while signed in as a normal user
2024-02-18T17:46:17.0182232Z     can see summary details about the organization as a user
2024-02-18T17:46:17.4900429Z     cannot see 'Make user' button for admins
2024-02-18T17:46:17.4901122Z 
2024-02-18T17:46:17.4901530Z /partners/profiles
2024-02-18T17:46:17.4902840Z   GET #show
2024-02-18T17:46:17.5553055Z     displays the partner
2024-02-18T17:46:17.6090139Z     shows correct values for yes/no buttons
2024-02-18T17:46:17.6090990Z   PUT #update
2024-02-18T17:46:17.6670979Z     updates the partner and profile
2024-02-18T17:46:17.6672275Z     with no social media
2024-02-18T17:46:17.7820057Z       shows an error
2024-02-18T17:46:17.7820697Z     when updating an existing value to a blank value
2024-02-18T17:46:17.8352678Z       does not update other partner profile attributes to blank
2024-02-18T17:46:17.8862849Z       updates the partner profile attribute to a blank value
2024-02-18T17:46:17.9381243Z       does store N/A in the database
2024-02-18T17:46:17.9381939Z   GET #edit
2024-02-18T17:46:18.0220364Z     displays the partner
2024-02-18T17:46:18.1098030Z     has "Yes" radio button value when value is true
2024-02-18T17:46:18.1956849Z     has "No" radio button value when value is false
2024-02-18T17:46:18.2900488Z     does not have default radio button value when value is nil
2024-02-18T17:46:18.2901018Z 
2024-02-18T17:46:18.2901134Z Vendor
2024-02-18T17:46:18.2902044Z   When a user views the index page
2024-02-18T17:46:18.7727011Z     should have the vendor names in alphabetical order
2024-02-18T17:46:18.7727837Z   when editing an existing vendor
2024-02-18T17:46:19.5504617Z     can update the contact info for a vendor as a user
2024-02-18T17:46:20.2923511Z     does not update a vendor with empty attributes
2024-02-18T17:46:20.2924435Z   When vendor have purchases associated with them already
2024-02-18T17:46:20.8909344Z     can have existing vendors show in the #index with some summary stats
2024-02-18T17:46:21.6189627Z     can have a single vendor show semi-detailed stats about purchases
2024-02-18T17:46:21.6190565Z   when creating a new vendor
2024-02-18T17:46:22.3734328Z     cannot add a new vendor instance with empty attributes
2024-02-18T17:46:23.1401223Z     can create a new vendor instance as a user
2024-02-18T17:46:23.1402664Z 
2024-02-18T17:46:23.1404599Z StorageLocations
2024-02-18T17:46:23.1405424Z   While signed in
2024-02-18T17:46:23.1407484Z     GET #inventory
2024-02-18T17:46:23.1408672Z       without any overrides
2024-02-18T17:46:23.1979095Z         returns a collection that only includes items at the storage location
2024-02-18T17:46:23.1980176Z       when also including omitted items
2024-02-18T17:46:23.2472894Z         contains a collection of ducktyped entries that respond the same
2024-02-18T17:46:23.2949987Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-18T17:46:23.2951226Z       when also including inactive items
2024-02-18T17:46:23.3643224Z         returns a collection that also includes items that have been deactivated
2024-02-18T17:46:23.3643921Z     PUT #reactivate
2024-02-18T17:46:23.3820296Z       undiscards
2024-02-18T17:46:23.3821206Z     Looking at a different organization
2024-02-18T17:46:23.5570917Z       redirects the user to the sign-in page for CRUD actions
2024-02-18T17:46:23.5571752Z     GET #new
2024-02-18T17:46:23.7258914Z       returns http success
2024-02-18T17:46:23.7259686Z     PUT #deactivate
2024-02-18T17:46:23.7463892Z       discards
2024-02-18T17:46:23.7464471Z       with inventory
2024-02-18T17:46:23.7919159Z         does not discard
2024-02-18T17:46:23.7920711Z     GET #destroy
2024-02-18T17:46:23.8193542Z       redirects to #index
2024-02-18T17:46:23.8195448Z     POST #import_csv
2024-02-18T17:46:23.8196052Z       csv file with wrong headers
2024-02-18T17:46:23.8325514Z         presents a flash error message
2024-02-18T17:46:23.8445002Z         redirects
2024-02-18T17:46:23.8445606Z       with a csv file
2024-02-18T17:46:23.8592056Z         redirects
2024-02-18T17:46:23.8747169Z         presents a flash notice message
2024-02-18T17:46:23.8798988Z         invokes .import_csv
2024-02-18T17:46:23.8799694Z       without a csv file
2024-02-18T17:46:23.8920838Z         presents a flash error message
2024-02-18T17:46:23.9118571Z         redirects to :index
2024-02-18T17:46:23.9119721Z     GET #edit
2024-02-18T17:46:23.9467473Z       returns http success
2024-02-18T17:46:23.9468172Z     GET #show
2024-02-18T17:46:23.9468881Z       html
2024-02-18T17:46:24.0152878Z         should return a correct response
2024-02-18T17:46:24.0153730Z         with version date set
2024-02-18T17:46:24.0154622Z           with a version found
2024-02-18T17:46:24.0944612Z             should show the version specified
2024-02-18T17:46:24.0945634Z           with no version found
2024-02-18T17:46:24.1645864Z             should show N/A
2024-02-18T17:46:24.1646832Z       csv
2024-02-18T17:46:24.2190602Z         should be successful
2024-02-18T17:46:24.2191386Z     GET #index
2024-02-18T17:46:24.2191947Z       csv
2024-02-18T17:46:24.2382137Z         succeeds
2024-02-18T17:46:24.3356013Z         includes headers followed by alphabetized item names
2024-02-18T17:46:24.3706215Z       html
2024-02-18T17:46:24.3707116Z         succeeds
2024-02-18T17:46:24.3707731Z         with inactive locations
2024-02-18T17:46:24.4060764Z           does not includes the inactive location
2024-02-18T17:46:24.4061670Z           with include_inactive_locations
2024-02-18T17:46:24.4410410Z             includes the inactive location
2024-02-18T17:46:24.4411639Z   While not signed in
2024-02-18T17:46:24.4469941Z     redirects the user to the sign-in page for CRUD actions
2024-02-18T17:46:24.4470768Z 
2024-02-18T17:46:24.4470992Z Kit management
2024-02-18T17:46:25.9261024Z   can allocate and deallocate quantity per storage location from kit index
2024-02-18T17:46:26.8524222Z   can create a new kit as a user with the proper quantity
2024-02-18T17:46:27.4848150Z   should not display inactive storage locations under allocations
2024-02-18T17:46:27.4849446Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-18T17:46:28.5917385Z     will not change quantity amounts when allocating
2024-02-18T17:46:28.5918489Z   when there is no kit quantity
2024-02-18T17:46:29.7382298Z     will not change quantity amounts when deallocating
2024-02-18T17:46:29.7382982Z 
2024-02-18T17:46:29.7383231Z Admin Organization Management
2024-02-18T17:46:29.7384959Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-18T17:46:31.7074399Z     creates a new organization
2024-02-18T17:46:31.7075393Z   While signed in as an Administrative User (super admin)
2024-02-18T17:46:33.1244786Z     can view organization details
2024-02-18T17:46:34.9964010Z     creates a new organization
2024-02-18T17:46:36.0878943Z     filters by organizations by name in organizations index page
2024-02-18T17:46:36.0879752Z 
2024-02-18T17:46:36.0879974Z /account_requests
2024-02-18T17:46:36.0881738Z   GET #received
2024-02-18T17:46:36.0882847Z     when given a invalid token
2024-02-18T17:46:36.0972370Z       should render a error that says that is code provided is invalid
2024-02-18T17:46:36.0973590Z     when given a valid token
2024-02-18T17:46:36.1242028Z       should render the received template
2024-02-18T17:46:36.1243053Z   GET #new
2024-02-18T17:46:36.1376934Z     renders a successful response
2024-02-18T17:46:36.1377691Z   GET #confirmation
2024-02-18T17:46:36.1378559Z     when given a valid token
2024-02-18T17:46:36.1519810Z       should render the confirmation template
2024-02-18T17:46:36.1520771Z     when given a token that has already been confirmed
2024-02-18T17:46:36.3419421Z       should render a error that says that is code provided is invalid
2024-02-18T17:46:36.3420121Z     when given a invalid token
2024-02-18T17:46:36.3482274Z       should render a error that says that is code provided is invalid
2024-02-18T17:46:36.3483493Z   POST #create
2024-02-18T17:46:36.3484164Z     with invalid parameters
2024-02-18T17:46:36.3670909Z       does not create a new AccountRequest
2024-02-18T17:46:36.3837503Z       renders a successful response (i.e. to display the 'new' template)
2024-02-18T17:46:36.3838286Z     with valid parameters
2024-02-18T17:46:36.3971432Z       redirects to the created account_request confirmation
2024-02-18T17:46:36.4084884Z       delivers the confirmation email via default queue
2024-02-18T17:46:36.4201826Z       creates a new AccountRequest
2024-02-18T17:46:36.4202507Z   GET #confirm
2024-02-18T17:46:36.4203803Z     when given a invalid token
2024-02-18T17:46:36.4259336Z       should render a error that says that is code provided is invalid
2024-02-18T17:46:36.4260486Z     when given a token that has already been confirmed
2024-02-18T17:46:36.7600217Z       should render a error that says that is code provided is invalid
2024-02-18T17:46:36.7607332Z     when given a valid token
2024-02-18T17:46:36.8036874Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-18T17:46:36.8037907Z 
2024-02-18T17:46:36.8040656Z Profiles
2024-02-18T17:46:36.8041535Z   GET #edit
2024-02-18T17:46:36.9112737Z     returns http success
2024-02-18T17:46:36.9113452Z   POST #update
2024-02-18T17:46:36.9115969Z     successful save
2024-02-18T17:46:36.9588188Z       redirects to #show
2024-02-18T17:46:37.0039918Z       update partner
2024-02-18T17:46:37.0040678Z     when updating an existing value to a blank value
2024-02-18T17:46:37.0503341Z       should have blank values
2024-02-18T17:46:37.0994931Z       update partner
2024-02-18T17:46:37.1000206Z 
2024-02-18T17:46:37.1000843Z Dashboard
2024-02-18T17:46:37.1001902Z   With an existing essentials bank
2024-02-18T17:46:37.1003650Z     Product Drives
2024-02-18T17:46:37.6943768Z       has a widget for product drive summary data
2024-02-18T17:46:37.6945363Z       given 1 Product Drive Donation on 2022-02-17 (unless 'All Time'), 3 during 2022-02-18..2023-11-02, and 1 on 2023-11-03
2024-02-18T17:46:37.6946787Z         filtering to '' (February 18, 2022 - November 2, 2023)
2024-02-18T17:46:39.2050643Z           shows the correct total donations
2024-02-18T17:46:40.7010887Z           shows the correct total money raised
2024-02-18T17:46:42.1967676Z           shows 3 Recent Donation link(s)
2024-02-18T17:46:42.1969732Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:46:42.1971566Z         filtering to 'This Month'
2024-02-18T17:46:45.5601562Z           shows 0 Recent Donation link(s)
2024-02-18T17:46:46.8951757Z           shows the correct total money raised
2024-02-18T17:46:48.2816792Z           shows the correct total donations
2024-02-18T17:46:48.2818825Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 4 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:46:48.2820598Z         filtering to 'Today'
2024-02-18T17:46:49.8106404Z           shows 3 Recent Donation link(s)
2024-02-18T17:46:51.3352970Z           shows the correct total donations
2024-02-18T17:46:52.8720335Z           shows the correct total money raised
2024-02-18T17:46:52.8722304Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:46:52.8723727Z         filtering to 'Last 7 Days'
2024-02-18T17:46:54.3274380Z           shows 2 Recent Donation link(s)
2024-02-18T17:46:55.7702347Z           shows the correct total donations
2024-02-18T17:46:57.2291047Z           shows the correct total money raised
2024-02-18T17:46:57.2292902Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:46:57.2294495Z         filtering to 'Last Month'
2024-02-18T17:46:58.7561539Z           shows 3 Recent Donation link(s)
2024-02-18T17:47:00.2754764Z           shows the correct total money raised
2024-02-18T17:47:01.8075243Z           shows the correct total donations
2024-02-18T17:47:01.8077186Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:47:01.8078521Z         filtering to 'This Year'
2024-02-18T17:47:03.3134852Z           shows 3 Recent Donation link(s)
2024-02-18T17:47:04.8380569Z           shows the correct total donations
2024-02-18T17:47:06.3505705Z           shows the correct total money raised
2024-02-18T17:47:06.3506600Z       Product drive behaviour with Mixed Donation types
2024-02-18T17:47:07.0910082Z         only shows product drive donations as product drive donations
2024-02-18T17:47:07.8159976Z         only counts product drive donations for product drive
2024-02-18T17:47:08.5168720Z         only counts product drive money raised
2024-02-18T17:47:08.5170272Z       given 1 Product Drive Donation on 2024-02-16 (unless 'All Time'), 0 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:47:08.5171435Z         filtering to 'Yesterday'
2024-02-18T17:47:10.0180128Z           shows the correct total donations
2024-02-18T17:47:11.3963648Z           shows the correct total money raised
2024-02-18T17:47:14.7390701Z           shows 0 Recent Donation link(s)
2024-02-18T17:47:14.7392453Z       given 1 Product Drive Donation on 2024-01-19 (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:14.7393499Z         filtering to 'Last 30 Days'
2024-02-18T17:47:16.2523302Z           shows the correct total money raised
2024-02-18T17:47:17.7511832Z           shows the correct total donations
2024-02-18T17:47:19.2935977Z           shows 3 Recent Donation link(s)
2024-02-18T17:47:19.2940552Z     Distributions
2024-02-18T17:47:20.2404604Z       has a link to create a new distribution
2024-02-18T17:47:20.2406128Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:47:20.2407533Z         filtering to 'This Month'
2024-02-18T17:47:23.6141493Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:47:23.6143539Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:47:23.6144849Z         filtering to 'Last Month'
2024-02-18T17:47:25.0488916Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:47:25.0490835Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 4 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:25.0492516Z         filtering to 'Today'
2024-02-18T17:47:26.4909260Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:47:26.4911092Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:26.4912540Z         filtering to 'Last 7 Days'
2024-02-18T17:47:29.8378335Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:47:29.8380008Z       given 1 Distribution on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2023-08-30, and 1 on 2023-08-31
2024-02-18T17:47:29.8381540Z         filtering to '' (February 18, 2022 - August 30, 2023)
2024-02-18T17:47:31.2809596Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:47:31.2811489Z       given 1 Distribution on 2024-02-16  (unless 'All Time'), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:47:31.2812325Z         filtering to 'Yesterday'
2024-02-18T17:47:32.6907997Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:47:32.6909782Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:47:32.6910844Z         filtering to 'This Year'
2024-02-18T17:47:34.0859463Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:47:34.0861548Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:34.0862939Z         filtering to 'All Time'
2024-02-18T17:47:35.4674441Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:47:35.4675926Z       given 1 Distribution on 2024-01-19  (unless 'All Time'), 0 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:35.4676958Z         filtering to 'Last 30 Days'
2024-02-18T17:47:38.8604712Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:47:38.8605756Z     Manufacturer Donations
2024-02-18T17:47:39.4272694Z       has a link to create a new donation
2024-02-18T17:47:39.4274389Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 8 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:47:39.4275742Z         filtering to 'This Month'
2024-02-18T17:47:41.8331745Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:47:41.8333714Z       given 1 Manufacturer donating on 2024-02-16  (unless 'All Time'), 6 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:47:41.8335557Z         filtering to 'Yesterday'
2024-02-18T17:47:43.7130425Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-18T17:47:43.7132699Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 9 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:43.7134038Z         filtering to 'All Time'
2024-02-18T17:47:46.0102522Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:47:46.0104505Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:47:46.0105990Z         filtering to 'Last Month'
2024-02-18T17:47:47.7661728Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T17:47:47.7663859Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:47.7665203Z         filtering to 'Today'
2024-02-18T17:47:49.3746754Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-18T17:47:49.3748298Z       given 1 Manufacturer donating on 2022-02-17  (unless 'All Time'), 2 during 2022-02-18..2023-10-06, and 1 on 2023-10-07
2024-02-18T17:47:49.3749249Z         filtering to '' (February 18, 2022 - October 6, 2023)
2024-02-18T17:47:51.0123190Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-18T17:47:51.0125218Z       given 1 Manufacturer donating on 2024-01-19  (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:51.0126753Z         filtering to 'Last 30 Days'
2024-02-18T17:47:52.9809923Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T17:47:52.9812260Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 8 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:47:52.9813255Z         filtering to 'Last 7 Days'
2024-02-18T17:47:55.3488284Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:47:55.3490353Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 8 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:47:55.3491718Z         filtering to 'This Year'
2024-02-18T17:47:57.7716308Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:47:57.7717534Z     Signage
2024-02-18T17:48:00.6550837Z       shows their organization name unless they have a logo set
2024-02-18T17:48:00.6551849Z     Inventory Totals
2024-02-18T17:48:00.6552632Z       Summary
2024-02-18T17:48:01.4001937Z         displays the on-hand totals
2024-02-18T17:48:01.4002717Z         when constrained to date range
2024-02-18T17:48:02.4766450Z           does not change
2024-02-18T17:48:02.4767229Z     Donations
2024-02-18T17:48:03.3850014Z       has a link to create a new donation
2024-02-18T17:48:03.3851711Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:48:03.3853239Z         filtering to 'Last Month'
2024-02-18T17:48:06.7522259Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T17:48:06.7523905Z       given 1 Donation on 2022-02-17 (only if a valid date), 3 during 2022-02-18..2023-10-14, and 1 on 2023-10-15
2024-02-18T17:48:06.7524840Z         filtering to '' (February 18, 2022 - October 14, 2023)
2024-02-18T17:48:08.2918905Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:48:08.2920725Z       given 1 Donation on 2024-01-19 (only if a valid date), 1 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:08.2922038Z         filtering to 'Last 30 Days'
2024-02-18T17:48:09.6983152Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:48:09.6985000Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:48:09.6986473Z         filtering to 'This Year'
2024-02-18T17:48:11.0788630Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:48:11.0790598Z       given 1 Donation on 2024-02-16 (only if a valid date), 1 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:48:11.0791822Z         filtering to 'Yesterday'
2024-02-18T17:48:12.4326764Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:48:12.4330514Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:48:12.4331911Z         filtering to 'This Month'
2024-02-18T17:48:13.9258169Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:48:13.9259903Z       given 1 Donation on 2024-02-17 (only if a valid date), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:13.9261329Z         filtering to 'Today'
2024-02-18T17:48:15.3801592Z           shows the correct total and 2 Recent Donation link(s)
2024-02-18T17:48:15.3803516Z       given 1 Donation on 2024-02-11 (only if a valid date), 1 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:15.3804385Z         filtering to 'Last 7 Days'
2024-02-18T17:48:16.7558185Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:48:16.7559102Z     Purchases
2024-02-18T17:48:17.6430332Z       has a link to create a new purchase
2024-02-18T17:48:17.6432057Z       given 1 Purchase on 2024-02-16  (unless 'All Time'), 1 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:48:17.6433639Z         filtering to 'Yesterday'
2024-02-18T17:48:19.0531488Z           shows correct 1 Recent Purchase link(s)
2024-02-18T17:48:19.0533204Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:19.0534850Z         filtering to 'Today'
2024-02-18T17:48:20.5737469Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:48:20.5739120Z       given 1 Purchase on 2024-01-19  (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:20.5741436Z         filtering to 'Last 30 Days'
2024-02-18T17:48:22.1026177Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:48:22.1028049Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:48:22.1029364Z         filtering to 'Last Month'
2024-02-18T17:48:23.6006747Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:48:23.6008630Z       given 1 Purchase on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2024-02-16, and 1 on 2024-02-17
2024-02-18T17:48:23.6010328Z         filtering to '' (February 18, 2022 - February 16, 2024)
2024-02-18T17:48:25.1481741Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:48:25.1483407Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:48:25.1484305Z         filtering to 'Last 7 Days'
2024-02-18T17:48:26.5970192Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:48:26.5971933Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:48:26.5973440Z         filtering to 'This Month'
2024-02-18T17:48:28.1351494Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:48:28.1352990Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:48:28.1354357Z         filtering to 'This Year'
2024-02-18T17:48:29.5249387Z           shows correct 1 Recent Purchase link(s)
2024-02-18T17:48:29.5250497Z   With a new essentials bank
2024-02-18T17:48:57.5240684Z     displays the getting started guide until the steps are completed
2024-02-18T17:48:57.5241552Z 
2024-02-18T17:48:57.5241843Z Admin::Organizations
2024-02-18T17:48:57.5243280Z   When logged in as a non-admin user
2024-02-18T17:48:57.5244332Z     GET #index
2024-02-18T17:48:57.5390465Z       redirects
2024-02-18T17:48:57.5391013Z     PUT #update
2024-02-18T17:48:57.5514422Z       redirects
2024-02-18T17:48:57.5515065Z     GET #edit
2024-02-18T17:48:57.5632850Z       redirects
2024-02-18T17:48:57.5633755Z     GET #new
2024-02-18T17:48:57.5752389Z       redirects
2024-02-18T17:48:57.5955181Z     POST #create
2024-02-18T17:48:57.5955768Z       redirects
2024-02-18T17:48:57.5957062Z   When logged in as a super admin
2024-02-18T17:48:57.5957578Z     PUT #update
2024-02-18T17:48:57.6135894Z       redirect
2024-02-18T17:48:57.6136385Z     PATCH #update
2024-02-18T17:48:57.6137051Z       with a valid update
2024-02-18T17:48:57.8084171Z         redirects to #index
2024-02-18T17:48:57.8084945Z       with an invalid update
2024-02-18T17:48:58.0211017Z         redirects to #edit with an error message
2024-02-18T17:48:58.2413425Z         returns http success
2024-02-18T17:48:58.2414033Z     DELETE #destroy
2024-02-18T17:48:58.2415034Z       with a valid organization id
2024-02-18T17:48:58.7638513Z         redirects to #index
2024-02-18T17:48:58.7639110Z     GET #new
2024-02-18T17:48:58.8024921Z       returns http success
2024-02-18T17:48:58.8025939Z       when given a token that matches a account request that has already been processed
2024-02-18T17:48:59.0123765Z         should render new with a flash error message
2024-02-18T17:48:59.0124928Z       when given a valid account request token in the query parameters
2024-02-18T17:48:59.0619356Z         should render new with pre populate input fields from the account_request
2024-02-18T17:48:59.0620764Z     GET #edit
2024-02-18T17:48:59.2839863Z       returns http success
2024-02-18T17:48:59.2840429Z     POST #create
2024-02-18T17:48:59.2840832Z       with valid params
2024-02-18T17:48:59.4956130Z         creates an organization and redirects to #index
2024-02-18T17:48:59.4958016Z       with invalid params
2024-02-18T17:48:59.5384693Z         does not create an organization and renders #create with an error message
2024-02-18T17:48:59.5385844Z     GET #show
2024-02-18T17:48:59.7423049Z       returns http success
2024-02-18T17:48:59.7424373Z     DELETE #destroy
2024-02-18T17:49:00.0877257Z       redirects
2024-02-18T17:49:00.0877723Z     GET #index
2024-02-18T17:49:00.1184211Z       returns http success
2024-02-18T17:49:00.1187058Z 
2024-02-18T17:49:00.1187336Z DonationSites
2024-02-18T17:49:00.1188181Z   while signed in
2024-02-18T17:49:00.1188950Z     GET #index
2024-02-18T17:49:00.1190256Z       csv
2024-02-18T17:49:00.1352971Z         is expected to be successful
2024-02-18T17:49:00.1353494Z       html
2024-02-18T17:49:00.1676945Z         is expected to be successful
2024-02-18T17:49:00.2538221Z W, [2024-02-18T09:49:00.253442 #2367]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-18T17:49:00.2540271Z W, [2024-02-18T09:49:00.253540 #2367]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:49:00.2542666Z W, [2024-02-18T09:49:00.253558 #2367]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:49:00.2544919Z W, [2024-02-18T09:49:00.253589 #2367]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-18T17:49:00.2548708Z 
2024-02-18T17:49:00.2553159Z Finished in 3 minutes 37.6 seconds (files took 8.05 seconds to load)
2024-02-18T17:49:00.2554089Z 235 examples, 0 failures
2024-02-18T17:49:00.2554426Z 
2024-02-18T17:49:00.2554599Z Randomized with seed 48752
2024-02-18T17:49:00.2554909Z 
2024-02-18T17:49:00.5570314Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6405 LOC (59.64%) covered.
2024-02-18T17:49:01.0811065Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
