2024-03-04T20:10:32.1838665Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T20:10:32.1839545Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T20:10:32.1868413Z shell: /usr/bin/bash -e {0}
2024-03-04T20:10:32.1868878Z env:
2024-03-04T20:10:32.1869227Z   POSTGRES_HOST: localhost
2024-03-04T20:10:32.1869630Z   DATABASE_HOST: localhost
2024-03-04T20:10:32.1870097Z   PG_USERNAME: postgres
2024-03-04T20:10:32.1870475Z   PG_PASSWORD: password
2024-03-04T20:10:32.1870831Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T20:10:32.1871322Z   POSTGRES_PORT: 5432
2024-03-04T20:10:32.1871678Z   PGHOST: localhost
2024-03-04T20:10:32.1872036Z   PGUSER: postgres
2024-03-04T20:10:32.1872452Z   RAILS_ENV: test
2024-03-04T20:10:32.1872778Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T20:10:32.1873219Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T20:10:32.1873693Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T20:10:32.1874147Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T20:10:32.1874753Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T20:10:32.1875381Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T20:10:32.1876036Z ##[endgroup]
2024-03-04T20:10:37.8419668Z W, [2024-03-04T20:10:37.841623 #2469]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T20:10:37.8421912Z W, [2024-03-04T20:10:37.841673 #2469]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:10:37.8424810Z W, [2024-03-04T20:10:37.841695 #2469]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:10:37.8430126Z W, [2024-03-04T20:10:37.841727 #2469]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T20:10:40.8331729Z W, [2024-03-04T20:10:40.832858 #2469]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T20:10:40.8333686Z W, [2024-03-04T20:10:40.832908 #2469]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:10:40.8335429Z W, [2024-03-04T20:10:40.832932 #2469]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:10:40.8337981Z W, [2024-03-04T20:10:40.832989 #2469]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T20:10:40.8388915Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T20:10:49.3365725Z 
2024-03-04T20:10:49.3366821Z Randomized with seed 39794
2024-03-04T20:10:50.3043593Z 
2024-03-04T20:10:50.3044533Z Purchases
2024-03-04T20:10:50.3045476Z   while signed in as an organization admin
2024-03-04T20:10:51.9394287Z     allows deletion of a purchase
2024-03-04T20:10:51.9395348Z   while signed in as a normal user
2024-03-04T20:10:51.9397894Z     When visiting an existing purchase
2024-03-04T20:10:52.4077121Z       does not allow deletion of a purchase
2024-03-04T20:10:52.4078079Z     When creating a new purchase
2024-03-04T20:10:52.9359118Z       should not display inactive storage locations in dropdown
2024-03-04T20:10:52.9360156Z       via manual entry
2024-03-04T20:10:54.1568551Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T20:10:55.2636410Z         User can create a purchase IN THE PAST
2024-03-04T20:10:56.1586406Z         User can create a purchase using dollars decimal amount
2024-03-04T20:10:57.1850261Z         Does not include inactive items in the line item fields
2024-03-04T20:10:58.2272438Z         User can create vendor from purchase
2024-03-04T20:10:58.2273278Z         when creating a purchase incorrectly
2024-03-04T20:10:59.2884122Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T20:11:00.1413799Z           should display failure with error messages
2024-03-04T20:11:00.1415013Z       Editing purchase
2024-03-04T20:11:00.6606146Z         A user can see purchased_from value
2024-03-04T20:11:01.2975484Z         A user can view another organizations purchase
2024-03-04T20:11:01.2976691Z       via barcode entry
2024-03-04T20:11:02.2236648Z         User scan same barcode 2 times
2024-03-04T20:11:02.9561611Z         a user can add items via scanning them in by barcode
2024-03-04T20:11:04.1866290Z         a user can add items that do not yet have a barcode
2024-03-04T20:11:04.1867624Z     When visiting the index page
2024-03-04T20:11:04.1868422Z       In the middle of the year
2024-03-04T20:11:04.9859120Z         User can click to the new purchase form
2024-03-04T20:11:05.7242211Z         User sees purchased date column
2024-03-04T20:11:06.4850972Z         User sees total purchases value
2024-03-04T20:11:06.4851903Z       When filtering on the index page
2024-03-04T20:11:07.3153320Z         User can filter the #index by vendor
2024-03-04T20:11:08.1371436Z         User can filter the #index by storage location
2024-03-04T20:11:08.1372182Z         behaves like Date Range Picker
2024-03-04T20:11:08.1373149Z           when choosing a date range that only includes the previous week
2024-03-04T20:11:09.0804890Z             shows only 1 record
2024-03-04T20:11:09.0805905Z           when choosing 'All Time'
2024-03-04T20:11:10.0484175Z             shows all the records
2024-03-04T20:11:10.0485299Z           when choosing 'Last Month'
2024-03-04T20:11:10.9994813Z             shows only 2 of the records
2024-03-04T20:11:10.9997098Z 
2024-03-04T20:11:10.9997500Z BarcodeItems
2024-03-04T20:11:10.9998842Z   While signed in
2024-03-04T20:11:11.0000309Z     GET #index
2024-03-04T20:11:11.0001130Z       csv
2024-03-04T20:11:11.0309207Z         is expected to be successful
2024-03-04T20:11:11.0310017Z       html
2024-03-04T20:11:11.0751756Z         is expected to be successful
2024-03-04T20:11:11.0752978Z     GET #new
2024-03-04T20:11:11.1073288Z       returns http success
2024-03-04T20:11:11.1074104Z     GET #show
2024-03-04T20:11:11.1075041Z       with a normal barcode item
2024-03-04T20:11:11.1434669Z         returns http success
2024-03-04T20:11:11.1435634Z       with a global barcode item
2024-03-04T20:11:11.1731718Z         returns a 404
2024-03-04T20:11:11.1732529Z     Looking at a different organization
2024-03-04T20:11:11.3484635Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T20:11:11.3485788Z     DELETE #destroy
2024-03-04T20:11:11.5544357Z       disallows a user to delete someone else's barcode
2024-03-04T20:11:11.5929325Z       redirects to the index
2024-03-04T20:11:11.6249748Z       disallows a non-superadmin to delete a global barcode
2024-03-04T20:11:11.6251439Z     GET #edit
2024-03-04T20:11:11.6255679Z       with a global barcode item
2024-03-04T20:11:11.6589710Z         returns a 404
2024-03-04T20:11:11.6590820Z       with a normal barcode item
2024-03-04T20:11:11.7019249Z         returns http success
2024-03-04T20:11:11.7020454Z     GET #find
2024-03-04T20:11:11.7021102Z       via ajax
2024-03-04T20:11:11.9124834Z         can find a barcode that's universally available
2024-03-04T20:11:12.1174251Z         can find a barcode that is scoped to just this organization
2024-03-04T20:11:12.1175200Z         when it's missing
2024-03-04T20:11:12.3180376Z           returns a 404
2024-03-04T20:11:12.3181478Z 
2024-03-04T20:11:12.3181776Z Admin::Partners
2024-03-04T20:11:12.3183265Z   When logged in as a super admin
2024-03-04T20:11:12.3184772Z     GET #index
2024-03-04T20:11:12.3530169Z       returns http success
2024-03-04T20:11:12.3530903Z     GET #edit
2024-03-04T20:11:12.4049400Z       returns http success
2024-03-04T20:11:12.4050225Z     PUT #update
2024-03-04T20:11:12.4050977Z       successful save
2024-03-04T20:11:12.4433117Z         updates partner
2024-03-04T20:11:12.4783234Z         redirects
2024-03-04T20:11:12.4783930Z       unsuccessful save due to empty params
2024-03-04T20:11:12.5312000Z         renders #edit template with error message
2024-03-04T20:11:12.5312847Z     GET #show
2024-03-04T20:11:12.5779396Z       returns http success
2024-03-04T20:11:12.5779958Z 
2024-03-04T20:11:12.5780558Z User account management
2024-03-04T20:11:12.5781351Z   when in staging
2024-03-04T20:11:13.0369228Z     should display staging warning
2024-03-04T20:11:13.4957868Z     should not allow the user to change staging credentials
2024-03-04T20:11:13.4959025Z   when not in staging
2024-03-04T20:11:14.4696648Z     should change the email
2024-03-04T20:11:15.2341388Z     should fail when the email is invalid
2024-03-04T20:11:16.1019941Z     should change an user name
2024-03-04T20:11:16.1020815Z 
2024-03-04T20:11:16.1021131Z /partners/profiles
2024-03-04T20:11:16.1023003Z   GET #show
2024-03-04T20:11:16.1775758Z     shows correct values for yes/no buttons
2024-03-04T20:11:16.2263032Z     displays the partner
2024-03-04T20:11:16.2263929Z   GET #edit
2024-03-04T20:11:16.3381774Z     does not have default radio button value when value is nil
2024-03-04T20:11:16.4291971Z     has "Yes" radio button value when value is true
2024-03-04T20:11:16.5161459Z     displays the partner
2024-03-04T20:11:16.6061277Z     has "No" radio button value when value is false
2024-03-04T20:11:16.6061971Z   PUT #update
2024-03-04T20:11:16.6645462Z     updates the partner and profile
2024-03-04T20:11:16.6646227Z     when updating an existing value to a blank value
2024-03-04T20:11:16.7157971Z       does not update other partner profile attributes to blank
2024-03-04T20:11:16.7655735Z       updates the partner profile attribute to a blank value
2024-03-04T20:11:16.8156053Z       does store N/A in the database
2024-03-04T20:11:16.8156799Z     with no social media
2024-03-04T20:11:16.9084691Z       shows an error
2024-03-04T20:11:16.9085737Z 
2024-03-04T20:11:16.9087972Z Donations
2024-03-04T20:11:16.9088831Z   while signed in
2024-03-04T20:11:16.9090033Z     when an non-finalized audit has been performed on the donated items
2024-03-04T20:11:17.0574619Z       does not shows a warning
2024-03-04T20:11:17.0575603Z     GET #index
2024-03-04T20:11:17.0576181Z       html
2024-03-04T20:11:17.1096259Z         should have the columns source and details
2024-03-04T20:11:17.1512524Z         is expected to be successful
2024-03-04T20:11:17.1513754Z         when given a donation site
2024-03-04T20:11:17.2037901Z           should display Donation Site and the name of the site
2024-03-04T20:11:17.2038994Z         when given a misc donation
2024-03-04T20:11:17.2599780Z           should display Misc Donation and a truncated comment
2024-03-04T20:11:17.2600959Z         when given a product drive
2024-03-04T20:11:17.3144529Z           should display Product Drive and the name of the drive
2024-03-04T20:11:17.3145832Z         when given a manufacturer
2024-03-04T20:11:17.3661052Z           should display Manufacturer and the manufacturer name
2024-03-04T20:11:17.3662021Z       csv
2024-03-04T20:11:17.3923315Z         is expected to be successful
2024-03-04T20:11:17.3924137Z     when no audit has been performed
2024-03-04T20:11:17.4904920Z       doesn't show a warning
2024-03-04T20:11:17.4905788Z     GET #edit
2024-03-04T20:11:17.4906560Z       when an finalized audit has been performed on the donated items
2024-03-04T20:11:17.6190082Z         shows a warning
2024-03-04T20:11:17.6190817Z 
2024-03-04T20:11:17.6191360Z /partners/children
2024-03-04T20:11:17.6192388Z   GET #index
2024-03-04T20:11:17.7128076Z     should render without any issues
2024-03-04T20:11:17.7619111Z     should export CSV
2024-03-04T20:11:17.7619894Z 
2024-03-04T20:11:17.7620198Z Managing requests
2024-03-04T20:11:17.7622292Z   creating a # individuals request
2024-03-04T20:11:17.7623469Z     GIVEN a partner user is permitted to make a request
2024-03-04T20:11:17.7625287Z       WHEN they create a request completely empty request
2024-03-04T20:11:18.7008116Z         should show an error message with the instructions
2024-03-04T20:11:18.7009133Z       WHEN they create a request with blank lines
2024-03-04T20:11:20.1163768Z         should be created without any issue
2024-03-04T20:11:20.1164888Z       WHEN they create a request with only a comment
2024-03-04T20:11:21.0884665Z         should be created without any issue
2024-03-04T20:11:21.0885702Z       WHEN they create a request properly
2024-03-04T20:11:21.0887261Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T20:11:23.3130421Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T20:11:23.3131546Z       Select Input Tests
2024-03-04T20:11:23.3133286Z         WHEN they reach the page
2024-03-04T20:11:24.1773085Z           should show the proper items in the select box
2024-03-04T20:11:24.1773778Z           WHEN they create a request improperly
2024-03-04T20:11:25.4962123Z             should show the proper items in the select box
2024-03-04T20:11:25.4963114Z       WHEN they create a request improperly by not inputting anything
2024-03-04T20:11:26.4115627Z         should show an error message with the instructions
2024-03-04T20:11:26.4116651Z   creating a new quantity request
2024-03-04T20:11:26.4118316Z     GIVEN a partner user is permitted to make a request
2024-03-04T20:11:26.4119618Z       Select Input Tests
2024-03-04T20:11:26.4120711Z         WHEN they reach the page
2024-03-04T20:11:27.2766554Z           should show the proper items in the select box
2024-03-04T20:11:27.2767644Z           WHEN they create a request improperly
2024-03-04T20:11:28.5955143Z             should show the proper items in the select box
2024-03-04T20:11:28.5956156Z       WHEN they create a request properly
2024-03-04T20:11:28.5957839Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T20:11:30.8401263Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T20:11:30.8402592Z       WHEN they create a request completely empty request
2024-03-04T20:11:31.7468368Z         should show an error message with the instructions
2024-03-04T20:11:31.7469563Z       WHEN they create a request with only a comment
2024-03-04T20:11:32.7045607Z         should be created without any issue
2024-03-04T20:11:32.7047072Z       WHEN they create a request with blank lines
2024-03-04T20:11:34.1075802Z         should be created without any issue
2024-03-04T20:11:34.1076931Z 
2024-03-04T20:11:34.1077511Z Organization management
2024-03-04T20:11:34.1078816Z   while signed in as a normal user
2024-03-04T20:11:34.5949331Z     can see summary details about the organization as a user
2024-03-04T20:11:35.0561227Z     cannot see 'Make user' button for admins
2024-03-04T20:11:35.0562274Z   while signed in as an organization admin
2024-03-04T20:11:35.5671009Z     can re-invite a user to an organization after 7 days
2024-03-04T20:11:36.5316199Z     can add a new user to an organization
2024-03-04T20:11:37.0359123Z     can see 'Make user' button for admins
2024-03-04T20:11:37.9912159Z     can re-activate a user in the organization
2024-03-04T20:11:38.9414557Z     can deactivate a user in the organization
2024-03-04T20:11:38.9415495Z     Editing the organization
2024-03-04T20:11:40.1305623Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T20:11:41.0955630Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T20:11:42.5741077Z       can select and deselect Required Partner Fields
2024-03-04T20:11:43.6027960Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T20:11:44.7613720Z       can enable if the org uses single step invite and approve partner process
2024-03-04T20:11:45.8090164Z       can select if the org repackages essentials
2024-03-04T20:11:46.7014417Z       can set a default storage location on the organization
2024-03-04T20:11:47.5621090Z       can set the NDBN Member ID
2024-03-04T20:11:48.5960324Z       can select if the org distributes essentials monthly
2024-03-04T20:11:49.5249913Z       can set a reminder and a deadline day
2024-03-04T20:11:49.5251249Z     Viewing the organization
2024-03-04T20:11:50.1419255Z       can view organization details
2024-03-04T20:11:50.1425916Z 
2024-03-04T20:11:50.1426600Z Dashboard
2024-03-04T20:11:50.1427707Z   With a new essentials bank
2024-03-04T20:12:18.1784729Z     displays the getting started guide until the steps are completed
2024-03-04T20:12:18.1785768Z   With an existing essentials bank
2024-03-04T20:12:18.1786533Z     Purchases
2024-03-04T20:12:19.0629729Z       has a link to create a new purchase
2024-03-04T20:12:19.0632195Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:12:19.0633486Z         filtering to 'This Month'
2024-03-04T20:12:22.3560938Z           shows correct 0 Recent Purchase link(s)
2024-03-04T20:12:22.3562813Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:22.3564349Z         filtering to 'Last 30 Days'
2024-03-04T20:12:23.6963044Z           shows correct 1 Recent Purchase link(s)
2024-03-04T20:12:23.6964835Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 4 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:23.6966533Z         filtering to 'Last 7 Days'
2024-03-04T20:12:25.1361487Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:12:25.1363469Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:25.1364610Z         filtering to 'Today'
2024-03-04T20:12:26.5538651Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:12:26.5540739Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 4 during 2022-03-04..2023-12-06, and 1 on 2023-12-07
2024-03-04T20:12:26.5542215Z         filtering to '' (March 4, 2022 - December 6, 2023)
2024-03-04T20:12:28.0203470Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:12:28.0205043Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:12:28.0206836Z         filtering to 'Last Month'
2024-03-04T20:12:29.4558261Z           shows correct 3 Recent Purchase link(s)
2024-03-04T20:12:29.4560034Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:12:29.4561535Z         filtering to 'Yesterday'
2024-03-04T20:12:30.9040921Z           shows correct 1 Recent Purchase link(s)
2024-03-04T20:12:30.9042951Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:12:30.9044268Z         filtering to 'This Year'
2024-03-04T20:12:32.2502183Z           shows correct 1 Recent Purchase link(s)
2024-03-04T20:12:32.2503029Z     Signage
2024-03-04T20:12:35.1643866Z       shows their organization name unless they have a logo set
2024-03-04T20:12:35.1645996Z     Donations
2024-03-04T20:12:36.0607714Z       has a link to create a new donation
2024-03-04T20:12:36.0609446Z       given 1 Donation on 2024-02-26 (only if a valid date), 1 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:36.0610865Z         filtering to 'Last 7 Days'
2024-03-04T20:12:37.4112877Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:12:37.4114776Z       given 1 Donation on 2022-03-03 (only if a valid date), 1 during 2022-03-04..2024-02-25, and 1 on 2024-02-26
2024-03-04T20:12:37.4116408Z         filtering to '' (March 4, 2022 - February 25, 2024)
2024-03-04T20:12:38.8105164Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:12:38.8106854Z       given 1 Donation on 2024-02-29 (only if a valid date), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:12:38.8107791Z         filtering to 'This Month'
2024-03-04T20:12:40.2667683Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:12:40.2669565Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:12:40.2670883Z         filtering to 'This Year'
2024-03-04T20:12:41.6728490Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:12:41.6730056Z       given 1 Donation on 2024-02-03 (only if a valid date), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:41.6731133Z         filtering to 'Last 30 Days'
2024-03-04T20:12:44.9872484Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T20:12:44.9874366Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:12:44.9875886Z         filtering to 'Last Month'
2024-03-04T20:12:46.3939706Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:12:46.3941328Z       given 1 Donation on 2024-03-03 (only if a valid date), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:46.3942330Z         filtering to 'Today'
2024-03-04T20:12:47.7386934Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T20:12:47.7388841Z       given 1 Donation on 2024-03-02 (only if a valid date), 4 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:12:47.7390115Z         filtering to 'Yesterday'
2024-03-04T20:12:49.3382801Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T20:12:49.3383767Z     Distributions
2024-03-04T20:12:50.2781200Z       has a link to create a new distribution
2024-03-04T20:12:50.2783483Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:12:50.2784946Z         filtering to 'Last Month'
2024-03-04T20:12:51.6843687Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T20:12:51.6845592Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 3 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:51.6847444Z         filtering to 'All Time'
2024-03-04T20:12:53.1076250Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:12:53.1078858Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 3 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:12:53.1080181Z         filtering to 'Yesterday'
2024-03-04T20:12:54.5512765Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:12:54.5514829Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:54.5516626Z         filtering to 'Last 7 Days'
2024-03-04T20:12:55.9472218Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T20:12:55.9474174Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 3 during 2022-03-04..2024-01-05, and 1 on 2024-01-06
2024-03-04T20:12:55.9475781Z         filtering to '' (March 4, 2022 - January 5, 2024)
2024-03-04T20:12:57.3924716Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:12:57.3928492Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:12:57.3929796Z         filtering to 'Last 30 Days'
2024-03-04T20:13:00.7556451Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T20:13:00.7558112Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:13:00.7559030Z         filtering to 'This Month'
2024-03-04T20:13:02.3049300Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T20:13:02.3051283Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:02.3052801Z         filtering to 'Today'
2024-03-04T20:13:05.6983898Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T20:13:05.6985617Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:13:05.6987047Z         filtering to 'This Year'
2024-03-04T20:13:09.0793572Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T20:13:09.0794642Z     Inventory Totals
2024-03-04T20:13:09.0795537Z       Summary
2024-03-04T20:13:09.7815881Z         displays the on-hand totals
2024-03-04T20:13:09.7816806Z         when constrained to date range
2024-03-04T20:13:10.7914254Z           does not change
2024-03-04T20:13:10.7917737Z     Manufacturer Donations
2024-03-04T20:13:11.3701279Z       has a link to create a new donation
2024-03-04T20:13:11.3702858Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 2 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:11.3704196Z         filtering to 'Last 30 Days'
2024-03-04T20:13:12.8893471Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-04T20:13:12.8898409Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 9 during 2022-03-04..2024-01-01, and 1 on 2024-01-02
2024-03-04T20:13:12.8900064Z         filtering to '' (March 4, 2022 - January 1, 2024)
2024-03-04T20:13:14.9643734Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T20:13:14.9645926Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:14.9647588Z         filtering to 'Today'
2024-03-04T20:13:16.5909236Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-04T20:13:16.5911167Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 8 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:13:16.5912209Z         filtering to 'Last Month'
2024-03-04T20:13:18.9002918Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T20:13:18.9004969Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 9 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:13:18.9006630Z         filtering to 'Yesterday'
2024-03-04T20:13:20.9204772Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T20:13:20.9206732Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:13:20.9207844Z         filtering to 'This Year'
2024-03-04T20:13:22.2693286Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T20:13:22.2695558Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:22.2697063Z         filtering to 'All Time'
2024-03-04T20:13:23.6747899Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T20:13:23.6749981Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:13:23.6751305Z         filtering to 'This Month'
2024-03-04T20:13:25.3213894Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-04T20:13:25.3215963Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 5 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:25.3217114Z         filtering to 'Last 7 Days'
2024-03-04T20:13:27.0393663Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-03-04T20:13:27.0394875Z     Product Drives
2024-03-04T20:13:27.6213916Z       has a widget for product drive summary data
2024-03-04T20:13:27.6215804Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T20:13:27.6217391Z         filtering to 'This Year'
2024-03-04T20:13:30.9448791Z           shows 0 Recent Donation link(s)
2024-03-04T20:13:32.2529524Z           shows the correct total donations
2024-03-04T20:13:33.5743187Z           shows the correct total money raised
2024-03-04T20:13:33.5744941Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T20:13:33.5746314Z         filtering to 'Yesterday'
2024-03-04T20:13:34.9339089Z           shows the correct total money raised
2024-03-04T20:13:36.3311044Z           shows the correct total donations
2024-03-04T20:13:37.6887905Z           shows 1 Recent Donation link(s)
2024-03-04T20:13:37.6890178Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T20:13:37.6891718Z         filtering to 'Last Month'
2024-03-04T20:13:39.1351437Z           shows the correct total donations
2024-03-04T20:13:40.6099129Z           shows the correct total money raised
2024-03-04T20:13:42.0522253Z           shows 3 Recent Donation link(s)
2024-03-04T20:13:42.0524360Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 1 during 2022-03-04..2024-01-07, and 1 on 2024-01-08
2024-03-04T20:13:42.0525887Z         filtering to '' (March 4, 2022 - January 7, 2024)
2024-03-04T20:13:43.4323890Z           shows the correct total money raised
2024-03-04T20:13:44.8340797Z           shows 1 Recent Donation link(s)
2024-03-04T20:13:46.2126788Z           shows the correct total donations
2024-03-04T20:13:46.2127861Z       Product drive behaviour with Mixed Donation types
2024-03-04T20:13:46.8904235Z         only shows product drive donations as product drive donations
2024-03-04T20:13:47.5659974Z         only counts product drive money raised
2024-03-04T20:13:48.2439959Z         only counts product drive donations for product drive
2024-03-04T20:13:48.2441916Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 4 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:48.2443165Z         filtering to 'Last 7 Days'
2024-03-04T20:13:49.6846234Z           shows 3 Recent Donation link(s)
2024-03-04T20:13:51.1147117Z           shows the correct total money raised
2024-03-04T20:13:52.5330832Z           shows the correct total donations
2024-03-04T20:13:52.5333403Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:52.5334696Z         filtering to 'Last 30 Days'
2024-03-04T20:13:53.9029624Z           shows 1 Recent Donation link(s)
2024-03-04T20:13:55.2876341Z           shows the correct total donations
2024-03-04T20:13:56.6334360Z           shows the correct total money raised
2024-03-04T20:13:56.6336456Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T20:13:56.6338082Z         filtering to 'Today'
2024-03-04T20:13:58.0357153Z           shows 3 Recent Donation link(s)
2024-03-04T20:13:59.4550025Z           shows the correct total money raised
2024-03-04T20:14:00.8617398Z           shows the correct total donations
2024-03-04T20:14:00.8619277Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T20:14:00.8620430Z         filtering to 'This Month'
2024-03-04T20:14:02.3007382Z           shows the correct total donations
2024-03-04T20:14:03.7981239Z           shows the correct total money raised
2024-03-04T20:14:05.3402318Z           shows 3 Recent Donation link(s)
2024-03-04T20:14:05.3404468Z 
2024-03-04T20:14:05.3406785Z StorageLocations
2024-03-04T20:14:05.3407609Z   While signed in
2024-03-04T20:14:05.3408991Z     PUT #deactivate
2024-03-04T20:14:05.3636389Z       discards
2024-03-04T20:14:05.3637104Z       with inventory
2024-03-04T20:14:05.4085836Z         does not discard
2024-03-04T20:14:05.4086767Z     GET #new
2024-03-04T20:14:05.5552747Z       returns http success
2024-03-04T20:14:05.5553539Z     PUT #reactivate
2024-03-04T20:14:05.5738636Z       undiscards
2024-03-04T20:14:05.5739658Z     Looking at a different organization
2024-03-04T20:14:05.7574735Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T20:14:05.7575921Z     GET #index
2024-03-04T20:14:05.7576473Z       csv
2024-03-04T20:14:05.7811969Z         succeeds
2024-03-04T20:14:05.8878516Z         includes headers followed by alphabetized item names
2024-03-04T20:14:05.8879449Z       html
2024-03-04T20:14:05.9296917Z         succeeds
2024-03-04T20:14:05.9297579Z         with inactive locations
2024-03-04T20:14:05.9716372Z           does not includes the inactive location
2024-03-04T20:14:05.9717714Z           with include_inactive_locations
2024-03-04T20:14:06.0176420Z             includes the inactive location
2024-03-04T20:14:06.0177547Z     POST #import_csv
2024-03-04T20:14:06.0178662Z       csv file with wrong headers
2024-03-04T20:14:06.0335032Z         redirects
2024-03-04T20:14:06.0716561Z         presents a flash error message
2024-03-04T20:14:06.0717330Z       without a csv file
2024-03-04T20:14:06.0717823Z         presents a flash error message
2024-03-04T20:14:06.0758974Z         redirects to :index
2024-03-04T20:14:06.0759511Z       with a csv file
2024-03-04T20:14:06.0948363Z         presents a flash notice message
2024-03-04T20:14:06.1006144Z         invokes .import_csv
2024-03-04T20:14:06.1171405Z         redirects
2024-03-04T20:14:06.1171916Z     GET #destroy
2024-03-04T20:14:06.1456104Z       redirects to #index
2024-03-04T20:14:06.1456712Z     GET #inventory
2024-03-04T20:14:06.1457698Z       when also including omitted items
2024-03-04T20:14:06.1958723Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T20:14:06.2447953Z         contains a collection of ducktyped entries that respond the same
2024-03-04T20:14:06.2448885Z       when also including inactive items
2024-03-04T20:14:06.3151078Z         returns a collection that also includes items that have been deactivated
2024-03-04T20:14:06.3152089Z       without any overrides
2024-03-04T20:14:06.3675149Z         returns a collection that only includes items at the storage location
2024-03-04T20:14:06.3676017Z     GET #show
2024-03-04T20:14:06.3676460Z       html
2024-03-04T20:14:06.4352716Z         should return a correct response
2024-03-04T20:14:06.4354000Z         with version date set
2024-03-04T20:14:06.4354649Z           with a version found
2024-03-04T20:14:06.5208035Z             should show the version specified
2024-03-04T20:14:06.5208771Z           with no version found
2024-03-04T20:14:06.5948866Z             should show N/A
2024-03-04T20:14:06.5949926Z       csv
2024-03-04T20:14:06.6418422Z         should be successful
2024-03-04T20:14:06.6419090Z     GET #edit
2024-03-04T20:14:06.6759629Z       returns http success
2024-03-04T20:14:06.6760383Z   While not signed in
2024-03-04T20:14:06.6825524Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T20:14:06.6826262Z 
2024-03-04T20:14:06.6826428Z Adjustments
2024-03-04T20:14:06.6827654Z   while signed in
2024-03-04T20:14:06.6828993Z     GET #index
2024-03-04T20:14:06.6829999Z       csv
2024-03-04T20:14:06.7144507Z         is expected to be successful
2024-03-04T20:14:06.7145146Z       html
2024-03-04T20:14:06.7569184Z         is successful
2024-03-04T20:14:06.7569786Z         when filtering by date
2024-03-04T20:14:06.7570475Z           when date parameters are not supplied
2024-03-04T20:14:06.8203950Z             returns all objects
2024-03-04T20:14:06.8204464Z           when date parameters are supplied
2024-03-04T20:14:06.8748716Z             only returns the correct objects
2024-03-04T20:14:06.8749487Z     POST #create
2024-03-04T20:14:06.8750704Z       with valid params
2024-03-04T20:14:06.9094050Z         assigns a newly created adjustment as @adjustment
2024-03-04T20:14:06.9406223Z         creates a new Adjustment
2024-03-04T20:14:06.9690990Z         assigns a user id from the current user
2024-03-04T20:14:06.9974285Z         redirects to the #show after created adjustment
2024-03-04T20:14:06.9975067Z       with invalid params
2024-03-04T20:14:07.0361853Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T20:14:07.0771458Z         re-renders the 'new' template
2024-03-04T20:14:07.0772157Z     GET #new
2024-03-04T20:14:07.1210536Z       is successful
2024-03-04T20:14:07.1211053Z     GET #show
2024-03-04T20:14:07.1583006Z       is expected to be successful
2024-03-04T20:14:07.1583610Z 
2024-03-04T20:14:07.1583773Z Profiles
2024-03-04T20:14:07.1585274Z   GET #edit
2024-03-04T20:14:07.2598012Z     returns http success
2024-03-04T20:14:07.2598727Z   POST #update
2024-03-04T20:14:07.2599414Z     when updating an existing value to a blank value
2024-03-04T20:14:07.3111977Z       update partner
2024-03-04T20:14:07.3571465Z       should have blank values
2024-03-04T20:14:07.3572143Z     successful save
2024-03-04T20:14:07.4022098Z       redirects to #show
2024-03-04T20:14:07.4495854Z       update partner
2024-03-04T20:14:07.4496798Z 
2024-03-04T20:14:07.4499233Z Kit management
2024-03-04T20:14:08.3818548Z   can create a new kit as a user with the proper quantity
2024-03-04T20:14:08.9617882Z   should not display inactive storage locations under allocations
2024-03-04T20:14:10.4231846Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T20:14:10.4232720Z   when there is no kit quantity
2024-03-04T20:14:11.5621104Z     will not change quantity amounts when deallocating
2024-03-04T20:14:11.5622487Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T20:14:12.6616122Z     will not change quantity amounts when allocating
2024-03-04T20:14:12.6616746Z 
2024-03-04T20:14:12.6616977Z Vendor
2024-03-04T20:14:12.6618696Z   when creating a new vendor
2024-03-04T20:14:13.4583917Z     can create a new vendor instance as a user
2024-03-04T20:14:14.1988221Z     cannot add a new vendor instance with empty attributes
2024-03-04T20:14:14.1988937Z   when editing an existing vendor
2024-03-04T20:14:14.9785125Z     can update the contact info for a vendor as a user
2024-03-04T20:14:15.7487417Z     does not update a vendor with empty attributes
2024-03-04T20:14:15.7488259Z   When a user views the index page
2024-03-04T20:14:16.2410688Z     should have the vendor names in alphabetical order
2024-03-04T20:14:16.2412039Z   When vendor have purchases associated with them already
2024-03-04T20:14:16.8282882Z     can have existing vendors show in the #index with some summary stats
2024-03-04T20:14:17.4040226Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T20:14:17.4040952Z 
2024-03-04T20:14:17.4041555Z Admin Organization Management
2024-03-04T20:14:17.4042996Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T20:14:19.3925372Z     creates a new organization
2024-03-04T20:14:19.3926196Z   While signed in as an Administrative User (super admin)
2024-03-04T20:14:20.5004605Z     filters by organizations by name in organizations index page
2024-03-04T20:14:22.4093881Z     creates a new organization
2024-03-04T20:14:23.7098427Z     can view organization details
2024-03-04T20:14:23.7212075Z W, [2024-03-04T12:14:23.720940 #2504]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T20:14:23.7214195Z W, [2024-03-04T12:14:23.720999 #2504]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T20:14:23.7216139Z W, [2024-03-04T12:14:23.721017 #2504]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T20:14:23.7217800Z W, [2024-03-04T12:14:23.721050 #2504]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T20:14:23.7218532Z 
2024-03-04T20:14:23.7218777Z Finished in 3 minutes 34.4 seconds (files took 8.27 seconds to load)
2024-03-04T20:14:23.7219269Z 233 examples, 0 failures
2024-03-04T20:14:23.7219459Z 
2024-03-04T20:14:23.7219572Z Randomized with seed 39794
2024-03-04T20:14:23.7219768Z 
2024-03-04T20:14:24.0274522Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3867 / 6475 LOC (59.72%) covered.
2024-03-04T20:14:24.5518243Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
