2024-02-25T03:19:44.4780594Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-25T03:19:44.4781486Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-25T03:19:44.4809203Z shell: /usr/bin/bash -e {0}
2024-02-25T03:19:44.4809673Z env:
2024-02-25T03:19:44.4810020Z   POSTGRES_HOST: localhost
2024-02-25T03:19:44.4810408Z   DATABASE_HOST: localhost
2024-02-25T03:19:44.4810864Z   PG_USERNAME: postgres
2024-02-25T03:19:44.4811217Z   PG_PASSWORD: password
2024-02-25T03:19:44.4811592Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-25T03:19:44.4812084Z   POSTGRES_PORT: 5432
2024-02-25T03:19:44.4812436Z   PGHOST: localhost
2024-02-25T03:19:44.4812838Z   PGUSER: postgres
2024-02-25T03:19:44.4813426Z   RAILS_ENV: test
2024-02-25T03:19:44.4813794Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-25T03:19:44.4814311Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-25T03:19:44.4814731Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-25T03:19:44.4815177Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-25T03:19:44.4815787Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-25T03:19:44.4816435Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-25T03:19:44.4817416Z   EVENTS_READ: true
2024-02-25T03:19:44.4817755Z ##[endgroup]
2024-02-25T03:19:50.2732785Z W, [2024-02-25T03:19:50.272896 #2296]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-25T03:19:50.2735074Z W, [2024-02-25T03:19:50.272963 #2296]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T03:19:50.2737560Z W, [2024-02-25T03:19:50.272980 #2296]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T03:19:50.2743125Z W, [2024-02-25T03:19:50.273004 #2296]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-25T03:19:52.8716234Z W, [2024-02-25T03:19:52.871293 #2296]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-25T03:19:52.8718502Z W, [2024-02-25T03:19:52.871342 #2296]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T03:19:52.8721197Z W, [2024-02-25T03:19:52.871357 #2296]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T03:19:52.8725580Z W, [2024-02-25T03:19:52.871416 #2296]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-25T03:19:52.8793300Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-02-25T03:20:01.4779231Z 
2024-02-25T03:20:01.4780127Z Randomized with seed 35108
2024-02-25T03:20:02.3025728Z 
2024-02-25T03:20:02.3026436Z Distribution
2024-02-25T03:20:02.3028084Z   behaves like itemizable
2024-02-25T03:20:02.3029051Z     .to_a
2024-02-25T03:20:02.3030186Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T03:20:02.3919068Z         calls line_item_values
2024-02-25T03:20:02.3919957Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T03:20:02.4291814Z         raises an error
2024-02-25T03:20:02.4292393Z     .line_items
2024-02-25T03:20:02.4293638Z       quantities_by_name
2024-02-25T03:20:02.5196185Z         returns a hash of items with id, name, and quantity
2024-02-25T03:20:02.6049446Z         leaves out zero-quantitied items if requested
2024-02-25T03:20:02.6050009Z       sorted
2024-02-25T03:20:02.7282971Z         displays the items, sorted by name
2024-02-25T03:20:02.7283662Z       total
2024-02-25T03:20:02.8147401Z         has an item total
2024-02-25T03:20:02.8148139Z       combine!
2024-02-25T03:20:02.8582073Z         combines multiple line_items with the same item_id into a single record
2024-02-25T03:20:02.9199254Z         incrementally combines line_items on donations that have already been created
2024-02-25T03:20:02.9200612Z   versioning
2024-02-25T03:20:02.9238028Z     is expected to be versioned
2024-02-25T03:20:02.9238705Z   Methods >
2024-02-25T03:20:02.9239579Z     #combine_duplicates
2024-02-25T03:20:02.9632667Z       condenses duplicate line_items if the item_ids match
2024-02-25T03:20:02.9633796Z     #future?
2024-02-25T03:20:02.9634401Z       when issued_at has not passed
2024-02-25T03:20:02.9893277Z         returns true
2024-02-25T03:20:02.9893999Z       when issued_at has passed
2024-02-25T03:20:03.0151035Z         returns false
2024-02-25T03:20:03.0151716Z     #distributed_at
2024-02-25T03:20:03.0652273Z       displays explicit issued_at date
2024-02-25T03:20:03.1172561Z       shows the hour and minutes if it has been provided
2024-02-25T03:20:03.1173509Z     #copy_from_request
2024-02-25T03:20:03.1503471Z       copy over relevant request information into the distrubution
2024-02-25T03:20:03.1504384Z     #copy_line_items
2024-02-25T03:20:03.1923088Z       replicates line_items from a donation into a distribution
2024-02-25T03:20:03.1924113Z   Callbacks >
2024-02-25T03:20:03.2430082Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T03:20:03.2431168Z     #before_save
2024-02-25T03:20:03.2431691Z       #reset_shipping_cost
2024-02-25T03:20:03.2432237Z         when delivery_method is other then shipped
2024-02-25T03:20:03.2722103Z           distribution will be created successfully and the shipping_cost will be zero
2024-02-25T03:20:03.2723914Z   Validations >
2024-02-25T03:20:03.2762477Z     ensures that any included items are found in the associated storage location
2024-02-25T03:20:03.2825209Z     ensures that the issued at is no earlier than 2000
2024-02-25T03:20:03.2879053Z     must belong to an organization
2024-02-25T03:20:03.2928702Z     requires a partner
2024-02-25T03:20:03.3349215Z     ensures the associated line_items are valid
2024-02-25T03:20:03.3506222Z     ensures the associated line_items are invalid with a nil quantity
2024-02-25T03:20:03.3555981Z     requires a storage location
2024-02-25T03:20:03.3710391Z     ensures the associated line_items are invalid with a zero quantity
2024-02-25T03:20:03.3711656Z     when delivery method is other then shipped
2024-02-25T03:20:03.3973443Z       allows to save distribution
2024-02-25T03:20:03.3974226Z     when delivery method is shipped
2024-02-25T03:20:03.3975036Z       shipping cost is none negative
2024-02-25T03:20:03.4249673Z         allows to save distribution
2024-02-25T03:20:03.4250459Z       shipping cost is negative
2024-02-25T03:20:03.4311685Z         will not allow to save distribution
2024-02-25T03:20:03.4312508Z   Scopes >
2024-02-25T03:20:03.4313468Z     during >
2024-02-25T03:20:03.5021998Z       returns all distributions created between two dates
2024-02-25T03:20:03.5023228Z     by_item_id >
2024-02-25T03:20:03.6365212Z       only returns distributions with given item id
2024-02-25T03:20:03.6366118Z     this_week >
2024-02-25T03:20:03.6367215Z       When it's Tuesday (mid-week)
2024-02-25T03:20:03.7078906Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-02-25T03:20:03.7569530Z       When it's Sunday (end of the week)
2024-02-25T03:20:03.7570463Z         doesn't include distributions past Sunday
2024-02-25T03:20:03.7570967Z     by_partner >
2024-02-25T03:20:03.8064628Z       only returns distributions with given partner id
2024-02-25T03:20:03.8065493Z     by_location >
2024-02-25T03:20:03.8583519Z       only returns distributions with given location id
2024-02-25T03:20:03.8584678Z   CSV export >
2024-02-25T03:20:03.8585247Z     for_csv_export >
2024-02-25T03:20:04.1804725Z       filters only to the given filter
2024-02-25T03:20:04.5089933Z       filters only to the given issue time range
2024-02-25T03:20:04.8455367Z       filters only to the given organization
2024-02-25T03:20:04.8455975Z     csv_export_attributes
2024-02-25T03:20:05.2454871Z       returns the set of attributes which define a row in case of distribution export
2024-02-25T03:20:05.2455794Z 
2024-02-25T03:20:05.2456187Z Partners::RequestCreateService
2024-02-25T03:20:05.2456807Z   #call
2024-02-25T03:20:05.2457481Z     when the arguments are correct
2024-02-25T03:20:05.2923761Z       should notify the Partner via email
2024-02-25T03:20:05.3281968Z       should have no errors
2024-02-25T03:20:05.3649992Z       should create a Request record
2024-02-25T03:20:05.3650975Z       but a unexpected error occured during the save
2024-02-25T03:20:05.3651805Z         for the Request record
2024-02-25T03:20:05.4022870Z           should NOT create a Request record
2024-02-25T03:20:05.4378604Z           should have an error with the raised error
2024-02-25T03:20:05.4733164Z           should NOT notify the Partner via email
2024-02-25T03:20:05.4735741Z     when the arguments are incorrect
2024-02-25T03:20:05.4736817Z       because a unrecogonized item_id was provided
2024-02-25T03:20:05.5046455Z         should return the Request object with an error
2024-02-25T03:20:05.5047678Z       because no item_requests_attributes and comments were defined
2024-02-25T03:20:05.5305755Z         should return the Request object with an error
2024-02-25T03:20:05.5306392Z 
2024-02-25T03:20:05.5306656Z DispersedPastDatesGenerator
2024-02-25T03:20:05.5307778Z   constants
2024-02-25T03:20:05.5343109Z     has 4 day ranges for generation of past dates
2024-02-25T03:20:05.5343909Z   #next
2024-02-25T03:20:05.5391322Z     returns equally dispersed dates between all time ranges
2024-02-25T03:20:05.5392409Z 
2024-02-25T03:20:05.5392627Z User
2024-02-25T03:20:05.5451578Z   has a valid factory
2024-02-25T03:20:05.5452177Z   Methods >
2024-02-25T03:20:05.5530699Z     #invitation_status
2024-02-25T03:20:05.5580398Z     discarded?
2024-02-25T03:20:05.6043508Z     #kind
2024-02-25T03:20:05.6121678Z     #reinvitable?
2024-02-25T03:20:05.6122439Z   Scopes >
2024-02-25T03:20:05.6123456Z     ->alphabetized
2024-02-25T03:20:05.6341079Z       retrieves users in the correct order
2024-02-25T03:20:05.6341771Z   omniauth
2024-02-25T03:20:05.6475519Z     retrieves the user from an omniauth context
2024-02-25T03:20:05.6476366Z   versioning
2024-02-25T03:20:05.6513832Z     is expected to be versioned
2024-02-25T03:20:05.6514612Z   Validations >
2024-02-25T03:20:05.6705172Z     requires an email that is formatted correctly
2024-02-25T03:20:05.6790142Z     requires a name
2024-02-25T03:20:05.6790878Z   Scopes >
2024-02-25T03:20:05.6791629Z     ->alphabetized
2024-02-25T03:20:05.7197469Z       retrieves users in the correct order
2024-02-25T03:20:05.7198576Z 
2024-02-25T03:20:05.7199109Z Organization
2024-02-25T03:20:05.7201693Z   #ordered_requests
2024-02-25T03:20:05.9105642Z     puts active requests before fulfilled requests
2024-02-25T03:20:05.9106830Z     ordering of requests with matching status
2024-02-25T03:20:06.0967802Z       puts the most recently updated request before older requests
2024-02-25T03:20:06.0968765Z   from_email
2024-02-25T03:20:06.2831411Z     returns admin email when not present
2024-02-25T03:20:06.4852489Z     returns admin email when it's empty
2024-02-25T03:20:06.6768538Z     returns admin email when it's empty space
2024-02-25T03:20:06.8535945Z     returns email when present
2024-02-25T03:20:06.8536750Z   is_active
2024-02-25T03:20:07.2102532Z     returns active organizations
2024-02-25T03:20:07.2103073Z   geocode
2024-02-25T03:20:07.3777909Z     adds coordinates to the database
2024-02-25T03:20:07.3779000Z   earliest reporting year
2024-02-25T03:20:07.5494585Z     is the organization created year if no associated data
2024-02-25T03:20:07.7890244Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-02-25T03:20:07.7891442Z   validations
2024-02-25T03:20:07.7963139Z     validates that attachment file size is not higher than 1 MB
2024-02-25T03:20:07.8029546Z     validates that attachments are png or jpgs
2024-02-25T03:20:07.9720798Z     validates that short names are unique
2024-02-25T03:20:07.9815392Z     validates that at least one distribution type is enabled
2024-02-25T03:20:07.9816055Z   default storage location
2024-02-25T03:20:07.9857120Z     associates the default storage location with a storage location
2024-02-25T03:20:07.9888662Z     returns nil when not set
2024-02-25T03:20:07.9889198Z   #seed_items
2024-02-25T03:20:08.1784769Z     allows a collection of items to be seeded
2024-02-25T03:20:08.3541076Z     allows a single base item to be seeded
2024-02-25T03:20:08.3542511Z     when given an item name that already exists, but with an 'other' partner key
2024-02-25T03:20:08.5471018Z       updates the old item to use the new base item as its base
2024-02-25T03:20:08.5472044Z     when given an item that already exists
2024-02-25T03:20:08.7279320Z       gracefully skips the item
2024-02-25T03:20:08.7280196Z   .seed_items
2024-02-25T03:20:08.7280802Z     when provided with an organization to seed
2024-02-25T03:20:09.0424178Z       loads the base items into Item records
2024-02-25T03:20:09.0424931Z     when no organization is provided
2024-02-25T03:20:09.6704648Z       updates all organizations
2024-02-25T03:20:09.6705472Z   deadline_day
2024-02-25T03:20:09.6815681Z     can only contain numbers 1-28
2024-02-25T03:20:09.6816396Z   versioning
2024-02-25T03:20:09.6853462Z     is expected to be versioned
2024-02-25T03:20:09.6854365Z   #assign_attributes_from_account_request
2024-02-25T03:20:09.7023165Z     should assign the proper attributes to the organization
2024-02-25T03:20:09.7024232Z   address
2024-02-25T03:20:09.7059643Z     does not add any separators before the city when street is missing
2024-02-25T03:20:09.7093461Z     correctly formats an address string with commas and spaces
2024-02-25T03:20:09.7127911Z     returns an empty string when the org has no address components
2024-02-25T03:20:09.7159479Z     does not add any separators after street when city, state, and zip are missing
2024-02-25T03:20:09.7192949Z     does not add a trailing space when the zip code is missing
2024-02-25T03:20:09.7194052Z   total_inventory
2024-02-25T03:20:09.9588880Z     returns a sum total of all inventory at all storage locations
2024-02-25T03:20:10.1385224Z     returns 0 if there is nothing
2024-02-25T03:20:10.1386068Z   after_create
2024-02-25T03:20:10.1600275Z     should update the state of the account request
2024-02-25T03:20:10.1601407Z   #short_name
2024-02-25T03:20:10.1666944Z     can only contain valid characters
2024-02-25T03:20:10.1667875Z   valid_items
2024-02-25T03:20:10.3428715Z     returns an array of item partner keys
2024-02-25T03:20:10.5224106Z     only shows active valid items
2024-02-25T03:20:10.5224988Z     with invisible items
2024-02-25T03:20:10.5520436Z       only shows active and visible items
2024-02-25T03:20:10.5521434Z   Associations >
2024-02-25T03:20:10.5562690Z     is expected to have many users through roles
2024-02-25T03:20:10.5609006Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-25T03:20:10.5655513Z     is expected to have many item_categories
2024-02-25T03:20:10.5656358Z     barcode_items
2024-02-25T03:20:10.7493112Z       returns only this organization's barcodes, no globals
2024-02-25T03:20:10.7494313Z       .all
2024-02-25T03:20:10.9306727Z         includes global barcode items also
2024-02-25T03:20:10.9307465Z     users
2024-02-25T03:20:10.9308114Z       when a organizaton has a user that has two roles
2024-02-25T03:20:11.1138630Z         should returns users without duplications
2024-02-25T03:20:11.1139563Z     distributions
2024-02-25T03:20:11.1140089Z       upcoming
2024-02-25T03:20:11.1828892Z         retrieves the distributions scheduled for this week that have not yet happened
2024-02-25T03:20:11.1829969Z     items
2024-02-25T03:20:11.1830456Z       .other
2024-02-25T03:20:13.1272190Z         returns all items for this organization designated 'other'
2024-02-25T03:20:13.1273075Z       .during.bottom
2024-02-25T03:20:15.0620376Z         return just 3 elements
2024-02-25T03:20:17.0074543Z         return 3 least used items
2024-02-25T03:20:17.0075306Z       .during
2024-02-25T03:20:18.9442769Z         return ranking of all items
2024-02-25T03:20:18.9443701Z       .during.top
2024-02-25T03:20:20.9425694Z         return 3 most used items
2024-02-25T03:20:22.9691806Z         return just 3 elements
2024-02-25T03:20:22.9692568Z   reminder_day
2024-02-25T03:20:22.9816537Z     can only contain numbers 1-28
2024-02-25T03:20:22.9817402Z 
2024-02-25T03:20:22.9817618Z ReminderDeadlineMailer
2024-02-25T03:20:22.9818395Z   notify deadline
2024-02-25T03:20:23.0150303Z     renders the body
2024-02-25T03:20:23.0443154Z     renders the sender email
2024-02-25T03:20:23.0720750Z     renders the subject
2024-02-25T03:20:23.0994959Z     renders the receiver email
2024-02-25T03:20:23.0995566Z 
2024-02-25T03:20:23.0995800Z RequestsConfirmationMailer
2024-02-25T03:20:23.1216477Z   handles duplicates
2024-02-25T03:20:23.1506363Z   pairs the right quantities with the right item names
2024-02-25T03:20:23.1507260Z   #confirmation_email
2024-02-25T03:20:23.1639620Z     renders the headers
2024-02-25T03:20:23.1813781Z     renders the body
2024-02-25T03:20:23.1814619Z 
2024-02-25T03:20:23.1814991Z BaseItem
2024-02-25T03:20:23.1816897Z   Filtering >
2024-02-25T03:20:23.1818022Z     ->by_partner_key
2024-02-25T03:20:23.1872801Z       shows the Base Items by partner_key
2024-02-25T03:20:23.1873797Z     ->without_kit
2024-02-25T03:20:23.1925356Z       should not include the Kit BaseItem
2024-02-25T03:20:23.1926344Z   versioning
2024-02-25T03:20:23.1961361Z     is expected to be versioned
2024-02-25T03:20:23.1962093Z   Validations >
2024-02-25T03:20:23.2030705Z     is invalid without a unique name
2024-02-25T03:20:23.2073016Z     is invalid without a name
2024-02-25T03:20:23.2139038Z     is invalid without a uniqueness key
2024-02-25T03:20:23.2182948Z     is invalid without a partner key
2024-02-25T03:20:23.2183742Z   Associations >
2024-02-25T03:20:23.2304743Z     keeps count of its associated items
2024-02-25T03:20:23.2305446Z 
2024-02-25T03:20:23.2305755Z ProductDriveHelper
2024-02-25T03:20:23.2307656Z   #is_virtual
2024-02-25T03:20:23.2309273Z     when the product drive wasn't held virtually
2024-02-25T03:20:23.2445754Z       is expected to eq "No"
2024-02-25T03:20:23.2446549Z     when a product drive was not provided
2024-02-25T03:20:23.2488896Z       with blank argument
2024-02-25T03:20:23.2531559Z       without argument
2024-02-25T03:20:23.2532300Z     when the product drive was held virtually
2024-02-25T03:20:23.2584430Z       is expected to eq "Yes"
2024-02-25T03:20:23.2585363Z 
2024-02-25T03:20:23.2586071Z CustomDeviseMailer
2024-02-25T03:20:23.2587112Z   #invitation_instructions
2024-02-25T03:20:23.2588321Z     when other partner users invited
2024-02-25T03:20:23.3043602Z       invites to partner user
2024-02-25T03:20:23.3044896Z     when partner is invited
2024-02-25T03:20:23.3474435Z       invites to primary user
2024-02-25T03:20:23.3475369Z     when user is invited
2024-02-25T03:20:23.3653407Z       invites to user
2024-02-25T03:20:23.3836341Z       has invite expiration message
2024-02-25T03:20:23.3837400Z 
2024-02-25T03:20:23.3837752Z Vendor
2024-02-25T03:20:23.3838675Z   versioning
2024-02-25T03:20:23.3877072Z     is expected to be versioned
2024-02-25T03:20:23.3877854Z   behaves like provideable
2024-02-25T03:20:23.3878625Z     Validations
2024-02-25T03:20:23.3915058Z       is invalid without an organization
2024-02-25T03:20:23.3972718Z       is invalid unless it has either a contact name or a business name
2024-02-25T03:20:23.3974123Z     import_csv
2024-02-25T03:20:23.5725203Z       imports from a csv file
2024-02-25T03:20:23.5726307Z     geocode
2024-02-25T03:20:23.5786394Z       adds coordinates to the database
2024-02-25T03:20:23.5787233Z   Methods
2024-02-25T03:20:23.5787685Z     volume
2024-02-25T03:20:23.6490788Z       retrieves the amount of product that has been bought from this vendor
2024-02-25T03:20:23.6491670Z 
2024-02-25T03:20:23.6492121Z RequestDestroyService
2024-02-25T03:20:23.6492746Z   #call
2024-02-25T03:20:23.6640765Z     should return an instance of itself
2024-02-25T03:20:23.6641804Z     when the request is already discarded
2024-02-25T03:20:23.6743027Z       should not be successful and have errors
2024-02-25T03:20:23.6744234Z     when the request's partner is deactivated
2024-02-25T03:20:23.6998782Z       should have errors
2024-02-25T03:20:23.6999563Z     when the request_id matches no request
2024-02-25T03:20:23.7037365Z       should not be successful and have errors indicating request id is invalid
2024-02-25T03:20:23.7039005Z     when there are no validation errors
2024-02-25T03:20:23.7163246Z       should update the discarded_at column on the request
2024-02-25T03:20:23.7286210Z       should update the status column on the request
2024-02-25T03:20:23.7396629Z       should send a email notification to the partner
2024-02-25T03:20:23.7397418Z 
2024-02-25T03:20:23.7397804Z Partners::ItemRequest
2024-02-25T03:20:23.7399293Z   validations
2024-02-25T03:20:23.7460423Z     is expected to validate that :name cannot be empty/falsy
2024-02-25T03:20:23.7517506Z     is expected to validate that :quantity cannot be empty/falsy
2024-02-25T03:20:23.7573386Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-02-25T03:20:23.7627039Z     is expected to validate that :partner_key cannot be empty/falsy
2024-02-25T03:20:23.7628045Z   versioning
2024-02-25T03:20:23.7661839Z     is expected to be versioned
2024-02-25T03:20:23.7662569Z   associations
2024-02-25T03:20:23.7715228Z     is expected to have many child_item_requests dependent => destroy
2024-02-25T03:20:23.7754889Z     is expected to belong to request class_name => ::Request required: true
2024-02-25T03:20:23.7788522Z     is expected to have many children through child_item_requests
2024-02-25T03:20:23.7789309Z 
2024-02-25T03:20:23.7789760Z Reports::ChildrenServedReportService
2024-02-25T03:20:23.7790486Z   #report
2024-02-25T03:20:23.9503218Z     should report zero values
2024-02-25T03:20:24.4651854Z     should report normal values
2024-02-25T03:20:24.9624300Z     should work with no distribution_quantity
2024-02-25T03:20:24.9624975Z 
2024-02-25T03:20:24.9625266Z PartnerRequestRecertificationService
2024-02-25T03:20:24.9626370Z   #call
2024-02-25T03:20:24.9627416Z     when the arguments are incorrect
2024-02-25T03:20:24.9628477Z       because the partner has already been requested to recertify
2024-02-25T03:20:24.9923861Z         should return the PartnerRequestRecertificationService object with an error
2024-02-25T03:20:24.9925054Z     when the arguments are correct
2024-02-25T03:20:25.0235645Z       should change the partner status to approved
2024-02-25T03:20:25.0531088Z       should have no errors
2024-02-25T03:20:25.0821592Z       should queue sending the notice to the partner
2024-02-25T03:20:25.0822625Z       but a unexpected error occurred during the save
2024-02-25T03:20:25.0823633Z         for partner approval
2024-02-25T03:20:25.1094519Z           should not change the partner status to recertification_required
2024-02-25T03:20:25.1344643Z           should have an error with the raised error
2024-02-25T03:20:25.1594116Z           should NOT queue sending the notice to the partner
2024-02-25T03:20:25.1595089Z     when the partner is deactivated
2024-02-25T03:20:25.1876326Z       does not send an email
2024-02-25T03:20:25.1876969Z 
2024-02-25T03:20:25.1877338Z DistributionDestroyService
2024-02-25T03:20:25.1878165Z   #call
2024-02-25T03:20:25.1879361Z     when the distribution_id matches no Distribution
2024-02-25T03:20:25.1917913Z       to not be a success
2024-02-25T03:20:25.1918543Z     when the distribution_id does match a Distribution
2024-02-25T03:20:25.1919591Z       and the increase inventory operations fails
2024-02-25T03:20:25.3907479Z         should not be successful and have the error message
2024-02-25T03:20:25.5877800Z         should not delete the Distribution
2024-02-25T03:20:25.5878672Z       and the operations succeed
2024-02-25T03:20:25.8034068Z         should be successful
2024-02-25T03:20:26.0114777Z         should increase the inventory of the storage location
2024-02-25T03:20:26.2228060Z         should destroy the Distribution
2024-02-25T03:20:26.2228931Z       and the destroy! operation fails
2024-02-25T03:20:26.4243920Z         should not delete the Distribution
2024-02-25T03:20:26.6269860Z         should not be successful and have the error message
2024-02-25T03:20:26.6270500Z 
2024-02-25T03:20:26.6270875Z Audit
2024-02-25T03:20:26.6272397Z   Validations >
2024-02-25T03:20:26.6437370Z     must belong to an organization admin of its organization
2024-02-25T03:20:26.6986758Z     cannot have duplicate line items
2024-02-25T03:20:26.7549429Z     can have line items that has quantity as a positive integer
2024-02-25T03:20:26.7831785Z     must belong to an organization
2024-02-25T03:20:26.8351547Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-02-25T03:20:26.8864311Z     can not have line items that has quantity as negative integer
2024-02-25T03:20:26.9403052Z     can have line items that has quantity as zero
2024-02-25T03:20:26.9403862Z   behaves like itemizable
2024-02-25T03:20:26.9404639Z     .line_items
2024-02-25T03:20:26.9405787Z       combine!
2024-02-25T03:20:26.9963688Z         combines multiple line_items with the same item_id into a single record
2024-02-25T03:20:27.0330260Z         incrementally combines line_items on donations that have already been created
2024-02-25T03:20:27.0331219Z       quantities_by_name
2024-02-25T03:20:27.1126221Z         leaves out zero-quantitied items if requested
2024-02-25T03:20:27.1935390Z         returns a hash of items with id, name, and quantity
2024-02-25T03:20:27.1936471Z       sorted
2024-02-25T03:20:27.3181293Z         displays the items, sorted by name
2024-02-25T03:20:27.3182143Z       total
2024-02-25T03:20:27.4024882Z         has an item total
2024-02-25T03:20:27.4025679Z     .to_a
2024-02-25T03:20:27.4026316Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T03:20:27.4511149Z         raises an error
2024-02-25T03:20:27.4512056Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T03:20:27.4988185Z         calls line_item_values
2024-02-25T03:20:27.4988939Z   Scopes >
2024-02-25T03:20:27.5436026Z     `at_location` can filter out audits to a specific location
2024-02-25T03:20:27.5436908Z   versioning
2024-02-25T03:20:27.5473757Z     is expected to be versioned
2024-02-25T03:20:27.5474668Z   Methods >
2024-02-25T03:20:27.7883041Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-02-25T03:20:28.1382788Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-02-25T03:20:28.1384062Z 
2024-02-25T03:20:28.1384268Z ItemsInTotalQuery
2024-02-25T03:20:28.1384816Z   items_in_total_query
2024-02-25T03:20:28.3811685Z     does not count transfers going in the negative direction
2024-02-25T03:20:28.5951457Z     does not count negative adjustments towards in-flow
2024-02-25T03:20:28.9664015Z     counts shared items together
2024-02-25T03:20:29.2502467Z     does not count donations, purchases, adjustments to other storage locations
2024-02-25T03:20:29.4159101Z     returns a sum total of all in-flows
2024-02-25T03:20:29.4159734Z 
2024-02-25T03:20:29.4160254Z OrganizationUpdateService
2024-02-25T03:20:29.4161592Z   #update_partner_flags
2024-02-25T03:20:29.4162763Z     when request flags have changed
2024-02-25T03:20:29.6522503Z       should NOT update partners' request flags when enabling request flags on the organization
2024-02-25T03:20:29.8727123Z       should update partners when disabling child and individual request flags
2024-02-25T03:20:30.0916561Z       should update partners when disabling quantity-based request flags
2024-02-25T03:20:30.0917763Z     when request flags haven't changed
2024-02-25T03:20:30.3034263Z       should not update partners
2024-02-25T03:20:30.3035466Z   #update
2024-02-25T03:20:30.3036064Z     when organization has partners
2024-02-25T03:20:30.3037331Z       when all of a single partner's request flags WILL NOT be disabled
2024-02-25T03:20:30.5311776Z         should allow the disabling of request flags in organization and its partners
2024-02-25T03:20:30.5312879Z       when all of a single partner's request flags will be disabled
2024-02-25T03:20:30.7493770Z         should NOT change request flags in organization or its partners
2024-02-25T03:20:30.9635147Z         should add an error message to the organization
2024-02-25T03:20:30.9636216Z     when object is valid
2024-02-25T03:20:31.1446467Z       should update and return true
2024-02-25T03:20:31.1447082Z     when object is invalid
2024-02-25T03:20:31.3194283Z       should not update and return false
2024-02-25T03:20:31.3194954Z 
2024-02-25T03:20:31.3195175Z PartnerInviteService
2024-02-25T03:20:31.3502972Z   should create invite
2024-02-25T03:20:31.3805686Z   should update the status of the partner to invited
2024-02-25T03:20:31.3806282Z   with force: true
2024-02-25T03:20:31.4095768Z     should send the force setting forward
2024-02-25T03:20:31.4096352Z 
2024-02-25T03:20:31.4096556Z DeadlineService
2024-02-25T03:20:31.4097464Z   #next_deadline
2024-02-25T03:20:31.4098432Z     from the organization
2024-02-25T03:20:31.4099276Z       when the deadline is today
2024-02-25T03:20:31.4210298Z         returns a date in the next month
2024-02-25T03:20:31.4211167Z       when the deadline is before today
2024-02-25T03:20:31.4265805Z         returns a date in the next month
2024-02-25T03:20:31.4266677Z       when the deadline is after today
2024-02-25T03:20:31.4319592Z         returns a date within the current month
2024-02-25T03:20:31.4322226Z     do from the partner group
2024-02-25T03:20:31.4323619Z       when the deadline is after today
2024-02-25T03:20:31.4376384Z         returns a date within the current month
2024-02-25T03:20:31.4377365Z       when the deadline is before today
2024-02-25T03:20:31.4427252Z         returns a date in the next month
2024-02-25T03:20:31.4428002Z       when the deadline is today
2024-02-25T03:20:31.4478721Z         returns a date in the next month
2024-02-25T03:20:31.4479635Z 
2024-02-25T03:20:31.4480032Z UserInviteService
2024-02-25T03:20:31.4480990Z   with a new user
2024-02-25T03:20:31.7074289Z     should create the user with roles
2024-02-25T03:20:31.7074880Z   with existing user
2024-02-25T03:20:31.8906733Z     should add roles to existing user
2024-02-25T03:20:31.9051702Z     should raise an error when reinviting an existing user with the same role
2024-02-25T03:20:31.9052422Z     with force: true
2024-02-25T03:20:31.9271155Z       should reinvite the user
2024-02-25T03:20:31.9272005Z 
2024-02-25T03:20:31.9272387Z Question
2024-02-25T03:20:31.9273622Z   punctuate
2024-02-25T03:20:31.9418963Z     should punctuate each string in a given array
2024-02-25T03:20:31.9419648Z   scope for_banks
2024-02-25T03:20:31.9717809Z     should filter out questions that aren't meant for banks
2024-02-25T03:20:31.9718920Z   versioning
2024-02-25T03:20:31.9756967Z     is expected to be versioned
2024-02-25T03:20:31.9757862Z   scope for_partners
2024-02-25T03:20:31.9995750Z     should filter out questions that aren't meant for partners
2024-02-25T03:20:31.9996683Z   validations
2024-02-25T03:20:32.0060557Z     is expected to validate that :answer cannot be empty/falsy
2024-02-25T03:20:32.0119587Z     is expected to validate that :title cannot be empty/falsy
2024-02-25T03:20:32.0212792Z     question for_banks and for_partners attributes can't both be false
2024-02-25T03:20:32.0214022Z   remove_redundant_error
2024-02-25T03:20:32.0254489Z     should return an array with only one error message related to the checkboxes.
2024-02-25T03:20:32.0255205Z 
2024-02-25T03:20:32.0255436Z DonationDestroyService
2024-02-25T03:20:32.0256209Z   #call
2024-02-25T03:20:32.0258706Z     when storage_location fails to decrease the inventory of the donation
2024-02-25T03:20:32.0306610Z       to not be a success
2024-02-25T03:20:32.0307280Z     when the donation destroy fails
2024-02-25T03:20:32.0377831Z       to not be a success
2024-02-25T03:20:32.0378805Z     when the organization_id matches no Organization
2024-02-25T03:20:32.0414709Z       to not be a success
2024-02-25T03:20:32.0415656Z     when the donation_id matches no Donation owned by the organization
2024-02-25T03:20:32.0454871Z       to not be a success
2024-02-25T03:20:32.0455630Z     when the donation succesfully gets destroyed
2024-02-25T03:20:32.0709831Z       to be a success
2024-02-25T03:20:32.0710852Z 
2024-02-25T03:20:32.0711348Z PartnerGroup
2024-02-25T03:20:32.0712456Z   versioning
2024-02-25T03:20:32.0753084Z     is expected to be versioned
2024-02-25T03:20:32.0753950Z   DB constraints
2024-02-25T03:20:32.0754557Z     reminder_day <= 28
2024-02-25T03:20:32.0837102Z       raises error if unmet
2024-02-25T03:20:32.0840566Z     deadline_day <= 28
2024-02-25T03:20:32.0909990Z       raises error if unmet
2024-02-25T03:20:32.0910695Z     send_reminders IS NOT NULL
2024-02-25T03:20:32.0978525Z       raises error if unmet
2024-02-25T03:20:32.0979100Z   associations
2024-02-25T03:20:32.1016556Z     is expected to have many partners
2024-02-25T03:20:32.1076967Z     is expected to have and belong to many item_categories
2024-02-25T03:20:32.1126866Z     is expected to belong to organization required: true
2024-02-25T03:20:32.1127653Z   Validations >
2024-02-25T03:20:32.1170226Z     must belong to an organization
2024-02-25T03:20:32.1263799Z     requires a unique name within an organization
2024-02-25T03:20:32.1504131Z     does not require a unique name between organizations
2024-02-25T03:20:32.1504980Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-02-25T03:20:32.1553232Z       should not be valid
2024-02-25T03:20:32.1554034Z 
2024-02-25T03:20:32.1554340Z ProfileUpdateService
2024-02-25T03:20:32.1555152Z   #update
2024-02-25T03:20:32.1793136Z     updates the profile with the filtered and prepared params
2024-02-25T03:20:32.1793938Z 
2024-02-25T03:20:32.1794374Z Item
2024-02-25T03:20:32.1797718Z   Validations >
2024-02-25T03:20:32.1932552Z     requires a unique name
2024-02-25T03:20:32.1987404Z     must belong to an organization
2024-02-25T03:20:32.2037817Z     requires a Base Item base
2024-02-25T03:20:32.2151797Z     requires that items quantity are not a negative number
2024-02-25T03:20:32.2152626Z   versioning
2024-02-25T03:20:32.2198299Z     is expected to be versioned
2024-02-25T03:20:32.2198985Z   Filtering >
2024-02-25T03:20:32.2415258Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-02-25T03:20:32.2468347Z     can filter
2024-02-25T03:20:32.2756013Z     ->active shows items that are still active
2024-02-25T03:20:32.2952764Z     ->alphabetized retrieves items in alphabetical order
2024-02-25T03:20:32.2953930Z     ->by_partner_key
2024-02-25T03:20:32.3127043Z       filters by partner key
2024-02-25T03:20:32.3127966Z     ->disposable
2024-02-25T03:20:32.3440370Z       returns records associated with disposable diapers
2024-02-25T03:20:32.3441441Z     ->by_base_item
2024-02-25T03:20:32.5520269Z       can be chained to organization to constrain it to just 1 org's items
2024-02-25T03:20:32.5695327Z       shows the items for a particular base_item
2024-02-25T03:20:32.5696502Z     ->cloth_diapers
2024-02-25T03:20:32.5991728Z       returns records associated with disposable diapers
2024-02-25T03:20:32.5992565Z   after update
2024-02-25T03:20:32.5993341Z     when item does not have kit
2024-02-25T03:20:32.6178256Z       does not raise any errors
2024-02-25T03:20:32.6179122Z     when item has the kit
2024-02-25T03:20:32.8224765Z       updates kit name
2024-02-25T03:20:32.8225416Z   default_quantity
2024-02-25T03:20:32.8314569Z     should return the value of on_hand_minimum_quantity if it is set
2024-02-25T03:20:32.8397250Z     should return 0 if on_hand_minimum_quantity is not set
2024-02-25T03:20:32.8483335Z     should return the value of distribution_quantity if it is set
2024-02-25T03:20:32.8566785Z     should return 50 if column is not set
2024-02-25T03:20:32.8567438Z   Methods >
2024-02-25T03:20:32.8568296Z     barcodes_for
2024-02-25T03:20:32.8778256Z       retrieves all BarcodeItems associated with an item
2024-02-25T03:20:32.8779112Z     other?
2024-02-25T03:20:32.8907242Z       is true for items that are partner_key 'other'
2024-02-25T03:20:32.8908092Z     destroy
2024-02-25T03:20:32.9152439Z       only hides an item that has history
2024-02-25T03:20:32.9337378Z       actually destroys an item that doesn't have history
2024-02-25T03:20:33.1402446Z       deactivates the kit if it exists
2024-02-25T03:20:33.1403547Z     storage_locations_containing
2024-02-25T03:20:33.1761825Z       retrieves all storage locations that contain an item
2024-02-25T03:20:33.1762832Z     #reactivate!
2024-02-25T03:20:33.1763654Z       given a single item id
2024-02-25T03:20:33.1895404Z         sets the active trait to true for that item
2024-02-25T03:20:33.1896268Z       given an array of item ids
2024-02-25T03:20:33.2112094Z         sets the active trait to true for all of them
2024-02-25T03:20:33.2112997Z     has_history?
2024-02-25T03:20:33.2821541Z       identifies items that have been used previously
2024-02-25T03:20:33.2822708Z     barcoded_items >
2024-02-25T03:20:33.3273339Z       returns a collection of items that have barcodes associated with them
2024-02-25T03:20:33.3274090Z   distribution_quantity and package size
2024-02-25T03:20:33.3411745Z     have nil values if an empty string is passed
2024-02-25T03:20:33.3412291Z   Assocations >
2024-02-25T03:20:33.3462462Z     is expected to belong to item_category optional: true
2024-02-25T03:20:33.3463136Z 
2024-02-25T03:20:33.3463552Z Request
2024-02-25T03:20:33.3464701Z   versioning
2024-02-25T03:20:33.3502558Z     is expected to be versioned
2024-02-25T03:20:33.3503450Z   Enums >
2024-02-25T03:20:33.3503983Z     #status
2024-02-25T03:20:33.3711197Z       scopes
2024-02-25T03:20:33.3712022Z   total_items
2024-02-25T03:20:33.3804928Z     adds the quantity of all items in the request
2024-02-25T03:20:33.3805776Z   item data
2024-02-25T03:20:33.3884032Z     coerces item quantity and id to always be an integer before saving
2024-02-25T03:20:33.3884790Z 
2024-02-25T03:20:33.3885063Z Manufacturer
2024-02-25T03:20:33.3885732Z   Validations
2024-02-25T03:20:33.4024682Z     must have a unique name within organization
2024-02-25T03:20:33.5717102Z     must belong to an organization
2024-02-25T03:20:33.5718197Z   versioning
2024-02-25T03:20:33.5756236Z     is expected to be versioned
2024-02-25T03:20:33.5757162Z   Private Methods
2024-02-25T03:20:33.5757783Z     #exists_in_org?
2024-02-25T03:20:33.7504685Z       returns true if manufacturer exists in an organization
2024-02-25T03:20:33.7505960Z   Methods
2024-02-25T03:20:33.7506501Z     volume
2024-02-25T03:20:33.8922347Z       ignores the amount of product from other manufacturers
2024-02-25T03:20:34.0322014Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-02-25T03:20:34.0981900Z       retrieves the amount of product that has been donated by manufacturer
2024-02-25T03:20:34.0982980Z 
2024-02-25T03:20:34.0983214Z Exports::ExportRequestService
2024-02-25T03:20:34.0983640Z   .generate_csv_data
2024-02-25T03:20:34.2929306Z     includes rows for each request with correct columns of item quantity
2024-02-25T03:20:34.4928341Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-02-25T03:20:34.4929461Z 
2024-02-25T03:20:34.4929985Z StorageLocation
2024-02-25T03:20:34.4930609Z   Methods >
2024-02-25T03:20:34.4932409Z     inventory_total_value_in_dollars
2024-02-25T03:20:34.5390545Z       returns total value of all items in this storage location
2024-02-25T03:20:34.5500559Z       returns 0 when there are no items in this storage location
2024-02-25T03:20:34.5866463Z       returns a value including cents if the total isn't an even dollar amount
2024-02-25T03:20:34.5867342Z     import_csv
2024-02-25T03:20:34.5980834Z       imports storage locations from a csv file
2024-02-25T03:20:34.5981636Z     csv_export_attributes
2024-02-25T03:20:34.6611097Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-02-25T03:20:34.6612058Z     item_total
2024-02-25T03:20:34.7003970Z       retrieves the total for a single item
2024-02-25T03:20:34.7005120Z     increase_inventory
2024-02-25T03:20:34.7005768Z       when increasing with an inactive item
2024-02-25T03:20:34.8189948Z         re-activates the item as part of the creation process
2024-02-25T03:20:34.8191120Z       With existing inventory
2024-02-25T03:20:34.9358027Z         increases inventory quantities from an itemizable object
2024-02-25T03:20:34.9358752Z       when providing a new item that does not yet exist
2024-02-25T03:20:35.0467554Z         creates those new inventory items in the storage location
2024-02-25T03:20:35.0468821Z     size
2024-02-25T03:20:35.0933447Z       returns total quantity of all items in this storage location
2024-02-25T03:20:35.0934432Z     StorageLocation.items_inventoried
2024-02-25T03:20:35.1749489Z       returns a collection of items that are stored within inventories
2024-02-25T03:20:35.1750532Z     import_inventory
2024-02-25T03:20:35.5498987Z       imports storage locations from a csv file
2024-02-25T03:20:35.5499852Z     geocode
2024-02-25T03:20:35.5614242Z       adds coordinates to the database
2024-02-25T03:20:35.5614949Z     decrease_inventory
2024-02-25T03:20:35.6636050Z       decreases inventory quantities from an itemizable object
2024-02-25T03:20:35.6636989Z       when there is insufficient inventory available
2024-02-25T03:20:35.6721817Z         gives informative errors
2024-02-25T03:20:35.6805619Z         does not change inventory quantities if there is an error
2024-02-25T03:20:35.6806677Z   versioning
2024-02-25T03:20:35.6843523Z     is expected to be versioned
2024-02-25T03:20:35.6844135Z   Filtering >
2024-02-25T03:20:35.7544349Z     ->containing yields only inventories that have that item
2024-02-25T03:20:35.7634822Z     ->active_locations yields only storage locations that haven't been discarded
2024-02-25T03:20:35.7635778Z   Validations >
2024-02-25T03:20:35.7700456Z     is expected to validate that :address cannot be empty/falsy
2024-02-25T03:20:35.7757039Z     is expected to validate that :name cannot be empty/falsy
2024-02-25T03:20:35.7814133Z     is expected to validate that :organization cannot be empty/falsy
2024-02-25T03:20:35.7815201Z   Callbacks >
2024-02-25T03:20:35.7815816Z     before_destroy
2024-02-25T03:20:35.8474396Z       deletes storage locations with no inventory items on it
2024-02-25T03:20:35.8853133Z       does not delete storage locations with inventory items on it
2024-02-25T03:20:35.8854262Z 
2024-02-25T03:20:35.9436330Z DistributionPdf
2024-02-25T03:20:35.9436995Z   #non_request_data
2024-02-25T03:20:36.0096326Z   #request_data
2024-02-25T03:20:36.0097041Z 
2024-02-25T03:20:36.0097322Z DistributionReminder
2024-02-25T03:20:36.0097989Z   conditionally sending the emails
2024-02-25T03:20:36.0380793Z     does not send mail for past distributions
2024-02-25T03:20:36.0663583Z     sends mail for future distributions
2024-02-25T03:20:36.0935983Z     does not send mail for future distributions if the partner wants no reminders
2024-02-25T03:20:36.1200514Z     sends mail for future distributions where the partner wants reminders
2024-02-25T03:20:36.1201764Z     when the distribution_id does not match any Distribution
2024-02-25T03:20:36.1245061Z       does not send mail for non existent distributions
2024-02-25T03:20:36.1246171Z     when the partner is deactivated
2024-02-25T03:20:36.1511621Z       does not send mail
2024-02-25T03:20:36.1512454Z 
2024-02-25T03:20:36.1513054Z ItemizableUpdateService
2024-02-25T03:20:36.1513963Z   increases
2024-02-25T03:20:36.3088243Z     should update quantity in different locations
2024-02-25T03:20:36.4542539Z     should update quantity in same storage location
2024-02-25T03:20:36.4543371Z   decreases
2024-02-25T03:20:36.6032521Z     should update quantity in same storage location
2024-02-25T03:20:36.7470980Z     should update quantity in different locations
2024-02-25T03:20:36.7471716Z 
2024-02-25T03:20:36.7471938Z AddRoleService
2024-02-25T03:20:36.7472743Z   #call
2024-02-25T03:20:36.7473397Z     when the role already exists
2024-02-25T03:20:36.9409290Z       should raise an error for super admin
2024-02-25T03:20:37.1395326Z       should raise an error
2024-02-25T03:20:37.1395882Z     when the role does not yet exist
2024-02-25T03:20:37.3325378Z       should add the user role when asked to add admin
2024-02-25T03:20:37.5229486Z       should add the role
2024-02-25T03:20:37.7041682Z       works with super admin
2024-02-25T03:20:37.9149972Z       works with a partner
2024-02-25T03:20:37.9151121Z 
2024-02-25T03:20:37.9151719Z InventoryItem
2024-02-25T03:20:37.9191741Z   initializes the quantity to 0 if it was not specified
2024-02-25T03:20:37.9192628Z   versioning
2024-02-25T03:20:37.9227172Z     is expected to be versioned
2024-02-25T03:20:37.9227964Z   Filtering >
2024-02-25T03:20:37.9228793Z     ->by_partner_key
2024-02-25T03:20:37.9365387Z       shows the Base Items by partner_key
2024-02-25T03:20:37.9366176Z   Validations >
2024-02-25T03:20:37.9415580Z     requires an inventory association
2024-02-25T03:20:37.9458242Z     requires an item
2024-02-25T03:20:37.9458844Z     quantity >
2024-02-25T03:20:37.9514494Z       is less than the max integer
2024-02-25T03:20:37.9650770Z       is gte 0
2024-02-25T03:20:37.9706570Z       is numerical
2024-02-25T03:20:37.9761396Z       is required
2024-02-25T03:20:37.9762362Z 
2024-02-25T03:20:37.9762633Z ProductDrive
2024-02-25T03:20:38.1280962Z   calculates donation quantity
2024-02-25T03:20:38.2811406Z   calculates in-kind value
2024-02-25T03:20:38.7998743Z   calculates and returns all donated organization item quantities by category and date
2024-02-25T03:20:39.0293755Z   calculates donation quantity by date
2024-02-25T03:20:39.2763973Z   calculates and returns all donated organization item quantities by name and date
2024-02-25T03:20:39.2765407Z   validations
2024-02-25T03:20:39.4275919Z     is expected not to be valid
2024-02-25T03:20:39.5739894Z     is expected not to be valid
2024-02-25T03:20:39.7395319Z     is expected not to be valid
2024-02-25T03:20:39.7395877Z   scopes
2024-02-25T03:20:39.7396659Z     .within_date_range
2024-02-25T03:20:39.8865330Z       returns the product drive 1
2024-02-25T03:20:40.0373125Z       does not include product drive 2
2024-02-25T03:20:40.0373809Z     .by_name
2024-02-25T03:20:40.1884958Z       does not return other_name
2024-02-25T03:20:40.3368117Z       returns the product_drive with name some_name
2024-02-25T03:20:40.3369009Z     .by_item_category_id
2024-02-25T03:20:40.6776444Z       does not return other_name
2024-02-25T03:20:41.0083321Z       returns the product_drive with name some_name
2024-02-25T03:20:41.0083891Z   associations
2024-02-25T03:20:41.1082283Z     has_many donations
2024-02-25T03:20:41.1998133Z     has_many product_drive_participants through donations
2024-02-25T03:20:41.1999107Z   versioning
2024-02-25T03:20:41.3479936Z     is expected to be versioned
2024-02-25T03:20:41.3480991Z   donation_source_view
2024-02-25T03:20:41.4936973Z     returns formatted text
2024-02-25T03:20:41.4937874Z   distinct_items
2024-02-25T03:20:41.8504687Z     counts the distinct items correctly in overlapping donations
2024-02-25T03:20:42.2078040Z     doesn't double_count the items if there are two donations for the same item
2024-02-25T03:20:42.5699475Z     counts the distinct items correctly by given date
2024-02-25T03:20:42.9224097Z     counts the items correctly for 1 donation with multiple items
2024-02-25T03:20:43.2711888Z     counts the distinct items correctly by given category
2024-02-25T03:20:43.2712819Z   .search_date_range
2024-02-25T03:20:43.4262302Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-02-25T03:20:43.4263101Z 
2024-02-25T03:20:43.4263293Z EventDiffer
2024-02-25T03:20:43.6246122Z   should return a full diff
2024-02-25T03:20:43.6246651Z 
2024-02-25T03:20:43.6246840Z TextInterpolatorService
2024-02-25T03:20:43.6247440Z   #call
2024-02-25T03:20:43.6284629Z     returns interpolated text
2024-02-25T03:20:43.6285314Z     when interpolations are nil
2024-02-25T03:20:43.6318653Z       returns text
2024-02-25T03:20:43.6319332Z     when text is nil
2024-02-25T03:20:43.6352637Z       returns nil
2024-02-25T03:20:43.6353245Z     when interpolations are empty
2024-02-25T03:20:43.6387230Z       returns text
2024-02-25T03:20:43.6387804Z     when text is empty
2024-02-25T03:20:43.6421827Z       returns empty string
2024-02-25T03:20:43.6422436Z     when interpolations are not present
2024-02-25T03:20:43.6454453Z       returns text
2024-02-25T03:20:43.6455117Z 
2024-02-25T03:20:43.6455455Z PartnerMailerJob
2024-02-25T03:20:43.6456292Z   conditionally sending the emails
2024-02-25T03:20:43.9733500Z     sends mail for future distributions immediately
2024-02-25T03:20:44.1675937Z     does not send mail for past distributions
2024-02-25T03:20:44.1676919Z     when the distribution is for a deactivated partner
2024-02-25T03:20:44.3592419Z       does not send the email
2024-02-25T03:20:44.3593084Z 
2024-02-25T03:20:44.3593310Z AccountRequest
2024-02-25T03:20:44.3722110Z   #reject!
2024-02-25T03:20:44.3843252Z   #confirm!
2024-02-25T03:20:44.3843958Z   associations
2024-02-25T03:20:44.3879321Z     is expected to have one organization class_name => Organization
2024-02-25T03:20:44.4071088Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-25T03:20:44.4072006Z   #identity_token
2024-02-25T03:20:44.4072659Z     should return a JWT token that contains the id of the account_request_id
2024-02-25T03:20:44.4073930Z     when the account_request is not persisted
2024-02-25T03:20:44.4122676Z       should raise an error
2024-02-25T03:20:44.4123200Z   validations
2024-02-25T03:20:44.4243171Z     is expected to validate that :request_details cannot be empty/falsy
2024-02-25T03:20:44.4432155Z     is expected not to allow :email to be ‹"not_email"›
2024-02-25T03:20:44.4545037Z     is expected to allow :email to be ‹"isadora.zboncak@carroll.example"›
2024-02-25T03:20:44.4698115Z     is expected to validate that :email cannot be empty/falsy
2024-02-25T03:20:44.4835344Z     is expected to validate that :email is case-sensitively unique
2024-02-25T03:20:44.4976931Z     is expected to validate that :name cannot be empty/falsy
2024-02-25T03:20:44.5098664Z     is expected to validate that the length of :request_details is at least 50
2024-02-25T03:20:44.5099670Z     when the email provided is already used by an existing user
2024-02-25T03:20:44.5306769Z       should not allow the email
2024-02-25T03:20:44.5307573Z     when the email provided is already used by an existing organization
2024-02-25T03:20:44.7123997Z       should not allow the email
2024-02-25T03:20:44.7124657Z   #processed?
2024-02-25T03:20:44.7125326Z     when the account request has a associated organization
2024-02-25T03:20:44.8926314Z       should return true
2024-02-25T03:20:44.8926898Z     when the account request has no associated organization
2024-02-25T03:20:44.9019620Z       should return false
2024-02-25T03:20:44.9020311Z   .get_by_identity_token
2024-02-25T03:20:44.9021520Z     when the identity_token provided does not match any AccountRequest
2024-02-25T03:20:44.9057169Z       should return nil
2024-02-25T03:20:44.9057918Z     when the identity_token corresponds to an existing AccountRequest
2024-02-25T03:20:44.9149436Z       should return the corresponding AccountRequest
2024-02-25T03:20:44.9150141Z   versioning
2024-02-25T03:20:44.9183784Z     is expected to be versioned
2024-02-25T03:20:44.9185745Z 
2024-02-25T03:20:44.9186005Z Donation
2024-02-25T03:20:44.9187528Z   Associations >
2024-02-25T03:20:44.9188106Z     items >
2024-02-25T03:20:44.9344377Z       has_many
2024-02-25T03:20:44.9344780Z   versioning
2024-02-25T03:20:44.9380414Z     is expected to be versioned
2024-02-25T03:20:44.9380823Z   Methods >
2024-02-25T03:20:44.9381855Z     money_raised
2024-02-25T03:20:45.0005472Z       tracks the money raised in a donation
2024-02-25T03:20:45.0006159Z     remove
2024-02-25T03:20:45.0677147Z       removes the item from the donation
2024-02-25T03:20:45.1303182Z       works with either an id or an object
2024-02-25T03:20:45.2016767Z       fails gracefully if the item doesn't exist
2024-02-25T03:20:45.2017522Z     source_view
2024-02-25T03:20:45.2017927Z       from a drive
2024-02-25T03:20:45.2018488Z         participant known
2024-02-25T03:20:45.2019113Z           contact name present
2024-02-25T03:20:45.2152388Z             returns participant display name
2024-02-25T03:20:45.2153047Z           no contact name
2024-02-25T03:20:45.2281650Z             returns drive display name
2024-02-25T03:20:45.2282319Z         unknown participant
2024-02-25T03:20:45.2385871Z           returns drive display name
2024-02-25T03:20:45.2386476Z       not from a drive
2024-02-25T03:20:45.2497846Z         returns source
2024-02-25T03:20:45.2498628Z   Validations >
2024-02-25T03:20:45.2542158Z     requires an inventory (storage location)
2024-02-25T03:20:45.2663147Z     requires a product drive participant if the source is 'Product Drive'
2024-02-25T03:20:45.2779598Z     requires a manufacturer if the source is 'Manufacturer'
2024-02-25T03:20:45.2843288Z     requires a source from the list of available sources
2024-02-25T03:20:45.2952495Z     requires a donation_site if the source is 'Donation Site'
2024-02-25T03:20:45.3094610Z     is invalid when the line items are invalid
2024-02-25T03:20:45.3143478Z     ensures that the issued at is no earlier than 2000
2024-02-25T03:20:45.3185291Z     must belong to an organization
2024-02-25T03:20:45.3185880Z   behaves like itemizable
2024-02-25T03:20:45.3187040Z     .to_a
2024-02-25T03:20:45.3188121Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T03:20:45.3518583Z         raises an error
2024-02-25T03:20:45.3519242Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T03:20:45.3848304Z         calls line_item_values
2024-02-25T03:20:45.3848916Z     .line_items
2024-02-25T03:20:45.3849813Z       quantities_by_name
2024-02-25T03:20:45.4173480Z         returns a hash of items with id, name, and quantity
2024-02-25T03:20:45.4498382Z         leaves out zero-quantitied items if requested
2024-02-25T03:20:45.4499088Z       sorted
2024-02-25T03:20:45.4972777Z         displays the items, sorted by name
2024-02-25T03:20:45.4973783Z       total
2024-02-25T03:20:45.5298788Z         has an item total
2024-02-25T03:20:45.5299359Z       combine!
2024-02-25T03:20:45.5753724Z         incrementally combines line_items on donations that have already been created
2024-02-25T03:20:45.6215743Z         combines multiple line_items with the same item_id into a single record
2024-02-25T03:20:45.6216704Z   Scopes >
2024-02-25T03:20:45.6217074Z     by_source >
2024-02-25T03:20:45.6217712Z       when source is not a symbol
2024-02-25T03:20:45.6218681Z         when source comes from the SOURCES hash
2024-02-25T03:20:45.6403249Z           returns all donations with the provided source
2024-02-25T03:20:45.6403975Z         when source is invalid
2024-02-25T03:20:45.6576975Z           does not throw errors, returns no results
2024-02-25T03:20:45.6577699Z       when source is a symbol
2024-02-25T03:20:45.6578378Z         when source is valid
2024-02-25T03:20:45.6752684Z           allows a symbol as an argument, referencing the SOURCES hash
2024-02-25T03:20:45.6753511Z         when source is invalid
2024-02-25T03:20:45.6920171Z           does not throw errors, returns no results
2024-02-25T03:20:45.6920859Z     during >
2024-02-25T03:20:45.7096073Z       returns all donations created between two dates
2024-02-25T03:20:45.7096774Z   Callbacks >
2024-02-25T03:20:45.7249739Z     automatically combines duplicate line_item records when they're created
2024-02-25T03:20:45.7371988Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T03:20:45.7373176Z   SOURCES
2024-02-25T03:20:45.7406474Z     the hash is immutable
2024-02-25T03:20:45.7440821Z     the hash values are immutable
2024-02-25T03:20:45.7473248Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-02-25T03:20:45.7474118Z 
2024-02-25T03:20:45.7474328Z ServiceObjectErrorsMixin
2024-02-25T03:20:45.7474837Z   self.included
2024-02-25T03:20:45.7511501Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-02-25T03:20:45.7512299Z 
2024-02-25T03:20:45.7512598Z Partners::FetchPartnersToRemindNowService
2024-02-25T03:20:45.7513337Z   .fetch
2024-02-25T03:20:45.7514123Z     when there is a partner
2024-02-25T03:20:45.7515188Z       that has an organization with a global reminder & deadline
2024-02-25T03:20:45.7516257Z         that is for today
2024-02-25T03:20:45.7831796Z           should include that partner
2024-02-25T03:20:45.7832263Z           and has send_reminder=false
2024-02-25T03:20:45.8174133Z             should NOT include that partner
2024-02-25T03:20:45.8174863Z           but the partner is deactivated
2024-02-25T03:20:45.8511932Z             should NOT include that partner
2024-02-25T03:20:45.8512398Z         that is not for today
2024-02-25T03:20:45.8822141Z           should NOT include that partner
2024-02-25T03:20:45.8822947Z         AND a partner group that does have them defined
2024-02-25T03:20:45.9183494Z           should remind based on the partner group instead of the organization level reminder
2024-02-25T03:20:45.9184530Z           but the partner is deactivated
2024-02-25T03:20:45.9581796Z             should NOT include that partner
2024-02-25T03:20:45.9582723Z       that does NOT have a organization with a global reminder & deadline
2024-02-25T03:20:45.9583768Z         and is a part of a partner group that does have them defined
2024-02-25T03:20:45.9584912Z           that is not for today
2024-02-25T03:20:45.9938793Z             should NOT include that partner
2024-02-25T03:20:45.9941339Z           that is for today
2024-02-25T03:20:46.0270759Z             should include that partner
2024-02-25T03:20:46.0271469Z             but the partner is deactivated
2024-02-25T03:20:46.0650451Z               should NOT include that partner
2024-02-25T03:20:46.0652431Z 
2024-02-25T03:20:46.0652741Z ApplicationHelper
2024-02-25T03:20:46.0655051Z   can_administrate?
2024-02-25T03:20:46.0656430Z     User is org admin and not part of org
2024-02-25T03:20:46.2614388Z       cannot administrate
2024-02-25T03:20:46.2615048Z     User is org admin and part of org
2024-02-25T03:20:46.2830979Z       can administrate
2024-02-25T03:20:46.2831585Z     User is part of org but not org admin
2024-02-25T03:20:46.2970466Z       cannot administrate
2024-02-25T03:20:46.2971071Z   active_class
2024-02-25T03:20:46.3014662Z     Returns the controller name
2024-02-25T03:20:46.3015369Z   step_container_helper
2024-02-25T03:20:46.3016220Z     active_index is less than index
2024-02-25T03:20:46.3063804Z       returns empty string
2024-02-25T03:20:46.3064345Z     active_index is greater than index
2024-02-25T03:20:46.3109949Z       returns done
2024-02-25T03:20:46.3110492Z     active_index is equal to index
2024-02-25T03:20:46.3155432Z       returns active
2024-02-25T03:20:46.3156064Z   confirm_delete_msg
2024-02-25T03:20:46.3198905Z     subs in string
2024-02-25T03:20:46.3199329Z   default_title_content
2024-02-25T03:20:46.3200670Z     Organization exists
2024-02-25T03:20:46.4962890Z       returns the organization's name
2024-02-25T03:20:46.4963620Z     Organization does not exist
2024-02-25T03:20:46.5015929Z       returns a default name
2024-02-25T03:20:46.5016586Z   flash_class
2024-02-25T03:20:46.5058778Z     returns appropriate class for alert
2024-02-25T03:20:46.5101407Z     returns appropriate class for notice
2024-02-25T03:20:46.5143606Z     returns appropriate class for error
2024-02-25T03:20:46.5185856Z     returns appropriate class for success
2024-02-25T03:20:46.5186696Z 
2024-02-25T03:20:46.5186856Z OrganizationMailer
2024-02-25T03:20:46.5188109Z   #partner_approval_request
2024-02-25T03:20:46.5451884Z     should be sent to the partner main email with the correct subject line
2024-02-25T03:20:46.5691990Z     renders the body with correct text with partner information
2024-02-25T03:20:46.5934115Z     includes a link to the relevant partner
2024-02-25T03:20:46.5934960Z 
2024-02-25T03:20:46.5935148Z PartnerCreateService
2024-02-25T03:20:46.5936194Z   #call
2024-02-25T03:20:46.7703025Z     should return an instance of itself
2024-02-25T03:20:46.7703701Z     when the arguments are incorrect
2024-02-25T03:20:46.7704441Z       beacuse the partner_attrs are invalid
2024-02-25T03:20:46.9521563Z         should contain errors related to invalid partner attributes
2024-02-25T03:20:46.9522456Z     when the arguments are valid
2024-02-25T03:20:47.1385032Z       should create a new partner record with the organization provided
2024-02-25T03:20:47.3253111Z       should create the associated partner profile data
2024-02-25T03:20:47.3253785Z       but there was an unexpected issue with saving the
2024-02-25T03:20:47.3254428Z         Partner record
2024-02-25T03:20:47.5072864Z           should not create the partner record for the organization
2024-02-25T03:20:47.6845287Z           should not create the associated partner records
2024-02-25T03:20:47.6845858Z         Partners::Profile record
2024-02-25T03:20:47.9425765Z           should not create the partner record for the organization
2024-02-25T03:20:48.2235275Z           should not create the associated partner records
2024-02-25T03:20:48.2236137Z 
2024-02-25T03:20:48.2236382Z Exports::ExportDistributionsCSVService
2024-02-25T03:20:48.2237459Z   #generate_csv_data
2024-02-25T03:20:48.4043313Z     should match the expected content for the csv
2024-02-25T03:20:48.4044042Z     when a new item is added
2024-02-25T03:20:48.5936654Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-02-25T03:20:48.7784808Z       should add it to the end of the row
2024-02-25T03:20:48.7785716Z     when there are no distributions but the report is requested
2024-02-25T03:20:48.9537227Z       returns a csv with only headers and no rows
2024-02-25T03:20:48.9538003Z 
2024-02-25T03:20:48.9538224Z DonationsController
2024-02-25T03:20:48.9539718Z   calculating total value of multiple donations
2024-02-25T03:20:48.9585105Z     returns zero for an empty array of donations
2024-02-25T03:20:49.1016047Z     works correctly for multiple line items per donation
2024-02-25T03:20:49.1017041Z   While signed in as a normal user >
2024-02-25T03:20:49.1017720Z     GET #new
2024-02-25T03:20:49.1243958Z       returns http success
2024-02-25T03:20:49.1246547Z     GET #index
2024-02-25T03:20:49.1404950Z       returns http success
2024-02-25T03:20:49.1405510Z     GET #edit
2024-02-25T03:20:49.1603936Z       returns http success
2024-02-25T03:20:49.1604538Z     GET #show
2024-02-25T03:20:49.1788455Z       returns http success
2024-02-25T03:20:49.1789013Z     DELETE #destroy
2024-02-25T03:20:49.2022262Z       redirects to the dashboard path
2024-02-25T03:20:49.2023028Z     POST#create
2024-02-25T03:20:49.2476264Z       redirects to GET#edit on success
2024-02-25T03:20:49.2668048Z       renders GET#new with error on failure
2024-02-25T03:20:49.2668556Z     PUT#update
2024-02-25T03:20:49.3018030Z       redirects to index after update
2024-02-25T03:20:49.4182098Z       updates storage quantity correctly
2024-02-25T03:20:49.4182684Z       when changing storage location
2024-02-25T03:20:49.5404962Z         updates storage quantity correctly
2024-02-25T03:20:49.5444810Z         rolls back updates if quantity would go below 0
2024-02-25T03:20:49.5445543Z       when removing a line item
2024-02-25T03:20:49.6527253Z         updates storage invetory item quantity correctly
2024-02-25T03:20:49.6528088Z   While signed in as an organization admin >
2024-02-25T03:20:49.6528732Z     DELETE #destroy
2024-02-25T03:20:49.6854811Z       redirects to the index
2024-02-25T03:20:49.6855547Z   calculating total money raised for all donations
2024-02-25T03:20:49.6899551Z     returns zero for an empty array of donations
2024-02-25T03:20:49.7028633Z     correctly calculates the total
2024-02-25T03:20:49.7029258Z 
2024-02-25T03:20:49.7029449Z Deadlinable
2024-02-25T03:20:49.7030509Z   validations
2024-02-25T03:20:49.7087880Z     validates that reminder day is not the same as deadline day
2024-02-25T03:20:49.7192158Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-25T03:20:49.7293256Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-25T03:20:49.7294490Z 
2024-02-25T03:20:49.7295581Z Partners::ServedArea
2024-02-25T03:20:49.7369263Z   is expected to belong to county required: true
2024-02-25T03:20:49.7706207Z   must only allow valid client share values
2024-02-25T03:20:49.7915320Z   must only allow integer client shares
2024-02-25T03:20:49.7982947Z   is expected to belong to partner_profile required: true
2024-02-25T03:20:49.7983841Z   versioning
2024-02-25T03:20:49.8023330Z     is expected to be versioned
2024-02-25T03:20:49.8024092Z 
2024-02-25T03:20:49.8024332Z Kit
2024-02-25T03:20:50.0165268Z   deactivate and reactivate
2024-02-25T03:20:50.0165708Z   versioning
2024-02-25T03:20:50.0209918Z     is expected to be versioned
2024-02-25T03:20:50.0210508Z   #can_deactivate?
2024-02-25T03:20:50.0210950Z     with inventory items
2024-02-25T03:20:50.2464328Z       should return false
2024-02-25T03:20:50.2464958Z     without inventory items
2024-02-25T03:20:50.4448745Z       should return true
2024-02-25T03:20:50.4451386Z   Validations >
2024-02-25T03:20:50.4638445Z     can't have negative value
2024-02-25T03:20:50.4808874Z     requires a name
2024-02-25T03:20:50.6802681Z     requires a unique name
2024-02-25T03:20:50.6976412Z     requires at least one item
2024-02-25T03:20:50.7140445Z     must belong to an organization
2024-02-25T03:20:50.7302981Z     is valid as built
2024-02-25T03:20:50.7303452Z   Value >
2024-02-25T03:20:50.7459846Z     converts cents to dollars
2024-02-25T03:20:50.7613955Z     converts dollars to cents
2024-02-25T03:20:50.7614559Z     .value_per_itemizable
2024-02-25T03:20:50.7986000Z       calculates values from associated items
2024-02-25T03:20:50.7986655Z   Filtering >
2024-02-25T03:20:50.8022633Z     can filter
2024-02-25T03:20:51.3757490Z     ->alphabetized retrieves items in alphabetical order
2024-02-25T03:20:51.3758079Z     ->by_partner_key
2024-02-25T03:20:51.6056078Z       shows the kits for a particular item
2024-02-25T03:20:51.6056837Z 
2024-02-25T03:20:51.6057148Z AllocateKitInventoryService
2024-02-25T03:20:51.6060371Z   #allocate
2024-02-25T03:20:51.6061990Z     when inventory items are available
2024-02-25T03:20:51.8915157Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-02-25T03:20:51.8916381Z       when there are more then one line items
2024-02-25T03:20:51.8916866Z         when there kit is allocated once
2024-02-25T03:20:52.1618813Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-25T03:20:52.1619888Z         when same kit is allocated multiple times
2024-02-25T03:20:52.4884542Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-25T03:20:52.4885602Z       When kit is allocated more then once
2024-02-25T03:20:52.7860758Z         increases the already existed inventory in and decreases the already existed inventory out
2024-02-25T03:20:52.7861826Z     when more than one kit is requested
2024-02-25T03:20:52.7862473Z       but one of the items is out of stock
2024-02-25T03:20:53.0548336Z         returns error and does not change kit or item quantity
2024-02-25T03:20:53.0549138Z   #error
2024-02-25T03:20:53.0550135Z     when the Store location organization doesn't match
2024-02-25T03:20:53.2714986Z       returns error
2024-02-25T03:20:53.2715531Z 
2024-02-25T03:20:53.2715828Z ItemsOutTotalQuery
2024-02-25T03:20:53.2716770Z   items_out_total_query
2024-02-25T03:20:53.3877176Z     returns a sum total of all out-flows
2024-02-25T03:20:53.3877701Z 
2024-02-25T03:20:53.3877943Z Reports::PartnerInfoReportService
2024-02-25T03:20:53.3878613Z   #report
2024-02-25T03:20:53.5604799Z     should report zero values
2024-02-25T03:20:53.8202086Z     should report normal values (FAILED - 1)
2024-02-25T03:20:53.8202655Z 
2024-02-25T03:20:53.8202842Z InventoryCheckService
2024-02-25T03:20:53.8203411Z   call
2024-02-25T03:20:53.8204031Z     alert
2024-02-25T03:20:53.8959267Z       should set the alert
2024-02-25T03:20:53.8960200Z     error
2024-02-25T03:20:53.9737173Z       should set the error
2024-02-25T03:20:53.9737744Z 
2024-02-25T03:20:53.9738050Z Exports::ExportPurchasesCSVService
2024-02-25T03:20:53.9738784Z   #generate_csv_data
2024-02-25T03:20:54.0907004Z     should match the expected content for the csv
2024-02-25T03:20:54.0907568Z 
2024-02-25T03:20:54.0907796Z Reports::AcquisitionReportService
2024-02-25T03:20:54.0908342Z   acquisition report
2024-02-25T03:20:55.0803967Z     should return the proper results on #report
2024-02-25T03:20:55.0804551Z 
2024-02-25T03:20:55.0804784Z Partners::AuthorizedFamilyMember
2024-02-25T03:20:55.0807219Z   versioning
2024-02-25T03:20:55.0914031Z     is expected to be versioned
2024-02-25T03:20:55.0914606Z   associations
2024-02-25T03:20:55.0954242Z     is expected to have many child_item_requests dependent => nullify
2024-02-25T03:20:55.0999671Z     is expected to belong to family required: true
2024-02-25T03:20:55.1000375Z   #display_name
2024-02-25T03:20:55.1414790Z     should return the family member's first and last name
2024-02-25T03:20:55.1415521Z 
2024-02-25T03:20:55.1415829Z ItemsController
2024-02-25T03:20:55.1417113Z   While not signed in
2024-02-25T03:20:55.1510797Z     redirects the user to the sign-in page for CRUD actions
2024-02-25T03:20:55.1511265Z   While signed in
2024-02-25T03:20:55.1513173Z     POST #create
2024-02-25T03:20:55.1514188Z       with valid params
2024-02-25T03:20:55.1711132Z         should accept params with dollar signs, periods, and commas
2024-02-25T03:20:55.1907387Z         should create an item
2024-02-25T03:20:55.2094555Z         should redirect to the item page
2024-02-25T03:20:55.2095245Z       with invalid params
2024-02-25T03:20:55.2259385Z         should show an error
2024-02-25T03:20:55.2259981Z     GET #edit
2024-02-25T03:20:55.2443490Z       returns http success
2024-02-25T03:20:55.2444105Z     DELETE #destroy
2024-02-25T03:20:55.2709562Z       redirects to #index
2024-02-25T03:20:55.2710187Z     PATCH #restore
2024-02-25T03:20:55.2710804Z       with another organizations item
2024-02-25T03:20:55.4652116Z         does nothing
2024-02-25T03:20:55.4652526Z       with an active item
2024-02-25T03:20:55.4873407Z         does nothing
2024-02-25T03:20:55.4874276Z       with a soft-deleted item
2024-02-25T03:20:55.5105018Z         re-activates the item
2024-02-25T03:20:55.5105608Z     GET #index
2024-02-25T03:20:55.5283937Z       returns http success
2024-02-25T03:20:55.5284474Z     GET #show
2024-02-25T03:20:55.5468509Z       returns http success
2024-02-25T03:20:55.5469023Z     PUT #update
2024-02-25T03:20:55.5469626Z       invisible
2024-02-25T03:20:55.5667164Z         should update visible_to_partners to false
2024-02-25T03:20:55.5667805Z       visible
2024-02-25T03:20:55.5863036Z         should update visible_to_partners to true
2024-02-25T03:20:55.5863669Z     GET #new
2024-02-25T03:20:55.5970059Z       returns http success
2024-02-25T03:20:55.5972626Z     Looking at a different organization
2024-02-25T03:20:55.9345918Z       redirects the user to the sign-in page for CRUD actions
2024-02-25T03:20:55.9346599Z     PATCH #remove_category
2024-02-25T03:20:56.1551798Z       should remove an item's category
2024-02-25T03:20:56.3551286Z       should redirect to the previous category page
2024-02-25T03:20:56.3551875Z 
2024-02-25T03:20:56.3552060Z HistoricalDataCacheJob
2024-02-25T03:20:56.5315665Z   queues the job
2024-02-25T03:20:56.7179445Z   caches the historical data
2024-02-25T03:20:56.7179946Z 
2024-02-25T03:20:56.7180192Z Reports::SummaryReportService
2024-02-25T03:20:56.7180719Z   #report
2024-02-25T03:20:56.8932018Z     should report zero values
2024-02-25T03:20:57.3652165Z     should report positive values
2024-02-25T03:20:57.8246620Z     should report negative values
2024-02-25T03:20:57.8247137Z 
2024-02-25T03:20:57.8247379Z DistributionContentChangeService
2024-02-25T03:20:57.8248530Z   #changes
2024-02-25T03:20:57.8249311Z     when there are line items removed and updated
2024-02-25T03:20:57.8290298Z       returns true
2024-02-25T03:20:57.8291145Z   #any_change?
2024-02-25T03:20:57.8292245Z     when there are no changes in the line items
2024-02-25T03:20:57.8325421Z       returns true
2024-02-25T03:20:57.8325933Z     when there are line items removed
2024-02-25T03:20:57.8361217Z       returns true
2024-02-25T03:20:57.8361784Z     when there are line items removed and updated
2024-02-25T03:20:57.8395034Z       returns true
2024-02-25T03:20:57.8397610Z     when there are line items updated
2024-02-25T03:20:57.8430843Z       returns true
2024-02-25T03:20:57.8431653Z 
2024-02-25T03:20:57.8431898Z Partners::Child
2024-02-25T03:20:57.8433083Z   associations
2024-02-25T03:20:57.8556826Z     is expected to belong to family required: true
2024-02-25T03:20:57.8592272Z     is expected to have many child_item_requests dependent => destroy
2024-02-25T03:20:57.8593111Z   versioning
2024-02-25T03:20:57.8629101Z     is expected to be versioned
2024-02-25T03:20:57.8629677Z   #display_name
2024-02-25T03:20:57.8926231Z     should return a child's first and last name
2024-02-25T03:20:57.8926778Z 
2024-02-25T03:20:57.8926958Z DistributionsController
2024-02-25T03:20:57.8928025Z   While signed in
2024-02-25T03:20:57.8929037Z     POST #create
2024-02-25T03:20:57.8930737Z       multiple line_items that have inventory quantity below recommended quantity
2024-02-25T03:20:57.9809751Z         redirects with a flash notice and a flash alert
2024-02-25T03:20:57.9810294Z       when line item quantity is not positive
2024-02-25T03:20:58.0339763Z         flashes an error
2024-02-25T03:20:58.0340487Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T03:20:58.1035056Z         redirects with a flash notice and a flash error
2024-02-25T03:20:58.1035850Z       multiple line_items that have inventory quantity below minimum quantity
2024-02-25T03:20:58.1870379Z         redirects with a flash notice and a flash error
2024-02-25T03:20:58.1870869Z     PUT #update
2024-02-25T03:20:58.1871835Z       when distribution has items updated for minimum quantity
2024-02-25T03:20:58.3208147Z         redirects with a flash notice and send send_notification
2024-02-25T03:20:58.3209138Z       when distribution causes inventory quantity to be below recommended quantity
2024-02-25T03:20:58.4352365Z         redirects with a flash notice and a flash error
2024-02-25T03:20:58.4353401Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T03:20:58.5611427Z         redirects with a flash notice and a flash error
2024-02-25T03:20:58.5611968Z 
2024-02-25T03:20:58.5612224Z DistributionByCountyReportService
2024-02-25T03:20:58.5613425Z   get_breakdown
2024-02-25T03:20:58.6465954Z     divides the item numbers and values according to the partner profile
2024-02-25T03:20:58.8265936Z     handles multiple partners with overlapping service areas properly
2024-02-25T03:20:58.9057818Z     will have 100% unspecified shows if no served_areas
2024-02-25T03:20:59.0239758Z W, [2024-02-24T19:20:59.023557 #2346]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-25T03:20:59.0240943Z W, [2024-02-24T19:20:59.023646 #2346]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T03:20:59.0242448Z W, [2024-02-24T19:20:59.023675 #2346]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T03:20:59.0244077Z W, [2024-02-24T19:20:59.023716 #2346]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-25T03:20:59.0324955Z 
2024-02-25T03:20:59.0325374Z Failures:
2024-02-25T03:20:59.0325636Z 
2024-02-25T03:20:59.0327413Z   1) Reports::PartnerInfoReportService#report should report normal values
2024-02-25T03:20:59.0331742Z      Failure/Error:
2024-02-25T03:20:59.0332211Z        expect(report.report).to eq({
2024-02-25T03:20:59.0333204Z                                      entries: { "Agency Type: Career technical training" => 2,
2024-02-25T03:20:59.0334449Z                                                 "Agency Type: Education program" => 1,
2024-02-25T03:20:59.0335232Z                                                 "Number of Partner Agencies" => 3,
2024-02-25T03:20:59.0336274Z                                                 "Zip Codes Served" => "90210-1234, 12345, 09876-3564" },
2024-02-25T03:20:59.0337112Z                                      name: "Partner Agencies and Service Area"
2024-02-25T03:20:59.0337769Z                                    })
2024-02-25T03:20:59.0338121Z 
2024-02-25T03:20:59.0339730Z        expected: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"}, :name=>"Partner Agencies and Service Area"}
2024-02-25T03:20:59.0342824Z             got: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"09876-3564, 90210-1234, 12345"}, :name=>"Partner Agencies and Service Area"}
2024-02-25T03:20:59.0344343Z 
2024-02-25T03:20:59.0344512Z        (compared using ==)
2024-02-25T03:20:59.0344819Z 
2024-02-25T03:20:59.0345175Z        Diff:
2024-02-25T03:20:59.0345595Z        @@ -1 +1 @@
2024-02-25T03:20:59.0347174Z        -:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"},
2024-02-25T03:20:59.0349824Z        +:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"09876-3564, 90210-1234, 12345"},
2024-02-25T03:20:59.0351822Z      # ./spec/services/reports/partner_info_report_service_spec.rb:27:in `block (3 levels) in <top (required)>'
2024-02-25T03:20:59.0352744Z 
2024-02-25T03:20:59.0353071Z Finished in 57.55 seconds (files took 8.37 seconds to load)
2024-02-25T03:20:59.0353770Z 571 examples, 1 failure
2024-02-25T03:20:59.0354063Z 
2024-02-25T03:20:59.0354212Z Failed examples:
2024-02-25T03:20:59.0354467Z 
2024-02-25T03:20:59.0355406Z rspec ./spec/services/reports/partner_info_report_service_spec.rb:19 # Reports::PartnerInfoReportService#report should report normal values
2024-02-25T03:20:59.0356088Z 
2024-02-25T03:20:59.0356192Z Randomized with seed 35108
2024-02-25T03:20:59.0356386Z 
2024-02-25T03:20:59.5435788Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T03:20:59.5437267Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3976 / 6429 LOC (61.84%) covered.
2024-02-25T03:20:59.6007328Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-02-25T03:20:59.9997607Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T03:20:59.9999360Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10685 LOC (0.36%) covered.
2024-02-25T03:21:00.0305068Z ##[error]Process completed with exit code 1.
