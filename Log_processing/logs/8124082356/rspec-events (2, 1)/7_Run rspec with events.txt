2024-03-02T16:41:10.6490338Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-02T16:41:10.6491320Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-02T16:41:10.6519962Z shell: /usr/bin/bash -e {0}
2024-03-02T16:41:10.6520369Z env:
2024-03-02T16:41:10.6520711Z   POSTGRES_HOST: localhost
2024-03-02T16:41:10.6521187Z   DATABASE_HOST: localhost
2024-03-02T16:41:10.6521583Z   PG_USERNAME: postgres
2024-03-02T16:41:10.6522024Z   PG_PASSWORD: password
2024-03-02T16:41:10.6522373Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-02T16:41:10.6522804Z   POSTGRES_PORT: 5432
2024-03-02T16:41:10.6523239Z   PGHOST: localhost
2024-03-02T16:41:10.6523601Z   PGUSER: postgres
2024-03-02T16:41:10.6523939Z   RAILS_ENV: test
2024-03-02T16:41:10.6524597Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-02T16:41:10.6525081Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-02T16:41:10.6525485Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-02T16:41:10.6525973Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-02T16:41:10.6526568Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-02T16:41:10.6527286Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-02T16:41:10.6528181Z   EVENTS_READ: true
2024-03-02T16:41:10.6528521Z ##[endgroup]
2024-03-02T16:41:20.0859757Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/models/adjustment_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/donation_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/purchase_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/event_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/models/vendor_spec.rb" "spec/models/partners/profile_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/users_role_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/item_category_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/models/role_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/models/county_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb"
2024-03-02T16:41:28.6214424Z 
2024-03-02T16:41:29.4031559Z Randomized with seed 38886
2024-03-02T16:41:29.4032028Z 
2024-03-02T16:41:29.4032321Z DistributionPdf
2024-03-02T16:41:29.5039988Z   #non_request_data
2024-03-02T16:41:29.5733513Z   #request_data
2024-03-02T16:41:29.5734247Z 
2024-03-02T16:41:29.5734551Z DeallocateKitInventoryService
2024-03-02T16:41:29.5735455Z   #error
2024-03-02T16:41:29.5737010Z     when the storage location organization doesn't match
2024-03-02T16:41:29.8196655Z       returns error
2024-03-02T16:41:29.8197396Z   #deallocate
2024-03-02T16:41:29.8198265Z     when inventory items are available
2024-03-02T16:41:29.8200708Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-02T16:41:30.1554392Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-02T16:41:30.1555854Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-02T16:41:30.5034425Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-02T16:41:30.5035336Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-02T16:41:30.7796844Z         raises error about KitAllocation not found
2024-03-02T16:41:30.7798779Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-02T16:41:31.0742429Z         raises error about inconsistent inventory in or out
2024-03-02T16:41:31.0743434Z 
2024-03-02T16:41:31.0743777Z Reports::AcquisitionReportService
2024-03-02T16:41:31.0744568Z   acquisition report
2024-03-02T16:41:31.9966135Z     should return the proper results on #report
2024-03-02T16:41:31.9966777Z 
2024-03-02T16:41:31.9967026Z Manufacturer
2024-03-02T16:41:31.9968071Z   versioning
2024-03-02T16:41:32.0045355Z     is expected to be versioned
2024-03-02T16:41:32.0046044Z   Methods
2024-03-02T16:41:32.0046600Z     volume
2024-03-02T16:41:32.1529765Z       ignores the amount of product from other manufacturers
2024-03-02T16:41:32.2172241Z       retrieves the amount of product that has been donated by manufacturer
2024-03-02T16:41:32.3516705Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-02T16:41:32.3517713Z   Validations
2024-03-02T16:41:32.3605624Z     must have a unique name within organization
2024-03-02T16:41:32.5343526Z     must belong to an organization
2024-03-02T16:41:32.5344235Z   Private Methods
2024-03-02T16:41:32.5345073Z     #exists_in_org?
2024-03-02T16:41:32.7078313Z       returns true if manufacturer exists in an organization
2024-03-02T16:41:32.7079042Z 
2024-03-02T16:41:32.7079463Z Deadlinable
2024-03-02T16:41:32.7080064Z   validations
2024-03-02T16:41:32.7161774Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-02T16:41:32.7231007Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-02T16:41:32.7272591Z     validates that reminder day is not the same as deadline day
2024-03-02T16:41:32.7273271Z 
2024-03-02T16:41:32.7273783Z Exports::ExportDistributionsCSVService
2024-03-02T16:41:32.7274980Z   #generate_csv_data
2024-03-02T16:41:32.8987354Z     should match the expected content for the csv
2024-03-02T16:41:32.8988413Z     when a new item is added
2024-03-02T16:41:33.0766850Z       should add it to the end of the row
2024-03-02T16:41:33.2644927Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-02T16:41:33.2645813Z     when there are no distributions but the report is requested
2024-03-02T16:41:33.4312514Z       returns a csv with only headers and no rows
2024-03-02T16:41:33.4313387Z 
2024-03-02T16:41:33.4313615Z Purchase
2024-03-02T16:41:33.4318084Z   Callbacks >
2024-03-02T16:41:33.4514030Z     automatically combines duplicate line_item records when they're created
2024-03-02T16:41:33.4685183Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:41:33.4686507Z   behaves like itemizable
2024-03-02T16:41:33.4687260Z     .to_a
2024-03-02T16:41:33.4687777Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:41:33.5080435Z         raises an error
2024-03-02T16:41:33.5081280Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:41:33.5462280Z         calls line_item_values
2024-03-02T16:41:33.5463181Z     .line_items
2024-03-02T16:41:33.5464159Z       combine!
2024-03-02T16:41:33.5978080Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:41:33.6398021Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:41:33.6398742Z       total
2024-03-02T16:41:33.6804916Z         has an item total
2024-03-02T16:41:33.6805815Z       quantities_by_name
2024-03-02T16:41:33.7201615Z         leaves out zero-quantitied items if requested
2024-03-02T16:41:33.7580292Z         returns a hash of items with id, name, and quantity
2024-03-02T16:41:33.7581456Z       sorted
2024-03-02T16:41:33.8155550Z         displays the items, sorted by name
2024-03-02T16:41:33.8156513Z   versioning
2024-03-02T16:41:33.8192010Z     is expected to be versioned
2024-03-02T16:41:33.8192809Z   Associations >
2024-03-02T16:41:33.8193547Z     items >
2024-03-02T16:41:33.8384729Z       has_many
2024-03-02T16:41:33.8385296Z   Scopes >
2024-03-02T16:41:33.8386122Z     during >
2024-03-02T16:41:33.8632791Z       returns all purchases created between two dates
2024-03-02T16:41:33.8633804Z   Methods >
2024-03-02T16:41:33.8634361Z     remove
2024-03-02T16:41:33.9352777Z       removes the item from the purchase
2024-03-02T16:41:34.0087079Z       fails gracefully if the item doesn't exist
2024-03-02T16:41:34.0087917Z     storage_view
2024-03-02T16:41:34.0722119Z       returns name of storage location
2024-03-02T16:41:34.0722913Z   Validations >
2024-03-02T16:41:34.0902802Z     is not valid if any category is non-zero but does not add up to the total
2024-03-02T16:41:34.0990355Z     is not valid if categories do not add up
2024-03-02T16:41:34.1071720Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:41:34.1158049Z     is not valid if period supplies is non-zero but no other category is
2024-03-02T16:41:34.1232094Z     requires an inventory (storage location)
2024-03-02T16:41:34.1409418Z     is invalid when the line items are invalid
2024-03-02T16:41:34.1492537Z     is valid if all categories add up to total
2024-03-02T16:41:34.1567418Z     must belong to an organization
2024-03-02T16:41:34.1647873Z     is valid if categories have no values
2024-03-02T16:41:34.1648724Z 
2024-03-02T16:41:34.1649048Z TransfersController
2024-03-02T16:41:34.1650264Z   While signed in
2024-03-02T16:41:34.1652068Z     GET #show
2024-03-02T16:41:34.2052466Z       returns http success
2024-03-02T16:41:34.2053211Z     POST #create
2024-03-02T16:41:34.2234827Z       renders to #new when failing
2024-03-02T16:41:34.2626042Z       redirects to #show when successful
2024-03-02T16:41:34.2626884Z     Looking at a different organization
2024-03-02T16:41:34.4424383Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:41:34.4424993Z     GET #new
2024-03-02T16:41:34.4547386Z       returns http success
2024-03-02T16:41:34.4548308Z     GET #index
2024-03-02T16:41:34.4673899Z       returns http success
2024-03-02T16:41:34.4674836Z       when filtering by date
2024-03-02T16:41:34.4675641Z         when date parameters are not supplied
2024-03-02T16:41:34.5022545Z           returns all objects
2024-03-02T16:41:34.5023284Z         when date parameters are supplied
2024-03-02T16:41:34.5369613Z           only returns the correct obejects
2024-03-02T16:41:34.5370586Z   While not signed in
2024-03-02T16:41:34.5501057Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:41:34.5501690Z 
2024-03-02T16:41:34.5502155Z DonationItemizedBreakdownService
2024-03-02T16:41:34.5504628Z   #fetch
2024-03-02T16:41:34.9489600Z     return the list of items donated with distributed
2024-03-02T16:41:34.9490240Z 
2024-03-02T16:41:34.9490558Z Partners::Profile
2024-03-02T16:41:34.9529546Z   must allow deleting served_areas
2024-03-02T16:41:34.9530531Z   associations
2024-03-02T16:41:34.9579729Z     is expected to have many served_areas
2024-03-02T16:41:34.9618626Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-02T16:41:34.9656839Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-02T16:41:34.9695630Z     is expected to have a has_many_attached called documents
2024-03-02T16:41:34.9696641Z   request settings validation for profile
2024-03-02T16:41:34.9697622Z     no settings are set to true
2024-03-02T16:41:34.9748558Z       should not be valid
2024-03-02T16:41:34.9749469Z     at least one request type is set to true
2024-03-02T16:41:34.9828686Z       should be valid when enable_quantity_based_requests is true
2024-03-02T16:41:34.9902298Z       should be valid when enable_individual_requests is true
2024-03-02T16:41:34.9982078Z       should be valid when enable_child_based_requests is true
2024-03-02T16:41:34.9982730Z   versioning
2024-03-02T16:41:35.0021675Z     is expected to be versioned
2024-03-02T16:41:35.0023102Z   social media info validation for profile
2024-03-02T16:41:35.0024028Z     no social media presence and the checkbox is checked
2024-03-02T16:41:35.0084667Z       should be valid
2024-03-02T16:41:35.0085749Z     no social media presence and the checkbox isn't checked
2024-03-02T16:41:35.0145006Z       should not be valid
2024-03-02T16:41:35.0249917Z       should be valid if media_information is not needed
2024-03-02T16:41:35.0250972Z     has social media presence and the checkbox is unchecked
2024-03-02T16:41:35.0321751Z       with just instagram it should be valid
2024-03-02T16:41:35.0391253Z       with every social media option it should be valid
2024-03-02T16:41:35.0461193Z       with just twitter it should be valid
2024-03-02T16:41:35.0528765Z       with just facebook it should be valid
2024-03-02T16:41:35.0596816Z       with just a website it should be valid
2024-03-02T16:41:35.0597654Z   client share behaviour
2024-03-02T16:41:35.0598405Z     multiple
2024-03-02T16:41:35.0845634Z       sums the client shares
2024-03-02T16:41:35.1003386Z       is valid if client share sum is 100
2024-03-02T16:41:35.1004372Z     no served areas
2024-03-02T16:41:35.1053499Z       has 0 client share
2024-03-02T16:41:35.1054475Z 
2024-03-02T16:41:35.1054801Z Vendor
2024-03-02T16:41:35.1056086Z   Methods
2024-03-02T16:41:35.1056881Z     volume
2024-03-02T16:41:35.1734472Z       retrieves the amount of product that has been bought from this vendor
2024-03-02T16:41:35.1735488Z   behaves like provideable
2024-03-02T16:41:35.1736089Z     Validations
2024-03-02T16:41:35.1773507Z       is invalid without an organization
2024-03-02T16:41:35.1831571Z       is invalid unless it has either a contact name or a business name
2024-03-02T16:41:35.1832589Z     import_csv
2024-03-02T16:41:35.3566948Z       imports from a csv file
2024-03-02T16:41:35.3567677Z     geocode
2024-03-02T16:41:35.3626537Z       adds coordinates to the database
2024-03-02T16:41:35.3627506Z   versioning
2024-03-02T16:41:35.3662141Z     is expected to be versioned
2024-03-02T16:41:35.3663165Z 
2024-03-02T16:41:35.3663670Z PartnerProfileUpdateService
2024-03-02T16:41:35.3664424Z   #call
2024-03-02T16:41:35.3665649Z     when served area client shares pre-exist
2024-03-02T16:41:35.3666502Z       and the new values are incorrect
2024-03-02T16:41:35.3984102Z         maintains the old values and returns failure
2024-03-02T16:41:35.3984984Z       and the new values are correct
2024-03-02T16:41:35.3985701Z         and there are errors on the profile
2024-03-02T16:41:35.4277834Z           maintains the old values and returns failure
2024-03-02T16:41:35.4278747Z         and there are no other errors
2024-03-02T16:41:35.4576398Z           replaces the old values and returns success
2024-03-02T16:41:35.4577721Z     when there are no pre-existing served areas
2024-03-02T16:41:35.4578597Z       and the new values are incorrect
2024-03-02T16:41:35.4766813Z 0
2024-03-02T16:41:35.4777354Z         does not store the new values and returns a failure
2024-03-02T16:41:35.4778276Z       and the new values are correct
2024-03-02T16:41:35.4988575Z         stores the new values and returns success
2024-03-02T16:41:35.4989526Z         and there are other errors in the profile
2024-03-02T16:41:35.5194212Z           does not store the new values and it returns a failure
2024-03-02T16:41:35.5195394Z 
2024-03-02T16:41:35.5195625Z ItemsInQuery
2024-03-02T16:41:35.5196298Z   items_in
2024-03-02T16:41:35.8730223Z     does not count transfers going in the negative direction
2024-03-02T16:41:36.1665273Z     includes donations, purchases, adjustments, transfers among sources
2024-03-02T16:41:36.5064594Z     does not count negative adjustments towards in-flow
2024-03-02T16:41:36.7767718Z     returns a collection with the fields name, item_id, quantity
2024-03-02T16:41:36.7768458Z 
2024-03-02T16:41:36.7768917Z Request
2024-03-02T16:41:36.7769529Z   total_items
2024-03-02T16:41:36.7870479Z     adds the quantity of all items in the request
2024-03-02T16:41:36.7871405Z   Enums >
2024-03-02T16:41:36.7871915Z     #status
2024-03-02T16:41:36.8077285Z       scopes
2024-03-02T16:41:36.8077931Z   item data
2024-03-02T16:41:36.8166795Z     coerces item quantity and id to always be an integer before saving
2024-03-02T16:41:36.8167719Z   versioning
2024-03-02T16:41:36.8203123Z     is expected to be versioned
2024-03-02T16:41:36.8203827Z 
2024-03-02T16:41:36.8204107Z PartnerGroup
2024-03-02T16:41:36.8205466Z   versioning
2024-03-02T16:41:36.8283913Z     is expected to be versioned
2024-03-02T16:41:36.8284458Z   associations
2024-03-02T16:41:36.8344722Z     is expected to have and belong to many item_categories
2024-03-02T16:41:36.8378970Z     is expected to have many partners
2024-03-02T16:41:36.8432619Z     is expected to belong to organization required: true
2024-03-02T16:41:36.8433366Z   DB constraints
2024-03-02T16:41:36.8433899Z     deadline_day <= 28
2024-03-02T16:41:36.8508399Z       raises error if unmet
2024-03-02T16:41:36.8509205Z     reminder_day <= 28
2024-03-02T16:41:36.8577807Z       raises error if unmet
2024-03-02T16:41:36.8578563Z     send_reminders IS NOT NULL
2024-03-02T16:41:36.8646302Z       raises error if unmet
2024-03-02T16:41:36.8646975Z   Validations >
2024-03-02T16:41:36.8690064Z     must belong to an organization
2024-03-02T16:41:36.8779350Z     requires a unique name within an organization
2024-03-02T16:41:36.9016796Z     does not require a unique name between organizations
2024-03-02T16:41:36.9017994Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-02T16:41:36.9066367Z       should not be valid
2024-03-02T16:41:36.9067004Z 
2024-03-02T16:41:36.9067528Z InventoryAggregate
2024-03-02T16:41:36.9068984Z   individual events
2024-03-02T16:41:37.2725652Z     should process a snapshot event
2024-03-02T16:41:37.6511296Z     should process an audit event
2024-03-02T16:41:37.9643814Z     should process a distribution event
2024-03-02T16:41:38.2696526Z     should process a kit allocation event
2024-03-02T16:41:38.5470533Z     should process a donation event
2024-03-02T16:41:38.8509413Z     should process a transfer destroy event
2024-03-02T16:41:39.2263744Z     should process a kit deallocation event
2024-03-02T16:41:39.5296177Z     should process an adjustment event
2024-03-02T16:41:39.8403641Z     should process a purchase destroyed event
2024-03-02T16:41:40.1386181Z     should process a transfer event
2024-03-02T16:41:40.4574453Z     should process a distribution destroyed event
2024-03-02T16:41:40.7451457Z     should process a donation event after a new storage location is created
2024-03-02T16:41:41.0517295Z     should process a donation destroyed event
2024-03-02T16:41:41.3425466Z     should process a purchase event
2024-03-02T16:41:41.3426232Z   validation
2024-03-02T16:41:41.3427087Z     current event is incorrect
2024-03-02T16:41:41.5779730Z       should raise a bare error
2024-03-02T16:41:41.5780880Z     subsequent event is incorrect
2024-03-02T16:41:41.8691535Z       should add the event to the message
2024-03-02T16:41:41.8692422Z   multiple events
2024-03-02T16:41:42.2658634Z     should process multiple events
2024-03-02T16:41:42.5276585Z     should handle timing correctly
2024-03-02T16:41:42.7870164Z     should ignore unusable snapshots
2024-03-02T16:41:43.0466379Z     should handle changing storage location
2024-03-02T16:41:43.3547041Z     should handle intervening audits
2024-03-02T16:41:43.3547563Z 
2024-03-02T16:41:43.3548274Z PartnerFetchRequestableItemsService
2024-03-02T16:41:43.3549308Z   #call
2024-03-02T16:41:43.3667438Z     raises an error indiciating the partner does not exist with invalid id
2024-03-02T16:41:43.3668593Z     org with any amount of items
2024-03-02T16:41:43.3669576Z       when the partner is in a partner group and has no items
2024-03-02T16:41:43.5670462Z         should return only active and visible items from partner
2024-03-02T16:41:43.5671560Z       when the partner is in a partner group and has items
2024-03-02T16:41:43.8045348Z         should return only active and visible items from partner
2024-03-02T16:41:43.8046290Z     when the partner is not in any partner group
2024-03-02T16:41:43.8325003Z       is expected to be nil
2024-03-02T16:41:43.8325778Z       when the organization has no items
2024-03-02T16:41:43.8623321Z         should return no items
2024-03-02T16:41:43.8624128Z       when the organization has items
2024-03-02T16:41:43.8954605Z         is expected to eq [#<Item id: 1728, name: "Item 1", category: nil, created_at: "2024-03-02 08:41:43.880577966 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-02T16:41:43.9455247Z         should return only active and visible items
2024-03-02T16:41:43.9456600Z 
2024-03-02T16:41:43.9456993Z UsersRole
2024-03-02T16:41:43.9457632Z   versioning
2024-03-02T16:41:43.9504089Z     is expected to be versioned
2024-03-02T16:41:43.9504941Z   #current_role_for
2024-03-02T16:41:43.9505715Z     for org user
2024-03-02T16:41:43.9636372Z       should return org user
2024-03-02T16:41:43.9637167Z     for super admin
2024-03-02T16:41:43.9801436Z       should return super admin
2024-03-02T16:41:43.9802050Z     for partner user
2024-03-02T16:41:43.9933982Z       should return partner user
2024-03-02T16:41:43.9934639Z     for org admin
2024-03-02T16:41:44.0138030Z       should return org admin
2024-03-02T16:41:44.0138830Z 
2024-03-02T16:41:44.0139050Z UiHelper
2024-03-02T16:41:44.0140878Z   optional_data_text
2024-03-02T16:41:44.0142027Z     when the field provided is blank
2024-03-02T16:41:44.0204124Z       should return the text Not-Provided in gray text
2024-03-02T16:41:44.0204817Z     when the field provided is not blank
2024-03-02T16:41:44.0250093Z       should return the content
2024-03-02T16:41:44.0251062Z 
2024-03-02T16:41:44.0251273Z County
2024-03-02T16:41:44.0289171Z   is expected to have many served_areas
2024-03-02T16:41:44.0289862Z   versioning
2024-03-02T16:41:44.0323088Z     is expected to be versioned
2024-03-02T16:41:44.0325552Z 
2024-03-02T16:41:44.0325902Z HistoricalDataCacheJob
2024-03-02T16:41:44.2128525Z   queues the job
2024-03-02T16:41:44.3962872Z   caches the historical data
2024-03-02T16:41:44.3963351Z 
2024-03-02T16:41:44.3963595Z SyncNDBNMembers
2024-03-02T16:41:44.3964491Z   .sync
2024-03-02T16:41:44.3965366Z     when the HTTP request does not get a response of 200
2024-03-02T16:41:44.4204274Z       should raise an error regarding the response code
2024-03-02T16:41:44.4205363Z     when the HTTP request is successful
2024-03-02T16:41:44.4206479Z       when the account name of a NDBN Member has changed
2024-03-02T16:41:44.4366757Z         should update the account name of the corresponding NDBN Member
2024-03-02T16:41:44.4367602Z       when there are no exisiting NDBN Member records
2024-03-02T16:41:44.4462888Z         should create the NDBN Member records
2024-03-02T16:41:44.4463488Z       when no new NDBN Member has been added
2024-03-02T16:41:44.4578499Z         should not add any new NDBN Members
2024-03-02T16:41:44.4579359Z 
2024-03-02T16:41:44.4579595Z AddRoleService
2024-03-02T16:41:44.4580668Z   #call
2024-03-02T16:41:44.4581528Z     when the role already exists
2024-03-02T16:41:44.6534322Z       should raise an error
2024-03-02T16:41:44.8491614Z       should raise an error for super admin
2024-03-02T16:41:44.8492195Z     when the role does not yet exist
2024-03-02T16:41:45.0348840Z       works with super admin
2024-03-02T16:41:45.2421866Z       should add the user role when asked to add admin
2024-03-02T16:41:45.4544860Z       works with a partner
2024-03-02T16:41:45.6476808Z       should add the role
2024-03-02T16:41:45.6477536Z 
2024-03-02T16:41:45.6477761Z ProductDriveHelper
2024-03-02T16:41:45.6479470Z   #is_virtual
2024-03-02T16:41:45.6480826Z     when a product drive was not provided
2024-03-02T16:41:45.6537821Z       without argument
2024-03-02T16:41:45.6582499Z       with blank argument
2024-03-02T16:41:45.6583369Z     when the product drive wasn't held virtually
2024-03-02T16:41:45.6635792Z       is expected to eq "No"
2024-03-02T16:41:45.6636397Z     when the product drive was held virtually
2024-03-02T16:41:45.6686207Z       is expected to eq "Yes"
2024-03-02T16:41:45.6688570Z 
2024-03-02T16:41:45.6688774Z Distribution
2024-03-02T16:41:45.6690381Z   Scopes >
2024-03-02T16:41:45.6691582Z     by_item_id >
2024-03-02T16:41:45.8005272Z       only returns distributions with given item id
2024-03-02T16:41:45.8006167Z     by_location >
2024-03-02T16:41:45.8497831Z       only returns distributions with given location id
2024-03-02T16:41:45.8498429Z     during >
2024-03-02T16:41:45.9187686Z       returns all distributions created between two dates
2024-03-02T16:41:45.9188765Z     this_week >
2024-03-02T16:41:45.9189392Z       When it's Tuesday (mid-week)
2024-03-02T16:41:45.9885610Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-02T16:41:45.9886970Z       When it's Sunday (end of the week)
2024-03-02T16:41:46.0353185Z         doesn't include distributions past Sunday
2024-03-02T16:41:46.0354208Z     by_partner >
2024-03-02T16:41:46.0829641Z       only returns distributions with given partner id
2024-03-02T16:41:46.0830380Z   CSV export >
2024-03-02T16:41:46.0830988Z     for_csv_export >
2024-03-02T16:41:46.4187989Z       filters only to the given organization
2024-03-02T16:41:46.7466328Z       filters only to the given issue time range
2024-03-02T16:41:47.0674131Z       filters only to the given filter
2024-03-02T16:41:47.0674884Z     csv_export_attributes
2024-03-02T16:41:47.4657574Z       returns the set of attributes which define a row in case of distribution export
2024-03-02T16:41:47.4659037Z   behaves like itemizable
2024-03-02T16:41:47.4659673Z     .line_items
2024-03-02T16:41:47.4660263Z       combine!
2024-03-02T16:41:47.5201696Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:41:47.5616954Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:41:47.5618164Z       sorted
2024-03-02T16:41:47.6803016Z         displays the items, sorted by name
2024-03-02T16:41:47.6803871Z       quantities_by_name
2024-03-02T16:41:47.7642158Z         leaves out zero-quantitied items if requested
2024-03-02T16:41:47.8461790Z         returns a hash of items with id, name, and quantity
2024-03-02T16:41:47.8462689Z       total
2024-03-02T16:41:47.9290854Z         has an item total
2024-03-02T16:41:47.9291655Z     .to_a
2024-03-02T16:41:47.9292785Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:41:47.9618855Z         raises an error
2024-03-02T16:41:47.9619548Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:41:47.9943549Z         calls line_item_values
2024-03-02T16:41:47.9944396Z   Validations >
2024-03-02T16:41:47.9994534Z     requires a storage location
2024-03-02T16:41:48.0044216Z     must belong to an organization
2024-03-02T16:41:48.0447604Z     ensures the associated line_items are valid
2024-03-02T16:41:48.0602318Z     ensures the associated line_items are invalid with a nil quantity
2024-03-02T16:41:48.0660588Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:41:48.0870994Z     ensures the associated line_items are invalid with a zero quantity
2024-03-02T16:41:48.0904361Z     ensures that any included items are found in the associated storage location
2024-03-02T16:41:48.0961609Z     requires a partner
2024-03-02T16:41:48.0962922Z     when delivery method is other then shipped
2024-03-02T16:41:48.1238436Z       allows to save distribution
2024-03-02T16:41:48.1239315Z     when delivery method is shipped
2024-03-02T16:41:48.1240308Z       shipping cost is negative
2024-03-02T16:41:48.1316426Z         will not allow to save distribution
2024-03-02T16:41:48.1317382Z       shipping cost is none negative
2024-03-02T16:41:48.1589312Z         allows to save distribution
2024-03-02T16:41:48.1590013Z   Methods >
2024-03-02T16:41:48.1591475Z     #distributed_at
2024-03-02T16:41:48.1848558Z       shows the hour and minutes if it has been provided
2024-03-02T16:41:48.2315090Z       displays explicit issued_at date
2024-03-02T16:41:48.2316023Z     #copy_line_items
2024-03-02T16:41:48.2730104Z       replicates line_items from a donation into a distribution
2024-03-02T16:41:48.2730979Z     #copy_from_request
2024-03-02T16:41:48.2964804Z       copy over relevant request information into the distrubution
2024-03-02T16:41:48.2965746Z     #future?
2024-03-02T16:41:48.2966278Z       when issued_at has passed
2024-03-02T16:41:48.3229354Z         returns false
2024-03-02T16:41:48.3230028Z       when issued_at has not passed
2024-03-02T16:41:48.3493126Z         returns true
2024-03-02T16:41:48.3493764Z     #combine_duplicates
2024-03-02T16:41:48.3895107Z       condenses duplicate line_items if the item_ids match
2024-03-02T16:41:48.3896233Z   versioning
2024-03-02T16:41:48.3934189Z     is expected to be versioned
2024-03-02T16:41:48.3935135Z   Callbacks >
2024-03-02T16:41:48.4440999Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:41:48.4442212Z     #before_save
2024-03-02T16:41:48.4442973Z       #reset_shipping_cost
2024-03-02T16:41:48.4443775Z         when delivery_method is other then shipped
2024-03-02T16:41:48.4715829Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-02T16:41:48.4716537Z 
2024-03-02T16:41:48.4716861Z NotifyPartnerJob
2024-03-02T16:41:48.4717529Z   #perform
2024-03-02T16:41:48.4767262Z     avoids exception when request doesn't exist
2024-03-02T16:41:48.4881909Z     is expected to call RequestsConfirmationMailer
2024-03-02T16:41:48.4882977Z     when the request's partner is deactivated
2024-03-02T16:41:48.5151609Z       does not send the confirmation email
2024-03-02T16:41:48.5152232Z 
2024-03-02T16:41:48.5152463Z Role
2024-03-02T16:41:48.5189951Z   is expected to accepts_nested_attributes_for :users
2024-03-02T16:41:48.5190731Z   Validations
2024-03-02T16:41:48.5242991Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-02T16:41:48.5244021Z   Associations
2024-03-02T16:41:48.5279737Z     is expected to belong to resource optional: true
2024-03-02T16:41:48.5337454Z     is expected to have and belong to many users
2024-03-02T16:41:48.5339571Z   versioning
2024-03-02T16:41:48.5373944Z     is expected to be versioned
2024-03-02T16:41:48.5374630Z 
2024-03-02T16:41:48.5375047Z OrganizationUpdateService
2024-03-02T16:41:48.5375872Z   #update_partner_flags
2024-03-02T16:41:48.5376702Z     when request flags have changed
2024-03-02T16:41:48.7551374Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-02T16:41:48.9738790Z       should update partners when disabling quantity-based request flags
2024-03-02T16:41:49.1974020Z       should update partners when disabling child and individual request flags
2024-03-02T16:41:49.1975080Z     when request flags haven't changed
2024-03-02T16:41:49.4130076Z       should not update partners
2024-03-02T16:41:49.4130765Z   #update
2024-03-02T16:41:49.4131479Z     when object is invalid
2024-03-02T16:41:49.5905632Z       should not update and return false
2024-03-02T16:41:49.5906341Z     when organization has partners
2024-03-02T16:41:49.5907409Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-02T16:41:49.8155114Z         should allow the disabling of request flags in organization and its partners
2024-03-02T16:41:49.8156525Z       when all of a single partner's request flags will be disabled
2024-03-02T16:41:50.0317735Z         should add an error message to the organization
2024-03-02T16:41:50.2512571Z         should NOT change request flags in organization or its partners
2024-03-02T16:41:50.2513463Z     when object is valid
2024-03-02T16:41:50.4251824Z       should update and return true
2024-03-02T16:41:50.4252671Z 
2024-03-02T16:41:50.4253067Z ItemsOutTotalQuery
2024-03-02T16:41:50.4254108Z   items_out_total_query
2024-03-02T16:41:50.5420706Z     returns a sum total of all out-flows
2024-03-02T16:41:50.5421416Z 
2024-03-02T16:41:50.5421980Z DistributionsController
2024-03-02T16:41:50.5422608Z   While signed in
2024-03-02T16:41:50.5423391Z     POST #create
2024-03-02T16:41:50.5424894Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-02T16:41:50.6138176Z         redirects with a flash notice and a flash error
2024-03-02T16:41:50.6139393Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-02T16:41:50.6936646Z         redirects with a flash notice and a flash alert
2024-03-02T16:41:50.6937609Z       when line item quantity is not positive
2024-03-02T16:41:50.7515221Z         flashes an error
2024-03-02T16:41:50.7516687Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-02T16:41:50.8353509Z         redirects with a flash notice and a flash error
2024-03-02T16:41:50.8354329Z     PUT #update
2024-03-02T16:41:50.8355368Z       when distribution has items updated for minimum quantity
2024-03-02T16:41:50.9680674Z         redirects with a flash notice and send send_notification
2024-03-02T16:41:50.9681904Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-02T16:41:51.0789371Z         redirects with a flash notice and a flash error
2024-03-02T16:41:51.0791042Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-02T16:41:51.1939852Z         redirects with a flash notice and a flash error
2024-03-02T16:41:51.1940947Z 
2024-03-02T16:41:51.1941238Z Partner
2024-03-02T16:41:51.1943671Z   versioning
2024-03-02T16:41:51.1983155Z     is expected to be versioned
2024-03-02T16:41:51.1983834Z   #deactivated?
2024-03-02T16:41:51.1984938Z     when the status is not 'deactivated'
2024-03-02T16:41:51.2028560Z       should return false
2024-03-02T16:41:51.2029459Z     when the status is 'deactivated'
2024-03-02T16:41:51.2070324Z       should return true
2024-03-02T16:41:51.2070942Z   callbacks
2024-03-02T16:41:51.2291843Z     properly downcases email
2024-03-02T16:41:51.2292538Z   Validations >
2024-03-02T16:41:51.2347001Z     must belong to an organization
2024-03-02T16:41:51.2615126Z     still requires a unique email between organizations
2024-03-02T16:41:51.2890983Z     requires a unique name within an organization
2024-03-02T16:41:51.2981733Z     validates the quota is a number but it is not required
2024-03-02T16:41:51.3287014Z     requires a unique email that is formatted correctly
2024-03-02T16:41:51.3525924Z     does not require a unique name between organizations
2024-03-02T16:41:51.3526842Z   changing emails
2024-03-02T16:41:51.3789503Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-02T16:41:51.4055059Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-02T16:41:51.4312384Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-02T16:41:51.4574784Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-02T16:41:51.4818520Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-02T16:41:51.5066871Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-02T16:41:51.5382283Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-02T16:41:51.5383383Z   #approvable?
2024-03-02T16:41:51.5384045Z     when status is not invited or awaiting_review
2024-03-02T16:41:51.5457594Z       should return false
2024-03-02T16:41:51.5458314Z     when status is invited
2024-03-02T16:41:51.5497741Z       should return true
2024-03-02T16:41:51.5498574Z     when status is awaiting_review
2024-03-02T16:41:51.5539922Z       should return true
2024-03-02T16:41:51.5540595Z   #impact_metrics
2024-03-02T16:41:51.5541445Z     when partner has related information
2024-03-02T16:41:51.6269902Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-02T16:41:51.6271232Z     when partner don't have any related information
2024-03-02T16:41:51.6502338Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-02T16:41:51.6503406Z   associations
2024-03-02T16:41:51.6539456Z     is expected to have many requests
2024-03-02T16:41:51.6573949Z     is expected to have many users dependent => destroy
2024-03-02T16:41:51.6606635Z     is expected to have many families dependent => destroy
2024-03-02T16:41:51.6664476Z     is expected to belong to organization required: true
2024-03-02T16:41:51.6699178Z     is expected to have many item_categories through partner_group
2024-03-02T16:41:51.6750359Z     is expected to belong to partner_group optional: true
2024-03-02T16:41:51.6783920Z     is expected to have many requests
2024-03-02T16:41:51.6819167Z     is expected to have many distributions
2024-03-02T16:41:51.6853838Z     is expected to have many children through families
2024-03-02T16:41:51.6888692Z     is expected to have many requestable_items through item_categories source => items
2024-03-02T16:41:51.6889596Z     primary_user
2024-03-02T16:41:51.7176380Z       should return the first user ever created for a partner
2024-03-02T16:41:51.7177215Z   Filters
2024-03-02T16:41:51.7177803Z     by_status
2024-03-02T16:41:51.7565968Z       yields deactivated partner when deactivated status provided
2024-03-02T16:41:51.8053445Z       yields partners with the provided status
2024-03-02T16:41:51.8054414Z   #profile
2024-03-02T16:41:51.8288555Z     should return the associated Partners::Profile record
2024-03-02T16:41:51.8289383Z   ActiveStorage validation
2024-03-02T16:41:51.8404533Z     validates that attachments are pdf or docs
2024-03-02T16:41:51.8405304Z   import_csv
2024-03-02T16:41:52.0491306Z     imports partners from a csv file and prevents multiple imports
2024-03-02T16:41:52.3665143Z     imports partners from a csv file with BOM encodings
2024-03-02T16:41:52.3666767Z   #deletable?
2024-03-02T16:41:52.3667419Z     when status is uninvited
2024-03-02T16:41:52.3668407Z       when it has a request
2024-03-02T16:41:52.3827911Z         should return false
2024-03-02T16:41:52.3828746Z       when it has a distribution
2024-03-02T16:41:52.3969559Z         should return false
2024-03-02T16:41:52.3970424Z       when it has a profile but no users
2024-03-02T16:41:52.4124668Z         should return true
2024-03-02T16:41:52.4125450Z       when it has a profile and users
2024-03-02T16:41:52.4370784Z         should return false
2024-03-02T16:41:52.4371537Z       when it has no other associations
2024-03-02T16:41:52.4476121Z         should return true
2024-03-02T16:41:52.4476799Z     when status is not uninvited
2024-03-02T16:41:52.4552935Z       should return false
2024-03-02T16:41:52.4553554Z   #csv_export_attributes
2024-03-02T16:41:52.4789264Z     includes contact person information from parnerbase
2024-03-02T16:41:52.4789935Z   #quantity_year_to_date
2024-03-02T16:41:52.6517818Z     includes all item quantities from distributions issued during the current year
2024-03-02T16:41:52.8288832Z     does not include quantities from distributions issued during the previous year
2024-03-02T16:41:52.8290045Z 
2024-03-02T16:41:52.8290321Z RequestDestroyService
2024-03-02T16:41:52.8290876Z   #call
2024-03-02T16:41:52.8408300Z     should return an instance of itself
2024-03-02T16:41:52.8409262Z     when the request's partner is deactivated
2024-03-02T16:41:52.8665581Z       should have errors
2024-03-02T16:41:52.8666488Z     when there are no validation errors
2024-03-02T16:41:52.8793366Z       should update the discarded_at column on the request
2024-03-02T16:41:52.8921314Z       should update the status column on the request
2024-03-02T16:41:52.9037633Z       should send a email notification to the partner
2024-03-02T16:41:52.9038662Z     when the request is already discarded
2024-03-02T16:41:52.9137364Z       should not be successful and have errors
2024-03-02T16:41:52.9138242Z     when the request_id matches no request
2024-03-02T16:41:52.9176453Z       should not be successful and have errors indicating request id is invalid
2024-03-02T16:41:52.9177302Z 
2024-03-02T16:41:52.9177591Z Exports::ExportRequestService
2024-03-02T16:41:52.9178355Z   .generate_csv_data
2024-03-02T16:41:53.1248629Z     includes rows for each request with correct columns of item quantity
2024-03-02T16:41:53.3302519Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-02T16:41:53.3303675Z 
2024-03-02T16:41:53.3304187Z TransferDestroyService
2024-03-02T16:41:53.3304807Z   #call
2024-03-02T16:41:53.3305363Z     because transfer should not be deleted
2024-03-02T16:41:53.5131957Z       should return an OpenStruct with the raised error
2024-03-02T16:41:53.5133084Z     when an issue occurs in transaction
2024-03-02T16:41:53.5134530Z       because the transfer destroy raised an error
2024-03-02T16:41:53.7000614Z         should return a OpenStruct with the raised error
2024-03-02T16:41:53.7002013Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-02T16:41:53.8830471Z         should return a OpenStruct with the raised error
2024-03-02T16:41:53.8831370Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-02T16:41:54.0633362Z         should return a OpenStruct with the raised error
2024-03-02T16:41:54.0634828Z       because the transfer_id does not match any Transfer
2024-03-02T16:41:54.2453706Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-02T16:41:54.2454581Z     when there are no issues
2024-03-02T16:41:54.4481815Z       should execute the expected methods
2024-03-02T16:41:54.6480270Z       should return an OpenStruct with success? set to true
2024-03-02T16:41:54.6480993Z 
2024-03-02T16:41:54.6481215Z ItemCategory
2024-03-02T16:41:54.6482346Z   assocations
2024-03-02T16:41:54.6520243Z     is expected to have many items
2024-03-02T16:41:54.6569558Z     is expected to belong to organization required: true
2024-03-02T16:41:54.6630144Z     is expected to have and belong to many partner_groups
2024-03-02T16:41:54.6631066Z   validations
2024-03-02T16:41:54.6836800Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-02T16:41:54.6921831Z     is expected to validate that :organization cannot be empty/falsy
2024-03-02T16:41:54.7004891Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:41:54.7074967Z     is expected to validate that the length of :description is at most 250
2024-03-02T16:41:54.7076017Z   versioning
2024-03-02T16:41:54.7110968Z     is expected to be versioned
2024-03-02T16:41:54.7112874Z 
2024-03-02T16:41:54.7113512Z ApplicationController
2024-03-02T16:41:54.7114180Z   current_organization
2024-03-02T16:41:54.7114984Z     As a partner user
2024-03-02T16:41:54.7274383Z       should return nil
2024-03-02T16:41:54.7275358Z     As an org user
2024-03-02T16:41:55.0877994Z       should return the first org role
2024-03-02T16:41:55.0879127Z       with a changed current role
2024-03-02T16:41:55.5508686Z         should return the first org role
2024-03-02T16:41:55.5509972Z   dashboard_path_from_current_role
2024-03-02T16:41:55.5510601Z     As a super admin
2024-03-02T16:41:55.5752700Z       links to the admin dashboard
2024-03-02T16:41:55.5753440Z     As a user without super admin status
2024-03-02T16:41:55.6113457Z       links to the general dashboard
2024-03-02T16:41:55.6121556Z   current_partner
2024-03-02T16:41:55.6122614Z     As an org user
2024-03-02T16:41:55.6653220Z       should return nil
2024-03-02T16:41:55.6653773Z     As a partner user
2024-03-02T16:41:55.7210904Z       should return the first partner role
2024-03-02T16:41:55.7211779Z       with a changed current role
2024-03-02T16:41:55.7759667Z         should return the first partner role
2024-03-02T16:41:55.7760631Z 
2024-03-02T16:41:55.7760997Z Partners::AuthorizedFamilyMember
2024-03-02T16:41:55.7761987Z   associations
2024-03-02T16:41:55.7820816Z     is expected to have many child_item_requests dependent => nullify
2024-03-02T16:41:55.7864766Z     is expected to belong to family required: true
2024-03-02T16:41:55.7865321Z   #display_name
2024-03-02T16:41:55.8131259Z     should return the family member's first and last name
2024-03-02T16:41:55.8132125Z   versioning
2024-03-02T16:41:55.8165783Z     is expected to be versioned
2024-03-02T16:41:55.8166620Z 
2024-03-02T16:41:55.8166885Z Kit
2024-03-02T16:41:56.0161368Z   deactivate and reactivate
2024-03-02T16:41:56.0162331Z   Filtering >
2024-03-02T16:41:56.0199037Z     can filter
2024-03-02T16:41:56.5865742Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T16:41:56.5866531Z     ->by_partner_key
2024-03-02T16:41:56.8157165Z       shows the kits for a particular item
2024-03-02T16:41:56.8157973Z   Validations >
2024-03-02T16:41:56.8315952Z     requires a name
2024-03-02T16:41:56.8470306Z     requires at least one item
2024-03-02T16:41:56.8628375Z     must belong to an organization
2024-03-02T16:41:57.0552068Z     requires a unique name
2024-03-02T16:41:57.0710513Z     is valid as built
2024-03-02T16:41:57.0875880Z     can't have negative value
2024-03-02T16:41:57.0876688Z   versioning
2024-03-02T16:41:57.0910122Z     is expected to be versioned
2024-03-02T16:41:57.0910881Z   #can_deactivate?
2024-03-02T16:41:57.0911641Z     without inventory items
2024-03-02T16:41:57.2898360Z       should return true
2024-03-02T16:41:57.2899440Z     with inventory items
2024-03-02T16:41:57.5072797Z       should return false
2024-03-02T16:41:57.5073615Z   Value >
2024-03-02T16:41:57.5232521Z     converts dollars to cents
2024-03-02T16:41:57.5388356Z     converts cents to dollars
2024-03-02T16:41:57.5389285Z     .value_per_itemizable
2024-03-02T16:41:57.5767057Z       calculates values from associated items
2024-03-02T16:41:57.5774082Z 
2024-03-02T16:41:57.5774429Z OrganizationStats
2024-03-02T16:41:57.5775986Z   partners_added method >
2024-03-02T16:41:57.5776864Z     current org is not nil >
2024-03-02T16:41:57.5812169Z       should return actual count of partners
2024-03-02T16:41:57.5817731Z     current org is nil >
2024-03-02T16:41:57.5852038Z       should return 0
2024-03-02T16:41:57.5852684Z   storage_locations_added method >
2024-03-02T16:41:57.5853577Z     current org is nil >
2024-03-02T16:41:57.5893451Z       should return 0
2024-03-02T16:41:57.5894277Z     current org is not nil >
2024-03-02T16:41:57.5931555Z       should return actual count of locations
2024-03-02T16:41:57.5932526Z   locations_with_inventory method >
2024-03-02T16:41:57.5933465Z     current org is not nil + locations have items >
2024-03-02T16:41:57.6270126Z       should return storage location
2024-03-02T16:41:57.6270900Z     current org is nil >
2024-03-02T16:41:57.6304954Z       should return an empty array
2024-03-02T16:41:57.6305799Z     current org is not nil + no locations have items >
2024-03-02T16:41:57.6369149Z       should return an empty array
2024-03-02T16:41:57.6370124Z   donation_sites_added method >
2024-03-02T16:41:57.6370844Z     current org is nil >
2024-03-02T16:41:57.6406606Z       should return 0
2024-03-02T16:41:57.6407633Z     current org is not nil >
2024-03-02T16:41:57.6444079Z       should return actual count of donation sites
2024-03-02T16:41:57.6445456Z 
2024-03-02T16:41:57.6447502Z StorageLocation
2024-03-02T16:41:57.6448113Z   Callbacks >
2024-03-02T16:41:57.6448636Z     before_destroy
2024-03-02T16:41:57.6835085Z       does not delete storage locations with inventory items on it
2024-03-02T16:41:57.7409217Z       deletes storage locations with no inventory items on it
2024-03-02T16:41:57.7410405Z   versioning
2024-03-02T16:41:57.7447984Z     is expected to be versioned
2024-03-02T16:41:57.7448726Z   Filtering >
2024-03-02T16:41:57.7537066Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-02T16:41:57.8217861Z     ->containing yields only inventories that have that item
2024-03-02T16:41:57.8218542Z   Validations >
2024-03-02T16:41:57.8281499Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:41:57.8340257Z     is expected to validate that :address cannot be empty/falsy
2024-03-02T16:41:57.8394539Z     is expected to validate that :organization cannot be empty/falsy
2024-03-02T16:41:57.8395443Z   Methods >
2024-03-02T16:41:57.8399116Z     size
2024-03-02T16:41:57.8850046Z       returns total quantity of all items in this storage location
2024-03-02T16:41:57.8851109Z     inventory_total_value_in_dollars
2024-03-02T16:41:57.8965218Z       returns 0 when there are no items in this storage location
2024-03-02T16:41:57.9447859Z       returns total value of all items in this storage location
2024-03-02T16:41:57.9849171Z       returns a value including cents if the total isn't an even dollar amount
2024-03-02T16:41:57.9849899Z     geocode
2024-03-02T16:41:57.9956451Z       adds coordinates to the database
2024-03-02T16:41:57.9957471Z     StorageLocation.items_inventoried
2024-03-02T16:41:58.0757590Z       returns a collection of items that are stored within inventories
2024-03-02T16:41:58.0758690Z     import_csv
2024-03-02T16:41:58.0872338Z       imports storage locations from a csv file
2024-03-02T16:41:58.0873420Z     item_total
2024-03-02T16:41:58.1251463Z       retrieves the total for a single item
2024-03-02T16:41:58.1252752Z     csv_export_attributes
2024-03-02T16:41:58.1880407Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-02T16:41:58.1882035Z     increase_inventory
2024-03-02T16:41:58.1882826Z       when providing a new item that does not yet exist
2024-03-02T16:41:58.2969218Z         creates those new inventory items in the storage location
2024-03-02T16:41:58.3169466Z       when increasing with an inactive item
2024-03-02T16:41:58.4099412Z         re-activates the item as part of the creation process
2024-03-02T16:41:58.4100169Z       With existing inventory
2024-03-02T16:41:58.5185837Z         increases inventory quantities from an itemizable object
2024-03-02T16:41:58.5186982Z     decrease_inventory
2024-03-02T16:41:58.6278036Z       decreases inventory quantities from an itemizable object
2024-03-02T16:41:58.6278952Z       when there is insufficient inventory available
2024-03-02T16:41:58.6362188Z         gives informative errors
2024-03-02T16:41:58.6443238Z         does not change inventory quantities if there is an error
2024-03-02T16:41:58.6443998Z     import_inventory
2024-03-02T16:41:59.0194491Z       imports storage locations from a csv file
2024-03-02T16:41:59.0195138Z 
2024-03-02T16:41:59.0195336Z InventoryCheckService
2024-03-02T16:41:59.0196365Z   call
2024-03-02T16:41:59.0197304Z     error
2024-03-02T16:41:59.0966227Z       should set the error
2024-03-02T16:41:59.0966834Z     alert
2024-03-02T16:41:59.1712523Z       should set the alert
2024-03-02T16:41:59.1713268Z 
2024-03-02T16:41:59.1713942Z Reports::WarehouseReportService
2024-03-02T16:41:59.1714923Z   #report
2024-03-02T16:41:59.3492718Z     should print zero values
2024-03-02T16:41:59.7045542Z     should print normal values
2024-03-02T16:42:00.0500094Z     should print unknown warehouse type
2024-03-02T16:42:00.2298494Z     should print unknown square footage
2024-03-02T16:42:00.2299380Z 
2024-03-02T16:42:00.2299594Z Event
2024-03-02T16:42:00.2300573Z   #most_recent_snapshot
2024-03-02T16:42:00.4719681Z     should not include an unusable snapshot
2024-03-02T16:42:00.7085042Z     should include the last usable snapshot
2024-03-02T16:42:00.7085603Z 
2024-03-02T16:42:00.7085776Z PartnerMailerJob
2024-03-02T16:42:00.7086651Z   conditionally sending the emails
2024-03-02T16:42:01.0074296Z     sends mail for future distributions immediately
2024-03-02T16:42:01.2128157Z     does not send mail for past distributions
2024-03-02T16:42:01.2128986Z     when the distribution is for a deactivated partner
2024-03-02T16:42:01.4145425Z       does not send the email
2024-03-02T16:42:01.4146800Z 
2024-03-02T16:42:01.4147098Z Adjustment
2024-03-02T16:42:01.4148824Z   Scopes >
2024-03-02T16:42:01.4324008Z     `at_location` can filter out adjustments to a specific location
2024-03-02T16:42:01.4480653Z     `by_user` can filter out adjustments to a specific user
2024-03-02T16:42:01.4481145Z   Methods >
2024-03-02T16:42:01.6460873Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-02T16:42:01.6462006Z     split_difference
2024-03-02T16:42:01.7229605Z       gracefully handles adjustments with only positive
2024-03-02T16:42:01.7999515Z       returns two adjustment objects
2024-03-02T16:42:01.8766849Z       gracefully handles adjustments with only negative
2024-03-02T16:42:01.8767591Z   behaves like itemizable
2024-03-02T16:42:01.8768272Z     .line_items
2024-03-02T16:42:01.8769188Z       total
2024-03-02T16:42:01.9170931Z         has an item total
2024-03-02T16:42:01.9171448Z       combine!
2024-03-02T16:42:01.9635618Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:42:02.0040691Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:42:02.0041765Z       sorted
2024-03-02T16:42:02.0604193Z         displays the items, sorted by name
2024-03-02T16:42:02.0605005Z       quantities_by_name
2024-03-02T16:42:02.0990996Z         leaves out zero-quantitied items if requested
2024-03-02T16:42:02.1373274Z         returns a hash of items with id, name, and quantity
2024-03-02T16:42:02.1374131Z     .to_a
2024-03-02T16:42:02.1374831Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:42:02.1721839Z         raises an error
2024-03-02T16:42:02.1722638Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:42:02.2060610Z         calls line_item_values
2024-03-02T16:42:02.2061369Z   nested line item attributes
2024-03-02T16:42:02.2447373Z     accepts them
2024-03-02T16:42:02.2447920Z   versioning
2024-03-02T16:42:02.2481660Z     is expected to be versioned
2024-03-02T16:42:02.2482633Z   Validations >
2024-03-02T16:42:02.2641747Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-02T16:42:02.2720134Z     must belong to an organization
2024-03-02T16:42:02.3118162Z     allows you to remove all the inventory that exists in the storage location
2024-03-02T16:42:02.3118924Z 
2024-03-02T16:42:02.3119106Z NDBNMember
2024-03-02T16:42:02.3120482Z   versioning
2024-03-02T16:42:02.3155686Z     is expected to be versioned
2024-03-02T16:42:02.3156222Z   validations
2024-03-02T16:42:02.3224175Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-02T16:42:02.3279062Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-02T16:42:02.3340561Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-02T16:42:02.3341363Z   #full_name
2024-03-02T16:42:02.3375130Z     should equal the id and the account name
2024-03-02T16:42:02.3375661Z 
2024-03-02T16:42:02.3375899Z DistributionUpdateService
2024-03-02T16:42:02.3376894Z   call
2024-03-02T16:42:02.4480566Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T16:42:02.4481575Z   resend_notification?
2024-03-02T16:42:02.5416291Z     changes the issue_date, resulting in resend_notification? = true
2024-03-02T16:42:02.6319856Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-02T16:42:02.7318698Z     changes any distribution content, resulting in resend_notification? = true
2024-03-02T16:42:02.7319777Z 
2024-03-02T16:42:02.7320037Z ServiceObjectErrorsMixin
2024-03-02T16:42:02.7320727Z   self.included
2024-03-02T16:42:02.7359542Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-02T16:42:02.7360479Z 
2024-03-02T16:42:02.7360867Z Partners::FetchPartnersToRemindNowService
2024-03-02T16:42:02.7361753Z   .fetch
2024-03-02T16:42:02.7362309Z     when there is a partner
2024-03-02T16:42:02.7363473Z       that does NOT have a organization with a global reminder & deadline
2024-03-02T16:42:02.7364936Z         and is a part of a partner group that does have them defined
2024-03-02T16:42:02.7366016Z           that is for today
2024-03-02T16:42:02.7735503Z             should include that partner
2024-03-02T16:42:02.7736572Z             but the partner is deactivated
2024-03-02T16:42:02.8112668Z               should NOT include that partner
2024-03-02T16:42:02.8114163Z           that is not for today
2024-03-02T16:42:02.8438907Z             should NOT include that partner
2024-03-02T16:42:02.8440069Z       that has an organization with a global reminder & deadline
2024-03-02T16:42:02.8442176Z         that is for today
2024-03-02T16:42:02.8726758Z           should include that partner
2024-03-02T16:42:02.8727529Z           and has send_reminder=false
2024-03-02T16:42:02.9051168Z             should NOT include that partner
2024-03-02T16:42:02.9052063Z           but the partner is deactivated
2024-03-02T16:42:02.9375733Z             should NOT include that partner
2024-03-02T16:42:02.9376662Z         that is not for today
2024-03-02T16:42:02.9663864Z           should NOT include that partner
2024-03-02T16:42:02.9664747Z         AND a partner group that does have them defined
2024-03-02T16:42:03.0015772Z           should remind based on the partner group instead of the organization level reminder
2024-03-02T16:42:03.0016880Z           but the partner is deactivated
2024-03-02T16:42:03.0401288Z             should NOT include that partner
2024-03-02T16:42:03.0402626Z 
2024-03-02T16:42:03.0403363Z Partners::ServedArea
2024-03-02T16:42:03.0645179Z   must only allow valid client share values
2024-03-02T16:42:03.0690387Z   is expected to belong to partner_profile required: true
2024-03-02T16:42:03.0730533Z   is expected to belong to county required: true
2024-03-02T16:42:03.0865438Z   must only allow integer client shares
2024-03-02T16:42:03.0866078Z   versioning
2024-03-02T16:42:03.0901843Z     is expected to be versioned
2024-03-02T16:42:03.0902791Z 
2024-03-02T16:42:03.0902980Z HelpController
2024-03-02T16:42:03.0903617Z   While signed in as a normal user >
2024-03-02T16:42:03.0904431Z     GET #show
2024-03-02T16:42:03.1043164Z       returns http success
2024-03-02T16:42:03.1122166Z       does not display help page when the user logs out
2024-03-02T16:42:03.1122891Z 
2024-03-02T16:42:03.1123609Z Partners::UpdateFamily
2024-03-02T16:42:03.1124449Z   #call
2024-03-02T16:42:03.1125295Z     when family has children
2024-03-02T16:42:03.1516254Z       archives the family and its children
2024-03-02T16:42:03.1516967Z     when an error occurs during archiving
2024-03-02T16:42:03.1853930Z       does not archive the family or its children and adds error to the service
2024-03-02T16:42:03.1856355Z 
2024-03-02T16:42:03.1856622Z Exports::ExportPurchasesCSVService
2024-03-02T16:42:03.1857208Z   #generate_csv_data
2024-03-02T16:42:03.2957657Z     should match the expected content for the csv
2024-03-02T16:42:03.2958527Z 
2024-03-02T16:42:03.2958880Z DistributionMailer
2024-03-02T16:42:03.2959697Z   #reminder_email
2024-03-02T16:42:03.2960684Z     Text format
2024-03-02T16:42:03.3488783Z       renders the body with organization's email text
2024-03-02T16:42:03.3489830Z     with deliver_method: :pick_up
2024-03-02T16:42:03.3986116Z       renders the body with 'pick up' specified
2024-03-02T16:42:03.3986950Z     with deliver_method: :delivery
2024-03-02T16:42:03.4494362Z       renders the body with 'delivery' specified
2024-03-02T16:42:03.4495162Z     HTML format
2024-03-02T16:42:03.4969648Z       renders the body with organization's email text
2024-03-02T16:42:03.4970423Z   #partner_mailer
2024-03-02T16:42:03.5567089Z     renders the body with distributions text
2024-03-02T16:42:03.6083454Z     renders the body with organization's email text
2024-03-02T16:42:03.6084166Z     with distribution changes
2024-03-02T16:42:03.6627119Z       renders the body with changes that happened in the distribution
2024-03-02T16:42:03.6628346Z     with deliver_method: :pick_up
2024-03-02T16:42:03.7166660Z       renders the body with 'picked up' specified
2024-03-02T16:42:03.7167454Z       when parners profile pick_up_email is present
2024-03-02T16:42:03.7673989Z         sends email to the primary contact and partner`s pickup person
2024-03-02T16:42:03.7675056Z         when pickup person happens to be the same as the primary contact
2024-03-02T16:42:03.8191424Z           does not send email twice
2024-03-02T16:42:03.8192275Z     with deliver_method: :delivery
2024-03-02T16:42:03.8744200Z       renders the body with 'delivered' specified
2024-03-02T16:42:03.9247531Z       sends copy of email only to the partner
2024-03-02T16:42:03.9248703Z 
2024-03-02T16:42:03.9248896Z PartnerCreateService
2024-03-02T16:42:03.9249913Z   #call
2024-03-02T16:42:04.1054797Z     should return an instance of itself
2024-03-02T16:42:04.1055466Z     when the arguments are incorrect
2024-03-02T16:42:04.1056064Z       beacuse the partner_attrs are invalid
2024-03-02T16:42:04.2860404Z         should contain errors related to invalid partner attributes
2024-03-02T16:42:04.2860966Z     when the arguments are valid
2024-03-02T16:42:04.4662406Z       should create a new partner record with the organization provided
2024-03-02T16:42:04.6430829Z       should create the associated partner profile data
2024-03-02T16:42:04.6431633Z       but there was an unexpected issue with saving the
2024-03-02T16:42:04.6432225Z         Partner record
2024-03-02T16:42:04.8357195Z           should not create the partner record for the organization
2024-03-02T16:42:05.0223084Z           should not create the associated partner records
2024-03-02T16:42:05.0223972Z         Partners::Profile record
2024-03-02T16:42:05.2048200Z           should not create the associated partner records
2024-03-02T16:42:05.3845487Z           should not create the partner record for the organization
2024-03-02T16:42:05.3846805Z 
2024-03-02T16:42:05.3846977Z CalendarService
2024-03-02T16:42:05.7337589Z   #time_zones
2024-03-02T16:42:05.7338086Z   .calendar
2024-03-02T16:42:05.7988825Z     should print the calendar correctly
2024-03-02T16:42:05.7989382Z 
2024-03-02T16:42:05.7989531Z HistoricalTrendService
2024-03-02T16:42:05.7990600Z   #series
2024-03-02T16:42:06.0799918Z     returns an array of items with their monthly data
2024-03-02T16:42:06.0800552Z 
2024-03-02T16:42:06.0800746Z AllocateKitInventoryService
2024-03-02T16:42:06.0801952Z   #error
2024-03-02T16:42:06.0803240Z     when the Store location organization doesn't match
2024-03-02T16:42:06.3173278Z       returns error
2024-03-02T16:42:06.3174068Z   #allocate
2024-03-02T16:42:06.3174956Z     when more than one kit is requested
2024-03-02T16:42:06.3175918Z       but one of the items is out of stock
2024-03-02T16:42:06.5945706Z         returns error and does not change kit or item quantity
2024-03-02T16:42:06.5946341Z     when inventory items are available
2024-03-02T16:42:06.8652705Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-02T16:42:06.8653922Z       when there are more then one line items
2024-03-02T16:42:06.8654581Z         when same kit is allocated multiple times
2024-03-02T16:42:07.1825178Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-02T16:42:07.1826254Z         when there kit is allocated once
2024-03-02T16:42:07.4598874Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-02T16:42:07.4599808Z       When kit is allocated more then once
2024-03-02T16:42:07.7676337Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-02T16:42:07.7677146Z 
2024-03-02T16:42:07.7677329Z AccountRequestMailer
2024-03-02T16:42:07.7678342Z   #rejection
2024-03-02T16:42:07.7901409Z     should have the correct subject
2024-03-02T16:42:07.8025080Z     should include the rejection reason
2024-03-02T16:42:07.8138148Z     should be sent to the correct email address
2024-03-02T16:42:07.8139251Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:42:07.8184637Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:42:07.8186801Z   #approval_request
2024-03-02T16:42:07.8322509Z     should be sent to the info@humanessentials.app email address
2024-03-02T16:42:07.8453039Z     should include the admin link to create the new organization from the account request
2024-03-02T16:42:07.8573144Z     should have the correct subject
2024-03-02T16:42:07.8741761Z     should include the admin link to reject the organization
2024-03-02T16:42:07.9843948Z     should include details of the account request
2024-03-02T16:42:07.9844761Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:42:07.9934454Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:42:07.9939332Z   #confirmation
2024-03-02T16:42:08.0341493Z     should have the correct subject
2024-03-02T16:42:08.0600527Z     should be sent to the specified account_request email
2024-03-02T16:42:08.0914763Z     should be from no-reply@humanessentials.app
2024-03-02T16:42:08.0915693Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:42:08.1055255Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:42:08.1056171Z     HTML format
2024-03-02T16:42:08.1345185Z       should include the button to confirm the request
2024-03-02T16:42:08.1472446Z       should include the instruction video link
2024-03-02T16:42:08.1598508Z       should include the staging/demo account information
2024-03-02T16:42:08.1599244Z     Text format
2024-03-02T16:42:08.1721167Z       should include the button to confirm the request
2024-03-02T16:42:08.1839620Z       should include the instruction video link
2024-03-02T16:42:08.1959568Z       should include the staging/demo account information
2024-03-02T16:42:08.1960316Z 
2024-03-02T16:42:08.1960501Z ItemsInTotalQuery
2024-03-02T16:42:08.1961390Z   items_in_total_query
2024-03-02T16:42:08.4289479Z     does not count transfers going in the negative direction
2024-03-02T16:42:08.5969747Z     returns a sum total of all in-flows
2024-03-02T16:42:08.9647690Z     counts shared items together
2024-03-02T16:42:09.2374931Z     does not count donations, purchases, adjustments to other storage locations
2024-03-02T16:42:09.4579041Z     does not count negative adjustments towards in-flow
2024-03-02T16:42:09.4579741Z 
2024-03-02T16:42:09.4580010Z ItemCreateService
2024-03-02T16:42:09.4580753Z   #call
2024-03-02T16:42:09.4581693Z     when there are no issues
2024-03-02T16:42:09.6349314Z       should execute the expected methods
2024-03-02T16:42:09.8137607Z       should return an OpenStruct with success? set to true and the item
2024-03-02T16:42:09.8138418Z     when an issue occurs in transaction
2024-03-02T16:42:09.8139204Z       because a inventory item creation failed and raised an error
2024-03-02T16:42:09.9849297Z         should return a OpenStruct with the raised error
2024-03-02T16:42:09.9850090Z       because the item create raised an error
2024-03-02T16:42:10.1600870Z         should return a OpenStruct with the raised error
2024-03-02T16:42:10.1601921Z       because the organization_id does not match any Organization
2024-03-02T16:42:10.3338686Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-02T16:42:10.3339682Z 
2024-03-02T16:42:10.3339947Z DeadlineService
2024-03-02T16:42:10.3340933Z   #next_deadline
2024-03-02T16:42:10.3341766Z     from the organization
2024-03-02T16:42:10.3342740Z       when the deadline is before today
2024-03-02T16:42:10.3401078Z         returns a date in the next month
2024-03-02T16:42:10.3401543Z       when the deadline is after today
2024-03-02T16:42:10.3454312Z         returns a date within the current month
2024-03-02T16:42:10.3455129Z       when the deadline is today
2024-03-02T16:42:10.3516739Z         returns a date in the next month
2024-03-02T16:42:10.3517588Z     do from the partner group
2024-03-02T16:42:10.3518256Z       when the deadline is after today
2024-03-02T16:42:10.3582279Z         returns a date within the current month
2024-03-02T16:42:10.3583035Z       when the deadline is today
2024-03-02T16:42:10.3636411Z         returns a date in the next month
2024-03-02T16:42:10.3637091Z       when the deadline is before today
2024-03-02T16:42:10.3689857Z         returns a date in the next month
2024-03-02T16:42:10.3691457Z 
2024-03-02T16:42:10.3691714Z KitCreateService
2024-03-02T16:42:10.3692547Z   #call
2024-03-02T16:42:10.5651806Z     should return an the instance
2024-03-02T16:42:10.5652488Z     when the parameters provided are invalid
2024-03-02T16:42:10.5653287Z       because the organization_id does not match any Organization
2024-03-02T16:42:10.5707635Z         should have an error on organization_id saying it does not match any Organization
2024-03-02T16:42:10.5709072Z       because the kit_params is invalid for kit creation
2024-03-02T16:42:10.7516321Z         should have errors saying why the kit_params are invalid
2024-03-02T16:42:10.7517269Z     when the parameters are valid
2024-03-02T16:42:10.9537714Z       should create the new Item associated with the Kit
2024-03-02T16:42:11.1448980Z       should create a new Kit
2024-03-02T16:42:11.3426880Z       should create a new Item
2024-03-02T16:42:11.3427408Z       but an unexpected error gets raised
2024-03-02T16:42:11.5305507Z         should not create a Item
2024-03-02T16:42:11.7139033Z         should not create the Kit
2024-03-02T16:42:11.9072978Z         should have an error that includes the raised error
2024-03-02T16:42:11.9073805Z       but the ItemCreationService is unsuccesful
2024-03-02T16:42:12.0953133Z         should have an error that includes the error
2024-03-02T16:42:12.2930752Z         should not create a Item
2024-03-02T16:42:12.4874836Z         should not create the Kit
2024-03-02T16:42:12.4875838Z 
2024-03-02T16:42:12.4878146Z User
2024-03-02T16:42:12.4879174Z   #role_added
2024-03-02T16:42:12.5247820Z     renders the body correctly
2024-03-02T16:42:12.5248939Z   #send_reset_password_instructions
2024-03-02T16:42:12.5249667Z     user gets an email with instructions
2024-03-02T16:42:12.6124774Z       sends an email with instructions
2024-03-02T16:42:12.6127972Z 
2024-03-02T16:42:12.6128285Z Donation
2024-03-02T16:42:12.6129640Z   behaves like itemizable
2024-03-02T16:42:12.6130399Z     .to_a
2024-03-02T16:42:12.6131200Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:42:12.6467530Z         raises an error
2024-03-02T16:42:12.6468307Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:42:12.6789700Z         calls line_item_values
2024-03-02T16:42:12.6790379Z     .line_items
2024-03-02T16:42:12.6791546Z       quantities_by_name
2024-03-02T16:42:12.7128633Z         leaves out zero-quantitied items if requested
2024-03-02T16:42:12.7446073Z         returns a hash of items with id, name, and quantity
2024-03-02T16:42:12.7446555Z       sorted
2024-03-02T16:42:12.7911833Z         displays the items, sorted by name
2024-03-02T16:42:12.7912484Z       combine!
2024-03-02T16:42:12.8293739Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:42:12.8730288Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:42:12.8731266Z       total
2024-03-02T16:42:12.9053844Z         has an item total
2024-03-02T16:42:12.9054604Z   versioning
2024-03-02T16:42:12.9088942Z     is expected to be versioned
2024-03-02T16:42:12.9089399Z   Validations >
2024-03-02T16:42:12.9140033Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:42:12.9260504Z     requires a product drive participant if the source is 'Product Drive'
2024-03-02T16:42:12.9301510Z     requires an inventory (storage location)
2024-03-02T16:42:12.9410019Z     requires a donation_site if the source is 'Donation Site'
2024-03-02T16:42:12.9551291Z     is invalid when the line items are invalid
2024-03-02T16:42:12.9593759Z     must belong to an organization
2024-03-02T16:42:12.9707757Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-02T16:42:12.9834153Z     requires a source from the list of available sources
2024-03-02T16:42:12.9834902Z   Callbacks >
2024-03-02T16:42:12.9994671Z     automatically combines duplicate line_item records when they're created
2024-03-02T16:42:13.0127175Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:42:13.0128386Z   Scopes >
2024-03-02T16:42:13.0128855Z     by_source >
2024-03-02T16:42:13.0129394Z       when source is not a symbol
2024-03-02T16:42:13.0130146Z         when source comes from the SOURCES hash
2024-03-02T16:42:13.0312871Z           returns all donations with the provided source
2024-03-02T16:42:13.0313743Z         when source is invalid
2024-03-02T16:42:13.0493226Z           does not throw errors, returns no results
2024-03-02T16:42:13.0494071Z       when source is a symbol
2024-03-02T16:42:13.0494721Z         when source is invalid
2024-03-02T16:42:13.0675817Z           does not throw errors, returns no results
2024-03-02T16:42:13.0676663Z         when source is valid
2024-03-02T16:42:13.0854825Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-02T16:42:13.0855680Z     during >
2024-03-02T16:42:13.1043215Z       returns all donations created between two dates
2024-03-02T16:42:13.1043935Z   SOURCES
2024-03-02T16:42:13.1079005Z     the hash values are immutable
2024-03-02T16:42:13.1114230Z     the hash is immutable
2024-03-02T16:42:13.1151133Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-02T16:42:13.1152010Z   Associations >
2024-03-02T16:42:13.1152450Z     items >
2024-03-02T16:42:13.1307372Z       has_many
2024-03-02T16:42:13.1308101Z   Methods >
2024-03-02T16:42:13.1309079Z     remove
2024-03-02T16:42:13.2001077Z       fails gracefully if the item doesn't exist
2024-03-02T16:42:13.2615432Z       works with either an id or an object
2024-03-02T16:42:13.3274095Z       removes the item from the donation
2024-03-02T16:42:13.3274903Z     money_raised
2024-03-02T16:42:13.3945332Z       tracks the money raised in a donation
2024-03-02T16:42:13.3945984Z     source_view
2024-03-02T16:42:13.3946829Z       from a drive
2024-03-02T16:42:13.3947707Z         participant known
2024-03-02T16:42:13.3948726Z           no contact name
2024-03-02T16:42:13.4079223Z             returns drive display name
2024-03-02T16:42:13.4080104Z           contact name present
2024-03-02T16:42:13.4201127Z             returns participant display name
2024-03-02T16:42:13.4202063Z         unknown participant
2024-03-02T16:42:13.4302238Z           returns drive display name
2024-03-02T16:42:13.4303052Z       details
2024-03-02T16:42:13.4303836Z         misc
2024-03-02T16:42:13.4391111Z           returns a truncated comment
2024-03-02T16:42:13.4391743Z         product drive
2024-03-02T16:42:13.4494196Z           returns product_drive name
2024-03-02T16:42:13.4494812Z         donation site
2024-03-02T16:42:13.4652990Z           returns donation_site name
2024-03-02T16:42:13.4653633Z         manufacturer
2024-03-02T16:42:13.4758184Z           returns manufacturer name
2024-03-02T16:42:13.4758792Z       not from a drive
2024-03-02T16:42:13.4863034Z         returns source
2024-03-02T16:42:13.4864015Z 
2024-03-02T16:42:13.4864844Z Reports::PeriodSupplyReportService
2024-03-02T16:42:13.4865443Z   #report
2024-03-02T16:42:13.6663684Z     should report zero values
2024-03-02T16:42:13.6664124Z     with values
2024-03-02T16:42:14.2794949Z       should report normal values
2024-03-02T16:42:14.2795613Z 
2024-03-02T16:42:14.2796074Z Reports::AdultIncontinenceReportService
2024-03-02T16:42:14.2796951Z   #report
2024-03-02T16:42:14.4694739Z     should report zero values
2024-03-02T16:42:14.4695348Z     with values
2024-03-02T16:42:15.0784751Z       should handle null distribution quantity
2024-03-02T16:42:15.7071186Z       should report normal values
2024-03-02T16:42:15.7071808Z 
2024-03-02T16:42:15.7072122Z EventDiffer
2024-03-02T16:42:15.9061821Z   should return a full diff
2024-03-02T16:42:16.2122440Z 
2024-03-02T16:42:16.2123086Z Finished in 47.59 seconds (files took 8.31 seconds to load)
2024-03-02T16:42:16.2123741Z 543 examples, 0 failures
2024-03-02T16:42:16.2124006Z 
2024-03-02T16:42:16.2124150Z Randomized with seed 38886
2024-03-02T16:42:16.2124444Z 
2024-03-02T16:42:16.7169722Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3893 / 6427 LOC (60.57%) covered.
2024-03-02T16:42:17.1495110Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10679 LOC (0.36%) covered.
