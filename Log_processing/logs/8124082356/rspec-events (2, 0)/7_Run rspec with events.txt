2024-03-02T16:41:57.7042097Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-02T16:41:57.7043095Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-02T16:41:57.7071544Z shell: /usr/bin/bash -e {0}
2024-03-02T16:41:57.7071937Z env:
2024-03-02T16:41:57.7072344Z   POSTGRES_HOST: localhost
2024-03-02T16:41:57.7072697Z   DATABASE_HOST: localhost
2024-03-02T16:41:57.7073094Z   PG_USERNAME: postgres
2024-03-02T16:41:57.7073531Z   PG_PASSWORD: password
2024-03-02T16:41:57.7073906Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-02T16:41:57.7074341Z   POSTGRES_PORT: 5432
2024-03-02T16:41:57.7074750Z   PGHOST: localhost
2024-03-02T16:41:57.7075107Z   PGUSER: postgres
2024-03-02T16:41:57.7075407Z   RAILS_ENV: test
2024-03-02T16:41:57.7076054Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-02T16:41:57.7076525Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-02T16:41:57.7076924Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-02T16:41:57.7077425Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-02T16:41:57.7077998Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-02T16:41:57.7078957Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-02T16:41:57.7079613Z   EVENTS_READ: true
2024-03-02T16:41:57.7079951Z ##[endgroup]
2024-03-02T16:42:06.9852739Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/services/text_interpolator_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/models/base_item_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/models/request_item_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/transfer_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/models/item_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/models/question_spec.rb" "spec/models/line_item_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/organization_spec.rb" "spec/models/user_spec.rb" "spec/models/audit_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/account_request_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/donation_sites_controller_spec.rb"
2024-03-02T16:42:15.7657081Z 
2024-03-02T16:42:15.7658028Z Randomized with seed 46458
2024-03-02T16:42:16.7783560Z 
2024-03-02T16:42:16.7784310Z Reports::SummaryReportService
2024-03-02T16:42:16.7785219Z   #report
2024-03-02T16:42:16.9816620Z     should report zero values
2024-03-02T16:42:17.4659305Z     should report negative values
2024-03-02T16:42:17.9189502Z     should report positive values
2024-03-02T16:42:17.9190141Z 
2024-03-02T16:42:17.9190944Z InventoryItem
2024-03-02T16:42:17.9272599Z   initializes the quantity to 0 if it was not specified
2024-03-02T16:42:17.9273352Z   Filtering >
2024-03-02T16:42:17.9273958Z     ->by_partner_key
2024-03-02T16:42:17.9426804Z       shows the Base Items by partner_key
2024-03-02T16:42:17.9427377Z   versioning
2024-03-02T16:42:17.9465820Z     is expected to be versioned
2024-03-02T16:42:17.9466508Z   Validations >
2024-03-02T16:42:17.9528069Z     requires an inventory association
2024-03-02T16:42:17.9576156Z     requires an item
2024-03-02T16:42:17.9576809Z     quantity >
2024-03-02T16:42:17.9638561Z       is numerical
2024-03-02T16:42:17.9697219Z       is less than the max integer
2024-03-02T16:42:17.9841317Z       is gte 0
2024-03-02T16:42:17.9899178Z       is required
2024-03-02T16:42:17.9900254Z 
2024-03-02T16:42:17.9900543Z RemoveRoleService
2024-03-02T16:42:17.9901626Z   #call
2024-03-02T16:42:17.9902950Z     when not enough information provided
2024-03-02T16:42:18.1957394Z       should raise an error
2024-03-02T16:42:18.1957972Z     when the role exists
2024-03-02T16:42:18.3924563Z       should remove the role
2024-03-02T16:42:18.5948336Z       should remove the admin role when removing user role
2024-03-02T16:42:18.7950244Z       should work with a type and ID instead of role ID
2024-03-02T16:42:18.7951589Z     when the role does not exist
2024-03-02T16:42:18.9832070Z       should raise an error
2024-03-02T16:42:18.9832651Z 
2024-03-02T16:42:18.9833001Z Partners::ChildItemRequest
2024-03-02T16:42:18.9834425Z   #ordered_item_diaperid
2024-03-02T16:42:18.9965148Z     should return the item_id on the item_request
2024-03-02T16:42:18.9965953Z   versioning
2024-03-02T16:42:19.0004018Z     is expected to be versioned
2024-03-02T16:42:19.0004741Z   associations
2024-03-02T16:42:19.0060864Z     is expected to belong to item_request required: true
2024-03-02T16:42:19.0102027Z     is expected to belong to child required: true
2024-03-02T16:42:19.0142852Z     is expected to belong to authorized_family_member optional: true
2024-03-02T16:42:19.0144050Z   #quantity
2024-03-02T16:42:19.0185938Z     should return the quantity divided by the number of children
2024-03-02T16:42:19.0186716Z 
2024-03-02T16:42:19.0187099Z PartnerInviteService
2024-03-02T16:42:19.0557733Z   should update the status of the partner to invited
2024-03-02T16:42:19.0893985Z   should create invite
2024-03-02T16:42:19.0894920Z   with force: true
2024-03-02T16:42:19.1231526Z     should send the force setting forward
2024-03-02T16:42:19.1232119Z 
2024-03-02T16:42:19.1232456Z Partners::RequestCreateService
2024-03-02T16:42:19.1233326Z   #call
2024-03-02T16:42:19.1234112Z     when the arguments are incorrect
2024-03-02T16:42:19.1235044Z       because no item_requests_attributes and comments were defined
2024-03-02T16:42:19.1619289Z         should return the Request object with an error
2024-03-02T16:42:19.1620550Z       because a unrecogonized item_id was provided
2024-03-02T16:42:19.1996540Z         should return the Request object with an error
2024-03-02T16:42:19.1997532Z     when the arguments are correct
2024-03-02T16:42:19.2425267Z       should create a Request record
2024-03-02T16:42:19.2843100Z       should notify the Partner via email
2024-03-02T16:42:19.3243383Z       should have no errors
2024-03-02T16:42:19.3244485Z       but a unexpected error occured during the save
2024-03-02T16:42:19.3245612Z         for the Request record
2024-03-02T16:42:19.3620173Z           should NOT notify the Partner via email
2024-03-02T16:42:19.3989140Z           should NOT create a Request record
2024-03-02T16:42:19.4349888Z           should have an error with the raised error
2024-03-02T16:42:19.4351451Z 
2024-03-02T16:42:19.4351872Z ItemsController
2024-03-02T16:42:19.4352922Z   While signed in
2024-03-02T16:42:19.4354768Z     POST #create
2024-03-02T16:42:19.4355458Z       with valid params
2024-03-02T16:42:19.4707146Z         should redirect to the item page
2024-03-02T16:42:19.4904863Z         should accept params with dollar signs, periods, and commas
2024-03-02T16:42:19.5101346Z         should create an item
2024-03-02T16:42:19.5102033Z       with invalid params
2024-03-02T16:42:19.5274758Z         should show an error
2024-03-02T16:42:19.5275561Z     GET #new
2024-03-02T16:42:19.5392772Z       returns http success
2024-03-02T16:42:19.5393634Z     Looking at a different organization
2024-03-02T16:42:19.7175944Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:42:19.7176942Z     GET #index
2024-03-02T16:42:19.7515833Z       returns http success
2024-03-02T16:42:19.7516687Z     PATCH #restore
2024-03-02T16:42:19.7517589Z       with another organizations item
2024-03-02T16:42:19.9410020Z         does nothing
2024-03-02T16:42:19.9410852Z       with a soft-deleted item
2024-03-02T16:42:19.9640878Z         re-activates the item
2024-03-02T16:42:19.9641519Z       with an active item
2024-03-02T16:42:19.9860870Z         does nothing
2024-03-02T16:42:19.9861754Z     GET #show
2024-03-02T16:42:20.0064317Z       returns http success
2024-03-02T16:42:20.0065307Z     GET #edit
2024-03-02T16:42:20.0237396Z       returns http success
2024-03-02T16:42:20.0238252Z     PUT #update
2024-03-02T16:42:20.0239212Z       visible
2024-03-02T16:42:20.0460988Z         should update visible_to_partners to true
2024-03-02T16:42:20.0462072Z       invisible
2024-03-02T16:42:20.0674320Z         should update visible_to_partners to false
2024-03-02T16:42:20.0675286Z     PATCH #remove_category
2024-03-02T16:42:20.2737930Z       should redirect to the previous category page
2024-03-02T16:42:20.4716251Z       should remove an item's category
2024-03-02T16:42:20.4717138Z     DELETE #destroy
2024-03-02T16:42:20.5000349Z       redirects to #index
2024-03-02T16:42:20.5001095Z   While not signed in
2024-03-02T16:42:20.5098710Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:42:20.5099387Z 
2024-03-02T16:42:20.5099682Z ItemizableUpdateService
2024-03-02T16:42:20.5100596Z   decreases
2024-03-02T16:42:20.6768369Z     should update quantity in same storage location
2024-03-02T16:42:20.8356668Z     should update quantity in different locations
2024-03-02T16:42:20.8357877Z   increases
2024-03-02T16:42:21.0145256Z     should update quantity in different locations
2024-03-02T16:42:21.1729496Z     should update quantity in same storage location
2024-03-02T16:42:21.1730342Z 
2024-03-02T16:42:21.1730578Z OrganizationMailer
2024-03-02T16:42:21.1731229Z   #partner_approval_request
2024-03-02T16:42:21.2067062Z     renders the body with correct text with partner information
2024-03-02T16:42:21.2365116Z     includes a link to the relevant partner
2024-03-02T16:42:21.2656348Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:42:21.2657360Z 
2024-03-02T16:42:21.2657611Z DonationSitesController
2024-03-02T16:42:21.2658789Z   While signed in
2024-03-02T16:42:21.2660749Z     GET #index
2024-03-02T16:42:21.2850231Z       returns http success
2024-03-02T16:42:21.2851407Z     Looking at a different organization
2024-03-02T16:42:21.4708728Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:42:21.4709720Z     POST #import_csv
2024-03-02T16:42:21.4710316Z       behaves like csv import
2024-03-02T16:42:21.4711329Z         without a csv file
2024-03-02T16:42:21.4831448Z           presents a flash error message
2024-03-02T16:42:21.4943631Z           redirects to :index
2024-03-02T16:42:21.4944351Z         with a csv file
2024-03-02T16:42:21.5113457Z           presents a flash notice message
2024-03-02T16:42:21.5254419Z           redirects to :index
2024-03-02T16:42:21.5308428Z           invokes .import_csv
2024-03-02T16:42:21.5309762Z         csv file with wrong headers
2024-03-02T16:42:21.5421781Z           redirects to :index
2024-03-02T16:42:21.5528319Z           presents a flash error message
2024-03-02T16:42:21.5529343Z     DELETE #destroy
2024-03-02T16:42:21.5682422Z       returns http success
2024-03-02T16:42:21.5683086Z     GET #edit
2024-03-02T16:42:21.5812244Z       returns http success
2024-03-02T16:42:21.5812949Z     GET #new
2024-03-02T16:42:21.5919311Z       returns http success
2024-03-02T16:42:21.5920030Z     GET #show
2024-03-02T16:42:21.6046508Z       returns http success
2024-03-02T16:42:21.6047442Z   While not signed in
2024-03-02T16:42:21.6105607Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:42:21.6106369Z 
2024-03-02T16:42:21.6106944Z Reports::ChildrenServedReportService
2024-03-02T16:42:21.6107660Z   #report
2024-03-02T16:42:22.1447125Z     should report normal values
2024-03-02T16:42:22.6567833Z     should work with no distribution_quantity
2024-03-02T16:42:22.8355881Z     should report zero values
2024-03-02T16:42:22.8356803Z 
2024-03-02T16:42:22.8357021Z UserInviteService
2024-03-02T16:42:22.8357742Z   with existing user
2024-03-02T16:42:22.8454186Z     should raise an error when reinviting an existing user with the same role
2024-03-02T16:42:23.0370821Z     should add roles to existing user
2024-03-02T16:42:23.0371768Z     with force: true
2024-03-02T16:42:23.1369447Z       should reinvite the user
2024-03-02T16:42:23.1370269Z   with a new user
2024-03-02T16:42:23.3379364Z     should create the user with roles
2024-03-02T16:42:23.3379989Z 
2024-03-02T16:42:23.3380220Z Question
2024-03-02T16:42:23.3383222Z   punctuate
2024-03-02T16:42:23.3526555Z     should punctuate each string in a given array
2024-03-02T16:42:23.3527404Z   versioning
2024-03-02T16:42:23.3566096Z     is expected to be versioned
2024-03-02T16:42:23.3567033Z   remove_redundant_error
2024-03-02T16:42:23.3607709Z     should return an array with only one error message related to the checkboxes.
2024-03-02T16:42:23.3608994Z   scope for_banks
2024-03-02T16:42:23.3898724Z     should filter out questions that aren't meant for banks
2024-03-02T16:42:23.3899692Z   scope for_partners
2024-03-02T16:42:23.4134681Z     should filter out questions that aren't meant for partners
2024-03-02T16:42:23.4135662Z   validations
2024-03-02T16:42:23.4229621Z     question for_banks and for_partners attributes can't both be false
2024-03-02T16:42:23.4289508Z     is expected to validate that :answer cannot be empty/falsy
2024-03-02T16:42:23.4348223Z     is expected to validate that :title cannot be empty/falsy
2024-03-02T16:42:23.4348943Z 
2024-03-02T16:42:23.4349222Z Partners::Child
2024-03-02T16:42:23.4350630Z   versioning
2024-03-02T16:42:23.4468334Z     is expected to be versioned
2024-03-02T16:42:23.4469257Z   #display_name
2024-03-02T16:42:23.4937799Z     should return a child's first and last name
2024-03-02T16:42:23.4938657Z   associations
2024-03-02T16:42:23.4984814Z     is expected to belong to family required: true
2024-03-02T16:42:23.5023327Z     is expected to have many child_item_requests dependent => destroy
2024-03-02T16:42:23.5024159Z 
2024-03-02T16:42:23.5024434Z View::Inventory
2024-03-02T16:42:23.5026685Z   #total_value_in_dollars
2024-03-02T16:42:23.6033223Z     should return total value across the given location
2024-03-02T16:42:23.6034215Z   .items_for_location
2024-03-02T16:42:23.6938871Z     should return the right values
2024-03-02T16:42:23.6939723Z     with include_omitted_items
2024-03-02T16:42:23.7843080Z       should add items not in the storage location
2024-03-02T16:42:23.7843859Z   .total_inventory
2024-03-02T16:42:23.8758594Z     should return the total quantity
2024-03-02T16:42:23.8759322Z   #quantity_for
2024-03-02T16:42:23.8759889Z     with storage location but no item id
2024-03-02T16:42:23.9648559Z       should return all items at that location
2024-03-02T16:42:23.9649261Z     with item id
2024-03-02T16:42:23.9649841Z       with storage location
2024-03-02T16:42:24.0560189Z         should return the quantity at that location
2024-03-02T16:42:24.0560926Z       with no storage location
2024-03-02T16:42:24.1463398Z         should return quantities across all storage locations
2024-03-02T16:42:24.1464474Z   #storage_locations_for_item
2024-03-02T16:42:24.2382722Z     should return all relevant IDs
2024-03-02T16:42:24.2383644Z   #storage_location_name
2024-03-02T16:42:24.3286527Z     should return the right name
2024-03-02T16:42:24.3287637Z   #items_for_location
2024-03-02T16:42:24.4172560Z     should return the right values
2024-03-02T16:42:24.4173437Z     with include_omitted_items
2024-03-02T16:42:24.5114938Z       should add items not in the storage location
2024-03-02T16:42:24.5115787Z   #all_items
2024-03-02T16:42:24.6058339Z     should return all items across storage locations
2024-03-02T16:42:24.6059073Z 
2024-03-02T16:42:24.6059316Z DonationsController
2024-03-02T16:42:24.6060645Z   While signed in as an organization admin >
2024-03-02T16:42:24.6061653Z     DELETE #destroy
2024-03-02T16:42:24.6437972Z       redirects to the index
2024-03-02T16:42:24.6439015Z   calculating total money raised for all donations
2024-03-02T16:42:24.6587264Z     correctly calculates the total
2024-03-02T16:42:24.6631414Z     returns zero for an empty array of donations
2024-03-02T16:42:24.6632529Z   While signed in as a normal user >
2024-03-02T16:42:24.6633766Z     DELETE #destroy
2024-03-02T16:42:24.6810868Z       redirects to the dashboard path
2024-03-02T16:42:24.6811840Z     GET #index
2024-03-02T16:42:24.7014839Z       returns http success
2024-03-02T16:42:24.7015587Z     GET #edit
2024-03-02T16:42:24.7251785Z       returns http success
2024-03-02T16:42:24.7252545Z     PUT#update
2024-03-02T16:42:24.7607543Z       redirects to index after update
2024-03-02T16:42:24.8804783Z       updates storage quantity correctly
2024-03-02T16:42:24.8805667Z       when changing storage location
2024-03-02T16:42:25.0024356Z         updates storage quantity correctly
2024-03-02T16:42:25.0067144Z         rolls back updates if quantity would go below 0
2024-03-02T16:42:25.0069143Z       when removing a line item
2024-03-02T16:42:25.1185293Z         updates storage invetory item quantity correctly
2024-03-02T16:42:25.1186288Z     GET #show
2024-03-02T16:42:25.1382457Z       returns http success
2024-03-02T16:42:25.1383130Z     GET #new
2024-03-02T16:42:25.1519038Z       returns http success
2024-03-02T16:42:25.1520044Z     POST#create
2024-03-02T16:42:25.1929488Z       redirects to GET#edit on success
2024-03-02T16:42:25.2115782Z       renders GET#new with error on failure
2024-03-02T16:42:25.2116935Z   calculating total value of multiple donations
2024-03-02T16:42:25.3585271Z     works correctly for multiple line items per donation
2024-03-02T16:42:25.3630834Z     returns zero for an empty array of donations
2024-03-02T16:42:25.3631751Z 
2024-03-02T16:42:25.3631968Z LineItem
2024-03-02T16:42:25.3633671Z   Scopes >
2024-03-02T16:42:25.3634740Z     ->active
2024-03-02T16:42:25.4184806Z       retrieves only those with active status
2024-03-02T16:42:25.4185624Z   Methods >
2024-03-02T16:42:25.4186436Z     #value_per_line_item
2024-03-02T16:42:25.4187057Z       item has no value
2024-03-02T16:42:25.4329969Z         is expected to eq 0
2024-03-02T16:42:25.4330686Z       item has value and quantity
2024-03-02T16:42:25.4518316Z         is expected to eq 25
2024-03-02T16:42:25.4519480Z     item packages
2024-03-02T16:42:25.4520016Z       #package_count
2024-03-02T16:42:25.4520722Z         does not have packages
2024-03-02T16:42:25.4661923Z           is expected to be falsy
2024-03-02T16:42:25.4662679Z         has packages
2024-03-02T16:42:25.4845392Z           is expected to eq "1"
2024-03-02T16:42:25.4846129Z       #has_packages
2024-03-02T16:42:25.4846768Z         item has no package size
2024-03-02T16:42:25.4977390Z           is expected to be falsy
2024-03-02T16:42:25.4978191Z         item has package size
2024-03-02T16:42:25.5169265Z           is expected to be truthy
2024-03-02T16:42:25.5170099Z   package_count
2024-03-02T16:42:25.5373472Z     is nil if there is no package_size
2024-03-02T16:42:25.5571380Z     is equal to the quanity divided by the package_size
2024-03-02T16:42:25.5572215Z   Validations >
2024-03-02T16:42:25.6474970Z     the quantity must be a valid integer and cannot be 0
2024-03-02T16:42:25.6621675Z     requires a quantity
2024-03-02T16:42:25.6716871Z     requires an item
2024-03-02T16:42:25.6717831Z   versioning
2024-03-02T16:42:25.6757738Z     is expected to be versioned
2024-03-02T16:42:25.6758720Z 
2024-03-02T16:42:25.6759378Z DistributionCreateService
2024-03-02T16:42:25.6760065Z   call
2024-03-02T16:42:25.7578932Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T16:42:25.8321955Z     returns a successful object with Scheduled distribution
2024-03-02T16:42:25.8323058Z     when the line item quantity is not positive
2024-03-02T16:42:25.8827547Z       preserves the RecordInvalid error and is unsuccessful
2024-03-02T16:42:25.8828971Z     when there's not sufficient inventory
2024-03-02T16:42:25.9424325Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T16:42:25.9424933Z     when provided with a request ID
2024-03-02T16:42:26.0233849Z       changes the status of the request
2024-03-02T16:42:26.0234860Z       and the request already has a distribution associated with it
2024-03-02T16:42:26.0992974Z         should not be successful
2024-03-02T16:42:26.0993809Z     partner is deactivated
2024-03-02T16:42:26.1787713Z       does not send an email
2024-03-02T16:42:26.1788773Z     when there's multiple line items and one has insufficient inventory
2024-03-02T16:42:26.2562478Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T16:42:26.2563811Z     when it fails to save
2024-03-02T16:42:26.3110040Z       preserves the error and is unsuccessful
2024-03-02T16:42:26.3111653Z     partner has send reminders setting set to false
2024-03-02T16:42:26.3887418Z       does not send a PartnerMailer
2024-03-02T16:42:26.3888374Z     partner has send reminders setting set to true
2024-03-02T16:42:26.5769578Z       Sends a PartnerMailer
2024-03-02T16:42:26.5770116Z 
2024-03-02T16:42:26.5770755Z Exports::ExportReportCSVService
2024-03-02T16:42:26.5771583Z   .generate_csv_data
2024-03-02T16:42:26.5810385Z     creates a CSV string
2024-03-02T16:42:26.5842539Z     creates CSV data including headers
2024-03-02T16:42:26.5843265Z 
2024-03-02T16:42:26.5843465Z KitAllocation
2024-03-02T16:42:26.5846856Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-02T16:42:26.5847913Z   versioning
2024-03-02T16:42:26.5929050Z     is expected to be versioned
2024-03-02T16:42:26.5929590Z 
2024-03-02T16:42:26.5930060Z DistributionContentChangeService
2024-03-02T16:42:26.5931288Z   #changes
2024-03-02T16:42:26.5932147Z     when there are line items removed and updated
2024-03-02T16:42:26.5966549Z       returns true
2024-03-02T16:42:26.5967300Z   #any_change?
2024-03-02T16:42:26.5968380Z     when there are no changes in the line items
2024-03-02T16:42:26.6002109Z       returns true
2024-03-02T16:42:26.6002939Z     when there are line items removed and updated
2024-03-02T16:42:26.6036252Z       returns true
2024-03-02T16:42:26.6036870Z     when there are line items removed
2024-03-02T16:42:26.6069546Z       returns true
2024-03-02T16:42:26.6070705Z     when there are line items updated
2024-03-02T16:42:26.6103717Z       returns true
2024-03-02T16:42:26.6105006Z 
2024-03-02T16:42:26.6105282Z BarcodeItem
2024-03-02T16:42:26.6106732Z   Barcodes of BaseItems ('Global')
2024-03-02T16:42:26.6169836Z     updates a counter in BaseItem whenever it tracks a new barcode (FAILED - 1)
2024-03-02T16:42:26.6170957Z     scopes >
2024-03-02T16:42:26.6171808Z       global
2024-03-02T16:42:26.6288418Z         includes all barcodes, for both base items and regular items (FAILED - 2)
2024-03-02T16:42:26.6289499Z     validations >
2024-03-02T16:42:26.6368314Z       is valid with or without an organization
2024-03-02T16:42:26.6437014Z       enforces uniqueness in the global scope (FAILED - 3)
2024-03-02T16:42:26.6504852Z       allows multiple barcodes to point at the same base item (FAILED - 4)
2024-03-02T16:42:26.6506085Z       item >
2024-03-02T16:42:26.6560293Z         is invalid without an item associated with it
2024-03-02T16:42:26.6561122Z       value >
2024-03-02T16:42:26.6718178Z         requires a value
2024-03-02T16:42:26.6719304Z       quantity >
2024-03-02T16:42:26.6782135Z         is not nil
2024-03-02T16:42:26.6839251Z         is not a negative number
2024-03-02T16:42:26.6893471Z         is an integer
2024-03-02T16:42:26.6894130Z     filters >
2024-03-02T16:42:26.6987362Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id (FAILED - 5)
2024-03-02T16:42:26.7103599Z       #by_base_item_partner_key returns barcodes that match the partner key (FAILED - 6)
2024-03-02T16:42:26.7174491Z       ->by_value returns the barcode with that value (FAILED - 7)
2024-03-02T16:42:26.7176225Z   Organization barcodes
2024-03-02T16:42:26.7314307Z     updates a counter in Item whenever it tracks a new barcode
2024-03-02T16:42:26.7315470Z     to_h >
2024-03-02T16:42:26.7443433Z       emits a hash for a line_item
2024-03-02T16:42:26.7444149Z     filters >
2024-03-02T16:42:26.7653526Z       ->item_id shows only barcodes for a specific item_id
2024-03-02T16:42:26.7654266Z     validations >
2024-03-02T16:42:26.7810149Z       is valid only with an organization
2024-03-02T16:42:26.7937671Z       allows multiple barcodes to point at the same item
2024-03-02T16:42:26.8197765Z       does not enforces value uniqueness across organizations
2024-03-02T16:42:26.8268719Z       does not enforce value uniqueness compared with the global scope (FAILED - 8)
2024-03-02T16:42:26.8432613Z       enforces value uniqueness within the organization
2024-03-02T16:42:26.8433452Z       quantity >
2024-03-02T16:42:26.8526948Z         is not a negative number
2024-03-02T16:42:26.8620570Z         is not nil
2024-03-02T16:42:26.8712332Z         is an integer
2024-03-02T16:42:26.8713157Z       value >
2024-03-02T16:42:26.8807610Z         requires a value
2024-03-02T16:42:26.8808415Z       item >
2024-03-02T16:42:26.8901416Z         is invalid without an item associated with it
2024-03-02T16:42:26.8902311Z     scopes >
2024-03-02T16:42:26.9117968Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-02T16:42:26.9187295Z       ->by_value returns the barcode with that value (FAILED - 9)
2024-03-02T16:42:27.1219813Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-02T16:42:27.1220989Z     when searching for a barcode where there is a global and local with the same value
2024-03-02T16:42:27.1478715Z       favors the local barcode (FAILED - 10)
2024-03-02T16:42:27.1479576Z   versioning
2024-03-02T16:42:27.1523601Z     is expected to be versioned
2024-03-02T16:42:27.1524171Z 
2024-03-02T16:42:27.1524408Z ReminderDeadlineMailer
2024-03-02T16:42:27.1525392Z   notify deadline
2024-03-02T16:42:27.1844156Z     renders the receiver email
2024-03-02T16:42:27.2153405Z     renders the subject
2024-03-02T16:42:27.2465922Z     renders the body
2024-03-02T16:42:27.2777678Z     renders the sender email
2024-03-02T16:42:27.2778254Z 
2024-03-02T16:42:27.2778584Z DistributionDestroyService
2024-03-02T16:42:27.2779399Z   #call
2024-03-02T16:42:27.2780621Z     when the distribution_id does match a Distribution
2024-03-02T16:42:27.2781521Z       and the increase inventory operations fails
2024-03-02T16:42:27.4923588Z         should not be successful and have the error message
2024-03-02T16:42:27.7006734Z         should not delete the Distribution
2024-03-02T16:42:27.7007961Z       and the destroy! operation fails
2024-03-02T16:42:27.9037110Z         should not be successful and have the error message
2024-03-02T16:42:28.2357032Z         should not delete the Distribution
2024-03-02T16:42:28.2357897Z       and the operations succeed
2024-03-02T16:42:28.4976379Z         should be successful
2024-03-02T16:42:28.7102705Z         should increase the inventory of the storage location
2024-03-02T16:42:28.9239272Z         should destroy the Distribution
2024-03-02T16:42:28.9240435Z     when the distribution_id matches no Distribution
2024-03-02T16:42:28.9283112Z       to not be a success
2024-03-02T16:42:28.9283964Z 
2024-03-02T16:42:28.9284267Z PartnerApprovalService
2024-03-02T16:42:28.9285246Z   #call
2024-03-02T16:42:28.9286061Z     when the arguments are correct
2024-03-02T16:42:28.9592411Z       should have no errors
2024-03-02T16:42:28.9906667Z       should change the partner status to approved
2024-03-02T16:42:29.0206615Z       should send an email notification to the partner
2024-03-02T16:42:29.0207816Z       but a unexpected error occured during the save
2024-03-02T16:42:29.0208551Z         for partner approval
2024-03-02T16:42:29.0481303Z           should not send an email notification to the partner
2024-03-02T16:42:29.0772824Z           should not change the partner status to approved
2024-03-02T16:42:29.1042086Z           should have an error with the raised error
2024-03-02T16:42:29.1043249Z     when the arguments are incorrect
2024-03-02T16:42:29.1044114Z       because the partner is not approvable
2024-03-02T16:42:29.1367806Z         should return the PartnerApprovalService object with an error
2024-03-02T16:42:29.1368552Z 
2024-03-02T16:42:29.1368884Z Partners::ItemRequest
2024-03-02T16:42:29.1369535Z   associations
2024-03-02T16:42:29.1422553Z     is expected to belong to request class_name => ::Request required: true
2024-03-02T16:42:29.1461130Z     is expected to have many child_item_requests dependent => destroy
2024-03-02T16:42:29.1498827Z     is expected to have many children through child_item_requests
2024-03-02T16:42:29.1499965Z   validations
2024-03-02T16:42:29.1569147Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-02T16:42:29.1636679Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-02T16:42:29.1699159Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-02T16:42:29.1760632Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:42:29.1761737Z   versioning
2024-03-02T16:42:29.1799571Z     is expected to be versioned
2024-03-02T16:42:29.1800122Z 
2024-03-02T16:42:29.1800450Z RequestItem
2024-03-02T16:42:29.1801479Z   Methods >
2024-03-02T16:42:29.1802258Z     #from_json
2024-03-02T16:42:29.4406459Z       has the correct quantity
2024-03-02T16:42:29.7002933Z       has the correct amount on hand
2024-03-02T16:42:29.9584719Z       has the correct name
2024-03-02T16:42:30.2130091Z       has the correct amount on hand for location
2024-03-02T16:42:30.2130845Z 
2024-03-02T16:42:30.2131149Z PartnerRequestRecertificationService
2024-03-02T16:42:30.2132334Z   #call
2024-03-02T16:42:30.2133806Z     when the arguments are correct
2024-03-02T16:42:30.2465824Z       should change the partner status to approved
2024-03-02T16:42:30.2764285Z       should have no errors
2024-03-02T16:42:30.3071014Z       should queue sending the notice to the partner
2024-03-02T16:42:30.3072215Z       but a unexpected error occurred during the save
2024-03-02T16:42:30.3072937Z         for partner approval
2024-03-02T16:42:30.3339054Z           should NOT queue sending the notice to the partner
2024-03-02T16:42:30.3613823Z           should have an error with the raised error
2024-03-02T16:42:30.3901476Z           should not change the partner status to recertification_required
2024-03-02T16:42:30.3902888Z     when the arguments are incorrect
2024-03-02T16:42:30.3903823Z       because the partner has already been requested to recertify
2024-03-02T16:42:30.4213543Z         should return the PartnerRequestRecertificationService object with an error
2024-03-02T16:42:30.4214864Z     when the partner is deactivated
2024-03-02T16:42:30.4520270Z       does not send an email
2024-03-02T16:42:30.4520928Z 
2024-03-02T16:42:30.4521281Z HistoricalTrendsHelper
2024-03-02T16:42:30.4522572Z   #last_12_months
2024-03-02T16:42:30.4576689Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-02T16:42:30.4623894Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-02T16:42:30.4670138Z     returns the last 12 months starting from July when the current month is June
2024-03-02T16:42:30.4671308Z 
2024-03-02T16:42:30.4671872Z AccountRequest
2024-03-02T16:42:30.4905222Z   #reject!
2024-03-02T16:42:30.5035214Z   #confirm!
2024-03-02T16:42:30.5036001Z   #identity_token
2024-03-02T16:42:30.5125178Z     should return a JWT token that contains the id of the account_request_id
2024-03-02T16:42:30.5126371Z     when the account_request is not persisted
2024-03-02T16:42:30.5210399Z       should raise an error
2024-03-02T16:42:30.5211040Z   #processed?
2024-03-02T16:42:30.5212053Z     when the account request has a associated organization
2024-03-02T16:42:30.7158226Z       should return true
2024-03-02T16:42:30.7158908Z     when the account request has no associated organization
2024-03-02T16:42:30.7260003Z       should return false
2024-03-02T16:42:30.7260719Z   versioning
2024-03-02T16:42:30.7298333Z     is expected to be versioned
2024-03-02T16:42:30.7299193Z   .get_by_identity_token
2024-03-02T16:42:30.7300087Z     when the identity_token corresponds to an existing AccountRequest
2024-03-02T16:42:30.7399085Z       should return the corresponding AccountRequest
2024-03-02T16:42:30.7400445Z     when the identity_token provided does not match any AccountRequest
2024-03-02T16:42:30.7436448Z       should return nil
2024-03-02T16:42:30.7437072Z   associations
2024-03-02T16:42:30.7498875Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-02T16:42:30.7534333Z     is expected to have one organization class_name => Organization
2024-03-02T16:42:30.7535349Z   validations
2024-03-02T16:42:30.7671817Z     is expected to validate that :email is case-sensitively unique
2024-03-02T16:42:30.7800231Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-02T16:42:30.7911786Z     is expected not to allow :email to be ‹"not_email"›
2024-03-02T16:42:30.8053170Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:42:30.8162590Z     is expected to allow :email to be ‹"melonie@hoeger-oreilly.example"›
2024-03-02T16:42:30.8291170Z     is expected to validate that the length of :request_details is at least 50
2024-03-02T16:42:30.8443113Z     is expected to validate that :email cannot be empty/falsy
2024-03-02T16:42:30.8444286Z     when the email provided is already used by an existing user
2024-03-02T16:42:30.8655111Z       should not allow the email
2024-03-02T16:42:30.8656073Z     when the email provided is already used by an existing organization
2024-03-02T16:42:31.0678028Z       should not allow the email
2024-03-02T16:42:31.0679140Z 
2024-03-02T16:42:31.0679412Z DonationSite
2024-03-02T16:42:31.0681569Z   import_csv
2024-03-02T16:42:31.2565046Z     imports storage locations from a csv file
2024-03-02T16:42:31.2565961Z   geocode
2024-03-02T16:42:31.2629748Z     adds coordinates to the database
2024-03-02T16:42:31.2630899Z   Validations >
2024-03-02T16:42:31.2676335Z     is invalid without a name
2024-03-02T16:42:31.2718221Z     is invalid without an address
2024-03-02T16:42:31.2803094Z     must belong to an organization
2024-03-02T16:42:31.2803954Z   versioning
2024-03-02T16:42:31.2839984Z     is expected to be versioned
2024-03-02T16:42:31.2840542Z 
2024-03-02T16:42:31.2840872Z DistributionByCountyReportService
2024-03-02T16:42:31.2845476Z   get_breakdown
2024-03-02T16:42:31.3882998Z     divides the item numbers and values according to the partner profile
2024-03-02T16:42:31.4627318Z     will have 100% unspecified shows if no served_areas
2024-03-02T16:42:31.6516711Z     handles multiple partners with overlapping service areas properly
2024-03-02T16:42:31.6517538Z 
2024-03-02T16:42:31.6518158Z DistributionItemizedBreakdownService
2024-03-02T16:42:31.6518976Z   #fetch_csv
2024-03-02T16:42:32.0437272Z     should output the expected output but in CSV format
2024-03-02T16:42:32.0438326Z   #fetch
2024-03-02T16:42:32.4335955Z     should include the break down of items distributed with onhand data
2024-03-02T16:42:32.4336910Z 
2024-03-02T16:42:32.4337392Z Item
2024-03-02T16:42:32.4339074Z   distribution_quantity and package size
2024-03-02T16:42:32.4488030Z     have nil values if an empty string is passed
2024-03-02T16:42:32.4489017Z   Validations >
2024-03-02T16:42:32.4613074Z     requires that items quantity are not a negative number
2024-03-02T16:42:32.4672473Z     must belong to an organization
2024-03-02T16:42:32.4727823Z     requires a Base Item base
2024-03-02T16:42:32.4868329Z     requires a unique name
2024-03-02T16:42:32.4869073Z   Methods >
2024-03-02T16:42:32.4870044Z     barcoded_items >
2024-03-02T16:42:32.5246066Z       returns a collection of items that have barcodes associated with them
2024-03-02T16:42:32.5247085Z     has_history?
2024-03-02T16:42:32.6194526Z       identifies items that have been used previously
2024-03-02T16:42:32.6195932Z     #reactivate!
2024-03-02T16:42:32.6196686Z       given an array of item ids
2024-03-02T16:42:32.6787081Z         sets the active trait to true for all of them
2024-03-02T16:42:32.6787851Z       given a single item id
2024-03-02T16:42:32.7183142Z         sets the active trait to true for that item
2024-03-02T16:42:32.7197489Z     barcodes_for
2024-03-02T16:42:32.7612388Z       retrieves all BarcodeItems associated with an item
2024-03-02T16:42:32.7613351Z     storage_locations_containing
2024-03-02T16:42:32.8433741Z       retrieves all storage locations that contain an item
2024-03-02T16:42:32.8434629Z     other?
2024-03-02T16:42:32.8768284Z       is true for items that are partner_key 'other'
2024-03-02T16:42:32.8785314Z     destroy
2024-03-02T16:42:32.9131652Z       only hides an item that has history
2024-03-02T16:42:33.1391638Z       deactivates the kit if it exists
2024-03-02T16:42:33.1576633Z       actually destroys an item that doesn't have history
2024-03-02T16:42:33.1577892Z   versioning
2024-03-02T16:42:33.1619327Z     is expected to be versioned
2024-03-02T16:42:33.1620068Z   after update
2024-03-02T16:42:33.1620890Z     when item does not have kit
2024-03-02T16:42:33.1769940Z       does not raise any errors
2024-03-02T16:42:33.1770681Z     when item has the kit
2024-03-02T16:42:33.3860564Z       updates kit name
2024-03-02T16:42:33.3861350Z   default_quantity
2024-03-02T16:42:33.3956645Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-02T16:42:33.4048855Z     should return 50 if column is not set
2024-03-02T16:42:33.4139743Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-02T16:42:33.4230290Z     should return the value of distribution_quantity if it is set
2024-03-02T16:42:33.4231492Z   Assocations >
2024-03-02T16:42:33.4283512Z     is expected to belong to item_category optional: true
2024-03-02T16:42:33.4284534Z   Filtering >
2024-03-02T16:42:33.4323459Z     can filter
2024-03-02T16:42:33.4527871Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T16:42:33.4826772Z     ->active shows items that are still active
2024-03-02T16:42:33.4868979Z     ->by_size returns all items with the same size, per their BaseItem parent (FAILED - 11)
2024-03-02T16:42:33.4870155Z     ->cloth_diapers
2024-03-02T16:42:33.5179433Z       returns records associated with disposable diapers
2024-03-02T16:42:33.5180792Z     ->by_partner_key
2024-03-02T16:42:33.5351621Z       filters by partner key
2024-03-02T16:42:33.5352500Z     ->by_base_item
2024-03-02T16:42:33.7425389Z       can be chained to organization to constrain it to just 1 org's items
2024-03-02T16:42:33.7613490Z       shows the items for a particular base_item
2024-03-02T16:42:33.7614615Z     ->disposable
2024-03-02T16:42:33.7923947Z       returns records associated with disposable diapers
2024-03-02T16:42:33.7924531Z 
2024-03-02T16:42:33.7924895Z DonationDestroyService
2024-03-02T16:42:33.7925790Z   #call
2024-03-02T16:42:33.7927577Z     when storage_location fails to decrease the inventory of the donation
2024-03-02T16:42:33.7982156Z       to not be a success
2024-03-02T16:42:33.7983327Z     when the organization_id matches no Organization
2024-03-02T16:42:33.8024597Z       to not be a success
2024-03-02T16:42:33.8025248Z     when the donation_id matches no Donation owned by the organization
2024-03-02T16:42:33.8066840Z       to not be a success
2024-03-02T16:42:33.8067411Z     when the donation succesfully gets destroyed
2024-03-02T16:42:33.8320429Z       to be a success
2024-03-02T16:42:33.8321365Z     when the donation destroy fails
2024-03-02T16:42:33.8371899Z       to not be a success
2024-03-02T16:42:33.8372870Z 
2024-03-02T16:42:33.8373320Z Partners::FamilyRequestCreateService
2024-03-02T16:42:33.8374637Z   #call
2024-03-02T16:42:33.8375595Z     when the arguments are correct
2024-03-02T16:42:33.8376820Z       with children
2024-03-02T16:42:33.9464547Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-02T16:42:33.9465439Z       without children
2024-03-02T16:42:33.9788099Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-02T16:42:33.9789195Z     when the arguments are incorrect
2024-03-02T16:42:33.9789805Z       because a unrecognized item_id was provided
2024-03-02T16:42:34.0058172Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-02T16:42:34.0059425Z       because no family_requests_attributes were defined
2024-03-02T16:42:34.0314540Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-02T16:42:34.0315225Z 
2024-03-02T16:42:34.0315454Z TextInterpolatorService
2024-03-02T16:42:34.0316474Z   #call
2024-03-02T16:42:34.0355583Z     returns interpolated text
2024-03-02T16:42:34.0356357Z     when text is nil
2024-03-02T16:42:34.0395786Z       returns nil
2024-03-02T16:42:34.0396380Z     when interpolations are empty
2024-03-02T16:42:34.0435908Z       returns text
2024-03-02T16:42:34.0436525Z     when interpolations are not present
2024-03-02T16:42:34.0471090Z       returns text
2024-03-02T16:42:34.0471780Z     when text is empty
2024-03-02T16:42:34.0508496Z       returns empty string
2024-03-02T16:42:34.0509135Z     when interpolations are nil
2024-03-02T16:42:34.0545663Z       returns text
2024-03-02T16:42:34.0546463Z 
2024-03-02T16:42:34.0546809Z Reports::PartnerInfoReportService
2024-03-02T16:42:34.0547658Z   #report
2024-03-02T16:42:34.2346418Z     should report zero values
2024-03-02T16:42:34.4857350Z     should report normal values
2024-03-02T16:42:34.4858087Z 
2024-03-02T16:42:34.4858348Z DonationCreateService
2024-03-02T16:42:34.4859460Z   #call
2024-03-02T16:42:34.5097607Z     should create the donation
2024-03-02T16:42:34.5098494Z 
2024-03-02T16:42:34.5098990Z ProductDriveParticipant
2024-03-02T16:42:34.5100092Z   Validations
2024-03-02T16:42:34.5190143Z     is invalid without an organization
2024-03-02T16:42:34.5254231Z     is invalid unless it has either a phone number or an email
2024-03-02T16:42:34.5255036Z   Methods
2024-03-02T16:42:34.5255573Z     volume
2024-03-02T16:42:34.6046130Z       retrieves the amount of product that has been donated by participant
2024-03-02T16:42:34.6046895Z     volume_by_product_drive
2024-03-02T16:42:34.7673785Z       retrieves the amount of product that has been donated through specific product drive
2024-03-02T16:42:34.7675405Z     donation_source_view
2024-03-02T16:42:34.7676094Z       no contact name
2024-03-02T16:42:34.7740824Z         is expected to be nil
2024-03-02T16:42:34.7743624Z       contact name present
2024-03-02T16:42:34.7803936Z         is expected to eq "Contact Name (participant)"
2024-03-02T16:42:34.7805018Z   behaves like provideable
2024-03-02T16:42:34.7806028Z     Validations
2024-03-02T16:42:34.7874558Z       is invalid unless it has either a contact name or a business name
2024-03-02T16:42:34.7911173Z       is invalid without an organization
2024-03-02T16:42:34.7912022Z     import_csv
2024-03-02T16:42:34.9809010Z       imports from a csv file
2024-03-02T16:42:34.9809608Z     geocode
2024-03-02T16:42:34.9877618Z       adds coordinates to the database
2024-03-02T16:42:34.9878636Z   versioning
2024-03-02T16:42:34.9917454Z     is expected to be versioned
2024-03-02T16:42:34.9920628Z 
2024-03-02T16:42:34.9920998Z DistributionReminder
2024-03-02T16:42:34.9921960Z   conditionally sending the emails
2024-03-02T16:42:35.0226190Z     does not send mail for past distributions
2024-03-02T16:42:35.0525376Z     sends mail for future distributions
2024-03-02T16:42:35.0828568Z     sends mail for future distributions where the partner wants reminders
2024-03-02T16:42:35.1116806Z     does not send mail for future distributions if the partner wants no reminders
2024-03-02T16:42:35.1118179Z     when the distribution_id does not match any Distribution
2024-03-02T16:42:35.1164108Z       does not send mail for non existent distributions
2024-03-02T16:42:35.1165153Z     when the partner is deactivated
2024-03-02T16:42:35.1467912Z       does not send mail
2024-03-02T16:42:35.1468570Z 
2024-03-02T16:42:35.1469220Z Partners::Family
2024-03-02T16:42:35.1470898Z   #total_children_count
2024-03-02T16:42:35.1530231Z     should return the family's total children count
2024-03-02T16:42:35.1531057Z   validations
2024-03-02T16:42:35.1620375Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-02T16:42:35.1702036Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-02T16:42:35.1780505Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-02T16:42:35.1781281Z   #guardian_display_name
2024-03-02T16:42:35.1833435Z     should return the guardian's first and last name
2024-03-02T16:42:35.1834278Z   associations
2024-03-02T16:42:35.1872375Z     is expected to have many children dependent => destroy
2024-03-02T16:42:35.1906999Z     is expected to have many authorized_family_members dependent => destroy
2024-03-02T16:42:35.1947796Z     is expected to belong to partner required: true
2024-03-02T16:42:35.1948462Z   versioning
2024-03-02T16:42:35.1983486Z     is expected to be versioned
2024-03-02T16:42:35.1983970Z   #create_authorized
2024-03-02T16:42:35.2274158Z     should include authorized family members
2024-03-02T16:42:35.2274889Z   #search_non_archived
2024-03-02T16:42:35.3194989Z     should return all families if one is passed in
2024-03-02T16:42:35.4096206Z     should return non-archived families if zero is passed in
2024-03-02T16:42:35.4097145Z 
2024-03-02T16:42:35.4097310Z ApplicationHelper
2024-03-02T16:42:35.4099175Z   can_administrate?
2024-03-02T16:42:35.4100532Z     User is org admin and part of org
2024-03-02T16:42:35.4322253Z       can administrate
2024-03-02T16:42:35.4323076Z     User is org admin and not part of org
2024-03-02T16:42:35.6241900Z       cannot administrate
2024-03-02T16:42:35.6242818Z     User is part of org but not org admin
2024-03-02T16:42:35.6406206Z       cannot administrate
2024-03-02T16:42:35.6406928Z   confirm_delete_msg
2024-03-02T16:42:35.6459688Z     subs in string
2024-03-02T16:42:35.6460292Z   active_class
2024-03-02T16:42:35.6508847Z     Returns the controller name
2024-03-02T16:42:35.6509854Z   flash_class
2024-03-02T16:42:35.6571462Z     returns appropriate class for success
2024-03-02T16:42:35.6620659Z     returns appropriate class for notice
2024-03-02T16:42:35.6665868Z     returns appropriate class for error
2024-03-02T16:42:35.6711117Z     returns appropriate class for alert
2024-03-02T16:42:35.6711988Z   default_title_content
2024-03-02T16:42:35.6714304Z     Organization exists
2024-03-02T16:42:35.8472579Z       returns the organization's name
2024-03-02T16:42:35.8473702Z     Organization does not exist
2024-03-02T16:42:35.8528898Z       returns a default name
2024-03-02T16:42:35.8529720Z   step_container_helper
2024-03-02T16:42:35.8531389Z     active_index is greater than index
2024-03-02T16:42:35.8579571Z       returns done
2024-03-02T16:42:35.8580266Z     active_index is equal to index
2024-03-02T16:42:35.8627213Z       returns active
2024-03-02T16:42:35.8627952Z     active_index is less than index
2024-03-02T16:42:35.8673134Z       returns empty string
2024-03-02T16:42:35.8674130Z 
2024-03-02T16:42:35.8674596Z RequestMailer
2024-03-02T16:42:35.8675580Z   #request_cancel_partner_notification
2024-03-02T16:42:35.8844416Z     renders the body with correct text with partner information
2024-03-02T16:42:35.8983657Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:42:35.8986163Z 
2024-03-02T16:42:35.8986580Z Organization
2024-03-02T16:42:35.8989570Z   #seed_items
2024-03-02T16:42:36.0902416Z     allows a collection of items to be seeded
2024-03-02T16:42:36.2713234Z     allows a single base item to be seeded
2024-03-02T16:42:36.2714797Z     when given an item name that already exists, but with an 'other' partner key
2024-03-02T16:42:36.4780144Z       updates the old item to use the new base item as its base
2024-03-02T16:42:36.4780848Z     when given an item that already exists
2024-03-02T16:42:36.6633975Z       gracefully skips the item
2024-03-02T16:42:36.6634812Z   versioning
2024-03-02T16:42:36.6676008Z     is expected to be versioned
2024-03-02T16:42:36.6676936Z   .seed_items
2024-03-02T16:42:36.6677591Z     when provided with an organization to seed
2024-03-02T16:42:36.9931389Z       loads the base items into Item records
2024-03-02T16:42:36.9932402Z     when no organization is provided
2024-03-02T16:42:37.6184906Z       updates all organizations
2024-03-02T16:42:37.6186012Z   reminder_day
2024-03-02T16:42:37.6309179Z     can only contain numbers 1-28
2024-03-02T16:42:37.6310022Z   earliest reporting year
2024-03-02T16:42:37.8062917Z     is the organization created year if no associated data
2024-03-02T16:42:38.0510018Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-02T16:42:38.0511693Z   Associations >
2024-03-02T16:42:38.0553710Z     is expected to have many users through roles
2024-03-02T16:42:38.0797401Z     is expected to have many item_categories
2024-03-02T16:42:38.0798772Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-02T16:42:38.0799634Z     barcode_items
2024-03-02T16:42:38.2623542Z       returns only this organization's barcodes, no globals (FAILED - 12)
2024-03-02T16:42:38.2624423Z       .all
2024-03-02T16:42:38.4526728Z         includes global barcode items also (FAILED - 13)
2024-03-02T16:42:38.4527550Z     users
2024-03-02T16:42:38.4528063Z       when a organizaton has a user that has two roles
2024-03-02T16:42:38.6636131Z         should returns users without duplications
2024-03-02T16:42:38.6636884Z     distributions
2024-03-02T16:42:38.6637412Z       upcoming
2024-03-02T16:42:38.7458631Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-02T16:42:38.7459636Z     items
2024-03-02T16:42:38.7460203Z       .during
2024-03-02T16:42:40.7196001Z         return ranking of all items
2024-03-02T16:42:40.7196699Z       .during.top
2024-03-02T16:42:42.7207094Z         return just 3 elements
2024-03-02T16:42:44.6871515Z         return 3 most used items
2024-03-02T16:42:44.6872184Z       .during.bottom
2024-03-02T16:42:46.6998112Z         return 3 least used items
2024-03-02T16:42:48.6782845Z         return just 3 elements
2024-03-02T16:42:48.6783458Z       .other
2024-03-02T16:42:50.6791222Z         returns all items for this organization designated 'other'
2024-03-02T16:42:50.6792502Z   #assign_attributes_from_account_request
2024-03-02T16:42:50.6889605Z     should assign the proper attributes to the organization
2024-03-02T16:42:50.6890405Z   #ordered_requests
2024-03-02T16:42:50.8866470Z     puts active requests before fulfilled requests
2024-03-02T16:42:50.8867203Z     ordering of requests with matching status
2024-03-02T16:42:51.0810475Z       puts the most recently updated request before older requests
2024-03-02T16:42:51.0811335Z   geocode
2024-03-02T16:42:51.2673696Z     adds coordinates to the database
2024-03-02T16:42:51.2674168Z   is_active
2024-03-02T16:42:51.6278104Z     returns active organizations
2024-03-02T16:42:51.6278633Z   valid_items
2024-03-02T16:42:51.8036733Z     returns an array of item partner keys
2024-03-02T16:42:51.9894467Z     only shows active valid items
2024-03-02T16:42:51.9894938Z     with invisible items
2024-03-02T16:42:52.0216350Z       only shows active and visible items
2024-03-02T16:42:52.0216918Z   #short_name
2024-03-02T16:42:52.0300490Z     can only contain valid characters
2024-03-02T16:42:52.0301434Z   total_inventory
2024-03-02T16:42:52.2104960Z     returns 0 if there is nothing
2024-03-02T16:42:52.4610417Z     returns a sum total of all inventory at all storage locations
2024-03-02T16:42:52.4610974Z   default storage location
2024-03-02T16:42:52.4663140Z     associates the default storage location with a storage location
2024-03-02T16:42:52.4699947Z     returns nil when not set
2024-03-02T16:42:52.4700468Z   after_create
2024-03-02T16:42:52.4921615Z     should update the state of the account request
2024-03-02T16:42:52.4922261Z   validations
2024-03-02T16:42:52.5030741Z     validates that at least one distribution type is enabled
2024-03-02T16:42:52.6830658Z     validates that short names are unique
2024-03-02T16:42:52.6904618Z     validates that attachment file size is not higher than 1 MB
2024-03-02T16:42:52.6980102Z     validates that attachments are png or jpgs
2024-03-02T16:42:52.6980667Z   from_email
2024-03-02T16:42:52.8964523Z     returns admin email when it's empty
2024-03-02T16:42:53.0710595Z     returns email when present
2024-03-02T16:42:53.2647423Z     returns admin email when it's empty space
2024-03-02T16:42:53.4623424Z     returns admin email when not present
2024-03-02T16:42:53.4624067Z   deadline_day
2024-03-02T16:42:53.4732758Z     can only contain numbers 1-28
2024-03-02T16:42:53.4733304Z   address
2024-03-02T16:42:53.4770606Z     does not add any separators before the city when street is missing
2024-03-02T16:42:53.4805164Z     does not add any separators after street when city, state, and zip are missing
2024-03-02T16:42:53.4838529Z     correctly formats an address string with commas and spaces
2024-03-02T16:42:53.4871328Z     returns an empty string when the org has no address components
2024-03-02T16:42:53.4903710Z     does not add a trailing space when the zip code is missing
2024-03-02T16:42:53.4904689Z 
2024-03-02T16:42:53.4904868Z Transfer
2024-03-02T16:42:53.4906407Z   behaves like itemizable
2024-03-02T16:42:53.4907140Z     .to_a
2024-03-02T16:42:53.4908121Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:42:53.5354753Z         raises an error
2024-03-02T16:42:53.5355253Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:42:53.5731206Z         calls line_item_values
2024-03-02T16:42:53.5731896Z     .line_items
2024-03-02T16:42:53.5733164Z       combine!
2024-03-02T16:42:53.6221400Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:42:53.6500645Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:42:53.6501580Z       total
2024-03-02T16:42:53.7017129Z         has an item total
2024-03-02T16:42:53.7017692Z       quantities_by_name
2024-03-02T16:42:53.7523318Z         leaves out zero-quantitied items if requested
2024-03-02T16:42:53.8027801Z         returns a hash of items with id, name, and quantity
2024-03-02T16:42:53.8028715Z       sorted
2024-03-02T16:42:53.8725871Z         displays the items, sorted by name
2024-03-02T16:42:53.8726566Z   versioning
2024-03-02T16:42:53.8767350Z     is expected to be versioned
2024-03-02T16:42:53.8767927Z   Methods >
2024-03-02T16:42:54.0958402Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-02T16:42:54.0959366Z   Validations >
2024-03-02T16:42:54.1221603Z     requires that each line item exists in the inventory
2024-03-02T16:42:54.1345978Z     must have storage locations set
2024-03-02T16:42:54.1461832Z     must have different storage locations
2024-03-02T16:42:54.1543414Z     must belong to an organization
2024-03-02T16:42:54.2218627Z     requires that the line items must have sufficient quantity in the inventory
2024-03-02T16:42:54.4115810Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-02T16:42:54.4116772Z   Scopes >
2024-03-02T16:42:54.4356793Z     `to_location` can filter out transfers to a specific location
2024-03-02T16:42:54.4581671Z     `from_location` can filter out transfers from a specific location
2024-03-02T16:42:54.4582697Z 
2024-03-02T16:42:54.4582886Z AccountRequestsController
2024-03-02T16:42:54.4583508Z   routing
2024-03-02T16:42:54.4627284Z     routes to #new
2024-03-02T16:42:54.4666867Z     routes to #create
2024-03-02T16:42:54.4667829Z 
2024-03-02T16:42:54.4668079Z Audit
2024-03-02T16:42:54.4669557Z   behaves like itemizable
2024-03-02T16:42:54.4670352Z     .line_items
2024-03-02T16:42:54.4671983Z       combine!
2024-03-02T16:42:54.5304015Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:42:54.5714282Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:42:54.5715222Z       total
2024-03-02T16:42:54.6580218Z         has an item total
2024-03-02T16:42:54.6580821Z       quantities_by_name
2024-03-02T16:42:54.7468552Z         leaves out zero-quantitied items if requested
2024-03-02T16:42:54.8328984Z         returns a hash of items with id, name, and quantity
2024-03-02T16:42:54.8329779Z       sorted
2024-03-02T16:42:54.9527885Z         displays the items, sorted by name
2024-03-02T16:42:54.9528594Z     .to_a
2024-03-02T16:42:54.9529252Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:42:55.0063696Z         calls line_item_values
2024-03-02T16:42:55.0064378Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:42:55.0593099Z         raises an error
2024-03-02T16:42:55.0594143Z   Scopes >
2024-03-02T16:42:55.1084793Z     `at_location` can filter out audits to a specific location
2024-03-02T16:42:55.1085702Z   versioning
2024-03-02T16:42:55.1124157Z     is expected to be versioned
2024-03-02T16:42:55.1124618Z   Validations >
2024-03-02T16:42:55.1719800Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-02T16:42:55.1837793Z     must belong to an organization admin of its organization
2024-03-02T16:42:55.2411431Z     can have line items that has quantity as zero
2024-03-02T16:42:55.2702082Z     must belong to an organization
2024-03-02T16:42:55.3234431Z     cannot have duplicate line items
2024-03-02T16:42:55.3765600Z     can not have line items that has quantity as negative integer
2024-03-02T16:42:55.4312686Z     can have line items that has quantity as a positive integer
2024-03-02T16:42:55.4313495Z   Methods >
2024-03-02T16:42:55.7891779Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-02T16:42:56.0313549Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-02T16:42:56.0314377Z 
2024-03-02T16:42:56.0314559Z ProfileUpdateService
2024-03-02T16:42:56.0314995Z   #update
2024-03-02T16:42:56.0586159Z     updates the profile with the filtered and prepared params
2024-03-02T16:42:56.0586788Z 
2024-03-02T16:42:56.0586948Z User
2024-03-02T16:42:56.0657277Z   has a valid factory
2024-03-02T16:42:56.0658123Z   versioning
2024-03-02T16:42:56.0703047Z     is expected to be versioned
2024-03-02T16:42:56.0703716Z   Scopes >
2024-03-02T16:42:56.0704523Z     ->alphabetized
2024-03-02T16:42:56.1153496Z       retrieves users in the correct order
2024-03-02T16:42:56.1154168Z   omniauth
2024-03-02T16:42:56.1300193Z     retrieves the user from an omniauth context
2024-03-02T16:42:56.1300891Z   Methods >
2024-03-02T16:42:56.1385718Z     #invitation_status
2024-03-02T16:42:56.1435813Z     discarded?
2024-03-02T16:42:56.1516455Z     #reinvitable?
2024-03-02T16:42:56.1998823Z     #kind
2024-03-02T16:42:56.1999593Z   Scopes >
2024-03-02T16:42:56.2000370Z     ->alphabetized
2024-03-02T16:42:56.2226061Z       retrieves users in the correct order
2024-03-02T16:42:56.2226746Z   Validations >
2024-03-02T16:42:56.2421487Z     requires an email that is formatted correctly
2024-03-02T16:42:56.2512615Z     requires a name
2024-03-02T16:42:56.2513279Z 
2024-03-02T16:42:56.2513511Z DispersedPastDatesGenerator
2024-03-02T16:42:56.2514885Z   constants
2024-03-02T16:42:56.2554717Z     has 4 day ranges for generation of past dates
2024-03-02T16:42:56.2555777Z   #next
2024-03-02T16:42:56.2613629Z     returns equally dispersed dates between all time ranges
2024-03-02T16:42:56.2614227Z 
2024-03-02T16:42:56.2614535Z ItemsOutQuery
2024-03-02T16:42:56.2615286Z   items_out_query
2024-03-02T16:42:56.3914777Z     includes distributions, adjustments, transfers among sources
2024-03-02T16:42:56.5094091Z     returns a collection with the fields name, item_id, quantity
2024-03-02T16:42:56.5094874Z 
2024-03-02T16:42:56.5095162Z BaseItem
2024-03-02T16:42:56.5097027Z   versioning
2024-03-02T16:42:56.5137862Z     is expected to be versioned
2024-03-02T16:42:56.5138444Z   Associations >
2024-03-02T16:42:56.5271129Z     keeps count of its associated items
2024-03-02T16:42:56.5271776Z   Validations >
2024-03-02T16:42:56.5345627Z     is invalid without a uniqueness key
2024-03-02T16:42:56.5391064Z     is invalid without a name
2024-03-02T16:42:56.5438107Z     is invalid without a partner key
2024-03-02T16:42:56.5507203Z     is invalid without a unique name
2024-03-02T16:42:56.5507830Z   Filtering >
2024-03-02T16:42:56.5508638Z     ->by_partner_key
2024-03-02T16:42:56.5562265Z       shows the Base Items by partner_key
2024-03-02T16:42:56.5563042Z     ->without_kit
2024-03-02T16:42:56.5615091Z       should not include the Kit BaseItem
2024-03-02T16:42:56.5616127Z 
2024-03-02T16:42:56.5616433Z BroadcastAnnouncement
2024-03-02T16:42:56.5732194Z   is expected to validate that :message cannot be empty/falsy
2024-03-02T16:42:56.5795668Z   should validate a valid announcement
2024-03-02T16:42:56.5838256Z   is expected to belong to user required: true
2024-03-02T16:42:56.5895549Z   should roughly check if link is valid
2024-03-02T16:42:56.5949388Z   should validate a good link
2024-03-02T16:42:56.5987034Z   is expected to belong to organization optional: true
2024-03-02T16:42:56.5987794Z   filter_announcements
2024-03-02T16:42:56.6128076Z     should include only announcements from the passed organization
2024-03-02T16:42:56.6260200Z     shouldn't include expired announcements
2024-03-02T16:42:56.6407879Z     sorts announcements from most recently created to last
2024-03-02T16:42:56.6408602Z   expired?
2024-03-02T16:42:56.6469708Z     should be true if the announcement is expired
2024-03-02T16:42:56.6528459Z     should be false if the announcement has not expired
2024-03-02T16:42:56.6529150Z   versioning
2024-03-02T16:42:56.6568210Z     is expected to be versioned
2024-03-02T16:42:56.6569669Z 
2024-03-02T16:42:56.6569983Z RequestsTotalItemsService
2024-03-02T16:42:56.6570993Z   #calculate
2024-03-02T16:42:56.6572127Z     when provided requests is nil
2024-03-02T16:42:56.6607474Z       is expected to be blank
2024-03-02T16:42:56.6607977Z     when item name is nil
2024-03-02T16:42:56.6738070Z       return Unknown Item
2024-03-02T16:42:56.6738720Z     when provided with requests that have no request items
2024-03-02T16:42:56.6818603Z       is expected to be blank
2024-03-02T16:42:56.6819534Z     when the request items is not blank
2024-03-02T16:42:56.6960846Z       return the names of items correctly
2024-03-02T16:42:56.7100064Z       return items with correct quantities calculated
2024-03-02T16:42:56.7100736Z 
2024-03-02T16:42:56.7101119Z Reports::OtherProductsReportService
2024-03-02T16:42:56.7102101Z   #report
2024-03-02T16:42:57.3410215Z     should report normal values
2024-03-02T16:42:57.5268477Z     should report zero values
2024-03-02T16:42:57.5269140Z 
2024-03-02T16:42:57.5269417Z RequestsConfirmationMailer
2024-03-02T16:42:57.5604122Z   pairs the right quantities with the right item names
2024-03-02T16:42:57.5802383Z   handles duplicates
2024-03-02T16:42:57.5802916Z   #confirmation_email
2024-03-02T16:42:57.5942054Z     renders the headers
2024-03-02T16:42:57.6123305Z     renders the body
2024-03-02T16:42:57.6124172Z 
2024-03-02T16:42:57.6124364Z ProductDrive
2024-03-02T16:42:57.8604463Z   calculates donation quantity by date
2024-03-02T16:42:58.1092963Z   calculates and returns all donated organization item quantities by name and date
2024-03-02T16:42:58.6386576Z   calculates and returns all donated organization item quantities by category and date
2024-03-02T16:42:58.7923848Z   calculates in-kind value
2024-03-02T16:42:58.9477115Z   calculates donation quantity
2024-03-02T16:42:58.9477776Z   associations
2024-03-02T16:42:59.0451035Z     has_many product_drive_participants through donations
2024-03-02T16:42:59.1415140Z     has_many donations
2024-03-02T16:42:59.1415624Z   versioning
2024-03-02T16:42:59.2981533Z     is expected to be versioned
2024-03-02T16:42:59.2982160Z   donation_source_view
2024-03-02T16:42:59.4597947Z     returns formatted text
2024-03-02T16:42:59.4598499Z   validations
2024-03-02T16:42:59.6094696Z     is expected not to be valid
2024-03-02T16:42:59.7605597Z     is expected not to be valid
2024-03-02T16:42:59.9131091Z     is expected not to be valid
2024-03-02T16:42:59.9131631Z   scopes
2024-03-02T16:42:59.9132162Z     .by_item_category_id
2024-03-02T16:43:00.2683874Z       returns the product_drive with name some_name
2024-03-02T16:43:00.6204664Z       does not return other_name
2024-03-02T16:43:00.6205302Z     .by_name
2024-03-02T16:43:00.7793447Z       returns the product_drive with name some_name
2024-03-02T16:43:00.9458585Z       does not return other_name
2024-03-02T16:43:00.9459087Z     .within_date_range
2024-03-02T16:43:01.1063649Z       returns the product drive 1
2024-03-02T16:43:01.2609946Z       does not include product drive 2
2024-03-02T16:43:01.2611214Z   .search_date_range
2024-03-02T16:43:01.4254280Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-02T16:43:01.4254950Z   distinct_items
2024-03-02T16:43:01.8138903Z     counts the distinct items correctly by given category
2024-03-02T16:43:02.3362300Z     counts the items correctly for 1 donation with multiple items
2024-03-02T16:43:02.7145228Z     doesn't double_count the items if there are two donations for the same item
2024-03-02T16:43:03.0989358Z     counts the distinct items correctly in overlapping donations
2024-03-02T16:43:03.4685241Z     counts the distinct items correctly by given date
2024-03-02T16:43:03.4685889Z 
2024-03-02T16:43:03.4686059Z PartnerMailer
2024-03-02T16:43:03.4687059Z   #recertification_request
2024-03-02T16:43:03.4958871Z     renders the body with text that indicates to recertify and link to where
2024-03-02T16:43:03.5206152Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:43:03.5206762Z   #application_approved
2024-03-02T16:43:03.5488604Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-02T16:43:03.5739696Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:43:03.5740449Z 
2024-03-02T16:43:03.5740628Z AdjustmentCreateService
2024-03-02T16:43:03.5741218Z   call
2024-03-02T16:43:03.6743529Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-02T16:43:03.7542012Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-02T16:43:03.8473725Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-02T16:43:03.9134671Z     does not allow inventory to be adjusted below 0
2024-03-02T16:43:04.0055048Z     handles adjustments to multiple items
2024-03-02T16:43:04.0611669Z     gives an error if we attempt to adjust inventory below 0
2024-03-02T16:43:04.1611461Z     increases stored inventory on a positive adjustment
2024-03-02T16:43:04.2482880Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-02T16:43:04.3403934Z     decreases stored inventory on a negative adjustment
2024-03-02T16:43:04.3404544Z 
2024-03-02T16:43:04.3404709Z CustomDeviseMailer
2024-03-02T16:43:04.3405633Z   #invitation_instructions
2024-03-02T16:43:04.3406867Z     when partner is invited
2024-03-02T16:43:04.3864263Z       invites to primary user
2024-03-02T16:43:04.3864795Z     when user is invited
2024-03-02T16:43:04.4066382Z       invites to user
2024-03-02T16:43:04.4269377Z       has invite expiration message
2024-03-02T16:43:04.4270128Z     when other partner users invited
2024-03-02T16:43:04.4713348Z       invites to partner user
2024-03-02T16:43:04.4713966Z 
2024-03-02T16:43:04.4714334Z Exports::ExportDonationsCSVService
2024-03-02T16:43:04.4715181Z   #generate_csv_data
2024-03-02T16:43:04.5892236Z     should match the expected content for the csv
2024-03-02T16:43:04.5892942Z 
2024-03-02T16:43:04.5893152Z ReminderDeadlineJob
2024-03-02T16:43:04.5893823Z   #perform
2024-03-02T16:43:04.6144779Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-02T16:43:04.6145661Z 
2024-03-02T16:43:04.6145918Z Partners::RequestApprovalService
2024-03-02T16:43:04.6146517Z   #call
2024-03-02T16:43:04.6148362Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-02T16:43:04.6412602Z       should return an error re social media
2024-03-02T16:43:04.6413911Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-02T16:43:04.6414704Z     when the partner is already awaiting approval
2024-03-02T16:43:04.6692190Z       should return an error saying it the partner is already requested approval
2024-03-02T16:43:04.6693234Z     when the partner is not yet awaiting approval
2024-03-02T16:43:04.7001114Z       should send an email notification to the partner's organization
2024-03-02T16:43:04.7307591Z       should set the status on the partner record to awaiting_review
2024-03-02T16:43:04.7308744Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-02T16:43:04.7619059Z       does not have an error
2024-03-02T16:43:05.0917529Z 
2024-03-02T16:43:05.0918995Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-02T16:43:05.0919751Z 
2024-03-02T16:43:05.0920925Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-02T16:43:05.0922471Z      # Not yet implemented
2024-03-02T16:43:05.0923029Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-02T16:43:05.0923475Z 
2024-03-02T16:43:05.0924589Z   2) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-02T16:43:05.0926053Z      # Temporarily skipped with xit
2024-03-02T16:43:05.0926783Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-02T16:43:05.2140665Z 
2024-03-02T16:43:05.2141173Z Failures:
2024-03-02T16:43:05.2141458Z 
2024-03-02T16:43:05.2143432Z   1) BarcodeItem Barcodes of BaseItems ('Global') updates a counter in BaseItem whenever it tracks a new barcode
2024-03-02T16:43:05.2144833Z      Failure/Error:
2024-03-02T16:43:05.2145341Z        expect do
2024-03-02T16:43:05.2146070Z          create(:global_barcode_item, barcodeable: base_item)
2024-03-02T16:43:05.2147527Z        end.to change { base_item.barcode_count }.to(1)
2024-03-02T16:43:05.2148155Z 
2024-03-02T16:43:05.2148361Z      NoMethodError:
2024-03-02T16:43:05.2150827Z        undefined method `barcode_count' for #<BaseItem id: 49, name: "4T Diapers", category: nil, created_at: "2024-03-02 08:42:26.614731177 -0800", updated_at: "2024-03-02 08:42:26.614731177 -0800", item_count: nil, partner_key: "4t_diapers">
2024-03-02T16:43:05.2152856Z      # ./spec/models/barcode_item_spec.rb:51:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2153562Z      # ./spec/models/barcode_item_spec.rb:49:in `block (3 levels) in <top (required)>'
2024-03-02T16:43:05.2153970Z 
2024-03-02T16:43:05.2154550Z   2) BarcodeItem Barcodes of BaseItems ('Global') scopes > global includes all barcodes, for both base items and regular items
2024-03-02T16:43:05.2155273Z      Failure/Error: create(:global_barcode_item)
2024-03-02T16:43:05.2155546Z 
2024-03-02T16:43:05.2155695Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2156146Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2156967Z      # ./spec/models/barcode_item_spec.rb:86:in `block (5 levels) in <top (required)>'
2024-03-02T16:43:05.2157372Z 
2024-03-02T16:43:05.2157815Z   3) BarcodeItem Barcodes of BaseItems ('Global') validations > enforces uniqueness in the global scope
2024-03-02T16:43:05.2158546Z      Failure/Error: barcode = create(:global_barcode_item, value: "DEADBEEF")
2024-03-02T16:43:05.2158915Z 
2024-03-02T16:43:05.2159043Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2159476Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2160031Z      # ./spec/models/barcode_item_spec.rb:102:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2160444Z 
2024-03-02T16:43:05.2160948Z   4) BarcodeItem Barcodes of BaseItems ('Global') validations > allows multiple barcodes to point at the same base item
2024-03-02T16:43:05.2161724Z      Failure/Error: create(:global_barcode_item, barcodeable: base_item)
2024-03-02T16:43:05.2162090Z 
2024-03-02T16:43:05.2162221Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2162648Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2163199Z      # ./spec/models/barcode_item_spec.rb:108:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2163595Z 
2024-03-02T16:43:05.2164130Z   5) BarcodeItem Barcodes of BaseItems ('Global') filters > ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-02T16:43:05.2165106Z      Failure/Error: let(:global_barcode_item) { create(:global_barcode_item, barcodeable: base_item) }
2024-03-02T16:43:05.2165915Z 
2024-03-02T16:43:05.2166133Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2166866Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2167801Z      # ./spec/models/barcode_item_spec.rb:46:in `block (3 levels) in <top (required)>'
2024-03-02T16:43:05.2168951Z      # ./spec/models/barcode_item_spec.rb:57:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2169644Z 
2024-03-02T16:43:05.2170593Z   6) BarcodeItem Barcodes of BaseItems ('Global') filters > #by_base_item_partner_key returns barcodes that match the partner key
2024-03-02T16:43:05.2171720Z      Failure/Error: b1 = create(:global_barcode_item, barcodeable: c1)
2024-03-02T16:43:05.2172076Z 
2024-03-02T16:43:05.2172203Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2172637Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2173185Z      # ./spec/models/barcode_item_spec.rb:67:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2173581Z 
2024-03-02T16:43:05.2174021Z   7) BarcodeItem Barcodes of BaseItems ('Global') filters > ->by_value returns the barcode with that value
2024-03-02T16:43:05.2174728Z      Failure/Error: b1 = create(:global_barcode_item, value: "DEADBEEF")
2024-03-02T16:43:05.2175105Z 
2024-03-02T16:43:05.2175238Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2175667Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2176406Z      # ./spec/models/barcode_item_spec.rb:72:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2176821Z 
2024-03-02T16:43:05.2177251Z   8) BarcodeItem Organization barcodes validations > does not enforce value uniqueness compared with the global scope
2024-03-02T16:43:05.2178050Z      Failure/Error: barcode = create(:global_barcode_item, value: "DEADBEEF")
2024-03-02T16:43:05.2178429Z 
2024-03-02T16:43:05.2178558Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2178994Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2179550Z      # ./spec/models/barcode_item_spec.rb:190:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2179960Z 
2024-03-02T16:43:05.2180353Z   9) BarcodeItem Organization barcodes scopes > ->by_value returns the barcode with that value
2024-03-02T16:43:05.2181036Z      Failure/Error: b1 = create(:global_barcode_item, value: "DEADBEEF")
2024-03-02T16:43:05.2181395Z 
2024-03-02T16:43:05.2181529Z      ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2182089Z        can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2182643Z      # ./spec/models/barcode_item_spec.rb:151:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2183047Z 
2024-03-02T16:43:05.2183601Z   10) BarcodeItem Organization barcodes when searching for a barcode where there is a global and local with the same value favors the local barcode
2024-03-02T16:43:05.2184638Z       Failure/Error: let!(:global) { create(:global_barcode_item, value: "DEADBEEF", barcodeable: base_item) }
2024-03-02T16:43:05.2185138Z 
2024-03-02T16:43:05.2185269Z       ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2185719Z         can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2186281Z       # ./spec/models/barcode_item_spec.rb:162:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2186745Z 
2024-03-02T16:43:05.2187139Z   11) Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-02T16:43:05.2187779Z       Failure/Error: size4 = create(:base_item, size: "4")
2024-03-02T16:43:05.2188071Z 
2024-03-02T16:43:05.2188170Z       NoMethodError:
2024-03-02T16:43:05.2189011Z         undefined method `size=' for #<BaseItem id: nil, name: "8T Diapers", category: nil, created_at: nil, updated_at: nil, item_count: nil, partner_key: "6t_diapers">
2024-03-02T16:43:05.2189932Z       # ./spec/models/item_spec.rb:53:in `block (3 levels) in <top (required)>'
2024-03-02T16:43:05.2190301Z 
2024-03-02T16:43:05.2190943Z   12) Organization Associations > barcode_items returns only this organization's barcodes, no globals
2024-03-02T16:43:05.2191591Z       Failure/Error: create(:global_barcode_item) # global
2024-03-02T16:43:05.2191890Z 
2024-03-02T16:43:05.2192021Z       ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2192462Z         can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2193025Z       # ./spec/models/organization_spec.rb:111:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2193450Z 
2024-03-02T16:43:05.2193743Z   13) Organization Associations > barcode_items .all includes global barcode items also
2024-03-02T16:43:05.2194336Z       Failure/Error: create(:global_barcode_item) # global
2024-03-02T16:43:05.2194625Z 
2024-03-02T16:43:05.2194758Z       ActiveModel::MissingAttributeError:
2024-03-02T16:43:05.2195194Z         can't write unknown attribute `barcode_count`
2024-03-02T16:43:05.2195752Z       # ./spec/models/organization_spec.rb:111:in `block (4 levels) in <top (required)>'
2024-03-02T16:43:05.2196158Z 
2024-03-02T16:43:05.2196356Z Finished in 49.33 seconds (files took 8.54 seconds to load)
2024-03-02T16:43:05.2196772Z 539 examples, 13 failures, 2 pending
2024-03-02T16:43:05.2197003Z 
2024-03-02T16:43:05.2197093Z Failed examples:
2024-03-02T16:43:05.2197249Z 
2024-03-02T16:43:05.2197926Z rspec ./spec/models/barcode_item_spec.rb:48 # BarcodeItem Barcodes of BaseItems ('Global') updates a counter in BaseItem whenever it tracks a new barcode
2024-03-02T16:43:05.2199507Z rspec ./spec/models/barcode_item_spec.rb:85 # BarcodeItem Barcodes of BaseItems ('Global') scopes > global includes all barcodes, for both base items and regular items
2024-03-02T16:43:05.2200875Z rspec ./spec/models/barcode_item_spec.rb:101 # BarcodeItem Barcodes of BaseItems ('Global') validations > enforces uniqueness in the global scope
2024-03-02T16:43:05.2202222Z rspec ./spec/models/barcode_item_spec.rb:106 # BarcodeItem Barcodes of BaseItems ('Global') validations > allows multiple barcodes to point at the same base item
2024-03-02T16:43:05.2203641Z rspec ./spec/models/barcode_item_spec.rb:56 # BarcodeItem Barcodes of BaseItems ('Global') filters > ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-02T16:43:05.2205084Z rspec ./spec/models/barcode_item_spec.rb:64 # BarcodeItem Barcodes of BaseItems ('Global') filters > #by_base_item_partner_key returns barcodes that match the partner key
2024-03-02T16:43:05.2206443Z rspec ./spec/models/barcode_item_spec.rb:71 # BarcodeItem Barcodes of BaseItems ('Global') filters > ->by_value returns the barcode with that value
2024-03-02T16:43:05.2207850Z rspec ./spec/models/barcode_item_spec.rb:189 # BarcodeItem Organization barcodes validations > does not enforce value uniqueness compared with the global scope
2024-03-02T16:43:05.2209184Z rspec ./spec/models/barcode_item_spec.rb:150 # BarcodeItem Organization barcodes scopes > ->by_value returns the barcode with that value
2024-03-02T16:43:05.2210528Z rspec ./spec/models/barcode_item_spec.rb:166 # BarcodeItem Organization barcodes when searching for a barcode where there is a global and local with the same value favors the local barcode
2024-03-02T16:43:05.2211910Z rspec ./spec/models/item_spec.rb:52 # Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-02T16:43:05.2213123Z rspec ./spec/models/organization_spec.rb:113 # Organization Associations > barcode_items returns only this organization's barcodes, no globals
2024-03-02T16:43:05.2214248Z rspec ./spec/models/organization_spec.rb:117 # Organization Associations > barcode_items .all includes global barcode items also
2024-03-02T16:43:05.2214849Z 
2024-03-02T16:43:05.2214957Z Randomized with seed 46458
2024-03-02T16:43:05.2215146Z 
2024-03-02T16:43:05.5279612Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T16:43:05.5281058Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3782 / 6427 LOC (58.85%) covered.
2024-03-02T16:43:05.5875684Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/services/text_interpolator_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/models/base_item_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/models/request_item_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/transfer_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/models/item_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/models/question_spec.rb" "spec/models/line_item_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/organization_spec.rb" "spec/models/user_spec.rb" "spec/models/audit_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/account_request_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" failed
2024-03-02T16:43:05.9876737Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T16:43:05.9878475Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10679 LOC (0.36%) covered.
2024-03-02T16:43:06.0176575Z ##[error]Process completed with exit code 1.
