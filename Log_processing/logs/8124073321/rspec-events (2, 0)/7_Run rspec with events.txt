2024-03-02T16:38:39.8437550Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-02T16:38:39.8438409Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-02T16:38:39.8466714Z shell: /usr/bin/bash -e {0}
2024-03-02T16:38:39.8467196Z env:
2024-03-02T16:38:39.8467530Z   POSTGRES_HOST: localhost
2024-03-02T16:38:39.8467914Z   DATABASE_HOST: localhost
2024-03-02T16:38:39.8468360Z   PG_USERNAME: postgres
2024-03-02T16:38:39.8468689Z   PG_PASSWORD: password
2024-03-02T16:38:39.8469052Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-02T16:38:39.8469585Z   POSTGRES_PORT: 5432
2024-03-02T16:38:39.8469937Z   PGHOST: localhost
2024-03-02T16:38:39.8470335Z   PGUSER: postgres
2024-03-02T16:38:39.8470639Z   RAILS_ENV: test
2024-03-02T16:38:39.8470985Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-02T16:38:39.8471473Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-02T16:38:39.8471875Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-02T16:38:39.8472304Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-02T16:38:39.8472891Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-02T16:38:39.8473528Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-02T16:38:39.8474254Z   EVENTS_READ: true
2024-03-02T16:38:39.8474789Z ##[endgroup]
2024-03-02T16:38:45.5916114Z W, [2024-03-02T16:38:45.591222 #2257]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-02T16:38:45.5918678Z W, [2024-03-02T16:38:45.591280 #2257]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:38:45.5921891Z W, [2024-03-02T16:38:45.591298 #2257]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:38:45.5928409Z W, [2024-03-02T16:38:45.591333 #2257]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-02T16:38:48.0977547Z W, [2024-03-02T16:38:48.097409 #2257]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-02T16:38:48.0979140Z W, [2024-03-02T16:38:48.097451 #2257]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:38:48.0981002Z W, [2024-03-02T16:38:48.097464 #2257]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:38:48.0984167Z W, [2024-03-02T16:38:48.097499 #2257]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-02T16:38:48.1052303Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-03-02T16:38:56.7847620Z 
2024-03-02T16:38:56.7848474Z Randomized with seed 63754
2024-03-02T16:38:57.6395226Z 
2024-03-02T16:38:57.6395983Z DeadlineService
2024-03-02T16:38:57.6396753Z   #next_deadline
2024-03-02T16:38:57.6397834Z     do from the partner group
2024-03-02T16:38:57.6398805Z       when the deadline is today
2024-03-02T16:38:57.6650223Z         returns a date in the next month
2024-03-02T16:38:57.6650998Z       when the deadline is after today
2024-03-02T16:38:57.6706528Z         returns a date within the current month
2024-03-02T16:38:57.6707415Z       when the deadline is before today
2024-03-02T16:38:57.6760031Z         returns a date in the next month
2024-03-02T16:38:57.6760856Z     from the organization
2024-03-02T16:38:57.6761636Z       when the deadline is today
2024-03-02T16:38:57.6814375Z         returns a date in the next month
2024-03-02T16:38:57.6815013Z       when the deadline is before today
2024-03-02T16:38:57.6867753Z         returns a date in the next month
2024-03-02T16:38:57.6868764Z       when the deadline is after today
2024-03-02T16:38:57.6921396Z         returns a date within the current month
2024-03-02T16:38:57.6922386Z 
2024-03-02T16:38:57.6922829Z Partners::ItemRequest
2024-03-02T16:38:57.6923858Z   associations
2024-03-02T16:38:57.7025946Z     is expected to belong to request class_name => ::Request required: true
2024-03-02T16:38:57.7074953Z     is expected to have many child_item_requests dependent => destroy
2024-03-02T16:38:57.7109456Z     is expected to have many children through child_item_requests
2024-03-02T16:38:57.7110747Z   versioning
2024-03-02T16:38:57.7144600Z     is expected to be versioned
2024-03-02T16:38:57.7145317Z   validations
2024-03-02T16:38:57.7206581Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-02T16:38:57.7266087Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:38:57.7324854Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-02T16:38:57.7381035Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-02T16:38:57.7381810Z 
2024-03-02T16:38:57.7382115Z Exports::ExportPurchasesCSVService
2024-03-02T16:38:57.7382858Z   #generate_csv_data
2024-03-02T16:38:57.8854698Z     should match the expected content for the csv
2024-03-02T16:38:57.8855466Z 
2024-03-02T16:38:57.8855763Z PartnerMailerJob
2024-03-02T16:38:57.8856504Z   conditionally sending the emails
2024-03-02T16:38:58.2246715Z     sends mail for future distributions immediately
2024-03-02T16:38:58.4213541Z     does not send mail for past distributions
2024-03-02T16:38:58.4214763Z     when the distribution is for a deactivated partner
2024-03-02T16:38:58.6173605Z       does not send the email
2024-03-02T16:38:58.6174472Z 
2024-03-02T16:38:58.6175093Z RequestDestroyService
2024-03-02T16:38:58.6175749Z   #call
2024-03-02T16:38:58.6393715Z     should return an instance of itself
2024-03-02T16:38:58.6394670Z     when the request_id matches no request
2024-03-02T16:38:58.6432955Z       should not be successful and have errors indicating request id is invalid
2024-03-02T16:38:58.6434596Z     when the request is already discarded
2024-03-02T16:38:58.6533364Z       should not be successful and have errors
2024-03-02T16:38:58.6534016Z     when there are no validation errors
2024-03-02T16:38:58.6665464Z       should update the discarded_at column on the request
2024-03-02T16:38:58.6795466Z       should update the status column on the request
2024-03-02T16:38:58.6920965Z       should send a email notification to the partner
2024-03-02T16:38:58.6922511Z     when the request's partner is deactivated
2024-03-02T16:38:58.7179483Z       should have errors
2024-03-02T16:38:58.7179899Z 
2024-03-02T16:38:58.7180616Z HistoricalDataCacheJob
2024-03-02T16:38:58.9002982Z   caches the historical data
2024-03-02T16:38:59.0727510Z   queues the job
2024-03-02T16:38:59.0727997Z 
2024-03-02T16:38:59.0728508Z DistributionPdf
2024-03-02T16:38:59.1408737Z   #request_data
2024-03-02T16:38:59.1993803Z   #non_request_data
2024-03-02T16:38:59.1994549Z 
2024-03-02T16:38:59.1994835Z ProductDriveHelper
2024-03-02T16:38:59.1996199Z   #is_virtual
2024-03-02T16:38:59.1997369Z     when a product drive was not provided
2024-03-02T16:38:59.2083292Z       with blank argument
2024-03-02T16:38:59.2138255Z       without argument
2024-03-02T16:38:59.2139141Z     when the product drive was held virtually
2024-03-02T16:38:59.2255592Z       is expected to eq "Yes"
2024-03-02T16:38:59.2256594Z     when the product drive wasn't held virtually
2024-03-02T16:38:59.2306006Z       is expected to eq "No"
2024-03-02T16:38:59.2307116Z 
2024-03-02T16:38:59.2307476Z InventoryCheckService
2024-03-02T16:38:59.2308639Z   call
2024-03-02T16:38:59.2309542Z     alert
2024-03-02T16:38:59.3195622Z       should set the alert
2024-03-02T16:38:59.3196599Z     error
2024-03-02T16:38:59.3912442Z       should set the error
2024-03-02T16:38:59.3913361Z 
2024-03-02T16:38:59.3913761Z TextInterpolatorService
2024-03-02T16:38:59.3914642Z   #call
2024-03-02T16:38:59.3950315Z     returns interpolated text
2024-03-02T16:38:59.3951213Z     when interpolations are empty
2024-03-02T16:38:59.3985275Z       returns text
2024-03-02T16:38:59.3985854Z     when text is empty
2024-03-02T16:38:59.4019554Z       returns empty string
2024-03-02T16:38:59.4020330Z     when interpolations are not present
2024-03-02T16:38:59.4054347Z       returns text
2024-03-02T16:38:59.4055130Z     when text is nil
2024-03-02T16:38:59.4089290Z       returns nil
2024-03-02T16:38:59.4089907Z     when interpolations are nil
2024-03-02T16:38:59.4123810Z       returns text
2024-03-02T16:38:59.4125227Z 
2024-03-02T16:38:59.4125519Z AllocateKitInventoryService
2024-03-02T16:38:59.4126692Z   #allocate
2024-03-02T16:38:59.4127869Z     when more than one kit is requested
2024-03-02T16:38:59.4128837Z       but one of the items is out of stock
2024-03-02T16:38:59.7056823Z         returns error and does not change kit or item quantity
2024-03-02T16:38:59.7058044Z     when inventory items are available
2024-03-02T16:38:59.9853982Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-02T16:38:59.9854978Z       When kit is allocated more then once
2024-03-02T16:39:00.2903533Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-02T16:39:00.2904887Z       when there are more then one line items
2024-03-02T16:39:00.2905692Z         when there kit is allocated once
2024-03-02T16:39:00.5673538Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-02T16:39:00.5675127Z         when same kit is allocated multiple times
2024-03-02T16:39:00.8831163Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-02T16:39:00.8832550Z   #error
2024-03-02T16:39:00.8833290Z     when the Store location organization doesn't match
2024-03-02T16:39:01.0926525Z       returns error
2024-03-02T16:39:01.0927015Z 
2024-03-02T16:39:01.0927356Z Partners::AuthorizedFamilyMember
2024-03-02T16:39:01.0928382Z   versioning
2024-03-02T16:39:01.1025005Z     is expected to be versioned
2024-03-02T16:39:01.1025732Z   associations
2024-03-02T16:39:01.1072943Z     is expected to belong to family required: true
2024-03-02T16:39:01.1109605Z     is expected to have many child_item_requests dependent => nullify
2024-03-02T16:39:01.1110598Z   #display_name
2024-03-02T16:39:01.1485403Z     should return the family member's first and last name
2024-03-02T16:39:01.1486324Z 
2024-03-02T16:39:01.1486594Z AccountRequest
2024-03-02T16:39:01.1687963Z   #confirm!
2024-03-02T16:39:01.1805062Z   #reject!
2024-03-02T16:39:01.1806067Z   associations
2024-03-02T16:39:01.1866141Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-02T16:39:01.1960824Z     is expected to have one organization class_name => Organization
2024-03-02T16:39:01.1961922Z   versioning
2024-03-02T16:39:01.1997296Z     is expected to be versioned
2024-03-02T16:39:01.1997805Z   validations
2024-03-02T16:39:01.2135122Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-02T16:39:01.2241701Z     is expected to allow :email to be â€¹"leonarda.botsford@okuneva.example"â€º
2024-03-02T16:39:01.2418862Z     is expected to validate that :email cannot be empty/falsy
2024-03-02T16:39:01.2554992Z     is expected to validate that the length of :request_details is at least 50
2024-03-02T16:39:01.2702850Z     is expected to validate that :email is case-sensitively unique
2024-03-02T16:39:01.2817085Z     is expected not to allow :email to be â€¹"not_email"â€º
2024-03-02T16:39:01.2966686Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:39:01.2968251Z     when the email provided is already used by an existing organization
2024-03-02T16:39:01.4867055Z       should not allow the email
2024-03-02T16:39:01.4868030Z     when the email provided is already used by an existing user
2024-03-02T16:39:01.5074868Z       should not allow the email
2024-03-02T16:39:01.5075695Z   #identity_token
2024-03-02T16:39:01.5169568Z     should return a JWT token that contains the id of the account_request_id
2024-03-02T16:39:01.5170722Z     when the account_request is not persisted
2024-03-02T16:39:01.5265403Z       should raise an error
2024-03-02T16:39:01.5266052Z   #processed?
2024-03-02T16:39:01.5267021Z     when the account request has no associated organization
2024-03-02T16:39:01.5352388Z       should return false
2024-03-02T16:39:01.5352977Z     when the account request has a associated organization
2024-03-02T16:39:01.7158544Z       should return true
2024-03-02T16:39:01.7159618Z   .get_by_identity_token
2024-03-02T16:39:01.7160543Z     when the identity_token corresponds to an existing AccountRequest
2024-03-02T16:39:01.7259495Z       should return the corresponding AccountRequest
2024-03-02T16:39:01.7260307Z     when the identity_token provided does not match any AccountRequest
2024-03-02T16:39:01.7294274Z       should return nil
2024-03-02T16:39:01.7295030Z 
2024-03-02T16:39:01.7295328Z AddRoleService
2024-03-02T16:39:01.7296179Z   #call
2024-03-02T16:39:01.7297415Z     when the role does not yet exist
2024-03-02T16:39:01.9224497Z       should add the role
2024-03-02T16:39:02.1330178Z       works with a partner
2024-03-02T16:39:02.3225548Z       works with super admin
2024-03-02T16:39:02.5159781Z       should add the user role when asked to add admin
2024-03-02T16:39:02.5161027Z     when the role already exists
2024-03-02T16:39:02.7101058Z       should raise an error
2024-03-02T16:39:02.9049485Z       should raise an error for super admin
2024-03-02T16:39:02.9050229Z 
2024-03-02T16:39:02.9050482Z PartnerInviteService
2024-03-02T16:39:02.9366622Z   should update the status of the partner to invited
2024-03-02T16:39:02.9668840Z   should create invite
2024-03-02T16:39:02.9669559Z   with force: true
2024-03-02T16:39:02.9972957Z     should send the force setting forward
2024-03-02T16:39:02.9973560Z 
2024-03-02T16:39:02.9973882Z DistributionsController
2024-03-02T16:39:02.9974713Z   While signed in
2024-03-02T16:39:02.9975617Z     POST #create
2024-03-02T16:39:02.9976881Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-02T16:39:03.0976159Z         redirects with a flash notice and a flash error
2024-03-02T16:39:03.0977652Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-02T16:39:03.1810819Z         redirects with a flash notice and a flash alert
2024-03-02T16:39:03.1811980Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-02T16:39:03.2517639Z         redirects with a flash notice and a flash error
2024-03-02T16:39:03.2518724Z       when line item quantity is not positive
2024-03-02T16:39:03.3066630Z         flashes an error
2024-03-02T16:39:03.3067368Z     PUT #update
2024-03-02T16:39:03.3068415Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-02T16:39:03.4198776Z         redirects with a flash notice and a flash error
2024-03-02T16:39:03.4199761Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-02T16:39:03.5305335Z         redirects with a flash notice and a flash error
2024-03-02T16:39:03.5306248Z       when distribution has items updated for minimum quantity
2024-03-02T16:39:03.6630413Z         redirects with a flash notice and send send_notification
2024-03-02T16:39:03.6631248Z 
2024-03-02T16:39:03.6631537Z ApplicationHelper
2024-03-02T16:39:03.6633780Z   step_container_helper
2024-03-02T16:39:03.6634902Z     active_index is equal to index
2024-03-02T16:39:03.6683260Z       returns active
2024-03-02T16:39:03.6684110Z     active_index is greater than index
2024-03-02T16:39:03.6726945Z       returns done
2024-03-02T16:39:03.6727794Z     active_index is less than index
2024-03-02T16:39:03.6770050Z       returns empty string
2024-03-02T16:39:03.6770776Z   default_title_content
2024-03-02T16:39:03.6772100Z     Organization does not exist
2024-03-02T16:39:03.6816296Z       returns a default name
2024-03-02T16:39:03.6817154Z     Organization exists
2024-03-02T16:39:03.8519746Z       returns the organization's name
2024-03-02T16:39:03.8520691Z   confirm_delete_msg
2024-03-02T16:39:03.8567906Z     subs in string
2024-03-02T16:39:03.8568351Z   active_class
2024-03-02T16:39:03.8610532Z     Returns the controller name
2024-03-02T16:39:03.8611111Z   flash_class
2024-03-02T16:39:03.8664392Z     returns appropriate class for success
2024-03-02T16:39:03.8704725Z     returns appropriate class for alert
2024-03-02T16:39:03.8744764Z     returns appropriate class for error
2024-03-02T16:39:03.8784851Z     returns appropriate class for notice
2024-03-02T16:39:03.8785656Z   can_administrate?
2024-03-02T16:39:03.8786796Z     User is org admin and not part of org
2024-03-02T16:39:04.0811550Z       cannot administrate
2024-03-02T16:39:04.0812188Z     User is part of org but not org admin
2024-03-02T16:39:04.0973961Z       cannot administrate
2024-03-02T16:39:04.0974705Z     User is org admin and part of org
2024-03-02T16:39:04.1184393Z       can administrate
2024-03-02T16:39:04.1185740Z 
2024-03-02T16:39:04.1185986Z InventoryItem
2024-03-02T16:39:04.1223432Z   initializes the quantity to 0 if it was not specified
2024-03-02T16:39:04.1224092Z   versioning
2024-03-02T16:39:04.1257425Z     is expected to be versioned
2024-03-02T16:39:04.1258084Z   Filtering >
2024-03-02T16:39:04.1258805Z     ->by_partner_key
2024-03-02T16:39:04.1393768Z       shows the Base Items by partner_key
2024-03-02T16:39:04.1394548Z   Validations >
2024-03-02T16:39:04.1441424Z     requires an item
2024-03-02T16:39:04.1493456Z     requires an inventory association
2024-03-02T16:39:04.1494094Z     quantity >
2024-03-02T16:39:04.1552035Z       is required
2024-03-02T16:39:04.1610184Z       is numerical
2024-03-02T16:39:04.1667203Z       is less than the max integer
2024-03-02T16:39:04.1804911Z       is gte 0
2024-03-02T16:39:04.1805984Z 
2024-03-02T16:39:04.1806533Z Partners::FetchPartnersToRemindNowService
2024-03-02T16:39:04.1807278Z   .fetch
2024-03-02T16:39:04.1808234Z     when there is a partner
2024-03-02T16:39:04.1809773Z       that does NOT have a organization with a global reminder & deadline
2024-03-02T16:39:04.1810986Z         and is a part of a partner group that does have them defined
2024-03-02T16:39:04.1811978Z           that is not for today
2024-03-02T16:39:04.2182565Z             should NOT include that partner
2024-03-02T16:39:04.2183390Z           that is for today
2024-03-02T16:39:04.2517680Z             should include that partner
2024-03-02T16:39:04.2518546Z             but the partner is deactivated
2024-03-02T16:39:04.2915636Z               should NOT include that partner
2024-03-02T16:39:04.2918251Z       that has an organization with a global reminder & deadline
2024-03-02T16:39:04.2919443Z         that is not for today
2024-03-02T16:39:04.3226268Z           should NOT include that partner
2024-03-02T16:39:04.3227178Z         AND a partner group that does have them defined
2024-03-02T16:39:04.3611508Z           should remind based on the partner group instead of the organization level reminder
2024-03-02T16:39:04.3612760Z           but the partner is deactivated
2024-03-02T16:39:04.4022223Z             should NOT include that partner
2024-03-02T16:39:04.4023233Z         that is for today
2024-03-02T16:39:04.4333444Z           should include that partner
2024-03-02T16:39:04.4334298Z           but the partner is deactivated
2024-03-02T16:39:04.4668084Z             should NOT include that partner
2024-03-02T16:39:04.4669081Z           and has send_reminder=false
2024-03-02T16:39:04.4987188Z             should NOT include that partner
2024-03-02T16:39:04.4988773Z 
2024-03-02T16:39:04.4989103Z UserInviteService
2024-03-02T16:39:04.4990383Z   with existing user
2024-03-02T16:39:04.5077284Z     should raise an error when reinviting an existing user with the same role
2024-03-02T16:39:04.6980748Z     should add roles to existing user
2024-03-02T16:39:04.6981497Z     with force: true
2024-03-02T16:39:04.7937294Z       should reinvite the user
2024-03-02T16:39:04.7938015Z   with a new user
2024-03-02T16:39:04.9878673Z     should create the user with roles
2024-03-02T16:39:04.9880411Z 
2024-03-02T16:39:04.9881002Z Partners::RequestCreateService
2024-03-02T16:39:04.9881886Z   #call
2024-03-02T16:39:04.9882807Z     when the arguments are incorrect
2024-03-02T16:39:04.9883972Z       because no item_requests_attributes and comments were defined
2024-03-02T16:39:05.0152430Z         should return the Request object with an error
2024-03-02T16:39:05.0153686Z       because a unrecogonized item_id was provided
2024-03-02T16:39:05.0459386Z         should return the Request object with an error
2024-03-02T16:39:05.0460404Z     when the arguments are correct
2024-03-02T16:39:05.0837153Z       should create a Request record
2024-03-02T16:39:05.1189577Z       should have no errors
2024-03-02T16:39:05.1546626Z       should notify the Partner via email
2024-03-02T16:39:05.1547729Z       but a unexpected error occured during the save
2024-03-02T16:39:05.1548608Z         for the Request record
2024-03-02T16:39:05.1885503Z           should NOT create a Request record
2024-03-02T16:39:05.2219155Z           should have an error with the raised error
2024-03-02T16:39:05.2549328Z           should NOT notify the Partner via email
2024-03-02T16:39:05.2550244Z 
2024-03-02T16:39:05.2550614Z PartnerGroup
2024-03-02T16:39:05.2551992Z   associations
2024-03-02T16:39:05.2615592Z     is expected to have and belong to many item_categories
2024-03-02T16:39:05.2649596Z     is expected to have many partners
2024-03-02T16:39:05.2697148Z     is expected to belong to organization required: true
2024-03-02T16:39:05.2698245Z   DB constraints
2024-03-02T16:39:05.2698850Z     deadline_day <= 28
2024-03-02T16:39:05.2769243Z       raises error if unmet
2024-03-02T16:39:05.2770846Z     reminder_day <= 28
2024-03-02T16:39:05.2839442Z       raises error if unmet
2024-03-02T16:39:05.2840366Z     send_reminders IS NOT NULL
2024-03-02T16:39:05.2908335Z       raises error if unmet
2024-03-02T16:39:05.2908995Z   Validations >
2024-03-02T16:39:05.2998400Z     requires a unique name within an organization
2024-03-02T16:39:05.3038667Z     must belong to an organization
2024-03-02T16:39:05.3270606Z     does not require a unique name between organizations
2024-03-02T16:39:05.3271766Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-02T16:39:05.3318566Z       should not be valid
2024-03-02T16:39:05.3319640Z   versioning
2024-03-02T16:39:05.3353570Z     is expected to be versioned
2024-03-02T16:39:05.3354255Z 
2024-03-02T16:39:05.3354558Z Exports::ExportRequestService
2024-03-02T16:39:05.3355673Z   .generate_csv_data
2024-03-02T16:39:05.5444204Z     includes rows for each request with correct columns of item quantity
2024-03-02T16:39:05.7437530Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-02T16:39:05.7438679Z 
2024-03-02T16:39:05.7438962Z Partners::ServedArea
2024-03-02T16:39:05.7669762Z   must only allow integer client shares
2024-03-02T16:39:05.7916624Z   must only allow valid client share values
2024-03-02T16:39:05.7964248Z   is expected to belong to partner_profile required: true
2024-03-02T16:39:05.8003788Z   is expected to belong to county required: true
2024-03-02T16:39:05.8005074Z   versioning
2024-03-02T16:39:05.8044935Z     is expected to be versioned
2024-03-02T16:39:05.8045707Z 
2024-03-02T16:39:05.8046122Z DistributionDestroyService
2024-03-02T16:39:05.8047088Z   #call
2024-03-02T16:39:05.8048217Z     when the distribution_id does match a Distribution
2024-03-02T16:39:05.8049385Z       and the destroy! operation fails
2024-03-02T16:39:06.0240876Z         should not delete the Distribution
2024-03-02T16:39:06.2276148Z         should not be successful and have the error message
2024-03-02T16:39:06.2276945Z       and the increase inventory operations fails
2024-03-02T16:39:06.4350058Z         should not delete the Distribution
2024-03-02T16:39:06.6365477Z         should not be successful and have the error message
2024-03-02T16:39:06.6366518Z       and the operations succeed
2024-03-02T16:39:06.8453944Z         should increase the inventory of the storage location
2024-03-02T16:39:07.0594587Z         should be successful
2024-03-02T16:39:07.2656967Z         should destroy the Distribution
2024-03-02T16:39:07.2660398Z     when the distribution_id matches no Distribution
2024-03-02T16:39:07.2700305Z       to not be a success
2024-03-02T16:39:07.2701038Z 
2024-03-02T16:39:07.2701405Z Reports::SummaryReportService
2024-03-02T16:39:07.2702299Z   #report
2024-03-02T16:39:07.4520852Z     should report zero values
2024-03-02T16:39:07.8932904Z     should report negative values
2024-03-02T16:39:08.3365378Z     should report positive values
2024-03-02T16:39:08.3366388Z 
2024-03-02T16:39:08.3366745Z ServiceObjectErrorsMixin
2024-03-02T16:39:08.3367418Z   self.included
2024-03-02T16:39:08.3422753Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-02T16:39:08.3423796Z 
2024-03-02T16:39:08.3424012Z Request
2024-03-02T16:39:08.3424787Z   item data
2024-03-02T16:39:08.3510789Z     coerces item quantity and id to always be an integer before saving
2024-03-02T16:39:08.3511790Z   versioning
2024-03-02T16:39:08.3547662Z     is expected to be versioned
2024-03-02T16:39:08.3548548Z   total_items
2024-03-02T16:39:08.3644428Z     adds the quantity of all items in the request
2024-03-02T16:39:08.3645491Z   Enums >
2024-03-02T16:39:08.3646187Z     #status
2024-03-02T16:39:08.3846772Z       scopes
2024-03-02T16:39:08.3847313Z 
2024-03-02T16:39:08.3847564Z EventDiffer
2024-03-02T16:39:08.5903329Z   should return a full diff
2024-03-02T16:39:08.5903878Z 
2024-03-02T16:39:08.5904182Z OrganizationUpdateService
2024-03-02T16:39:08.5905264Z   #update_partner_flags
2024-03-02T16:39:08.5913906Z     when request flags have changed
2024-03-02T16:39:08.8159770Z       should update partners when disabling quantity-based request flags
2024-03-02T16:39:09.0343543Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-02T16:39:09.2608276Z       should update partners when disabling child and individual request flags
2024-03-02T16:39:09.2609191Z     when request flags haven't changed
2024-03-02T16:39:09.6200141Z       should not update partners
2024-03-02T16:39:09.6201257Z   #update
2024-03-02T16:39:09.6201811Z     when object is invalid
2024-03-02T16:39:09.8263212Z       should not update and return false
2024-03-02T16:39:09.8264151Z     when organization has partners
2024-03-02T16:39:09.8265315Z       when all of a single partner's request flags will be disabled
2024-03-02T16:39:10.0421551Z         should add an error message to the organization
2024-03-02T16:39:10.2661124Z         should NOT change request flags in organization or its partners
2024-03-02T16:39:10.2663003Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-02T16:39:10.4917370Z         should allow the disabling of request flags in organization and its partners
2024-03-02T16:39:10.4918612Z     when object is valid
2024-03-02T16:39:10.6730923Z       should update and return true
2024-03-02T16:39:10.6731528Z 
2024-03-02T16:39:10.6731967Z Exports::ExportDistributionsCSVService
2024-03-02T16:39:10.6732998Z   #generate_csv_data
2024-03-02T16:39:10.8516119Z     should match the expected content for the csv
2024-03-02T16:39:10.8516967Z     when a new item is added
2024-03-02T16:39:11.0275572Z       should add it to the end of the row
2024-03-02T16:39:11.2134304Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-02T16:39:11.2136149Z     when there are no distributions but the report is requested
2024-03-02T16:39:11.3840928Z       returns a csv with only headers and no rows
2024-03-02T16:39:11.3841632Z 
2024-03-02T16:39:11.3842107Z ProfileUpdateService
2024-03-02T16:39:11.3842824Z   #update
2024-03-02T16:39:11.4084898Z     updates the profile with the filtered and prepared params
2024-03-02T16:39:11.4085907Z 
2024-03-02T16:39:11.4086379Z PartnerRequestRecertificationService
2024-03-02T16:39:11.4087180Z   #call
2024-03-02T16:39:11.4088136Z     when the arguments are incorrect
2024-03-02T16:39:11.4089314Z       because the partner has already been requested to recertify
2024-03-02T16:39:11.4370836Z         should return the PartnerRequestRecertificationService object with an error
2024-03-02T16:39:11.4371902Z     when the partner is deactivated
2024-03-02T16:39:11.4648425Z       does not send an email
2024-03-02T16:39:11.4649049Z     when the arguments are correct
2024-03-02T16:39:11.4956760Z       should change the partner status to approved
2024-03-02T16:39:11.5250979Z       should queue sending the notice to the partner
2024-03-02T16:39:11.5562327Z       should have no errors
2024-03-02T16:39:11.5563078Z       but a unexpected error occurred during the save
2024-03-02T16:39:11.5564914Z         for partner approval
2024-03-02T16:39:11.5824528Z           should not change the partner status to recertification_required
2024-03-02T16:39:11.6072637Z           should NOT queue sending the notice to the partner
2024-03-02T16:39:11.6319656Z           should have an error with the raised error
2024-03-02T16:39:11.6321032Z 
2024-03-02T16:39:11.6321449Z DistributionContentChangeService
2024-03-02T16:39:11.6322650Z   #any_change?
2024-03-02T16:39:11.6324154Z     when there are no changes in the line items
2024-03-02T16:39:11.6361024Z       returns true
2024-03-02T16:39:11.6361868Z     when there are line items removed
2024-03-02T16:39:11.6395126Z       returns true
2024-03-02T16:39:11.6397766Z     when there are line items removed and updated
2024-03-02T16:39:11.6431522Z       returns true
2024-03-02T16:39:11.6432188Z     when there are line items updated
2024-03-02T16:39:11.6467047Z       returns true
2024-03-02T16:39:11.6468117Z   #changes
2024-03-02T16:39:11.6468722Z     when there are line items removed and updated
2024-03-02T16:39:11.6503695Z       returns true
2024-03-02T16:39:11.6504497Z 
2024-03-02T16:39:11.6505130Z Manufacturer
2024-03-02T16:39:11.6506233Z   versioning
2024-03-02T16:39:11.6586786Z     is expected to be versioned
2024-03-02T16:39:11.6587599Z   Private Methods
2024-03-02T16:39:11.6588161Z     #exists_in_org?
2024-03-02T16:39:11.8359457Z       returns true if manufacturer exists in an organization
2024-03-02T16:39:11.8360328Z   Validations
2024-03-02T16:39:11.8449893Z     must have a unique name within organization
2024-03-02T16:39:12.0239365Z     must belong to an organization
2024-03-02T16:39:12.0240543Z   Methods
2024-03-02T16:39:12.0241028Z     volume
2024-03-02T16:39:12.1734937Z       ignores the amount of product from other manufacturers
2024-03-02T16:39:12.3109537Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-02T16:39:12.3757690Z       retrieves the amount of product that has been donated by manufacturer
2024-03-02T16:39:12.3758605Z 
2024-03-02T16:39:12.3758823Z User
2024-03-02T16:39:12.3821467Z   has a valid factory
2024-03-02T16:39:12.3822194Z   Validations >
2024-03-02T16:39:12.3905548Z     requires a name
2024-03-02T16:39:12.4087767Z     requires an email that is formatted correctly
2024-03-02T16:39:12.4088777Z   omniauth
2024-03-02T16:39:12.4221555Z     retrieves the user from an omniauth context
2024-03-02T16:39:12.4222319Z   versioning
2024-03-02T16:39:12.4257512Z     is expected to be versioned
2024-03-02T16:39:12.4258256Z   Methods >
2024-03-02T16:39:12.4706081Z     #kind
2024-03-02T16:39:12.4784216Z     #reinvitable?
2024-03-02T16:39:12.4832391Z     discarded?
2024-03-02T16:39:12.4909381Z     #invitation_status
2024-03-02T16:39:12.4910350Z   Scopes >
2024-03-02T16:39:12.4911300Z     ->alphabetized
2024-03-02T16:39:12.5288367Z       retrieves users in the correct order
2024-03-02T16:39:12.5289255Z   Scopes >
2024-03-02T16:39:12.5289931Z     ->alphabetized
2024-03-02T16:39:12.5566269Z       retrieves users in the correct order
2024-03-02T16:39:12.5571554Z 
2024-03-02T16:39:12.5571835Z Donation
2024-03-02T16:39:12.5573621Z   Scopes >
2024-03-02T16:39:12.5574408Z     during >
2024-03-02T16:39:12.5761985Z       returns all donations created between two dates
2024-03-02T16:39:12.5763063Z     by_source >
2024-03-02T16:39:12.5763987Z       when source is a symbol
2024-03-02T16:39:12.5765205Z         when source is invalid
2024-03-02T16:39:12.6015415Z           does not throw errors, returns no results
2024-03-02T16:39:12.6016458Z         when source is valid
2024-03-02T16:39:12.6187895Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-02T16:39:12.6188939Z       when source is not a symbol
2024-03-02T16:39:12.6190169Z         when source is invalid
2024-03-02T16:39:12.6359995Z           does not throw errors, returns no results
2024-03-02T16:39:12.6361061Z         when source comes from the SOURCES hash
2024-03-02T16:39:12.6530868Z           returns all donations with the provided source
2024-03-02T16:39:12.6531750Z   versioning
2024-03-02T16:39:12.6565278Z     is expected to be versioned
2024-03-02T16:39:12.6566044Z   Callbacks >
2024-03-02T16:39:12.6727294Z     automatically combines duplicate line_item records when they're created
2024-03-02T16:39:12.6855741Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:39:12.6857008Z   Associations >
2024-03-02T16:39:12.6857593Z     items >
2024-03-02T16:39:12.7015595Z       has_many
2024-03-02T16:39:12.7016171Z   Validations >
2024-03-02T16:39:12.7084245Z     requires a source from the list of available sources
2024-03-02T16:39:12.7232250Z     is invalid when the line items are invalid
2024-03-02T16:39:12.7362630Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-02T16:39:12.7483491Z     requires a product drive participant if the source is 'Product Drive'
2024-03-02T16:39:12.7599186Z     requires a donation_site if the source is 'Donation Site'
2024-03-02T16:39:12.7643590Z     must belong to an organization
2024-03-02T16:39:12.7687206Z     requires an inventory (storage location)
2024-03-02T16:39:12.7739029Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:39:12.7739919Z   Methods >
2024-03-02T16:39:12.7740411Z     source_view
2024-03-02T16:39:12.7741063Z       from a drive
2024-03-02T16:39:12.7741675Z         participant known
2024-03-02T16:39:12.7742451Z           contact name present
2024-03-02T16:39:12.7873662Z             returns participant display name
2024-03-02T16:39:12.7874453Z           no contact name
2024-03-02T16:39:12.8002555Z             returns drive display name
2024-03-02T16:39:12.8003435Z         unknown participant
2024-03-02T16:39:12.8108146Z           returns drive display name
2024-03-02T16:39:12.8108906Z       details
2024-03-02T16:39:12.8109733Z         donation site
2024-03-02T16:39:12.8265917Z           returns donation_site name
2024-03-02T16:39:12.8266850Z         manufacturer
2024-03-02T16:39:12.8372320Z           returns manufacturer name
2024-03-02T16:39:12.8374472Z         misc
2024-03-02T16:39:12.8455011Z           returns a truncated comment
2024-03-02T16:39:12.8455723Z         product drive
2024-03-02T16:39:12.8557428Z           returns product_drive name
2024-03-02T16:39:12.8558367Z       not from a drive
2024-03-02T16:39:12.8668285Z         returns source
2024-03-02T16:39:12.8668977Z     money_raised
2024-03-02T16:39:12.9307734Z       tracks the money raised in a donation
2024-03-02T16:39:12.9308551Z     remove
2024-03-02T16:39:12.9957399Z       removes the item from the donation
2024-03-02T16:39:13.0638716Z       fails gracefully if the item doesn't exist
2024-03-02T16:39:13.1243427Z       works with either an id or an object
2024-03-02T16:39:13.1245005Z   SOURCES
2024-03-02T16:39:13.1285003Z     the hash values are immutable
2024-03-02T16:39:13.1317315Z     the hash is immutable
2024-03-02T16:39:13.1352205Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-02T16:39:13.1353215Z   behaves like itemizable
2024-03-02T16:39:13.1353850Z     .line_items
2024-03-02T16:39:13.1354524Z       sorted
2024-03-02T16:39:13.1852768Z         displays the items, sorted by name
2024-03-02T16:39:13.1853710Z       quantities_by_name
2024-03-02T16:39:13.2186061Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:13.2520194Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:13.2521285Z       combine!
2024-03-02T16:39:13.2968950Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:13.3355027Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:13.3356087Z       total
2024-03-02T16:39:13.3698237Z         has an item total
2024-03-02T16:39:13.3698916Z     .to_a
2024-03-02T16:39:13.3699763Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:13.4037002Z         raises an error
2024-03-02T16:39:13.4037862Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:13.4366275Z         calls line_item_values
2024-03-02T16:39:13.4367790Z 
2024-03-02T16:39:13.4368038Z Audit
2024-03-02T16:39:13.4369422Z   Scopes >
2024-03-02T16:39:13.4866530Z     `at_location` can filter out audits to a specific location
2024-03-02T16:39:13.4867274Z   Validations >
2024-03-02T16:39:13.4960199Z     must belong to an organization admin of its organization
2024-03-02T16:39:13.5482307Z     can have line items that has quantity as zero
2024-03-02T16:39:13.5996375Z     can not have line items that has quantity as negative integer
2024-03-02T16:39:13.6540960Z     can have line items that has quantity as a positive integer
2024-03-02T16:39:13.6820930Z     must belong to an organization
2024-03-02T16:39:13.7339623Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-02T16:39:13.7845870Z     cannot have duplicate line items
2024-03-02T16:39:13.7846788Z   versioning
2024-03-02T16:39:13.7880516Z     is expected to be versioned
2024-03-02T16:39:13.7881303Z   behaves like itemizable
2024-03-02T16:39:13.7882040Z     .line_items
2024-03-02T16:39:13.7882643Z       total
2024-03-02T16:39:13.8732251Z         has an item total
2024-03-02T16:39:13.8733017Z       combine!
2024-03-02T16:39:13.9119310Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:13.9659355Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:13.9660386Z       sorted
2024-03-02T16:39:14.0786251Z         displays the items, sorted by name
2024-03-02T16:39:14.0787293Z       quantities_by_name
2024-03-02T16:39:14.1584888Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:14.2396905Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:14.2397811Z     .to_a
2024-03-02T16:39:14.2398386Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:14.2893894Z         calls line_item_values
2024-03-02T16:39:14.2894739Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:14.3373792Z         raises an error
2024-03-02T16:39:14.3374726Z   Methods >
2024-03-02T16:39:14.5761065Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-02T16:39:14.9106364Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-02T16:39:14.9107414Z 
2024-03-02T16:39:14.9107547Z Kit
2024-03-02T16:39:15.1103333Z   deactivate and reactivate
2024-03-02T16:39:15.1104538Z   #can_deactivate?
2024-03-02T16:39:15.1105167Z     with inventory items
2024-03-02T16:39:15.3351017Z       should return false
2024-03-02T16:39:15.3351651Z     without inventory items
2024-03-02T16:39:15.5328618Z       should return true
2024-03-02T16:39:15.5329696Z   Validations >
2024-03-02T16:39:15.7353004Z     requires a unique name
2024-03-02T16:39:15.7521049Z     requires a name
2024-03-02T16:39:15.7684135Z     must belong to an organization
2024-03-02T16:39:15.7847981Z     is valid as built
2024-03-02T16:39:15.8017945Z     can't have negative value
2024-03-02T16:39:15.8183904Z     requires at least one item
2024-03-02T16:39:15.8184764Z   Filtering >
2024-03-02T16:39:16.3808342Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T16:39:16.3844151Z     can filter
2024-03-02T16:39:16.3845146Z     ->by_partner_key
2024-03-02T16:39:16.6204025Z       shows the kits for a particular item
2024-03-02T16:39:16.6205298Z   versioning
2024-03-02T16:39:16.6241197Z     is expected to be versioned
2024-03-02T16:39:16.6242062Z   Value >
2024-03-02T16:39:16.6393743Z     converts dollars to cents
2024-03-02T16:39:16.6543599Z     converts cents to dollars
2024-03-02T16:39:16.6544680Z     .value_per_itemizable
2024-03-02T16:39:16.6976059Z       calculates values from associated items
2024-03-02T16:39:16.6976681Z 
2024-03-02T16:39:16.6977133Z Partners::Child
2024-03-02T16:39:16.6978138Z   associations
2024-03-02T16:39:16.7104557Z     is expected to belong to family required: true
2024-03-02T16:39:16.7144048Z     is expected to have many child_item_requests dependent => destroy
2024-03-02T16:39:16.7145155Z   versioning
2024-03-02T16:39:16.7181407Z     is expected to be versioned
2024-03-02T16:39:16.7182224Z   #display_name
2024-03-02T16:39:16.7479269Z     should return a child's first and last name
2024-03-02T16:39:16.7480300Z 
2024-03-02T16:39:16.7480631Z Organization
2024-03-02T16:39:16.7486329Z   default storage location
2024-03-02T16:39:16.7527787Z     associates the default storage location with a storage location
2024-03-02T16:39:16.7561946Z     returns nil when not set
2024-03-02T16:39:16.7562639Z   after_create
2024-03-02T16:39:16.7759678Z     should update the state of the account request
2024-03-02T16:39:16.7760613Z   total_inventory
2024-03-02T16:39:16.9512138Z     returns 0 if there is nothing
2024-03-02T16:39:17.1898467Z     returns a sum total of all inventory at all storage locations
2024-03-02T16:39:17.1900162Z   #short_name
2024-03-02T16:39:17.1974167Z     can only contain valid characters
2024-03-02T16:39:17.1974958Z   valid_items
2024-03-02T16:39:17.3732891Z     returns an array of item partner keys
2024-03-02T16:39:17.5511826Z     only shows active valid items
2024-03-02T16:39:17.5512940Z     with invisible items
2024-03-02T16:39:17.5797460Z       only shows active and visible items
2024-03-02T16:39:17.5798224Z   address
2024-03-02T16:39:17.5838140Z     does not add any separators after street when city, state, and zip are missing
2024-03-02T16:39:17.5873039Z     returns an empty string when the org has no address components
2024-03-02T16:39:17.5905901Z     correctly formats an address string with commas and spaces
2024-03-02T16:39:17.5942107Z     does not add any separators before the city when street is missing
2024-03-02T16:39:17.5975809Z     does not add a trailing space when the zip code is missing
2024-03-02T16:39:17.5977608Z   #ordered_requests
2024-03-02T16:39:17.7878703Z     puts active requests before fulfilled requests
2024-03-02T16:39:17.7879590Z     ordering of requests with matching status
2024-03-02T16:39:17.9783443Z       puts the most recently updated request before older requests
2024-03-02T16:39:17.9784375Z   geocode
2024-03-02T16:39:18.1561120Z     adds coordinates to the database
2024-03-02T16:39:18.1561992Z   deadline_day
2024-03-02T16:39:18.1671033Z     can only contain numbers 1-28
2024-03-02T16:39:18.1671934Z   from_email
2024-03-02T16:39:18.3584711Z     returns admin email when it's empty space
2024-03-02T16:39:18.5330453Z     returns email when present
2024-03-02T16:39:18.7234300Z     returns admin email when not present
2024-03-02T16:39:18.9177356Z     returns admin email when it's empty
2024-03-02T16:39:18.9178534Z   is_active
2024-03-02T16:39:19.2815528Z     returns active organizations
2024-03-02T16:39:19.2816664Z   reminder_day
2024-03-02T16:39:19.2932732Z     can only contain numbers 1-28
2024-03-02T16:39:19.2933510Z   versioning
2024-03-02T16:39:19.2967213Z     is expected to be versioned
2024-03-02T16:39:19.2968083Z   earliest reporting year
2024-03-02T16:39:19.5367005Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-02T16:39:19.7180183Z     is the organization created year if no associated data
2024-03-02T16:39:19.7181103Z   validations
2024-03-02T16:39:19.8948403Z     validates that short names are unique
2024-03-02T16:39:19.9033854Z     validates that attachments are png or jpgs
2024-03-02T16:39:19.9136642Z     validates that at least one distribution type is enabled
2024-03-02T16:39:19.9200932Z     validates that attachment file size is not higher than 1 MB
2024-03-02T16:39:19.9201960Z   #assign_attributes_from_account_request
2024-03-02T16:39:19.9289908Z     should assign the proper attributes to the organization
2024-03-02T16:39:19.9291268Z   #seed_items
2024-03-02T16:39:20.1114779Z     allows a single base item to be seeded
2024-03-02T16:39:20.3039899Z     allows a collection of items to be seeded
2024-03-02T16:39:20.3040774Z     when given an item that already exists
2024-03-02T16:39:20.4913366Z       gracefully skips the item
2024-03-02T16:39:20.4914478Z     when given an item name that already exists, but with an 'other' partner key
2024-03-02T16:39:20.6772343Z       updates the old item to use the new base item as its base
2024-03-02T16:39:20.6773283Z   Associations >
2024-03-02T16:39:20.6822386Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-02T16:39:20.6857046Z     is expected to have many users through roles
2024-03-02T16:39:20.6903098Z     is expected to have many item_categories
2024-03-02T16:39:20.6903922Z     users
2024-03-02T16:39:20.6904746Z       when a organizaton has a user that has two roles
2024-03-02T16:39:20.8817163Z         should returns users without duplications
2024-03-02T16:39:20.8818242Z     items
2024-03-02T16:39:20.8818776Z       .during
2024-03-02T16:39:22.8532401Z         return ranking of all items
2024-03-02T16:39:22.8533067Z       .other
2024-03-02T16:39:24.8213375Z         returns all items for this organization designated 'other'
2024-03-02T16:39:24.8214379Z       .during.top
2024-03-02T16:39:26.7986857Z         return just 3 elements
2024-03-02T16:39:28.7771238Z         return 3 most used items
2024-03-02T16:39:28.7772008Z       .during.bottom
2024-03-02T16:39:30.9284911Z         return just 3 elements
2024-03-02T16:39:32.9067476Z         return 3 least used items
2024-03-02T16:39:32.9068351Z     distributions
2024-03-02T16:39:32.9068906Z       upcoming
2024-03-02T16:39:32.9818630Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-02T16:39:32.9819404Z     barcode_items
2024-03-02T16:39:33.1800926Z       returns only this organization's barcodes, no globals
2024-03-02T16:39:33.1802064Z       .all
2024-03-02T16:39:33.3656175Z         includes global barcode items also
2024-03-02T16:39:33.3656927Z   .seed_items
2024-03-02T16:39:33.3657454Z     when no organization is provided
2024-03-02T16:39:33.9990958Z       updates all organizations
2024-03-02T16:39:33.9991624Z     when provided with an organization to seed
2024-03-02T16:39:34.3250235Z       loads the base items into Item records
2024-03-02T16:39:34.3257939Z 
2024-03-02T16:39:34.3258457Z Item
2024-03-02T16:39:34.3260206Z   Methods >
2024-03-02T16:39:34.3261176Z     barcoded_items >
2024-03-02T16:39:34.3658301Z       returns a collection of items that have barcodes associated with them
2024-03-02T16:39:34.3659423Z     other?
2024-03-02T16:39:34.3805470Z       is true for items that are partner_key 'other'
2024-03-02T16:39:34.3810108Z     destroy
2024-03-02T16:39:34.5978557Z       deactivates the kit if it exists
2024-03-02T16:39:34.6153988Z       actually destroys an item that doesn't have history
2024-03-02T16:39:34.6384750Z       only hides an item that has history
2024-03-02T16:39:34.6385694Z     has_history?
2024-03-02T16:39:34.7100847Z       identifies items that have been used previously
2024-03-02T16:39:34.7101919Z     storage_locations_containing
2024-03-02T16:39:34.7456673Z       retrieves all storage locations that contain an item
2024-03-02T16:39:34.7459721Z     barcodes_for
2024-03-02T16:39:34.7656533Z       retrieves all BarcodeItems associated with an item
2024-03-02T16:39:34.7657375Z     #reactivate!
2024-03-02T16:39:34.7658130Z       given an array of item ids
2024-03-02T16:39:34.7873642Z         sets the active trait to true for all of them
2024-03-02T16:39:34.7874420Z       given a single item id
2024-03-02T16:39:34.8009793Z         sets the active trait to true for that item
2024-03-02T16:39:34.8010613Z   after update
2024-03-02T16:39:34.8011151Z     when item has the kit
2024-03-02T16:39:35.0050115Z       updates kit name
2024-03-02T16:39:35.0050830Z     when item does not have kit
2024-03-02T16:39:35.0180944Z       does not raise any errors
2024-03-02T16:39:35.0181886Z   versioning
2024-03-02T16:39:35.0218192Z     is expected to be versioned
2024-03-02T16:39:35.0218889Z   Assocations >
2024-03-02T16:39:35.0265871Z     is expected to belong to item_category optional: true
2024-03-02T16:39:35.0266797Z   Filtering >
2024-03-02T16:39:35.0301847Z     can filter
2024-03-02T16:39:35.0581014Z     ->active shows items that are still active
2024-03-02T16:39:35.0766458Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T16:39:35.0972995Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-02T16:39:35.0974117Z     ->by_partner_key
2024-03-02T16:39:35.1124521Z       filters by partner key
2024-03-02T16:39:35.1362569Z     ->cloth_diapers
2024-03-02T16:39:35.1453539Z       returns records associated with disposable diapers
2024-03-02T16:39:35.1454223Z     ->by_base_item
2024-03-02T16:39:35.3387201Z       can be chained to organization to constrain it to just 1 org's items
2024-03-02T16:39:35.3556885Z       shows the items for a particular base_item
2024-03-02T16:39:35.3557671Z     ->disposable
2024-03-02T16:39:35.3893405Z       returns records associated with disposable diapers
2024-03-02T16:39:35.3894545Z   default_quantity
2024-03-02T16:39:35.3993919Z     should return the value of distribution_quantity if it is set
2024-03-02T16:39:35.4082605Z     should return 50 if column is not set
2024-03-02T16:39:35.4174892Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-02T16:39:35.4260197Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-02T16:39:35.4260976Z   Validations >
2024-03-02T16:39:35.4381528Z     requires that items quantity are not a negative number
2024-03-02T16:39:35.4520921Z     requires a unique name
2024-03-02T16:39:35.4576505Z     must belong to an organization
2024-03-02T16:39:35.4624722Z     requires a Base Item base
2024-03-02T16:39:35.4625321Z   distribution_quantity and package size
2024-03-02T16:39:35.4751978Z     have nil values if an empty string is passed
2024-03-02T16:39:35.4752554Z 
2024-03-02T16:39:35.4752739Z OrganizationMailer
2024-03-02T16:39:35.4753773Z   #partner_approval_request
2024-03-02T16:39:35.5026535Z     includes a link to the relevant partner
2024-03-02T16:39:35.5259417Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:39:35.5498836Z     renders the body with correct text with partner information
2024-03-02T16:39:35.5499479Z 
2024-03-02T16:39:35.5499740Z DistributionByCountyReportService
2024-03-02T16:39:35.5500528Z   get_breakdown
2024-03-02T16:39:35.7356609Z     handles multiple partners with overlapping service areas properly
2024-03-02T16:39:35.8075085Z     will have 100% unspecified shows if no served_areas
2024-03-02T16:39:35.8931315Z     divides the item numbers and values according to the partner profile
2024-03-02T16:39:35.8932051Z 
2024-03-02T16:39:35.8932294Z BaseItem
2024-03-02T16:39:35.8933867Z   Associations >
2024-03-02T16:39:35.9060716Z     keeps count of its associated items
2024-03-02T16:39:35.9061258Z   versioning
2024-03-02T16:39:35.9096640Z     is expected to be versioned
2024-03-02T16:39:35.9097148Z   Validations >
2024-03-02T16:39:35.9142932Z     is invalid without a name
2024-03-02T16:39:35.9187257Z     is invalid without a partner key
2024-03-02T16:39:35.9255206Z     is invalid without a unique name
2024-03-02T16:39:35.9324404Z     is invalid without a uniqueness key
2024-03-02T16:39:35.9325251Z   Filtering >
2024-03-02T16:39:35.9326261Z     ->by_partner_key
2024-03-02T16:39:35.9377917Z       shows the Base Items by partner_key
2024-03-02T16:39:35.9378626Z     ->without_kit
2024-03-02T16:39:35.9430077Z       should not include the Kit BaseItem
2024-03-02T16:39:35.9430822Z 
2024-03-02T16:39:35.9431171Z ItemizableUpdateService
2024-03-02T16:39:35.9432331Z   increases
2024-03-02T16:39:36.0950249Z     should update quantity in same storage location
2024-03-02T16:39:36.2481245Z     should update quantity in different locations
2024-03-02T16:39:36.2482339Z   decreases
2024-03-02T16:39:36.3978691Z     should update quantity in different locations
2024-03-02T16:39:36.5393938Z     should update quantity in same storage location
2024-03-02T16:39:36.5394650Z 
2024-03-02T16:39:36.5394846Z Question
2024-03-02T16:39:36.5396939Z   scope for_partners
2024-03-02T16:39:36.5739218Z     should filter out questions that aren't meant for partners
2024-03-02T16:39:36.5739962Z   versioning
2024-03-02T16:39:36.5777055Z     is expected to be versioned
2024-03-02T16:39:36.5777624Z   validations
2024-03-02T16:39:36.5840282Z     is expected to validate that :title cannot be empty/falsy
2024-03-02T16:39:36.5896851Z     is expected to validate that :answer cannot be empty/falsy
2024-03-02T16:39:36.5998643Z     question for_banks and for_partners attributes can't both be false
2024-03-02T16:39:36.5999344Z   punctuate
2024-03-02T16:39:36.6039154Z     should punctuate each string in a given array
2024-03-02T16:39:36.6039790Z   scope for_banks
2024-03-02T16:39:36.6270097Z     should filter out questions that aren't meant for banks
2024-03-02T16:39:36.6270852Z   remove_redundant_error
2024-03-02T16:39:36.6382643Z     should return an array with only one error message related to the checkboxes.
2024-03-02T16:39:36.6383677Z 
2024-03-02T16:39:36.6383855Z ProductDrive
2024-03-02T16:39:36.7943209Z   calculates in-kind value
2024-03-02T16:39:37.0340734Z   calculates donation quantity by date
2024-03-02T16:39:37.2717705Z   calculates and returns all donated organization item quantities by name and date
2024-03-02T16:39:37.7964433Z   calculates and returns all donated organization item quantities by category and date
2024-03-02T16:39:37.9428650Z   calculates donation quantity
2024-03-02T16:39:37.9429424Z   donation_source_view
2024-03-02T16:39:38.0993846Z     returns formatted text
2024-03-02T16:39:38.0994470Z   distinct_items
2024-03-02T16:39:38.4563593Z     counts the distinct items correctly by given date
2024-03-02T16:39:38.8120649Z     counts the distinct items correctly in overlapping donations
2024-03-02T16:39:39.1541978Z     counts the items correctly for 1 donation with multiple items
2024-03-02T16:39:39.5188581Z     counts the distinct items correctly by given category
2024-03-02T16:39:39.8793133Z     doesn't double_count the items if there are two donations for the same item
2024-03-02T16:39:39.8794069Z   versioning
2024-03-02T16:39:40.0212704Z     is expected to be versioned
2024-03-02T16:39:40.0215087Z   associations
2024-03-02T16:39:40.1115788Z     has_many donations
2024-03-02T16:39:40.2000835Z     has_many product_drive_participants through donations
2024-03-02T16:39:40.2001604Z   validations
2024-03-02T16:39:40.3443672Z     is expected not to be valid
2024-03-02T16:39:40.4831731Z     is expected not to be valid
2024-03-02T16:39:40.6298857Z     is expected not to be valid
2024-03-02T16:39:40.6299487Z   .search_date_range
2024-03-02T16:39:40.7751963Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-02T16:39:40.7752495Z   scopes
2024-03-02T16:39:40.7753212Z     .by_item_category_id
2024-03-02T16:39:41.1081529Z       returns the product_drive with name some_name
2024-03-02T16:39:41.4426195Z       does not return other_name
2024-03-02T16:39:41.4426855Z     .within_date_range
2024-03-02T16:39:41.5946723Z       does not include product drive 2
2024-03-02T16:39:41.7402560Z       returns the product drive 1
2024-03-02T16:39:41.7403186Z     .by_name
2024-03-02T16:39:41.8827048Z       returns the product_drive with name some_name
2024-03-02T16:39:42.0405702Z       does not return other_name
2024-03-02T16:39:42.0406403Z 
2024-03-02T16:39:42.0406618Z DonationDestroyService
2024-03-02T16:39:42.0407762Z   #call
2024-03-02T16:39:42.0409661Z     when the donation succesfully gets destroyed
2024-03-02T16:39:42.0686105Z       to be a success
2024-03-02T16:39:42.0686889Z     when storage_location fails to decrease the inventory of the donation
2024-03-02T16:39:42.0741010Z       to not be a success
2024-03-02T16:39:42.0741591Z     when the donation destroy fails
2024-03-02T16:39:42.0789851Z       to not be a success
2024-03-02T16:39:42.0790620Z     when the donation_id matches no Donation owned by the organization
2024-03-02T16:39:42.0831090Z       to not be a success
2024-03-02T16:39:42.0831746Z     when the organization_id matches no Organization
2024-03-02T16:39:42.0869847Z       to not be a success
2024-03-02T16:39:42.0871600Z 
2024-03-02T16:39:42.0872021Z ItemsController
2024-03-02T16:39:42.0872833Z   While not signed in
2024-03-02T16:39:42.0964183Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:42.0964971Z   While signed in
2024-03-02T16:39:42.0966460Z     GET #show
2024-03-02T16:39:42.1171079Z       returns http success
2024-03-02T16:39:42.1171602Z     GET #new
2024-03-02T16:39:42.1278795Z       returns http success
2024-03-02T16:39:42.1279341Z     PATCH #remove_category
2024-03-02T16:39:42.3279904Z       should redirect to the previous category page
2024-03-02T16:39:42.5193361Z       should remove an item's category
2024-03-02T16:39:42.5194231Z     GET #index
2024-03-02T16:39:42.5372881Z       returns http success
2024-03-02T16:39:42.5373422Z     POST #create
2024-03-02T16:39:42.5374158Z       with valid params
2024-03-02T16:39:42.5552233Z         should accept params with dollar signs, periods, and commas
2024-03-02T16:39:42.5728604Z         should redirect to the item page
2024-03-02T16:39:42.5911147Z         should create an item
2024-03-02T16:39:42.5911720Z       with invalid params
2024-03-02T16:39:42.6050849Z         should show an error
2024-03-02T16:39:42.6051399Z     PATCH #restore
2024-03-02T16:39:42.6052583Z       with another organizations item
2024-03-02T16:39:42.7938938Z         does nothing
2024-03-02T16:39:42.7939499Z       with an active item
2024-03-02T16:39:42.8151770Z         does nothing
2024-03-02T16:39:42.8152547Z       with a soft-deleted item
2024-03-02T16:39:42.8359896Z         re-activates the item
2024-03-02T16:39:42.8360508Z     Looking at a different organization
2024-03-02T16:39:43.0097020Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:43.0097873Z     PUT #update
2024-03-02T16:39:43.0098273Z       invisible
2024-03-02T16:39:43.0294614Z         should update visible_to_partners to false
2024-03-02T16:39:43.0295314Z       visible
2024-03-02T16:39:43.0481081Z         should update visible_to_partners to true
2024-03-02T16:39:43.0481702Z     GET #edit
2024-03-02T16:39:43.0634272Z       returns http success
2024-03-02T16:39:43.0634879Z     DELETE #destroy
2024-03-02T16:39:43.0857125Z       redirects to #index
2024-03-02T16:39:43.0857870Z 
2024-03-02T16:39:43.0858080Z ItemsOutTotalQuery
2024-03-02T16:39:43.0859020Z   items_out_total_query
2024-03-02T16:39:43.2119093Z     returns a sum total of all out-flows
2024-03-02T16:39:43.2119537Z 
2024-03-02T16:39:43.2119662Z DistributionReminder
2024-03-02T16:39:43.2120451Z   conditionally sending the emails
2024-03-02T16:39:43.2429145Z     sends mail for future distributions where the partner wants reminders
2024-03-02T16:39:43.2715629Z     does not send mail for future distributions if the partner wants no reminders
2024-03-02T16:39:43.2997724Z     sends mail for future distributions
2024-03-02T16:39:43.3270074Z     does not send mail for past distributions
2024-03-02T16:39:43.3271821Z     when the partner is deactivated
2024-03-02T16:39:43.3559466Z       does not send mail
2024-03-02T16:39:43.3560136Z     when the distribution_id does not match any Distribution
2024-03-02T16:39:43.3606452Z       does not send mail for non existent distributions
2024-03-02T16:39:43.3607084Z 
2024-03-02T16:39:43.3607270Z Deadlinable
2024-03-02T16:39:43.3608090Z   validations
2024-03-02T16:39:43.3687889Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-02T16:39:43.3733749Z     validates that reminder day is not the same as deadline day
2024-03-02T16:39:43.3808392Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-02T16:39:43.3810076Z 
2024-03-02T16:39:43.3810280Z Reports::PartnerInfoReportService
2024-03-02T16:39:43.3810686Z   #report
2024-03-02T16:39:43.5557284Z     should report zero values
2024-03-02T16:39:43.8120622Z     should report normal values (FAILED - 1)
2024-03-02T16:39:43.8121164Z 
2024-03-02T16:39:43.8121332Z DonationsController
2024-03-02T16:39:43.8123386Z   calculating total money raised for all donations
2024-03-02T16:39:43.8265479Z     correctly calculates the total
2024-03-02T16:39:43.8304075Z     returns zero for an empty array of donations
2024-03-02T16:39:43.8304788Z   While signed in as a normal user >
2024-03-02T16:39:43.8305990Z     GET #index
2024-03-02T16:39:43.8465978Z       returns http success
2024-03-02T16:39:43.8466502Z     GET #edit
2024-03-02T16:39:43.8658627Z       returns http success
2024-03-02T16:39:43.8659156Z     GET #new
2024-03-02T16:39:43.8780973Z       returns http success
2024-03-02T16:39:43.8781528Z     POST#create
2024-03-02T16:39:43.8953984Z       renders GET#new with error on failure
2024-03-02T16:39:43.9343964Z       redirects to GET#edit on success
2024-03-02T16:39:43.9344427Z     PUT#update
2024-03-02T16:39:43.9668245Z       redirects to index after update
2024-03-02T16:39:44.0836367Z       updates storage quantity correctly
2024-03-02T16:39:44.0837097Z       when changing storage location
2024-03-02T16:39:44.0880642Z         rolls back updates if quantity would go below 0
2024-03-02T16:39:44.2017658Z         updates storage quantity correctly
2024-03-02T16:39:44.2018357Z       when removing a line item
2024-03-02T16:39:44.3060245Z         updates storage invetory item quantity correctly
2024-03-02T16:39:44.3060785Z     GET #show
2024-03-02T16:39:44.3220739Z       returns http success
2024-03-02T16:39:44.3221159Z     DELETE #destroy
2024-03-02T16:39:44.3371582Z       redirects to the dashboard path
2024-03-02T16:39:44.3372317Z   While signed in as an organization admin >
2024-03-02T16:39:44.3373061Z     DELETE #destroy
2024-03-02T16:39:44.3676027Z       redirects to the index
2024-03-02T16:39:44.3676656Z   calculating total value of multiple donations
2024-03-02T16:39:44.3713238Z     returns zero for an empty array of donations
2024-03-02T16:39:44.5130990Z     works correctly for multiple line items per donation
2024-03-02T16:39:44.5131617Z 
2024-03-02T16:39:44.5131802Z PartnerCreateService
2024-03-02T16:39:44.5132672Z   #call
2024-03-02T16:39:44.6948874Z     should return an instance of itself
2024-03-02T16:39:44.6949583Z     when the arguments are valid
2024-03-02T16:39:44.8832292Z       should create the associated partner profile data
2024-03-02T16:39:45.0693139Z       should create a new partner record with the organization provided
2024-03-02T16:39:45.0694181Z       but there was an unexpected issue with saving the
2024-03-02T16:39:45.0694882Z         Partner record
2024-03-02T16:39:45.2558026Z           should not create the partner record for the organization
2024-03-02T16:39:45.4445653Z           should not create the associated partner records
2024-03-02T16:39:45.4446387Z         Partners::Profile record
2024-03-02T16:39:45.6207328Z           should not create the partner record for the organization
2024-03-02T16:39:45.8074130Z           should not create the associated partner records
2024-03-02T16:39:45.8074984Z     when the arguments are incorrect
2024-03-02T16:39:45.8075669Z       beacuse the partner_attrs are invalid
2024-03-02T16:39:45.9882127Z         should contain errors related to invalid partner attributes
2024-03-02T16:39:45.9882978Z 
2024-03-02T16:39:45.9883147Z ItemsInTotalQuery
2024-03-02T16:39:45.9884332Z   items_in_total_query
2024-03-02T16:39:46.2255737Z     does not count transfers going in the negative direction
2024-03-02T16:39:46.5284518Z     does not count donations, purchases, adjustments to other storage locations
2024-03-02T16:39:46.6921044Z     returns a sum total of all in-flows
2024-03-02T16:39:46.9070415Z     does not count negative adjustments towards in-flow
2024-03-02T16:39:47.2729582Z     counts shared items together
2024-03-02T16:39:47.2731764Z 
2024-03-02T16:39:47.2732034Z Reports::AcquisitionReportService
2024-03-02T16:39:47.2732900Z   acquisition report
2024-03-02T16:39:48.2036574Z     should return the proper results on #report
2024-03-02T16:39:48.2037175Z 
2024-03-02T16:39:48.2037395Z CustomDeviseMailer
2024-03-02T16:39:48.2039484Z   #invitation_instructions
2024-03-02T16:39:48.2042172Z     when user is invited
2024-03-02T16:39:48.2239929Z       invites to user
2024-03-02T16:39:48.2426740Z       has invite expiration message
2024-03-02T16:39:48.2427362Z     when partner is invited
2024-03-02T16:39:48.2858381Z       invites to primary user
2024-03-02T16:39:48.2858990Z     when other partner users invited
2024-03-02T16:39:48.3284502Z       invites to partner user
2024-03-02T16:39:48.3286382Z 
2024-03-02T16:39:48.3286664Z StorageLocation
2024-03-02T16:39:48.3288065Z   Methods >
2024-03-02T16:39:48.3289827Z     geocode
2024-03-02T16:39:48.3422407Z       adds coordinates to the database
2024-03-02T16:39:48.3423081Z     csv_export_attributes
2024-03-02T16:39:48.4160733Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-02T16:39:48.4162060Z     import_inventory
2024-03-02T16:39:48.7897907Z       imports storage locations from a csv file
2024-03-02T16:39:48.7898686Z     increase_inventory
2024-03-02T16:39:48.7899245Z       when increasing with an inactive item
2024-03-02T16:39:48.9664750Z         re-activates the item as part of the creation process
2024-03-02T16:39:49.1921826Z       With existing inventory
2024-03-02T16:39:49.1922638Z         increases inventory quantities from an itemizable object
2024-03-02T16:39:49.1923503Z       when providing a new item that does not yet exist
2024-03-02T16:39:49.3179361Z         creates those new inventory items in the storage location
2024-03-02T16:39:49.3180124Z     import_csv
2024-03-02T16:39:49.3299486Z       imports storage locations from a csv file
2024-03-02T16:39:49.3300185Z     decrease_inventory
2024-03-02T16:39:49.4349925Z       decreases inventory quantities from an itemizable object
2024-03-02T16:39:49.4350864Z       when there is insufficient inventory available
2024-03-02T16:39:49.4434084Z         gives informative errors
2024-03-02T16:39:49.4513060Z         does not change inventory quantities if there is an error
2024-03-02T16:39:49.4513923Z     inventory_total_value_in_dollars
2024-03-02T16:39:49.4982715Z       returns total value of all items in this storage location
2024-03-02T16:39:49.5097435Z       returns 0 when there are no items in this storage location
2024-03-02T16:39:49.5479308Z       returns a value including cents if the total isn't an even dollar amount
2024-03-02T16:39:49.5480193Z     size
2024-03-02T16:39:49.5953177Z       returns total quantity of all items in this storage location
2024-03-02T16:39:49.5954003Z     StorageLocation.items_inventoried
2024-03-02T16:39:49.6787153Z       returns a collection of items that are stored within inventories
2024-03-02T16:39:49.6788151Z     item_total
2024-03-02T16:39:49.7191856Z       retrieves the total for a single item
2024-03-02T16:39:49.7192555Z   Validations >
2024-03-02T16:39:49.7265155Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:39:49.7331695Z     is expected to validate that :address cannot be empty/falsy
2024-03-02T16:39:49.7393048Z     is expected to validate that :organization cannot be empty/falsy
2024-03-02T16:39:49.7393998Z   Callbacks >
2024-03-02T16:39:49.7394459Z     before_destroy
2024-03-02T16:39:49.7793774Z       does not delete storage locations with inventory items on it
2024-03-02T16:39:49.8430922Z       deletes storage locations with no inventory items on it
2024-03-02T16:39:49.8431672Z   Filtering >
2024-03-02T16:39:49.9119761Z     ->containing yields only inventories that have that item
2024-03-02T16:39:49.9207122Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-02T16:39:49.9207996Z   versioning
2024-03-02T16:39:49.9241492Z     is expected to be versioned
2024-03-02T16:39:49.9242255Z 
2024-03-02T16:39:49.9242509Z Vendor
2024-03-02T16:39:49.9243787Z   versioning
2024-03-02T16:39:49.9279502Z     is expected to be versioned
2024-03-02T16:39:49.9280107Z   behaves like provideable
2024-03-02T16:39:49.9280770Z     Validations
2024-03-02T16:39:49.9340708Z       is invalid unless it has either a contact name or a business name
2024-03-02T16:39:49.9377537Z       is invalid without an organization
2024-03-02T16:39:49.9378152Z     geocode
2024-03-02T16:39:49.9432881Z       adds coordinates to the database
2024-03-02T16:39:49.9433472Z     import_csv
2024-03-02T16:39:50.1221328Z       imports from a csv file
2024-03-02T16:39:50.1221756Z   Methods
2024-03-02T16:39:50.1222317Z     volume
2024-03-02T16:39:50.1908907Z       retrieves the amount of product that has been bought from this vendor
2024-03-02T16:39:50.1909636Z 
2024-03-02T16:39:50.1909821Z ReminderDeadlineMailer
2024-03-02T16:39:50.1910597Z   notify deadline
2024-03-02T16:39:50.2199287Z     renders the sender email
2024-03-02T16:39:50.2468360Z     renders the subject
2024-03-02T16:39:50.2736213Z     renders the body
2024-03-02T16:39:50.2995150Z     renders the receiver email
2024-03-02T16:39:50.2996039Z 
2024-03-02T16:39:50.2996258Z DispersedPastDatesGenerator
2024-03-02T16:39:50.2997361Z   #next
2024-03-02T16:39:50.3047995Z     returns equally dispersed dates between all time ranges
2024-03-02T16:39:50.3048729Z   constants
2024-03-02T16:39:50.3081753Z     has 4 day ranges for generation of past dates
2024-03-02T16:39:50.3082286Z 
2024-03-02T16:39:50.3082538Z Reports::ChildrenServedReportService
2024-03-02T16:39:50.3083388Z   #report
2024-03-02T16:39:50.4885097Z     should report zero values
2024-03-02T16:39:50.9916247Z     should report normal values
2024-03-02T16:39:51.4844865Z     should work with no distribution_quantity
2024-03-02T16:39:51.4845431Z 
2024-03-02T16:39:51.4845628Z RequestsConfirmationMailer
2024-03-02T16:39:51.5139596Z   pairs the right quantities with the right item names
2024-03-02T16:39:51.5306526Z   handles duplicates
2024-03-02T16:39:51.5307036Z   #confirmation_email
2024-03-02T16:39:51.5434718Z     renders the headers
2024-03-02T16:39:51.5603243Z     renders the body
2024-03-02T16:39:51.5605753Z 
2024-03-02T16:39:51.5606024Z Distribution
2024-03-02T16:39:51.5607475Z   versioning
2024-03-02T16:39:51.5644039Z     is expected to be versioned
2024-03-02T16:39:51.5644828Z   CSV export >
2024-03-02T16:39:51.5645608Z     for_csv_export >
2024-03-02T16:39:51.9102410Z       filters only to the given organization
2024-03-02T16:39:52.2574342Z       filters only to the given filter
2024-03-02T16:39:52.5893481Z       filters only to the given issue time range
2024-03-02T16:39:52.5894069Z     csv_export_attributes
2024-03-02T16:39:52.9948340Z       returns the set of attributes which define a row in case of distribution export
2024-03-02T16:39:52.9949204Z   Methods >
2024-03-02T16:39:52.9949694Z     #future?
2024-03-02T16:39:52.9950676Z       when issued_at has passed
2024-03-02T16:39:53.0216405Z         returns false
2024-03-02T16:39:53.0216931Z       when issued_at has not passed
2024-03-02T16:39:53.0486004Z         returns true
2024-03-02T16:39:53.0486494Z     #distributed_at
2024-03-02T16:39:53.0988367Z       displays explicit issued_at date
2024-03-02T16:39:53.1315837Z       shows the hour and minutes if it has been provided
2024-03-02T16:39:53.1318551Z     #copy_from_request
2024-03-02T16:39:53.1554879Z       copy over relevant request information into the distrubution
2024-03-02T16:39:53.1555768Z     #copy_line_items
2024-03-02T16:39:53.1976276Z       replicates line_items from a donation into a distribution
2024-03-02T16:39:53.1977062Z     #combine_duplicates
2024-03-02T16:39:53.2372128Z       condenses duplicate line_items if the item_ids match
2024-03-02T16:39:53.2372850Z   Callbacks >
2024-03-02T16:39:53.2855103Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:39:53.2856049Z     #before_save
2024-03-02T16:39:53.2856813Z       #reset_shipping_cost
2024-03-02T16:39:53.2857349Z         when delivery_method is other then shipped
2024-03-02T16:39:53.3120306Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-02T16:39:53.3126571Z   Scopes >
2024-03-02T16:39:53.3127933Z     by_partner >
2024-03-02T16:39:53.3606965Z       only returns distributions with given partner id
2024-03-02T16:39:53.3607684Z     this_week >
2024-03-02T16:39:53.3608247Z       When it's Tuesday (mid-week)
2024-03-02T16:39:53.4300944Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-02T16:39:53.4302045Z       When it's Sunday (end of the week)
2024-03-02T16:39:53.4796421Z         doesn't include distributions past Sunday
2024-03-02T16:39:53.4797086Z     by_location >
2024-03-02T16:39:53.5306461Z       only returns distributions with given location id
2024-03-02T16:39:53.5307709Z     during >
2024-03-02T16:39:53.6043329Z       returns all distributions created between two dates
2024-03-02T16:39:53.6044069Z     by_item_id >
2024-03-02T16:39:53.7388801Z       only returns distributions with given item id
2024-03-02T16:39:53.7389592Z   Validations >
2024-03-02T16:39:53.7807611Z     ensures the associated line_items are valid
2024-03-02T16:39:53.7967376Z     ensures the associated line_items are invalid with a nil quantity
2024-03-02T16:39:53.8003317Z     ensures that any included items are found in the associated storage location
2024-03-02T16:39:53.8055281Z     must belong to an organization
2024-03-02T16:39:53.8111733Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:39:53.8159697Z     requires a storage location
2024-03-02T16:39:53.8309542Z     ensures the associated line_items are invalid with a zero quantity
2024-03-02T16:39:53.8358653Z     requires a partner
2024-03-02T16:39:53.8359249Z     when delivery method is other then shipped
2024-03-02T16:39:53.8615824Z       allows to save distribution
2024-03-02T16:39:53.8616446Z     when delivery method is shipped
2024-03-02T16:39:53.8617052Z       shipping cost is none negative
2024-03-02T16:39:53.8871114Z         allows to save distribution
2024-03-02T16:39:53.8871785Z       shipping cost is negative
2024-03-02T16:39:53.8928923Z         will not allow to save distribution
2024-03-02T16:39:53.8929715Z   behaves like itemizable
2024-03-02T16:39:53.8930726Z     .line_items
2024-03-02T16:39:53.8932104Z       combine!
2024-03-02T16:39:53.9369146Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:53.9905838Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:53.9906533Z       quantities_by_name
2024-03-02T16:39:54.0820387Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:54.1839135Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:54.1839921Z       total
2024-03-02T16:39:54.2767675Z         has an item total
2024-03-02T16:39:54.2768302Z       sorted
2024-03-02T16:39:54.3963950Z         displays the items, sorted by name
2024-03-02T16:39:54.3964855Z     .to_a
2024-03-02T16:39:54.3965733Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:54.4310383Z         calls line_item_values
2024-03-02T16:39:54.4311056Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:54.4642674Z         raises an error
2024-03-02T16:39:54.5555112Z W, [2024-03-02T08:39:54.555251 #2307]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-02T16:39:54.5556432Z W, [2024-03-02T08:39:54.555300 #2307]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:39:54.5558100Z W, [2024-03-02T08:39:54.555330 #2307]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:39:54.5559985Z W, [2024-03-02T08:39:54.555366 #2307]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-02T16:39:54.5644028Z 
2024-03-02T16:39:54.5644267Z Failures:
2024-03-02T16:39:54.5644798Z 
2024-03-02T16:39:54.5645391Z   1) Reports::PartnerInfoReportService#report should report normal values
2024-03-02T16:39:54.5646127Z      Failure/Error:
2024-03-02T16:39:54.5646494Z        expect(report.report).to eq({
2024-03-02T16:39:54.5647090Z                                      entries: { "Agency Type: Career technical training" => 2,
2024-03-02T16:39:54.5647791Z                                                 "Agency Type: Education program" => 1,
2024-03-02T16:39:54.5648417Z                                                 "Number of Partner Agencies" => 3,
2024-03-02T16:39:54.5649240Z                                                 "Zip Codes Served" => "90210-1234, 12345, 09876-3564" },
2024-03-02T16:39:54.5649914Z                                      name: "Partner Agencies and Service Area"
2024-03-02T16:39:54.5650446Z                                    })
2024-03-02T16:39:54.5650743Z 
2024-03-02T16:39:54.5652069Z        expected: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"}, :name=>"Partner Agencies and Service Area"}
2024-03-02T16:39:54.5654521Z             got: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"12345, 09876-3564, 90210-1234"}, :name=>"Partner Agencies and Service Area"}
2024-03-02T16:39:54.5655719Z 
2024-03-02T16:39:54.5655915Z        (compared using ==)
2024-03-02T16:39:54.5656233Z 
2024-03-02T16:39:54.5656334Z        Diff:
2024-03-02T16:39:54.5656626Z        @@ -1 +1 @@
2024-03-02T16:39:54.5657743Z        -:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"},
2024-03-02T16:39:54.5659617Z        +:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"12345, 09876-3564, 90210-1234"},
2024-03-02T16:39:54.5661034Z      # ./spec/services/reports/partner_info_report_service_spec.rb:27:in `block (3 levels) in <top (required)>'
2024-03-02T16:39:54.5663176Z 
2024-03-02T16:39:54.5663539Z Finished in 57.77 seconds (files took 8.45 seconds to load)
2024-03-02T16:39:54.5664220Z 575 examples, 1 failure
2024-03-02T16:39:54.5664398Z 
2024-03-02T16:39:54.5664486Z Failed examples:
2024-03-02T16:39:54.5664632Z 
2024-03-02T16:39:54.5665189Z rspec ./spec/services/reports/partner_info_report_service_spec.rb:19 # Reports::PartnerInfoReportService#report should report normal values
2024-03-02T16:39:54.5665841Z 
2024-03-02T16:39:54.5665945Z Randomized with seed 63754
2024-03-02T16:39:54.5666124Z 
2024-03-02T16:39:55.0620815Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T16:39:55.0622724Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3982 / 6427 LOC (61.96%) covered.
2024-03-02T16:39:55.1159960Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-03-02T16:39:55.5021956Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T16:39:55.5024073Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10679 LOC (0.36%) covered.
2024-03-02T16:39:55.5304559Z ##[error]Process completed with exit code 1.
