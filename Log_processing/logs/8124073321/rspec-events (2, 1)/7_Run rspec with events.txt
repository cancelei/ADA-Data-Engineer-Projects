2024-03-02T16:38:45.6144027Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-02T16:38:45.6145015Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-02T16:38:45.6173000Z shell: /usr/bin/bash -e {0}
2024-03-02T16:38:45.6173407Z env:
2024-03-02T16:38:45.6173725Z   POSTGRES_HOST: localhost
2024-03-02T16:38:45.6174137Z   DATABASE_HOST: localhost
2024-03-02T16:38:45.6174529Z   PG_USERNAME: postgres
2024-03-02T16:38:45.6174901Z   PG_PASSWORD: password
2024-03-02T16:38:45.6175354Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-02T16:38:45.6175756Z   POSTGRES_PORT: 5432
2024-03-02T16:38:45.6176087Z   PGHOST: localhost
2024-03-02T16:38:45.6176504Z   PGUSER: postgres
2024-03-02T16:38:45.6176830Z   RAILS_ENV: test
2024-03-02T16:38:45.6177199Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-02T16:38:45.6177686Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-02T16:38:45.6178045Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-02T16:38:45.6178497Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-02T16:38:45.6179345Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-02T16:38:45.6179978Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-02T16:38:45.6180693Z   EVENTS_READ: true
2024-03-02T16:38:45.6181046Z ##[endgroup]
2024-03-02T16:38:51.3352805Z W, [2024-03-02T16:38:51.334901 #2284]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-02T16:38:51.3354247Z W, [2024-03-02T16:38:51.334966 #2284]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:38:51.3356153Z W, [2024-03-02T16:38:51.334993 #2284]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:38:51.3359828Z W, [2024-03-02T16:38:51.335032 #2284]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-02T16:38:54.9321307Z W, [2024-03-02T16:38:54.931832 #2284]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-02T16:38:54.9322885Z W, [2024-03-02T16:38:54.931869 #2284]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:38:54.9324804Z W, [2024-03-02T16:38:54.931886 #2284]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:38:54.9327747Z W, [2024-03-02T16:38:54.931920 #2284]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-02T16:38:54.9396393Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-03-02T16:39:03.6659473Z 
2024-03-02T16:39:03.6660251Z Randomized with seed 22701
2024-03-02T16:39:04.4728343Z 
2024-03-02T16:39:04.4729065Z Transfer
2024-03-02T16:39:04.4730294Z   versioning
2024-03-02T16:39:04.4948415Z     is expected to be versioned
2024-03-02T16:39:04.4949205Z   behaves like itemizable
2024-03-02T16:39:04.4949765Z     .to_a
2024-03-02T16:39:04.4950452Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:04.5621624Z         raises an error
2024-03-02T16:39:04.5622231Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:04.5985503Z         calls line_item_values
2024-03-02T16:39:04.5986301Z     .line_items
2024-03-02T16:39:04.5987032Z       quantities_by_name
2024-03-02T16:39:04.6508379Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:04.6985789Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:04.6986890Z       total
2024-03-02T16:39:04.7511177Z         has an item total
2024-03-02T16:39:04.7512101Z       sorted
2024-03-02T16:39:04.8212102Z         displays the items, sorted by name
2024-03-02T16:39:04.8212919Z       combine!
2024-03-02T16:39:04.8680632Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:04.8958419Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:04.8959661Z   Scopes >
2024-03-02T16:39:04.9224744Z     `to_location` can filter out transfers to a specific location
2024-03-02T16:39:04.9464647Z     `from_location` can filter out transfers from a specific location
2024-03-02T16:39:04.9465674Z   Methods >
2024-03-02T16:39:05.1699193Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-02T16:39:05.1700313Z   Validations >
2024-03-02T16:39:05.1824032Z     must have storage locations set
2024-03-02T16:39:05.1905186Z     must belong to an organization
2024-03-02T16:39:05.2155293Z     requires that each line item exists in the inventory
2024-03-02T16:39:05.2272210Z     must have different storage locations
2024-03-02T16:39:05.4271597Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-02T16:39:05.4939731Z     requires that the line items must have sufficient quantity in the inventory
2024-03-02T16:39:05.4940639Z 
2024-03-02T16:39:05.4940930Z TransfersController
2024-03-02T16:39:05.4941478Z   While signed in
2024-03-02T16:39:05.4942677Z     GET #show
2024-03-02T16:39:05.5315234Z       returns http success
2024-03-02T16:39:05.5316237Z     POST #create
2024-03-02T16:39:05.5530403Z       renders to #new when failing
2024-03-02T16:39:05.5965025Z       redirects to #show when successful
2024-03-02T16:39:05.5966570Z     Looking at a different organization
2024-03-02T16:39:05.7815591Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:05.7816797Z     GET #new
2024-03-02T16:39:05.7953496Z       returns http success
2024-03-02T16:39:05.7954198Z     GET #index
2024-03-02T16:39:05.8088575Z       returns http success
2024-03-02T16:39:05.8089280Z       when filtering by date
2024-03-02T16:39:05.8090225Z         when date parameters are not supplied
2024-03-02T16:39:05.8462050Z           returns all objects
2024-03-02T16:39:05.8464091Z         when date parameters are supplied
2024-03-02T16:39:05.8823813Z           only returns the correct obejects
2024-03-02T16:39:05.8824660Z   While not signed in
2024-03-02T16:39:05.8956644Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:05.8958277Z 
2024-03-02T16:39:05.8958818Z User
2024-03-02T16:39:05.8959538Z   #role_added
2024-03-02T16:39:05.9357673Z     renders the body correctly
2024-03-02T16:39:05.9358825Z   #send_reset_password_instructions
2024-03-02T16:39:05.9359574Z     user gets an email with instructions
2024-03-02T16:39:06.0327537Z       sends an email with instructions
2024-03-02T16:39:06.0328396Z 
2024-03-02T16:39:06.0328645Z PartnerApprovalService
2024-03-02T16:39:06.0331320Z   #call
2024-03-02T16:39:06.0332426Z     when the arguments are incorrect
2024-03-02T16:39:06.0333386Z       because the partner is not approvable
2024-03-02T16:39:06.0625001Z         should return the PartnerApprovalService object with an error
2024-03-02T16:39:06.0625974Z     when the arguments are correct
2024-03-02T16:39:06.0927596Z       should have no errors
2024-03-02T16:39:06.1256014Z       should send an email notification to the partner
2024-03-02T16:39:06.1581214Z       should change the partner status to approved
2024-03-02T16:39:06.1582190Z       but a unexpected error occured during the save
2024-03-02T16:39:06.1582961Z         for partner approval
2024-03-02T16:39:06.1862190Z           should not change the partner status to approved
2024-03-02T16:39:06.2130082Z           should have an error with the raised error
2024-03-02T16:39:06.2400826Z           should not send an email notification to the partner
2024-03-02T16:39:06.2401942Z 
2024-03-02T16:39:06.2402254Z Partner
2024-03-02T16:39:06.2404599Z   import_csv
2024-03-02T16:39:06.5493189Z     imports partners from a csv file with BOM encodings
2024-03-02T16:39:06.7671613Z     imports partners from a csv file and prevents multiple imports
2024-03-02T16:39:06.7672629Z   #approvable?
2024-03-02T16:39:06.7673180Z     when status is awaiting_review
2024-03-02T16:39:06.7718435Z       should return true
2024-03-02T16:39:06.7719169Z     when status is invited
2024-03-02T16:39:06.7760187Z       should return true
2024-03-02T16:39:06.7761128Z     when status is not invited or awaiting_review
2024-03-02T16:39:06.7844358Z       should return false
2024-03-02T16:39:06.7844965Z   Filters
2024-03-02T16:39:06.7845648Z     by_status
2024-03-02T16:39:06.8253705Z       yields partners with the provided status
2024-03-02T16:39:06.8649047Z       yields deactivated partner when deactivated status provided
2024-03-02T16:39:06.8650324Z   #deactivated?
2024-03-02T16:39:06.8651098Z     when the status is 'deactivated'
2024-03-02T16:39:06.8694727Z       should return true
2024-03-02T16:39:06.8695507Z     when the status is not 'deactivated'
2024-03-02T16:39:06.8735705Z       should return false
2024-03-02T16:39:06.8736389Z   associations
2024-03-02T16:39:06.8775852Z     is expected to have many item_categories through partner_group
2024-03-02T16:39:06.8833889Z     is expected to belong to organization required: true
2024-03-02T16:39:06.8867823Z     is expected to have many children through families
2024-03-02T16:39:06.8916536Z     is expected to have many requests
2024-03-02T16:39:06.8950394Z     is expected to have many users dependent => destroy
2024-03-02T16:39:06.8981821Z     is expected to have many requests
2024-03-02T16:39:06.9015363Z     is expected to have many requestable_items through item_categories source => items
2024-03-02T16:39:06.9065357Z     is expected to have many distributions
2024-03-02T16:39:06.9117197Z     is expected to belong to partner_group optional: true
2024-03-02T16:39:06.9169850Z     is expected to have many families dependent => destroy
2024-03-02T16:39:06.9170758Z     primary_user
2024-03-02T16:39:06.9458183Z       should return the first user ever created for a partner
2024-03-02T16:39:06.9459087Z   #csv_export_attributes
2024-03-02T16:39:06.9728405Z     includes contact person information from parnerbase
2024-03-02T16:39:06.9729274Z   versioning
2024-03-02T16:39:06.9763938Z     is expected to be versioned
2024-03-02T16:39:06.9764783Z   changing emails
2024-03-02T16:39:07.0071362Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-02T16:39:07.0315880Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-02T16:39:07.0563505Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-02T16:39:07.0825410Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-02T16:39:07.1204588Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-02T16:39:07.1458387Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-02T16:39:07.1706810Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-02T16:39:07.1708398Z   #quantity_year_to_date
2024-03-02T16:39:07.3591759Z     includes all item quantities from distributions issued during the current year
2024-03-02T16:39:07.5431370Z     does not include quantities from distributions issued during the previous year
2024-03-02T16:39:07.5432546Z   #impact_metrics
2024-03-02T16:39:07.5433763Z     when partner don't have any related information
2024-03-02T16:39:07.5712135Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-02T16:39:07.5712944Z     when partner has related information
2024-03-02T16:39:07.6382714Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-02T16:39:07.6383691Z   ActiveStorage validation
2024-03-02T16:39:07.6498678Z     validates that attachments are pdf or docs
2024-03-02T16:39:07.6499634Z   Validations >
2024-03-02T16:39:07.6754386Z     still requires a unique email between organizations
2024-03-02T16:39:07.7011331Z     requires a unique name within an organization
2024-03-02T16:39:07.7303444Z     requires a unique email that is formatted correctly
2024-03-02T16:39:07.7390992Z     validates the quota is a number but it is not required
2024-03-02T16:39:07.7441019Z     must belong to an organization
2024-03-02T16:39:07.7668302Z     does not require a unique name between organizations
2024-03-02T16:39:07.7669333Z   #deletable?
2024-03-02T16:39:07.7669939Z     when status is uninvited
2024-03-02T16:39:07.7671066Z       when it has a profile but no users
2024-03-02T16:39:07.7820944Z         should return true
2024-03-02T16:39:07.7821414Z       when it has no other associations
2024-03-02T16:39:07.7922351Z         should return true
2024-03-02T16:39:07.7922924Z       when it has a distribution
2024-03-02T16:39:07.8064923Z         should return false
2024-03-02T16:39:07.8065744Z       when it has a request
2024-03-02T16:39:07.8261230Z         should return false
2024-03-02T16:39:07.8261854Z       when it has a profile and users
2024-03-02T16:39:07.8497062Z         should return false
2024-03-02T16:39:07.8497732Z     when status is not uninvited
2024-03-02T16:39:07.8571909Z       should return false
2024-03-02T16:39:07.8572656Z   callbacks
2024-03-02T16:39:07.8772630Z     properly downcases email
2024-03-02T16:39:07.8773497Z   #profile
2024-03-02T16:39:07.8991457Z     should return the associated Partners::Profile record
2024-03-02T16:39:07.8992116Z 
2024-03-02T16:39:07.8992320Z PartnerMailer
2024-03-02T16:39:07.8993011Z   #application_approved
2024-03-02T16:39:07.9254180Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-02T16:39:07.9485764Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:39:07.9486719Z   #recertification_request
2024-03-02T16:39:07.9707453Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:39:07.9924050Z     renders the body with text that indicates to recertify and link to where
2024-03-02T16:39:07.9925056Z 
2024-03-02T16:39:07.9925468Z UiHelper
2024-03-02T16:39:07.9926168Z   optional_data_text
2024-03-02T16:39:07.9927074Z     when the field provided is not blank
2024-03-02T16:39:07.9977254Z       should return the content
2024-03-02T16:39:07.9978102Z     when the field provided is blank
2024-03-02T16:39:08.0022332Z       should return the text Not-Provided in gray text
2024-03-02T16:39:08.0023110Z 
2024-03-02T16:39:08.0023313Z County
2024-03-02T16:39:08.0102892Z   is expected to have many served_areas
2024-03-02T16:39:08.0136187Z   versioning
2024-03-02T16:39:08.0136851Z     is expected to be versioned
2024-03-02T16:39:08.0137368Z 
2024-03-02T16:39:08.0137600Z View::Inventory
2024-03-02T16:39:08.0138815Z   #total_value_in_dollars
2024-03-02T16:39:08.0978115Z     should return total value across the given location
2024-03-02T16:39:08.0979072Z   #items_for_location
2024-03-02T16:39:08.1823576Z     should return the right values
2024-03-02T16:39:08.1824163Z     with include_omitted_items
2024-03-02T16:39:08.2655971Z       should add items not in the storage location
2024-03-02T16:39:08.2656861Z   #storage_location_name
2024-03-02T16:39:08.3499897Z     should return the right name
2024-03-02T16:39:08.3500708Z   #all_items
2024-03-02T16:39:08.4364970Z     should return all items across storage locations
2024-03-02T16:39:08.4365836Z   .items_for_location
2024-03-02T16:39:08.5208146Z     should return the right values
2024-03-02T16:39:08.5208991Z     with include_omitted_items
2024-03-02T16:39:08.6197711Z       should add items not in the storage location
2024-03-02T16:39:08.7043916Z   .total_inventory
2024-03-02T16:39:08.7044404Z     should return the total quantity
2024-03-02T16:39:08.7045062Z   #storage_locations_for_item
2024-03-02T16:39:08.7877201Z     should return all relevant IDs
2024-03-02T16:39:08.7878371Z   #quantity_for
2024-03-02T16:39:08.7878985Z     with storage location but no item id
2024-03-02T16:39:08.8727829Z       should return all items at that location
2024-03-02T16:39:08.8728947Z     with item id
2024-03-02T16:39:08.8729849Z       with no storage location
2024-03-02T16:39:08.9595676Z         should return quantities across all storage locations
2024-03-02T16:39:08.9596905Z       with storage location
2024-03-02T16:39:09.0445404Z         should return the quantity at that location
2024-03-02T16:39:09.0446085Z 
2024-03-02T16:39:09.0446624Z KitCreateService
2024-03-02T16:39:09.0447436Z   #call
2024-03-02T16:39:09.2438496Z     should return an the instance
2024-03-02T16:39:09.2439349Z     when the parameters are valid
2024-03-02T16:39:09.4313839Z       should create a new Kit
2024-03-02T16:39:09.6183990Z       should create the new Item associated with the Kit
2024-03-02T16:39:09.8058557Z       should create a new Item
2024-03-02T16:39:09.8059175Z       but the ItemCreationService is unsuccesful
2024-03-02T16:39:09.9891959Z         should have an error that includes the error
2024-03-02T16:39:10.1767834Z         should not create the Kit
2024-03-02T16:39:10.3667167Z         should not create a Item
2024-03-02T16:39:10.3667787Z       but an unexpected error gets raised
2024-03-02T16:39:10.5522993Z         should have an error that includes the raised error
2024-03-02T16:39:10.7405086Z         should not create a Item
2024-03-02T16:39:10.9342461Z         should not create the Kit
2024-03-02T16:39:10.9344025Z     when the parameters provided are invalid
2024-03-02T16:39:10.9345012Z       because the organization_id does not match any Organization
2024-03-02T16:39:10.9398481Z         should have an error on organization_id saying it does not match any Organization
2024-03-02T16:39:10.9399278Z       because the kit_params is invalid for kit creation
2024-03-02T16:39:11.1145255Z         should have errors saying why the kit_params are invalid
2024-03-02T16:39:11.1146046Z 
2024-03-02T16:39:11.1146627Z Exports::ExportReportCSVService
2024-03-02T16:39:11.1147379Z   .generate_csv_data
2024-03-02T16:39:11.1185427Z     creates a CSV string
2024-03-02T16:39:11.1219132Z     creates CSV data including headers
2024-03-02T16:39:11.1219636Z 
2024-03-02T16:39:11.1219854Z AccountRequestsController
2024-03-02T16:39:11.1220709Z   routing
2024-03-02T16:39:11.1259769Z     routes to #create
2024-03-02T16:39:11.1292987Z     routes to #new
2024-03-02T16:39:11.1293405Z 
2024-03-02T16:39:11.1293674Z HistoricalTrendService
2024-03-02T16:39:11.1294738Z   #series
2024-03-02T16:39:11.3981254Z     returns an array of items with their monthly data
2024-03-02T16:39:11.3982268Z 
2024-03-02T16:39:11.3982495Z SyncNDBNMembers
2024-03-02T16:39:11.3983070Z   .sync
2024-03-02T16:39:11.3983862Z     when the HTTP request does not get a response of 200
2024-03-02T16:39:11.4187969Z       should raise an error regarding the response code
2024-03-02T16:39:11.4189035Z     when the HTTP request is successful
2024-03-02T16:39:11.4190182Z       when there are no exisiting NDBN Member records
2024-03-02T16:39:11.4332277Z         should create the NDBN Member records
2024-03-02T16:39:11.4333079Z       when no new NDBN Member has been added
2024-03-02T16:39:11.4452015Z         should not add any new NDBN Members
2024-03-02T16:39:11.4452821Z       when the account name of a NDBN Member has changed
2024-03-02T16:39:11.4565473Z         should update the account name of the corresponding NDBN Member
2024-03-02T16:39:11.4566318Z 
2024-03-02T16:39:11.4566538Z ReminderDeadlineJob
2024-03-02T16:39:11.4567186Z   #perform
2024-03-02T16:39:11.4791743Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-02T16:39:11.4792925Z 
2024-03-02T16:39:11.4793267Z AdjustmentCreateService
2024-03-02T16:39:11.4793796Z   call
2024-03-02T16:39:11.5747961Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-02T16:39:11.6495855Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-02T16:39:11.7482568Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-02T16:39:11.8384281Z     handles adjustments to multiple items
2024-03-02T16:39:11.9057175Z     does not allow inventory to be adjusted below 0
2024-03-02T16:39:11.9939339Z     increases stored inventory on a positive adjustment
2024-03-02T16:39:12.0719966Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-02T16:39:12.1585951Z     decreases stored inventory on a negative adjustment
2024-03-02T16:39:12.2119869Z     gives an error if we attempt to adjust inventory below 0
2024-03-02T16:39:12.2120662Z 
2024-03-02T16:39:12.2120875Z KitAllocation
2024-03-02T16:39:12.2124935Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-02T16:39:12.2126580Z   versioning
2024-03-02T16:39:12.2208405Z     is expected to be versioned
2024-03-02T16:39:12.2208935Z 
2024-03-02T16:39:12.2209137Z RequestItem
2024-03-02T16:39:12.2210415Z   Methods >
2024-03-02T16:39:12.2211377Z     #from_json
2024-03-02T16:39:12.4653353Z       has the correct amount on hand for location
2024-03-02T16:39:12.7084303Z       has the correct quantity
2024-03-02T16:39:12.9500149Z       has the correct name
2024-03-02T16:39:13.1890968Z       has the correct amount on hand
2024-03-02T16:39:13.1894693Z 
2024-03-02T16:39:13.1895329Z Partners::Family
2024-03-02T16:39:13.1895735Z   #total_children_count
2024-03-02T16:39:13.1946645Z     should return the family's total children count
2024-03-02T16:39:13.1947684Z   #search_non_archived
2024-03-02T16:39:13.2881920Z     should return all families if one is passed in
2024-03-02T16:39:13.3801116Z     should return non-archived families if zero is passed in
2024-03-02T16:39:13.3801775Z   associations
2024-03-02T16:39:13.3842409Z     is expected to have many children dependent => destroy
2024-03-02T16:39:13.3877965Z     is expected to have many authorized_family_members dependent => destroy
2024-03-02T16:39:13.3917936Z     is expected to belong to partner required: true
2024-03-02T16:39:13.3918821Z   #create_authorized
2024-03-02T16:39:13.4196294Z     should include authorized family members
2024-03-02T16:39:13.4196893Z   validations
2024-03-02T16:39:13.4287065Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-02T16:39:13.4366511Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-02T16:39:13.4444250Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-02T16:39:13.4445419Z   versioning
2024-03-02T16:39:13.4479666Z     is expected to be versioned
2024-03-02T16:39:13.4480370Z   #guardian_display_name
2024-03-02T16:39:13.4532969Z     should return the guardian's first and last name
2024-03-02T16:39:13.4533688Z 
2024-03-02T16:39:13.4533990Z Reports::WarehouseReportService
2024-03-02T16:39:13.4534756Z   #report
2024-03-02T16:39:13.8060510Z     should print normal values
2024-03-02T16:39:14.1495124Z     should print unknown warehouse type
2024-03-02T16:39:14.3254952Z     should print zero values
2024-03-02T16:39:14.5002697Z     should print unknown square footage
2024-03-02T16:39:14.5003573Z 
2024-03-02T16:39:14.5003805Z HelpController
2024-03-02T16:39:14.5004462Z   While signed in as a normal user >
2024-03-02T16:39:14.5005169Z     GET #show
2024-03-02T16:39:14.5075103Z       does not display help page when the user logs out
2024-03-02T16:39:14.5210036Z       returns http success
2024-03-02T16:39:14.5211225Z 
2024-03-02T16:39:14.5211735Z ProductDriveParticipant
2024-03-02T16:39:14.5212993Z   versioning
2024-03-02T16:39:14.5306552Z     is expected to be versioned
2024-03-02T16:39:14.5307536Z   behaves like provideable
2024-03-02T16:39:14.5308189Z     geocode
2024-03-02T16:39:14.5375681Z       adds coordinates to the database
2024-03-02T16:39:14.5376626Z     Validations
2024-03-02T16:39:14.5412198Z       is invalid without an organization
2024-03-02T16:39:14.5467429Z       is invalid unless it has either a contact name or a business name
2024-03-02T16:39:14.5468604Z     import_csv
2024-03-02T16:39:14.7197764Z       imports from a csv file
2024-03-02T16:39:14.7198868Z   Validations
2024-03-02T16:39:14.7261881Z     is invalid unless it has either a phone number or an email
2024-03-02T16:39:14.7297081Z     is invalid without an organization
2024-03-02T16:39:14.7297857Z   Methods
2024-03-02T16:39:14.7298695Z     volume
2024-03-02T16:39:14.8147679Z       retrieves the amount of product that has been donated by participant
2024-03-02T16:39:14.8148771Z     donation_source_view
2024-03-02T16:39:14.8149392Z       contact name present
2024-03-02T16:39:14.8213023Z         is expected to eq "Contact Name (participant)"
2024-03-02T16:39:14.8213812Z       no contact name
2024-03-02T16:39:14.8273070Z         is expected to be nil
2024-03-02T16:39:14.8273877Z     volume_by_product_drive
2024-03-02T16:39:14.9765652Z       retrieves the amount of product that has been donated through specific product drive
2024-03-02T16:39:14.9766608Z 
2024-03-02T16:39:14.9767190Z Partners::FamilyRequestCreateService
2024-03-02T16:39:14.9767829Z   #call
2024-03-02T16:39:14.9768368Z     when the arguments are incorrect
2024-03-02T16:39:14.9769217Z       because a unrecognized item_id was provided
2024-03-02T16:39:15.0024766Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-02T16:39:15.0026406Z       because no family_requests_attributes were defined
2024-03-02T16:39:15.0285026Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-02T16:39:15.0286205Z     when the arguments are correct
2024-03-02T16:39:15.0286868Z       without children
2024-03-02T16:39:15.0601415Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-02T16:39:15.0602137Z       with children
2024-03-02T16:39:15.1836039Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-02T16:39:15.1837400Z 
2024-03-02T16:39:15.1837600Z Role
2024-03-02T16:39:15.1873947Z   is expected to accepts_nested_attributes_for :users
2024-03-02T16:39:15.1874729Z   Validations
2024-03-02T16:39:15.1928027Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-02T16:39:15.1928926Z   versioning
2024-03-02T16:39:15.1960402Z     is expected to be versioned
2024-03-02T16:39:15.1960888Z   Associations
2024-03-02T16:39:15.2021105Z     is expected to have and belong to many users
2024-03-02T16:39:15.2057071Z     is expected to belong to resource optional: true
2024-03-02T16:39:15.2057693Z 
2024-03-02T16:39:15.2057948Z DistributionUpdateService
2024-03-02T16:39:15.2058780Z   resend_notification?
2024-03-02T16:39:15.3048762Z     changes the issue_date, resulting in resend_notification? = true
2024-03-02T16:39:15.4046006Z     changes any distribution content, resulting in resend_notification? = true
2024-03-02T16:39:15.4940538Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-02T16:39:15.4941559Z   call
2024-03-02T16:39:15.5995750Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T16:39:15.5996768Z 
2024-03-02T16:39:15.5997065Z RequestsTotalItemsService
2024-03-02T16:39:15.5997627Z   #calculate
2024-03-02T16:39:15.5998512Z     when provided requests is nil
2024-03-02T16:39:15.6035975Z       is expected to be blank
2024-03-02T16:39:15.6036706Z     when the request items is not blank
2024-03-02T16:39:15.6179762Z       return the names of items correctly
2024-03-02T16:39:15.6314287Z       return items with correct quantities calculated
2024-03-02T16:39:15.6315278Z     when provided with requests that have no request items
2024-03-02T16:39:15.6391014Z       is expected to be blank
2024-03-02T16:39:15.6391746Z     when item name is nil
2024-03-02T16:39:15.6507693Z       return Unknown Item
2024-03-02T16:39:15.6508724Z 
2024-03-02T16:39:15.6509266Z Partners::Profile
2024-03-02T16:39:15.6544728Z   must allow deleting served_areas
2024-03-02T16:39:15.6545591Z   versioning
2024-03-02T16:39:15.6579156Z     is expected to be versioned
2024-03-02T16:39:15.6579948Z   request settings validation for profile
2024-03-02T16:39:15.6580923Z     no settings are set to true
2024-03-02T16:39:15.6630335Z       should not be valid
2024-03-02T16:39:15.6631101Z     at least one request type is set to true
2024-03-02T16:39:15.6701857Z       should be valid when enable_quantity_based_requests is true
2024-03-02T16:39:15.6772072Z       should be valid when enable_individual_requests is true
2024-03-02T16:39:15.6842500Z       should be valid when enable_child_based_requests is true
2024-03-02T16:39:15.6843676Z   social media info validation for profile
2024-03-02T16:39:15.6844621Z     no social media presence and the checkbox is checked
2024-03-02T16:39:15.6901744Z       should be valid
2024-03-02T16:39:15.6902992Z     no social media presence and the checkbox isn't checked
2024-03-02T16:39:15.6997291Z       should be valid if media_information is not needed
2024-03-02T16:39:15.7051772Z       should not be valid
2024-03-02T16:39:15.7053810Z     has social media presence and the checkbox is unchecked
2024-03-02T16:39:15.7122269Z       with just instagram it should be valid
2024-03-02T16:39:15.7189319Z       with just facebook it should be valid
2024-03-02T16:39:15.7260821Z       with just a website it should be valid
2024-03-02T16:39:15.7331999Z       with just twitter it should be valid
2024-03-02T16:39:15.7402778Z       with every social media option it should be valid
2024-03-02T16:39:15.7403897Z   associations
2024-03-02T16:39:15.7446307Z     is expected to have a has_many_attached called documents
2024-03-02T16:39:15.7481215Z     is expected to have many served_areas
2024-03-02T16:39:15.7520935Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-02T16:39:15.7557845Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-02T16:39:15.7559110Z   client share behaviour
2024-03-02T16:39:15.7559798Z     no served areas
2024-03-02T16:39:15.7608159Z       has 0 client share
2024-03-02T16:39:15.7608872Z     multiple
2024-03-02T16:39:15.7800684Z       sums the client shares
2024-03-02T16:39:15.7948375Z       is valid if client share sum is 100
2024-03-02T16:39:15.7949186Z 
2024-03-02T16:39:15.7949463Z Partners::UpdateFamily
2024-03-02T16:39:15.7950541Z   #call
2024-03-02T16:39:15.7951668Z     when an error occurs during archiving
2024-03-02T16:39:15.8308629Z       does not archive the family or its children and adds error to the service
2024-03-02T16:39:15.8309536Z     when family has children
2024-03-02T16:39:15.8683353Z       archives the family and its children
2024-03-02T16:39:15.8684261Z 
2024-03-02T16:39:15.8684467Z Event
2024-03-02T16:39:15.8685281Z   #most_recent_snapshot
2024-03-02T16:39:16.0959725Z     should not include an unusable snapshot
2024-03-02T16:39:16.3418668Z     should include the last usable snapshot
2024-03-02T16:39:16.3419310Z 
2024-03-02T16:39:16.3420293Z Partners::ChildItemRequest
2024-03-02T16:39:16.3421108Z   associations
2024-03-02T16:39:16.3468668Z     is expected to belong to item_request required: true
2024-03-02T16:39:16.3507456Z     is expected to belong to child required: true
2024-03-02T16:39:16.3544687Z     is expected to belong to authorized_family_member optional: true
2024-03-02T16:39:16.3545669Z   versioning
2024-03-02T16:39:16.3580261Z     is expected to be versioned
2024-03-02T16:39:16.3580936Z   #quantity
2024-03-02T16:39:16.3643232Z     should return the quantity divided by the number of children
2024-03-02T16:39:16.3644387Z   #ordered_item_diaperid
2024-03-02T16:39:16.3680344Z     should return the item_id on the item_request
2024-03-02T16:39:16.3681472Z 
2024-03-02T16:39:16.3681933Z Adjustment
2024-03-02T16:39:16.3683478Z   nested line item attributes
2024-03-02T16:39:16.4099337Z     accepts them
2024-03-02T16:39:16.4100203Z   Methods >
2024-03-02T16:39:16.6178075Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-02T16:39:16.6179376Z     split_difference
2024-03-02T16:39:16.6977105Z       gracefully handles adjustments with only positive
2024-03-02T16:39:16.7754250Z       returns two adjustment objects
2024-03-02T16:39:16.8526620Z       gracefully handles adjustments with only negative
2024-03-02T16:39:16.8527233Z   versioning
2024-03-02T16:39:16.8567304Z     is expected to be versioned
2024-03-02T16:39:16.8567823Z   behaves like itemizable
2024-03-02T16:39:16.8568546Z     .to_a
2024-03-02T16:39:16.8569753Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:16.8927548Z         raises an error
2024-03-02T16:39:16.8928383Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:16.9280657Z         calls line_item_values
2024-03-02T16:39:16.9281414Z     .line_items
2024-03-02T16:39:16.9281943Z       quantities_by_name
2024-03-02T16:39:16.9701354Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:17.0077159Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:17.0077934Z       sorted
2024-03-02T16:39:17.0648682Z         displays the items, sorted by name
2024-03-02T16:39:17.0649291Z       combine!
2024-03-02T16:39:17.1061135Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:17.1515084Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:17.1516516Z       total
2024-03-02T16:39:17.1912449Z         has an item total
2024-03-02T16:39:17.1913511Z   Scopes >
2024-03-02T16:39:17.2085122Z     `by_user` can filter out adjustments to a specific user
2024-03-02T16:39:17.2261339Z     `at_location` can filter out adjustments to a specific location
2024-03-02T16:39:17.2262247Z   Validations >
2024-03-02T16:39:17.2672948Z     allows you to remove all the inventory that exists in the storage location
2024-03-02T16:39:17.2837823Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-02T16:39:17.2915752Z     must belong to an organization
2024-03-02T16:39:17.2916487Z 
2024-03-02T16:39:17.2916740Z InventoryAggregate
2024-03-02T16:39:17.2917861Z   individual events
2024-03-02T16:39:17.6178444Z     should process a distribution destroyed event
2024-03-02T16:39:17.9377356Z     should process a purchase event
2024-03-02T16:39:18.2265994Z     should process a donation event
2024-03-02T16:39:18.5354217Z     should process a donation destroyed event
2024-03-02T16:39:18.8399428Z     should process a donation event after a new storage location is created
2024-03-02T16:39:19.1286080Z     should process an adjustment event
2024-03-02T16:39:19.4366048Z     should process a kit allocation event
2024-03-02T16:39:19.7529916Z     should process an audit event
2024-03-02T16:39:20.0725380Z     should process a transfer destroy event
2024-03-02T16:39:20.4016318Z     should process a distribution event
2024-03-02T16:39:20.8099996Z     should process a snapshot event
2024-03-02T16:39:21.0985853Z     should process a transfer event
2024-03-02T16:39:21.4094416Z     should process a purchase destroyed event
2024-03-02T16:39:21.7874813Z     should process a kit deallocation event
2024-03-02T16:39:21.7875664Z   multiple events
2024-03-02T16:39:22.0454072Z     should handle timing correctly
2024-03-02T16:39:22.3054093Z     should ignore unusable snapshots
2024-03-02T16:39:22.5711008Z     should handle changing storage location
2024-03-02T16:39:22.9737102Z     should process multiple events
2024-03-02T16:39:23.2842524Z     should handle intervening audits
2024-03-02T16:39:23.2843387Z   validation
2024-03-02T16:39:23.2844246Z     current event is incorrect
2024-03-02T16:39:23.5139679Z       should raise a bare error
2024-03-02T16:39:23.5140779Z     subsequent event is incorrect
2024-03-02T16:39:23.8074598Z       should add the event to the message
2024-03-02T16:39:23.8075283Z 
2024-03-02T16:39:23.8075726Z PartnerFetchRequestableItemsService
2024-03-02T16:39:23.8076978Z   #call
2024-03-02T16:39:23.8210933Z     raises an error indiciating the partner does not exist with invalid id
2024-03-02T16:39:23.8212254Z     when the partner is not in any partner group
2024-03-02T16:39:23.8497651Z       is expected to be nil
2024-03-02T16:39:23.8498405Z       when the organization has items
2024-03-02T16:39:23.9005298Z         should return only active and visible items
2024-03-02T16:39:23.9322414Z         is expected to eq [#<Item id: 2567, name: "Item 1", category: nil, created_at: "2024-03-02 08:39:23.917683712 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-02T16:39:23.9324626Z       when the organization has no items
2024-03-02T16:39:23.9614932Z         should return no items
2024-03-02T16:39:23.9615664Z     org with any amount of items
2024-03-02T16:39:23.9616683Z       when the partner is in a partner group and has no items
2024-03-02T16:39:24.1671643Z         should return only active and visible items from partner
2024-03-02T16:39:24.1672714Z       when the partner is in a partner group and has items
2024-03-02T16:39:24.4006128Z         should return only active and visible items from partner
2024-03-02T16:39:24.4006877Z 
2024-03-02T16:39:24.4007194Z PartnerProfileUpdateService
2024-03-02T16:39:24.4008251Z   #call
2024-03-02T16:39:24.4009822Z     when there are no pre-existing served areas
2024-03-02T16:39:24.4010626Z       and the new values are correct
2024-03-02T16:39:24.4240949Z         stores the new values and returns success
2024-03-02T16:39:24.4241750Z         and there are other errors in the profile
2024-03-02T16:39:24.4465451Z           does not store the new values and it returns a failure
2024-03-02T16:39:24.4466595Z       and the new values are incorrect
2024-03-02T16:39:24.4664743Z 0
2024-03-02T16:39:24.4674174Z         does not store the new values and returns a failure
2024-03-02T16:39:24.4675062Z     when served area client shares pre-exist
2024-03-02T16:39:24.4678319Z       and the new values are correct
2024-03-02T16:39:24.4679285Z         and there are no other errors
2024-03-02T16:39:24.4996314Z           replaces the old values and returns success
2024-03-02T16:39:24.4997221Z         and there are errors on the profile
2024-03-02T16:39:24.5322113Z           maintains the old values and returns failure
2024-03-02T16:39:24.5323092Z       and the new values are incorrect
2024-03-02T16:39:24.5653425Z         maintains the old values and returns failure
2024-03-02T16:39:24.5654437Z 
2024-03-02T16:39:24.5654744Z Partners::RequestApprovalService
2024-03-02T16:39:24.5655453Z   #call
2024-03-02T16:39:24.5657378Z     when the partner is already awaiting approval
2024-03-02T16:39:24.5940618Z       should return an error saying it the partner is already requested approval
2024-03-02T16:39:24.5942029Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-02T16:39:24.5943436Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-02T16:39:24.6215163Z       should return an error re social media
2024-03-02T16:39:24.6216386Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-02T16:39:24.6523592Z       does not have an error
2024-03-02T16:39:24.6524519Z     when the partner is not yet awaiting approval
2024-03-02T16:39:24.6839868Z       should send an email notification to the partner's organization
2024-03-02T16:39:24.7154145Z       should set the status on the partner record to awaiting_review
2024-03-02T16:39:24.7155006Z 
2024-03-02T16:39:24.7155628Z DonationItemizedBreakdownService
2024-03-02T16:39:24.7156271Z   #fetch
2024-03-02T16:39:25.1110150Z     return the list of items donated with distributed
2024-03-02T16:39:25.1110808Z 
2024-03-02T16:39:25.1111369Z RequestMailer
2024-03-02T16:39:25.1112016Z   #request_cancel_partner_notification
2024-03-02T16:39:25.1270741Z     renders the body with correct text with partner information
2024-03-02T16:39:25.1395942Z     should be sent to the partner main email with the correct subject line
2024-03-02T16:39:25.1396768Z 
2024-03-02T16:39:25.1396980Z CalendarService
2024-03-02T16:39:25.4994226Z   #time_zones
2024-03-02T16:39:25.4994939Z   .calendar
2024-03-02T16:39:25.5600060Z     should print the calendar correctly
2024-03-02T16:39:25.5600639Z 
2024-03-02T16:39:25.5601120Z UsersRole
2024-03-02T16:39:25.5601616Z   versioning
2024-03-02T16:39:25.5648646Z     is expected to be versioned
2024-03-02T16:39:25.5650247Z   #current_role_for
2024-03-02T16:39:25.5650890Z     for partner user
2024-03-02T16:39:25.5787582Z       should return partner user
2024-03-02T16:39:25.5788683Z     for org user
2024-03-02T16:39:25.5916552Z       should return org user
2024-03-02T16:39:25.5917346Z     for super admin
2024-03-02T16:39:25.6078089Z       should return super admin
2024-03-02T16:39:25.6078894Z     for org admin
2024-03-02T16:39:25.6276140Z       should return org admin
2024-03-02T16:39:25.6276737Z 
2024-03-02T16:39:25.6277012Z DonationSite
2024-03-02T16:39:25.6278327Z   geocode
2024-03-02T16:39:25.6396291Z     adds coordinates to the database
2024-03-02T16:39:25.6397172Z   versioning
2024-03-02T16:39:25.6436493Z     is expected to be versioned
2024-03-02T16:39:25.6437460Z   import_csv
2024-03-02T16:39:25.8190332Z     imports storage locations from a csv file
2024-03-02T16:39:25.8191251Z   Validations >
2024-03-02T16:39:25.8236819Z     is invalid without an address
2024-03-02T16:39:25.8277585Z     is invalid without a name
2024-03-02T16:39:25.8313611Z     must belong to an organization
2024-03-02T16:39:25.8314805Z 
2024-03-02T16:39:25.8315106Z BarcodeItem
2024-03-02T16:39:25.8316830Z   Barcodes of BaseItems ('Global')
2024-03-02T16:39:25.8464686Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-02T16:39:25.8465589Z     validations >
2024-03-02T16:39:25.8541314Z       allows multiple barcodes to point at the same base item
2024-03-02T16:39:25.8627180Z       enforces uniqueness in the global scope
2024-03-02T16:39:25.8700113Z       is valid with or without an organization
2024-03-02T16:39:25.8700962Z       item >
2024-03-02T16:39:25.8751046Z         is invalid without an item associated with it
2024-03-02T16:39:25.8751819Z       quantity >
2024-03-02T16:39:25.8801674Z         is not a negative number
2024-03-02T16:39:25.8851309Z         is not nil
2024-03-02T16:39:25.8899153Z         is an integer
2024-03-02T16:39:25.8899751Z       value >
2024-03-02T16:39:25.8950231Z         requires a value
2024-03-02T16:39:25.8950992Z     filters >
2024-03-02T16:39:25.9060845Z       ->by_value returns the barcode with that value
2024-03-02T16:39:25.9211351Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-02T16:39:25.9362024Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-02T16:39:25.9362691Z     scopes >
2024-03-02T16:39:25.9364750Z       global
2024-03-02T16:39:25.9533123Z         includes all barcodes, for both base items and regular items
2024-03-02T16:39:25.9534073Z   Organization barcodes
2024-03-02T16:39:25.9649440Z     updates a counter in Item whenever it tracks a new barcode
2024-03-02T16:39:25.9650534Z     validations >
2024-03-02T16:39:25.9768876Z       does not enforce value uniqueness compared with the global scope
2024-03-02T16:39:25.9911196Z       is valid only with an organization
2024-03-02T16:39:26.0141462Z       does not enforces value uniqueness across organizations
2024-03-02T16:39:26.0258385Z       allows multiple barcodes to point at the same item
2024-03-02T16:39:26.0410252Z       enforces value uniqueness within the organization
2024-03-02T16:39:26.0411168Z       quantity >
2024-03-02T16:39:26.0499850Z         is not nil
2024-03-02T16:39:26.0589998Z         is not a negative number
2024-03-02T16:39:26.0677445Z         is an integer
2024-03-02T16:39:26.0678093Z       value >
2024-03-02T16:39:26.0771150Z         requires a value
2024-03-02T16:39:26.0771804Z       item >
2024-03-02T16:39:26.0863688Z         is invalid without an item associated with it
2024-03-02T16:39:26.0864730Z     filters >
2024-03-02T16:39:26.1062063Z       ->item_id shows only barcodes for a specific item_id
2024-03-02T16:39:26.1063129Z     to_h >
2024-03-02T16:39:26.1191557Z       emits a hash for a line_item
2024-03-02T16:39:26.1192261Z     scopes >
2024-03-02T16:39:26.1408118Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-02T16:39:26.1522795Z       ->by_value returns the barcode with that value
2024-03-02T16:39:26.3379253Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-02T16:39:26.3381145Z     when searching for a barcode where there is a global and local with the same value
2024-03-02T16:39:26.3675806Z       favors the local barcode
2024-03-02T16:39:26.3676262Z   versioning
2024-03-02T16:39:26.3714168Z     is expected to be versioned
2024-03-02T16:39:26.3714768Z 
2024-03-02T16:39:26.3714970Z HistoricalTrendsHelper
2024-03-02T16:39:26.3716622Z   #last_12_months
2024-03-02T16:39:26.3762241Z     returns the last 12 months starting from July when the current month is June
2024-03-02T16:39:26.3803333Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-02T16:39:26.3843894Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-02T16:39:26.3844779Z 
2024-03-02T16:39:26.3845009Z DistributionCreateService
2024-03-02T16:39:26.3845969Z   call
2024-03-02T16:39:26.4584734Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T16:39:26.5303910Z     returns a successful object with Scheduled distribution
2024-03-02T16:39:26.5305448Z     when there's multiple line items and one has insufficient inventory
2024-03-02T16:39:26.5924999Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T16:39:26.5925956Z     partner is deactivated
2024-03-02T16:39:26.6829392Z       does not send an email
2024-03-02T16:39:26.6830077Z     partner has send reminders setting set to false
2024-03-02T16:39:26.7635479Z       does not send a PartnerMailer
2024-03-02T16:39:26.7637013Z     when there's not sufficient inventory
2024-03-02T16:39:26.8319676Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T16:39:26.8320685Z     partner has send reminders setting set to true
2024-03-02T16:39:27.0207701Z       Sends a PartnerMailer
2024-03-02T16:39:27.0208489Z     when it fails to save
2024-03-02T16:39:27.0714048Z       preserves the error and is unsuccessful
2024-03-02T16:39:27.0714976Z     when the line item quantity is not positive
2024-03-02T16:39:27.1217565Z       preserves the RecordInvalid error and is unsuccessful
2024-03-02T16:39:27.1218244Z     when provided with a request ID
2024-03-02T16:39:27.2011660Z       changes the status of the request
2024-03-02T16:39:27.2012405Z       and the request already has a distribution associated with it
2024-03-02T16:39:27.2745874Z         should not be successful
2024-03-02T16:39:27.2746671Z 
2024-03-02T16:39:27.2747005Z BroadcastAnnouncement
2024-03-02T16:39:27.2848713Z   is expected to belong to user required: true
2024-03-02T16:39:27.2902472Z   is expected to validate that :message cannot be empty/falsy
2024-03-02T16:39:27.2969450Z   should roughly check if link is valid
2024-03-02T16:39:27.3038578Z   should validate a valid announcement
2024-03-02T16:39:27.3109590Z   should validate a good link
2024-03-02T16:39:27.3151114Z   is expected to belong to organization optional: true
2024-03-02T16:39:27.3151869Z   expired?
2024-03-02T16:39:27.3208617Z     should be true if the announcement is expired
2024-03-02T16:39:27.3262325Z     should be false if the announcement has not expired
2024-03-02T16:39:27.3263116Z   filter_announcements
2024-03-02T16:39:27.3416419Z     sorts announcements from most recently created to last
2024-03-02T16:39:27.3538912Z     shouldn't include expired announcements
2024-03-02T16:39:27.3661203Z     should include only announcements from the passed organization
2024-03-02T16:39:27.3662193Z   versioning
2024-03-02T16:39:27.3695863Z     is expected to be versioned
2024-03-02T16:39:27.3696525Z 
2024-03-02T16:39:27.3697024Z Reports::PeriodSupplyReportService
2024-03-02T16:39:27.3697988Z   #report
2024-03-02T16:39:27.5443812Z     should report zero values
2024-03-02T16:39:27.5444354Z     with values
2024-03-02T16:39:28.1629061Z       should report normal values
2024-03-02T16:39:28.1629837Z 
2024-03-02T16:39:28.1630035Z LineItem
2024-03-02T16:39:28.1631620Z   Scopes >
2024-03-02T16:39:28.1632448Z     ->active
2024-03-02T16:39:28.1961704Z       retrieves only those with active status
2024-03-02T16:39:28.1962249Z   Validations >
2024-03-02T16:39:28.2096730Z     requires a quantity
2024-03-02T16:39:28.2181724Z     requires an item
2024-03-02T16:39:28.3026790Z     the quantity must be a valid integer and cannot be 0
2024-03-02T16:39:28.3027482Z   Methods >
2024-03-02T16:39:28.3028416Z     item packages
2024-03-02T16:39:28.3029238Z       #package_count
2024-03-02T16:39:28.3030551Z         has packages
2024-03-02T16:39:28.3211084Z           is expected to eq "1"
2024-03-02T16:39:28.3211869Z         does not have packages
2024-03-02T16:39:28.3335990Z           is expected to be falsy
2024-03-02T16:39:28.3337202Z       #has_packages
2024-03-02T16:39:28.3338018Z         item has no package size
2024-03-02T16:39:28.3462819Z           is expected to be falsy
2024-03-02T16:39:28.3463616Z         item has package size
2024-03-02T16:39:28.3630706Z           is expected to be truthy
2024-03-02T16:39:28.3631547Z     #value_per_line_item
2024-03-02T16:39:28.3632634Z       item has no value
2024-03-02T16:39:28.3760489Z         is expected to eq 0
2024-03-02T16:39:28.3761453Z       item has value and quantity
2024-03-02T16:39:28.3937070Z         is expected to eq 25
2024-03-02T16:39:28.3937834Z   package_count
2024-03-02T16:39:28.4131330Z     is nil if there is no package_size
2024-03-02T16:39:28.4317351Z     is equal to the quanity divided by the package_size
2024-03-02T16:39:28.4318249Z   versioning
2024-03-02T16:39:28.4352942Z     is expected to be versioned
2024-03-02T16:39:28.4353424Z 
2024-03-02T16:39:28.4353737Z Reports::AdultIncontinenceReportService
2024-03-02T16:39:28.4354571Z   #report
2024-03-02T16:39:28.6095384Z     should report zero values
2024-03-02T16:39:28.6096151Z     with values
2024-03-02T16:39:29.2343237Z       should report normal values
2024-03-02T16:39:29.8368644Z       should handle null distribution quantity
2024-03-02T16:39:29.8369350Z 
2024-03-02T16:39:29.8369776Z ItemCategory
2024-03-02T16:39:29.8370661Z   validations
2024-03-02T16:39:29.8461477Z     is expected to validate that the length of :description is at most 250
2024-03-02T16:39:29.8547340Z     is expected to validate that :organization cannot be empty/falsy
2024-03-02T16:39:29.8638752Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T16:39:29.8843609Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-02T16:39:29.8845232Z   assocations
2024-03-02T16:39:29.8906809Z     is expected to have and belong to many partner_groups
2024-03-02T16:39:29.8941295Z     is expected to have many items
2024-03-02T16:39:29.8987837Z     is expected to belong to organization required: true
2024-03-02T16:39:29.8988729Z   versioning
2024-03-02T16:39:29.9021431Z     is expected to be versioned
2024-03-02T16:39:29.9024328Z 
2024-03-02T16:39:29.9024680Z DistributionMailer
2024-03-02T16:39:29.9025670Z   #reminder_email
2024-03-02T16:39:29.9027457Z     Text format
2024-03-02T16:39:29.9578613Z       renders the body with organization's email text
2024-03-02T16:39:29.9579724Z     HTML format
2024-03-02T16:39:30.0290454Z       renders the body with organization's email text
2024-03-02T16:39:30.0719298Z     with deliver_method: :delivery
2024-03-02T16:39:30.0720302Z       renders the body with 'delivery' specified
2024-03-02T16:39:30.0720799Z     with deliver_method: :pick_up
2024-03-02T16:39:30.1271638Z       renders the body with 'pick up' specified
2024-03-02T16:39:30.1272328Z   #partner_mailer
2024-03-02T16:39:30.1803380Z     renders the body with organization's email text
2024-03-02T16:39:30.2322410Z     renders the body with distributions text
2024-03-02T16:39:30.2323384Z     with deliver_method: :pick_up
2024-03-02T16:39:30.2897272Z       renders the body with 'picked up' specified
2024-03-02T16:39:30.2898063Z       when parners profile pick_up_email is present
2024-03-02T16:39:30.3434802Z         sends email to the primary contact and partner`s pickup person
2024-03-02T16:39:30.3436167Z         when pickup person happens to be the same as the primary contact
2024-03-02T16:39:30.3986988Z           does not send email twice
2024-03-02T16:39:30.3987804Z     with deliver_method: :delivery
2024-03-02T16:39:30.4499513Z       sends copy of email only to the partner
2024-03-02T16:39:30.5042446Z       renders the body with 'delivered' specified
2024-03-02T16:39:30.5043015Z     with distribution changes
2024-03-02T16:39:30.5599979Z       renders the body with changes that happened in the distribution
2024-03-02T16:39:30.5600738Z 
2024-03-02T16:39:30.5601111Z ItemCreateService
2024-03-02T16:39:30.5601745Z   #call
2024-03-02T16:39:30.5602816Z     when there are no issues
2024-03-02T16:39:30.7285024Z       should execute the expected methods
2024-03-02T16:39:30.9114747Z       should return an OpenStruct with success? set to true and the item
2024-03-02T16:39:30.9115870Z     when an issue occurs in transaction
2024-03-02T16:39:30.9116804Z       because a inventory item creation failed and raised an error
2024-03-02T16:39:31.0882670Z         should return a OpenStruct with the raised error
2024-03-02T16:39:31.0884007Z       because the organization_id does not match any Organization
2024-03-02T16:39:31.2655885Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-02T16:39:31.2656893Z       because the item create raised an error
2024-03-02T16:39:31.4404030Z         should return a OpenStruct with the raised error
2024-03-02T16:39:31.4404643Z 
2024-03-02T16:39:31.4405039Z RemoveRoleService
2024-03-02T16:39:31.4405881Z   #call
2024-03-02T16:39:31.4407010Z     when the role exists
2024-03-02T16:39:31.6416549Z       should remove the admin role when removing user role
2024-03-02T16:39:31.8370227Z       should remove the role
2024-03-02T16:39:32.0280185Z       should work with a type and ID instead of role ID
2024-03-02T16:39:32.0280981Z     when not enough information provided
2024-03-02T16:39:32.2203917Z       should raise an error
2024-03-02T16:39:32.2204487Z     when the role does not exist
2024-03-02T16:39:32.4143683Z       should raise an error
2024-03-02T16:39:32.4144229Z 
2024-03-02T16:39:32.4144464Z ItemsOutQuery
2024-03-02T16:39:32.4145264Z   items_out_query
2024-03-02T16:39:32.5374475Z     includes distributions, adjustments, transfers among sources
2024-03-02T16:39:32.6567877Z     returns a collection with the fields name, item_id, quantity
2024-03-02T16:39:32.6568681Z 
2024-03-02T16:39:32.6568904Z Purchase
2024-03-02T16:39:32.6572878Z   behaves like itemizable
2024-03-02T16:39:32.6574349Z     .line_items
2024-03-02T16:39:32.6575552Z       sorted
2024-03-02T16:39:32.7181273Z         displays the items, sorted by name
2024-03-02T16:39:32.7181956Z       combine!
2024-03-02T16:39:32.7640511Z         combines multiple line_items with the same item_id into a single record
2024-03-02T16:39:32.8155495Z         incrementally combines line_items on donations that have already been created
2024-03-02T16:39:32.8156440Z       total
2024-03-02T16:39:32.8571060Z         has an item total
2024-03-02T16:39:32.8571680Z       quantities_by_name
2024-03-02T16:39:32.8993797Z         leaves out zero-quantitied items if requested
2024-03-02T16:39:32.9406874Z         returns a hash of items with id, name, and quantity
2024-03-02T16:39:32.9407626Z     .to_a
2024-03-02T16:39:32.9408072Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T16:39:32.9772561Z         raises an error
2024-03-02T16:39:32.9773219Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T16:39:33.0139869Z         calls line_item_values
2024-03-02T16:39:33.0140555Z   versioning
2024-03-02T16:39:33.0181700Z     is expected to be versioned
2024-03-02T16:39:33.0182227Z   Callbacks >
2024-03-02T16:39:33.0384749Z     automatically combines duplicate line_item records when they're created
2024-03-02T16:39:33.0562583Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T16:39:33.0563624Z   Validations >
2024-03-02T16:39:33.0648301Z     requires an inventory (storage location)
2024-03-02T16:39:33.0733697Z     ensures that the issued at is no earlier than 2000
2024-03-02T16:39:33.0906198Z     is not valid if any category is non-zero but does not add up to the total
2024-03-02T16:39:33.0999871Z     is not valid if period supplies is non-zero but no other category is
2024-03-02T16:39:33.1080315Z     must belong to an organization
2024-03-02T16:39:33.1168406Z     is valid if categories have no values
2024-03-02T16:39:33.1259999Z     is not valid if categories do not add up
2024-03-02T16:39:33.1347146Z     is valid if all categories add up to total
2024-03-02T16:39:33.1539798Z     is invalid when the line items are invalid
2024-03-02T16:39:33.1540493Z   Associations >
2024-03-02T16:39:33.1540891Z     items >
2024-03-02T16:39:33.1740880Z       has_many
2024-03-02T16:39:33.1741390Z   Methods >
2024-03-02T16:39:33.1741947Z     remove
2024-03-02T16:39:33.2465542Z       removes the item from the purchase
2024-03-02T16:39:33.3306402Z       fails gracefully if the item doesn't exist
2024-03-02T16:39:33.3307113Z     storage_view
2024-03-02T16:39:33.4026407Z       returns name of storage location
2024-03-02T16:39:33.4027249Z   Scopes >
2024-03-02T16:39:33.4027705Z     during >
2024-03-02T16:39:33.4305870Z       returns all purchases created between two dates
2024-03-02T16:39:33.4306584Z 
2024-03-02T16:39:33.4306918Z Exports::ExportDonationsCSVService
2024-03-02T16:39:33.4307722Z   #generate_csv_data
2024-03-02T16:39:33.5472147Z     should match the expected content for the csv
2024-03-02T16:39:33.5472724Z 
2024-03-02T16:39:33.5472956Z DeallocateKitInventoryService
2024-03-02T16:39:33.5473979Z   #deallocate
2024-03-02T16:39:33.5474716Z     when inventory items are available
2024-03-02T16:39:33.5476275Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-02T16:39:33.8572106Z         raises error about inconsistent inventory in or out
2024-03-02T16:39:33.8573110Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-02T16:39:34.1855466Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-02T16:39:34.1856548Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-02T16:39:34.7060741Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-02T16:39:34.7061707Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-02T16:39:34.9907546Z         raises error about KitAllocation not found
2024-03-02T16:39:34.9908131Z   #error
2024-03-02T16:39:34.9909659Z     when the storage location organization doesn't match
2024-03-02T16:39:35.2194882Z       returns error
2024-03-02T16:39:35.2196110Z 
2024-03-02T16:39:35.2196365Z DistributionItemizedBreakdownService
2024-03-02T16:39:35.2200232Z   #fetch_csv
2024-03-02T16:39:35.6035349Z     should output the expected output but in CSV format
2024-03-02T16:39:35.6036077Z   #fetch
2024-03-02T16:39:35.9841701Z     should include the break down of items distributed with onhand data
2024-03-02T16:39:35.9842424Z 
2024-03-02T16:39:35.9842547Z TransferDestroyService
2024-03-02T16:39:35.9843347Z   #call
2024-03-02T16:39:35.9844576Z     when an issue occurs in transaction
2024-03-02T16:39:35.9845683Z       because the transfer destroy raised an error
2024-03-02T16:39:36.1742082Z         should return a OpenStruct with the raised error
2024-03-02T16:39:36.1743226Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-02T16:39:36.3643505Z         should return a OpenStruct with the raised error
2024-03-02T16:39:36.3644398Z       because the transfer_id does not match any Transfer
2024-03-02T16:39:36.5498800Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-02T16:39:36.5500400Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-02T16:39:36.7380565Z         should return a OpenStruct with the raised error
2024-03-02T16:39:36.7381191Z     when there are no issues
2024-03-02T16:39:36.9430354Z       should return an OpenStruct with success? set to true
2024-03-02T16:39:37.1316946Z       should execute the expected methods
2024-03-02T16:39:37.1317675Z     because transfer should not be deleted
2024-03-02T16:39:37.3206871Z       should return an OpenStruct with the raised error
2024-03-02T16:39:37.3207611Z 
2024-03-02T16:39:37.3207834Z DonationCreateService
2024-03-02T16:39:37.3208349Z   #call
2024-03-02T16:39:37.3432373Z     should create the donation
2024-03-02T16:39:37.3432916Z 
2024-03-02T16:39:37.3433169Z AccountRequestMailer
2024-03-02T16:39:37.3434562Z   #confirmation
2024-03-02T16:39:37.3674377Z     should have the correct subject
2024-03-02T16:39:37.3803648Z     should be sent to the specified account_request email
2024-03-02T16:39:37.3925249Z     should be from no-reply@humanessentials.app
2024-03-02T16:39:37.3926065Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:39:37.3972619Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:39:37.3973690Z     HTML format
2024-03-02T16:39:37.4093642Z       should include the instruction video link
2024-03-02T16:39:37.4215165Z       should include the button to confirm the request
2024-03-02T16:39:37.4333068Z       should include the staging/demo account information
2024-03-02T16:39:37.4333641Z     Text format
2024-03-02T16:39:37.4453836Z       should include the button to confirm the request
2024-03-02T16:39:37.4570249Z       should include the instruction video link
2024-03-02T16:39:37.4684553Z       should include the staging/demo account information
2024-03-02T16:39:37.4685297Z   #approval_request
2024-03-02T16:39:37.4998759Z     should include details of the account request
2024-03-02T16:39:37.5140743Z     should have the correct subject
2024-03-02T16:39:37.5277439Z     should include the admin link to reject the organization
2024-03-02T16:39:37.5422929Z     should include the admin link to create the new organization from the account request
2024-03-02T16:39:37.5556487Z     should be sent to the info@humanessentials.app email address
2024-03-02T16:39:37.5557631Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:39:37.5606996Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:39:37.5607739Z   #rejection
2024-03-02T16:39:37.5730143Z     should be sent to the correct email address
2024-03-02T16:39:37.5846400Z     should include the rejection reason
2024-03-02T16:39:37.5954621Z     should have the correct subject
2024-03-02T16:39:37.5955505Z     when the account_request_id provided does not match any AccountRequest
2024-03-02T16:39:37.6000651Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-02T16:39:37.6001753Z 
2024-03-02T16:39:37.6002043Z DonationSitesController
2024-03-02T16:39:37.6003271Z   While not signed in
2024-03-02T16:39:37.6064205Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:37.6064965Z   While signed in
2024-03-02T16:39:37.6065837Z     GET #index
2024-03-02T16:39:37.6193951Z       returns http success
2024-03-02T16:39:37.6194592Z     GET #edit
2024-03-02T16:39:37.6324877Z       returns http success
2024-03-02T16:39:37.6325492Z     POST #import_csv
2024-03-02T16:39:37.6326048Z       behaves like csv import
2024-03-02T16:39:37.6327040Z         csv file with wrong headers
2024-03-02T16:39:37.6453544Z           redirects to :index
2024-03-02T16:39:37.6557720Z           presents a flash error message
2024-03-02T16:39:37.6558469Z         without a csv file
2024-03-02T16:39:37.6653681Z           redirects to :index
2024-03-02T16:39:37.6751932Z           presents a flash error message
2024-03-02T16:39:37.6752573Z         with a csv file
2024-03-02T16:39:37.6885089Z           presents a flash notice message
2024-03-02T16:39:37.6939989Z           invokes .import_csv
2024-03-02T16:39:37.7071137Z           redirects to :index
2024-03-02T16:39:37.7071987Z     DELETE #destroy
2024-03-02T16:39:37.7224241Z       returns http success
2024-03-02T16:39:37.7225113Z     GET #new
2024-03-02T16:39:37.7335405Z       returns http success
2024-03-02T16:39:37.7335921Z     GET #show
2024-03-02T16:39:37.7466363Z       returns http success
2024-03-02T16:39:37.7466951Z     Looking at a different organization
2024-03-02T16:39:37.9196909Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T16:39:37.9197576Z 
2024-03-02T16:39:37.9198138Z OrganizationStats
2024-03-02T16:39:37.9199214Z   storage_locations_added method >
2024-03-02T16:39:37.9200294Z     current org is not nil >
2024-03-02T16:39:37.9240838Z       should return actual count of locations
2024-03-02T16:39:37.9241384Z     current org is nil >
2024-03-02T16:39:37.9274468Z       should return 0
2024-03-02T16:39:37.9275233Z   partners_added method >
2024-03-02T16:39:37.9276309Z     current org is nil >
2024-03-02T16:39:37.9308701Z       should return 0
2024-03-02T16:39:37.9309216Z     current org is not nil >
2024-03-02T16:39:37.9342766Z       should return actual count of partners
2024-03-02T16:39:37.9343423Z   donation_sites_added method >
2024-03-02T16:39:37.9344339Z     current org is nil >
2024-03-02T16:39:37.9376553Z       should return 0
2024-03-02T16:39:37.9377028Z     current org is not nil >
2024-03-02T16:39:37.9410401Z       should return actual count of donation sites
2024-03-02T16:39:37.9411067Z   locations_with_inventory method >
2024-03-02T16:39:37.9412039Z     current org is nil >
2024-03-02T16:39:37.9444224Z       should return an empty array
2024-03-02T16:39:37.9444884Z     current org is not nil + locations have items >
2024-03-02T16:39:37.9794434Z       should return storage location
2024-03-02T16:39:37.9795195Z     current org is not nil + no locations have items >
2024-03-02T16:39:37.9861564Z       should return an empty array
2024-03-02T16:39:37.9862405Z 
2024-03-02T16:39:37.9862585Z ItemsInQuery
2024-03-02T16:39:37.9863703Z   items_in
2024-03-02T16:39:38.3566291Z     does not count transfers going in the negative direction
2024-03-02T16:39:38.7046481Z     does not count negative adjustments towards in-flow
2024-03-02T16:39:38.9852757Z     returns a collection with the fields name, item_id, quantity
2024-03-02T16:39:39.2661967Z     includes donations, purchases, adjustments, transfers among sources
2024-03-02T16:39:39.2662709Z 
2024-03-02T16:39:39.2663029Z ApplicationController
2024-03-02T16:39:39.2664403Z   dashboard_path_from_current_role
2024-03-02T16:39:39.2665437Z     As a user without super admin status
2024-03-02T16:39:39.2870277Z       links to the general dashboard
2024-03-02T16:39:39.2870890Z     As a super admin
2024-03-02T16:39:39.3110417Z       links to the admin dashboard
2024-03-02T16:39:39.3111020Z   current_partner
2024-03-02T16:39:39.3111769Z     As an org user
2024-03-02T16:39:39.3249819Z       should return nil
2024-03-02T16:39:39.3250347Z     As a partner user
2024-03-02T16:39:39.3810016Z       should return the first partner role
2024-03-02T16:39:39.3810734Z       with a changed current role
2024-03-02T16:39:39.4396116Z         should return the first partner role
2024-03-02T16:39:39.4397001Z   current_organization
2024-03-02T16:39:39.4398028Z     As an org user
2024-03-02T16:39:39.7985641Z       should return the first org role
2024-03-02T16:39:39.7986285Z       with a changed current role
2024-03-02T16:39:40.1573578Z         should return the first org role
2024-03-02T16:39:40.1574295Z     As a partner user
2024-03-02T16:39:40.1728160Z       should return nil
2024-03-02T16:39:40.1728945Z 
2024-03-02T16:39:40.1729225Z NotifyPartnerJob
2024-03-02T16:39:40.1730352Z   #perform
2024-03-02T16:39:40.1835688Z     is expected to call RequestsConfirmationMailer
2024-03-02T16:39:40.1879575Z     avoids exception when request doesn't exist
2024-03-02T16:39:40.1880306Z     when the request's partner is deactivated
2024-03-02T16:39:40.2164967Z       does not send the confirmation email
2024-03-02T16:39:40.2165774Z 
2024-03-02T16:39:40.2166180Z Reports::OtherProductsReportService
2024-03-02T16:39:40.2167232Z   #report
2024-03-02T16:39:40.8342471Z     should report normal values
2024-03-02T16:39:41.0151557Z     should report zero values
2024-03-02T16:39:41.0152040Z 
2024-03-02T16:39:41.0152200Z NDBNMember
2024-03-02T16:39:41.0153447Z   validations
2024-03-02T16:39:41.0233272Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-02T16:39:41.0300693Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-02T16:39:41.0353897Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-02T16:39:41.0354704Z   #full_name
2024-03-02T16:39:41.0390499Z     should equal the id and the account name
2024-03-02T16:39:41.0391159Z   versioning
2024-03-02T16:39:41.0426669Z     is expected to be versioned
2024-03-02T16:39:41.1322118Z W, [2024-03-02T08:39:41.131905 #2336]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-02T16:39:41.1323751Z W, [2024-03-02T08:39:41.131969 #2336]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-02T16:39:41.1325810Z W, [2024-03-02T08:39:41.131985 #2336]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-02T16:39:41.1329044Z W, [2024-03-02T08:39:41.132014 #2336]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-02T16:39:41.1330372Z 
2024-03-02T16:39:41.1330927Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-02T16:39:41.1331538Z 
2024-03-02T16:39:41.1332449Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-02T16:39:41.1333538Z      # Not yet implemented
2024-03-02T16:39:41.1333987Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-02T16:39:41.1334348Z 
2024-03-02T16:39:41.1335259Z   2) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-02T16:39:41.1336578Z      # Temporarily skipped with xit
2024-03-02T16:39:41.1337289Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-02T16:39:41.1337903Z 
2024-03-02T16:39:41.1338232Z Finished in 37.47 seconds (files took 8.5 seconds to load)
2024-03-02T16:39:41.1338977Z 507 examples, 0 failures, 2 pending
2024-03-02T16:39:41.1339374Z 
2024-03-02T16:39:41.1339554Z Randomized with seed 22701
2024-03-02T16:39:41.1339878Z 
2024-03-02T16:39:41.6356105Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3760 / 6427 LOC (58.5%) covered.
2024-03-02T16:39:42.0805521Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10679 LOC (0.36%) covered.
