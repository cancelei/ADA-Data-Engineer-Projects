2024-03-04T19:17:02.0120434Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T19:17:02.0121657Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T19:17:02.0150048Z shell: /usr/bin/bash -e {0}
2024-03-04T19:17:02.0150418Z env:
2024-03-04T19:17:02.0150773Z   POSTGRES_HOST: localhost
2024-03-04T19:17:02.0151259Z   DATABASE_HOST: localhost
2024-03-04T19:17:02.0151656Z   PG_USERNAME: postgres
2024-03-04T19:17:02.0152026Z   PG_PASSWORD: password
2024-03-04T19:17:02.0152507Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T19:17:02.0152952Z   POSTGRES_PORT: 5432
2024-03-04T19:17:02.0153384Z   PGHOST: localhost
2024-03-04T19:17:02.0153746Z   PGUSER: postgres
2024-03-04T19:17:02.0154087Z   RAILS_ENV: test
2024-03-04T19:17:02.0154537Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T19:17:02.0154997Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T19:17:02.0155443Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T19:17:02.0155987Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T19:17:02.0156567Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T19:17:02.0157291Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T19:17:02.0157960Z ##[endgroup]
2024-03-04T19:17:07.6904747Z W, [2024-03-04T19:17:07.690171 #2330]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T19:17:07.6906779Z W, [2024-03-04T19:17:07.690229 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:07.6909181Z W, [2024-03-04T19:17:07.690254 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:07.6914583Z W, [2024-03-04T19:17:07.690283 #2330]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T19:17:10.7624296Z W, [2024-03-04T19:17:10.762088 #2330]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T19:17:10.7676719Z W, [2024-03-04T19:17:10.762127 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:10.7678380Z W, [2024-03-04T19:17:10.762141 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:10.7680507Z W, [2024-03-04T19:17:10.762185 #2330]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T19:17:10.7687908Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T19:17:19.1132517Z 
2024-03-04T19:17:19.1133324Z Randomized with seed 21813
2024-03-04T19:17:20.0251818Z 
2024-03-04T19:17:20.0252493Z Profiles
2024-03-04T19:17:20.0253620Z   GET #edit
2024-03-04T19:17:20.1621075Z     returns http success
2024-03-04T19:17:20.1621834Z   POST #update
2024-03-04T19:17:20.1622737Z     when updating an existing value to a blank value
2024-03-04T19:17:20.2133326Z       update partner
2024-03-04T19:17:20.2561076Z       should have blank values
2024-03-04T19:17:20.2561939Z     successful save
2024-03-04T19:17:20.2980124Z       redirects to #show
2024-03-04T19:17:20.3392682Z       update partner
2024-03-04T19:17:20.3393708Z 
2024-03-04T19:17:20.3393999Z /partners/profiles
2024-03-04T19:17:20.3395576Z   GET #show
2024-03-04T19:17:20.3993799Z     displays the partner
2024-03-04T19:17:20.4660003Z     shows correct values for yes/no buttons
2024-03-04T19:17:20.4660925Z   PUT #update
2024-03-04T19:17:20.5169686Z     updates the partner and profile
2024-03-04T19:17:20.5170336Z     when updating an existing value to a blank value
2024-03-04T19:17:20.5662667Z       does store N/A in the database
2024-03-04T19:17:20.6145312Z       does not update other partner profile attributes to blank
2024-03-04T19:17:20.6646739Z       updates the partner profile attribute to a blank value
2024-03-04T19:17:20.6648003Z     with no social media
2024-03-04T19:17:20.7616138Z       shows an error
2024-03-04T19:17:20.7617234Z   GET #edit
2024-03-04T19:17:20.8485229Z     does not have default radio button value when value is nil
2024-03-04T19:17:20.9303803Z     displays the partner
2024-03-04T19:17:21.0139591Z     has "No" radio button value when value is false
2024-03-04T19:17:21.1028027Z     has "Yes" radio button value when value is true
2024-03-04T19:17:21.1028738Z 
2024-03-04T19:17:21.1028942Z Donations
2024-03-04T19:17:21.1032885Z   while signed in
2024-03-04T19:17:21.1034841Z     when an non-finalized audit has been performed on the donated items
2024-03-04T19:17:21.3171413Z       does not shows a warning
2024-03-04T19:17:21.3172116Z     GET #edit
2024-03-04T19:17:21.3172861Z       when an finalized audit has been performed on the donated items
2024-03-04T19:17:21.4443009Z         shows a warning
2024-03-04T19:17:21.4443587Z     when no audit has been performed
2024-03-04T19:17:21.5426881Z       doesn't show a warning
2024-03-04T19:17:21.5427726Z     GET #index
2024-03-04T19:17:21.5428493Z       html
2024-03-04T19:17:21.5958397Z         is expected to be successful
2024-03-04T19:17:21.6357262Z         should have the columns source and details
2024-03-04T19:17:21.6358376Z         when given a product drive
2024-03-04T19:17:21.6861070Z           should display Product Drive and the name of the drive
2024-03-04T19:17:21.6862292Z         when given a misc donation
2024-03-04T19:17:21.7292985Z           should display Misc Donation and a truncated comment
2024-03-04T19:17:21.7294004Z         when given a donation site
2024-03-04T19:17:21.7777401Z           should display Donation Site and the name of the site
2024-03-04T19:17:21.7778211Z         when given a manufacturer
2024-03-04T19:17:21.8250570Z           should display Manufacturer and the manufacturer name
2024-03-04T19:17:21.8251616Z       csv
2024-03-04T19:17:21.8491133Z         is expected to be successful
2024-03-04T19:17:21.8492732Z 
2024-03-04T19:17:21.8493050Z Managing requests
2024-03-04T19:17:21.8494530Z   creating a new quantity request
2024-03-04T19:17:21.8495413Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:17:21.8496758Z       WHEN they create a request with only a comment
2024-03-04T19:17:29.6191664Z         should be created without any issue
2024-03-04T19:17:29.6192782Z       Select Input Tests
2024-03-04T19:17:29.6193496Z         WHEN they reach the page
2024-03-04T19:17:30.4978092Z           should show the proper items in the select box
2024-03-04T19:17:30.4979364Z           WHEN they create a request improperly
2024-03-04T19:17:31.8544861Z             should show the proper items in the select box
2024-03-04T19:17:31.8546185Z       WHEN they create a request completely empty request
2024-03-04T19:17:32.7717735Z         should show an error message with the instructions
2024-03-04T19:17:32.7718518Z       WHEN they create a request properly
2024-03-04T19:17:32.7719690Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:17:35.0525049Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T19:17:35.0526233Z       WHEN they create a request with blank lines
2024-03-04T19:17:36.4208269Z         should be created without any issue
2024-03-04T19:17:36.4209220Z   creating a # individuals request
2024-03-04T19:17:36.4210495Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:17:36.4212676Z       Select Input Tests
2024-03-04T19:17:36.4213686Z         WHEN they reach the page
2024-03-04T19:17:37.2763441Z           should show the proper items in the select box
2024-03-04T19:17:37.2764432Z           WHEN they create a request improperly
2024-03-04T19:17:38.5970691Z             should show the proper items in the select box
2024-03-04T19:17:38.5971765Z       WHEN they create a request with only a comment
2024-03-04T19:17:39.5485946Z         should be created without any issue
2024-03-04T19:17:39.5486804Z       WHEN they create a request improperly by not inputting anything
2024-03-04T19:17:40.4819199Z         should show an error message with the instructions
2024-03-04T19:17:40.4820207Z       WHEN they create a request properly
2024-03-04T19:17:40.4821528Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:17:42.5909985Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T19:17:42.5911149Z       WHEN they create a request with blank lines
2024-03-04T19:17:43.9390850Z         should be created without any issue
2024-03-04T19:17:43.9391620Z       WHEN they create a request completely empty request
2024-03-04T19:17:44.8364512Z         should show an error message with the instructions
2024-03-04T19:17:44.8365842Z 
2024-03-04T19:17:44.8366131Z Adjustments
2024-03-04T19:17:44.8367367Z   while signed in
2024-03-04T19:17:44.8368229Z     GET #new
2024-03-04T19:17:44.8894046Z       is successful
2024-03-04T19:17:44.8895134Z     POST #create
2024-03-04T19:17:44.8895830Z       with valid params
2024-03-04T19:17:44.9224053Z         redirects to the #show after created adjustment
2024-03-04T19:17:44.9475526Z         assigns a user id from the current user
2024-03-04T19:17:44.9739987Z         creates a new Adjustment
2024-03-04T19:17:44.9995448Z         assigns a newly created adjustment as @adjustment
2024-03-04T19:17:44.9996613Z       with invalid params
2024-03-04T19:17:45.0371380Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T19:17:45.0741967Z         re-renders the 'new' template
2024-03-04T19:17:45.0743033Z     GET #index
2024-03-04T19:17:45.0743565Z       csv
2024-03-04T19:17:45.0993029Z         is expected to be successful
2024-03-04T19:17:45.0993966Z       html
2024-03-04T19:17:45.1406379Z         is successful
2024-03-04T19:17:45.1407299Z         when filtering by date
2024-03-04T19:17:45.1408025Z           when date parameters are not supplied
2024-03-04T19:17:45.1911880Z             returns all objects
2024-03-04T19:17:45.1912698Z           when date parameters are supplied
2024-03-04T19:17:45.2396989Z             only returns the correct objects
2024-03-04T19:17:45.2397952Z     GET #show
2024-03-04T19:17:45.2737310Z       is expected to be successful
2024-03-04T19:17:45.2738429Z 
2024-03-04T19:17:45.2738777Z Admin::Partners
2024-03-04T19:17:45.2739824Z   When logged in as a super admin
2024-03-04T19:17:45.2741272Z     GET #show
2024-03-04T19:17:45.3236217Z       returns http success
2024-03-04T19:17:45.3237248Z     PUT #update
2024-03-04T19:17:45.3237917Z       successful save
2024-03-04T19:17:45.3586575Z         redirects
2024-03-04T19:17:45.3925274Z         updates partner
2024-03-04T19:17:45.3926042Z       unsuccessful save due to empty params
2024-03-04T19:17:45.4457337Z         renders #edit template with error message
2024-03-04T19:17:45.4457971Z     GET #index
2024-03-04T19:17:45.4769927Z       returns http success
2024-03-04T19:17:45.4770786Z     GET #edit
2024-03-04T19:17:45.5336152Z       returns http success
2024-03-04T19:17:45.5336771Z 
2024-03-04T19:17:45.5337091Z Admin Organization Management
2024-03-04T19:17:45.5338839Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T19:17:47.5545934Z     creates a new organization
2024-03-04T19:17:47.5546938Z   While signed in as an Administrative User (super admin)
2024-03-04T19:17:48.8964504Z     can view organization details
2024-03-04T19:17:49.9318897Z     filters by organizations by name in organizations index page
2024-03-04T19:17:51.8842392Z     creates a new organization
2024-03-04T19:17:51.8843126Z 
2024-03-04T19:17:51.8843444Z Kit management
2024-03-04T19:17:53.3689148Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T19:17:53.9450217Z   should not display inactive storage locations under allocations
2024-03-04T19:17:54.9037790Z   can create a new kit as a user with the proper quantity
2024-03-04T19:17:54.9039074Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T19:17:56.1167141Z     will not change quantity amounts when allocating
2024-03-04T19:17:56.1168067Z   when there is no kit quantity
2024-03-04T19:17:57.2409548Z     will not change quantity amounts when deallocating
2024-03-04T19:17:57.2410209Z 
2024-03-04T19:17:57.2410464Z Vendor
2024-03-04T19:17:57.2412530Z   When vendor have purchases associated with them already
2024-03-04T19:17:57.8449354Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T19:17:58.4224589Z     can have existing vendors show in the #index with some summary stats
2024-03-04T19:17:58.4225375Z   when creating a new vendor
2024-03-04T19:17:59.1875239Z     cannot add a new vendor instance with empty attributes
2024-03-04T19:17:59.9841912Z     can create a new vendor instance as a user
2024-03-04T19:17:59.9842563Z   When a user views the index page
2024-03-04T19:18:00.4683060Z     should have the vendor names in alphabetical order
2024-03-04T19:18:00.4683710Z   when editing an existing vendor
2024-03-04T19:18:01.2695176Z     can update the contact info for a vendor as a user
2024-03-04T19:18:02.0523930Z     does not update a vendor with empty attributes
2024-03-04T19:18:02.0524848Z 
2024-03-04T19:18:02.0525189Z Purchases
2024-03-04T19:18:02.0526642Z   while signed in as an organization admin
2024-03-04T19:18:03.2232762Z     allows deletion of a purchase
2024-03-04T19:18:03.2233770Z   while signed in as a normal user
2024-03-04T19:18:03.2234622Z     When creating a new purchase
2024-03-04T19:18:03.7434346Z       should not display inactive storage locations in dropdown
2024-03-04T19:18:03.7435252Z       Editing purchase
2024-03-04T19:18:04.2554422Z         A user can see purchased_from value
2024-03-04T19:18:05.0427414Z         A user can view another organizations purchase
2024-03-04T19:18:05.0428355Z       via barcode entry
2024-03-04T19:18:05.9529034Z         a user can add items via scanning them in by barcode
2024-03-04T19:18:07.2289177Z         a user can add items that do not yet have a barcode
2024-03-04T19:18:08.1892100Z         User scan same barcode 2 times
2024-03-04T19:18:08.1893089Z       via manual entry
2024-03-04T19:18:09.4279750Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T19:18:10.6392135Z         User can create a purchase IN THE PAST
2024-03-04T19:18:11.6970959Z         Does not include inactive items in the line item fields
2024-03-04T19:18:12.7434323Z         User can create vendor from purchase
2024-03-04T19:18:13.6255906Z         User can create a purchase using dollars decimal amount
2024-03-04T19:18:13.6256844Z         when creating a purchase incorrectly
2024-03-04T19:18:14.4419192Z           should display failure with error messages
2024-03-04T19:18:15.4300183Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T19:18:15.4301427Z     When visiting the index page
2024-03-04T19:18:15.4302153Z       In the middle of the year
2024-03-04T19:18:16.2356264Z         User can click to the new purchase form
2024-03-04T19:18:17.0141992Z         User sees total purchases value
2024-03-04T19:18:17.7645394Z         User sees purchased date column
2024-03-04T19:18:17.7646357Z       When filtering on the index page
2024-03-04T19:18:18.5973793Z         User can filter the #index by storage location
2024-03-04T19:18:19.5487894Z         User can filter the #index by vendor
2024-03-04T19:18:19.5488702Z         behaves like Date Range Picker
2024-03-04T19:18:19.5489651Z           when choosing 'All Time'
2024-03-04T19:18:20.6194597Z             shows all the records
2024-03-04T19:18:20.6195430Z           when choosing 'Last Month'
2024-03-04T19:18:21.6972188Z             shows only 2 of the records
2024-03-04T19:18:21.6973419Z           when choosing a date range that only includes the previous week
2024-03-04T19:18:22.7683930Z             shows only 1 record
2024-03-04T19:18:22.7687810Z     When visiting an existing purchase
2024-03-04T19:18:23.2150209Z       does not allow deletion of a purchase
2024-03-04T19:18:23.2152310Z 
2024-03-04T19:18:23.2152723Z StorageLocations
2024-03-04T19:18:23.2153880Z   While signed in
2024-03-04T19:18:23.2156589Z     GET #show
2024-03-04T19:18:23.2157374Z       csv
2024-03-04T19:18:23.2636713Z         should be successful
2024-03-04T19:18:23.2637586Z       html
2024-03-04T19:18:23.3297732Z         should return a correct response
2024-03-04T19:18:23.3298617Z         with version date set
2024-03-04T19:18:23.3299363Z           with a version found
2024-03-04T19:18:23.4094437Z             should show the version specified
2024-03-04T19:18:23.4095327Z           with no version found
2024-03-04T19:18:23.4777243Z             should show N/A
2024-03-04T19:18:23.4778308Z     GET #edit
2024-03-04T19:18:23.9163655Z       returns http success
2024-03-04T19:18:23.9164198Z     GET #new
2024-03-04T19:18:23.9484738Z       returns http success
2024-03-04T19:18:23.9485479Z     PUT #reactivate
2024-03-04T19:18:23.9652411Z       undiscards
2024-03-04T19:18:23.9653062Z     Looking at a different organization
2024-03-04T19:18:24.1378394Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:18:24.1379588Z     GET #index
2024-03-04T19:18:24.1380147Z       html
2024-03-04T19:18:24.1751502Z         succeeds
2024-03-04T19:18:24.1752364Z         with inactive locations
2024-03-04T19:18:24.2108849Z           does not includes the inactive location
2024-03-04T19:18:24.2481513Z           with include_inactive_locations
2024-03-04T19:18:24.2482407Z             includes the inactive location
2024-03-04T19:18:24.2483165Z       csv
2024-03-04T19:18:24.3473329Z         includes headers followed by alphabetized item names
2024-03-04T19:18:24.3665475Z         succeeds
2024-03-04T19:18:24.3666396Z     GET #inventory
2024-03-04T19:18:24.3667416Z       without any overrides
2024-03-04T19:18:24.4153066Z         returns a collection that only includes items at the storage location
2024-03-04T19:18:24.4154180Z       when also including inactive items
2024-03-04T19:18:24.4756563Z         returns a collection that also includes items that have been deactivated
2024-03-04T19:18:24.4757711Z       when also including omitted items
2024-03-04T19:18:24.5204550Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T19:18:24.5672654Z         contains a collection of ducktyped entries that respond the same
2024-03-04T19:18:24.5673733Z     GET #destroy
2024-03-04T19:18:24.5922985Z       redirects to #index
2024-03-04T19:18:24.5924063Z     PUT #deactivate
2024-03-04T19:18:24.6098360Z       discards
2024-03-04T19:18:24.6099151Z       with inventory
2024-03-04T19:18:24.6499042Z         does not discard
2024-03-04T19:18:24.6499770Z     POST #import_csv
2024-03-04T19:18:24.6500839Z       without a csv file
2024-03-04T19:18:24.6612697Z         redirects to :index
2024-03-04T19:18:24.6723776Z         presents a flash error message
2024-03-04T19:18:24.6724763Z       csv file with wrong headers
2024-03-04T19:18:24.6846567Z         presents a flash error message
2024-03-04T19:18:24.6962922Z         redirects
2024-03-04T19:18:24.6963596Z       with a csv file
2024-03-04T19:18:24.7106646Z         redirects
2024-03-04T19:18:24.7156853Z         invokes .import_csv
2024-03-04T19:18:24.7309278Z         presents a flash notice message
2024-03-04T19:18:24.7311215Z   While not signed in
2024-03-04T19:18:24.7370929Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:18:24.7375064Z 
2024-03-04T19:18:24.7375418Z Dashboard
2024-03-04T19:18:24.7376572Z   With an existing essentials bank
2024-03-04T19:18:24.7378171Z     Signage
2024-03-04T19:18:27.6471924Z       shows their organization name unless they have a logo set
2024-03-04T19:18:27.6472993Z     Product Drives
2024-03-04T19:18:28.2412562Z       has a widget for product drive summary data
2024-03-04T19:18:28.2414138Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:18:28.2415290Z         filtering to 'This Month'
2024-03-04T19:18:29.5822421Z           shows the correct total money raised
2024-03-04T19:18:30.9293219Z           shows the correct total donations
2024-03-04T19:18:34.4254247Z           shows 0 Recent Donation link(s)
2024-03-04T19:18:34.4256517Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:34.4257911Z         filtering to 'Last 7 Days'
2024-03-04T19:18:35.8456177Z           shows 2 Recent Donation link(s)
2024-03-04T19:18:37.2529021Z           shows the correct total money raised
2024-03-04T19:18:38.6272148Z           shows the correct total donations
2024-03-04T19:18:38.6273878Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 3 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:38.6275112Z         filtering to 'Last 30 Days'
2024-03-04T19:18:40.1597179Z           shows the correct total donations
2024-03-04T19:18:41.5706785Z           shows the correct total money raised
2024-03-04T19:18:43.0097119Z           shows 3 Recent Donation link(s)
2024-03-04T19:18:43.0097973Z       Product drive behaviour with Mixed Donation types
2024-03-04T19:18:43.6750390Z         only shows product drive donations as product drive donations
2024-03-04T19:18:44.3491016Z         only counts product drive donations for product drive
2024-03-04T19:18:45.0259344Z         only counts product drive money raised
2024-03-04T19:18:45.0261216Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:45.0262538Z         filtering to 'Today'
2024-03-04T19:18:46.4836096Z           shows 1 Recent Donation link(s)
2024-03-04T19:18:47.8596281Z           shows the correct total donations
2024-03-04T19:18:49.2092605Z           shows the correct total money raised
2024-03-04T19:18:49.2094617Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 2 during 2022-03-04..2024-01-28, and 1 on 2024-01-29
2024-03-04T19:18:49.2096182Z         filtering to '' (March 4, 2022 - January 28, 2024)
2024-03-04T19:18:50.5974234Z           shows the correct total money raised
2024-03-04T19:18:52.0120229Z           shows 2 Recent Donation link(s)
2024-03-04T19:18:53.4485864Z           shows the correct total donations
2024-03-04T19:18:53.4487292Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 3 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:18:53.4488858Z         filtering to 'Yesterday'
2024-03-04T19:18:54.8471431Z           shows the correct total donations
2024-03-04T19:18:56.2709144Z           shows the correct total money raised
2024-03-04T19:18:57.8394333Z           shows 3 Recent Donation link(s)
2024-03-04T19:18:57.8396338Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:18:57.8397735Z         filtering to 'This Year'
2024-03-04T19:18:59.2038382Z           shows the correct total donations
2024-03-04T19:19:00.5483719Z           shows the correct total money raised
2024-03-04T19:19:01.9002486Z           shows 1 Recent Donation link(s)
2024-03-04T19:19:01.9003948Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:19:01.9007047Z         filtering to 'Last Month'
2024-03-04T19:19:03.3448451Z           shows the correct total money raised
2024-03-04T19:19:04.7869808Z           shows the correct total donations
2024-03-04T19:19:06.2261872Z           shows 3 Recent Donation link(s)
2024-03-04T19:19:06.2262920Z     Distributions
2024-03-04T19:19:07.1274665Z       has a link to create a new distribution
2024-03-04T19:19:07.1276448Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 3 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:07.1277706Z         filtering to 'Last 7 Days'
2024-03-04T19:19:08.5339259Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:08.5341204Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:19:08.5342623Z         filtering to 'Yesterday'
2024-03-04T19:19:09.8879672Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T19:19:09.8881703Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:09.8882860Z         filtering to 'All Time'
2024-03-04T19:19:13.2172390Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:19:13.2174036Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:19:13.2175011Z         filtering to 'Last Month'
2024-03-04T19:19:14.6430816Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:14.6432413Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:14.6433405Z         filtering to 'Last 30 Days'
2024-03-04T19:19:16.0873958Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:16.0875827Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:16.0877083Z         filtering to 'Today'
2024-03-04T19:19:19.4863931Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:19:19.4866016Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:19:19.4867274Z         filtering to 'This Year'
2024-03-04T19:19:20.9279440Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:20.9281447Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 4 during 2022-03-04..2023-10-14, and 1 on 2023-10-15
2024-03-04T19:19:20.9282447Z         filtering to '' (March 4, 2022 - October 14, 2023)
2024-03-04T19:19:22.3789813Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:22.3791665Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:19:22.3793166Z         filtering to 'This Month'
2024-03-04T19:19:23.8513180Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:19:23.8514096Z     Donations
2024-03-04T19:19:24.7408075Z       has a link to create a new donation
2024-03-04T19:19:24.7410161Z       given 1 Donation on 2024-03-02 (only if a valid date), 4 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:19:24.7411667Z         filtering to 'Yesterday'
2024-03-04T19:19:26.1739917Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:19:26.1741892Z       given 1 Donation on 2024-02-03 (only if a valid date), 2 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:26.1743200Z         filtering to 'Last 30 Days'
2024-03-04T19:19:27.5741714Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:19:27.5743328Z       given 1 Donation on 2024-02-26 (only if a valid date), 0 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:27.5744616Z         filtering to 'Last 7 Days'
2024-03-04T19:19:30.8959963Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T19:19:30.8962151Z       given 1 Donation on 2024-02-29 (only if a valid date), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:19:30.8963494Z         filtering to 'This Month'
2024-03-04T19:19:32.3649559Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:19:32.3653341Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:19:32.3654712Z         filtering to 'This Year'
2024-03-04T19:19:33.7994419Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:19:33.7996265Z       given 1 Donation on 2024-03-03 (only if a valid date), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:33.7997545Z         filtering to 'Today'
2024-03-04T19:19:35.1750438Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T19:19:35.1752254Z       given 1 Donation on 2022-03-03 (only if a valid date), 0 during 2022-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:35.1753851Z         filtering to '' (March 4, 2022 - March 4, 2024)
2024-03-04T19:19:38.4920529Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T19:19:38.4922614Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:19:38.4923640Z         filtering to 'Last Month'
2024-03-04T19:19:39.8842196Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:19:39.8843327Z     Purchases
2024-03-04T19:19:40.7665042Z       has a link to create a new purchase
2024-03-04T19:19:40.7666767Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 0 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:19:40.7668062Z         filtering to 'Yesterday'
2024-03-04T19:19:44.0888773Z           shows correct 0 Recent Purchase link(s)
2024-03-04T19:19:44.0890483Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 1 during 2022-03-04..2023-10-29, and 1 on 2023-10-30
2024-03-04T19:19:44.0892035Z         filtering to '' (March 4, 2022 - October 29, 2023)
2024-03-04T19:19:45.4453165Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:19:45.4455055Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:45.4456324Z         filtering to 'Today'
2024-03-04T19:19:46.8477768Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:19:46.8479389Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 0 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:46.8480639Z         filtering to 'Last 7 Days'
2024-03-04T19:19:50.1682630Z           shows correct 0 Recent Purchase link(s)
2024-03-04T19:19:50.1684380Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:50.1685852Z         filtering to 'Last 30 Days'
2024-03-04T19:19:51.5426335Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:19:51.5427910Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:19:51.5429332Z         filtering to 'Last Month'
2024-03-04T19:19:52.9903450Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:19:52.9905095Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:19:52.9906506Z         filtering to 'This Year'
2024-03-04T19:19:54.3564365Z           shows correct 2 Recent Purchase link(s)
2024-03-04T19:19:54.3566088Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:19:54.3567435Z         filtering to 'This Month'
2024-03-04T19:19:55.6905421Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:19:55.6906560Z     Inventory Totals
2024-03-04T19:19:55.6907480Z       Summary
2024-03-04T19:19:56.3826999Z         displays the on-hand totals
2024-03-04T19:19:56.3827873Z         when constrained to date range
2024-03-04T19:19:57.3895366Z           does not change
2024-03-04T19:19:57.3896295Z     Manufacturer Donations
2024-03-04T19:19:57.9615382Z       has a link to create a new donation
2024-03-04T19:19:57.9617232Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 8 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:19:57.9618605Z         filtering to 'Yesterday'
2024-03-04T19:19:59.8440938Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:19:59.8443362Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:59.8444707Z         filtering to 'Today'
2024-03-04T19:20:01.1895051Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:20:01.1896853Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 9 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:20:01.1897725Z         filtering to 'This Year'
2024-03-04T19:20:03.4546703Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:20:03.4548442Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 9 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:20:03.4549480Z         filtering to 'Last 7 Days'
2024-03-04T19:20:05.5996422Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:20:05.5998423Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 6 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:20:05.5999919Z         filtering to 'Last Month'
2024-03-04T19:20:07.5344289Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T19:20:07.5346421Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:20:07.5347816Z         filtering to 'This Month'
2024-03-04T19:20:08.8779777Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:20:08.8781814Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 9 during 2022-03-04..2023-12-17, and 1 on 2023-12-18
2024-03-04T19:20:08.8783318Z         filtering to '' (March 4, 2022 - December 17, 2023)
2024-03-04T19:20:11.0969010Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:20:11.0970698Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 6 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:20:11.0971697Z         filtering to 'All Time'
2024-03-04T19:20:12.7318994Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-03-04T19:20:12.7320957Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:20:12.7322332Z         filtering to 'Last 30 Days'
2024-03-04T19:20:14.1009453Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:20:14.1010767Z   With a new essentials bank
2024-03-04T19:20:42.1222276Z     displays the getting started guide until the steps are completed
2024-03-04T19:20:42.1223045Z 
2024-03-04T19:20:42.1223228Z BarcodeItems
2024-03-04T19:20:42.1224727Z   While signed in
2024-03-04T19:20:42.1226212Z     GET #show
2024-03-04T19:20:42.1226977Z       with a global barcode item
2024-03-04T19:20:42.1544579Z         returns a 404
2024-03-04T19:20:42.1545443Z       with a normal barcode item
2024-03-04T19:20:42.1878789Z         returns http success
2024-03-04T19:20:42.1879649Z     GET #new
2024-03-04T19:20:42.2171855Z       returns http success
2024-03-04T19:20:42.2172683Z     GET #index
2024-03-04T19:20:42.2173379Z       html
2024-03-04T19:20:42.2562316Z         is expected to be successful
2024-03-04T19:20:42.2563574Z       csv
2024-03-04T19:20:42.2774718Z         is expected to be successful
2024-03-04T19:20:42.2775673Z     GET #edit
2024-03-04T19:20:42.2776643Z       with a normal barcode item
2024-03-04T19:20:42.3250952Z         returns http success
2024-03-04T19:20:42.3251989Z       with a global barcode item
2024-03-04T19:20:42.3542951Z         returns a 404
2024-03-04T19:20:42.3543778Z     GET #find
2024-03-04T19:20:42.3545054Z       via ajax
2024-03-04T19:20:42.5540003Z         can find a barcode that's universally available
2024-03-04T19:20:42.7586460Z         can find a barcode that is scoped to just this organization
2024-03-04T19:20:42.7587563Z         when it's missing
2024-03-04T19:20:42.9792448Z           returns a 404
2024-03-04T19:20:42.9793412Z     DELETE #destroy
2024-03-04T19:20:43.1684918Z       disallows a user to delete someone else's barcode
2024-03-04T19:20:43.1984934Z       redirects to the index
2024-03-04T19:20:43.2178145Z       disallows a non-superadmin to delete a global barcode
2024-03-04T19:20:43.2178951Z     Looking at a different organization
2024-03-04T19:20:43.3980207Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:20:43.3980872Z 
2024-03-04T19:20:43.3981158Z Organization management
2024-03-04T19:20:43.3983584Z   while signed in as a normal user
2024-03-04T19:20:43.8854613Z     cannot see 'Make user' button for admins
2024-03-04T19:20:44.3515932Z     can see summary details about the organization as a user
2024-03-04T19:20:44.3516725Z   while signed in as an organization admin
2024-03-04T19:20:44.8547441Z     can see 'Make user' button for admins
2024-03-04T19:20:45.3444621Z     can re-invite a user to an organization after 7 days
2024-03-04T19:20:46.4936483Z     can deactivate a user in the organization
2024-03-04T19:20:47.4751347Z     can add a new user to an organization
2024-03-04T19:20:48.4420263Z     can re-activate a user in the organization
2024-03-04T19:20:48.4420792Z     Editing the organization
2024-03-04T19:20:49.4328616Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T19:20:50.2761891Z       can set a default storage location on the organization
2024-03-04T19:20:51.7135678Z       can select and deselect Required Partner Fields
2024-03-04T19:20:52.5575072Z       can set the NDBN Member ID
2024-03-04T19:20:53.7438395Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T19:20:54.5967673Z       can set a reminder and a deadline day
2024-03-04T19:20:55.5790830Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T19:20:56.5281189Z       can select if the org distributes essentials monthly
2024-03-04T19:20:57.5222710Z       can select if the org repackages essentials
2024-03-04T19:20:58.4983713Z       can enable if the org uses single step invite and approve partner process
2024-03-04T19:20:58.4984656Z     Viewing the organization
2024-03-04T19:20:59.0534648Z       can view organization details
2024-03-04T19:20:59.0535975Z 
2024-03-04T19:20:59.0536279Z User account management
2024-03-04T19:20:59.0537627Z   when not in staging
2024-03-04T19:20:59.9553256Z     should change the email
2024-03-04T19:21:00.7548472Z     should fail when the email is invalid
2024-03-04T19:21:01.6389841Z     should change an user name
2024-03-04T19:21:01.6390485Z   when in staging
2024-03-04T19:21:02.0936694Z     should not allow the user to change staging credentials
2024-03-04T19:21:02.5460718Z     should display staging warning
2024-03-04T19:21:02.5461410Z 
2024-03-04T19:21:02.5461605Z /partners/children
2024-03-04T19:21:02.5463176Z   GET #index
2024-03-04T19:21:02.6237796Z     should export CSV
2024-03-04T19:21:02.6815635Z     should render without any issues
2024-03-04T19:21:02.7005218Z W, [2024-03-04T11:21:02.700120 #2367]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T19:21:02.7006368Z W, [2024-03-04T11:21:02.700390 #2367]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:21:02.7008113Z W, [2024-03-04T11:21:02.700405 #2367]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:21:02.7009920Z W, [2024-03-04T11:21:02.700428 #2367]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T19:21:02.7010735Z 
2024-03-04T19:21:02.7011002Z Finished in 3 minutes 43.6 seconds (files took 8.11 seconds to load)
2024-03-04T19:21:02.7011542Z 233 examples, 0 failures
2024-03-04T19:21:02.7011748Z 
2024-03-04T19:21:02.7011870Z Randomized with seed 21813
2024-03-04T19:21:02.7012083Z 
2024-03-04T19:21:02.9944052Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3868 / 6475 LOC (59.74%) covered.
2024-03-04T19:21:03.5200221Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
