2024-02-19T04:16:16.0359088Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-19T04:16:16.0359981Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-19T04:16:16.0398329Z shell: /usr/bin/bash -e {0}
2024-02-19T04:16:16.0398687Z env:
2024-02-19T04:16:16.0399079Z   POSTGRES_HOST: localhost
2024-02-19T04:16:16.0399485Z   DATABASE_HOST: localhost
2024-02-19T04:16:16.0399856Z   PG_USERNAME: postgres
2024-02-19T04:16:16.0400246Z   PG_PASSWORD: password
2024-02-19T04:16:16.0400639Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-19T04:16:16.0401055Z   POSTGRES_PORT: 5432
2024-02-19T04:16:16.0401691Z   PGHOST: localhost
2024-02-19T04:16:16.0402061Z   PGUSER: postgres
2024-02-19T04:16:16.0402361Z   RAILS_ENV: test
2024-02-19T04:16:16.0402795Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-19T04:16:16.0403226Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-19T04:16:16.0403618Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-19T04:16:16.0404129Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-19T04:16:16.0404656Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-19T04:16:16.0405365Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-19T04:16:16.0406006Z   EVENTS_READ: true
2024-02-19T04:16:16.0406336Z ##[endgroup]
2024-02-19T04:16:21.7127567Z W, [2024-02-19T04:16:21.712420 #2326]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-19T04:16:21.7129586Z W, [2024-02-19T04:16:21.712478 #2326]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T04:16:21.7131132Z W, [2024-02-19T04:16:21.712500 #2326]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T04:16:21.7134365Z W, [2024-02-19T04:16:21.712531 #2326]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-19T04:16:25.5339099Z W, [2024-02-19T04:16:25.533601 #2326]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-19T04:16:25.5340887Z W, [2024-02-19T04:16:25.533639 #2326]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T04:16:25.5342563Z W, [2024-02-19T04:16:25.533652 #2326]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T04:16:25.5344914Z W, [2024-02-19T04:16:25.533685 #2326]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-19T04:16:25.5396282Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-19T04:16:33.9831345Z 
2024-02-19T04:16:33.9832277Z Randomized with seed 61250
2024-02-19T04:16:35.0371824Z 
2024-02-19T04:16:35.0372654Z Organization management
2024-02-19T04:16:35.0373727Z   while signed in as a normal user
2024-02-19T04:16:41.3755807Z     cannot see 'Make user' button for admins
2024-02-19T04:16:41.9870647Z     can see summary details about the organization as a user
2024-02-19T04:16:41.9871732Z   while signed in as an organization admin
2024-02-19T04:16:43.0364266Z     can add a new user to an organization
2024-02-19T04:16:44.0529904Z     can deactivate a user in the organization
2024-02-19T04:16:45.0176521Z     can re-activate a user in the organization
2024-02-19T04:16:45.5114669Z     can see 'Make user' button for admins
2024-02-19T04:16:46.0202960Z     can re-invite a user to an organization after 7 days
2024-02-19T04:16:46.0203973Z     Viewing the organization
2024-02-19T04:16:46.5848753Z       can view organization details
2024-02-19T04:16:46.5849625Z     Editing the organization
2024-02-19T04:16:47.5971966Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-19T04:16:48.5963816Z       can select if the org shows year-to-date values on the distribution printout
2024-02-19T04:16:49.5717565Z       can enable if the org uses single step invite and approve partner process
2024-02-19T04:16:50.7733538Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-19T04:16:51.6213412Z       can set a default storage location on the organization
2024-02-19T04:16:52.4899435Z       can set the NDBN Member ID
2024-02-19T04:16:53.3513955Z       can set a reminder and a deadline day
2024-02-19T04:16:54.3701928Z       can select if the org repackages essentials
2024-02-19T04:16:55.3552270Z       can select if the org distributes essentials monthly
2024-02-19T04:16:56.8353964Z       can select and deselect Required Partner Fields
2024-02-19T04:16:56.8354643Z 
2024-02-19T04:16:56.8354934Z User account management
2024-02-19T04:16:56.8356425Z   when not in staging
2024-02-19T04:16:57.6108417Z     should fail when the email is invalid
2024-02-19T04:16:58.6456553Z     should change an user name
2024-02-19T04:16:59.5289061Z     should change the email
2024-02-19T04:16:59.5289795Z   when in staging
2024-02-19T04:16:59.9794913Z     should display staging warning
2024-02-19T04:17:00.4286487Z     should not allow the user to change staging credentials
2024-02-19T04:17:00.4287279Z 
2024-02-19T04:17:00.4287510Z Managing requests
2024-02-19T04:17:00.4292018Z   creating a individuals/family request
2024-02-19T04:17:00.4293114Z     GIVEN a partner user is permitted to make a request
2024-02-19T04:17:00.4294232Z       WHEN they create a request inproperly
2024-02-19T04:17:01.3642004Z         should show an error message with the instructions
2024-02-19T04:17:01.3643073Z       WHEN they create a request properly
2024-02-19T04:17:01.3644513Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-19T04:17:03.5522573Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-19T04:17:03.5523986Z   creating a request
2024-02-19T04:17:03.5524999Z     GIVEN a partner user is permitted to make a request
2024-02-19T04:17:03.5526498Z       WHEN they create a request inproperly by not inputting anything
2024-02-19T04:17:04.4642163Z         should show an error message with the instructions
2024-02-19T04:17:04.4643319Z       WHEN they create a request properly
2024-02-19T04:17:04.4644340Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-19T04:17:06.7524526Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-19T04:17:06.7526404Z       WHEN they create a request with only a comment
2024-02-19T04:17:07.7181393Z         should be created without any issue
2024-02-19T04:17:07.7183253Z 
2024-02-19T04:17:07.7183720Z /account_requests
2024-02-19T04:17:07.7185237Z   POST #create
2024-02-19T04:17:07.7186175Z     with invalid parameters
2024-02-19T04:17:07.7538864Z       does not create a new AccountRequest
2024-02-19T04:17:07.7728484Z       renders a successful response (i.e. to display the 'new' template)
2024-02-19T04:17:07.7729583Z     with valid parameters
2024-02-19T04:17:07.7892812Z       delivers the confirmation email via default queue
2024-02-19T04:17:07.8060678Z       redirects to the created account_request confirmation
2024-02-19T04:17:07.8207655Z       creates a new AccountRequest
2024-02-19T04:17:07.8208794Z   GET #confirmation
2024-02-19T04:17:07.8209481Z     when given a token that has already been confirmed
2024-02-19T04:17:08.0189787Z       should render a error that says that is code provided is invalid
2024-02-19T04:17:08.0190523Z     when given a valid token
2024-02-19T04:17:08.0353287Z       should render the confirmation template
2024-02-19T04:17:08.0354281Z     when given a invalid token
2024-02-19T04:17:08.0415647Z       should render a error that says that is code provided is invalid
2024-02-19T04:17:08.0416714Z   GET #new
2024-02-19T04:17:08.0530366Z     renders a successful response
2024-02-19T04:17:08.0531024Z   GET #received
2024-02-19T04:17:08.0531836Z     when given a invalid token
2024-02-19T04:17:08.0596020Z       should render a error that says that is code provided is invalid
2024-02-19T04:17:08.0597042Z     when given a valid token
2024-02-19T04:17:08.0748971Z       should render the received template
2024-02-19T04:17:08.0749735Z   GET #confirm
2024-02-19T04:17:08.0750588Z     when given a invalid token
2024-02-19T04:17:08.0810297Z       should render a error that says that is code provided is invalid
2024-02-19T04:17:08.0811380Z     when given a token that has already been confirmed
2024-02-19T04:17:08.2677495Z       should render a error that says that is code provided is invalid
2024-02-19T04:17:08.2678717Z     when given a valid token
2024-02-19T04:17:08.2948204Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-19T04:17:08.2949200Z 
2024-02-19T04:17:08.2949648Z Audits
2024-02-19T04:17:08.2950231Z   while signed in as an organization admin
2024-02-19T04:17:08.2951129Z     DELETE #destroy
2024-02-19T04:17:08.2951904Z       with valid params
2024-02-19T04:17:08.3466647Z         destroys the audit if the audit's status is `in_progress`
2024-02-19T04:17:08.3849484Z         can not destroy the audit if the audit's status is `finalized`
2024-02-19T04:17:08.4250633Z         destroys the audit if the audit's status is `confirms`
2024-02-19T04:17:08.4251730Z     POST #finalize
2024-02-19T04:17:08.5006133Z       sets the finalize status and saves an event
2024-02-19T04:17:08.5006740Z     GET #index
2024-02-19T04:17:08.5626607Z       is successful
2024-02-19T04:17:08.5627442Z     GET #show
2024-02-19T04:17:08.6176552Z       is successful
2024-02-19T04:17:08.6177648Z     POST #create
2024-02-19T04:17:08.6178411Z       with valid params
2024-02-19T04:17:08.6598533Z         redirects to the #show after created audit
2024-02-19T04:17:08.7021553Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-19T04:17:08.7429069Z         creates a new Audit
2024-02-19T04:17:08.7837592Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-19T04:17:08.8238405Z         assigns a newly created audit as @audit
2024-02-19T04:17:08.8239255Z       with invalid params
2024-02-19T04:17:08.8761107Z         assigns a newly created but unsaved audit as @audit
2024-02-19T04:17:08.9158673Z         re-renders the 'new' template
2024-02-19T04:17:08.9835229Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-19T04:17:08.9836826Z     GET #edit
2024-02-19T04:17:09.0496246Z       redirects to #index if the status of audit is not `in_progress`
2024-02-19T04:17:09.1134397Z       is successful if the status of audit is `in_progress`
2024-02-19T04:17:09.1135326Z     GET #new
2024-02-19T04:17:09.1538477Z       is successful
2024-02-19T04:17:09.1539218Z 
2024-02-19T04:17:09.1539495Z DonationSites
2024-02-19T04:17:09.1540577Z   while signed in
2024-02-19T04:17:09.1541578Z     GET #index
2024-02-19T04:17:09.1542511Z       html
2024-02-19T04:17:09.1958631Z         is expected to be successful
2024-02-19T04:17:09.1959699Z       csv
2024-02-19T04:17:09.2129494Z         is expected to be successful
2024-02-19T04:17:09.2131312Z 
2024-02-19T04:17:09.2131665Z StorageLocations
2024-02-19T04:17:09.2132858Z   While signed in
2024-02-19T04:17:09.2135266Z     PUT #reactivate
2024-02-19T04:17:09.2325599Z       undiscards
2024-02-19T04:17:09.2326483Z     POST #import_csv
2024-02-19T04:17:09.2327177Z       without a csv file
2024-02-19T04:17:09.2453869Z         presents a flash error message
2024-02-19T04:17:09.2575174Z         redirects to :index
2024-02-19T04:17:09.2575881Z       csv file with wrong headers
2024-02-19T04:17:09.2711403Z         redirects
2024-02-19T04:17:09.2853114Z         presents a flash error message
2024-02-19T04:17:09.2853728Z       with a csv file
2024-02-19T04:17:09.2909018Z         invokes .import_csv
2024-02-19T04:17:09.3065223Z         redirects
2024-02-19T04:17:09.3221491Z         presents a flash notice message
2024-02-19T04:17:09.3222772Z     Looking at a different organization
2024-02-19T04:17:09.6248591Z       redirects the user to the sign-in page for CRUD actions
2024-02-19T04:17:09.6249711Z     GET #destroy
2024-02-19T04:17:09.6930889Z       redirects to #index
2024-02-19T04:17:09.6931976Z     GET #index
2024-02-19T04:17:09.6932494Z       csv
2024-02-19T04:17:09.7161948Z         succeeds
2024-02-19T04:17:09.8375933Z         includes headers followed by alphabetized item names
2024-02-19T04:17:09.8376919Z       html
2024-02-19T04:17:09.8772594Z         succeeds
2024-02-19T04:17:09.8773623Z         with inactive locations
2024-02-19T04:17:09.9210488Z           does not includes the inactive location
2024-02-19T04:17:09.9211561Z           with include_inactive_locations
2024-02-19T04:17:09.9620989Z             includes the inactive location
2024-02-19T04:17:09.9621888Z     PUT #deactivate
2024-02-19T04:17:09.9839930Z       discards
2024-02-19T04:17:09.9840513Z       with inventory
2024-02-19T04:17:10.0372862Z         does not discard
2024-02-19T04:17:10.0373652Z     GET #inventory
2024-02-19T04:17:10.0374210Z       without any overrides
2024-02-19T04:17:10.0947189Z         returns a collection that only includes items at the storage location
2024-02-19T04:17:10.0948022Z       when also including omitted items
2024-02-19T04:17:10.1477045Z         contains a collection of ducktyped entries that respond the same
2024-02-19T04:17:10.1997834Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-19T04:17:10.1998590Z       when also including inactive items
2024-02-19T04:17:10.2692114Z         returns a collection that also includes items that have been deactivated
2024-02-19T04:17:10.2693457Z     GET #edit
2024-02-19T04:17:10.5200948Z       returns http success
2024-02-19T04:17:10.5204269Z     GET #show
2024-02-19T04:17:10.5205327Z       csv
2024-02-19T04:17:10.5753238Z         should be successful
2024-02-19T04:17:10.5754335Z       html
2024-02-19T04:17:10.6488042Z         should return a correct response
2024-02-19T04:17:10.6489327Z         with version date set
2024-02-19T04:17:10.6491492Z           with no version found
2024-02-19T04:17:10.7277886Z             should show N/A
2024-02-19T04:17:10.7279505Z           with a version found
2024-02-19T04:17:10.8128227Z             should show the version specified
2024-02-19T04:17:10.8129199Z     GET #new
2024-02-19T04:17:10.8473459Z       returns http success
2024-02-19T04:17:10.8474507Z   While not signed in
2024-02-19T04:17:10.8544971Z     redirects the user to the sign-in page for CRUD actions
2024-02-19T04:17:10.8545603Z 
2024-02-19T04:17:10.8546007Z Vendor
2024-02-19T04:17:10.8546942Z   When a user views the index page
2024-02-19T04:17:11.3413424Z     should have the vendor names in alphabetical order
2024-02-19T04:17:11.3414167Z   When vendor have purchases associated with them already
2024-02-19T04:17:11.9576434Z     can have a single vendor show semi-detailed stats about purchases
2024-02-19T04:17:12.5713310Z     can have existing vendors show in the #index with some summary stats
2024-02-19T04:17:12.5714176Z   when creating a new vendor
2024-02-19T04:17:13.2964843Z     cannot add a new vendor instance with empty attributes
2024-02-19T04:17:14.0787551Z     can create a new vendor instance as a user
2024-02-19T04:17:14.0788463Z   when editing an existing vendor
2024-02-19T04:17:14.8477402Z     can update the contact info for a vendor as a user
2024-02-19T04:17:15.6430254Z     does not update a vendor with empty attributes
2024-02-19T04:17:15.6431203Z 
2024-02-19T04:17:15.6431400Z Kit management
2024-02-19T04:17:16.5522551Z   can create a new kit as a user with the proper quantity
2024-02-19T04:17:17.1360887Z   should not display inactive storage locations under allocations
2024-02-19T04:17:18.6868239Z   can allocate and deallocate quantity per storage location from kit index
2024-02-19T04:17:18.6869434Z   when there is no kit quantity
2024-02-19T04:17:19.8801590Z     will not change quantity amounts when deallocating
2024-02-19T04:17:19.8803285Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-19T04:17:21.0786587Z     will not change quantity amounts when allocating
2024-02-19T04:17:21.0787453Z 
2024-02-19T04:17:21.0787691Z /partners/profiles
2024-02-19T04:17:21.0788963Z   GET #edit
2024-02-19T04:17:21.1936716Z     does not have default radio button value when value is nil
2024-02-19T04:17:21.2819460Z     displays the partner
2024-02-19T04:17:21.3781894Z     has "Yes" radio button value when value is true
2024-02-19T04:17:21.4725237Z     has "No" radio button value when value is false
2024-02-19T04:17:21.4726080Z   GET #show
2024-02-19T04:17:21.5312024Z     displays the partner
2024-02-19T04:17:21.5866803Z     shows correct values for yes/no buttons
2024-02-19T04:17:21.5867521Z   PUT #update
2024-02-19T04:17:21.6452209Z     updates the partner and profile
2024-02-19T04:17:21.6452813Z     with no social media
2024-02-19T04:17:21.7446708Z       shows an error
2024-02-19T04:17:21.7447792Z     when updating an existing value to a blank value
2024-02-19T04:17:21.8017149Z       updates the partner profile attribute to a blank value
2024-02-19T04:17:21.8555245Z       does store N/A in the database
2024-02-19T04:17:21.9084294Z       does not update other partner profile attributes to blank
2024-02-19T04:17:21.9085787Z 
2024-02-19T04:17:21.9086391Z Purchases
2024-02-19T04:17:21.9087528Z   while signed in as an organization admin
2024-02-19T04:17:22.7929161Z     allows deletion of a purchase
2024-02-19T04:17:22.7930223Z   while signed in as a normal user
2024-02-19T04:17:22.7930940Z     When visiting the index page
2024-02-19T04:17:22.7931979Z       When filtering on the index page
2024-02-19T04:17:23.6291688Z         User can filter the #index by vendor
2024-02-19T04:17:24.4933487Z         User can filter the #index by storage location
2024-02-19T04:17:24.4934646Z         behaves like Date Range Picker
2024-02-19T04:17:24.4935730Z           when choosing 'All Time'
2024-02-19T04:17:25.4773839Z             shows all the records
2024-02-19T04:17:25.4775133Z           when choosing a date range that only includes the previous week
2024-02-19T04:17:26.4275386Z             shows only 1 record
2024-02-19T04:17:26.4276676Z           when choosing 'Last Month'
2024-02-19T04:17:27.3830813Z             shows only 2 of the records
2024-02-19T04:17:27.3831667Z       In the middle of the year
2024-02-19T04:17:28.1074632Z         User sees purchased date column
2024-02-19T04:17:28.8846891Z         User can click to the new purchase form
2024-02-19T04:17:29.6904191Z         User sees total purchases value
2024-02-19T04:17:29.6905101Z     When creating a new purchase
2024-02-19T04:17:30.1971088Z       should not display inactive storage locations in dropdown
2024-02-19T04:17:30.1972013Z       Editing purchase
2024-02-19T04:17:30.8291267Z         A user can view another organizations purchase
2024-02-19T04:17:31.3421594Z         A user can see purchased_from value
2024-02-19T04:17:31.3422430Z       via manual entry
2024-02-19T04:17:32.2337413Z         User can create a purchase using dollars decimal amount
2024-02-19T04:17:33.4387465Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-19T04:17:34.5782589Z         User can create a purchase IN THE PAST
2024-02-19T04:17:35.6233822Z         Does not include inactive items in the line item fields
2024-02-19T04:17:36.6793594Z         User can create vendor from purchase
2024-02-19T04:17:36.6794526Z         when creating a purchase incorrectly
2024-02-19T04:17:37.6790807Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-19T04:17:38.6620650Z           should display failure with error messages
2024-02-19T04:17:38.6621539Z       via barcode entry
2024-02-19T04:17:39.3964510Z         a user can add items via scanning them in by barcode
2024-02-19T04:17:40.3081670Z         User scan same barcode 2 times
2024-02-19T04:17:41.5186979Z         a user can add items that do not yet have a barcode
2024-02-19T04:17:41.5187835Z     When visiting an existing purchase
2024-02-19T04:17:41.9664124Z       does not allow deletion of a purchase
2024-02-19T04:17:41.9666150Z 
2024-02-19T04:17:41.9666518Z Admin::Organizations
2024-02-19T04:17:41.9667995Z   When logged in as a super admin
2024-02-19T04:17:41.9670578Z     DELETE #destroy
2024-02-19T04:17:42.3529205Z       redirects
2024-02-19T04:17:42.3529886Z     GET #new
2024-02-19T04:17:42.3986153Z       returns http success
2024-02-19T04:17:42.3987275Z       when given a token that matches a account request that has already been processed
2024-02-19T04:17:42.6213740Z         should render new with a flash error message
2024-02-19T04:17:42.6214544Z       when given a valid account request token in the query parameters
2024-02-19T04:17:42.6774589Z         should render new with pre populate input fields from the account_request
2024-02-19T04:17:42.6775650Z     GET #edit
2024-02-19T04:17:42.9012440Z       returns http success
2024-02-19T04:17:42.9013357Z     POST #create
2024-02-19T04:17:42.9014257Z       with invalid params
2024-02-19T04:17:42.9459421Z         does not create an organization and renders #create with an error message
2024-02-19T04:17:42.9460797Z       with valid params
2024-02-19T04:17:43.2369019Z         creates an organization and redirects to #index
2024-02-19T04:17:43.2369927Z     PUT #update
2024-02-19T04:17:43.2571513Z       redirect
2024-02-19T04:17:43.2572711Z     GET #index
2024-02-19T04:17:43.2902270Z       returns http success
2024-02-19T04:17:43.2903296Z     DELETE #destroy
2024-02-19T04:17:43.2903707Z       with a valid organization id
2024-02-19T04:17:43.8177440Z         redirects to #index
2024-02-19T04:17:43.8179368Z     PATCH #update
2024-02-19T04:17:43.8180914Z       with an invalid update
2024-02-19T04:17:44.0421517Z         redirects to #edit with an error message
2024-02-19T04:17:44.2550391Z         returns http success
2024-02-19T04:17:44.2551447Z       with a valid update
2024-02-19T04:17:44.4474388Z         redirects to #index
2024-02-19T04:17:44.4475741Z     GET #show
2024-02-19T04:17:44.6567654Z       returns http success
2024-02-19T04:17:44.6568627Z   When logged in as a non-admin user
2024-02-19T04:17:44.6569550Z     PUT #update
2024-02-19T04:17:44.6711042Z       redirects
2024-02-19T04:17:44.6711943Z     GET #edit
2024-02-19T04:17:44.6845664Z       redirects
2024-02-19T04:17:44.6846222Z     GET #index
2024-02-19T04:17:44.6977785Z       redirects
2024-02-19T04:17:44.6978377Z     POST #create
2024-02-19T04:17:44.7129215Z       redirects
2024-02-19T04:17:44.7129887Z     GET #new
2024-02-19T04:17:44.7262776Z       redirects
2024-02-19T04:17:44.7263499Z 
2024-02-19T04:17:44.7263882Z /partners/children
2024-02-19T04:17:44.7264992Z   GET #index
2024-02-19T04:17:44.8143675Z     should render without any issues
2024-02-19T04:17:44.8700598Z     should export CSV
2024-02-19T04:17:44.8701410Z 
2024-02-19T04:17:44.8701663Z Admin Organization Management
2024-02-19T04:17:44.8703071Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-19T04:17:46.9517152Z     creates a new organization
2024-02-19T04:17:46.9517879Z   While signed in as an Administrative User (super admin)
2024-02-19T04:17:48.2661808Z     can view organization details
2024-02-19T04:17:49.3727431Z     filters by organizations by name in organizations index page
2024-02-19T04:17:51.5040425Z     creates a new organization
2024-02-19T04:17:51.5044356Z 
2024-02-19T04:17:51.5044780Z Dashboard
2024-02-19T04:17:51.5046126Z   With a new essentials bank
2024-02-19T04:18:19.5637697Z     displays the getting started guide until the steps are completed
2024-02-19T04:18:19.5639395Z   With an existing essentials bank
2024-02-19T04:18:19.5640233Z     Signage
2024-02-19T04:18:22.4416352Z       shows their organization name unless they have a logo set
2024-02-19T04:18:22.4416998Z     Donations
2024-02-19T04:18:23.3577804Z       has a link to create a new donation
2024-02-19T04:18:23.3579299Z       given 1 Donation on 2024-02-17 (only if a valid date), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:23.3580254Z         filtering to 'Today'
2024-02-19T04:18:24.8504021Z           shows the correct total and 2 Recent Donation link(s)
2024-02-19T04:18:24.8505577Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T04:18:24.8506950Z         filtering to 'This Year'
2024-02-19T04:18:26.4198314Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T04:18:26.4203420Z       given 1 Donation on 2024-01-19 (only if a valid date), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:26.4204637Z         filtering to 'Last 30 Days'
2024-02-19T04:18:27.9024920Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T04:18:27.9026920Z       given 1 Donation on 2024-02-11 (only if a valid date), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:27.9028261Z         filtering to 'Last 7 Days'
2024-02-19T04:18:29.3947807Z           shows the correct total and 2 Recent Donation link(s)
2024-02-19T04:18:29.3949670Z       given 1 Donation on 2022-02-17 (only if a valid date), 3 during 2022-02-18..2024-01-22, and 1 on 2024-01-23
2024-02-19T04:18:29.3951282Z         filtering to '' (February 18, 2022 - January 22, 2024)
2024-02-19T04:18:30.9358064Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T04:18:30.9359762Z       given 1 Donation on 2024-02-16 (only if a valid date), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-19T04:18:30.9360659Z         filtering to 'Yesterday'
2024-02-19T04:18:32.4556014Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T04:18:32.4557725Z       given 1 Donation on 2023-12-31 (only if a valid date), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T04:18:32.4558960Z         filtering to 'Last Month'
2024-02-19T04:18:33.9280056Z           shows the correct total and 2 Recent Donation link(s)
2024-02-19T04:18:33.9282022Z       given 1 Donation on 2024-01-31 (only if a valid date), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T04:18:33.9283235Z         filtering to 'This Month'
2024-02-19T04:18:35.3671582Z           shows the correct total and 1 Recent Donation link(s)
2024-02-19T04:18:35.3672499Z     Distributions
2024-02-19T04:18:36.2938013Z       has a link to create a new distribution
2024-02-19T04:18:36.2939942Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T04:18:36.2941605Z         filtering to 'This Year'
2024-02-19T04:18:37.8209337Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T04:18:37.8210802Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T04:18:37.8211863Z         filtering to 'This Month'
2024-02-19T04:18:39.2546885Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T04:18:39.2548668Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:39.2549726Z         filtering to 'Last 7 Days'
2024-02-19T04:18:42.6649922Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-19T04:18:42.6651791Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T04:18:42.6652769Z         filtering to 'Last Month'
2024-02-19T04:18:44.1669982Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-19T04:18:44.1671821Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 4 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:44.1673033Z         filtering to 'Today'
2024-02-19T04:18:45.6497109Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T04:18:45.6498776Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:45.6499798Z         filtering to 'All Time'
2024-02-19T04:18:47.0357509Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-19T04:18:47.0359486Z       given 1 Distribution on 2024-02-16  (unless 'All Time'), 0 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-19T04:18:47.0360755Z         filtering to 'Yesterday'
2024-02-19T04:18:50.4291376Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-19T04:18:50.4293279Z       given 1 Distribution on 2022-02-17  (unless 'All Time'), 3 during 2022-02-18..2023-10-09, and 1 on 2023-10-10
2024-02-19T04:18:50.4294541Z         filtering to '' (February 18, 2022 - October 9, 2023)
2024-02-19T04:18:51.9398594Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T04:18:51.9400050Z       given 1 Distribution on 2024-01-19  (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:51.9401114Z         filtering to 'Last 30 Days'
2024-02-19T04:18:53.4550975Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T04:18:53.4552099Z     Inventory Totals
2024-02-19T04:18:53.4553169Z       Summary
2024-02-19T04:18:54.1850436Z         displays the on-hand totals
2024-02-19T04:18:54.1851294Z         when constrained to date range
2024-02-19T04:18:55.2629291Z           does not change
2024-02-19T04:18:55.2630199Z     Manufacturer Donations
2024-02-19T04:18:55.8830131Z       has a link to create a new donation
2024-02-19T04:18:55.8832361Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 6 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:18:55.8833824Z         filtering to 'Today'
2024-02-19T04:18:57.8307637Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-19T04:18:57.8309649Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T04:18:57.8311025Z         filtering to 'This Year'
2024-02-19T04:18:59.2941895Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-19T04:18:59.2944754Z       given 1 Manufacturer donating on 2024-02-16  (unless 'All Time'), 8 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-19T04:18:59.2946118Z         filtering to 'Yesterday'
2024-02-19T04:19:01.8221987Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-19T04:19:01.8224206Z       given 1 Manufacturer donating on 2024-01-19  (unless 'All Time'), 9 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:01.8225498Z         filtering to 'Last 30 Days'
2024-02-19T04:19:04.4765900Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-19T04:19:04.4767878Z       given 1 Manufacturer donating on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2023-08-26, and 1 on 2023-08-27
2024-02-19T04:19:04.4769553Z         filtering to '' (February 18, 2022 - August 26, 2023)
2024-02-19T04:19:06.4931455Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-19T04:19:06.4933096Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 3 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:06.4934112Z         filtering to 'Last 7 Days'
2024-02-19T04:19:08.2325587Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-19T04:19:08.2327499Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T04:19:08.2328579Z         filtering to 'This Month'
2024-02-19T04:19:09.9089309Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-19T04:19:09.9091311Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 6 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:09.9092846Z         filtering to 'All Time'
2024-02-19T04:19:11.8129904Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-19T04:19:11.8131822Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T04:19:11.8132679Z         filtering to 'Last Month'
2024-02-19T04:19:13.5342139Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-19T04:19:13.5343316Z     Product Drives
2024-02-19T04:19:14.1249301Z       has a widget for product drive summary data
2024-02-19T04:19:14.1251364Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T04:19:14.1253018Z         filtering to 'This Month'
2024-02-19T04:19:15.8307248Z           shows the correct total donations
2024-02-19T04:19:17.4614453Z           shows the correct total money raised
2024-02-19T04:19:19.0318846Z           shows 3 Recent Donation link(s)
2024-02-19T04:19:19.0320361Z       given 1 Product Drive Donation on 2024-02-16 (unless 'All Time'), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-19T04:19:19.0321811Z         filtering to 'Yesterday'
2024-02-19T04:19:20.6628043Z           shows 3 Recent Donation link(s)
2024-02-19T04:19:22.2786734Z           shows the correct total money raised
2024-02-19T04:19:23.8985908Z           shows the correct total donations
2024-02-19T04:19:23.8986763Z       Product drive behaviour with Mixed Donation types
2024-02-19T04:19:24.7297346Z         only counts product drive money raised
2024-02-19T04:19:25.5225599Z         only shows product drive donations as product drive donations
2024-02-19T04:19:26.2714451Z         only counts product drive donations for product drive
2024-02-19T04:19:26.2716387Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 4 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:26.2717723Z         filtering to 'Today'
2024-02-19T04:19:27.8859405Z           shows the correct total money raised
2024-02-19T04:19:29.4725993Z           shows the correct total donations
2024-02-19T04:19:31.0703029Z           shows 3 Recent Donation link(s)
2024-02-19T04:19:31.0704637Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 1 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:31.0705830Z         filtering to 'Last 7 Days'
2024-02-19T04:19:32.4818943Z           shows the correct total money raised
2024-02-19T04:19:33.9037537Z           shows 1 Recent Donation link(s)
2024-02-19T04:19:35.3997830Z           shows the correct total donations
2024-02-19T04:19:35.4000080Z       given 1 Product Drive Donation on 2022-02-17 (unless 'All Time'), 2 during 2022-02-18..2023-09-22, and 1 on 2023-09-23
2024-02-19T04:19:35.4000961Z         filtering to '' (February 18, 2022 - September 22, 2023)
2024-02-19T04:19:36.8787506Z           shows 2 Recent Donation link(s)
2024-02-19T04:19:38.3652048Z           shows the correct total donations
2024-02-19T04:19:39.8201877Z           shows the correct total money raised
2024-02-19T04:19:39.8203528Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T04:19:39.8204797Z         filtering to 'This Year'
2024-02-19T04:19:43.2161228Z           shows 0 Recent Donation link(s)
2024-02-19T04:19:44.5864609Z           shows the correct total donations
2024-02-19T04:19:45.9586507Z           shows the correct total money raised
2024-02-19T04:19:45.9587867Z       given 1 Product Drive Donation on 2024-01-19 (unless 'All Time'), 2 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:45.9588874Z         filtering to 'Last 30 Days'
2024-02-19T04:19:47.4512660Z           shows 2 Recent Donation link(s)
2024-02-19T04:19:48.9448961Z           shows the correct total money raised
2024-02-19T04:19:50.5759035Z           shows the correct total donations
2024-02-19T04:19:50.5760562Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T04:19:50.5761923Z         filtering to 'Last Month'
2024-02-19T04:19:52.0962250Z           shows the correct total money raised
2024-02-19T04:19:53.6293456Z           shows 3 Recent Donation link(s)
2024-02-19T04:19:55.1940435Z           shows the correct total donations
2024-02-19T04:19:55.1941220Z     Purchases
2024-02-19T04:19:56.0815491Z       has a link to create a new purchase
2024-02-19T04:19:56.0816763Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T04:19:56.0817733Z         filtering to 'Last Month'
2024-02-19T04:19:57.5764094Z           shows correct 3 Recent Purchase link(s)
2024-02-19T04:19:57.5765848Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:19:57.5767019Z         filtering to 'Last 7 Days'
2024-02-19T04:20:00.9439301Z           shows correct 0 Recent Purchase link(s)
2024-02-19T04:20:00.9440870Z       given 1 Purchase on 2024-01-19  (unless 'All Time'), 1 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:20:00.9442241Z         filtering to 'Last 30 Days'
2024-02-19T04:20:02.3608927Z           shows correct 1 Recent Purchase link(s)
2024-02-19T04:20:02.3610303Z       given 1 Purchase on 2022-02-17  (unless 'All Time'), 0 during 2022-02-18..2023-11-11, and 1 on 2023-11-12
2024-02-19T04:20:02.3611411Z         filtering to '' (February 18, 2022 - November 11, 2023)
2024-02-19T04:20:05.7451209Z           shows correct 0 Recent Purchase link(s)
2024-02-19T04:20:05.7452741Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T04:20:05.7453870Z         filtering to 'This Month'
2024-02-19T04:20:07.1712500Z           shows correct 1 Recent Purchase link(s)
2024-02-19T04:20:07.1714035Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T04:20:07.1715145Z         filtering to 'This Year'
2024-02-19T04:20:08.6138839Z           shows correct 1 Recent Purchase link(s)
2024-02-19T04:20:08.6140531Z       given 1 Purchase on 2024-02-16  (unless 'All Time'), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-19T04:20:08.6141282Z         filtering to 'Yesterday'
2024-02-19T04:20:10.1865758Z           shows correct 3 Recent Purchase link(s)
2024-02-19T04:20:10.1867287Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T04:20:10.1868386Z         filtering to 'Today'
2024-02-19T04:20:11.7074249Z           shows correct 3 Recent Purchase link(s)
2024-02-19T04:20:11.7076223Z 
2024-02-19T04:20:11.7076491Z Profiles
2024-02-19T04:20:11.7078012Z   GET #edit
2024-02-19T04:20:11.8097306Z     returns http success
2024-02-19T04:20:11.8097881Z   POST #update
2024-02-19T04:20:11.8098290Z     successful save
2024-02-19T04:20:11.8607551Z       update partner
2024-02-19T04:20:11.9090769Z       redirects to #show
2024-02-19T04:20:11.9091517Z     when updating an existing value to a blank value
2024-02-19T04:20:11.9589533Z       update partner
2024-02-19T04:20:12.0047753Z       should have blank values
2024-02-19T04:20:12.0204672Z W, [2024-02-18T20:20:12.020239 #2378]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-19T04:20:12.0206457Z W, [2024-02-18T20:20:12.020290 #2378]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T04:20:12.0225062Z W, [2024-02-18T20:20:12.020309 #2378]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T04:20:12.0227769Z W, [2024-02-18T20:20:12.020340 #2378]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-19T04:20:12.0228906Z 
2024-02-19T04:20:12.0229274Z Finished in 3 minutes 38 seconds (files took 8.21 seconds to load)
2024-02-19T04:20:12.0230030Z 235 examples, 0 failures
2024-02-19T04:20:12.0230837Z 
2024-02-19T04:20:12.0231055Z Randomized with seed 61250
2024-02-19T04:20:12.0231399Z 
2024-02-19T04:20:12.3184370Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3818 / 6403 LOC (59.63%) covered.
2024-02-19T04:20:12.8488697Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10651 LOC (0.36%) covered.
