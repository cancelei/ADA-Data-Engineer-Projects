2024-02-18T21:07:42.2119211Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-18T21:07:42.2120097Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-18T21:07:42.2148115Z shell: /usr/bin/bash -e {0}
2024-02-18T21:07:42.2148475Z env:
2024-02-18T21:07:42.2148892Z   POSTGRES_HOST: localhost
2024-02-18T21:07:42.2149294Z   DATABASE_HOST: localhost
2024-02-18T21:07:42.2149746Z   PG_USERNAME: postgres
2024-02-18T21:07:42.2150132Z   PG_PASSWORD: password
2024-02-18T21:07:42.2150511Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-18T21:07:42.2150971Z   POSTGRES_PORT: 5432
2024-02-18T21:07:42.2151305Z   PGHOST: localhost
2024-02-18T21:07:42.2151640Z   PGUSER: postgres
2024-02-18T21:07:42.2152030Z   RAILS_ENV: test
2024-02-18T21:07:42.2152671Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-02-18T21:07:42.2153131Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-18T21:07:42.2153612Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-18T21:07:42.2154049Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-18T21:07:42.2154647Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-18T21:07:42.2155299Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-18T21:07:42.2156203Z   EVENTS_READ: true
2024-02-18T21:07:42.2156607Z ##[endgroup]
2024-02-18T21:07:52.6914400Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/models/kit_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/transfer_spec.rb" "spec/models/request_item_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/item_create_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/models/account_request_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/vendor_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/item_category_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb"
2024-02-18T21:08:01.1814028Z 
2024-02-18T21:08:01.1814888Z Randomized with seed 21312
2024-02-18T21:08:01.9802473Z 
2024-02-18T21:08:01.9803273Z View::Inventory
2024-02-18T21:08:01.9804838Z   #quantity_for
2024-02-18T21:08:01.9805441Z     with storage location but no item id
2024-02-18T21:08:02.1082646Z       should return all items at that location
2024-02-18T21:08:02.1083900Z     with item id
2024-02-18T21:08:02.1084400Z       with no storage location
2024-02-18T21:08:02.1938965Z         should return quantities across all storage locations
2024-02-18T21:08:02.1939678Z       with storage location
2024-02-18T21:08:02.2775181Z         should return the quantity at that location
2024-02-18T21:08:02.2776231Z   #items_for_location
2024-02-18T21:08:02.3635485Z     should return the right values
2024-02-18T21:08:02.3636357Z     with include_omitted_items
2024-02-18T21:08:02.4482306Z       should add items not in the storage location
2024-02-18T21:08:02.4483295Z   #total_value_in_dollars
2024-02-18T21:08:02.5315975Z     should return total value across the given location
2024-02-18T21:08:02.5316661Z   #storage_location_name
2024-02-18T21:08:02.6146227Z     should return the right name
2024-02-18T21:08:02.6147237Z   #storage_locations_for_item
2024-02-18T21:08:02.6992308Z     should return all relevant IDs
2024-02-18T21:08:02.6992847Z   #all_items
2024-02-18T21:08:02.7819397Z     should return all items across storage locations
2024-02-18T21:08:02.7819963Z   .total_inventory
2024-02-18T21:08:02.8657796Z     should return the total quantity
2024-02-18T21:08:02.8658574Z   .items_for_location
2024-02-18T21:08:02.9740532Z     should return the right values
2024-02-18T21:08:02.9741325Z     with include_omitted_items
2024-02-18T21:08:03.0616838Z       should add items not in the storage location
2024-02-18T21:08:03.0617716Z 
2024-02-18T21:08:03.0617989Z RequestItem
2024-02-18T21:08:03.0618504Z   Methods >
2024-02-18T21:08:03.0619078Z     #from_json
2024-02-18T21:08:03.3168588Z       has the correct name
2024-02-18T21:08:03.5687721Z       has the correct amount on hand for location
2024-02-18T21:08:03.8146103Z       has the correct amount on hand
2024-02-18T21:08:04.0585591Z       has the correct quantity
2024-02-18T21:08:04.0586414Z 
2024-02-18T21:08:04.0586695Z ItemsInTotalQuery
2024-02-18T21:08:04.0587379Z   items_in_total_query
2024-02-18T21:08:04.4496083Z     counts shared items together
2024-02-18T21:08:04.6163364Z     returns a sum total of all in-flows
2024-02-18T21:08:04.8450292Z     does not count transfers going in the negative direction
2024-02-18T21:08:05.0570084Z     does not count negative adjustments towards in-flow
2024-02-18T21:08:05.3329613Z     does not count donations, purchases, adjustments to other storage locations
2024-02-18T21:08:05.3330509Z 
2024-02-18T21:08:05.3330803Z PartnerCreateService
2024-02-18T21:08:05.3331374Z   #call
2024-02-18T21:08:05.5132683Z     should return an instance of itself
2024-02-18T21:08:05.5133603Z     when the arguments are incorrect
2024-02-18T21:08:05.5134526Z       beacuse the partner_attrs are invalid
2024-02-18T21:08:05.6893040Z         should contain errors related to invalid partner attributes
2024-02-18T21:08:05.6894003Z     when the arguments are valid
2024-02-18T21:08:05.8765870Z       should create the associated partner profile data
2024-02-18T21:08:06.0582017Z       should create a new partner record with the organization provided
2024-02-18T21:08:06.0583771Z       but there was an unexpected issue with saving the
2024-02-18T21:08:06.0584631Z         Partners::Profile record
2024-02-18T21:08:06.2419956Z           should not create the associated partner records
2024-02-18T21:08:06.4236710Z           should not create the partner record for the organization
2024-02-18T21:08:06.4237657Z         Partner record
2024-02-18T21:08:06.6042598Z           should not create the partner record for the organization
2024-02-18T21:08:06.7806233Z           should not create the associated partner records
2024-02-18T21:08:06.7807185Z 
2024-02-18T21:08:06.7807509Z NDBNMember
2024-02-18T21:08:06.7811203Z   validations
2024-02-18T21:08:06.7907411Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-02-18T21:08:06.7972609Z     is expected to validate that :account_name cannot be empty/falsy
2024-02-18T21:08:06.8042123Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-02-18T21:08:06.8043209Z   versioning
2024-02-18T21:08:06.8078454Z     is expected to be versioned
2024-02-18T21:08:06.8079186Z   #full_name
2024-02-18T21:08:06.8114194Z     should equal the id and the account name
2024-02-18T21:08:06.8114759Z 
2024-02-18T21:08:06.8115187Z Partners::ItemRequest
2024-02-18T21:08:06.8116252Z   validations
2024-02-18T21:08:06.8229574Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-02-18T21:08:06.8286087Z     is expected to validate that :name cannot be empty/falsy
2024-02-18T21:08:06.8344781Z     is expected to validate that :quantity cannot be empty/falsy
2024-02-18T21:08:06.8403768Z     is expected to validate that :partner_key cannot be empty/falsy
2024-02-18T21:08:06.8404800Z   versioning
2024-02-18T21:08:06.8438343Z     is expected to be versioned
2024-02-18T21:08:06.8439208Z   associations
2024-02-18T21:08:06.8482307Z     is expected to belong to request class_name => ::Request required: true
2024-02-18T21:08:06.8533601Z     is expected to have many child_item_requests dependent => destroy
2024-02-18T21:08:06.8568523Z     is expected to have many children through child_item_requests
2024-02-18T21:08:06.8569283Z 
2024-02-18T21:08:06.8569534Z RequestsConfirmationMailer
2024-02-18T21:08:06.8945119Z   pairs the right quantities with the right item names
2024-02-18T21:08:06.9120433Z   handles duplicates
2024-02-18T21:08:06.9121282Z   #confirmation_email
2024-02-18T21:08:06.9250267Z     renders the headers
2024-02-18T21:08:06.9417467Z     renders the body
2024-02-18T21:08:06.9418492Z 
2024-02-18T21:08:06.9418763Z ApplicationHelper
2024-02-18T21:08:06.9421440Z   default_title_content
2024-02-18T21:08:06.9422380Z     Organization does not exist
2024-02-18T21:08:06.9489916Z       returns a default name
2024-02-18T21:08:06.9490455Z     Organization exists
2024-02-18T21:08:07.1176792Z       returns the organization's name
2024-02-18T21:08:07.1177597Z   step_container_helper
2024-02-18T21:08:07.1178360Z     active_index is equal to index
2024-02-18T21:08:07.1227630Z       returns active
2024-02-18T21:08:07.1228201Z     active_index is greater than index
2024-02-18T21:08:07.1270501Z       returns done
2024-02-18T21:08:07.1271143Z     active_index is less than index
2024-02-18T21:08:07.1314080Z       returns empty string
2024-02-18T21:08:07.1314992Z   confirm_delete_msg
2024-02-18T21:08:07.1359083Z     subs in string
2024-02-18T21:08:07.1359705Z   active_class
2024-02-18T21:08:07.1401060Z     Returns the controller name
2024-02-18T21:08:07.1401963Z   can_administrate?
2024-02-18T21:08:07.1402891Z     User is org admin and not part of org
2024-02-18T21:08:07.3288684Z       cannot administrate
2024-02-18T21:08:07.3289514Z     User is org admin and part of org
2024-02-18T21:08:07.3491586Z       can administrate
2024-02-18T21:08:07.3493029Z     User is part of org but not org admin
2024-02-18T21:08:07.3626888Z       cannot administrate
2024-02-18T21:08:07.3627567Z   flash_class
2024-02-18T21:08:07.3670286Z     returns appropriate class for notice
2024-02-18T21:08:07.3711572Z     returns appropriate class for alert
2024-02-18T21:08:07.3752253Z     returns appropriate class for error
2024-02-18T21:08:07.3793166Z     returns appropriate class for success
2024-02-18T21:08:07.3793926Z 
2024-02-18T21:08:07.3794161Z ItemCategory
2024-02-18T21:08:07.3795617Z   validations
2024-02-18T21:08:07.3935959Z     is expected to validate that :name cannot be empty/falsy
2024-02-18T21:08:07.4013638Z     is expected to validate that the length of :description is at most 250
2024-02-18T21:08:07.4089323Z     is expected to validate that :organization cannot be empty/falsy
2024-02-18T21:08:07.4282089Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-02-18T21:08:07.4283342Z   versioning
2024-02-18T21:08:07.4316130Z     is expected to be versioned
2024-02-18T21:08:07.4316948Z   assocations
2024-02-18T21:08:07.4351868Z     is expected to have many items
2024-02-18T21:08:07.4396346Z     is expected to belong to organization required: true
2024-02-18T21:08:07.4455191Z     is expected to have and belong to many partner_groups
2024-02-18T21:08:07.4455892Z 
2024-02-18T21:08:07.4456481Z Partners::ServedArea
2024-02-18T21:08:07.4677230Z   must only allow integer client shares
2024-02-18T21:08:07.4719442Z   is expected to belong to partner_profile required: true
2024-02-18T21:08:07.4946189Z   must only allow valid client share values
2024-02-18T21:08:07.4984123Z   is expected to belong to county required: true
2024-02-18T21:08:07.4985237Z   versioning
2024-02-18T21:08:07.5018326Z     is expected to be versioned
2024-02-18T21:08:07.5018861Z 
2024-02-18T21:08:07.5019294Z Exports::ExportPurchasesCSVService
2024-02-18T21:08:07.5020081Z   #generate_csv_data
2024-02-18T21:08:07.6120128Z     should match the expected content for the csv
2024-02-18T21:08:07.6120810Z 
2024-02-18T21:08:07.6120964Z AdjustmentCreateService
2024-02-18T21:08:07.6121657Z   call
2024-02-18T21:08:07.6905643Z     does not allow inventory to be adjusted below 0
2024-02-18T21:08:07.7843379Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-02-18T21:08:07.8650071Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-02-18T21:08:07.9577756Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-02-18T21:08:08.0470016Z     decreases stored inventory on a negative adjustment
2024-02-18T21:08:08.1010241Z     gives an error if we attempt to adjust inventory below 0
2024-02-18T21:08:08.1901698Z     handles adjustments to multiple items
2024-02-18T21:08:08.2751926Z     increases stored inventory on a positive adjustment
2024-02-18T21:08:08.3553523Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-02-18T21:08:08.3554466Z 
2024-02-18T21:08:08.3554764Z DistributionCreateService
2024-02-18T21:08:08.3555518Z   call
2024-02-18T21:08:08.4423160Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-18T21:08:08.5111689Z     returns a successful object with Scheduled distribution
2024-02-18T21:08:08.5113091Z     partner is deactivated
2024-02-18T21:08:08.5883079Z       does not send an email
2024-02-18T21:08:08.5884303Z     when there's multiple line items and one has insufficient inventory
2024-02-18T21:08:08.6526646Z       preserves the Insufficiency error and is unsuccessful
2024-02-18T21:08:08.6527846Z     when there's not sufficient inventory
2024-02-18T21:08:08.7136945Z       preserves the Insufficiency error and is unsuccessful
2024-02-18T21:08:08.7137720Z     when it fails to save
2024-02-18T21:08:08.7638156Z       preserves the error and is unsuccessful
2024-02-18T21:08:08.7638925Z     when the line item quantity is not positive
2024-02-18T21:08:08.8116708Z       preserves the RecordInvalid error and is unsuccessful
2024-02-18T21:08:08.8117720Z     partner has send reminders setting set to true
2024-02-18T21:08:08.9938942Z       Sends a PartnerMailer
2024-02-18T21:08:08.9939992Z     when provided with a request ID
2024-02-18T21:08:09.0731312Z       changes the status of the request
2024-02-18T21:08:09.0732425Z       and the request already has a distribution associated with it
2024-02-18T21:08:09.1461063Z         should not be successful
2024-02-18T21:08:09.1461859Z     partner has send reminders setting set to false
2024-02-18T21:08:09.2186539Z       does not send a PartnerMailer
2024-02-18T21:08:09.2187438Z 
2024-02-18T21:08:09.2187666Z AccountRequest
2024-02-18T21:08:09.2434797Z   #reject!
2024-02-18T21:08:09.2559650Z   #confirm!
2024-02-18T21:08:09.2560540Z   #identity_token
2024-02-18T21:08:09.2647108Z     should return a JWT token that contains the id of the account_request_id
2024-02-18T21:08:09.2648310Z     when the account_request is not persisted
2024-02-18T21:08:09.2745794Z       should raise an error
2024-02-18T21:08:09.2746607Z   associations
2024-02-18T21:08:09.2783605Z     is expected to have one organization class_name => Organization
2024-02-18T21:08:09.2842487Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-18T21:08:09.2843765Z   .get_by_identity_token
2024-02-18T21:08:09.2845055Z     when the identity_token corresponds to an existing AccountRequest
2024-02-18T21:08:09.2932374Z       should return the corresponding AccountRequest
2024-02-18T21:08:09.2933686Z     when the identity_token provided does not match any AccountRequest
2024-02-18T21:08:09.2968414Z       should return nil
2024-02-18T21:08:09.2969170Z   #processed?
2024-02-18T21:08:09.2969886Z     when the account request has no associated organization
2024-02-18T21:08:09.3064106Z       should return false
2024-02-18T21:08:09.3065151Z     when the account request has a associated organization
2024-02-18T21:08:09.4917133Z       should return true
2024-02-18T21:08:09.4918099Z   versioning
2024-02-18T21:08:09.4957224Z     is expected to be versioned
2024-02-18T21:08:09.4958086Z   validations
2024-02-18T21:08:09.5094263Z     is expected to validate that :email is case-sensitively unique
2024-02-18T21:08:09.5196205Z     is expected not to allow :email to be â€¹"not_email"â€º
2024-02-18T21:08:09.5333776Z     is expected to validate that :name cannot be empty/falsy
2024-02-18T21:08:09.5457122Z     is expected to validate that the length of :request_details is at least 50
2024-02-18T21:08:09.5575590Z     is expected to validate that :request_details cannot be empty/falsy
2024-02-18T21:08:09.5718488Z     is expected to validate that :email cannot be empty/falsy
2024-02-18T21:08:09.5820671Z     is expected to allow :email to be â€¹"alfonzo@wunsch-bradtke.example"â€º
2024-02-18T21:08:09.5821913Z     when the email provided is already used by an existing organization
2024-02-18T21:08:09.7656122Z       should not allow the email
2024-02-18T21:08:09.7656826Z     when the email provided is already used by an existing user
2024-02-18T21:08:09.7853377Z       should not allow the email
2024-02-18T21:08:09.7853981Z 
2024-02-18T21:08:09.7854274Z Partners::AuthorizedFamilyMember
2024-02-18T21:08:09.7855532Z   #display_name
2024-02-18T21:08:09.8290209Z     should return the family member's first and last name
2024-02-18T21:08:09.8290864Z   versioning
2024-02-18T21:08:09.8325837Z     is expected to be versioned
2024-02-18T21:08:09.8326569Z   associations
2024-02-18T21:08:09.8366360Z     is expected to belong to family required: true
2024-02-18T21:08:09.8401343Z     is expected to have many child_item_requests dependent => nullify
2024-02-18T21:08:09.8402139Z 
2024-02-18T21:08:09.8402374Z InventoryCheckService
2024-02-18T21:08:09.8402984Z   call
2024-02-18T21:08:09.8403891Z     alert
2024-02-18T21:08:09.9133708Z       should set the alert
2024-02-18T21:08:09.9134609Z     error
2024-02-18T21:08:09.9860792Z       should set the error
2024-02-18T21:08:09.9861360Z 
2024-02-18T21:08:09.9861718Z Reports::SummaryReportService
2024-02-18T21:08:09.9862682Z   #report
2024-02-18T21:08:10.4422319Z     should report positive values
2024-02-18T21:08:10.6175302Z     should report zero values
2024-02-18T21:08:11.0525711Z     should report negative values
2024-02-18T21:08:11.0526541Z 
2024-02-18T21:08:11.0526814Z BarcodeItem
2024-02-18T21:08:11.0528140Z   versioning
2024-02-18T21:08:11.0622099Z     is expected to be versioned
2024-02-18T21:08:11.0623310Z   Barcodes of BaseItems ('Global')
2024-02-18T21:08:11.0722813Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-02-18T21:08:11.0723915Z     scopes >
2024-02-18T21:08:11.0724744Z       global
2024-02-18T21:08:11.0886146Z         includes all barcodes, for both base items and regular items
2024-02-18T21:08:11.0887228Z     filters >
2024-02-18T21:08:11.1032189Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-02-18T21:08:11.1138935Z       ->by_value returns the barcode with that value
2024-02-18T21:08:11.1285209Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-02-18T21:08:11.1286253Z     validations >
2024-02-18T21:08:11.1371309Z       enforces uniqueness in the global scope
2024-02-18T21:08:11.1443105Z       is valid with or without an organization
2024-02-18T21:08:11.1518730Z       allows multiple barcodes to point at the same base item
2024-02-18T21:08:11.1520150Z       value >
2024-02-18T21:08:11.1569840Z         requires a value
2024-02-18T21:08:11.1570681Z       quantity >
2024-02-18T21:08:11.1620337Z         is not a negative number
2024-02-18T21:08:11.1669602Z         is not nil
2024-02-18T21:08:11.1718487Z         is an integer
2024-02-18T21:08:11.1719312Z       item >
2024-02-18T21:08:11.1769399Z         is invalid without an item associated with it
2024-02-18T21:08:11.1770538Z   Organization barcodes
2024-02-18T21:08:11.1885764Z     updates a counter in Item whenever it tracks a new barcode
2024-02-18T21:08:11.1887107Z     when searching for a barcode where there is a global and local with the same value
2024-02-18T21:08:11.2185736Z       favors the local barcode
2024-02-18T21:08:11.2186457Z     to_h >
2024-02-18T21:08:11.2302849Z       emits a hash for a line_item
2024-02-18T21:08:11.2303733Z     validations >
2024-02-18T21:08:11.2420498Z       allows multiple barcodes to point at the same item
2024-02-18T21:08:11.2564993Z       is valid only with an organization
2024-02-18T21:08:11.2789284Z       does not enforces value uniqueness across organizations
2024-02-18T21:08:11.2907081Z       does not enforce value uniqueness compared with the global scope
2024-02-18T21:08:11.3058531Z       enforces value uniqueness within the organization
2024-02-18T21:08:11.3059277Z       value >
2024-02-18T21:08:11.3148553Z         requires a value
2024-02-18T21:08:11.3149207Z       quantity >
2024-02-18T21:08:11.3239471Z         is not nil
2024-02-18T21:08:11.3332221Z         is not a negative number
2024-02-18T21:08:11.3420831Z         is an integer
2024-02-18T21:08:11.3421469Z       item >
2024-02-18T21:08:11.3514857Z         is invalid without an item associated with it
2024-02-18T21:08:11.3515908Z     scopes >
2024-02-18T21:08:11.3722154Z       #by_item_partner_key returns barcodes that match the partner key
2024-02-18T21:08:11.5698462Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-02-18T21:08:11.5817490Z       ->by_value returns the barcode with that value
2024-02-18T21:08:11.5818285Z     filters >
2024-02-18T21:08:11.6030990Z       ->item_id shows only barcodes for a specific item_id
2024-02-18T21:08:11.6032018Z 
2024-02-18T21:08:11.6033786Z Partners::Family
2024-02-18T21:08:11.6034160Z   associations
2024-02-18T21:08:11.6082919Z     is expected to belong to partner required: true
2024-02-18T21:08:11.6141393Z     is expected to have many children dependent => destroy
2024-02-18T21:08:11.6176699Z     is expected to have many authorized_family_members dependent => destroy
2024-02-18T21:08:11.6177674Z   validations
2024-02-18T21:08:11.6263958Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-02-18T21:08:11.6341798Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-02-18T21:08:11.6426207Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-02-18T21:08:11.6427201Z   #search_non_archived
2024-02-18T21:08:11.7359444Z     should return non-archived families if zero is passed in
2024-02-18T21:08:11.8336095Z     should return all families if one is passed in
2024-02-18T21:08:11.8336995Z   #total_children_count
2024-02-18T21:08:11.8391301Z     should return the family's total children count
2024-02-18T21:08:11.8392105Z   versioning
2024-02-18T21:08:11.8426940Z     is expected to be versioned
2024-02-18T21:08:11.8427860Z   #guardian_display_name
2024-02-18T21:08:11.8476521Z     should return the guardian's first and last name
2024-02-18T21:08:11.8477392Z   #create_authorized
2024-02-18T21:08:11.8745296Z     should include authorized family members
2024-02-18T21:08:11.8749055Z 
2024-02-18T21:08:11.8749530Z Partners::FetchPartnersToRemindNowService
2024-02-18T21:08:11.8750468Z   .fetch
2024-02-18T21:08:11.8751640Z     when there is a partner
2024-02-18T21:08:11.8753110Z       that does NOT have a organization with a global reminder & deadline
2024-02-18T21:08:11.8754322Z         and is a part of a partner group that does have them defined
2024-02-18T21:08:11.8755582Z           that is for today
2024-02-18T21:08:11.9167772Z             should include that partner
2024-02-18T21:08:11.9168612Z             but the partner is deactivated
2024-02-18T21:08:11.9544647Z               should NOT include that partner
2024-02-18T21:08:11.9545823Z           that is not for today
2024-02-18T21:08:11.9884150Z             should NOT include that partner
2024-02-18T21:08:11.9885229Z       that has an organization with a global reminder & deadline
2024-02-18T21:08:11.9886339Z         that is for today
2024-02-18T21:08:12.0175916Z           should include that partner
2024-02-18T21:08:12.0177015Z           but the partner is deactivated
2024-02-18T21:08:12.0508857Z             should NOT include that partner
2024-02-18T21:08:12.0509711Z           and has send_reminder=false
2024-02-18T21:08:12.0842887Z             should NOT include that partner
2024-02-18T21:08:12.0843864Z         AND a partner group that does have them defined
2024-02-18T21:08:12.1201244Z           should remind based on the partner group instead of the organization level reminder
2024-02-18T21:08:12.1202751Z           but the partner is deactivated
2024-02-18T21:08:12.1596055Z             should NOT include that partner
2024-02-18T21:08:12.1597023Z         that is not for today
2024-02-18T21:08:12.1883508Z           should NOT include that partner
2024-02-18T21:08:12.1885015Z 
2024-02-18T21:08:12.1885368Z HistoricalDataCacheJob
2024-02-18T21:08:12.3746961Z   caches the historical data
2024-02-18T21:08:12.5466194Z   queues the job
2024-02-18T21:08:12.5467651Z 
2024-02-18T21:08:12.5469534Z DistributionsController
2024-02-18T21:08:12.5470130Z   While signed in
2024-02-18T21:08:12.5470631Z     POST #create
2024-02-18T21:08:12.5471379Z       multiple line_items that have inventory quantity below recommended quantity
2024-02-18T21:08:12.6424811Z         redirects with a flash notice and a flash alert
2024-02-18T21:08:12.6426822Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-18T21:08:12.7104534Z         redirects with a flash notice and a flash error
2024-02-18T21:08:12.7105897Z       when line item quantity is not positive
2024-02-18T21:08:12.7637780Z         flashes an error
2024-02-18T21:08:12.7639001Z       multiple line_items that have inventory quantity below minimum quantity
2024-02-18T21:08:12.8595701Z         redirects with a flash notice and a flash error
2024-02-18T21:08:12.8596914Z     PUT #update
2024-02-18T21:08:12.8597914Z       when distribution causes inventory quantity to be below recommended quantity
2024-02-18T21:08:12.9760205Z         redirects with a flash notice and a flash error
2024-02-18T21:08:12.9761463Z       when distribution has items updated for minimum quantity
2024-02-18T21:08:13.1110659Z         redirects with a flash notice and send send_notification
2024-02-18T21:08:13.1111830Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-18T21:08:13.2301234Z         redirects with a flash notice and a flash error
2024-02-18T21:08:13.2301924Z 
2024-02-18T21:08:13.2302542Z DistributionItemizedBreakdownService
2024-02-18T21:08:13.2303313Z   #fetch_csv
2024-02-18T21:08:13.6239483Z     should output the expected output but in CSV format (FAILED - 1)
2024-02-18T21:08:13.6240203Z   #fetch
2024-02-18T21:08:13.9889590Z     should include the break down of items distributed with onhand data
2024-02-18T21:08:13.9890314Z 
2024-02-18T21:08:13.9890501Z CustomDeviseMailer
2024-02-18T21:08:13.9891554Z   #invitation_instructions
2024-02-18T21:08:13.9892726Z     when user is invited
2024-02-18T21:08:14.0126827Z       invites to user
2024-02-18T21:08:14.0298535Z       has invite expiration message
2024-02-18T21:08:14.0299674Z     when partner is invited
2024-02-18T21:08:14.0711672Z       invites to primary user
2024-02-18T21:08:14.0712518Z     when other partner users invited
2024-02-18T21:08:14.1104023Z       invites to partner user
2024-02-18T21:08:14.1105332Z 
2024-02-18T21:08:14.1105556Z DistributionContentChangeService
2024-02-18T21:08:14.1106878Z   #any_change?
2024-02-18T21:08:14.1108056Z     when there are line items updated
2024-02-18T21:08:14.1142374Z       returns true
2024-02-18T21:08:14.1142955Z     when there are line items removed and updated
2024-02-18T21:08:14.1175870Z       returns true
2024-02-18T21:08:14.1176359Z     when there are no changes in the line items
2024-02-18T21:08:14.1209315Z       returns true
2024-02-18T21:08:14.1209809Z     when there are line items removed
2024-02-18T21:08:14.1312472Z       returns true
2024-02-18T21:08:14.1313020Z   #changes
2024-02-18T21:08:14.1313732Z     when there are line items removed and updated
2024-02-18T21:08:14.1351320Z       returns true
2024-02-18T21:08:14.1352432Z 
2024-02-18T21:08:14.1352666Z DeadlineService
2024-02-18T21:08:14.1353352Z   #next_deadline
2024-02-18T21:08:14.1354336Z     do from the partner group
2024-02-18T21:08:14.1355329Z       when the deadline is today
2024-02-18T21:08:14.1419362Z         returns a date in the next month
2024-02-18T21:08:14.1420147Z       when the deadline is after today
2024-02-18T21:08:14.1473621Z         returns a date within the current month
2024-02-18T21:08:14.1474261Z       when the deadline is before today
2024-02-18T21:08:14.1530485Z         returns a date in the next month
2024-02-18T21:08:14.1531177Z     from the organization
2024-02-18T21:08:14.1532185Z       when the deadline is after today
2024-02-18T21:08:14.1587013Z         returns a date within the current month
2024-02-18T21:08:14.1587634Z       when the deadline is before today
2024-02-18T21:08:14.1644221Z         returns a date in the next month
2024-02-18T21:08:14.1644803Z       when the deadline is today
2024-02-18T21:08:14.1701073Z         returns a date in the next month
2024-02-18T21:08:14.1702091Z 
2024-02-18T21:08:14.1702424Z Exports::ExportDonationsCSVService
2024-02-18T21:08:14.1703198Z   #generate_csv_data
2024-02-18T21:08:14.2930828Z     should match the expected content for the csv
2024-02-18T21:08:14.2931815Z 
2024-02-18T21:08:14.2932118Z Organization
2024-02-18T21:08:14.2935189Z   default storage location
2024-02-18T21:08:14.2981233Z     associates the default storage location with a storage location
2024-02-18T21:08:14.3016330Z     returns nil when not set
2024-02-18T21:08:14.3017773Z   is_active
2024-02-18T21:08:14.6656866Z     returns active organizations
2024-02-18T21:08:14.6657653Z   #ordered_requests
2024-02-18T21:08:14.8582162Z     puts active requests before fulfilled requests
2024-02-18T21:08:14.8583148Z     ordering of requests with matching status
2024-02-18T21:08:15.0534684Z       puts the most recently updated request before older requests
2024-02-18T21:08:15.0535801Z   #assign_attributes_from_account_request
2024-02-18T21:08:15.0626671Z     should assign the proper attributes to the organization
2024-02-18T21:08:15.0627512Z   geocode
2024-02-18T21:08:15.2323935Z     adds coordinates to the database
2024-02-18T21:08:15.2324625Z   address
2024-02-18T21:08:15.2360411Z     returns an empty string when the org has no address components
2024-02-18T21:08:15.2392959Z     correctly formats an address string with commas and spaces
2024-02-18T21:08:15.2424735Z     does not add a trailing space when the zip code is missing
2024-02-18T21:08:15.2457245Z     does not add any separators after street when city, state, and zip are missing
2024-02-18T21:08:15.2489219Z     does not add any separators before the city when street is missing
2024-02-18T21:08:15.2490049Z   #seed_items
2024-02-18T21:08:15.4266817Z     allows a single base item to be seeded
2024-02-18T21:08:15.6171563Z     allows a collection of items to be seeded
2024-02-18T21:08:15.6172774Z     when given an item that already exists
2024-02-18T21:08:15.8083429Z       gracefully skips the item
2024-02-18T21:08:15.8084860Z     when given an item name that already exists, but with an 'other' partner key
2024-02-18T21:08:16.0012978Z       updates the old item to use the new base item as its base
2024-02-18T21:08:16.0013922Z   total_inventory
2024-02-18T21:08:16.2389799Z     returns a sum total of all inventory at all storage locations
2024-02-18T21:08:16.4122833Z     returns 0 if there is nothing
2024-02-18T21:08:16.4123486Z   reminder_day
2024-02-18T21:08:16.4240527Z     can only contain numbers 1-28
2024-02-18T21:08:16.4241299Z   earliest reporting year
2024-02-18T21:08:16.6699025Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-02-18T21:08:16.9447232Z     is the organization created year if no associated data
2024-02-18T21:08:16.9448438Z   after_create
2024-02-18T21:08:16.9743497Z     should update the state of the account request
2024-02-18T21:08:16.9744263Z   versioning
2024-02-18T21:08:16.9825186Z     is expected to be versioned
2024-02-18T21:08:16.9826054Z   from_email
2024-02-18T21:08:17.2161891Z     returns admin email when not present
2024-02-18T21:08:17.4052047Z     returns admin email when it's empty space
2024-02-18T21:08:17.6014394Z     returns admin email when it's empty
2024-02-18T21:08:17.7769031Z     returns email when present
2024-02-18T21:08:17.7769900Z   #short_name
2024-02-18T21:08:17.7843747Z     can only contain valid characters
2024-02-18T21:08:17.7844526Z   deadline_day
2024-02-18T21:08:17.7942862Z     can only contain numbers 1-28
2024-02-18T21:08:17.7943737Z   .seed_items
2024-02-18T21:08:17.7944444Z     when provided with an organization to seed
2024-02-18T21:08:18.1147852Z       loads the base items into Item records
2024-02-18T21:08:18.1148772Z     when no organization is provided
2024-02-18T21:08:18.7537893Z       updates all organizations
2024-02-18T21:08:18.7539043Z   valid_items
2024-02-18T21:08:18.9380422Z     only shows active valid items
2024-02-18T21:08:19.1149821Z     returns an array of item partner keys
2024-02-18T21:08:19.1150855Z     with invisible items
2024-02-18T21:08:19.1443377Z       only shows active and visible items
2024-02-18T21:08:19.1444293Z   Associations >
2024-02-18T21:08:19.1484360Z     is expected to have many item_categories
2024-02-18T21:08:19.1527689Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-18T21:08:19.1563962Z     is expected to have many users through roles
2024-02-18T21:08:19.1564808Z     distributions
2024-02-18T21:08:19.1565594Z       upcoming
2024-02-18T21:08:19.2274111Z         retrieves the distributions scheduled for this week that have not yet happened
2024-02-18T21:08:19.2275154Z     users
2024-02-18T21:08:19.2275596Z       when a organizaton has a user that has two roles
2024-02-18T21:08:19.4215387Z         should returns users without duplications
2024-02-18T21:08:19.4216361Z     items
2024-02-18T21:08:19.4217181Z       .other
2024-02-18T21:08:21.3963492Z         returns all items for this organization designated 'other'
2024-02-18T21:08:21.3964368Z       .during.top
2024-02-18T21:08:23.3483984Z         return 3 most used items
2024-02-18T21:08:25.3491498Z         return just 3 elements
2024-02-18T21:08:25.3492092Z       .during
2024-02-18T21:08:27.2980930Z         return ranking of all items
2024-02-18T21:08:27.2981619Z       .during.bottom
2024-02-18T21:08:29.2709049Z         return just 3 elements
2024-02-18T21:08:31.2303288Z         return 3 least used items
2024-02-18T21:08:31.2304396Z     barcode_items
2024-02-18T21:08:31.4146586Z       returns only this organization's barcodes, no globals
2024-02-18T21:08:31.4147680Z       .all
2024-02-18T21:08:31.6001088Z         includes global barcode items also
2024-02-18T21:08:31.6001752Z   validations
2024-02-18T21:08:31.6080765Z     validates that attachments are png or jpgs
2024-02-18T21:08:31.6175894Z     validates that at least one distribution type is enabled
2024-02-18T21:08:31.6242595Z     validates that attachment file size is not higher than 1 MB
2024-02-18T21:08:31.8025347Z     validates that short names are unique
2024-02-18T21:08:31.8025967Z 
2024-02-18T21:08:31.8026182Z Reports::WarehouseReportService
2024-02-18T21:08:31.8027096Z   #report
2024-02-18T21:08:32.1495998Z     should print unknown warehouse type
2024-02-18T21:08:32.3262377Z     should print zero values
2024-02-18T21:08:32.6836441Z     should print normal values
2024-02-18T21:08:32.8660585Z     should print unknown square footage
2024-02-18T21:08:32.8661358Z 
2024-02-18T21:08:32.8661764Z Exports::ExportRequestService
2024-02-18T21:08:32.8663038Z   .generate_csv_data
2024-02-18T21:08:33.0653777Z     includes rows for each request with correct columns of item quantity
2024-02-18T21:08:33.2670931Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-02-18T21:08:33.2671959Z 
2024-02-18T21:08:33.2672347Z DistributionUpdateService
2024-02-18T21:08:33.2672789Z   call
2024-02-18T21:08:33.3723555Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-18T21:08:33.3724431Z   resend_notification?
2024-02-18T21:08:33.4701033Z     changes any distribution content, resulting in resend_notification? = true
2024-02-18T21:08:33.5594372Z     changes the issue_date, resulting in resend_notification? = true
2024-02-18T21:08:33.6481718Z     changes the delivery_method, resulting in resend_notification? = true
2024-02-18T21:08:33.6482488Z 
2024-02-18T21:08:33.6482990Z EventDiffer
2024-02-18T21:08:33.8791385Z   should return a full diff
2024-02-18T21:08:33.8791824Z 
2024-02-18T21:08:33.8792222Z UiHelper
2024-02-18T21:08:33.8793917Z   optional_data_text
2024-02-18T21:08:33.8794887Z     when the field provided is blank
2024-02-18T21:08:33.8850036Z       should return the text Not-Provided in gray text
2024-02-18T21:08:33.8850999Z     when the field provided is not blank
2024-02-18T21:08:33.8895914Z       should return the content
2024-02-18T21:08:33.8897326Z 
2024-02-18T21:08:33.8897514Z OrganizationStats
2024-02-18T21:08:33.8898819Z   partners_added method >
2024-02-18T21:08:33.8899788Z     current org is not nil >
2024-02-18T21:08:33.8936254Z       should return actual count of partners
2024-02-18T21:08:33.8937215Z     current org is nil >
2024-02-18T21:08:33.8969206Z       should return 0
2024-02-18T21:08:33.8972532Z   storage_locations_added method >
2024-02-18T21:08:33.8973699Z     current org is not nil >
2024-02-18T21:08:33.9006880Z       should return actual count of locations
2024-02-18T21:08:33.9007515Z     current org is nil >
2024-02-18T21:08:33.9041365Z       should return 0
2024-02-18T21:08:33.9042075Z   donation_sites_added method >
2024-02-18T21:08:33.9042784Z     current org is nil >
2024-02-18T21:08:33.9077171Z       should return 0
2024-02-18T21:08:33.9078015Z     current org is not nil >
2024-02-18T21:08:33.9112180Z       should return actual count of donation sites
2024-02-18T21:08:33.9113030Z   locations_with_inventory method >
2024-02-18T21:08:33.9114051Z     current org is not nil + locations have items >
2024-02-18T21:08:33.9454689Z       should return storage location
2024-02-18T21:08:33.9455802Z     current org is not nil + no locations have items >
2024-02-18T21:08:33.9518857Z       should return an empty array
2024-02-18T21:08:33.9519641Z     current org is nil >
2024-02-18T21:08:33.9554529Z       should return an empty array
2024-02-18T21:08:33.9555302Z 
2024-02-18T21:08:33.9555809Z Partners::FamilyRequestCreateService
2024-02-18T21:08:33.9556701Z   #call
2024-02-18T21:08:33.9557900Z     when the arguments are incorrect
2024-02-18T21:08:33.9558995Z       because no family_requests_attributes were defined
2024-02-18T21:08:33.9796630Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-18T21:08:33.9797849Z       because a unrecognized item_id was provided
2024-02-18T21:08:34.0028676Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-18T21:08:34.0029973Z     when the arguments are correct
2024-02-18T21:08:34.0030702Z       with children
2024-02-18T21:08:34.1173216Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-02-18T21:08:34.1174851Z       without children
2024-02-18T21:08:34.1462684Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-02-18T21:08:34.1463948Z 
2024-02-18T21:08:34.1464354Z DistributionReminder
2024-02-18T21:08:34.1467860Z   conditionally sending the emails
2024-02-18T21:08:34.1748167Z     sends mail for future distributions where the partner wants reminders
2024-02-18T21:08:34.2015947Z     does not send mail for past distributions
2024-02-18T21:08:34.2290016Z     does not send mail for future distributions if the partner wants no reminders
2024-02-18T21:08:34.2572154Z     sends mail for future distributions
2024-02-18T21:08:34.2573281Z     when the partner is deactivated
2024-02-18T21:08:34.2855772Z       does not send mail
2024-02-18T21:08:34.2856542Z     when the distribution_id does not match any Distribution
2024-02-18T21:08:34.2902586Z       does not send mail for non existent distributions
2024-02-18T21:08:34.2903581Z 
2024-02-18T21:08:34.2903863Z Kit
2024-02-18T21:08:34.4994171Z   deactivate and reactivate
2024-02-18T21:08:34.4994909Z   versioning
2024-02-18T21:08:34.5033652Z     is expected to be versioned
2024-02-18T21:08:34.5034368Z   Filtering >
2024-02-18T21:08:35.0462621Z     ->alphabetized retrieves items in alphabetical order
2024-02-18T21:08:35.0513238Z     can filter
2024-02-18T21:08:35.0514096Z     ->by_partner_key
2024-02-18T21:08:35.2914876Z       shows the kits for a particular item
2024-02-18T21:08:35.2917120Z   Validations >
2024-02-18T21:08:35.3086596Z     requires a name
2024-02-18T21:08:35.3252018Z     is valid as built
2024-02-18T21:08:35.5280056Z     requires a unique name
2024-02-18T21:08:35.5458428Z     must belong to an organization
2024-02-18T21:08:35.5635863Z     can't have negative value
2024-02-18T21:08:35.5799822Z     requires at least one item
2024-02-18T21:08:35.5800545Z   #can_deactivate?
2024-02-18T21:08:35.5801244Z     with inventory items
2024-02-18T21:08:35.8013015Z       should return false
2024-02-18T21:08:35.8013847Z     without inventory items
2024-02-18T21:08:35.9947125Z       should return true
2024-02-18T21:08:35.9947826Z   Value >
2024-02-18T21:08:36.0110865Z     converts cents to dollars
2024-02-18T21:08:36.0267196Z     converts dollars to cents
2024-02-18T21:08:36.0267939Z     .value_per_itemizable
2024-02-18T21:08:36.0649843Z       calculates values from associated items
2024-02-18T21:08:36.0650408Z 
2024-02-18T21:08:36.0650689Z DistributionPdf
2024-02-18T21:08:36.1322979Z   #request_data
2024-02-18T21:08:36.1897043Z   #non_request_data
2024-02-18T21:08:36.1897773Z 
2024-02-18T21:08:36.1898022Z DonationSitesController
2024-02-18T21:08:36.1899586Z   While not signed in
2024-02-18T21:08:36.1961738Z     redirects the user to the sign-in page for CRUD actions
2024-02-18T21:08:36.1962658Z   While signed in
2024-02-18T21:08:36.1963881Z     DELETE #destroy
2024-02-18T21:08:36.2138528Z       returns http success
2024-02-18T21:08:36.2139291Z     Looking at a different organization
2024-02-18T21:08:36.3851315Z       redirects the user to the sign-in page for CRUD actions
2024-02-18T21:08:36.3851950Z     GET #new
2024-02-18T21:08:36.3981722Z       returns http success
2024-02-18T21:08:36.3982463Z     POST #import_csv
2024-02-18T21:08:36.3983138Z       behaves like csv import
2024-02-18T21:08:36.3984273Z         without a csv file
2024-02-18T21:08:36.4084151Z           presents a flash error message
2024-02-18T21:08:36.4181095Z           redirects to :index
2024-02-18T21:08:36.4181931Z         csv file with wrong headers
2024-02-18T21:08:36.4309064Z           redirects to :index
2024-02-18T21:08:36.4412713Z           presents a flash error message
2024-02-18T21:08:36.4413647Z         with a csv file
2024-02-18T21:08:36.4610859Z           presents a flash notice message
2024-02-18T21:08:36.4748010Z           redirects to :index
2024-02-18T21:08:36.4787037Z           invokes .import_csv
2024-02-18T21:08:36.4787752Z     GET #edit
2024-02-18T21:08:36.4922663Z       returns http success
2024-02-18T21:08:36.4923363Z     GET #show
2024-02-18T21:08:36.5051804Z       returns http success
2024-02-18T21:08:36.5052672Z     GET #index
2024-02-18T21:08:36.5162431Z       returns http success
2024-02-18T21:08:36.5166336Z 
2024-02-18T21:08:36.5166657Z PartnerMailerJob
2024-02-18T21:08:36.5167687Z   conditionally sending the emails
2024-02-18T21:08:36.8121885Z     sends mail for future distributions immediately
2024-02-18T21:08:37.0135002Z     does not send mail for past distributions
2024-02-18T21:08:37.2579563Z     when the distribution is for a deactivated partner
2024-02-18T21:08:37.2580798Z       does not send the email
2024-02-18T21:08:37.2581272Z 
2024-02-18T21:08:37.2581548Z ProductDriveParticipant
2024-02-18T21:08:37.2582193Z   Validations
2024-02-18T21:08:37.2727186Z     is invalid without an organization
2024-02-18T21:08:37.2863193Z     is invalid unless it has either a phone number or an email
2024-02-18T21:08:37.2864294Z   versioning
2024-02-18T21:08:37.2951781Z     is expected to be versioned
2024-02-18T21:08:37.2952560Z   behaves like provideable
2024-02-18T21:08:37.2953519Z     import_csv
2024-02-18T21:08:37.5935915Z       imports from a csv file
2024-02-18T21:08:37.5936821Z     geocode
2024-02-18T21:08:37.6000217Z       adds coordinates to the database
2024-02-18T21:08:37.6001042Z     Validations
2024-02-18T21:08:37.6038526Z       is invalid without an organization
2024-02-18T21:08:37.6096266Z       is invalid unless it has either a contact name or a business name
2024-02-18T21:08:37.6097072Z   Methods
2024-02-18T21:08:37.6098013Z     volume
2024-02-18T21:08:37.6834699Z       retrieves the amount of product that has been donated by participant
2024-02-18T21:08:37.6835985Z     donation_source_view
2024-02-18T21:08:37.6836687Z       no contact name
2024-02-18T21:08:37.6895439Z         is expected to be nil
2024-02-18T21:08:37.6896378Z       contact name present
2024-02-18T21:08:37.6952354Z         is expected to eq "Contact Name (participant)"
2024-02-18T21:08:37.6953268Z     volume_by_product_drive
2024-02-18T21:08:37.8415912Z       retrieves the amount of product that has been donated through specific product drive
2024-02-18T21:08:37.8416806Z 
2024-02-18T21:08:37.8417147Z Partners::UpdateFamily
2024-02-18T21:08:37.8418320Z   #call
2024-02-18T21:08:37.8419093Z     when an error occurs during archiving
2024-02-18T21:08:37.8783778Z       does not archive the family or its children and adds error to the service
2024-02-18T21:08:37.8784551Z     when family has children
2024-02-18T21:08:37.9182321Z       archives the family and its children
2024-02-18T21:08:37.9183046Z 
2024-02-18T21:08:37.9183500Z DonationCreateService
2024-02-18T21:08:37.9184108Z   #call
2024-02-18T21:08:37.9393116Z     should create the donation
2024-02-18T21:08:37.9393566Z 
2024-02-18T21:08:37.9393962Z TextInterpolatorService
2024-02-18T21:08:37.9394689Z   #call
2024-02-18T21:08:37.9429336Z     returns interpolated text
2024-02-18T21:08:37.9430065Z     when text is empty
2024-02-18T21:08:37.9462711Z       returns empty string
2024-02-18T21:08:37.9463843Z     when text is nil
2024-02-18T21:08:37.9496951Z       returns nil
2024-02-18T21:08:37.9497816Z     when interpolations are nil
2024-02-18T21:08:37.9531761Z       returns text
2024-02-18T21:08:37.9532451Z     when interpolations are not present
2024-02-18T21:08:37.9567108Z       returns text
2024-02-18T21:08:37.9567810Z     when interpolations are empty
2024-02-18T21:08:37.9601509Z       returns text
2024-02-18T21:08:37.9859553Z 
2024-02-18T21:08:37.9875496Z Vendor
2024-02-18T21:08:37.9876841Z   behaves like provideable
2024-02-18T21:08:37.9877441Z     import_csv
2024-02-18T21:08:38.1426678Z       imports from a csv file
2024-02-18T21:08:38.1427279Z     geocode
2024-02-18T21:08:38.1484998Z       adds coordinates to the database
2024-02-18T21:08:38.1485577Z     Validations
2024-02-18T21:08:38.1520907Z       is invalid without an organization
2024-02-18T21:08:38.1576000Z       is invalid unless it has either a contact name or a business name
2024-02-18T21:08:38.1576818Z   Methods
2024-02-18T21:08:38.1577300Z     volume
2024-02-18T21:08:38.2271761Z       retrieves the amount of product that has been bought from this vendor
2024-02-18T21:08:38.2272639Z   versioning
2024-02-18T21:08:38.2312109Z     is expected to be versioned
2024-02-18T21:08:38.2313167Z 
2024-02-18T21:08:38.2313334Z Request
2024-02-18T21:08:38.2314834Z   total_items
2024-02-18T21:08:38.2411839Z     adds the quantity of all items in the request
2024-02-18T21:08:38.2413044Z   item data
2024-02-18T21:08:38.2500103Z     coerces item quantity and id to always be an integer before saving
2024-02-18T21:08:38.2500901Z   versioning
2024-02-18T21:08:38.2536379Z     is expected to be versioned
2024-02-18T21:08:38.2536909Z   Enums >
2024-02-18T21:08:38.2537411Z     #status
2024-02-18T21:08:38.2739217Z       scopes
2024-02-18T21:08:38.2740327Z 
2024-02-18T21:08:38.2740717Z ItemCreateService
2024-02-18T21:08:38.2741685Z   #call
2024-02-18T21:08:38.2742741Z     when an issue occurs in transaction
2024-02-18T21:08:38.2743986Z       because a inventory item creation failed and raised an error
2024-02-18T21:08:38.4475112Z         should return a OpenStruct with the raised error
2024-02-18T21:08:38.4476006Z       because the organization_id does not match any Organization
2024-02-18T21:08:38.6243512Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-02-18T21:08:38.6244548Z       because the item create raised an error
2024-02-18T21:08:38.7992123Z         should return a OpenStruct with the raised error
2024-02-18T21:08:38.7992924Z     when there are no issues
2024-02-18T21:08:38.9902454Z       should return an OpenStruct with success? set to true and the item
2024-02-18T21:08:39.1721070Z       should execute the expected methods
2024-02-18T21:08:39.1721651Z 
2024-02-18T21:08:39.1721846Z DistributionDestroyService
2024-02-18T21:08:39.1722457Z   #call
2024-02-18T21:08:39.1723597Z     when the distribution_id matches no Distribution
2024-02-18T21:08:39.1766459Z       to not be a success
2024-02-18T21:08:39.1767068Z     when the distribution_id does match a Distribution
2024-02-18T21:08:39.1767988Z       and the destroy! operation fails
2024-02-18T21:08:39.3821447Z         should not be successful and have the error message
2024-02-18T21:08:39.5914386Z         should not delete the Distribution
2024-02-18T21:08:39.5915129Z       and the operations succeed
2024-02-18T21:08:39.8012362Z         should increase the inventory of the storage location
2024-02-18T21:08:40.0088198Z         should be successful
2024-02-18T21:08:40.2179121Z         should destroy the Distribution
2024-02-18T21:08:40.2179932Z       and the increase inventory operations fails
2024-02-18T21:08:40.4204929Z         should not be successful and have the error message
2024-02-18T21:08:40.6308675Z         should not delete the Distribution
2024-02-18T21:08:40.6309585Z 
2024-02-18T21:08:40.6309763Z Transfer
2024-02-18T21:08:40.6311745Z   versioning
2024-02-18T21:08:40.6350330Z     is expected to be versioned
2024-02-18T21:08:40.6350882Z   Validations >
2024-02-18T21:08:40.6596821Z     requires that each line item exists in the inventory
2024-02-18T21:08:40.6717397Z     must have storage locations set
2024-02-18T21:08:40.6816395Z     must belong to an organization
2024-02-18T21:08:40.7467947Z     requires that the line items must have sufficient quantity in the inventory
2024-02-18T21:08:40.9310149Z     must only use storage locations that belong to the organization (no hacks!)
2024-02-18T21:08:40.9431690Z     must have different storage locations
2024-02-18T21:08:40.9432372Z   Methods >
2024-02-18T21:08:41.1440604Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-02-18T21:08:41.1441419Z   behaves like itemizable
2024-02-18T21:08:41.1441910Z     .line_items
2024-02-18T21:08:41.1442705Z       combine!
2024-02-18T21:08:41.1923948Z         combines multiple line_items with the same item_id into a single record
2024-02-18T21:08:41.2194255Z         incrementally combines line_items on donations that have already been created
2024-02-18T21:08:41.2194978Z       quantities_by_name
2024-02-18T21:08:41.2683406Z         returns a hash of items with id, name, and quantity
2024-02-18T21:08:41.3179523Z         leaves out zero-quantitied items if requested
2024-02-18T21:08:41.3180584Z       sorted
2024-02-18T21:08:41.3906623Z         displays the items, sorted by name
2024-02-18T21:08:41.3907232Z       total
2024-02-18T21:08:41.4393384Z         has an item total
2024-02-18T21:08:41.4393955Z     .to_a
2024-02-18T21:08:41.4395002Z       with Flipper flag :deprecate_to_a disabled
2024-02-18T21:08:41.4743856Z         calls line_item_values
2024-02-18T21:08:41.4744488Z       with Flipper flag :deprecate_to_a enabled
2024-02-18T21:08:41.5083196Z         raises an error
2024-02-18T21:08:41.5084017Z   Scopes >
2024-02-18T21:08:41.5296447Z     `to_location` can filter out transfers to a specific location
2024-02-18T21:08:41.5502314Z     `from_location` can filter out transfers from a specific location
2024-02-18T21:08:41.5502982Z 
2024-02-18T21:08:41.5503169Z ServiceObjectErrorsMixin
2024-02-18T21:08:41.5503806Z   self.included
2024-02-18T21:08:41.5539459Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-02-18T21:08:41.5540224Z 
2024-02-18T21:08:41.5540442Z Exports::ExportReportCSVService
2024-02-18T21:08:41.5540968Z   .generate_csv_data
2024-02-18T21:08:41.5573519Z     creates CSV data including headers
2024-02-18T21:08:41.5605625Z     creates a CSV string
2024-02-18T21:08:41.5606072Z 
2024-02-18T21:08:41.5606276Z HistoricalTrendsHelper
2024-02-18T21:08:41.5607891Z   #last_12_months
2024-02-18T21:08:41.5651885Z     returns the last 12 months starting from July when the current month is June
2024-02-18T21:08:41.5691650Z     returns the last 12 months starting from Jan when the current month is Dec
2024-02-18T21:08:41.5730708Z     returns the last 12 months starting from Feb when the current month is Jan
2024-02-18T21:08:41.5731499Z 
2024-02-18T21:08:41.5731767Z PartnerGroup
2024-02-18T21:08:41.5732729Z   associations
2024-02-18T21:08:41.5769232Z     is expected to have many partners
2024-02-18T21:08:41.5817127Z     is expected to belong to organization required: true
2024-02-18T21:08:41.5878655Z     is expected to have and belong to many item_categories
2024-02-18T21:08:41.5879382Z   DB constraints
2024-02-18T21:08:41.5879800Z     deadline_day <= 28
2024-02-18T21:08:41.5952919Z       raises error if unmet
2024-02-18T21:08:41.5953564Z     send_reminders IS NOT NULL
2024-02-18T21:08:41.6023738Z       raises error if unmet
2024-02-18T21:08:41.6024292Z     reminder_day <= 28
2024-02-18T21:08:41.6089402Z       raises error if unmet
2024-02-18T21:08:41.6090052Z   Validations >
2024-02-18T21:08:41.6326323Z     does not require a unique name between organizations
2024-02-18T21:08:41.6368150Z     must belong to an organization
2024-02-18T21:08:41.6458034Z     requires a unique name within an organization
2024-02-18T21:08:41.6458958Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-02-18T21:08:41.6506089Z       should not be valid
2024-02-18T21:08:41.6506966Z   versioning
2024-02-18T21:08:41.6540447Z     is expected to be versioned
2024-02-18T21:08:41.6541125Z 
2024-02-18T21:08:41.6541770Z DeallocateKitInventoryService
2024-02-18T21:08:41.6542635Z   #error
2024-02-18T21:08:41.6543970Z     when the storage location organization doesn't match
2024-02-18T21:08:41.8887907Z       returns error
2024-02-18T21:08:41.8888404Z   #deallocate
2024-02-18T21:08:41.8889466Z     when inventory items are available
2024-02-18T21:08:41.8891298Z       when decrease_by is less then kit's quantity in inventory_in
2024-02-18T21:08:42.2292984Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-02-18T21:08:42.2294148Z       when decrease_by is greater then kit's quantity in inventory_in
2024-02-18T21:08:42.5285089Z         raises error about inconsistent inventory in or out
2024-02-18T21:08:42.5286045Z       when kit_allocation not exist for inventory_in or inventory_out
2024-02-18T21:08:42.8124467Z         raises error about KitAllocation not found
2024-02-18T21:08:42.8125930Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-02-18T21:08:43.1328439Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-02-18T21:08:43.1329708Z 
2024-02-18T21:08:43.1329911Z PartnerInviteService
2024-02-18T21:08:43.1629891Z   should create invite
2024-02-18T21:08:43.1986865Z   should update the status of the partner to invited
2024-02-18T21:08:43.1987579Z   with force: true
2024-02-18T21:08:43.2300407Z     should send the force setting forward
2024-02-18T21:08:43.2300914Z 
2024-02-18T21:08:43.2301059Z Event
2024-02-18T21:08:43.2301982Z   #most_recent_snapshot
2024-02-18T21:08:43.4674158Z     should include the last usable snapshot
2024-02-18T21:08:43.7083866Z     should not include an unusable snapshot
2024-02-18T21:08:43.7084445Z 
2024-02-18T21:08:43.7084629Z ProfileUpdateService
2024-02-18T21:08:43.7085515Z   #update
2024-02-18T21:08:43.7339201Z     updates the profile with the filtered and prepared params
2024-02-18T21:08:43.7339831Z 
2024-02-18T21:08:43.7340022Z RequestDestroyService
2024-02-18T21:08:43.7340880Z   #call
2024-02-18T21:08:43.7511988Z     should return an instance of itself
2024-02-18T21:08:43.7515640Z     when the request_id matches no request
2024-02-18T21:08:43.7560899Z       should not be successful and have errors indicating request id is invalid
2024-02-18T21:08:43.7561650Z     when the request is already discarded
2024-02-18T21:08:43.7671447Z       should not be successful and have errors
2024-02-18T21:08:43.7673747Z     when there are no validation errors
2024-02-18T21:08:43.7825577Z       should update the discarded_at column on the request
2024-02-18T21:08:43.7954252Z       should send a email notification to the partner
2024-02-18T21:08:43.8085959Z       should update the status column on the request
2024-02-18T21:08:43.8087029Z     when the request's partner is deactivated
2024-02-18T21:08:43.8374488Z       should have errors
2024-02-18T21:08:43.8375266Z 
2024-02-18T21:08:43.8375541Z Partners::Child
2024-02-18T21:08:43.8376852Z   #display_name
2024-02-18T21:08:43.8656881Z     should return a child's first and last name
2024-02-18T21:08:43.8657333Z   associations
2024-02-18T21:08:43.8701589Z     is expected to belong to family required: true
2024-02-18T21:08:43.8734783Z     is expected to have many child_item_requests dependent => destroy
2024-02-18T21:08:43.8735375Z   versioning
2024-02-18T21:08:43.8771111Z     is expected to be versioned
2024-02-18T21:08:43.8772317Z 
2024-02-18T21:08:43.8772477Z Audit
2024-02-18T21:08:43.8773851Z   Validations >
2024-02-18T21:08:43.8935560Z     must belong to an organization admin of its organization
2024-02-18T21:08:43.9489206Z     can not have line items that has quantity as negative integer
2024-02-18T21:08:44.0043074Z     can have line items that has quantity as a positive integer
2024-02-18T21:08:44.0581905Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-02-18T21:08:44.1167874Z     can have line items that has quantity as zero
2024-02-18T21:08:44.1471154Z     must belong to an organization
2024-02-18T21:08:44.2001871Z     cannot have duplicate line items
2024-02-18T21:08:44.2002485Z   Scopes >
2024-02-18T21:08:44.2434462Z     `at_location` can filter out audits to a specific location
2024-02-18T21:08:44.2435163Z   versioning
2024-02-18T21:08:44.2469840Z     is expected to be versioned
2024-02-18T21:08:44.2470377Z   Methods >
2024-02-18T21:08:44.5784545Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-02-18T21:08:44.8121790Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-02-18T21:08:44.8122871Z   behaves like itemizable
2024-02-18T21:08:44.8123439Z     .line_items
2024-02-18T21:08:44.8123837Z       total
2024-02-18T21:08:44.8948123Z         has an item total
2024-02-18T21:08:44.8948653Z       sorted
2024-02-18T21:08:45.0071645Z         displays the items, sorted by name
2024-02-18T21:08:45.0072330Z       combine!
2024-02-18T21:08:45.0442594Z         incrementally combines line_items on donations that have already been created
2024-02-18T21:08:45.1007335Z         combines multiple line_items with the same item_id into a single record
2024-02-18T21:08:45.1007958Z       quantities_by_name
2024-02-18T21:08:45.1812674Z         leaves out zero-quantitied items if requested
2024-02-18T21:08:45.2602047Z         returns a hash of items with id, name, and quantity
2024-02-18T21:08:45.2602705Z     .to_a
2024-02-18T21:08:45.2604217Z       with Flipper flag :deprecate_to_a disabled
2024-02-18T21:08:45.3090668Z         calls line_item_values
2024-02-18T21:08:45.3091154Z       with Flipper flag :deprecate_to_a enabled
2024-02-18T21:08:45.3568202Z         raises an error
2024-02-18T21:08:45.3569933Z 
2024-02-18T21:08:45.3570215Z DonationsController
2024-02-18T21:08:45.3571592Z   While signed in as a normal user >
2024-02-18T21:08:45.3573094Z     POST#create
2024-02-18T21:08:45.3979293Z       redirects to GET#edit on success
2024-02-18T21:08:45.4189134Z       renders GET#new with error on failure
2024-02-18T21:08:45.4189733Z     GET #edit
2024-02-18T21:08:45.4372620Z       returns http success
2024-02-18T21:08:45.4373226Z     DELETE #destroy
2024-02-18T21:08:45.4528852Z       redirects to the dashboard path
2024-02-18T21:08:45.4529482Z     GET #show
2024-02-18T21:08:45.4681936Z       returns http success
2024-02-18T21:08:45.4682350Z     GET #new
2024-02-18T21:08:45.4798543Z       returns http success
2024-02-18T21:08:45.4799080Z     GET #index
2024-02-18T21:08:45.4928199Z       returns http success
2024-02-18T21:08:45.4928724Z     PUT#update
2024-02-18T21:08:45.6059206Z       updates storage quantity correctly
2024-02-18T21:08:45.6386779Z       redirects to index after update
2024-02-18T21:08:45.6387387Z       when removing a line item
2024-02-18T21:08:45.7419332Z         updates storage invetory item quantity correctly
2024-02-18T21:08:45.7419864Z       when changing storage location
2024-02-18T21:08:45.7457353Z         rolls back updates if quantity would go below 0
2024-02-18T21:08:45.8677669Z         updates storage quantity correctly
2024-02-18T21:08:45.8678406Z   While signed in as an organization admin >
2024-02-18T21:08:45.8679138Z     DELETE #destroy
2024-02-18T21:08:45.9014484Z       redirects to the index
2024-02-18T21:08:45.9015234Z   calculating total money raised for all donations
2024-02-18T21:08:45.9055301Z     returns zero for an empty array of donations
2024-02-18T21:08:45.9186382Z     correctly calculates the total
2024-02-18T21:08:45.9187081Z   calculating total value of multiple donations
2024-02-18T21:08:45.9225406Z     returns zero for an empty array of donations
2024-02-18T21:08:46.0618968Z     works correctly for multiple line items per donation
2024-02-18T21:08:46.0619649Z 
2024-02-18T21:08:46.0620019Z PartnerProfileUpdateService
2024-02-18T21:08:46.0620693Z   #call
2024-02-18T21:08:46.0622134Z     when served area client shares pre-exist
2024-02-18T21:08:46.0622855Z       and the new values are correct
2024-02-18T21:08:46.0623531Z         and there are errors on the profile
2024-02-18T21:08:46.0970296Z           maintains the old values and returns failure
2024-02-18T21:08:46.0971045Z         and there are no other errors
2024-02-18T21:08:46.1296613Z           replaces the old values and returns success
2024-02-18T21:08:46.1298090Z       and the new values are incorrect
2024-02-18T21:08:46.1622060Z         maintains the old values and returns failure
2024-02-18T21:08:46.1623071Z     when there are no pre-existing served areas
2024-02-18T21:08:46.1623729Z       and the new values are incorrect
2024-02-18T21:08:46.1826620Z 0
2024-02-18T21:08:46.1834943Z         does not store the new values and returns a failure
2024-02-18T21:08:46.1835761Z       and the new values are correct
2024-02-18T21:08:46.2061776Z         stores the new values and returns success
2024-02-18T21:08:46.2062518Z         and there are other errors in the profile
2024-02-18T21:08:46.2280170Z           does not store the new values and it returns a failure
2024-02-18T21:08:46.2282993Z 
2024-02-18T21:08:46.2283249Z Reports::ChildrenServedReportService
2024-02-18T21:08:46.2284015Z   #report
2024-02-18T21:08:46.4070643Z     should report zero values
2024-02-18T21:08:46.8999918Z     should work with no distribution_quantity
2024-02-18T21:08:47.4036537Z     should report normal values
2024-02-18T21:08:47.4037310Z 
2024-02-18T21:08:47.4037658Z PartnerRequestRecertificationService
2024-02-18T21:08:47.4038731Z   #call
2024-02-18T21:08:47.4042161Z     when the arguments are correct
2024-02-18T21:08:47.4349336Z       should queue sending the notice to the partner
2024-02-18T21:08:47.4653402Z       should change the partner status to approved
2024-02-18T21:08:47.4934687Z       should have no errors
2024-02-18T21:08:47.4935370Z       but a unexpected error occurred during the save
2024-02-18T21:08:47.4938299Z         for partner approval
2024-02-18T21:08:47.5187628Z           should have an error with the raised error
2024-02-18T21:08:47.5444794Z           should not change the partner status to recertification_required
2024-02-18T21:08:47.5686354Z           should NOT queue sending the notice to the partner
2024-02-18T21:08:47.5687197Z     when the partner is deactivated
2024-02-18T21:08:47.5963331Z       does not send an email
2024-02-18T21:08:47.5963926Z     when the arguments are incorrect
2024-02-18T21:08:47.5964712Z       because the partner has already been requested to recertify
2024-02-18T21:08:47.6244344Z         should return the PartnerRequestRecertificationService object with an error
2024-02-18T21:08:48.0825955Z 
2024-02-18T21:08:48.0826591Z Failures:
2024-02-18T21:08:48.0826974Z 
2024-02-18T21:08:48.0827873Z   1) DistributionItemizedBreakdownService#fetch_csv should output the expected output but in CSV format
2024-02-18T21:08:48.0828902Z      Failure/Error: expect(subject).to eq(expected_output_csv)
2024-02-18T21:08:48.0829350Z 
2024-02-18T21:08:48.0829827Z        expected: "Item,Total Distribution,Total On Hand\n99T Diapers,500,100\n100T Diapers,200,200\n"
2024-02-18T21:08:48.0830897Z             got: "Item,Total Distribution,Total On Hand\n100T Diapers,200,200\n99T Diapers,500,100\n"
2024-02-18T21:08:48.0831498Z 
2024-02-18T21:08:48.0831632Z        (compared using ==)
2024-02-18T21:08:48.0831866Z 
2024-02-18T21:08:48.0831971Z        Diff:
2024-02-18T21:08:48.0832148Z 
2024-02-18T21:08:48.0832481Z        @@ -1,4 +1,4 @@
2024-02-18T21:08:48.0832873Z         Item,Total Distribution,Total On Hand
2024-02-18T21:08:48.0833380Z        -99T Diapers,500,100
2024-02-18T21:08:48.0833757Z         100T Diapers,200,200
2024-02-18T21:08:48.0834124Z        +99T Diapers,500,100
2024-02-18T21:08:48.0834917Z      # ./spec/services/distribution_itemized_breakdown_service_spec.rb:44:in `block (3 levels) in <top (required)>'
2024-02-18T21:08:48.0842810Z 
2024-02-18T21:08:48.0843217Z Finished in 46.89 seconds (files took 8.26 seconds to load)
2024-02-18T21:08:48.0844415Z 473 examples, 1 failure
2024-02-18T21:08:48.0845673Z 
2024-02-18T21:08:48.0845916Z Failed examples:
2024-02-18T21:08:48.0846216Z 
2024-02-18T21:08:48.0847473Z rspec ./spec/services/distribution_itemized_breakdown_service_spec.rb:35 # DistributionItemizedBreakdownService#fetch_csv should output the expected output but in CSV format
2024-02-18T21:08:48.0848961Z 
2024-02-18T21:08:48.0849150Z Randomized with seed 21312
2024-02-18T21:08:48.0849490Z 
2024-02-18T21:08:48.5769453Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-18T21:08:48.5771687Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3860 / 6430 LOC (60.03%) covered.
2024-02-18T21:08:48.6308842Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/models/kit_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/transfer_spec.rb" "spec/models/request_item_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/item_create_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/models/account_request_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/vendor_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/item_category_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/request_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb" failed
2024-02-18T21:08:49.0185748Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-18T21:08:49.0187819Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10695 LOC (0.36%) covered.
2024-02-18T21:08:49.0477994Z ##[error]Process completed with exit code 1.
