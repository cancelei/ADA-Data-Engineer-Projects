2024-03-04T19:16:24.0999848Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T19:16:24.1000805Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T19:16:24.1028889Z shell: /usr/bin/bash -e {0}
2024-03-04T19:16:24.1029242Z env:
2024-03-04T19:16:24.1029586Z   POSTGRES_HOST: localhost
2024-03-04T19:16:24.1030049Z   DATABASE_HOST: localhost
2024-03-04T19:16:24.1030464Z   PG_USERNAME: postgres
2024-03-04T19:16:24.1030841Z   PG_PASSWORD: password
2024-03-04T19:16:24.1031246Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T19:16:24.1031672Z   POSTGRES_PORT: 5432
2024-03-04T19:16:24.1032033Z   PGHOST: localhost
2024-03-04T19:16:24.1032459Z   PGUSER: postgres
2024-03-04T19:16:24.1032805Z   RAILS_ENV: test
2024-03-04T19:16:24.1033141Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T19:16:24.1033672Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-04T19:16:24.1034075Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-04T19:16:24.1034579Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T19:16:24.1035123Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T19:16:24.1035776Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T19:16:24.1036759Z   EVENTS_READ: true
2024-03-04T19:16:24.1037114Z ##[endgroup]
2024-03-04T19:16:29.7618401Z W, [2024-03-04T19:16:29.761520 #2276]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T19:16:29.7620331Z W, [2024-03-04T19:16:29.761572 #2276]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:16:29.7621953Z W, [2024-03-04T19:16:29.761587 #2276]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:16:29.7625199Z W, [2024-03-04T19:16:29.761607 #2276]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T19:16:32.4378707Z W, [2024-03-04T19:16:32.437545 #2276]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T19:16:32.4380861Z W, [2024-03-04T19:16:32.437589 #2276]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:16:32.4383270Z W, [2024-03-04T19:16:32.437603 #2276]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:16:32.4387093Z W, [2024-03-04T19:16:32.437654 #2276]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T19:16:32.4453915Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-03-04T19:16:40.9535915Z 
2024-03-04T19:16:40.9536926Z Randomized with seed 62421
2024-03-04T19:16:41.7415451Z 
2024-03-04T19:16:41.7416342Z ItemsOutTotalQuery
2024-03-04T19:16:41.7417146Z   items_out_total_query
2024-03-04T19:16:41.9233288Z     returns a sum total of all out-flows
2024-03-04T19:16:41.9233965Z 
2024-03-04T19:16:41.9234205Z ProfileUpdateService
2024-03-04T19:16:41.9234826Z   #update
2024-03-04T19:16:41.9508969Z     updates the profile with the filtered and prepared params
2024-03-04T19:16:41.9509751Z 
2024-03-04T19:16:41.9510007Z PartnerInviteService
2024-03-04T19:16:41.9828118Z   should update the status of the partner to invited
2024-03-04T19:16:42.0126873Z   should create invite
2024-03-04T19:16:42.0127665Z   with force: true
2024-03-04T19:16:42.0418495Z     should send the force setting forward
2024-03-04T19:16:42.0419256Z 
2024-03-04T19:16:42.0419460Z Request
2024-03-04T19:16:42.0420477Z   Enums >
2024-03-04T19:16:42.0421582Z     #status
2024-03-04T19:16:42.0700124Z       scopes
2024-03-04T19:16:42.0700755Z   item data
2024-03-04T19:16:42.0787815Z     coerces item quantity and id to always be an integer before saving
2024-03-04T19:16:42.0788832Z   versioning
2024-03-04T19:16:42.0823086Z     is expected to be versioned
2024-03-04T19:16:42.0823970Z   total_items
2024-03-04T19:16:42.0914248Z     adds the quantity of all items in the request
2024-03-04T19:16:42.0914920Z 
2024-03-04T19:16:42.0915134Z EventDiffer
2024-03-04T19:16:42.3071914Z   should return a full diff (FAILED - 1)
2024-03-04T19:16:42.3072604Z 
2024-03-04T19:16:42.3073485Z ProductDrive
2024-03-04T19:16:42.5642191Z   calculates and returns all donated organization item quantities by name and date
2024-03-04T19:16:43.0627948Z   calculates and returns all donated organization item quantities by category and date
2024-03-04T19:16:43.2761875Z   calculates donation quantity by date
2024-03-04T19:16:43.4152365Z   calculates in-kind value
2024-03-04T19:16:43.5456373Z   calculates donation quantity
2024-03-04T19:16:43.5457156Z   versioning
2024-03-04T19:16:43.6776627Z     is expected to be versioned
2024-03-04T19:16:43.6777489Z   validations
2024-03-04T19:16:43.8116162Z     is expected not to be valid
2024-03-04T19:16:43.9508324Z     is expected not to be valid
2024-03-04T19:16:44.0857291Z     is expected not to be valid
2024-03-04T19:16:44.0857863Z   associations
2024-03-04T19:16:44.1806573Z     has_many donations
2024-03-04T19:16:44.2660240Z     has_many product_drive_participants through donations
2024-03-04T19:16:44.2661112Z   distinct_items
2024-03-04T19:16:44.6094212Z     counts the distinct items correctly by given category
2024-03-04T19:16:44.9436500Z     doesn't double_count the items if there are two donations for the same item
2024-03-04T19:16:45.2776019Z     counts the distinct items correctly by given date
2024-03-04T19:16:45.6195054Z     counts the items correctly for 1 donation with multiple items
2024-03-04T19:16:45.9769382Z     counts the distinct items correctly in overlapping donations
2024-03-04T19:16:45.9770239Z   .search_date_range
2024-03-04T19:16:46.1153633Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-04T19:16:46.1154613Z   scopes
2024-03-04T19:16:46.1155200Z     .within_date_range
2024-03-04T19:16:46.2566648Z       returns the product drive 1
2024-03-04T19:16:46.3997888Z       does not include product drive 2
2024-03-04T19:16:46.3998711Z     .by_name
2024-03-04T19:16:46.5382037Z       does not return other_name
2024-03-04T19:16:46.6779539Z       returns the product_drive with name some_name
2024-03-04T19:16:46.6780466Z     .by_item_category_id
2024-03-04T19:16:46.9954237Z       returns the product_drive with name some_name
2024-03-04T19:16:47.3216718Z       does not return other_name
2024-03-04T19:16:47.3217799Z   donation_source_view
2024-03-04T19:16:47.4771524Z     returns formatted text
2024-03-04T19:16:47.4772094Z 
2024-03-04T19:16:47.4772365Z Partners::AuthorizedFamilyMember
2024-03-04T19:16:47.4773366Z   #display_name
2024-03-04T19:16:47.5235559Z     should return the family member's first and last name
2024-03-04T19:16:47.5236675Z   associations
2024-03-04T19:16:47.5284146Z     is expected to belong to family required: true
2024-03-04T19:16:47.5332973Z     is expected to have many child_item_requests dependent => nullify
2024-03-04T19:16:47.5334148Z   versioning
2024-03-04T19:16:47.5370273Z     is expected to be versioned
2024-03-04T19:16:47.5371039Z 
2024-03-04T19:16:47.5371409Z Kit
2024-03-04T19:16:47.7491720Z   deactivate and reactivate
2024-03-04T19:16:47.7492512Z   #can_deactivate?
2024-03-04T19:16:47.7493045Z     with inventory items
2024-03-04T19:16:47.9639336Z       should return false
2024-03-04T19:16:47.9640066Z     without inventory items
2024-03-04T19:16:48.1507503Z       should return true
2024-03-04T19:16:48.1508227Z   versioning
2024-03-04T19:16:48.1544816Z     is expected to be versioned
2024-03-04T19:16:48.1545528Z   Filtering >
2024-03-04T19:16:48.1593260Z     can filter
2024-03-04T19:16:48.7133113Z     ->alphabetized retrieves items in alphabetical order
2024-03-04T19:16:48.7133789Z     ->by_partner_key
2024-03-04T19:16:48.9394860Z       shows the kits for a particular item
2024-03-04T19:16:48.9395770Z   Validations >
2024-03-04T19:16:48.9559881Z     requires a name
2024-03-04T19:16:48.9735387Z     can't have negative value
2024-03-04T19:16:49.1742882Z     requires a unique name
2024-03-04T19:16:49.1907497Z     must belong to an organization
2024-03-04T19:16:49.2069591Z     requires at least one item
2024-03-04T19:16:49.2230073Z     is valid as built
2024-03-04T19:16:49.2230828Z   Value >
2024-03-04T19:16:49.2380668Z     converts dollars to cents
2024-03-04T19:16:49.2529351Z     converts cents to dollars
2024-03-04T19:16:49.2530193Z     .value_per_itemizable
2024-03-04T19:16:49.2903829Z       calculates values from associated items
2024-03-04T19:16:49.2906821Z 
2024-03-04T19:16:49.2907277Z Reports::AcquisitionReportService
2024-03-04T19:16:49.2908011Z   acquisition report
2024-03-04T19:16:50.1846950Z     should return the proper results on #report
2024-03-04T19:16:50.1847596Z 
2024-03-04T19:16:50.1847978Z InventoryItem
2024-03-04T19:16:50.1885196Z   initializes the quantity to 0 if it was not specified
2024-03-04T19:16:50.1886123Z   versioning
2024-03-04T19:16:50.1925108Z     is expected to be versioned
2024-03-04T19:16:50.1926037Z   Validations >
2024-03-04T19:16:50.1976704Z     requires an item
2024-03-04T19:16:50.2031255Z     requires an inventory association
2024-03-04T19:16:50.2032205Z     quantity >
2024-03-04T19:16:50.2092946Z       is numerical
2024-03-04T19:16:50.2241975Z       is gte 0
2024-03-04T19:16:50.2310436Z       is less than the max integer
2024-03-04T19:16:50.2370361Z       is required
2024-03-04T19:16:50.2371541Z   Filtering >
2024-03-04T19:16:50.2372368Z     ->by_partner_key
2024-03-04T19:16:50.2509215Z       shows the Base Items by partner_key
2024-03-04T19:16:50.2509934Z 
2024-03-04T19:16:50.2510411Z OrganizationMailer
2024-03-04T19:16:50.2511227Z   #partner_approval_request
2024-03-04T19:16:50.2794498Z     renders the body with correct text with partner information
2024-03-04T19:16:50.3030772Z     should be sent to the partner main email with the correct subject line
2024-03-04T19:16:50.3269521Z     includes a link to the relevant partner
2024-03-04T19:16:50.3270772Z 
2024-03-04T19:16:50.3271078Z Item
2024-03-04T19:16:50.3272847Z   default_quantity
2024-03-04T19:16:50.3356179Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-04T19:16:50.3432926Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-04T19:16:50.3510331Z     should return the value of distribution_quantity if it is set
2024-03-04T19:16:50.3595907Z     should return 50 if column is not set
2024-03-04T19:16:50.3596748Z   versioning
2024-03-04T19:16:50.3632618Z     is expected to be versioned
2024-03-04T19:16:50.3633454Z   Filtering >
2024-03-04T19:16:50.3846342Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-04T19:16:50.4029774Z     ->alphabetized retrieves items in alphabetical order
2024-03-04T19:16:50.4062842Z     can filter
2024-03-04T19:16:50.4340368Z     ->active shows items that are still active
2024-03-04T19:16:50.4341253Z     ->by_base_item
2024-03-04T19:16:50.6343502Z       can be chained to organization to constrain it to just 1 org's items
2024-03-04T19:16:50.6503875Z       shows the items for a particular base_item
2024-03-04T19:16:50.6504838Z     ->by_partner_key
2024-03-04T19:16:50.6656486Z       filters by partner key
2024-03-04T19:16:50.6657243Z     ->cloth_diapers
2024-03-04T19:16:50.6924997Z       returns records associated with disposable diapers
2024-03-04T19:16:50.6925851Z     ->disposable
2024-03-04T19:16:50.7195024Z       returns records associated with disposable diapers
2024-03-04T19:16:50.7195999Z   Validations >
2024-03-04T19:16:50.7249880Z     must belong to an organization
2024-03-04T19:16:50.7296766Z     requires a Base Item base
2024-03-04T19:16:50.7404715Z     requires that items quantity are not a negative number
2024-03-04T19:16:50.7533196Z     requires a unique name
2024-03-04T19:16:50.7533872Z   Assocations >
2024-03-04T19:16:50.7581561Z     is expected to belong to item_category optional: true
2024-03-04T19:16:50.7582347Z   Methods >
2024-03-04T19:16:50.7582948Z     other?
2024-03-04T19:16:50.7718994Z       is true for items that are partner_key 'other'
2024-03-04T19:16:50.7720038Z     barcoded_items >
2024-03-04T19:16:50.8140114Z       returns a collection of items that have barcodes associated with them
2024-03-04T19:16:50.8140965Z     storage_locations_containing
2024-03-04T19:16:50.8518393Z       retrieves all storage locations that contain an item
2024-03-04T19:16:50.8519353Z     barcodes_for
2024-03-04T19:16:50.8720025Z       retrieves all BarcodeItems associated with an item
2024-03-04T19:16:50.8721039Z     #reactivate!
2024-03-04T19:16:50.8721596Z       given a single item id
2024-03-04T19:16:50.8853904Z         sets the active trait to true for that item
2024-03-04T19:16:50.8854747Z       given an array of item ids
2024-03-04T19:16:50.9065603Z         sets the active trait to true for all of them
2024-03-04T19:16:50.9066733Z     has_history?
2024-03-04T19:16:50.9775440Z       identifies items that have been used previously
2024-03-04T19:16:50.9776314Z     destroy
2024-03-04T19:16:51.1891577Z       deactivates the kit if it exists
2024-03-04T19:16:51.2124887Z       only hides an item that has history
2024-03-04T19:16:51.2301139Z       actually destroys an item that doesn't have history
2024-03-04T19:16:51.2302251Z   distribution_quantity and package size
2024-03-04T19:16:51.2429551Z     have nil values if an empty string is passed
2024-03-04T19:16:51.2430575Z   after update
2024-03-04T19:16:51.2431127Z     when item has the kit
2024-03-04T19:16:51.4505268Z       updates kit name
2024-03-04T19:16:51.4506063Z     when item does not have kit
2024-03-04T19:16:51.4654732Z       does not raise any errors
2024-03-04T19:16:51.4655455Z 
2024-03-04T19:16:51.4655714Z HistoricalDataCacheJob
2024-03-04T19:16:51.6488652Z   caches the historical data
2024-03-04T19:16:51.8220850Z   queues the job
2024-03-04T19:16:51.8221271Z 
2024-03-04T19:16:51.8221862Z PartnerRequestRecertificationService
2024-03-04T19:16:51.8222595Z   #call
2024-03-04T19:16:51.8223640Z     when the partner is deactivated
2024-03-04T19:16:51.8512446Z       does not send an email
2024-03-04T19:16:51.8513346Z     when the arguments are correct
2024-03-04T19:16:51.8830511Z       should change the partner status to approved
2024-03-04T19:16:51.9110137Z       should queue sending the notice to the partner
2024-03-04T19:16:51.9387681Z       should have no errors
2024-03-04T19:16:51.9388724Z       but a unexpected error occurred during the save
2024-03-04T19:16:51.9389614Z         for partner approval
2024-03-04T19:16:51.9648609Z           should not change the partner status to recertification_required
2024-03-04T19:16:51.9893100Z           should have an error with the raised error
2024-03-04T19:16:52.0136729Z           should NOT queue sending the notice to the partner
2024-03-04T19:16:52.0137654Z     when the arguments are incorrect
2024-03-04T19:16:52.0138780Z       because the partner has already been requested to recertify
2024-03-04T19:16:52.0428605Z         should return the PartnerRequestRecertificationService object with an error
2024-03-04T19:16:52.0429539Z 
2024-03-04T19:16:52.0429784Z RequestsConfirmationMailer
2024-03-04T19:16:52.0651793Z   handles duplicates
2024-03-04T19:16:52.0927758Z   pairs the right quantities with the right item names
2024-03-04T19:16:52.0928991Z   #confirmation_email
2024-03-04T19:16:52.1056504Z     renders the headers
2024-03-04T19:16:52.1224601Z     renders the body
2024-03-04T19:16:52.1225096Z 
2024-03-04T19:16:52.1225652Z Deadlinable
2024-03-04T19:16:52.1226246Z   validations
2024-03-04T19:16:52.1271930Z     validates that reminder day is not the same as deadline day
2024-03-04T19:16:52.1345541Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-04T19:16:52.1418091Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-04T19:16:52.1419307Z 
2024-03-04T19:16:52.1419452Z DistributionPdf
2024-03-04T19:16:52.2108649Z   #request_data
2024-03-04T19:16:52.2697663Z   #non_request_data
2024-03-04T19:16:52.2698212Z 
2024-03-04T19:16:52.2698697Z OrganizationUpdateService
2024-03-04T19:16:52.2699839Z   #update
2024-03-04T19:16:52.2700956Z     when organization has partners
2024-03-04T19:16:52.2702364Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-04T19:16:52.4947069Z         should allow the disabling of request flags in organization and its partners
2024-03-04T19:16:52.4948942Z       when all of a single partner's request flags will be disabled
2024-03-04T19:16:52.7064257Z         should NOT change request flags in organization or its partners
2024-03-04T19:16:52.9242688Z         should add an error message to the organization
2024-03-04T19:16:52.9243564Z     when object is valid
2024-03-04T19:16:53.1019849Z       should update and return true
2024-03-04T19:16:53.1020605Z     when object is invalid
2024-03-04T19:16:53.2776610Z       should not update and return false
2024-03-04T19:16:53.2777651Z   #update_partner_flags
2024-03-04T19:16:53.2778437Z     when request flags have changed
2024-03-04T19:16:53.5040120Z       should update partners when disabling child and individual request flags
2024-03-04T19:16:53.7245766Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-04T19:16:53.9969492Z       should update partners when disabling quantity-based request flags
2024-03-04T19:16:53.9974650Z     when request flags haven't changed
2024-03-04T19:16:54.3011344Z       should not update partners
2024-03-04T19:16:54.3011928Z 
2024-03-04T19:16:54.3012204Z DeadlineService
2024-03-04T19:16:54.3013233Z   #next_deadline
2024-03-04T19:16:54.3014233Z     do from the partner group
2024-03-04T19:16:54.3021854Z       when the deadline is before today
2024-03-04T19:16:54.3228650Z         returns a date in the next month
2024-03-04T19:16:54.3229326Z       when the deadline is today
2024-03-04T19:16:54.3292804Z         returns a date in the next month
2024-03-04T19:16:54.3293656Z       when the deadline is after today
2024-03-04T19:16:54.3350728Z         returns a date within the current month
2024-03-04T19:16:54.3351519Z     from the organization
2024-03-04T19:16:54.3352228Z       when the deadline is after today
2024-03-04T19:16:54.3408953Z         returns a date within the current month
2024-03-04T19:16:54.3409877Z       when the deadline is before today
2024-03-04T19:16:54.3462795Z         returns a date in the next month
2024-03-04T19:16:54.3463799Z       when the deadline is today
2024-03-04T19:16:54.3518202Z         returns a date in the next month
2024-03-04T19:16:54.3519007Z 
2024-03-04T19:16:54.3519271Z Vendor
2024-03-04T19:16:54.3520374Z   versioning
2024-03-04T19:16:54.3556410Z     is expected to be versioned
2024-03-04T19:16:54.3557207Z   Methods
2024-03-04T19:16:54.3557691Z     volume
2024-03-04T19:16:54.4259505Z       retrieves the amount of product that has been bought from this vendor
2024-03-04T19:16:54.4260651Z   behaves like provideable
2024-03-04T19:16:54.4261158Z     import_csv
2024-03-04T19:16:54.6103154Z       imports from a csv file
2024-03-04T19:16:54.6103886Z     geocode
2024-03-04T19:16:54.6164721Z       adds coordinates to the database
2024-03-04T19:16:54.6165448Z     Validations
2024-03-04T19:16:54.6224664Z       is invalid unless it has either a contact name or a business name
2024-03-04T19:16:54.6261410Z       is invalid without an organization
2024-03-04T19:16:54.6262143Z 
2024-03-04T19:16:54.6262443Z ReminderDeadlineMailer
2024-03-04T19:16:54.6263333Z   notify deadline
2024-03-04T19:16:54.6568870Z     renders the subject
2024-03-04T19:16:54.6867372Z     renders the receiver email
2024-03-04T19:16:54.7147730Z     renders the sender email
2024-03-04T19:16:54.7433124Z     renders the body
2024-03-04T19:16:54.7433962Z 
2024-03-04T19:16:54.7434161Z TextInterpolatorService
2024-03-04T19:16:54.7435039Z   #call
2024-03-04T19:16:54.7472083Z     returns interpolated text
2024-03-04T19:16:54.7472938Z     when text is empty
2024-03-04T19:16:54.7505187Z       returns empty string
2024-03-04T19:16:54.7505876Z     when text is nil
2024-03-04T19:16:54.7538881Z       returns nil
2024-03-04T19:16:54.7539540Z     when interpolations are empty
2024-03-04T19:16:54.7572849Z       returns text
2024-03-04T19:16:54.7573673Z     when interpolations are not present
2024-03-04T19:16:54.7605950Z       returns text
2024-03-04T19:16:54.7606355Z     when interpolations are nil
2024-03-04T19:16:54.7641960Z       returns text
2024-03-04T19:16:54.7643129Z 
2024-03-04T19:16:54.7643502Z Question
2024-03-04T19:16:54.7644841Z   remove_redundant_error
2024-03-04T19:16:54.7783454Z     should return an array with only one error message related to the checkboxes.
2024-03-04T19:16:54.7784228Z   punctuate
2024-03-04T19:16:54.7823507Z     should punctuate each string in a given array
2024-03-04T19:16:54.7824061Z   versioning
2024-03-04T19:16:54.7861203Z     is expected to be versioned
2024-03-04T19:16:54.7861883Z   validations
2024-03-04T19:16:54.7923686Z     is expected to validate that :answer cannot be empty/falsy
2024-03-04T19:16:54.8076613Z     question for_banks and for_partners attributes can't both be false
2024-03-04T19:16:54.8136572Z     is expected to validate that :title cannot be empty/falsy
2024-03-04T19:16:54.8137703Z   scope for_banks
2024-03-04T19:16:54.8369964Z     should filter out questions that aren't meant for banks
2024-03-04T19:16:54.8370572Z   scope for_partners
2024-03-04T19:16:54.8597359Z     should filter out questions that aren't meant for partners
2024-03-04T19:16:54.8598064Z 
2024-03-04T19:16:54.8598304Z DonationsController
2024-03-04T19:16:54.8599878Z   While signed in as an organization admin >
2024-03-04T19:16:54.8600559Z     DELETE #destroy
2024-03-04T19:16:54.9074485Z       redirects to the index
2024-03-04T19:16:54.9075182Z   While signed in as a normal user >
2024-03-04T19:16:54.9076464Z     GET #edit
2024-03-04T19:16:54.9323584Z       returns http success
2024-03-04T19:16:54.9324254Z     PUT#update
2024-03-04T19:16:54.9701168Z       redirects to index after update
2024-03-04T19:16:55.0753153Z       updates storage quantity correctly
2024-03-04T19:16:55.0754030Z       when removing a line item
2024-03-04T19:16:55.1750648Z         updates storage invetory item quantity correctly
2024-03-04T19:16:55.1751563Z       when changing storage location
2024-03-04T19:16:55.1792126Z         rolls back updates if quantity would go below 0
2024-03-04T19:16:55.2796432Z         updates storage quantity correctly
2024-03-04T19:16:55.2799678Z     POST#create
2024-03-04T19:16:55.2990749Z       renders GET#new with error on failure
2024-03-04T19:16:55.3370969Z       redirects to GET#edit on success
2024-03-04T19:16:55.3371707Z     GET #new
2024-03-04T19:16:55.3490448Z       returns http success
2024-03-04T19:16:55.3491407Z     GET #index
2024-03-04T19:16:55.3621655Z       returns http success
2024-03-04T19:16:55.3622359Z     GET #show
2024-03-04T19:16:55.3773726Z       returns http success
2024-03-04T19:16:55.3774371Z     DELETE #destroy
2024-03-04T19:16:55.3922083Z       redirects to the dashboard path
2024-03-04T19:16:55.3923123Z   calculating total money raised for all donations
2024-03-04T19:16:55.3959346Z     returns zero for an empty array of donations
2024-03-04T19:16:55.4085858Z     correctly calculates the total
2024-03-04T19:16:55.4086906Z   calculating total value of multiple donations
2024-03-04T19:16:55.5319845Z     works correctly for multiple line items per donation
2024-03-04T19:16:55.5359009Z     returns zero for an empty array of donations
2024-03-04T19:16:55.5359925Z 
2024-03-04T19:16:55.5360127Z User
2024-03-04T19:16:55.5422428Z   has a valid factory
2024-03-04T19:16:55.5423232Z   versioning
2024-03-04T19:16:55.5459070Z     is expected to be versioned
2024-03-04T19:16:55.5459765Z   Validations >
2024-03-04T19:16:55.5541453Z     requires a name
2024-03-04T19:16:55.5720085Z     requires an email that is formatted correctly
2024-03-04T19:16:55.5720940Z   Scopes >
2024-03-04T19:16:55.5721905Z     ->alphabetized
2024-03-04T19:16:55.6099931Z       retrieves users in the correct order
2024-03-04T19:16:55.6100696Z   Scopes >
2024-03-04T19:16:55.6101544Z     ->alphabetized
2024-03-04T19:16:55.6315896Z       retrieves users in the correct order
2024-03-04T19:16:55.6316847Z   omniauth
2024-03-04T19:16:55.6450613Z     retrieves the user from an omniauth context
2024-03-04T19:16:55.6451756Z   Methods >
2024-03-04T19:16:55.6909102Z     #kind
2024-03-04T19:16:55.6959593Z     discarded?
2024-03-04T19:16:55.7146263Z     #reinvitable?
2024-03-04T19:16:55.7234666Z     #invitation_status
2024-03-04T19:16:55.7235082Z 
2024-03-04T19:16:55.7235371Z InventoryCheckService
2024-03-04T19:16:55.7236581Z   call
2024-03-04T19:16:55.7237613Z     error
2024-03-04T19:16:55.8013999Z       should set the error
2024-03-04T19:16:55.8014708Z     alert
2024-03-04T19:16:55.8757083Z       should set the alert
2024-03-04T19:16:55.8757685Z 
2024-03-04T19:16:55.8758221Z Reports::PartnerInfoReportService
2024-03-04T19:16:55.8759239Z   #report
2024-03-04T19:16:56.1080728Z     should report normal values
2024-03-04T19:16:56.2810726Z     should report zero values
2024-03-04T19:16:56.2811521Z 
2024-03-04T19:16:56.2811862Z Manufacturer
2024-03-04T19:16:56.2813547Z   Validations
2024-03-04T19:16:56.4589565Z     must belong to an organization
2024-03-04T19:16:56.4685110Z     must have a unique name within organization
2024-03-04T19:16:56.4686526Z   versioning
2024-03-04T19:16:56.4721777Z     is expected to be versioned
2024-03-04T19:16:56.4723085Z   Private Methods
2024-03-04T19:16:56.4723773Z     #exists_in_org?
2024-03-04T19:16:56.6458107Z       returns true if manufacturer exists in an organization
2024-03-04T19:16:56.6459332Z   Methods
2024-03-04T19:16:56.6459868Z     volume
2024-03-04T19:16:56.7771925Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-04T19:16:56.9094720Z       ignores the amount of product from other manufacturers
2024-03-04T19:16:56.9691242Z       retrieves the amount of product that has been donated by manufacturer
2024-03-04T19:16:56.9692022Z 
2024-03-04T19:16:56.9692670Z DistributionByCountyReportService
2024-03-04T19:16:56.9693414Z   get_breakdown
2024-03-04T19:16:57.0587322Z     divides the item numbers and values according to the partner profile
2024-03-04T19:16:57.2327057Z     handles multiple partners with overlapping service areas properly
2024-03-04T19:16:57.3042447Z     will have 100% unspecified shows if no served_areas
2024-03-04T19:16:57.3043313Z 
2024-03-04T19:16:57.3043780Z Partners::FetchPartnersToRemindNowService
2024-03-04T19:16:57.3044620Z   .fetch
2024-03-04T19:16:57.3045469Z     when there is a partner
2024-03-04T19:16:57.3046589Z       that does NOT have a organization with a global reminder & deadline
2024-03-04T19:16:57.3047491Z         and is a part of a partner group that does have them defined
2024-03-04T19:16:57.3048562Z           that is not for today
2024-03-04T19:16:57.3406406Z             should NOT include that partner
2024-03-04T19:16:57.3407251Z           that is for today
2024-03-04T19:16:57.3739709Z             should include that partner
2024-03-04T19:16:57.3740602Z             but the partner is deactivated
2024-03-04T19:16:57.4114724Z               should NOT include that partner
2024-03-04T19:16:57.4116033Z       that has an organization with a global reminder & deadline
2024-03-04T19:16:57.4117126Z         AND a partner group that does have them defined
2024-03-04T19:16:57.4497793Z           should remind based on the partner group instead of the organization level reminder
2024-03-04T19:16:57.4498807Z           but the partner is deactivated
2024-03-04T19:16:57.4952065Z             should NOT include that partner
2024-03-04T19:16:57.4953133Z         that is not for today
2024-03-04T19:16:57.5303333Z           should NOT include that partner
2024-03-04T19:16:57.5304102Z         that is for today
2024-03-04T19:16:57.5623021Z           should include that partner
2024-03-04T19:16:57.5623606Z           but the partner is deactivated
2024-03-04T19:16:57.5958275Z             should NOT include that partner
2024-03-04T19:16:57.5959247Z           and has send_reminder=false
2024-03-04T19:16:57.6292294Z             should NOT include that partner
2024-03-04T19:16:57.6293532Z 
2024-03-04T19:16:57.6293916Z DistributionDestroyService
2024-03-04T19:16:57.6294852Z   #call
2024-03-04T19:16:57.6295759Z     when the distribution_id matches no Distribution
2024-03-04T19:16:57.6335228Z       to not be a success
2024-03-04T19:16:57.6335952Z     when the distribution_id does match a Distribution
2024-03-04T19:16:57.6336835Z       and the increase inventory operations fails
2024-03-04T19:16:57.8439927Z         should not be successful and have the error message
2024-03-04T19:16:58.0423561Z         should not delete the Distribution
2024-03-04T19:16:58.0424708Z       and the operations succeed
2024-03-04T19:16:58.2422543Z         should increase the inventory of the storage location
2024-03-04T19:16:58.4470022Z         should destroy the Distribution
2024-03-04T19:16:58.6474052Z         should be successful
2024-03-04T19:16:58.6474838Z       and the destroy! operation fails
2024-03-04T19:16:58.8522203Z         should not be successful and have the error message
2024-03-04T19:16:59.0535507Z         should not delete the Distribution
2024-03-04T19:16:59.0536554Z 
2024-03-04T19:16:59.0536945Z ServiceObjectErrorsMixin
2024-03-04T19:16:59.0537837Z   self.included
2024-03-04T19:16:59.0578236Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-04T19:16:59.0579467Z 
2024-03-04T19:16:59.0579704Z PartnerMailerJob
2024-03-04T19:16:59.0580377Z   conditionally sending the emails
2024-03-04T19:16:59.3509446Z     sends mail for future distributions immediately
2024-03-04T19:16:59.5470362Z     does not send mail for past distributions
2024-03-04T19:16:59.5471304Z     when the distribution is for a deactivated partner
2024-03-04T19:16:59.7417135Z       does not send the email
2024-03-04T19:16:59.7417758Z 
2024-03-04T19:16:59.7418136Z RequestDestroyService
2024-03-04T19:16:59.7419361Z   #call
2024-03-04T19:16:59.7557981Z     should return an instance of itself
2024-03-04T19:16:59.7558941Z     when there are no validation errors
2024-03-04T19:16:59.7688142Z       should update the status column on the request
2024-03-04T19:16:59.7813066Z       should update the discarded_at column on the request
2024-03-04T19:16:59.7927620Z       should send a email notification to the partner
2024-03-04T19:16:59.7928636Z     when the request_id matches no request
2024-03-04T19:16:59.7966498Z       should not be successful and have errors indicating request id is invalid
2024-03-04T19:16:59.7968164Z     when the request's partner is deactivated
2024-03-04T19:16:59.8233562Z       should have errors
2024-03-04T19:16:59.8234421Z     when the request is already discarded
2024-03-04T19:16:59.8333883Z       should not be successful and have errors
2024-03-04T19:16:59.8334816Z 
2024-03-04T19:16:59.8335159Z AllocateKitInventoryService
2024-03-04T19:16:59.8336319Z   #error
2024-03-04T19:16:59.8337233Z     when the Store location organization doesn't match
2024-03-04T19:17:00.0562078Z       returns error
2024-03-04T19:17:00.0562759Z   #allocate
2024-03-04T19:17:00.0563280Z     when more than one kit is requested
2024-03-04T19:17:00.0564029Z       but one of the items is out of stock
2024-03-04T19:17:00.3296040Z         returns error and does not change kit or item quantity
2024-03-04T19:17:00.3297046Z     when inventory items are available
2024-03-04T19:17:00.5953384Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-04T19:17:00.5954750Z       when there are more then one line items
2024-03-04T19:17:00.5955750Z         when same kit is allocated multiple times
2024-03-04T19:17:00.8987077Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-04T19:17:00.8988502Z         when there kit is allocated once
2024-03-04T19:17:01.1588632Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-04T19:17:01.1589849Z       When kit is allocated more then once
2024-03-04T19:17:01.4505396Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-04T19:17:01.4506371Z 
2024-03-04T19:17:01.4506807Z Audit
2024-03-04T19:17:01.4507921Z   Validations >
2024-03-04T19:17:01.4663628Z     must belong to an organization admin of its organization
2024-03-04T19:17:01.5239230Z     can have line items that has quantity as a positive integer
2024-03-04T19:17:01.5528585Z     must belong to an organization
2024-03-04T19:17:01.6083407Z     can not have line items that has quantity as negative integer
2024-03-04T19:17:01.6648799Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-04T19:17:01.7240149Z     can have line items that has quantity as zero
2024-03-04T19:17:01.7784618Z     cannot have duplicate line items
2024-03-04T19:17:01.7785607Z   Scopes >
2024-03-04T19:17:01.8243706Z     `at_location` can filter out audits to a specific location
2024-03-04T19:17:01.8244676Z   behaves like itemizable
2024-03-04T19:17:01.8245543Z     .to_a
2024-03-04T19:17:01.8246201Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:17:01.8760233Z         calls line_item_values
2024-03-04T19:17:01.8761334Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:17:01.9257429Z         raises an error
2024-03-04T19:17:01.9258040Z     .line_items
2024-03-04T19:17:01.9259294Z       quantities_by_name
2024-03-04T19:17:02.0079418Z         returns a hash of items with id, name, and quantity
2024-03-04T19:17:02.0876663Z         leaves out zero-quantitied items if requested
2024-03-04T19:17:02.0877831Z       combine!
2024-03-04T19:17:02.1425095Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:17:02.1789437Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:17:02.1790539Z       sorted
2024-03-04T19:17:02.2868949Z         displays the items, sorted by name
2024-03-04T19:17:02.2869709Z       total
2024-03-04T19:17:02.3625302Z         has an item total
2024-03-04T19:17:02.3626221Z   versioning
2024-03-04T19:17:02.3661897Z     is expected to be versioned
2024-03-04T19:17:02.3662640Z   Methods >
2024-03-04T19:17:02.5976759Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-04T19:17:02.9281927Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-04T19:17:02.9283449Z 
2024-03-04T19:17:02.9283650Z StorageLocation
2024-03-04T19:17:02.9284257Z   Validations >
2024-03-04T19:17:02.9350263Z     is expected to validate that :organization cannot be empty/falsy
2024-03-04T19:17:02.9407086Z     is expected to validate that :address cannot be empty/falsy
2024-03-04T19:17:02.9467756Z     is expected to validate that :name cannot be empty/falsy
2024-03-04T19:17:02.9469011Z   Callbacks >
2024-03-04T19:17:02.9469537Z     before_destroy
2024-03-04T19:17:02.9846607Z       does not delete storage locations with inventory items on it
2024-03-04T19:17:03.0487355Z       deletes storage locations with no inventory items on it
2024-03-04T19:17:03.0488510Z   versioning
2024-03-04T19:17:03.0524975Z     is expected to be versioned
2024-03-04T19:17:03.0525591Z   Filtering >
2024-03-04T19:17:03.1211581Z     ->containing yields only inventories that have that item
2024-03-04T19:17:03.1298938Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-04T19:17:03.1299780Z   Methods >
2024-03-04T19:17:03.1300769Z     StorageLocation.items_inventoried
2024-03-04T19:17:03.2096547Z       returns a collection of items that are stored within inventories
2024-03-04T19:17:03.2097469Z     import_inventory
2024-03-04T19:17:03.5037769Z       imports storage locations from a csv file
2024-03-04T19:17:03.5038359Z     item_total
2024-03-04T19:17:03.5431440Z       retrieves the total for a single item
2024-03-04T19:17:03.5432554Z     increase_inventory
2024-03-04T19:17:03.5433049Z       when providing a new item that does not yet exist
2024-03-04T19:17:03.6439454Z         creates those new inventory items in the storage location
2024-03-04T19:17:03.6440339Z       With existing inventory
2024-03-04T19:17:03.7458124Z         increases inventory quantities from an itemizable object
2024-03-04T19:17:03.7459428Z     csv_export_attributes
2024-03-04T19:17:03.8077511Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-04T19:17:03.8078877Z     size
2024-03-04T19:17:03.8526723Z       returns total quantity of all items in this storage location
2024-03-04T19:17:03.8527333Z     decrease_inventory
2024-03-04T19:17:03.9603930Z       decreases inventory quantities from an itemizable object
2024-03-04T19:17:03.9604682Z       when there is insufficient inventory available
2024-03-04T19:17:03.9690773Z         does not change inventory quantities if there is an error
2024-03-04T19:17:03.9772826Z         gives informative errors
2024-03-04T19:17:03.9773503Z     import_csv
2024-03-04T19:17:03.9893053Z       imports storage locations from a csv file
2024-03-04T19:17:03.9893945Z     geocode
2024-03-04T19:17:03.9999852Z       adds coordinates to the database
2024-03-04T19:17:04.0000595Z     inventory_total_value_in_dollars
2024-03-04T19:17:04.0119640Z       returns 0 when there are no items in this storage location
2024-03-04T19:17:04.0518370Z       returns a value including cents if the total isn't an even dollar amount
2024-03-04T19:17:04.0999736Z       returns total value of all items in this storage location
2024-03-04T19:17:04.1000313Z 
2024-03-04T19:17:04.1000526Z CustomDeviseMailer
2024-03-04T19:17:04.1001433Z   #invitation_instructions
2024-03-04T19:17:04.1002663Z     when user is invited
2024-03-04T19:17:04.1250099Z       invites to user
2024-03-04T19:17:04.1433542Z       has invite expiration message
2024-03-04T19:17:04.1434639Z     when partner is invited
2024-03-04T19:17:04.1858346Z       invites to primary user
2024-03-04T19:17:04.1859061Z     when other partner users invited
2024-03-04T19:17:04.2260090Z       invites to partner user
2024-03-04T19:17:04.2261069Z 
2024-03-04T19:17:04.2261473Z Reports::SummaryReportService
2024-03-04T19:17:04.2262723Z   #report
2024-03-04T19:17:04.4030649Z     should report zero values
2024-03-04T19:17:04.8485789Z     should report positive values
2024-03-04T19:17:05.2956778Z     should report negative values
2024-03-04T19:17:05.2958314Z 
2024-03-04T19:17:05.2958565Z Organization
2024-03-04T19:17:05.2961046Z   validations
2024-03-04T19:17:05.4765998Z     validates that short names are unique
2024-03-04T19:17:05.4834109Z     validates that attachment file size is not higher than 1 MB
2024-03-04T19:17:05.4902171Z     validates that attachments are png or jpgs
2024-03-04T19:17:05.5012616Z     validates that at least one distribution type is enabled
2024-03-04T19:17:05.5013476Z   address
2024-03-04T19:17:05.5054131Z     does not add a trailing space when the zip code is missing
2024-03-04T19:17:05.5089765Z     correctly formats an address string with commas and spaces
2024-03-04T19:17:05.5124600Z     does not add any separators before the city when street is missing
2024-03-04T19:17:05.5157798Z     does not add any separators after street when city, state, and zip are missing
2024-03-04T19:17:05.5192425Z     returns an empty string when the org has no address components
2024-03-04T19:17:05.5193401Z   is_active
2024-03-04T19:17:05.8763633Z     returns active organizations
2024-03-04T19:17:05.8764449Z   total_inventory
2024-03-04T19:17:06.1076520Z     returns a sum total of all inventory at all storage locations
2024-03-04T19:17:06.2752342Z     returns 0 if there is nothing
2024-03-04T19:17:06.2753270Z   from_email
2024-03-04T19:17:06.4723763Z     returns admin email when it's empty
2024-03-04T19:17:06.6643645Z     returns admin email when not present
2024-03-04T19:17:06.8373558Z     returns email when present
2024-03-04T19:17:07.0276367Z     returns admin email when it's empty space
2024-03-04T19:17:07.0277542Z   default storage location
2024-03-04T19:17:07.0313069Z     returns nil when not set
2024-03-04T19:17:07.0355828Z     associates the default storage location with a storage location
2024-03-04T19:17:07.0356993Z   #assign_attributes_from_account_request
2024-03-04T19:17:07.0527055Z     should assign the proper attributes to the organization
2024-03-04T19:17:07.0528006Z   #short_name
2024-03-04T19:17:07.0595812Z     can only contain valid characters
2024-03-04T19:17:07.0596681Z   #seed_items
2024-03-04T19:17:07.2504422Z     allows a collection of items to be seeded
2024-03-04T19:17:07.4960251Z     allows a single base item to be seeded
2024-03-04T19:17:07.4962016Z     when given an item name that already exists, but with an 'other' partner key
2024-03-04T19:17:07.8151593Z       updates the old item to use the new base item as its base
2024-03-04T19:17:07.8152918Z     when given an item that already exists
2024-03-04T19:17:07.9986277Z       gracefully skips the item
2024-03-04T19:17:07.9987067Z   deadline_day
2024-03-04T19:17:08.0092415Z     can only contain numbers 1-28
2024-03-04T19:17:08.0093176Z   .seed_items
2024-03-04T19:17:08.0093816Z     when no organization is provided
2024-03-04T19:17:08.6448410Z       updates all organizations
2024-03-04T19:17:08.6449344Z     when provided with an organization to seed
2024-03-04T19:17:08.9670095Z       loads the base items into Item records
2024-03-04T19:17:08.9671246Z   versioning
2024-03-04T19:17:08.9709126Z     is expected to be versioned
2024-03-04T19:17:08.9709791Z   valid_items
2024-03-04T19:17:09.1539919Z     only shows active valid items
2024-03-04T19:17:09.3320955Z     returns an array of item partner keys
2024-03-04T19:17:09.3321815Z     with invisible items
2024-03-04T19:17:09.3612503Z       only shows active and visible items
2024-03-04T19:17:09.3613340Z   reminder_day
2024-03-04T19:17:09.3729803Z     can only contain numbers 1-28
2024-03-04T19:17:09.3730768Z   earliest reporting year
2024-03-04T19:17:09.5538927Z     is the organization created year if no associated data
2024-03-04T19:17:09.7919819Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-04T19:17:09.7921010Z   Associations >
2024-03-04T19:17:09.7959578Z     is expected to have many users through roles
2024-03-04T19:17:09.8006135Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-04T19:17:09.8042655Z     is expected to have many item_categories
2024-03-04T19:17:09.8043457Z     items
2024-03-04T19:17:09.8044593Z       .other
2024-03-04T19:17:11.7358716Z         returns all items for this organization designated 'other'
2024-03-04T19:17:11.7359798Z       .during
2024-03-04T19:17:13.6876460Z         return ranking of all items
2024-03-04T19:17:13.6877167Z       .during.top
2024-03-04T19:17:15.6278610Z         return 3 most used items
2024-03-04T19:17:17.5684349Z         return just 3 elements
2024-03-04T19:17:17.5684892Z       .during.bottom
2024-03-04T19:17:19.5402371Z         return just 3 elements
2024-03-04T19:17:21.5027492Z         return 3 least used items
2024-03-04T19:17:21.5028369Z     users
2024-03-04T19:17:21.5029345Z       when a organizaton has a user that has two roles
2024-03-04T19:17:21.6959279Z         should returns users without duplications
2024-03-04T19:17:21.6960344Z     barcode_items
2024-03-04T19:17:21.8783913Z       returns only this organization's barcodes, no globals
2024-03-04T19:17:21.8784838Z       .all
2024-03-04T19:17:22.0611697Z         includes global barcode items also
2024-03-04T19:17:22.0612525Z     distributions
2024-03-04T19:17:22.0613276Z       upcoming
2024-03-04T19:17:22.1325095Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-04T19:17:22.1326409Z   after_create
2024-03-04T19:17:22.1542487Z     should update the state of the account request
2024-03-04T19:17:22.1543335Z   geocode
2024-03-04T19:17:22.3251184Z     adds coordinates to the database
2024-03-04T19:17:22.3251977Z   #ordered_requests
2024-03-04T19:17:22.5152140Z     puts active requests before fulfilled requests
2024-03-04T19:17:22.5153039Z     ordering of requests with matching status
2024-03-04T19:17:22.7147342Z       puts the most recently updated request before older requests
2024-03-04T19:17:22.7148405Z 
2024-03-04T19:17:22.7149258Z Donation
2024-03-04T19:17:22.7150435Z   behaves like itemizable
2024-03-04T19:17:22.7151434Z     .to_a
2024-03-04T19:17:22.7152480Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:17:22.7498263Z         raises an error
2024-03-04T19:17:22.7499205Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:17:22.7970277Z         calls line_item_values
2024-03-04T19:17:22.7971202Z     .line_items
2024-03-04T19:17:22.7972257Z       total
2024-03-04T19:17:22.8385189Z         has an item total
2024-03-04T19:17:22.8385972Z       sorted
2024-03-04T19:17:22.8894931Z         displays the items, sorted by name
2024-03-04T19:17:22.8895755Z       combine!
2024-03-04T19:17:22.9340249Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:17:22.9983195Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:17:22.9984664Z       quantities_by_name
2024-03-04T19:17:23.0385174Z         returns a hash of items with id, name, and quantity
2024-03-04T19:17:23.0722794Z         leaves out zero-quantitied items if requested
2024-03-04T19:17:23.0724007Z   SOURCES
2024-03-04T19:17:23.0760748Z     the hash values are immutable
2024-03-04T19:17:23.0794846Z     the hash is immutable
2024-03-04T19:17:23.0827154Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-04T19:17:23.0828322Z   Validations >
2024-03-04T19:17:23.0873567Z     must belong to an organization
2024-03-04T19:17:23.0997893Z     requires a product drive participant if the source is 'Product Drive'
2024-03-04T19:17:23.1063375Z     requires a source from the list of available sources
2024-03-04T19:17:23.1170938Z     requires a donation_site if the source is 'Donation Site'
2024-03-04T19:17:23.1219652Z     ensures that the issued at is no earlier than 2000
2024-03-04T19:17:23.1261771Z     requires an inventory (storage location)
2024-03-04T19:17:23.1406246Z     is invalid when the line items are invalid
2024-03-04T19:17:23.1524412Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-04T19:17:23.1525180Z   Callbacks >
2024-03-04T19:17:23.1649160Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-04T19:17:23.1799473Z     automatically combines duplicate line_item records when they're created
2024-03-04T19:17:23.1800455Z   Scopes >
2024-03-04T19:17:23.1800902Z     by_source >
2024-03-04T19:17:23.1801597Z       when source is a symbol
2024-03-04T19:17:23.1802225Z         when source is valid
2024-03-04T19:17:23.1973147Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-04T19:17:23.1974118Z         when source is invalid
2024-03-04T19:17:23.2136864Z           does not throw errors, returns no results
2024-03-04T19:17:23.2137662Z       when source is not a symbol
2024-03-04T19:17:23.2138569Z         when source comes from the SOURCES hash
2024-03-04T19:17:23.2303990Z           returns all donations with the provided source
2024-03-04T19:17:23.2304915Z         when source is invalid
2024-03-04T19:17:23.2467529Z           does not throw errors, returns no results
2024-03-04T19:17:23.2468348Z     during >
2024-03-04T19:17:23.2646660Z       returns all donations created between two dates
2024-03-04T19:17:23.2647470Z   Associations >
2024-03-04T19:17:23.2648336Z     items >
2024-03-04T19:17:23.2803725Z       has_many
2024-03-04T19:17:23.2804589Z   Methods >
2024-03-04T19:17:23.2805685Z     source_view
2024-03-04T19:17:23.2809529Z       not from a drive
2024-03-04T19:17:23.2923374Z         returns source
2024-03-04T19:17:23.2924042Z       from a drive
2024-03-04T19:17:23.2924699Z         participant known
2024-03-04T19:17:23.2925747Z           contact name present
2024-03-04T19:17:23.3054176Z             returns participant display name
2024-03-04T19:17:23.3054964Z           no contact name
2024-03-04T19:17:23.3172114Z             returns drive display name
2024-03-04T19:17:23.3172938Z         unknown participant
2024-03-04T19:17:23.3284330Z           returns drive display name
2024-03-04T19:17:23.3285473Z       details
2024-03-04T19:17:23.3286093Z         donation site
2024-03-04T19:17:23.3385831Z           returns donation_site name
2024-03-04T19:17:23.3386637Z         product drive
2024-03-04T19:17:23.3486745Z           returns product_drive name
2024-03-04T19:17:23.3487739Z         manufacturer
2024-03-04T19:17:23.3597295Z           returns manufacturer name
2024-03-04T19:17:23.3597962Z         misc
2024-03-04T19:17:23.3682711Z           returns a truncated comment
2024-03-04T19:17:23.3683413Z     remove
2024-03-04T19:17:23.4538515Z       removes the item from the donation
2024-03-04T19:17:23.4973451Z       works with either an id or an object
2024-03-04T19:17:23.5613966Z       fails gracefully if the item doesn't exist
2024-03-04T19:17:23.5614597Z     money_raised
2024-03-04T19:17:23.6170192Z       tracks the money raised in a donation
2024-03-04T19:17:23.6171543Z   versioning
2024-03-04T19:17:23.6206953Z     is expected to be versioned
2024-03-04T19:17:23.6208433Z 
2024-03-04T19:17:23.6208666Z ApplicationHelper
2024-03-04T19:17:23.6211397Z   default_title_content
2024-03-04T19:17:23.6212287Z     Organization exists
2024-03-04T19:17:23.8049952Z       returns the organization's name
2024-03-04T19:17:23.8050773Z     Organization does not exist
2024-03-04T19:17:23.8104637Z       returns a default name
2024-03-04T19:17:23.8105323Z   can_administrate?
2024-03-04T19:17:23.8106735Z     User is part of org but not org admin
2024-03-04T19:17:23.8253318Z       cannot administrate
2024-03-04T19:17:23.8254560Z     User is org admin and not part of org
2024-03-04T19:17:24.0170872Z       cannot administrate
2024-03-04T19:17:24.0171470Z     User is org admin and part of org
2024-03-04T19:17:24.0388886Z       can administrate
2024-03-04T19:17:24.0389561Z   active_class
2024-03-04T19:17:24.0436179Z     Returns the controller name
2024-03-04T19:17:24.0436863Z   step_container_helper
2024-03-04T19:17:24.0438166Z     active_index is greater than index
2024-03-04T19:17:24.0482051Z       returns done
2024-03-04T19:17:24.0482653Z     active_index is equal to index
2024-03-04T19:17:24.0528011Z       returns active
2024-03-04T19:17:24.0528530Z     active_index is less than index
2024-03-04T19:17:24.0573903Z       returns empty string
2024-03-04T19:17:24.0574632Z   flash_class
2024-03-04T19:17:24.0620726Z     returns appropriate class for success
2024-03-04T19:17:24.0663708Z     returns appropriate class for notice
2024-03-04T19:17:24.0704159Z     returns appropriate class for error
2024-03-04T19:17:24.0747810Z     returns appropriate class for alert
2024-03-04T19:17:24.0748401Z   confirm_delete_msg
2024-03-04T19:17:24.0792296Z     subs in string
2024-03-04T19:17:24.0793008Z 
2024-03-04T19:17:24.0793314Z Exports::ExportPurchasesCSVService
2024-03-04T19:17:24.0794203Z   #generate_csv_data
2024-03-04T19:17:24.1981284Z     should match the expected content for the csv
2024-03-04T19:17:24.1981752Z 
2024-03-04T19:17:24.1981970Z DistributionContentChangeService
2024-03-04T19:17:24.1983059Z   #changes
2024-03-04T19:17:24.1983859Z     when there are line items removed and updated
2024-03-04T19:17:24.2021014Z       returns true
2024-03-04T19:17:24.2021512Z   #any_change?
2024-03-04T19:17:24.2024807Z     when there are no changes in the line items
2024-03-04T19:17:24.2058528Z       returns true
2024-03-04T19:17:24.2058998Z     when there are line items removed
2024-03-04T19:17:24.2095207Z       returns true
2024-03-04T19:17:24.2095729Z     when there are line items removed and updated
2024-03-04T19:17:24.2130143Z       returns true
2024-03-04T19:17:24.2130607Z     when there are line items updated
2024-03-04T19:17:24.2163529Z       returns true
2024-03-04T19:17:24.2166130Z 
2024-03-04T19:17:24.2166326Z DonationDestroyService
2024-03-04T19:17:24.2167018Z   #call
2024-03-04T19:17:24.2168853Z     when the donation destroy fails
2024-03-04T19:17:24.2218630Z       to not be a success
2024-03-04T19:17:24.2219230Z     when the organization_id matches no Organization
2024-03-04T19:17:24.2257689Z       to not be a success
2024-03-04T19:17:24.2258705Z     when the donation_id matches no Donation owned by the organization
2024-03-04T19:17:24.2297277Z       to not be a success
2024-03-04T19:17:24.2297833Z     when the donation succesfully gets destroyed
2024-03-04T19:17:24.2549581Z       to be a success
2024-03-04T19:17:24.2550325Z     when storage_location fails to decrease the inventory of the donation
2024-03-04T19:17:24.2602354Z       to not be a success
2024-03-04T19:17:24.2603566Z 
2024-03-04T19:17:24.2603771Z PartnerCreateService
2024-03-04T19:17:24.2604587Z   #call
2024-03-04T19:17:24.4456403Z     should return an instance of itself
2024-03-04T19:17:24.4457026Z     when the arguments are valid
2024-03-04T19:17:24.6333295Z       should create a new partner record with the organization provided
2024-03-04T19:17:24.8578860Z       should create the associated partner profile data
2024-03-04T19:17:24.8579561Z       but there was an unexpected issue with saving the
2024-03-04T19:17:24.8580235Z         Partners::Profile record
2024-03-04T19:17:25.1769352Z           should not create the associated partner records
2024-03-04T19:17:25.3658295Z           should not create the partner record for the organization
2024-03-04T19:17:25.3659200Z         Partner record
2024-03-04T19:17:25.5516070Z           should not create the partner record for the organization
2024-03-04T19:17:25.7405346Z           should not create the associated partner records
2024-03-04T19:17:25.7406316Z     when the arguments are incorrect
2024-03-04T19:17:25.7408176Z       beacuse the partner_attrs are invalid
2024-03-04T19:17:25.9579336Z         should contain errors related to invalid partner attributes
2024-03-04T19:17:25.9579845Z 
2024-03-04T19:17:25.9580075Z Exports::ExportRequestService
2024-03-04T19:17:25.9581157Z   .generate_csv_data
2024-03-04T19:17:26.1737000Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-04T19:17:26.3689310Z     includes rows for each request with correct columns of item quantity
2024-03-04T19:17:26.3690303Z 
2024-03-04T19:17:26.3690574Z PartnerGroup
2024-03-04T19:17:26.3691757Z   DB constraints
2024-03-04T19:17:26.3692921Z     send_reminders IS NOT NULL
2024-03-04T19:17:26.3768624Z       raises error if unmet
2024-03-04T19:17:26.3769153Z     deadline_day <= 28
2024-03-04T19:17:26.3848583Z       raises error if unmet
2024-03-04T19:17:26.3849118Z     reminder_day <= 28
2024-03-04T19:17:26.3916947Z       raises error if unmet
2024-03-04T19:17:26.3917511Z   associations
2024-03-04T19:17:26.3967736Z     is expected to belong to organization required: true
2024-03-04T19:17:26.4015383Z     is expected to have many partners
2024-03-04T19:17:26.4087780Z     is expected to have and belong to many item_categories
2024-03-04T19:17:26.4088733Z   versioning
2024-03-04T19:17:26.4126732Z     is expected to be versioned
2024-03-04T19:17:26.4127315Z   Validations >
2024-03-04T19:17:26.4197604Z     must belong to an organization
2024-03-04T19:17:26.4300323Z     requires a unique name within an organization
2024-03-04T19:17:26.4603266Z     does not require a unique name between organizations
2024-03-04T19:17:26.4604273Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-04T19:17:26.4690537Z       should not be valid
2024-03-04T19:17:26.4692465Z 
2024-03-04T19:17:26.4692846Z BaseItem
2024-03-04T19:17:26.4694901Z   Filtering >
2024-03-04T19:17:26.4696210Z     ->without_kit
2024-03-04T19:17:26.4789420Z       should not include the Kit BaseItem
2024-03-04T19:17:26.4790394Z     ->by_partner_key
2024-03-04T19:17:26.4873664Z       shows the Base Items by partner_key
2024-03-04T19:17:26.4874592Z   Validations >
2024-03-04T19:17:26.4952463Z     is invalid without a name
2024-03-04T19:17:26.5075558Z     is invalid without a unique name
2024-03-04T19:17:26.5191735Z     is invalid without a uniqueness key
2024-03-04T19:17:26.5263155Z     is invalid without a partner key
2024-03-04T19:17:26.5263742Z   Associations >
2024-03-04T19:17:26.5388492Z     keeps count of its associated items
2024-03-04T19:17:26.5389431Z   versioning
2024-03-04T19:17:26.5423121Z     is expected to be versioned
2024-03-04T19:17:26.5423904Z 
2024-03-04T19:17:26.5424187Z DistributionReminder
2024-03-04T19:17:26.5425176Z   conditionally sending the emails
2024-03-04T19:17:26.5812923Z     does not send mail for future distributions if the partner wants no reminders
2024-03-04T19:17:26.6111483Z     sends mail for future distributions where the partner wants reminders
2024-03-04T19:17:26.6483763Z     sends mail for future distributions
2024-03-04T19:17:26.6924928Z     does not send mail for past distributions
2024-03-04T19:17:26.6925802Z     when the distribution_id does not match any Distribution
2024-03-04T19:17:26.6995006Z       does not send mail for non existent distributions
2024-03-04T19:17:26.6995759Z     when the partner is deactivated
2024-03-04T19:17:26.7320332Z       does not send mail
2024-03-04T19:17:26.7320966Z 
2024-03-04T19:17:26.7321305Z Partners::ItemRequest
2024-03-04T19:17:26.7322729Z   associations
2024-03-04T19:17:26.7428065Z     is expected to have many child_item_requests dependent => destroy
2024-03-04T19:17:26.7464118Z     is expected to have many children through child_item_requests
2024-03-04T19:17:26.7511301Z     is expected to belong to request class_name => ::Request required: true
2024-03-04T19:17:26.7512065Z   validations
2024-03-04T19:17:26.7572460Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-04T19:17:26.7633342Z     is expected to validate that :name cannot be empty/falsy
2024-03-04T19:17:26.7696175Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-04T19:17:26.7754284Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-04T19:17:26.7755517Z   versioning
2024-03-04T19:17:26.7792462Z     is expected to be versioned
2024-03-04T19:17:26.7793751Z 
2024-03-04T19:17:26.7794033Z ItemsController
2024-03-04T19:17:26.7795037Z   While signed in
2024-03-04T19:17:26.7796725Z     GET #edit
2024-03-04T19:17:26.7988095Z       returns http success
2024-03-04T19:17:26.7988646Z     PUT #update
2024-03-04T19:17:26.7989182Z       invisible
2024-03-04T19:17:26.8196498Z         should update visible_to_partners to false
2024-03-04T19:17:26.8197322Z       visible
2024-03-04T19:17:26.8406883Z         should update visible_to_partners to true
2024-03-04T19:17:26.8407544Z     GET #index
2024-03-04T19:17:26.8594062Z       returns http success
2024-03-04T19:17:26.8594717Z     GET #new
2024-03-04T19:17:26.8716576Z       returns http success
2024-03-04T19:17:26.8717099Z     DELETE #destroy
2024-03-04T19:17:26.8965018Z       redirects to #index
2024-03-04T19:17:26.8965707Z     PATCH #restore
2024-03-04T19:17:26.8966364Z       with an active item
2024-03-04T19:17:26.9184085Z         does nothing
2024-03-04T19:17:26.9184828Z       with a soft-deleted item
2024-03-04T19:17:26.9404805Z         re-activates the item
2024-03-04T19:17:26.9405375Z       with another organizations item
2024-03-04T19:17:27.1393045Z         does nothing
2024-03-04T19:17:27.1393672Z     PATCH #remove_category
2024-03-04T19:17:27.3516639Z       should remove an item's category
2024-03-04T19:17:27.5528735Z       should redirect to the previous category page
2024-03-04T19:17:27.5529516Z     POST #create
2024-03-04T19:17:27.5529968Z       with invalid params
2024-03-04T19:17:27.5688182Z         should show an error
2024-03-04T19:17:27.5688775Z       with valid params
2024-03-04T19:17:27.5878550Z         should accept params with dollar signs, periods, and commas
2024-03-04T19:17:27.6061522Z         should create an item
2024-03-04T19:17:27.6236165Z         should redirect to the item page
2024-03-04T19:17:27.6236801Z     GET #show
2024-03-04T19:17:27.6453442Z       returns http success
2024-03-04T19:17:27.6454238Z     Looking at a different organization
2024-03-04T19:17:27.8359398Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:17:27.8360198Z   While not signed in
2024-03-04T19:17:27.8445058Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:17:27.8445875Z 
2024-03-04T19:17:27.8446194Z Partners::RequestCreateService
2024-03-04T19:17:27.8446969Z   #call
2024-03-04T19:17:27.8448518Z     when the arguments are incorrect
2024-03-04T19:17:27.8449464Z       because no item_requests_attributes and comments were defined
2024-03-04T19:17:27.8712139Z         should return the Request object with an error
2024-03-04T19:17:27.8712909Z       because a unrecogonized item_id was provided
2024-03-04T19:17:27.9000388Z         should return the Request object with an error
2024-03-04T19:17:27.9001084Z     when the arguments are correct
2024-03-04T19:17:27.9360705Z       should create a Request record
2024-03-04T19:17:27.9797705Z       should have no errors
2024-03-04T19:17:28.0170839Z       should notify the Partner via email
2024-03-04T19:17:28.0171600Z       but a unexpected error occured during the save
2024-03-04T19:17:28.0172224Z         for the Request record
2024-03-04T19:17:28.0526342Z           should NOT notify the Partner via email
2024-03-04T19:17:28.0886686Z           should NOT create a Request record
2024-03-04T19:17:28.1239695Z           should have an error with the raised error
2024-03-04T19:17:28.1241217Z 
2024-03-04T19:17:28.1241508Z Partners::Child
2024-03-04T19:17:28.1242527Z   versioning
2024-03-04T19:17:28.1354822Z     is expected to be versioned
2024-03-04T19:17:28.1355481Z   #display_name
2024-03-04T19:17:28.1650997Z     should return a child's first and last name
2024-03-04T19:17:28.1651433Z   associations
2024-03-04T19:17:28.1733556Z     is expected to belong to family required: true
2024-03-04T19:17:28.1782394Z     is expected to have many child_item_requests dependent => destroy
2024-03-04T19:17:28.1783196Z 
2024-03-04T19:17:28.1783495Z Reports::ChildrenServedReportService
2024-03-04T19:17:28.1784085Z   #report
2024-03-04T19:17:28.6812754Z     should work with no distribution_quantity
2024-03-04T19:17:29.1720758Z     should report normal values
2024-03-04T19:17:29.3490695Z     should report zero values
2024-03-04T19:17:29.3491236Z 
2024-03-04T19:17:29.3491488Z ItemsInTotalQuery
2024-03-04T19:17:29.3492552Z   items_in_total_query
2024-03-04T19:17:29.5775285Z     does not count transfers going in the negative direction
2024-03-04T19:17:29.7826119Z     does not count negative adjustments towards in-flow
2024-03-04T19:17:30.0396341Z     does not count donations, purchases, adjustments to other storage locations
2024-03-04T19:17:30.1862681Z     returns a sum total of all in-flows
2024-03-04T19:17:30.5303805Z     counts shared items together
2024-03-04T19:17:30.5304317Z 
2024-03-04T19:17:30.5304617Z ProductDriveHelper
2024-03-04T19:17:30.5306022Z   #is_virtual
2024-03-04T19:17:30.5307142Z     when the product drive was held virtually
2024-03-04T19:17:30.5367583Z       is expected to eq "Yes"
2024-03-04T19:17:30.5368631Z     when the product drive wasn't held virtually
2024-03-04T19:17:30.5420606Z       is expected to eq "No"
2024-03-04T19:17:30.5421178Z     when a product drive was not provided
2024-03-04T19:17:30.5467186Z       with blank argument
2024-03-04T19:17:30.5510626Z       without argument
2024-03-04T19:17:30.5511608Z 
2024-03-04T19:17:30.5511825Z DispersedPastDatesGenerator
2024-03-04T19:17:30.5512902Z   #next
2024-03-04T19:17:30.5563834Z     returns equally dispersed dates between all time ranges
2024-03-04T19:17:30.5564601Z   constants
2024-03-04T19:17:30.5598663Z     has 4 day ranges for generation of past dates
2024-03-04T19:17:30.5599304Z 
2024-03-04T19:17:30.5599575Z AddRoleService
2024-03-04T19:17:30.5600518Z   #call
2024-03-04T19:17:30.5601507Z     when the role does not yet exist
2024-03-04T19:17:30.7549550Z       should add the role
2024-03-04T19:17:30.9557148Z       should add the user role when asked to add admin
2024-03-04T19:17:31.1625627Z       works with a partner
2024-03-04T19:17:31.3535871Z       works with super admin
2024-03-04T19:17:31.3536491Z     when the role already exists
2024-03-04T19:17:31.5395097Z       should raise an error for super admin
2024-03-04T19:17:31.7347305Z       should raise an error
2024-03-04T19:17:31.7347964Z 
2024-03-04T19:17:31.7348270Z ItemizableUpdateService
2024-03-04T19:17:31.7349493Z   increases
2024-03-04T19:17:31.8748999Z     should update quantity in different locations
2024-03-04T19:17:32.0115148Z     should update quantity in same storage location
2024-03-04T19:17:32.1050364Z     should raise an error if any item is inactive
2024-03-04T19:17:32.1051064Z   decreases
2024-03-04T19:17:32.2140915Z     should raise an error if any item is inactive
2024-03-04T19:17:32.3453160Z     should update quantity in same storage location
2024-03-04T19:17:32.4779362Z     should update quantity in different locations
2024-03-04T19:17:32.4780969Z 
2024-03-04T19:17:32.4781228Z Distribution
2024-03-04T19:17:32.4782746Z   Methods >
2024-03-04T19:17:32.4783970Z     #copy_line_items
2024-03-04T19:17:32.5226419Z       replicates line_items from a donation into a distribution
2024-03-04T19:17:32.5227386Z     #future?
2024-03-04T19:17:32.5227899Z       when issued_at has passed
2024-03-04T19:17:32.5504277Z         returns false
2024-03-04T19:17:32.5504856Z       when issued_at has not passed
2024-03-04T19:17:32.5760633Z         returns true
2024-03-04T19:17:32.5761139Z     #copy_from_request
2024-03-04T19:17:32.5979866Z       copy over relevant request information into the distrubution
2024-03-04T19:17:32.5980679Z     #combine_duplicates
2024-03-04T19:17:32.6361018Z       condenses duplicate line_items if the item_ids match
2024-03-04T19:17:32.6361771Z     #distributed_at
2024-03-04T19:17:32.6827599Z       displays explicit issued_at date
2024-03-04T19:17:32.7074009Z       shows the hour and minutes if it has been provided
2024-03-04T19:17:32.7074710Z   behaves like itemizable
2024-03-04T19:17:32.7075567Z     .to_a
2024-03-04T19:17:32.7076411Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:17:32.7416399Z         calls line_item_values
2024-03-04T19:17:32.7417073Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:17:32.7754801Z         raises an error
2024-03-04T19:17:32.7755313Z     .line_items
2024-03-04T19:17:32.7756590Z       total
2024-03-04T19:17:32.8626578Z         has an item total
2024-03-04T19:17:32.8627179Z       quantities_by_name
2024-03-04T19:17:32.9573943Z         leaves out zero-quantitied items if requested
2024-03-04T19:17:33.0420641Z         returns a hash of items with id, name, and quantity
2024-03-04T19:17:33.0421273Z       combine!
2024-03-04T19:17:33.0960642Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:17:33.1379444Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:17:33.1380246Z       sorted
2024-03-04T19:17:33.2576557Z         displays the items, sorted by name
2024-03-04T19:17:33.2577706Z   versioning
2024-03-04T19:17:33.2622650Z     is expected to be versioned
2024-03-04T19:17:33.2623228Z   CSV export >
2024-03-04T19:17:33.2623855Z     for_csv_export >
2024-03-04T19:17:33.5958633Z       filters only to the given issue time range
2024-03-04T19:17:33.9147740Z       filters only to the given filter
2024-03-04T19:17:34.2411763Z       filters only to the given organization
2024-03-04T19:17:34.2412342Z     csv_export_attributes
2024-03-04T19:17:34.6517821Z       returns the set of attributes which define a row in case of distribution export
2024-03-04T19:17:34.6518789Z   Callbacks >
2024-03-04T19:17:34.7015521Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-04T19:17:34.7016501Z     #before_save
2024-03-04T19:17:34.7016936Z       #reset_shipping_cost
2024-03-04T19:17:34.7017488Z         when delivery_method is other then shipped
2024-03-04T19:17:34.7283349Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-04T19:17:34.7284261Z   Scopes >
2024-03-04T19:17:34.7285216Z     by_item_id >
2024-03-04T19:17:34.8647368Z       only returns distributions with given item id
2024-03-04T19:17:34.8648317Z     by_partner >
2024-03-04T19:17:34.9129203Z       only returns distributions with given partner id
2024-03-04T19:17:34.9130292Z     this_week >
2024-03-04T19:17:34.9131028Z       When it's Sunday (end of the week)
2024-03-04T19:17:34.9608633Z         doesn't include distributions past Sunday
2024-03-04T19:17:34.9609425Z       When it's Tuesday (mid-week)
2024-03-04T19:17:35.0333454Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-04T19:17:35.0334371Z     by_location >
2024-03-04T19:17:35.0839503Z       only returns distributions with given location id
2024-03-04T19:17:35.0840211Z     during >
2024-03-04T19:17:35.1550841Z       returns all distributions created between two dates
2024-03-04T19:17:35.1551564Z   Validations >
2024-03-04T19:17:35.1588170Z     ensures that any included items are found in the associated storage location
2024-03-04T19:17:35.1637442Z     must belong to an organization
2024-03-04T19:17:35.2047419Z     ensures the associated line_items are valid
2024-03-04T19:17:35.2203572Z     ensures the associated line_items are invalid with a zero quantity
2024-03-04T19:17:35.2259208Z     ensures that the issued at is no earlier than 2000
2024-03-04T19:17:35.2307193Z     requires a partner
2024-03-04T19:17:35.2354618Z     requires a storage location
2024-03-04T19:17:35.2502926Z     ensures the associated line_items are invalid with a nil quantity
2024-03-04T19:17:35.2503852Z     when delivery method is other then shipped
2024-03-04T19:17:35.2768870Z       allows to save distribution
2024-03-04T19:17:35.2769487Z     when delivery method is shipped
2024-03-04T19:17:35.2770298Z       shipping cost is negative
2024-03-04T19:17:35.2829684Z         will not allow to save distribution
2024-03-04T19:17:35.2830388Z       shipping cost is none negative
2024-03-04T19:17:35.3090927Z         allows to save distribution
2024-03-04T19:17:35.3092304Z 
2024-03-04T19:17:35.3092621Z DistributionsController
2024-03-04T19:17:35.3093626Z   While signed in
2024-03-04T19:17:35.3094673Z     PUT #update
2024-03-04T19:17:35.3096020Z       when distribution has items updated for minimum quantity
2024-03-04T19:17:35.4483711Z         redirects with a flash notice and send send_notification
2024-03-04T19:17:35.4484830Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-04T19:17:35.5553225Z         redirects with a flash notice and a flash error
2024-03-04T19:17:35.5554214Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-04T19:17:35.6650383Z         redirects with a flash notice and a flash error
2024-03-04T19:17:35.6651115Z     POST #create
2024-03-04T19:17:35.6652406Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-04T19:17:35.7546814Z         redirects with a flash notice and a flash alert
2024-03-04T19:17:35.7548381Z       when line item quantity is not positive
2024-03-04T19:17:35.8104163Z         flashes an error
2024-03-04T19:17:35.8105017Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-04T19:17:35.8814989Z         redirects with a flash notice and a flash error
2024-03-04T19:17:35.8815924Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-04T19:17:35.9658580Z         redirects with a flash notice and a flash error
2024-03-04T19:17:35.9659241Z 
2024-03-04T19:17:35.9659523Z UserInviteService
2024-03-04T19:17:36.2285976Z   should create the user without a name with default role
2024-03-04T19:17:36.2587925Z   should invite a user with the partner role
2024-03-04T19:17:36.2588519Z   with a new user
2024-03-04T19:17:36.4537011Z     should create the user with roles
2024-03-04T19:17:36.4795972Z     should create the user without name with role
2024-03-04T19:17:36.4796660Z   with existing user
2024-03-04T19:17:36.4880903Z     should raise an error when reinviting an existing user with the same role
2024-03-04T19:17:36.6810514Z     should add roles to existing user
2024-03-04T19:17:36.6811192Z     with force: true
2024-03-04T19:17:36.7030207Z       should reinvite the user
2024-03-04T19:17:36.7031075Z 
2024-03-04T19:17:36.7031313Z Partners::ServedArea
2024-03-04T19:17:36.7080977Z   is expected to belong to partner_profile required: true
2024-03-04T19:17:36.7120860Z   is expected to belong to county required: true
2024-03-04T19:17:36.7371239Z   must only allow valid client share values
2024-03-04T19:17:36.7513788Z   must only allow integer client shares
2024-03-04T19:17:36.7514365Z   versioning
2024-03-04T19:17:36.7549490Z     is expected to be versioned
2024-03-04T19:17:36.7550112Z 
2024-03-04T19:17:36.7550345Z Exports::ExportDistributionsCSVService
2024-03-04T19:17:36.7551219Z   #generate_csv_data
2024-03-04T19:17:36.9332820Z     should match the expected content for the csv
2024-03-04T19:17:36.9333723Z     when there are no distributions but the report is requested
2024-03-04T19:17:37.1023289Z       returns a csv with only headers and no rows
2024-03-04T19:17:37.1024202Z     when a new item is added
2024-03-04T19:17:37.2925713Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-04T19:17:37.4742753Z       should add it to the end of the row
2024-03-04T19:17:37.4743570Z 
2024-03-04T19:17:37.4743735Z AccountRequest
2024-03-04T19:17:37.5017443Z   #reject!
2024-03-04T19:17:37.5392614Z   #confirm!
2024-03-04T19:17:37.5400737Z   associations
2024-03-04T19:17:37.5507507Z     is expected to have one organization class_name => Organization
2024-03-04T19:17:37.5668205Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-04T19:17:37.5669617Z   .get_by_identity_token
2024-03-04T19:17:37.5672326Z     when the identity_token corresponds to an existing AccountRequest
2024-03-04T19:17:37.5945936Z       should return the corresponding AccountRequest
2024-03-04T19:17:37.5946884Z     when the identity_token provided does not match any AccountRequest
2024-03-04T19:17:37.6017545Z       should return nil
2024-03-04T19:17:37.6018095Z   #identity_token
2024-03-04T19:17:37.6532537Z     should return a JWT token that contains the id of the account_request_id
2024-03-04T19:17:37.6533585Z     when the account_request is not persisted
2024-03-04T19:17:37.6805815Z       should raise an error
2024-03-04T19:17:37.6806543Z   versioning
2024-03-04T19:17:37.6876428Z     is expected to be versioned
2024-03-04T19:17:37.6877787Z   validations
2024-03-04T19:17:37.7052253Z     is expected not to allow :email to be ‹"not_email"›
2024-03-04T19:17:37.7286430Z     is expected to validate that :email is case-sensitively unique
2024-03-04T19:17:37.7580276Z     is expected to validate that :email cannot be empty/falsy
2024-03-04T19:17:37.7721313Z     is expected to validate that the length of :request_details is at least 50
2024-03-04T19:17:37.7830743Z     is expected to allow :email to be ‹"ernie_abshire@gutkowski.example"›
2024-03-04T19:17:37.7958872Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-04T19:17:37.8106104Z     is expected to validate that :name cannot be empty/falsy
2024-03-04T19:17:37.8107036Z     when the email provided is already used by an existing user
2024-03-04T19:17:37.8358400Z       should not allow the email
2024-03-04T19:17:37.8360182Z     when the email provided is already used by an existing organization
2024-03-04T19:17:38.0218775Z       should not allow the email
2024-03-04T19:17:38.0219416Z   #processed?
2024-03-04T19:17:38.0220087Z     when the account request has no associated organization
2024-03-04T19:17:38.0317847Z       should return false
2024-03-04T19:17:38.0318551Z     when the account request has a associated organization
2024-03-04T19:17:38.2172653Z       should return true
2024-03-04T19:17:38.2361634Z W, [2024-03-04T11:17:38.235949 #2327]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T19:17:38.2362765Z W, [2024-03-04T11:17:38.235988 #2327]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:38.2364172Z W, [2024-03-04T11:17:38.236002 #2327]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:38.2366160Z W, [2024-03-04T11:17:38.236021 #2327]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T19:17:38.2499592Z 
2024-03-04T19:17:38.2499767Z Failures:
2024-03-04T19:17:38.2500025Z 
2024-03-04T19:17:38.2500266Z   1) EventDiffer should return a full diff
2024-03-04T19:17:38.2500877Z      Failure/Error:
2024-03-04T19:17:38.2501381Z        expect(results.as_json).to contain_exactly(
2024-03-04T19:17:38.2502046Z          {"aggregate" => false,
2024-03-04T19:17:38.2502582Z           "database" => true,
2024-03-04T19:17:38.2507019Z           "storage_location_id" => storage_location3.id,
2024-03-04T19:17:38.2507670Z           :type => "location"},
2024-03-04T19:17:38.2508155Z          {"aggregate" => true,
2024-03-04T19:17:38.2508624Z           "database" => false,
2024-03-04T19:17:38.2509176Z           "storage_location_id" => StorageLocation.count + 1,
2024-03-04T19:17:38.2509805Z           :type => "location"},
2024-03-04T19:17:38.2510558Z          {"aggregate" => 0,
2024-03-04T19:17:38.2510838Z 
2024-03-04T19:17:38.2512066Z        expected collection contained:  [{"aggregate"=>false, "database"=>true, "storage_location_id"=>4, :type=>"location"}, {"aggregate"=>t...>"item"}, {"aggregate"=>60, "database"=>50, "item_id"=>94, "storage_location_id"=>6, :type=>"item"}]
2024-03-04T19:17:38.2514659Z        actual collection contained:    [{"aggregate"=>0, "database"=>50, "item_id"=>95, "storage_location_id"=>5, :type=>"item"}, {"aggregat...>"item"}, {"aggregate"=>60, "database"=>50, "item_id"=>94, "storage_location_id"=>6, :type=>"item"}]
2024-03-04T19:17:38.2517101Z        the missing elements were:      [{"aggregate"=>false, "database"=>true, "storage_location_id"=>4, :type=>"location"}, {"aggregate"=>true, "database"=>false, "storage_location_id"=>4, :type=>"location"}]
2024-03-04T19:17:38.2518907Z      # ./spec/events/event_differ_spec.rb:44:in `block (2 levels) in <top (required)>'
2024-03-04T19:17:38.2523304Z 
2024-03-04T19:17:38.2523810Z Finished in 57.28 seconds (files took 8.28 seconds to load)
2024-03-04T19:17:38.2524498Z 579 examples, 1 failure
2024-03-04T19:17:38.2524781Z 
2024-03-04T19:17:38.2524937Z Failed examples:
2024-03-04T19:17:38.2525181Z 
2024-03-04T19:17:38.2525651Z rspec ./spec/events/event_differ_spec.rb:16 # EventDiffer should return a full diff
2024-03-04T19:17:38.2526338Z 
2024-03-04T19:17:38.2526503Z Randomized with seed 62421
2024-03-04T19:17:38.2526829Z 
2024-03-04T19:17:38.5579520Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-04T19:17:38.5581619Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3999 / 6475 LOC (61.76%) covered.
2024-03-04T19:17:38.6136569Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb" failed
2024-03-04T19:17:38.9988392Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-04T19:17:38.9990488Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
2024-03-04T19:17:39.0253052Z ##[error]Process completed with exit code 1.
