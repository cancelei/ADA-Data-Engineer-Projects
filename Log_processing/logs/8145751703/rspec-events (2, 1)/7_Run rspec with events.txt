2024-03-04T19:16:27.7197951Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T19:16:27.7199000Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T19:16:27.7231309Z shell: /usr/bin/bash -e {0}
2024-03-04T19:16:27.7231963Z env:
2024-03-04T19:16:27.7232600Z   POSTGRES_HOST: localhost
2024-03-04T19:16:27.7233262Z   DATABASE_HOST: localhost
2024-03-04T19:16:27.7233833Z   PG_USERNAME: postgres
2024-03-04T19:16:27.7234535Z   PG_PASSWORD: password
2024-03-04T19:16:27.7235029Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T19:16:27.7235461Z   POSTGRES_PORT: 5432
2024-03-04T19:16:27.7235935Z   PGHOST: localhost
2024-03-04T19:16:27.7236270Z   PGUSER: postgres
2024-03-04T19:16:27.7236618Z   RAILS_ENV: test
2024-03-04T19:16:27.7237055Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T19:16:27.7237527Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-04T19:16:27.7238235Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T19:16:27.7238697Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T19:16:27.7239343Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T19:16:27.7240610Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T19:16:27.7241827Z   EVENTS_READ: true
2024-03-04T19:16:27.7242380Z ##[endgroup]
2024-03-04T19:16:33.5198637Z W, [2024-03-04T19:16:33.519482 #2275]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T19:16:33.5201149Z W, [2024-03-04T19:16:33.519536 #2275]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:16:33.5204397Z W, [2024-03-04T19:16:33.519551 #2275]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:16:33.5210875Z W, [2024-03-04T19:16:33.519575 #2275]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T19:16:36.2370477Z W, [2024-03-04T19:16:36.236742 #2275]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T19:16:36.2372942Z W, [2024-03-04T19:16:36.236784 #2275]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:16:36.2375289Z W, [2024-03-04T19:16:36.236799 #2275]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:16:36.2378975Z W, [2024-03-04T19:16:36.236849 #2275]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T19:16:36.2443893Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-03-04T19:16:45.0272140Z 
2024-03-04T19:16:45.0272906Z Randomized with seed 11924
2024-03-04T19:16:45.8318917Z 
2024-03-04T19:16:45.8320018Z DonationItemizedBreakdownService
2024-03-04T19:16:45.8320857Z   #fetch
2024-03-04T19:16:46.2815235Z     return the list of items donated with distributed
2024-03-04T19:16:46.2816139Z 
2024-03-04T19:16:46.2816437Z SyncNDBNMembers
2024-03-04T19:16:46.2816965Z   .sync
2024-03-04T19:16:46.2817773Z     when the HTTP request is successful
2024-03-04T19:16:46.2819431Z       when no new NDBN Member has been added
2024-03-04T19:16:46.3180907Z         should not add any new NDBN Members
2024-03-04T19:16:46.3181929Z       when there are no exisiting NDBN Member records
2024-03-04T19:16:46.3278750Z         should create the NDBN Member records
2024-03-04T19:16:46.3279882Z       when the account name of a NDBN Member has changed
2024-03-04T19:16:46.3403918Z         should update the account name of the corresponding NDBN Member
2024-03-04T19:16:46.3405194Z     when the HTTP request does not get a response of 200
2024-03-04T19:16:46.3461817Z       should raise an error regarding the response code
2024-03-04T19:16:46.3462651Z 
2024-03-04T19:16:46.3462917Z DistributionItemizedBreakdownService
2024-03-04T19:16:46.3464072Z   #fetch_csv
2024-03-04T19:16:46.7670253Z     should output the expected output but in CSV format
2024-03-04T19:16:46.7670948Z   #fetch
2024-03-04T19:16:47.1466546Z     should include the break down of items distributed with onhand data
2024-03-04T19:16:47.1467431Z 
2024-03-04T19:16:47.1467616Z Role
2024-03-04T19:16:47.1505428Z   is expected to accepts_nested_attributes_for :users
2024-03-04T19:16:47.1506703Z   Validations
2024-03-04T19:16:47.1563592Z     is expected to validate that :resource_type is either â€¹"Organization"â€º or â€¹"Partner"â€º
2024-03-04T19:16:47.1564548Z   versioning
2024-03-04T19:16:47.1595569Z     is expected to be versioned
2024-03-04T19:16:47.1596278Z   Associations
2024-03-04T19:16:47.1658037Z     is expected to have and belong to many users
2024-03-04T19:16:47.1692508Z     is expected to belong to resource optional: true
2024-03-04T19:16:47.1693201Z 
2024-03-04T19:16:47.1693636Z Partners::ChildItemRequest
2024-03-04T19:16:47.1694942Z   associations
2024-03-04T19:16:47.1802096Z     is expected to belong to item_request required: true
2024-03-04T19:16:47.1843254Z     is expected to belong to child required: true
2024-03-04T19:16:47.1878692Z     is expected to belong to authorized_family_member optional: true
2024-03-04T19:16:47.1879722Z   #quantity
2024-03-04T19:16:47.1942185Z     should return the quantity divided by the number of children
2024-03-04T19:16:47.1943215Z   versioning
2024-03-04T19:16:47.1977645Z     is expected to be versioned
2024-03-04T19:16:47.1978400Z   #ordered_item_diaperid
2024-03-04T19:16:47.2014912Z     should return the item_id on the item_request
2024-03-04T19:16:47.2016112Z 
2024-03-04T19:16:47.2016477Z County
2024-03-04T19:16:47.2106743Z   is expected to have many served_areas
2024-03-04T19:16:47.2107533Z   versioning
2024-03-04T19:16:47.2142723Z     is expected to be versioned
2024-03-04T19:16:47.2143324Z 
2024-03-04T19:16:47.2143735Z DistributionMailer
2024-03-04T19:16:47.2144882Z   #partner_mailer
2024-03-04T19:16:47.3062856Z     renders the body with distributions text
2024-03-04T19:16:47.3615808Z     renders the body with organization's email text
2024-03-04T19:16:47.3617114Z     with distribution changes
2024-03-04T19:16:47.4181367Z       renders the body with changes that happened in the distribution
2024-03-04T19:16:47.4182701Z     with deliver_method: :delivery
2024-03-04T19:16:47.4720278Z       sends copy of email only to the partner
2024-03-04T19:16:47.5271930Z       renders the body with 'delivered' specified
2024-03-04T19:16:47.5272789Z     with deliver_method: :pick_up
2024-03-04T19:16:47.5809064Z       renders the body with 'picked up' specified
2024-03-04T19:16:47.5810069Z       when parners profile pick_up_email is present
2024-03-04T19:16:47.6327596Z         sends email to the primary contact and partner`s pickup person
2024-03-04T19:16:47.6328857Z         when pickup person happens to be the same as the primary contact
2024-03-04T19:16:47.6845987Z           does not send email twice
2024-03-04T19:16:47.6847117Z   #reminder_email
2024-03-04T19:16:47.6848146Z     with deliver_method: :pick_up
2024-03-04T19:16:47.7417177Z       renders the body with 'pick up' specified
2024-03-04T19:16:47.7418322Z     Text format
2024-03-04T19:16:47.7897077Z       renders the body with organization's email text
2024-03-04T19:16:47.7898047Z     HTML format
2024-03-04T19:16:47.8391380Z       renders the body with organization's email text
2024-03-04T19:16:47.8392510Z     with deliver_method: :delivery
2024-03-04T19:16:47.8924417Z       renders the body with 'delivery' specified
2024-03-04T19:16:47.8925052Z 
2024-03-04T19:16:47.8925278Z DonationSite
2024-03-04T19:16:47.8926164Z   Validations >
2024-03-04T19:16:47.9035182Z     is invalid without an address
2024-03-04T19:16:47.9072346Z     must belong to an organization
2024-03-04T19:16:47.9116041Z     is invalid without a name
2024-03-04T19:16:47.9116717Z   geocode
2024-03-04T19:16:47.9180283Z     adds coordinates to the database
2024-03-04T19:16:47.9181166Z   versioning
2024-03-04T19:16:47.9217290Z     is expected to be versioned
2024-03-04T19:16:47.9217920Z   import_csv
2024-03-04T19:16:48.1110820Z     imports storage locations from a csv file
2024-03-04T19:16:48.1111491Z 
2024-03-04T19:16:48.1111715Z ItemCreateService
2024-03-04T19:16:48.1112553Z   #call
2024-03-04T19:16:48.1113361Z     when an issue occurs in transaction
2024-03-04T19:16:48.1114476Z       because a inventory item creation failed and raised an error
2024-03-04T19:16:48.2915188Z         should return a OpenStruct with the raised error
2024-03-04T19:16:48.2916270Z       because the organization_id does not match any Organization
2024-03-04T19:16:48.4649605Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-04T19:16:48.4650570Z       because the item create raised an error
2024-03-04T19:16:48.6399930Z         should return a OpenStruct with the raised error
2024-03-04T19:16:48.6401191Z     when there are no issues
2024-03-04T19:16:48.8175494Z       should return an OpenStruct with success? set to true and the item
2024-03-04T19:16:48.9921831Z       should execute the expected methods
2024-03-04T19:16:48.9922629Z 
2024-03-04T19:16:48.9922978Z PartnerMailer
2024-03-04T19:16:48.9924003Z   #recertification_request
2024-03-04T19:16:49.0209609Z     renders the body with text that indicates to recertify and link to where
2024-03-04T19:16:49.0441808Z     should be sent to the partner main email with the correct subject line
2024-03-04T19:16:49.0442836Z   #application_approved
2024-03-04T19:16:49.0721477Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-04T19:16:49.0970616Z     should be sent to the partner main email with the correct subject line
2024-03-04T19:16:49.0971560Z 
2024-03-04T19:16:49.0972549Z PartnerFetchRequestableItemsService
2024-03-04T19:16:49.0973247Z   #call
2024-03-04T19:16:49.1099808Z     raises an error indiciating the partner does not exist with invalid id
2024-03-04T19:16:49.1101103Z     org with any amount of items
2024-03-04T19:16:49.1101690Z       when the partner is in a partner group and has items
2024-03-04T19:16:49.3484896Z         should return only active and visible items from partner
2024-03-04T19:16:49.3485734Z       when the partner is in a partner group and has no items
2024-03-04T19:16:49.5484620Z         should return only active and visible items from partner
2024-03-04T19:16:49.5485650Z     when the partner is not in any partner group
2024-03-04T19:16:49.5767514Z       is expected to be nil
2024-03-04T19:16:49.5768633Z       when the organization has no items
2024-03-04T19:16:49.6078295Z         should return no items
2024-03-04T19:16:49.6079138Z       when the organization has items
2024-03-04T19:16:49.6590803Z         should return only active and visible items
2024-03-04T19:16:49.6919140Z         is expected to eq [#<Item id: 555, name: "Item 1", category: nil, created_at: "2024-03-04 11:16:49.676645595 -0800", up... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-04T19:16:49.6920737Z 
2024-03-04T19:16:49.6920932Z TransfersController
2024-03-04T19:16:49.6990768Z   While signed in
2024-03-04T19:16:49.6992154Z     GET #show
2024-03-04T19:16:49.7437912Z       returns http success
2024-03-04T19:16:49.7438775Z     Looking at a different organization
2024-03-04T19:16:49.9278529Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:16:49.9279258Z     GET #new
2024-03-04T19:16:49.9421912Z       returns http success
2024-03-04T19:16:49.9422872Z     GET #index
2024-03-04T19:16:49.9565188Z       returns http success
2024-03-04T19:16:49.9566094Z       when filtering by date
2024-03-04T19:16:49.9566931Z         when date parameters are supplied
2024-03-04T19:16:49.9963305Z           only returns the correct obejects
2024-03-04T19:16:49.9963966Z         when date parameters are not supplied
2024-03-04T19:16:50.0351318Z           returns all objects
2024-03-04T19:16:50.0352109Z     POST #create
2024-03-04T19:16:50.0856229Z       redirects to #show when successful
2024-03-04T19:16:50.1018887Z       renders to #new when failing
2024-03-04T19:16:50.1019715Z   While not signed in
2024-03-04T19:16:50.1162810Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:16:50.1163536Z 
2024-03-04T19:16:50.1163803Z HelpController
2024-03-04T19:16:50.1164340Z   While signed in as a normal user >
2024-03-04T19:16:50.1167184Z     GET #show
2024-03-04T19:16:50.1259231Z       does not display help page when the user logs out
2024-03-04T19:16:50.1412742Z       returns http success
2024-03-04T19:16:50.1413285Z 
2024-03-04T19:16:50.1414014Z DistributionUpdateService
2024-03-04T19:16:50.1414756Z   resend_notification?
2024-03-04T19:16:50.2392557Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-04T19:16:50.3307209Z     changes the issue_date, resulting in resend_notification? = true
2024-03-04T19:16:50.4359365Z     changes any distribution content, resulting in resend_notification? = true
2024-03-04T19:16:50.4360415Z   call
2024-03-04T19:16:50.5413204Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-04T19:16:50.5414347Z 
2024-03-04T19:16:50.5414893Z Partners::RequestApprovalService
2024-03-04T19:16:50.5415872Z   #call
2024-03-04T19:16:50.5416565Z     when the partner is already awaiting approval
2024-03-04T19:16:50.5709391Z       should return an error saying it the partner is already requested approval
2024-03-04T19:16:50.5710352Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-04T19:16:50.6035122Z       does not have an error
2024-03-04T19:16:50.6036221Z     when the partner is not yet awaiting approval
2024-03-04T19:16:50.6350058Z       should set the status on the partner record to awaiting_review
2024-03-04T19:16:50.6662619Z       should send an email notification to the partner's organization
2024-03-04T19:16:50.6663746Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-04T19:16:50.6925905Z       should return an error re social media
2024-03-04T19:16:50.6927417Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-04T19:16:50.6928635Z 
2024-03-04T19:16:50.6928909Z DonationCreateService
2024-03-04T19:16:50.6929635Z   #call
2024-03-04T19:16:50.7146269Z     should create the donation
2024-03-04T19:16:50.7146786Z 
2024-03-04T19:16:50.7147017Z NotifyPartnerJob
2024-03-04T19:16:50.7147693Z   #perform
2024-03-04T19:16:50.7201767Z     avoids exception when request doesn't exist
2024-03-04T19:16:50.7307783Z     is expected to call RequestsConfirmationMailer
2024-03-04T19:16:50.7308788Z     when the request's partner is deactivated
2024-03-04T19:16:50.7600200Z       does not send the confirmation email
2024-03-04T19:16:50.7600741Z 
2024-03-04T19:16:50.7600991Z LineItem
2024-03-04T19:16:50.7602435Z   Methods >
2024-03-04T19:16:50.7603184Z     item packages
2024-03-04T19:16:50.7604039Z       #has_packages
2024-03-04T19:16:50.7604795Z         item has no package size
2024-03-04T19:16:50.7740247Z           is expected to be falsy
2024-03-04T19:16:50.7930217Z         item has package size
2024-03-04T19:16:50.7931243Z           is expected to be truthy
2024-03-04T19:16:50.7931971Z       #package_count
2024-03-04T19:16:50.7932458Z         does not have packages
2024-03-04T19:16:50.8067946Z           is expected to be falsy
2024-03-04T19:16:50.8068744Z         has packages
2024-03-04T19:16:50.8252852Z           is expected to eq "1"
2024-03-04T19:16:50.8253878Z     #value_per_line_item
2024-03-04T19:16:50.8254548Z       item has no value
2024-03-04T19:16:50.8381571Z         is expected to eq 0
2024-03-04T19:16:50.8382300Z       item has value and quantity
2024-03-04T19:16:50.8568467Z         is expected to eq 25
2024-03-04T19:16:50.8569209Z   versioning
2024-03-04T19:16:50.8608209Z     is expected to be versioned
2024-03-04T19:16:50.8608904Z   Scopes >
2024-03-04T19:16:50.8609556Z     ->active
2024-03-04T19:16:50.9107814Z       retrieves only those with active status
2024-03-04T19:16:50.9108655Z   package_count
2024-03-04T19:16:50.9328555Z     is nil if there is no package_size
2024-03-04T19:16:50.9540501Z     is equal to the quanity divided by the package_size
2024-03-04T19:16:50.9541683Z   Validations >
2024-03-04T19:16:50.9692424Z     requires a quantity
2024-03-04T19:16:51.0587811Z     the quantity must be a valid integer and cannot be 0
2024-03-04T19:16:51.0683417Z     requires an item
2024-03-04T19:16:51.0684227Z 
2024-03-04T19:16:51.0684476Z HistoricalTrendService
2024-03-04T19:16:51.0685730Z   #series
2024-03-04T19:16:51.3636684Z     returns an array of items with their monthly data
2024-03-04T19:16:51.3637399Z 
2024-03-04T19:16:51.3637828Z Partners::UpdateFamily
2024-03-04T19:16:51.3638798Z   #call
2024-03-04T19:16:51.3639622Z     when an error occurs during archiving
2024-03-04T19:16:51.4314882Z       does not archive the family or its children and adds error to the service
2024-03-04T19:16:51.4316307Z     when family has children
2024-03-04T19:16:51.4724593Z       archives the family and its children
2024-03-04T19:16:51.4725329Z 
2024-03-04T19:16:51.4725562Z KitCreateService
2024-03-04T19:16:51.4726616Z   #call
2024-03-04T19:16:51.6766401Z     should return an the instance
2024-03-04T19:16:51.6767525Z     when the parameters are valid
2024-03-04T19:16:51.8725687Z       should create a new Kit
2024-03-04T19:16:52.0773536Z       should create a new Item
2024-03-04T19:16:52.2778458Z       should create the new Item associated with the Kit
2024-03-04T19:16:52.2779469Z       but an unexpected error gets raised
2024-03-04T19:16:52.4757031Z         should not create the Kit
2024-03-04T19:16:52.6675080Z         should have an error that includes the raised error
2024-03-04T19:16:52.8599386Z         should not create a Item
2024-03-04T19:16:52.8600228Z       but the ItemCreationService is unsuccesful
2024-03-04T19:16:53.0631481Z         should not create the Kit
2024-03-04T19:16:53.2552150Z         should have an error that includes the error
2024-03-04T19:16:53.4553545Z         should not create a Item
2024-03-04T19:16:53.4554431Z     when the parameters provided are invalid
2024-03-04T19:16:53.4555463Z       because the organization_id does not match any Organization
2024-03-04T19:16:53.4612577Z         should have an error on organization_id saying it does not match any Organization
2024-03-04T19:16:53.4613867Z       because the kit_params is invalid for kit creation
2024-03-04T19:16:53.6387602Z         should have errors saying why the kit_params are invalid
2024-03-04T19:16:53.6388624Z 
2024-03-04T19:16:53.6388950Z DistributionCreateService
2024-03-04T19:16:53.6389869Z   call
2024-03-04T19:16:53.7166257Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-04T19:16:53.7909934Z     returns a successful object with Scheduled distribution
2024-03-04T19:16:53.7911307Z     when there's not sufficient inventory
2024-03-04T19:16:53.8520384Z       preserves the Insufficiency error and is unsuccessful
2024-03-04T19:16:53.8521397Z     when the line item quantity is not positive
2024-03-04T19:16:53.9018242Z       preserves the RecordInvalid error and is unsuccessful
2024-03-04T19:16:53.9018967Z     partner has send reminders setting set to false
2024-03-04T19:16:53.9775329Z       does not send a PartnerMailer
2024-03-04T19:16:53.9776784Z     partner has send reminders setting set to true
2024-03-04T19:16:54.1548838Z       Sends a PartnerMailer
2024-03-04T19:16:54.1549631Z     when provided with a request ID
2024-03-04T19:16:54.2355947Z       changes the status of the request
2024-03-04T19:16:54.2356981Z       and the request already has a distribution associated with it
2024-03-04T19:16:54.3125301Z         should not be successful
2024-03-04T19:16:54.3126425Z     when it fails to save
2024-03-04T19:16:54.3634148Z       preserves the error and is unsuccessful
2024-03-04T19:16:54.3635330Z     partner is deactivated
2024-03-04T19:16:54.4460339Z       does not send an email
2024-03-04T19:16:54.4461981Z     when there's multiple line items and one has insufficient inventory
2024-03-04T19:16:54.5115959Z       preserves the Insufficiency error and is unsuccessful
2024-03-04T19:16:54.5116664Z 
2024-03-04T19:16:54.5116950Z User
2024-03-04T19:16:54.5117951Z   #role_added
2024-03-04T19:16:54.5487923Z     renders the body correctly
2024-03-04T19:16:54.5488729Z   #send_reset_password_instructions
2024-03-04T19:16:54.5490942Z     user gets an email with instructions
2024-03-04T19:16:54.6393022Z       sends an email with instructions
2024-03-04T19:16:54.6393764Z 
2024-03-04T19:16:54.6394081Z RequestItem
2024-03-04T19:16:54.6396131Z   Methods >
2024-03-04T19:16:54.6396972Z     #from_json
2024-03-04T19:16:54.8888473Z       has the correct amount on hand
2024-03-04T19:16:55.1433569Z       has the correct amount on hand for location
2024-03-04T19:16:55.3907857Z       has the correct name
2024-03-04T19:16:55.6467845Z       has the correct quantity
2024-03-04T19:16:55.6468472Z 
2024-03-04T19:16:55.6468703Z HistoricalTrendsHelper
2024-03-04T19:16:55.6470387Z   #last_12_months
2024-03-04T19:16:55.6524160Z     returns the last 12 months starting from July when the current month is June
2024-03-04T19:16:55.6570888Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-04T19:16:55.6614800Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-04T19:16:55.6616046Z 
2024-03-04T19:16:55.6616352Z ItemsOutQuery
2024-03-04T19:16:55.6617490Z   items_out_query
2024-03-04T19:16:55.7852420Z     includes distributions, adjustments, transfers among sources
2024-03-04T19:16:55.9027078Z     returns a collection with the fields name, item_id, quantity
2024-03-04T19:16:55.9027894Z 
2024-03-04T19:16:55.9028096Z Adjustment
2024-03-04T19:16:55.9029274Z   behaves like itemizable
2024-03-04T19:16:55.9030489Z     .line_items
2024-03-04T19:16:55.9031804Z       quantities_by_name
2024-03-04T19:16:55.9464749Z         leaves out zero-quantitied items if requested
2024-03-04T19:16:55.9891939Z         returns a hash of items with id, name, and quantity
2024-03-04T19:16:55.9892787Z       combine!
2024-03-04T19:16:56.0356321Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:16:56.0836690Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:16:56.0837766Z       total
2024-03-04T19:16:56.1263436Z         has an item total
2024-03-04T19:16:56.1264179Z       sorted
2024-03-04T19:16:56.1861626Z         displays the items, sorted by name
2024-03-04T19:16:56.1862446Z     .to_a
2024-03-04T19:16:56.1863029Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:16:56.2243122Z         raises an error
2024-03-04T19:16:56.2243945Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:16:56.2621079Z         calls line_item_values
2024-03-04T19:16:56.2622044Z   nested line item attributes
2024-03-04T19:16:56.3055987Z     accepts them
2024-03-04T19:16:56.3056483Z   versioning
2024-03-04T19:16:56.3096697Z     is expected to be versioned
2024-03-04T19:16:56.3097172Z   Methods >
2024-03-04T19:16:56.5107635Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-04T19:16:56.5109052Z     split_difference
2024-03-04T19:16:56.5910903Z       gracefully handles adjustments with only negative
2024-03-04T19:16:56.6684918Z       gracefully handles adjustments with only positive
2024-03-04T19:16:56.7437143Z       returns two adjustment objects
2024-03-04T19:16:56.7438020Z   Scopes >
2024-03-04T19:16:56.7597719Z     `by_user` can filter out adjustments to a specific user
2024-03-04T19:16:56.7763645Z     `at_location` can filter out adjustments to a specific location
2024-03-04T19:16:56.7764906Z   Validations >
2024-03-04T19:16:56.8177080Z     allows you to remove all the inventory that exists in the storage location
2024-03-04T19:16:56.8260760Z     must belong to an organization
2024-03-04T19:16:56.8430326Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-04T19:16:56.8431149Z 
2024-03-04T19:16:56.8431495Z DeallocateKitInventoryService
2024-03-04T19:16:56.8432641Z   #error
2024-03-04T19:16:56.8433602Z     when the storage location organization doesn't match
2024-03-04T19:16:57.0813735Z       returns error
2024-03-04T19:16:57.0814332Z   #deallocate
2024-03-04T19:16:57.0814905Z     when inventory items are available
2024-03-04T19:16:57.0816420Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-04T19:16:57.3717098Z         raises error about KitAllocation not found
2024-03-04T19:16:57.3719058Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-04T19:16:57.6811715Z         raises error about inconsistent inventory in or out
2024-03-04T19:16:57.6813134Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-04T19:16:58.0080971Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-04T19:16:58.0082401Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-04T19:16:58.4786329Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-04T19:16:58.4787292Z 
2024-03-04T19:16:58.4787525Z InventoryAggregate
2024-03-04T19:16:58.4788906Z   individual events
2024-03-04T19:16:58.7832469Z     should process a donation event
2024-03-04T19:16:59.1163075Z     should process a distribution destroyed event
2024-03-04T19:16:59.4196301Z     should process a transfer event
2024-03-04T19:16:59.7188860Z     should process an adjustment event
2024-03-04T19:17:00.0379431Z     should process a purchase destroyed event
2024-03-04T19:17:00.3570315Z     should process an audit event
2024-03-04T19:17:00.6507390Z     should process a donation event after a new storage location is created
2024-03-04T19:17:00.9594517Z     should process a distribution event
2024-03-04T19:17:01.2633072Z     should process a donation destroyed event
2024-03-04T19:17:01.5475053Z     should process a snapshot event
2024-03-04T19:17:01.8634450Z     should process a transfer destroy event
2024-03-04T19:17:02.2513816Z     should process a kit deallocation event
2024-03-04T19:17:02.5629914Z     should process a kit allocation event
2024-03-04T19:17:02.8690192Z     should process a purchase event
2024-03-04T19:17:02.8691269Z   multiple events
2024-03-04T19:17:03.1849897Z     should handle intervening audits
2024-03-04T19:17:03.4585088Z     should handle timing correctly
2024-03-04T19:17:03.8684745Z     should process multiple events
2024-03-04T19:17:04.1313000Z     should ignore unusable snapshots
2024-03-04T19:17:04.4115161Z     should handle changing storage location
2024-03-04T19:17:04.4116377Z   validation
2024-03-04T19:17:04.4116986Z     current event is incorrect
2024-03-04T19:17:04.6529143Z       should raise a bare error
2024-03-04T19:17:04.6529994Z     subsequent event is incorrect
2024-03-04T19:17:04.9061540Z       should handle negative quantities
2024-03-04T19:17:05.2056894Z       should add the event to the message
2024-03-04T19:17:05.2058792Z 
2024-03-04T19:17:05.2059156Z Partner
2024-03-04T19:17:05.2061841Z   associations
2024-03-04T19:17:05.2104583Z     is expected to have many item_categories through partner_group
2024-03-04T19:17:05.2139249Z     is expected to have many requests
2024-03-04T19:17:05.2198857Z     is expected to belong to organization required: true
2024-03-04T19:17:05.2249884Z     is expected to belong to partner_group optional: true
2024-03-04T19:17:05.2284262Z     is expected to have many users dependent => destroy
2024-03-04T19:17:05.2319593Z     is expected to have many families dependent => destroy
2024-03-04T19:17:05.2351925Z     is expected to have many distributions
2024-03-04T19:17:05.2386776Z     is expected to have many children through families
2024-03-04T19:17:05.2421581Z     is expected to have many requestable_items through item_categories source => items
2024-03-04T19:17:05.2452996Z     is expected to have many requests
2024-03-04T19:17:05.2453674Z     primary_user
2024-03-04T19:17:05.2742658Z       should return the first user ever created for a partner
2024-03-04T19:17:05.2743613Z   #csv_export_attributes
2024-03-04T19:17:05.2996894Z     includes contact person information from parnerbase
2024-03-04T19:17:05.2997837Z   callbacks
2024-03-04T19:17:05.3213684Z     properly downcases email
2024-03-04T19:17:05.3214773Z   versioning
2024-03-04T19:17:05.3251183Z     is expected to be versioned
2024-03-04T19:17:05.3252262Z   changing emails
2024-03-04T19:17:05.3519639Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-04T19:17:05.3783660Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-04T19:17:05.4048700Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-04T19:17:05.4313801Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-04T19:17:05.4634093Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-04T19:17:05.4892570Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-04T19:17:05.5141900Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-04T19:17:05.5143012Z   #quantity_year_to_date
2024-03-04T19:17:05.7091927Z     does not include quantities from distributions issued during the previous year
2024-03-04T19:17:05.8884553Z     includes all item quantities from distributions issued during the current year
2024-03-04T19:17:05.8885768Z   Validations >
2024-03-04T19:17:05.9177026Z     requires a unique name within an organization
2024-03-04T19:17:05.9494664Z     requires a unique email that is formatted correctly
2024-03-04T19:17:05.9785526Z     still requires a unique email between organizations
2024-03-04T19:17:06.0057203Z     does not require a unique name between organizations
2024-03-04T19:17:06.0152176Z     validates the quota is a number but it is not required
2024-03-04T19:17:06.0209575Z     must belong to an organization
2024-03-04T19:17:06.0210634Z   Filters
2024-03-04T19:17:06.0211214Z     by_status
2024-03-04T19:17:06.0634232Z       yields deactivated partner when deactivated status provided
2024-03-04T19:17:06.1054970Z       yields partners with the provided status
2024-03-04T19:17:06.1056072Z   import_csv
2024-03-04T19:17:06.4231587Z     imports partners from a csv file with BOM encodings
2024-03-04T19:17:06.6433731Z     imports partners from a csv file and prevents multiple imports
2024-03-04T19:17:06.6434702Z   #profile
2024-03-04T19:17:06.6686904Z     should return the associated Partners::Profile record
2024-03-04T19:17:06.6687968Z   #impact_metrics
2024-03-04T19:17:06.6688939Z     when partner don't have any related information
2024-03-04T19:17:06.6939538Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-04T19:17:06.6940836Z     when partner has related information
2024-03-04T19:17:06.7388362Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-04T19:17:06.7389832Z   #approvable?
2024-03-04T19:17:06.7390422Z     when status is awaiting_review
2024-03-04T19:17:06.7433107Z       should return true
2024-03-04T19:17:06.7433805Z     when status is invited
2024-03-04T19:17:06.7474536Z       should return true
2024-03-04T19:17:06.7475467Z     when status is not invited or awaiting_review
2024-03-04T19:17:06.7561149Z       should return false
2024-03-04T19:17:06.7561828Z   #deletable?
2024-03-04T19:17:06.7562829Z     when status is uninvited
2024-03-04T19:17:06.7564350Z       when it has a profile and users
2024-03-04T19:17:06.7815468Z         should return false
2024-03-04T19:17:06.7816582Z       when it has a profile but no users
2024-03-04T19:17:06.7965199Z         should return true
2024-03-04T19:17:06.7966060Z       when it has a request
2024-03-04T19:17:06.8109834Z         should return false
2024-03-04T19:17:06.8110552Z       when it has no other associations
2024-03-04T19:17:06.8217053Z         should return true
2024-03-04T19:17:06.8217691Z       when it has a distribution
2024-03-04T19:17:06.8358669Z         should return false
2024-03-04T19:17:06.8360078Z     when status is not uninvited
2024-03-04T19:17:06.8439070Z       should return false
2024-03-04T19:17:06.8440008Z   ActiveStorage validation
2024-03-04T19:17:06.8553869Z     validates that attachments are pdf or docs
2024-03-04T19:17:06.8554894Z   #deactivated?
2024-03-04T19:17:06.8555783Z     when the status is not 'deactivated'
2024-03-04T19:17:06.8596467Z       should return false
2024-03-04T19:17:06.8597498Z     when the status is 'deactivated'
2024-03-04T19:17:06.8637614Z       should return true
2024-03-04T19:17:06.8638502Z 
2024-03-04T19:17:06.8639208Z NDBNMember
2024-03-04T19:17:06.8640354Z   versioning
2024-03-04T19:17:06.8675444Z     is expected to be versioned
2024-03-04T19:17:06.8676230Z   validations
2024-03-04T19:17:06.8803907Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-04T19:17:06.8869928Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-04T19:17:06.8944034Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-04T19:17:06.8945015Z   #full_name
2024-03-04T19:17:06.8988742Z     should equal the id and the account name
2024-03-04T19:17:06.8990045Z 
2024-03-04T19:17:06.8990430Z Purchase
2024-03-04T19:17:06.8991276Z   Validations >
2024-03-04T19:17:06.9101538Z     is not valid if period supplies is non-zero but no other category is
2024-03-04T19:17:06.9192637Z     is valid if categories have no values
2024-03-04T19:17:06.9373532Z     is not valid if any category is non-zero but does not add up to the total
2024-03-04T19:17:06.9563579Z     is invalid when the line items are invalid
2024-03-04T19:17:06.9649099Z     is valid if all categories add up to total
2024-03-04T19:17:06.9727995Z     must belong to an organization
2024-03-04T19:17:06.9812543Z     is not valid if categories do not add up
2024-03-04T19:17:06.9889803Z     requires an inventory (storage location)
2024-03-04T19:17:06.9971292Z     ensures that the issued at is no earlier than 2000
2024-03-04T19:17:06.9972425Z   Scopes >
2024-03-04T19:17:06.9972926Z     during >
2024-03-04T19:17:07.0218077Z       returns all purchases created between two dates
2024-03-04T19:17:07.0219002Z   Associations >
2024-03-04T19:17:07.0219470Z     items >
2024-03-04T19:17:07.0415106Z       has_many
2024-03-04T19:17:07.0416054Z   Callbacks >
2024-03-04T19:17:07.0586969Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-04T19:17:07.0775443Z     automatically combines duplicate line_item records when they're created
2024-03-04T19:17:07.0776959Z   Methods >
2024-03-04T19:17:07.0777536Z     remove
2024-03-04T19:17:07.1475729Z       removes the item from the purchase
2024-03-04T19:17:07.2195814Z       fails gracefully if the item doesn't exist
2024-03-04T19:17:07.2196530Z     storage_view
2024-03-04T19:17:07.2860338Z       returns name of storage location
2024-03-04T19:17:07.2861128Z   versioning
2024-03-04T19:17:07.2900847Z     is expected to be versioned
2024-03-04T19:17:07.2901701Z   behaves like itemizable
2024-03-04T19:17:07.2902482Z     .line_items
2024-03-04T19:17:07.2903428Z       combine!
2024-03-04T19:17:07.3408760Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:17:07.3851878Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:17:07.3852680Z       sorted
2024-03-04T19:17:07.4490153Z         displays the items, sorted by name
2024-03-04T19:17:07.4491360Z       total
2024-03-04T19:17:07.4933952Z         has an item total
2024-03-04T19:17:07.4934455Z       quantities_by_name
2024-03-04T19:17:07.5348165Z         leaves out zero-quantitied items if requested
2024-03-04T19:17:07.5745236Z         returns a hash of items with id, name, and quantity
2024-03-04T19:17:07.5745898Z     .to_a
2024-03-04T19:17:07.5746768Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:17:07.6124109Z         calls line_item_values
2024-03-04T19:17:07.6125272Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:17:07.6505184Z         raises an error
2024-03-04T19:17:07.6506072Z 
2024-03-04T19:17:07.6506505Z ApplicationController
2024-03-04T19:17:07.6507808Z   dashboard_path_from_current_role
2024-03-04T19:17:07.6508519Z     As a user without super admin status
2024-03-04T19:17:07.6721810Z       links to the general dashboard
2024-03-04T19:17:07.6722827Z     As a super admin
2024-03-04T19:17:07.6921160Z       links to the admin dashboard
2024-03-04T19:17:07.6921817Z   current_organization
2024-03-04T19:17:07.6922681Z     As an org user
2024-03-04T19:17:08.0487728Z       should return the first org role
2024-03-04T19:17:08.0488659Z       with a changed current role
2024-03-04T19:17:08.4279894Z         should return the first org role
2024-03-04T19:17:08.4281285Z     As a partner user
2024-03-04T19:17:08.4448158Z       should return nil
2024-03-04T19:17:08.4448881Z   current_partner
2024-03-04T19:17:08.4449884Z     As an org user
2024-03-04T19:17:08.4586277Z       should return nil
2024-03-04T19:17:08.4586814Z     As a partner user
2024-03-04T19:17:08.5131940Z       should return the first partner role
2024-03-04T19:17:08.5132708Z       with a changed current role
2024-03-04T19:17:08.5687080Z         should return the first partner role
2024-03-04T19:17:08.5687744Z 
2024-03-04T19:17:08.5688156Z PartnerProfileUpdateService
2024-03-04T19:17:08.5689111Z   #call
2024-03-04T19:17:08.5690585Z     when there are no pre-existing served areas
2024-03-04T19:17:08.5691681Z       and the new values are correct
2024-03-04T19:17:08.5952523Z         stores the new values and returns success
2024-03-04T19:17:08.5953739Z         and there are other errors in the profile
2024-03-04T19:17:08.6157206Z           does not store the new values and it returns a failure
2024-03-04T19:17:08.6158189Z       and the new values are incorrect
2024-03-04T19:17:08.6356340Z 0
2024-03-04T19:17:08.6366440Z         does not store the new values and returns a failure
2024-03-04T19:17:08.6367657Z     when served area client shares pre-exist
2024-03-04T19:17:08.6368833Z       and the new values are incorrect
2024-03-04T19:17:08.6668022Z         maintains the old values and returns failure
2024-03-04T19:17:08.6669242Z       and the new values are correct
2024-03-04T19:17:08.6669997Z         and there are no other errors
2024-03-04T19:17:08.6975362Z           replaces the old values and returns success
2024-03-04T19:17:08.6976917Z         and there are errors on the profile
2024-03-04T19:17:08.7256378Z           maintains the old values and returns failure
2024-03-04T19:17:08.7257406Z 
2024-03-04T19:17:08.7257944Z Event
2024-03-04T19:17:08.7258877Z   #most_recent_snapshot
2024-03-04T19:17:08.9680071Z     should include the last usable snapshot
2024-03-04T19:17:09.2063743Z     should not include an unusable snapshot
2024-03-04T19:17:09.2064392Z 
2024-03-04T19:17:09.2064869Z Exports::ExportReportCSVService
2024-03-04T19:17:09.2065720Z   .generate_csv_data
2024-03-04T19:17:09.2106520Z     creates CSV data including headers
2024-03-04T19:17:09.2141888Z     creates a CSV string
2024-03-04T19:17:09.2142598Z 
2024-03-04T19:17:09.2142851Z Reports::PeriodSupplyReportService
2024-03-04T19:17:09.2143815Z   #report
2024-03-04T19:17:09.4219146Z     should report zero values
2024-03-04T19:17:09.4219979Z     with values
2024-03-04T19:17:10.0611862Z       should report normal values
2024-03-04T19:17:10.0612501Z 
2024-03-04T19:17:10.0612745Z DonationSitesController
2024-03-04T19:17:10.0613968Z   While signed in
2024-03-04T19:17:10.0616307Z     Looking at a different organization
2024-03-04T19:17:10.2377002Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:17:10.2377715Z     GET #show
2024-03-04T19:17:10.2542274Z       returns http success
2024-03-04T19:17:10.2543023Z     GET #edit
2024-03-04T19:17:10.2697902Z       returns http success
2024-03-04T19:17:10.2698916Z     DELETE #destroy
2024-03-04T19:17:10.2860787Z       returns http success
2024-03-04T19:17:10.2861728Z     GET #index
2024-03-04T19:17:10.3003874Z       returns http success
2024-03-04T19:17:10.3004609Z     GET #new
2024-03-04T19:17:10.3148407Z       returns http success
2024-03-04T19:17:10.3149254Z     POST #import_csv
2024-03-04T19:17:10.3149988Z       behaves like csv import
2024-03-04T19:17:10.3150809Z         with a csv file
2024-03-04T19:17:10.3328608Z           presents a flash notice message
2024-03-04T19:17:10.3473048Z           redirects to :index
2024-03-04T19:17:10.3527781Z           invokes .import_csv
2024-03-04T19:17:10.3529985Z         without a csv file
2024-03-04T19:17:10.3639215Z           redirects to :index
2024-03-04T19:17:10.3738308Z           presents a flash error message
2024-03-04T19:17:10.3739372Z         csv file with wrong headers
2024-03-04T19:17:10.3855215Z           presents a flash error message
2024-03-04T19:17:10.3963307Z           redirects to :index
2024-03-04T19:17:10.3964528Z   While not signed in
2024-03-04T19:17:10.4028798Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:17:10.4029761Z 
2024-03-04T19:17:10.4030041Z Partners::Profile
2024-03-04T19:17:10.4065480Z   must allow deleting served_areas
2024-03-04T19:17:10.4066324Z   request settings validation for profile
2024-03-04T19:17:10.4067146Z     no settings are set to true
2024-03-04T19:17:10.4119150Z       should not be valid
2024-03-04T19:17:10.4119875Z     at least one request type is set to true
2024-03-04T19:17:10.4192035Z       should be valid when enable_quantity_based_requests is true
2024-03-04T19:17:10.4265501Z       should be valid when enable_individual_requests is true
2024-03-04T19:17:10.4335004Z       should be valid when enable_child_based_requests is true
2024-03-04T19:17:10.4336306Z   versioning
2024-03-04T19:17:10.4369489Z     is expected to be versioned
2024-03-04T19:17:10.4370291Z   social media info validation for profile
2024-03-04T19:17:10.4371599Z     no social media presence and the checkbox isn't checked
2024-03-04T19:17:10.4471290Z       should be valid if media_information is not needed
2024-03-04T19:17:10.4523828Z       should not be valid
2024-03-04T19:17:10.4524901Z     has social media presence and the checkbox is unchecked
2024-03-04T19:17:10.4596068Z       with every social media option it should be valid
2024-03-04T19:17:10.4663132Z       with just facebook it should be valid
2024-03-04T19:17:10.4730368Z       with just instagram it should be valid
2024-03-04T19:17:10.4798957Z       with just twitter it should be valid
2024-03-04T19:17:10.4869261Z       with just a website it should be valid
2024-03-04T19:17:10.4870439Z     no social media presence and the checkbox is checked
2024-03-04T19:17:10.4933745Z       should be valid
2024-03-04T19:17:10.4935243Z   client share behaviour
2024-03-04T19:17:10.4936973Z     multiple
2024-03-04T19:17:10.5091617Z       sums the client shares
2024-03-04T19:17:10.5242035Z       is valid if client share sum is 100
2024-03-04T19:17:10.5243082Z     no served areas
2024-03-04T19:17:10.5290733Z       has 0 client share
2024-03-04T19:17:10.5291602Z   associations
2024-03-04T19:17:10.5328007Z     is expected to have many served_areas
2024-03-04T19:17:10.5368876Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-04T19:17:10.5406661Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-04T19:17:10.5444751Z     is expected to have a has_many_attached called documents
2024-03-04T19:17:10.5445501Z 
2024-03-04T19:17:10.5445811Z Exports::ExportDonationsCSVService
2024-03-04T19:17:10.5447196Z   #generate_csv_data
2024-03-04T19:17:10.6586882Z     should match the expected content for the csv
2024-03-04T19:17:10.6587547Z 
2024-03-04T19:17:10.6588066Z ReminderDeadlineJob
2024-03-04T19:17:10.6588620Z   #perform
2024-03-04T19:17:10.6834821Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-04T19:17:10.6835804Z 
2024-03-04T19:17:10.6836245Z ItemsInQuery
2024-03-04T19:17:10.6836829Z   items_in
2024-03-04T19:17:11.0392900Z     does not count transfers going in the negative direction
2024-03-04T19:17:11.3697044Z     does not count negative adjustments towards in-flow
2024-03-04T19:17:11.6451471Z     returns a collection with the fields name, item_id, quantity
2024-03-04T19:17:11.9142668Z     includes donations, purchases, adjustments, transfers among sources
2024-03-04T19:17:11.9143510Z 
2024-03-04T19:17:11.9143826Z RequestsTotalItemsService
2024-03-04T19:17:11.9144408Z   #calculate
2024-03-04T19:17:11.9145344Z     when the request items is not blank
2024-03-04T19:17:11.9301609Z       return the names of items correctly
2024-03-04T19:17:11.9441113Z       return items with correct quantities calculated
2024-03-04T19:17:11.9442140Z     when provided with requests that have no request items
2024-03-04T19:17:11.9525091Z       is expected to be blank
2024-03-04T19:17:11.9525799Z     when item name is nil
2024-03-04T19:17:11.9648805Z       return Unknown Item
2024-03-04T19:17:11.9649553Z     when provided requests is nil
2024-03-04T19:17:11.9684459Z       is expected to be blank
2024-03-04T19:17:11.9685616Z 
2024-03-04T19:17:11.9685958Z View::Inventory
2024-03-04T19:17:11.9687623Z   #all_items
2024-03-04T19:17:12.0624142Z     should return all items across storage locations
2024-03-04T19:17:12.0625120Z   #total_value_in_dollars
2024-03-04T19:17:12.1543587Z     should return total value across the given location
2024-03-04T19:17:12.1544876Z   #quantity_for
2024-03-04T19:17:12.1545501Z     with storage location but no item id
2024-03-04T19:17:12.2430540Z       should return all items at that location
2024-03-04T19:17:12.2431589Z     with item id
2024-03-04T19:17:12.2431983Z       with no storage location
2024-03-04T19:17:12.3313734Z         should return quantities across all storage locations
2024-03-04T19:17:12.3314973Z       with storage location
2024-03-04T19:17:12.4217275Z         should return the quantity at that location
2024-03-04T19:17:12.4218257Z   #storage_locations_for_item
2024-03-04T19:17:12.5113944Z     should return all relevant IDs
2024-03-04T19:17:12.5114875Z   #storage_location_name
2024-03-04T19:17:12.6008999Z     should return the right name
2024-03-04T19:17:12.6009647Z   .total_inventory
2024-03-04T19:17:12.6899573Z     should return the total quantity
2024-03-04T19:17:12.6900399Z   #items_for_location
2024-03-04T19:17:12.7796615Z     should return the right values
2024-03-04T19:17:12.7797753Z     with include_omitted_items
2024-03-04T19:17:12.8702559Z       should add items not in the storage location
2024-03-04T19:17:12.8703646Z   .items_for_location
2024-03-04T19:17:12.9603095Z     should return the right values
2024-03-04T19:17:12.9603859Z     with include_omitted_items
2024-03-04T19:17:13.0990854Z       should add items not in the storage location
2024-03-04T19:17:13.0991638Z 
2024-03-04T19:17:13.0991931Z PartnerApprovalService
2024-03-04T19:17:13.0992630Z   #call
2024-03-04T19:17:13.0994072Z     when the arguments are incorrect
2024-03-04T19:17:13.1006516Z       because the partner is not approvable
2024-03-04T19:17:13.1594095Z         should return the PartnerApprovalService object with an error
2024-03-04T19:17:13.1595125Z     when the arguments are correct
2024-03-04T19:17:13.2237019Z       should send an email notification to the partner
2024-03-04T19:17:13.2755647Z       should change the partner status to approved
2024-03-04T19:17:13.3548751Z       should have no errors
2024-03-04T19:17:13.3550012Z       but a unexpected error occured during the save
2024-03-04T19:17:13.3550856Z         for partner approval
2024-03-04T19:17:13.3836295Z           should have an error with the raised error
2024-03-04T19:17:13.4116046Z           should not send an email notification to the partner
2024-03-04T19:17:13.4395482Z           should not change the partner status to approved
2024-03-04T19:17:13.4396423Z 
2024-03-04T19:17:13.4397172Z Reports::AdultIncontinenceReportService
2024-03-04T19:17:13.4398000Z   #report
2024-03-04T19:17:13.6251039Z     should report zero values
2024-03-04T19:17:13.6252082Z     with values
2024-03-04T19:17:14.2526009Z       should report normal values
2024-03-04T19:17:14.9042077Z       should handle null distribution quantity
2024-03-04T19:17:14.9043106Z 
2024-03-04T19:17:14.9043444Z Reports::WarehouseReportService
2024-03-04T19:17:14.9051824Z   #report
2024-03-04T19:17:15.3099084Z     should print normal values
2024-03-04T19:17:15.5513211Z     should print zero values
2024-03-04T19:17:15.9539035Z     should print unknown warehouse type
2024-03-04T19:17:16.1451312Z     should print unknown square footage
2024-03-04T19:17:16.1451990Z 
2024-03-04T19:17:16.1452287Z AdjustmentCreateService
2024-03-04T19:17:16.1452907Z   call
2024-03-04T19:17:16.2372931Z     increases stored inventory on a positive adjustment
2024-03-04T19:17:16.3238405Z     handles adjustments to multiple items
2024-03-04T19:17:16.3896677Z     does not allow inventory to be adjusted below 0
2024-03-04T19:17:16.4857573Z     decreases stored inventory on a negative adjustment
2024-03-04T19:17:16.5810374Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-04T19:17:16.6739925Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-04T19:17:16.7298308Z     gives an error if we attempt to adjust inventory below 0
2024-03-04T19:17:16.8202809Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-04T19:17:16.9033288Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-04T19:17:16.9034345Z 
2024-03-04T19:17:16.9034597Z Reports::OtherProductsReportService
2024-03-04T19:17:16.9035329Z   #report
2024-03-04T19:17:17.0926884Z     should report zero values
2024-03-04T19:17:17.7280109Z     should report normal values
2024-03-04T19:17:17.7280730Z 
2024-03-04T19:17:17.7280933Z RequestMailer
2024-03-04T19:17:17.7281923Z   #request_cancel_partner_notification
2024-03-04T19:17:17.7464593Z     renders the body with correct text with partner information
2024-03-04T19:17:17.7602532Z     should be sent to the partner main email with the correct subject line
2024-03-04T19:17:17.7605952Z 
2024-03-04T19:17:17.7606274Z BarcodeItem
2024-03-04T19:17:17.7607540Z   Organization barcodes
2024-03-04T19:17:17.7800123Z     updates a counter in Item whenever it tracks a new barcode
2024-03-04T19:17:17.7801564Z     when searching for a barcode where there is a global and local with the same value
2024-03-04T19:17:17.8119418Z       favors the local barcode
2024-03-04T19:17:17.8120234Z     validations >
2024-03-04T19:17:17.8256141Z       does not enforce value uniqueness compared with the global scope
2024-03-04T19:17:17.8427039Z       enforces value uniqueness within the organization
2024-03-04T19:17:17.8675348Z       does not enforces value uniqueness across organizations
2024-03-04T19:17:17.8834461Z       is valid only with an organization
2024-03-04T19:17:17.8957961Z       allows multiple barcodes to point at the same item
2024-03-04T19:17:17.8958815Z       value >
2024-03-04T19:17:17.9051091Z         requires a value
2024-03-04T19:17:17.9245768Z       item >
2024-03-04T19:17:17.9246452Z         is invalid without an item associated with it
2024-03-04T19:17:17.9247087Z       quantity >
2024-03-04T19:17:17.9275470Z         is not a negative number
2024-03-04T19:17:17.9380766Z         is an integer
2024-03-04T19:17:17.9472934Z         is not nil
2024-03-04T19:17:17.9473662Z     to_h >
2024-03-04T19:17:17.9597891Z       emits a hash for a line_item
2024-03-04T19:17:17.9598475Z     filters >
2024-03-04T19:17:17.9797081Z       ->item_id shows only barcodes for a specific item_id
2024-03-04T19:17:17.9797782Z     scopes >
2024-03-04T19:17:18.1724652Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-04T19:17:18.1949136Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-04T19:17:18.2068210Z       ->by_value returns the barcode with that value
2024-03-04T19:17:18.2068997Z   Barcodes of BaseItems ('Global')
2024-03-04T19:17:18.2162082Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-04T19:17:18.2162866Z     scopes >
2024-03-04T19:17:18.2163662Z       global
2024-03-04T19:17:18.2330628Z         includes all barcodes, for both base items and regular items
2024-03-04T19:17:18.2332838Z     filters >
2024-03-04T19:17:18.2492916Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-04T19:17:18.2644396Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-04T19:17:18.2760744Z       ->by_value returns the barcode with that value
2024-03-04T19:17:18.2761496Z     validations >
2024-03-04T19:17:18.2843691Z       allows multiple barcodes to point at the same base item
2024-03-04T19:17:18.2933250Z       enforces uniqueness in the global scope
2024-03-04T19:17:18.3009643Z       is valid with or without an organization
2024-03-04T19:17:18.3010311Z       quantity >
2024-03-04T19:17:18.3063507Z         is an integer
2024-03-04T19:17:18.3116427Z         is not a negative number
2024-03-04T19:17:18.3167449Z         is not nil
2024-03-04T19:17:18.3168282Z       item >
2024-03-04T19:17:18.3220233Z         is invalid without an item associated with it
2024-03-04T19:17:18.3220948Z       value >
2024-03-04T19:17:18.3273900Z         requires a value
2024-03-04T19:17:18.3274657Z   versioning
2024-03-04T19:17:18.3311073Z     is expected to be versioned
2024-03-04T19:17:18.3311715Z 
2024-03-04T19:17:18.3312020Z BroadcastAnnouncement
2024-03-04T19:17:18.3410212Z   is expected to belong to organization optional: true
2024-03-04T19:17:18.3470673Z   should validate a valid announcement
2024-03-04T19:17:18.3524387Z   should validate a good link
2024-03-04T19:17:18.3577320Z   should roughly check if link is valid
2024-03-04T19:17:18.3629791Z   is expected to validate that :message cannot be empty/falsy
2024-03-04T19:17:18.3669251Z   is expected to belong to user required: true
2024-03-04T19:17:18.3669877Z   expired?
2024-03-04T19:17:18.3725143Z     should be true if the announcement is expired
2024-03-04T19:17:18.3778013Z     should be false if the announcement has not expired
2024-03-04T19:17:18.3778825Z   filter_announcements
2024-03-04T19:17:18.3911740Z     should include only announcements from the passed organization
2024-03-04T19:17:18.4057662Z     sorts announcements from most recently created to last
2024-03-04T19:17:18.4180794Z     shouldn't include expired announcements
2024-03-04T19:17:18.4181455Z   versioning
2024-03-04T19:17:18.4215468Z     is expected to be versioned
2024-03-04T19:17:18.4216707Z 
2024-03-04T19:17:18.4216992Z OrganizationStats
2024-03-04T19:17:18.4218750Z   locations_with_inventory method >
2024-03-04T19:17:18.4219783Z     current org is not nil + locations have items >
2024-03-04T19:17:18.4570559Z       should return storage location
2024-03-04T19:17:18.4571367Z     current org is not nil + no locations have items >
2024-03-04T19:17:18.4636586Z       should return an empty array
2024-03-04T19:17:18.4637185Z     current org is nil >
2024-03-04T19:17:18.4671967Z       should return an empty array
2024-03-04T19:17:18.4672644Z   storage_locations_added method >
2024-03-04T19:17:18.4673436Z     current org is not nil >
2024-03-04T19:17:18.4707458Z       should return actual count of locations
2024-03-04T19:17:18.4708170Z     current org is nil >
2024-03-04T19:17:18.4741411Z       should return 0
2024-03-04T19:17:18.4741941Z   partners_added method >
2024-03-04T19:17:18.4742788Z     current org is nil >
2024-03-04T19:17:18.4775052Z       should return 0
2024-03-04T19:17:18.4775731Z     current org is not nil >
2024-03-04T19:17:18.4809373Z       should return actual count of partners
2024-03-04T19:17:18.4810031Z   donation_sites_added method >
2024-03-04T19:17:18.4810714Z     current org is nil >
2024-03-04T19:17:18.4844452Z       should return 0
2024-03-04T19:17:18.4844948Z     current org is not nil >
2024-03-04T19:17:18.4879790Z       should return actual count of donation sites
2024-03-04T19:17:18.4880704Z 
2024-03-04T19:17:18.4880974Z Partners::FamilyRequestCreateService
2024-03-04T19:17:18.4881804Z   #call
2024-03-04T19:17:18.4882949Z     when the arguments are correct
2024-03-04T19:17:18.4883717Z       with children
2024-03-04T19:17:18.6025359Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-04T19:17:18.6026249Z       without children
2024-03-04T19:17:18.6333555Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-04T19:17:18.6334970Z     when the arguments are incorrect
2024-03-04T19:17:18.6335960Z       because no family_requests_attributes were defined
2024-03-04T19:17:18.6583161Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-04T19:17:18.6584204Z       because a unrecognized item_id was provided
2024-03-04T19:17:18.6835187Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-04T19:17:18.6835934Z 
2024-03-04T19:17:18.6836376Z AccountRequestsController
2024-03-04T19:17:18.6837158Z   routing
2024-03-04T19:17:18.6881618Z     routes to #create
2024-03-04T19:17:18.6915593Z     routes to #new
2024-03-04T19:17:18.6916248Z 
2024-03-04T19:17:18.6916474Z UiHelper
2024-03-04T19:17:18.6918541Z   optional_data_text
2024-03-04T19:17:18.6919564Z     when the field provided is blank
2024-03-04T19:17:18.6969531Z       should return the text Not-Provided in gray text
2024-03-04T19:17:18.6970010Z     when the field provided is not blank
2024-03-04T19:17:18.7020073Z       should return the content
2024-03-04T19:17:18.7021551Z 
2024-03-04T19:17:18.7021724Z ProductDriveParticipant
2024-03-04T19:17:18.7023094Z   Validations
2024-03-04T19:17:18.7087698Z     is invalid without an organization
2024-03-04T19:17:18.7151515Z     is invalid unless it has either a phone number or an email
2024-03-04T19:17:18.7152332Z   behaves like provideable
2024-03-04T19:17:18.7152888Z     geocode
2024-03-04T19:17:18.7220576Z       adds coordinates to the database
2024-03-04T19:17:18.7221242Z     Validations
2024-03-04T19:17:18.7259434Z       is invalid without an organization
2024-03-04T19:17:18.7323429Z       is invalid unless it has either a contact name or a business name
2024-03-04T19:17:18.7324293Z     import_csv
2024-03-04T19:17:18.9207690Z       imports from a csv file
2024-03-04T19:17:18.9208123Z   Methods
2024-03-04T19:17:18.9208923Z     donation_source_view
2024-03-04T19:17:18.9209825Z       contact name present
2024-03-04T19:17:18.9271329Z         is expected to eq "Contact Name (participant)"
2024-03-04T19:17:18.9271822Z       no contact name
2024-03-04T19:17:18.9328954Z         is expected to be nil
2024-03-04T19:17:18.9329668Z     volume
2024-03-04T19:17:19.0076955Z       retrieves the amount of product that has been donated by participant
2024-03-04T19:17:19.0077595Z     volume_by_product_drive
2024-03-04T19:17:19.1546860Z       retrieves the amount of product that has been donated through specific product drive
2024-03-04T19:17:19.1547512Z   versioning
2024-03-04T19:17:19.1586900Z     is expected to be versioned
2024-03-04T19:17:19.1587846Z 
2024-03-04T19:17:19.1588042Z TransferDestroyService
2024-03-04T19:17:19.1589209Z   #call
2024-03-04T19:17:19.1590441Z     when there are no issues
2024-03-04T19:17:19.3544490Z       should return an OpenStruct with success? set to true
2024-03-04T19:17:19.5506366Z       should execute the expected methods
2024-03-04T19:17:19.5506922Z     because transfer should not be deleted
2024-03-04T19:17:19.7309846Z       should return an OpenStruct with the raised error
2024-03-04T19:17:19.7310380Z     when an issue occurs in transaction
2024-03-04T19:17:19.7311340Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-04T19:17:19.9237919Z         should return a OpenStruct with the raised error
2024-03-04T19:17:19.9238746Z       because the transfer destroy raised an error
2024-03-04T19:17:20.1213979Z         should return a OpenStruct with the raised error
2024-03-04T19:17:20.1214677Z       because the transfer_id does not match any Transfer
2024-03-04T19:17:20.3068832Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-04T19:17:20.3070223Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-04T19:17:20.4918542Z         should return a OpenStruct with the raised error
2024-03-04T19:17:20.4919180Z 
2024-03-04T19:17:20.4919355Z ItemCategory
2024-03-04T19:17:20.4920921Z   validations
2024-03-04T19:17:20.5024032Z     is expected to validate that :organization cannot be empty/falsy
2024-03-04T19:17:20.5128519Z     is expected to validate that :name cannot be empty/falsy
2024-03-04T19:17:20.5207432Z     is expected to validate that the length of :description is at most 250
2024-03-04T19:17:20.5428723Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-04T19:17:20.5429551Z   assocations
2024-03-04T19:17:20.5521417Z     is expected to have and belong to many partner_groups
2024-03-04T19:17:20.5557452Z     is expected to have many items
2024-03-04T19:17:20.5605229Z     is expected to belong to organization required: true
2024-03-04T19:17:20.5605838Z   versioning
2024-03-04T19:17:20.5639631Z     is expected to be versioned
2024-03-04T19:17:20.5640554Z 
2024-03-04T19:17:20.5640760Z Partners::Family
2024-03-04T19:17:20.5642509Z   #search_non_archived
2024-03-04T19:17:20.6576280Z     should return all families if one is passed in
2024-03-04T19:17:20.7503789Z     should return non-archived families if zero is passed in
2024-03-04T19:17:20.7504579Z   #total_children_count
2024-03-04T19:17:20.7564182Z     should return the family's total children count
2024-03-04T19:17:20.7564869Z   #create_authorized
2024-03-04T19:17:20.7857568Z     should include authorized family members
2024-03-04T19:17:20.7858269Z   versioning
2024-03-04T19:17:20.7899468Z     is expected to be versioned
2024-03-04T19:17:20.7900071Z   #guardian_display_name
2024-03-04T19:17:20.7951800Z     should return the guardian's first and last name
2024-03-04T19:17:20.7952510Z   associations
2024-03-04T19:17:20.7990702Z     is expected to have many children dependent => destroy
2024-03-04T19:17:20.8029298Z     is expected to have many authorized_family_members dependent => destroy
2024-03-04T19:17:20.8070159Z     is expected to belong to partner required: true
2024-03-04T19:17:20.8070868Z   validations
2024-03-04T19:17:20.8156207Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-04T19:17:20.8232491Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-04T19:17:20.8309169Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-04T19:17:20.8309907Z 
2024-03-04T19:17:20.8310071Z KitAllocation
2024-03-04T19:17:20.8313565Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-04T19:17:20.8315022Z   versioning
2024-03-04T19:17:20.8348620Z     is expected to be versioned
2024-03-04T19:17:20.8349571Z 
2024-03-04T19:17:20.8349789Z Transfer
2024-03-04T19:17:20.8351528Z   versioning
2024-03-04T19:17:20.8386263Z     is expected to be versioned
2024-03-04T19:17:20.8386838Z   Validations >
2024-03-04T19:17:20.8513870Z     must have different storage locations
2024-03-04T19:17:20.8597052Z     must belong to an organization
2024-03-04T19:17:20.9235370Z     requires that the line items must have sufficient quantity in the inventory
2024-03-04T19:17:21.1121420Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-04T19:17:21.1248012Z     must have storage locations set
2024-03-04T19:17:21.1509955Z     requires that each line item exists in the inventory
2024-03-04T19:17:21.1510715Z   behaves like itemizable
2024-03-04T19:17:21.1511515Z     .to_a
2024-03-04T19:17:21.1512599Z       with Flipper flag :deprecate_to_a enabled
2024-03-04T19:17:21.1896645Z         raises an error
2024-03-04T19:17:21.1897327Z       with Flipper flag :deprecate_to_a disabled
2024-03-04T19:17:21.2285190Z         calls line_item_values
2024-03-04T19:17:21.2285849Z     .line_items
2024-03-04T19:17:21.2286938Z       sorted
2024-03-04T19:17:21.3029759Z         displays the items, sorted by name
2024-03-04T19:17:21.3030434Z       combine!
2024-03-04T19:17:21.3323934Z         incrementally combines line_items on donations that have already been created
2024-03-04T19:17:21.3811251Z         combines multiple line_items with the same item_id into a single record
2024-03-04T19:17:21.3812115Z       total
2024-03-04T19:17:21.4312016Z         has an item total
2024-03-04T19:17:21.4312545Z       quantities_by_name
2024-03-04T19:17:21.4826006Z         returns a hash of items with id, name, and quantity
2024-03-04T19:17:21.5367484Z         leaves out zero-quantitied items if requested
2024-03-04T19:17:21.5368302Z   Methods >
2024-03-04T19:17:21.7398021Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-04T19:17:21.7398722Z   Scopes >
2024-03-04T19:17:21.7625069Z     `from_location` can filter out transfers from a specific location
2024-03-04T19:17:21.7856222Z     `to_location` can filter out transfers to a specific location
2024-03-04T19:17:21.7856839Z 
2024-03-04T19:17:21.7857021Z CalendarService
2024-03-04T19:17:22.2380117Z   #time_zones
2024-03-04T19:17:22.2380482Z   .calendar
2024-03-04T19:17:22.2992574Z     should print the calendar correctly
2024-03-04T19:17:22.2993112Z 
2024-03-04T19:17:22.2993272Z RemoveRoleService
2024-03-04T19:17:22.2994249Z   #call
2024-03-04T19:17:22.2995649Z     when not enough information provided
2024-03-04T19:17:22.4959480Z       should raise an error
2024-03-04T19:17:22.4960060Z     when the role exists
2024-03-04T19:17:22.6955468Z       should work with a type and ID instead of role ID
2024-03-04T19:17:22.9019312Z       should remove the admin role when removing user role
2024-03-04T19:17:23.1002190Z       should remove the role
2024-03-04T19:17:23.1002823Z     when the role does not exist
2024-03-04T19:17:23.2911747Z       should raise an error
2024-03-04T19:17:23.2912384Z 
2024-03-04T19:17:23.2912582Z AccountRequestMailer
2024-03-04T19:17:23.2914321Z   #approval_request
2024-03-04T19:17:23.3169332Z     should include the admin link to create the new organization from the account request
2024-03-04T19:17:23.3457206Z     should include details of the account request
2024-03-04T19:17:23.3596000Z     should have the correct subject
2024-03-04T19:17:23.3723697Z     should include the admin link to reject the organization
2024-03-04T19:17:23.3840710Z     should be sent to the info@humanessentials.app email address
2024-03-04T19:17:23.3841976Z     when the account_request_id provided does not match any AccountRequest
2024-03-04T19:17:23.3887894Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-04T19:17:23.3888646Z   #confirmation
2024-03-04T19:17:23.4005940Z     should be sent to the specified account_request email
2024-03-04T19:17:23.4115107Z     should have the correct subject
2024-03-04T19:17:23.4221089Z     should be from no-reply@humanessentials.app
2024-03-04T19:17:23.4222113Z     when the account_request_id provided does not match any AccountRequest
2024-03-04T19:17:23.4265853Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-04T19:17:23.4266613Z     HTML format
2024-03-04T19:17:23.4383071Z       should include the button to confirm the request
2024-03-04T19:17:23.4502199Z       should include the instruction video link
2024-03-04T19:17:23.4617123Z       should include the staging/demo account information
2024-03-04T19:17:23.4617854Z     Text format
2024-03-04T19:17:23.4787764Z       should include the instruction video link
2024-03-04T19:17:23.4919167Z       should include the staging/demo account information
2024-03-04T19:17:23.5047673Z       should include the button to confirm the request
2024-03-04T19:17:23.5050990Z   #rejection
2024-03-04T19:17:23.5182537Z     should include the rejection reason
2024-03-04T19:17:23.5297283Z     should have the correct subject
2024-03-04T19:17:23.5416295Z     should be sent to the correct email address
2024-03-04T19:17:23.5417295Z     when the account_request_id provided does not match any AccountRequest
2024-03-04T19:17:23.5467599Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-04T19:17:23.5468519Z 
2024-03-04T19:17:23.5469109Z UsersRole
2024-03-04T19:17:23.5469966Z   versioning
2024-03-04T19:17:23.5509165Z     is expected to be versioned
2024-03-04T19:17:23.5509733Z   #current_role_for
2024-03-04T19:17:23.5510482Z     for super admin
2024-03-04T19:17:23.5680639Z       should return super admin
2024-03-04T19:17:23.5681202Z     for org admin
2024-03-04T19:17:23.5882911Z       should return org admin
2024-03-04T19:17:23.5883468Z     for partner user
2024-03-04T19:17:23.6013627Z       should return partner user
2024-03-04T19:17:23.6014198Z     for org user
2024-03-04T19:17:23.6143429Z       should return org user
2024-03-04T19:17:23.6527688Z W, [2024-03-04T11:17:23.652452 #2308]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T19:17:23.6529606Z W, [2024-03-04T11:17:23.652532 #2308]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:23.6531368Z W, [2024-03-04T11:17:23.652825 #2308]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:23.6533465Z W, [2024-03-04T11:17:23.652881 #2308]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T19:17:23.6534555Z 
2024-03-04T19:17:23.6535304Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-04T19:17:23.6536449Z 
2024-03-04T19:17:23.6537749Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-04T19:17:23.6539386Z      # Temporarily skipped with xit
2024-03-04T19:17:23.6540164Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-04T19:17:23.6540796Z 
2024-03-04T19:17:23.6541967Z   2) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-04T19:17:23.6543401Z      # Not yet implemented
2024-03-04T19:17:23.6543979Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-04T19:17:23.6544457Z 
2024-03-04T19:17:23.6544781Z Finished in 38.63 seconds (files took 8.55 seconds to load)
2024-03-04T19:17:23.6545522Z 508 examples, 0 failures, 2 pending
2024-03-04T19:17:23.6545902Z 
2024-03-04T19:17:23.6546083Z Randomized with seed 11924
2024-03-04T19:17:23.6546402Z 
2024-03-04T19:17:24.1685584Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3775 / 6475 LOC (58.3%) covered.
2024-03-04T19:17:24.6164214Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
