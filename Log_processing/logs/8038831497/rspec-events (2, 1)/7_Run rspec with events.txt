2024-02-25T15:03:45.1773225Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-25T15:03:45.1774130Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-25T15:03:45.1802342Z shell: /usr/bin/bash -e {0}
2024-02-25T15:03:45.1802870Z env:
2024-02-25T15:03:45.1803164Z   POSTGRES_HOST: localhost
2024-02-25T15:03:45.1803557Z   DATABASE_HOST: localhost
2024-02-25T15:03:45.1804034Z   PG_USERNAME: postgres
2024-02-25T15:03:45.1804405Z   PG_PASSWORD: password
2024-02-25T15:03:45.1804785Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-25T15:03:45.1805271Z   POSTGRES_PORT: 5432
2024-02-25T15:03:45.1805623Z   PGHOST: localhost
2024-02-25T15:03:45.1805928Z   PGUSER: postgres
2024-02-25T15:03:45.1806355Z   RAILS_ENV: test
2024-02-25T15:03:45.1806945Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-02-25T15:03:45.1807509Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-25T15:03:45.1807919Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-02-25T15:03:45.1808367Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-25T15:03:45.1808995Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-25T15:03:45.1809677Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-25T15:03:45.1810683Z   EVENTS_READ: true
2024-02-25T15:03:45.1811039Z ##[endgroup]
2024-02-25T15:03:54.9969858Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/partner_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/item_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/transfer_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/line_item_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/inventory_item_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/county_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/routing/account_requests_routing_spec.rb"
2024-02-25T15:04:03.6198420Z 
2024-02-25T15:04:03.6199378Z Randomized with seed 13445
2024-02-25T15:04:04.4393905Z 
2024-02-25T15:04:04.4394764Z Partners::RequestCreateService
2024-02-25T15:04:04.4395621Z   #call
2024-02-25T15:04:04.4396973Z     when the arguments are incorrect
2024-02-25T15:04:04.4397839Z       because a unrecogonized item_id was provided
2024-02-25T15:04:04.5025673Z         should return the Request object with an error
2024-02-25T15:04:04.5026646Z       because no item_requests_attributes and comments were defined
2024-02-25T15:04:04.5300931Z         should return the Request object with an error
2024-02-25T15:04:04.5301773Z     when the arguments are correct
2024-02-25T15:04:04.5690206Z       should have no errors
2024-02-25T15:04:04.6082593Z       should notify the Partner via email
2024-02-25T15:04:04.6469831Z       should create a Request record
2024-02-25T15:04:04.6470662Z       but a unexpected error occured during the save
2024-02-25T15:04:04.6471786Z         for the Request record
2024-02-25T15:04:04.6815898Z           should NOT create a Request record
2024-02-25T15:04:04.7159812Z           should NOT notify the Partner via email
2024-02-25T15:04:04.7513527Z           should have an error with the raised error
2024-02-25T15:04:04.7514600Z 
2024-02-25T15:04:04.7514873Z TransfersController
2024-02-25T15:04:04.7515928Z   While not signed in
2024-02-25T15:04:04.7824594Z     redirects the user to the sign-in page for CRUD actions
2024-02-25T15:04:04.7825455Z   While signed in
2024-02-25T15:04:04.7826192Z     Looking at a different organization
2024-02-25T15:04:04.9588421Z       redirects the user to the sign-in page for CRUD actions
2024-02-25T15:04:04.9589204Z     GET #index
2024-02-25T15:04:04.9795252Z       returns http success
2024-02-25T15:04:04.9795891Z       when filtering by date
2024-02-25T15:04:04.9796673Z         when date parameters are supplied
2024-02-25T15:04:05.0194080Z           only returns the correct obejects
2024-02-25T15:04:05.0195042Z         when date parameters are not supplied
2024-02-25T15:04:05.0555969Z           returns all objects
2024-02-25T15:04:05.0556626Z     GET #new
2024-02-25T15:04:05.0694701Z       returns http success
2024-02-25T15:04:05.0695502Z     POST #create
2024-02-25T15:04:05.1419360Z       redirects to #show when successful
2024-02-25T15:04:05.1566155Z       renders to #new when failing
2024-02-25T15:04:05.1566914Z     GET #show
2024-02-25T15:04:05.1808704Z       returns http success
2024-02-25T15:04:05.1809708Z 
2024-02-25T15:04:05.1810044Z ApplicationController
2024-02-25T15:04:05.1811416Z   dashboard_path_from_current_role
2024-02-25T15:04:05.1812295Z     As a super admin
2024-02-25T15:04:05.2024509Z       links to the admin dashboard
2024-02-25T15:04:05.2025560Z     As a user without super admin status
2024-02-25T15:04:05.2221287Z       links to the general dashboard
2024-02-25T15:04:05.2222053Z   current_organization
2024-02-25T15:04:05.2226030Z     As a partner user
2024-02-25T15:04:05.2383791Z       should return nil
2024-02-25T15:04:05.2384687Z     As an org user
2024-02-25T15:04:05.6329011Z       should return the first org role
2024-02-25T15:04:05.6330141Z       with a changed current role
2024-02-25T15:04:05.9945480Z         should return the first org role
2024-02-25T15:04:05.9946640Z   current_partner
2024-02-25T15:04:05.9947615Z     As an org user
2024-02-25T15:04:06.0086982Z       should return nil
2024-02-25T15:04:06.0087587Z     As a partner user
2024-02-25T15:04:06.0616052Z       should return the first partner role
2024-02-25T15:04:06.0617036Z       with a changed current role
2024-02-25T15:04:06.1159541Z         should return the first partner role
2024-02-25T15:04:06.1161014Z 
2024-02-25T15:04:06.1161242Z Purchase
2024-02-25T15:04:06.1163103Z   Methods >
2024-02-25T15:04:06.1163642Z     remove
2024-02-25T15:04:06.2219267Z       fails gracefully if the item doesn't exist
2024-02-25T15:04:06.2902156Z       removes the item from the purchase
2024-02-25T15:04:06.2902885Z     storage_view
2024-02-25T15:04:06.3534117Z       returns name of storage location
2024-02-25T15:04:06.3534894Z   Scopes >
2024-02-25T15:04:06.3535379Z     during >
2024-02-25T15:04:06.3769900Z       returns all purchases created between two dates
2024-02-25T15:04:06.3770724Z   versioning
2024-02-25T15:04:06.3806165Z     is expected to be versioned
2024-02-25T15:04:06.3806899Z   Validations >
2024-02-25T15:04:06.3880592Z     must belong to an organization
2024-02-25T15:04:06.3952549Z     requires an inventory (storage location)
2024-02-25T15:04:06.4032414Z     is valid if all categories add up to total
2024-02-25T15:04:06.4112721Z     ensures that the issued at is no earlier than 2000
2024-02-25T15:04:06.4362750Z     is invalid when the line items are invalid
2024-02-25T15:04:06.4528251Z     is not valid if any category is non-zero but does not add up to the total
2024-02-25T15:04:06.4609069Z     is not valid if categories do not add up
2024-02-25T15:04:06.4690308Z     is not valid if period supplies is non-zero but no other category is
2024-02-25T15:04:06.4768351Z     is valid if categories have no values
2024-02-25T15:04:06.4769200Z   Associations >
2024-02-25T15:04:06.4769863Z     items >
2024-02-25T15:04:06.4955243Z       has_many
2024-02-25T15:04:06.4956152Z   behaves like itemizable
2024-02-25T15:04:06.4957094Z     .to_a
2024-02-25T15:04:06.4958254Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:04:06.5307675Z         calls line_item_values
2024-02-25T15:04:06.5308502Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:04:06.5680354Z         raises an error
2024-02-25T15:04:06.5681365Z     .line_items
2024-02-25T15:04:06.5681926Z       total
2024-02-25T15:04:06.6082089Z         has an item total
2024-02-25T15:04:06.6082854Z       combine!
2024-02-25T15:04:06.6610946Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:04:06.7064988Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:04:06.7066087Z       quantities_by_name
2024-02-25T15:04:06.7470210Z         returns a hash of items with id, name, and quantity
2024-02-25T15:04:06.8031287Z         leaves out zero-quantitied items if requested
2024-02-25T15:04:06.8032148Z       sorted
2024-02-25T15:04:06.8659962Z         displays the items, sorted by name
2024-02-25T15:04:06.8661029Z   Callbacks >
2024-02-25T15:04:06.8872542Z     automatically combines duplicate line_item records when they're created
2024-02-25T15:04:06.9062858Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T15:04:06.9063905Z 
2024-02-25T15:04:06.9064120Z Event
2024-02-25T15:04:06.9064933Z   #most_recent_snapshot
2024-02-25T15:04:07.1588225Z     should include the last usable snapshot
2024-02-25T15:04:07.4024738Z     should not include an unusable snapshot
2024-02-25T15:04:07.4025441Z 
2024-02-25T15:04:07.4025675Z OrganizationUpdateService
2024-02-25T15:04:07.4026808Z   #update_partner_flags
2024-02-25T15:04:07.4027880Z     when request flags haven't changed
2024-02-25T15:04:07.6263600Z       should not update partners
2024-02-25T15:04:07.6264707Z     when request flags have changed
2024-02-25T15:04:07.8570795Z       should update partners when disabling child and individual request flags
2024-02-25T15:04:08.0705045Z       should NOT update partners' request flags when enabling request flags on the organization
2024-02-25T15:04:08.2951189Z       should update partners when disabling quantity-based request flags
2024-02-25T15:04:08.2952435Z   #update
2024-02-25T15:04:08.2953051Z     when organization has partners
2024-02-25T15:04:08.2954329Z       when all of a single partner's request flags will be disabled
2024-02-25T15:04:08.5170630Z         should add an error message to the organization
2024-02-25T15:04:08.7349915Z         should NOT change request flags in organization or its partners
2024-02-25T15:04:08.7351605Z       when all of a single partner's request flags WILL NOT be disabled
2024-02-25T15:04:08.9693936Z         should allow the disabling of request flags in organization and its partners
2024-02-25T15:04:08.9695253Z     when object is valid
2024-02-25T15:04:09.1536819Z       should update and return true
2024-02-25T15:04:09.1537891Z     when object is invalid
2024-02-25T15:04:09.3410818Z       should not update and return false
2024-02-25T15:04:09.3411848Z 
2024-02-25T15:04:09.3412465Z LineItem
2024-02-25T15:04:09.3414084Z   package_count
2024-02-25T15:04:09.3623837Z     is equal to the quanity divided by the package_size
2024-02-25T15:04:09.3822767Z     is nil if there is no package_size
2024-02-25T15:04:09.3824069Z   Methods >
2024-02-25T15:04:09.3824632Z     #value_per_line_item
2024-02-25T15:04:09.3825535Z       item has no value
2024-02-25T15:04:09.3965899Z         is expected to eq 0
2024-02-25T15:04:09.3966589Z       item has value and quantity
2024-02-25T15:04:09.4154188Z         is expected to eq 25
2024-02-25T15:04:09.4154997Z     item packages
2024-02-25T15:04:09.4155823Z       #has_packages
2024-02-25T15:04:09.4156684Z         item has no package size
2024-02-25T15:04:09.4302647Z           is expected to be falsy
2024-02-25T15:04:09.4303550Z         item has package size
2024-02-25T15:04:09.4494065Z           is expected to be truthy
2024-02-25T15:04:09.4495073Z       #package_count
2024-02-25T15:04:09.4495695Z         does not have packages
2024-02-25T15:04:09.4647159Z           is expected to be falsy
2024-02-25T15:04:09.4648087Z         has packages
2024-02-25T15:04:09.4844680Z           is expected to eq "1"
2024-02-25T15:04:09.4845412Z   versioning
2024-02-25T15:04:09.4887906Z     is expected to be versioned
2024-02-25T15:04:09.4888561Z   Validations >
2024-02-25T15:04:09.5803427Z     the quantity must be a valid integer and cannot be 0
2024-02-25T15:04:09.5902355Z     requires an item
2024-02-25T15:04:09.6039809Z     requires a quantity
2024-02-25T15:04:09.6040437Z   Scopes >
2024-02-25T15:04:09.6041434Z     ->active
2024-02-25T15:04:09.6356206Z       retrieves only those with active status
2024-02-25T15:04:09.6356857Z 
2024-02-25T15:04:09.6357223Z NDBNMember
2024-02-25T15:04:09.6358110Z   #full_name
2024-02-25T15:04:09.6422111Z     should equal the id and the account name
2024-02-25T15:04:09.6423870Z   versioning
2024-02-25T15:04:09.6458972Z     is expected to be versioned
2024-02-25T15:04:09.6459625Z   validations
2024-02-25T15:04:09.6533115Z     is expected to validate that :account_name cannot be empty/falsy
2024-02-25T15:04:09.6589100Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-02-25T15:04:09.6657520Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-02-25T15:04:09.6658314Z 
2024-02-25T15:04:09.6658524Z EventDiffer
2024-02-25T15:04:09.8671242Z   should return a full diff
2024-02-25T15:04:09.8671842Z 
2024-02-25T15:04:09.8672202Z ProductDrive
2024-02-25T15:04:10.0154046Z   calculates donation quantity
2024-02-25T15:04:10.2790708Z   calculates and returns all donated organization item quantities by name and date
2024-02-25T15:04:10.5252405Z   calculates donation quantity by date
2024-02-25T15:04:10.6694652Z   calculates in-kind value
2024-02-25T15:04:10.6695319Z   versioning
2024-02-25T15:04:10.8198232Z     is expected to be versioned
2024-02-25T15:04:10.8198839Z   associations
2024-02-25T15:04:10.9255690Z     has_many product_drive_participants through donations
2024-02-25T15:04:11.0191307Z     has_many donations
2024-02-25T15:04:11.0192083Z   scopes
2024-02-25T15:04:11.0192811Z     .by_name
2024-02-25T15:04:11.1897055Z       returns the product_drive with name some_name
2024-02-25T15:04:11.3390758Z       does not return other_name
2024-02-25T15:04:11.3391603Z     .within_date_range
2024-02-25T15:04:11.4992982Z       does not include product drive 2
2024-02-25T15:04:11.6443785Z       returns the product drive 1
2024-02-25T15:04:11.6444639Z   donation_source_view
2024-02-25T15:04:11.7845352Z     returns formatted text
2024-02-25T15:04:11.7846388Z   distinct_items
2024-02-25T15:04:11.9716688Z     counts the distinct items correctly in overlapping donations
2024-02-25T15:04:12.1490594Z     doesn't double_count the items if there are two donations for the same item
2024-02-25T15:04:12.3264413Z 908909910    counts the items correctly for 1 donation with multiple items
2024-02-25T15:04:12.5104640Z     counts the distince items correctly by given date
2024-02-25T15:04:12.5105530Z   .search_date_range
2024-02-25T15:04:12.6532390Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-02-25T15:04:12.6533384Z   validations
2024-02-25T15:04:12.8054833Z     is expected not to be valid
2024-02-25T15:04:12.9596003Z     is expected not to be valid
2024-02-25T15:04:13.1160422Z     is expected not to be valid
2024-02-25T15:04:13.1161472Z 
2024-02-25T15:04:13.1161910Z Partners::FamilyRequestCreateService
2024-02-25T15:04:13.1162563Z   #call
2024-02-25T15:04:13.1163964Z     when the arguments are correct
2024-02-25T15:04:13.1164567Z       with children
2024-02-25T15:04:13.2641201Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-02-25T15:04:13.2642351Z       without children
2024-02-25T15:04:13.2988932Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-02-25T15:04:13.2990101Z     when the arguments are incorrect
2024-02-25T15:04:13.2990670Z       because a unrecognized item_id was provided
2024-02-25T15:04:13.3274136Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-25T15:04:13.3275723Z       because no family_requests_attributes were defined
2024-02-25T15:04:13.3539588Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-25T15:04:13.3540666Z 
2024-02-25T15:04:13.3541050Z AccountRequestsController
2024-02-25T15:04:13.3541964Z   routing
2024-02-25T15:04:13.3587305Z     routes to #create
2024-02-25T15:04:13.3625376Z     routes to #new
2024-02-25T15:04:13.3626335Z 
2024-02-25T15:04:13.3626681Z DeadlineService
2024-02-25T15:04:13.3627807Z   #next_deadline
2024-02-25T15:04:13.3628831Z     from the organization
2024-02-25T15:04:13.3629816Z       when the deadline is before today
2024-02-25T15:04:13.3745057Z         returns a date in the next month
2024-02-25T15:04:13.3745920Z       when the deadline is after today
2024-02-25T15:04:13.3809210Z         returns a date within the current month
2024-02-25T15:04:13.3809855Z       when the deadline is today
2024-02-25T15:04:13.3868727Z         returns a date in the next month
2024-02-25T15:04:13.3869592Z     do from the partner group
2024-02-25T15:04:13.3870641Z       when the deadline is after today
2024-02-25T15:04:13.3927798Z         returns a date within the current month
2024-02-25T15:04:13.3928441Z       when the deadline is today
2024-02-25T15:04:13.3983682Z         returns a date in the next month
2024-02-25T15:04:13.3984657Z       when the deadline is before today
2024-02-25T15:04:13.4038412Z         returns a date in the next month
2024-02-25T15:04:13.4039521Z 
2024-02-25T15:04:13.4039790Z ProfileUpdateService
2024-02-25T15:04:13.4040761Z   #update
2024-02-25T15:04:13.4311137Z     updates the profile with the filtered and prepared params
2024-02-25T15:04:13.4312267Z 
2024-02-25T15:04:13.4312501Z PartnerMailerJob
2024-02-25T15:04:13.4313134Z   conditionally sending the emails
2024-02-25T15:04:13.7306008Z     sends mail for future distributions immediately
2024-02-25T15:04:13.9381049Z     does not send mail for past distributions
2024-02-25T15:04:13.9382380Z     when the distribution is for a deactivated partner
2024-02-25T15:04:14.1422255Z       does not send the email
2024-02-25T15:04:14.1424859Z 
2024-02-25T15:04:14.1425242Z HistoricalDataCacheJob
2024-02-25T15:04:14.3333955Z   caches the historical data
2024-02-25T15:04:14.5146281Z   queues the job
2024-02-25T15:04:14.5147007Z 
2024-02-25T15:04:14.5147246Z RequestDestroyService
2024-02-25T15:04:14.5147924Z   #call
2024-02-25T15:04:14.5290529Z     should return an instance of itself
2024-02-25T15:04:14.5291464Z     when the request's partner is deactivated
2024-02-25T15:04:14.5594784Z       should have errors
2024-02-25T15:04:14.5642075Z     when the request_id matches no request
2024-02-25T15:04:14.5643287Z       should not be successful and have errors indicating request id is invalid
2024-02-25T15:04:14.5644426Z     when there are no validation errors
2024-02-25T15:04:14.5798724Z       should update the discarded_at column on the request
2024-02-25T15:04:14.5938535Z       should update the status column on the request
2024-02-25T15:04:14.6067983Z       should send a email notification to the partner
2024-02-25T15:04:14.6069323Z     when the request is already discarded
2024-02-25T15:04:14.6180916Z       should not be successful and have errors
2024-02-25T15:04:14.6181772Z 
2024-02-25T15:04:14.6182103Z UserInviteService
2024-02-25T15:04:14.6183296Z   with existing user
2024-02-25T15:04:14.6281082Z     should raise an error when reinviting an existing user with the same role
2024-02-25T15:04:14.8217081Z     should add roles to existing user
2024-02-25T15:04:14.8217697Z     with force: true
2024-02-25T15:04:14.9208978Z       should reinvite the user
2024-02-25T15:04:14.9209534Z   with a new user
2024-02-25T15:04:15.1183201Z     should create the user with roles
2024-02-25T15:04:15.1184072Z 
2024-02-25T15:04:15.1184344Z InventoryItem
2024-02-25T15:04:15.1221816Z   initializes the quantity to 0 if it was not specified
2024-02-25T15:04:15.1222813Z   Validations >
2024-02-25T15:04:15.1272403Z     requires an inventory association
2024-02-25T15:04:15.1313484Z     requires an item
2024-02-25T15:04:15.1314245Z     quantity >
2024-02-25T15:04:15.1455088Z       is gte 0
2024-02-25T15:04:15.1510349Z       is numerical
2024-02-25T15:04:15.1563278Z       is less than the max integer
2024-02-25T15:04:15.1616152Z       is required
2024-02-25T15:04:15.1616909Z   versioning
2024-02-25T15:04:15.1651330Z     is expected to be versioned
2024-02-25T15:04:15.1652088Z   Filtering >
2024-02-25T15:04:15.1652951Z     ->by_partner_key
2024-02-25T15:04:15.1784069Z       shows the Base Items by partner_key
2024-02-25T15:04:15.1784653Z 
2024-02-25T15:04:15.1785006Z Exports::ExportDonationsCSVService
2024-02-25T15:04:15.1785838Z   #generate_csv_data
2024-02-25T15:04:15.2920027Z     should match the expected content for the csv
2024-02-25T15:04:15.2920735Z 
2024-02-25T15:04:15.2920947Z Deadlinable
2024-02-25T15:04:15.2922295Z   validations
2024-02-25T15:04:15.3004030Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-25T15:04:15.3048129Z     validates that reminder day is not the same as deadline day
2024-02-25T15:04:15.3118212Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-25T15:04:15.3119518Z 
2024-02-25T15:04:15.3119754Z Item
2024-02-25T15:04:15.3120842Z   Assocations >
2024-02-25T15:04:15.3169368Z     is expected to belong to item_category optional: true
2024-02-25T15:04:15.3170330Z   after update
2024-02-25T15:04:15.3171088Z     when item does not have kit
2024-02-25T15:04:15.3347605Z       does not raise any errors
2024-02-25T15:04:15.3348654Z     when item has the kit
2024-02-25T15:04:15.5538540Z       updates kit name
2024-02-25T15:04:15.5539344Z   Methods >
2024-02-25T15:04:15.5540840Z     other?
2024-02-25T15:04:15.5673512Z       is true for items that are partner_key 'other'
2024-02-25T15:04:15.5674308Z     destroy
2024-02-25T15:04:15.5882393Z       actually destroys an item that doesn't have history
2024-02-25T15:04:15.8031048Z       deactivates the kit if it exists
2024-02-25T15:04:15.8273677Z       only hides an item that has history
2024-02-25T15:04:15.8274334Z     storage_locations_containing
2024-02-25T15:04:15.8691266Z       retrieves all storage locations that contain an item
2024-02-25T15:04:15.8692501Z     barcoded_items >
2024-02-25T15:04:15.9119782Z       returns a collection of items that have barcodes associated with them
2024-02-25T15:04:15.9121161Z     barcodes_for
2024-02-25T15:04:15.9330267Z       retrieves all BarcodeItems associated with an item
2024-02-25T15:04:15.9331207Z     #reactivate!
2024-02-25T15:04:15.9332063Z       given an array of item ids
2024-02-25T15:04:15.9560664Z         sets the active trait to true for all of them
2024-02-25T15:04:15.9561240Z       given a single item id
2024-02-25T15:04:15.9697401Z         sets the active trait to true for that item
2024-02-25T15:04:15.9698094Z     has_history?
2024-02-25T15:04:16.0466699Z       identifies items that have been used previously
2024-02-25T15:04:16.0467694Z   Filtering >
2024-02-25T15:04:16.0709455Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-02-25T15:04:16.0925411Z     ->alphabetized retrieves items in alphabetical order
2024-02-25T15:04:16.1244077Z     ->active shows items that are still active
2024-02-25T15:04:16.1314024Z     can filter
2024-02-25T15:04:16.1314982Z     ->by_base_item
2024-02-25T15:04:16.3300720Z       can be chained to organization to constrain it to just 1 org's items
2024-02-25T15:04:16.3465510Z       shows the items for a particular base_item
2024-02-25T15:04:16.3466554Z     ->cloth_diapers
2024-02-25T15:04:16.3751889Z       returns records associated with disposable diapers
2024-02-25T15:04:16.3752974Z     ->disposable
2024-02-25T15:04:16.4029796Z       returns records associated with disposable diapers
2024-02-25T15:04:16.4031127Z     ->by_partner_key
2024-02-25T15:04:16.4190959Z       filters by partner key
2024-02-25T15:04:16.4191768Z   distribution_quantity and package size
2024-02-25T15:04:16.4324056Z     have nil values if an empty string is passed
2024-02-25T15:04:16.4324950Z   Validations >
2024-02-25T15:04:16.4461496Z     requires a unique name
2024-02-25T15:04:16.4575773Z     requires that items quantity are not a negative number
2024-02-25T15:04:16.4626436Z     requires a Base Item base
2024-02-25T15:04:16.4681243Z     must belong to an organization
2024-02-25T15:04:16.4682018Z   default_quantity
2024-02-25T15:04:16.4763917Z     should return 0 if on_hand_minimum_quantity is not set
2024-02-25T15:04:16.4844150Z     should return the value of distribution_quantity if it is set
2024-02-25T15:04:16.4922917Z     should return 50 if column is not set
2024-02-25T15:04:16.5003089Z     should return the value of on_hand_minimum_quantity if it is set
2024-02-25T15:04:16.5004317Z   versioning
2024-02-25T15:04:16.5039343Z     is expected to be versioned
2024-02-25T15:04:16.5039870Z 
2024-02-25T15:04:16.5040300Z Reports::ChildrenServedReportService
2024-02-25T15:04:16.5041159Z   #report
2024-02-25T15:04:16.6753265Z     should report zero values
2024-02-25T15:04:17.1693051Z     should work with no distribution_quantity
2024-02-25T15:04:17.6639507Z     should report normal values
2024-02-25T15:04:17.6642202Z 
2024-02-25T15:04:17.6642625Z DonationsController
2024-02-25T15:04:17.6644154Z   calculating total money raised for all donations
2024-02-25T15:04:17.6685522Z     returns zero for an empty array of donations
2024-02-25T15:04:17.6811129Z     correctly calculates the total
2024-02-25T15:04:17.6811980Z   calculating total value of multiple donations
2024-02-25T15:04:17.8127400Z     works correctly for multiple line items per donation
2024-02-25T15:04:17.8164997Z     returns zero for an empty array of donations
2024-02-25T15:04:17.8165816Z   While signed in as a normal user >
2024-02-25T15:04:17.8167081Z     GET #index
2024-02-25T15:04:17.8323698Z       returns http success
2024-02-25T15:04:17.8324215Z     GET #new
2024-02-25T15:04:17.8459446Z       returns http success
2024-02-25T15:04:17.8460708Z     GET #edit
2024-02-25T15:04:17.8663102Z       returns http success
2024-02-25T15:04:17.8663768Z     DELETE #destroy
2024-02-25T15:04:17.8819438Z       redirects to the dashboard path
2024-02-25T15:04:17.8820256Z     POST#create
2024-02-25T15:04:17.8991439Z       renders GET#new with error on failure
2024-02-25T15:04:17.9368943Z       redirects to GET#edit on success
2024-02-25T15:04:17.9369735Z     PUT#update
2024-02-25T15:04:18.0458823Z       updates storage quantity correctly
2024-02-25T15:04:18.0828763Z       redirects to index after update
2024-02-25T15:04:18.0829648Z       when removing a line item
2024-02-25T15:04:18.2038398Z         updates storage invetory item quantity correctly
2024-02-25T15:04:18.2039037Z       when changing storage location
2024-02-25T15:04:18.2092728Z         rolls back updates if quantity would go below 0
2024-02-25T15:04:18.3302526Z         updates storage quantity correctly
2024-02-25T15:04:18.3303580Z     GET #show
2024-02-25T15:04:18.3475618Z       returns http success
2024-02-25T15:04:18.3476695Z   While signed in as an organization admin >
2024-02-25T15:04:18.3477541Z     DELETE #destroy
2024-02-25T15:04:18.3814977Z       redirects to the index
2024-02-25T15:04:18.3816089Z 
2024-02-25T15:04:18.3816398Z RequestsTotalItemsService
2024-02-25T15:04:18.3817341Z   #calculate
2024-02-25T15:04:18.3818475Z     when the request items is not blank
2024-02-25T15:04:18.3964097Z       return items with correct quantities calculated
2024-02-25T15:04:18.4102599Z       return the names of items correctly
2024-02-25T15:04:18.4103482Z     when provided with requests that have no request items
2024-02-25T15:04:18.4184859Z       is expected to be blank
2024-02-25T15:04:18.4185540Z     when item name is nil
2024-02-25T15:04:18.4309445Z       return Unknown Item
2024-02-25T15:04:18.4310311Z     when provided requests is nil
2024-02-25T15:04:18.4343340Z       is expected to be blank
2024-02-25T15:04:18.4344106Z 
2024-02-25T15:04:18.4344347Z DistributionReminder
2024-02-25T15:04:18.4345186Z   conditionally sending the emails
2024-02-25T15:04:18.4673150Z     does not send mail for past distributions
2024-02-25T15:04:18.4980192Z     does not send mail for future distributions if the partner wants no reminders
2024-02-25T15:04:18.5267860Z     sends mail for future distributions
2024-02-25T15:04:18.5555980Z     sends mail for future distributions where the partner wants reminders
2024-02-25T15:04:18.5557009Z     when the partner is deactivated
2024-02-25T15:04:18.5854760Z       does not send mail
2024-02-25T15:04:18.5855508Z     when the distribution_id does not match any Distribution
2024-02-25T15:04:18.5900085Z       does not send mail for non existent distributions
2024-02-25T15:04:18.5901314Z 
2024-02-25T15:04:18.5901591Z Partners::Profile
2024-02-25T15:04:18.5937749Z   must allow deleting served_areas
2024-02-25T15:04:18.5938666Z   request settings validation for profile
2024-02-25T15:04:18.5939499Z     at least one request type is set to true
2024-02-25T15:04:18.6019978Z       should be valid when enable_individual_requests is true
2024-02-25T15:04:18.6098402Z       should be valid when enable_child_based_requests is true
2024-02-25T15:04:18.6181495Z       should be valid when enable_quantity_based_requests is true
2024-02-25T15:04:18.6182387Z     no settings are set to true
2024-02-25T15:04:18.6239033Z       should not be valid
2024-02-25T15:04:18.6239795Z   client share behaviour
2024-02-25T15:04:18.6240790Z     multiple
2024-02-25T15:04:18.6490240Z       sums the client shares
2024-02-25T15:04:18.6656371Z       is valid if client share sum is 100
2024-02-25T15:04:18.6657162Z     no served areas
2024-02-25T15:04:18.6713417Z       has 0 client share
2024-02-25T15:04:18.6714228Z   social media info validation for profile
2024-02-25T15:04:18.6715234Z     has social media presence and the checkbox is unchecked
2024-02-25T15:04:18.6795590Z       with just facebook it should be valid
2024-02-25T15:04:18.6870669Z       with every social media option it should be valid
2024-02-25T15:04:18.6946272Z       with just twitter it should be valid
2024-02-25T15:04:18.7021814Z       with just a website it should be valid
2024-02-25T15:04:18.7097418Z       with just instagram it should be valid
2024-02-25T15:04:18.7098408Z     no social media presence and the checkbox is checked
2024-02-25T15:04:18.7160828Z       should be valid
2024-02-25T15:04:18.7161775Z     no social media presence and the checkbox isn't checked
2024-02-25T15:04:18.7271643Z       should be valid if media_information is not needed
2024-02-25T15:04:18.7339301Z       should not be valid
2024-02-25T15:04:18.7339815Z   associations
2024-02-25T15:04:18.7382847Z     is expected to have a has_one_attached called proof_of_form_990
2024-02-25T15:04:18.7418905Z     is expected to have many served_areas
2024-02-25T15:04:18.7457242Z     is expected to have a has_one_attached called proof_of_partner_status
2024-02-25T15:04:18.7494018Z     is expected to have a has_many_attached called documents
2024-02-25T15:04:18.7494716Z   versioning
2024-02-25T15:04:18.7530160Z     is expected to be versioned
2024-02-25T15:04:18.7530842Z 
2024-02-25T15:04:18.7531128Z DistributionPdf
2024-02-25T15:04:18.8145044Z   #non_request_data
2024-02-25T15:04:18.8857465Z   #request_data
2024-02-25T15:04:18.8857935Z 
2024-02-25T15:04:18.8858111Z PartnerGroup
2024-02-25T15:04:18.8859422Z   Validations >
2024-02-25T15:04:18.9122069Z     does not require a unique name between organizations
2024-02-25T15:04:18.9172404Z     must belong to an organization
2024-02-25T15:04:18.9270944Z     requires a unique name within an organization
2024-02-25T15:04:18.9271681Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-02-25T15:04:18.9321304Z       should not be valid
2024-02-25T15:04:18.9321904Z   versioning
2024-02-25T15:04:18.9355761Z     is expected to be versioned
2024-02-25T15:04:18.9356325Z   DB constraints
2024-02-25T15:04:18.9357251Z     deadline_day <= 28
2024-02-25T15:04:18.9430661Z       raises error if unmet
2024-02-25T15:04:18.9431536Z     reminder_day <= 28
2024-02-25T15:04:18.9502506Z       raises error if unmet
2024-02-25T15:04:18.9503016Z     send_reminders IS NOT NULL
2024-02-25T15:04:18.9577940Z       raises error if unmet
2024-02-25T15:04:18.9578630Z   associations
2024-02-25T15:04:18.9634379Z     is expected to have many partners
2024-02-25T15:04:18.9740947Z     is expected to have and belong to many item_categories
2024-02-25T15:04:18.9863108Z     is expected to belong to organization required: true
2024-02-25T15:04:18.9863942Z 
2024-02-25T15:04:18.9864344Z KitCreateService
2024-02-25T15:04:18.9865057Z   #call
2024-02-25T15:04:19.3274390Z     should return an the instance
2024-02-25T15:04:19.3275347Z     when the parameters provided are invalid
2024-02-25T15:04:19.3276061Z       because the kit_params is invalid for kit creation
2024-02-25T15:04:19.5293743Z         should have errors saying why the kit_params are invalid
2024-02-25T15:04:19.5294635Z       because the organization_id does not match any Organization
2024-02-25T15:04:19.5355898Z         should have an error on organization_id saying it does not match any Organization
2024-02-25T15:04:19.5357145Z     when the parameters are valid
2024-02-25T15:04:19.7358011Z       should create a new Item
2024-02-25T15:04:19.9512826Z       should create the new Item associated with the Kit
2024-02-25T15:04:20.1490606Z       should create a new Kit
2024-02-25T15:04:20.1491776Z       but an unexpected error gets raised
2024-02-25T15:04:20.3404062Z         should not create the Kit
2024-02-25T15:04:20.5306420Z         should not create a Item
2024-02-25T15:04:20.7141540Z         should have an error that includes the raised error
2024-02-25T15:04:20.7142421Z       but the ItemCreationService is unsuccesful
2024-02-25T15:04:20.9390937Z         should not create the Kit
2024-02-25T15:04:21.1465099Z         should not create a Item
2024-02-25T15:04:21.3594591Z         should have an error that includes the error
2024-02-25T15:04:21.3595277Z 
2024-02-25T15:04:21.3595562Z InventoryCheckService
2024-02-25T15:04:21.3596476Z   call
2024-02-25T15:04:21.3597814Z     alert
2024-02-25T15:04:21.4389639Z       should set the alert
2024-02-25T15:04:21.4390568Z     error
2024-02-25T15:04:21.5156938Z       should set the error
2024-02-25T15:04:21.5159986Z 
2024-02-25T15:04:21.5160500Z Question
2024-02-25T15:04:21.5161675Z   scope for_partners
2024-02-25T15:04:21.5510411Z     should filter out questions that aren't meant for partners
2024-02-25T15:04:21.5511514Z   validations
2024-02-25T15:04:21.5603940Z     question for_banks and for_partners attributes can't both be false
2024-02-25T15:04:21.5664177Z     is expected to validate that :answer cannot be empty/falsy
2024-02-25T15:04:21.5722146Z     is expected to validate that :title cannot be empty/falsy
2024-02-25T15:04:21.5723025Z   punctuate
2024-02-25T15:04:21.5762319Z     should punctuate each string in a given array
2024-02-25T15:04:21.5763227Z   scope for_banks
2024-02-25T15:04:21.5989896Z     should filter out questions that aren't meant for banks
2024-02-25T15:04:21.5990971Z   versioning
2024-02-25T15:04:21.6023792Z     is expected to be versioned
2024-02-25T15:04:21.6024553Z   remove_redundant_error
2024-02-25T15:04:21.6064206Z     should return an array with only one error message related to the checkboxes.
2024-02-25T15:04:21.6065429Z 
2024-02-25T15:04:21.6066589Z Partner
2024-02-25T15:04:21.6068900Z   ActiveStorage validation
2024-02-25T15:04:21.6184339Z     validates that attachments are pdf or docs
2024-02-25T15:04:21.6185044Z   callbacks
2024-02-25T15:04:21.6404258Z     properly downcases email
2024-02-25T15:04:21.6404869Z   changing emails
2024-02-25T15:04:21.6663478Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-02-25T15:04:21.6927862Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-02-25T15:04:21.7188789Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-02-25T15:04:21.7449565Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-02-25T15:04:21.7701234Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-02-25T15:04:21.8021104Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-02-25T15:04:21.8282461Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-02-25T15:04:21.8283685Z   Filters
2024-02-25T15:04:21.8284286Z     by_status
2024-02-25T15:04:21.8685539Z       yields partners with the provided status
2024-02-25T15:04:21.9078425Z       yields deactivated partner when deactivated status provided
2024-02-25T15:04:21.9079810Z   associations
2024-02-25T15:04:21.9120275Z     is expected to have many requestable_items through item_categories source => items
2024-02-25T15:04:21.9154453Z     is expected to have many requests
2024-02-25T15:04:21.9189551Z     is expected to have many families dependent => destroy
2024-02-25T15:04:21.9223360Z     is expected to have many requests
2024-02-25T15:04:21.9256744Z     is expected to have many distributions
2024-02-25T15:04:21.9290764Z     is expected to have many children through families
2024-02-25T15:04:21.9324953Z     is expected to have many item_categories through partner_group
2024-02-25T15:04:21.9383231Z     is expected to belong to organization required: true
2024-02-25T15:04:21.9434152Z     is expected to belong to partner_group optional: true
2024-02-25T15:04:21.9469565Z     is expected to have many users dependent => destroy
2024-02-25T15:04:21.9470203Z     primary_user
2024-02-25T15:04:21.9783155Z       should return the first user ever created for a partner
2024-02-25T15:04:21.9784711Z   #approvable?
2024-02-25T15:04:21.9785150Z     when status is invited
2024-02-25T15:04:21.9832379Z       should return true
2024-02-25T15:04:21.9833815Z     when status is awaiting_review
2024-02-25T15:04:21.9875170Z       should return true
2024-02-25T15:04:21.9876010Z     when status is not invited or awaiting_review
2024-02-25T15:04:21.9947072Z       should return false
2024-02-25T15:04:21.9947804Z   #csv_export_attributes
2024-02-25T15:04:22.0219967Z     includes contact person information from parnerbase
2024-02-25T15:04:22.0221226Z   Validations >
2024-02-25T15:04:22.0279302Z     must belong to an organization
2024-02-25T15:04:22.0578213Z     requires a unique name within an organization
2024-02-25T15:04:22.0839038Z     does not require a unique name between organizations
2024-02-25T15:04:22.0936216Z     validates the quota is a number but it is not required
2024-02-25T15:04:22.1225404Z     still requires a unique email between organizations
2024-02-25T15:04:22.1543117Z     requires a unique email that is formatted correctly
2024-02-25T15:04:22.1544322Z   #profile
2024-02-25T15:04:22.1878942Z     should return the associated Partners::Profile record
2024-02-25T15:04:22.1879871Z   import_csv
2024-02-25T15:04:22.5135130Z     imports partners from a csv file with BOM encodings
2024-02-25T15:04:22.7363160Z     imports partners from a csv file and prevents multiple imports
2024-02-25T15:04:22.7364389Z   #deletable?
2024-02-25T15:04:22.7364780Z     when status is not uninvited
2024-02-25T15:04:22.7450204Z       should return false
2024-02-25T15:04:22.7451078Z     when status is uninvited
2024-02-25T15:04:22.7451852Z       when it has a request
2024-02-25T15:04:22.7607749Z         should return false
2024-02-25T15:04:22.7608601Z       when it has a profile and users
2024-02-25T15:04:22.7875525Z         should return false
2024-02-25T15:04:22.7876385Z       when it has a profile but no users
2024-02-25T15:04:22.8038830Z         should return true
2024-02-25T15:04:22.8039507Z       when it has a distribution
2024-02-25T15:04:22.8188412Z         should return false
2024-02-25T15:04:22.8189118Z       when it has no other associations
2024-02-25T15:04:22.8301643Z         should return true
2024-02-25T15:04:22.8302507Z   #impact_metrics
2024-02-25T15:04:22.8303273Z     when partner has related information
2024-02-25T15:04:22.8795096Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-02-25T15:04:22.8796710Z     when partner don't have any related information
2024-02-25T15:04:22.9044582Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-02-25T15:04:22.9045798Z   #deactivated?
2024-02-25T15:04:22.9046526Z     when the status is not 'deactivated'
2024-02-25T15:04:22.9096179Z       should return false
2024-02-25T15:04:22.9097016Z     when the status is 'deactivated'
2024-02-25T15:04:22.9146193Z       should return true
2024-02-25T15:04:22.9146956Z   #quantity_year_to_date
2024-02-25T15:04:23.0955680Z     includes all item quantities from distributions issued during the current year
2024-02-25T15:04:23.2883081Z     does not include quantities from distributions issued during the previous year
2024-02-25T15:04:23.2884152Z   versioning
2024-02-25T15:04:23.2924058Z     is expected to be versioned
2024-02-25T15:04:23.2924648Z 
2024-02-25T15:04:23.2925147Z Reports::AdultIncontinenceReportService
2024-02-25T15:04:23.2926012Z   #report
2024-02-25T15:04:23.4808565Z     should report zero values
2024-02-25T15:04:23.4809243Z     with values
2024-02-25T15:04:24.1134212Z       should handle null distribution quantity
2024-02-25T15:04:24.7376071Z       should report normal values
2024-02-25T15:04:24.7376927Z 
2024-02-25T15:04:24.7377217Z DonationCreateService
2024-02-25T15:04:24.7377868Z   #call
2024-02-25T15:04:24.7591091Z     should create the donation
2024-02-25T15:04:24.7591560Z 
2024-02-25T15:04:24.7591812Z RequestsConfirmationMailer
2024-02-25T15:04:24.7897732Z   pairs the right quantities with the right item names
2024-02-25T15:04:24.8070605Z   handles duplicates
2024-02-25T15:04:24.8071289Z   #confirmation_email
2024-02-25T15:04:24.8242675Z     renders the body
2024-02-25T15:04:24.8368749Z     renders the headers
2024-02-25T15:04:24.8369694Z 
2024-02-25T15:04:24.8369983Z Adjustment
2024-02-25T15:04:24.8371608Z   nested line item attributes
2024-02-25T15:04:24.8869061Z     accepts them
2024-02-25T15:04:24.8869620Z   Methods >
2024-02-25T15:04:25.0919791Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-02-25T15:04:25.0921067Z     split_difference
2024-02-25T15:04:25.1746248Z       returns two adjustment objects
2024-02-25T15:04:25.2573847Z       gracefully handles adjustments with only positive
2024-02-25T15:04:25.3388114Z       gracefully handles adjustments with only negative
2024-02-25T15:04:25.3389343Z   Scopes >
2024-02-25T15:04:25.3577936Z     `at_location` can filter out adjustments to a specific location
2024-02-25T15:04:25.3744229Z     `by_user` can filter out adjustments to a specific user
2024-02-25T15:04:25.3745112Z   versioning
2024-02-25T15:04:25.3786962Z     is expected to be versioned
2024-02-25T15:04:25.3788294Z   Validations >
2024-02-25T15:04:25.3882384Z     must belong to an organization
2024-02-25T15:04:25.4075552Z     allows you to add inventory that doesn't yet exist in the storage location
2024-02-25T15:04:25.4525142Z     allows you to remove all the inventory that exists in the storage location
2024-02-25T15:04:25.4526044Z   behaves like itemizable
2024-02-25T15:04:25.4526523Z     .to_a
2024-02-25T15:04:25.4527177Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:04:25.4892262Z         calls line_item_values
2024-02-25T15:04:25.4893184Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:04:25.5259541Z         raises an error
2024-02-25T15:04:25.5260263Z     .line_items
2024-02-25T15:04:25.5261518Z       quantities_by_name
2024-02-25T15:04:25.5690279Z         returns a hash of items with id, name, and quantity
2024-02-25T15:04:25.6113340Z         leaves out zero-quantitied items if requested
2024-02-25T15:04:25.6114158Z       sorted
2024-02-25T15:04:25.6673232Z         displays the items, sorted by name
2024-02-25T15:04:25.6673842Z       combine!
2024-02-25T15:04:25.7141127Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:04:25.7553487Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:04:25.7554566Z       total
2024-02-25T15:04:25.7944766Z         has an item total
2024-02-25T15:04:25.7946460Z 
2024-02-25T15:04:25.7946815Z BarcodeItem
2024-02-25T15:04:25.7948093Z   Barcodes of BaseItems ('Global')
2024-02-25T15:04:25.8036358Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-02-25T15:04:25.8037389Z     filters >
2024-02-25T15:04:25.8186304Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-02-25T15:04:25.8338993Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-02-25T15:04:25.8451794Z       ->by_value returns the barcode with that value
2024-02-25T15:04:25.8452584Z     scopes >
2024-02-25T15:04:25.8453387Z       global
2024-02-25T15:04:25.8688028Z         includes all barcodes, for both base items and regular items
2024-02-25T15:04:25.8688990Z     validations >
2024-02-25T15:04:25.8775622Z       allows multiple barcodes to point at the same base item
2024-02-25T15:04:25.8853688Z       is valid with or without an organization
2024-02-25T15:04:25.8946231Z       enforces uniqueness in the global scope
2024-02-25T15:04:25.8947128Z       value >
2024-02-25T15:04:25.9004382Z         requires a value
2024-02-25T15:04:25.9004972Z       quantity >
2024-02-25T15:04:25.9060534Z         is an integer
2024-02-25T15:04:25.9113576Z         is not a negative number
2024-02-25T15:04:25.9166539Z         is not nil
2024-02-25T15:04:25.9167232Z       item >
2024-02-25T15:04:25.9220817Z         is invalid without an item associated with it
2024-02-25T15:04:25.9222074Z   versioning
2024-02-25T15:04:25.9259102Z     is expected to be versioned
2024-02-25T15:04:25.9259598Z   Organization barcodes
2024-02-25T15:04:25.9380958Z     updates a counter in Item whenever it tracks a new barcode
2024-02-25T15:04:25.9382875Z     to_h >
2024-02-25T15:04:25.9517522Z       emits a hash for a line_item
2024-02-25T15:04:25.9518394Z     when searching for a barcode where there is a global and local with the same value
2024-02-25T15:04:25.9824343Z       favors the local barcode
2024-02-25T15:04:25.9824897Z     scopes >
2024-02-25T15:04:26.1708859Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-02-25T15:04:26.1924251Z       #by_item_partner_key returns barcodes that match the partner key
2024-02-25T15:04:26.2035487Z       ->by_value returns the barcode with that value
2024-02-25T15:04:26.2036102Z     validations >
2024-02-25T15:04:26.2150107Z       allows multiple barcodes to point at the same item
2024-02-25T15:04:26.2277846Z       does not enforce value uniqueness compared with the global scope
2024-02-25T15:04:26.2541074Z       does not enforces value uniqueness across organizations
2024-02-25T15:04:26.2711977Z       is valid only with an organization
2024-02-25T15:04:26.2894570Z       enforces value uniqueness within the organization
2024-02-25T15:04:26.2895632Z       quantity >
2024-02-25T15:04:26.3008533Z         is not nil
2024-02-25T15:04:26.3118094Z         is an integer
2024-02-25T15:04:26.3229687Z         is not a negative number
2024-02-25T15:04:26.3230436Z       item >
2024-02-25T15:04:26.3580780Z         is invalid without an item associated with it
2024-02-25T15:04:26.3581616Z       value >
2024-02-25T15:04:26.3582010Z         requires a value
2024-02-25T15:04:26.3582438Z     filters >
2024-02-25T15:04:26.3722744Z       ->item_id shows only barcodes for a specific item_id
2024-02-25T15:04:26.3723325Z 
2024-02-25T15:04:26.3723462Z Partners::Child
2024-02-25T15:04:26.3724767Z   versioning
2024-02-25T15:04:26.3768196Z     is expected to be versioned
2024-02-25T15:04:26.3768653Z   #display_name
2024-02-25T15:04:26.4095606Z     should return a child's first and last name
2024-02-25T15:04:26.4096137Z   associations
2024-02-25T15:04:26.4149459Z     is expected to belong to family required: true
2024-02-25T15:04:26.4190221Z     is expected to have many child_item_requests dependent => destroy
2024-02-25T15:04:26.4191343Z 
2024-02-25T15:04:26.4191545Z DistributionCreateService
2024-02-25T15:04:26.4192762Z   call
2024-02-25T15:04:26.5031214Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-25T15:04:26.5845384Z     returns a successful object with Scheduled distribution
2024-02-25T15:04:26.5846243Z     when provided with a request ID
2024-02-25T15:04:26.6742883Z       changes the status of the request
2024-02-25T15:04:26.6743511Z       and the request already has a distribution associated with it
2024-02-25T15:04:26.7531725Z         should not be successful
2024-02-25T15:04:26.7532536Z     partner has send reminders setting set to false
2024-02-25T15:04:26.8288657Z       does not send a PartnerMailer
2024-02-25T15:04:26.8289383Z     partner has send reminders setting set to true
2024-02-25T15:04:26.9980678Z       Sends a PartnerMailer
2024-02-25T15:04:26.9981147Z     partner is deactivated
2024-02-25T15:04:27.0813651Z       does not send an email
2024-02-25T15:04:27.0814187Z     when the line item quantity is not positive
2024-02-25T15:04:27.1347331Z       preserves the RecordInvalid error and is unsuccessful
2024-02-25T15:04:27.1348668Z     when there's multiple line items and one has insufficient inventory
2024-02-25T15:04:27.2047034Z       preserves the Insufficiency error and is unsuccessful
2024-02-25T15:04:27.2048170Z     when there's not sufficient inventory
2024-02-25T15:04:27.2688620Z       preserves the Insufficiency error and is unsuccessful
2024-02-25T15:04:27.2689406Z     when it fails to save
2024-02-25T15:04:27.3251699Z       preserves the error and is unsuccessful
2024-02-25T15:04:27.3252751Z 
2024-02-25T15:04:27.3252922Z ApplicationHelper
2024-02-25T15:04:27.3255623Z   default_title_content
2024-02-25T15:04:27.3256771Z     Organization exists
2024-02-25T15:04:27.5050329Z       returns the organization's name
2024-02-25T15:04:27.5051052Z     Organization does not exist
2024-02-25T15:04:27.5105835Z       returns a default name
2024-02-25T15:04:27.5106503Z   confirm_delete_msg
2024-02-25T15:04:27.5152102Z     subs in string
2024-02-25T15:04:27.5152532Z   step_container_helper
2024-02-25T15:04:27.5153971Z     active_index is less than index
2024-02-25T15:04:27.5198241Z       returns empty string
2024-02-25T15:04:27.5198708Z     active_index is greater than index
2024-02-25T15:04:27.5240555Z       returns done
2024-02-25T15:04:27.5240980Z     active_index is equal to index
2024-02-25T15:04:27.5285704Z       returns active
2024-02-25T15:04:27.5286281Z   active_class
2024-02-25T15:04:27.5331158Z     Returns the controller name (FAILED - 1)
2024-02-25T15:04:27.5331619Z   can_administrate?
2024-02-25T15:04:27.5332625Z     User is org admin and part of org
2024-02-25T15:04:27.5550364Z       can administrate
2024-02-25T15:04:27.5550855Z     User is part of org but not org admin
2024-02-25T15:04:27.5691608Z       cannot administrate
2024-02-25T15:04:27.5692089Z     User is org admin and not part of org
2024-02-25T15:04:27.7577588Z       cannot administrate
2024-02-25T15:04:27.7578174Z   flash_class
2024-02-25T15:04:27.7629289Z     returns appropriate class for error
2024-02-25T15:04:27.7672575Z     returns appropriate class for alert
2024-02-25T15:04:27.7715083Z     returns appropriate class for notice
2024-02-25T15:04:27.7757034Z     returns appropriate class for success
2024-02-25T15:04:27.7758169Z 
2024-02-25T15:04:27.7758389Z DistributionsController
2024-02-25T15:04:27.7759553Z   While signed in
2024-02-25T15:04:27.7760589Z     PUT #update
2024-02-25T15:04:27.7762104Z       when distribution causes inventory quantity to be below recommended quantity
2024-02-25T15:04:27.8912827Z         redirects with a flash notice and a flash error
2024-02-25T15:04:27.8913842Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T15:04:28.0112326Z         redirects with a flash notice and a flash error
2024-02-25T15:04:28.0113212Z       when distribution has items updated for minimum quantity
2024-02-25T15:04:28.1446518Z         redirects with a flash notice and send send_notification
2024-02-25T15:04:28.1447187Z     POST #create
2024-02-25T15:04:28.1448354Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-25T15:04:28.2156243Z         redirects with a flash notice and a flash error
2024-02-25T15:04:28.2157061Z       when line item quantity is not positive
2024-02-25T15:04:28.2674621Z         flashes an error
2024-02-25T15:04:28.2675395Z       multiple line_items that have inventory quantity below minimum quantity
2024-02-25T15:04:28.3521487Z         redirects with a flash notice and a flash error
2024-02-25T15:04:28.3523117Z       multiple line_items that have inventory quantity below recommended quantity
2024-02-25T15:04:28.4370765Z         redirects with a flash notice and a flash alert
2024-02-25T15:04:28.4371562Z 
2024-02-25T15:04:28.4372011Z ReminderDeadlineMailer
2024-02-25T15:04:28.4372768Z   notify deadline
2024-02-25T15:04:28.4671100Z     renders the subject
2024-02-25T15:04:28.4942200Z     renders the body
2024-02-25T15:04:28.5211415Z     renders the receiver email
2024-02-25T15:04:28.5476195Z     renders the sender email
2024-02-25T15:04:28.5476847Z 
2024-02-25T15:04:28.5477097Z County
2024-02-25T15:04:28.5516420Z   is expected to have many served_areas
2024-02-25T15:04:28.5517024Z   versioning
2024-02-25T15:04:28.5553997Z     is expected to be versioned
2024-02-25T15:04:28.5554473Z 
2024-02-25T15:04:28.5554647Z ItemsOutQuery
2024-02-25T15:04:28.5555582Z   items_out_query
2024-02-25T15:04:28.6719693Z     includes distributions, adjustments, transfers among sources
2024-02-25T15:04:28.7890240Z     returns a collection with the fields name, item_id, quantity
2024-02-25T15:04:28.7890936Z 
2024-02-25T15:04:28.7891216Z DistributionUpdateService
2024-02-25T15:04:28.7892540Z   call
2024-02-25T15:04:28.8992404Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-25T15:04:28.8993458Z   resend_notification?
2024-02-25T15:04:29.0037860Z     changes the issue_date, resulting in resend_notification? = true
2024-02-25T15:04:29.1225233Z     changes any distribution content, resulting in resend_notification? = true
2024-02-25T15:04:29.2226827Z     changes the delivery_method, resulting in resend_notification? = true
2024-02-25T15:04:29.2227781Z 
2024-02-25T15:04:29.2228084Z ItemsController
2024-02-25T15:04:29.2229104Z   While not signed in
2024-02-25T15:04:29.2325686Z     redirects the user to the sign-in page for CRUD actions
2024-02-25T15:04:29.2326204Z   While signed in
2024-02-25T15:04:29.2327980Z     PUT #update
2024-02-25T15:04:29.2328885Z       visible
2024-02-25T15:04:29.2557394Z         should update visible_to_partners to true
2024-02-25T15:04:29.2557883Z       invisible
2024-02-25T15:04:29.2765730Z         should update visible_to_partners to false
2024-02-25T15:04:29.2766843Z     GET #index
2024-02-25T15:04:29.2966505Z       returns http success
2024-02-25T15:04:29.2967052Z     GET #show
2024-02-25T15:04:29.3167282Z       returns http success
2024-02-25T15:04:29.3167687Z     DELETE #destroy
2024-02-25T15:04:29.3398371Z       redirects to #index
2024-02-25T15:04:29.3399023Z     PATCH #restore
2024-02-25T15:04:29.3399838Z       with a soft-deleted item
2024-02-25T15:04:29.3610286Z         re-activates the item
2024-02-25T15:04:29.3610903Z       with another organizations item
2024-02-25T15:04:29.5466554Z         does nothing
2024-02-25T15:04:29.5467120Z       with an active item
2024-02-25T15:04:29.5670290Z         does nothing
2024-02-25T15:04:29.5670885Z     GET #new
2024-02-25T15:04:29.5777339Z       returns http success
2024-02-25T15:04:29.5777995Z     POST #create
2024-02-25T15:04:29.5779775Z       with valid params
2024-02-25T15:04:29.5961793Z         should create an item
2024-02-25T15:04:29.6131265Z         should accept params with dollar signs, periods, and commas
2024-02-25T15:04:29.6303281Z         should redirect to the item page
2024-02-25T15:04:29.6303784Z       with invalid params
2024-02-25T15:04:29.6438241Z         should show an error
2024-02-25T15:04:29.6438788Z     PATCH #remove_category
2024-02-25T15:04:29.8401311Z       should redirect to the previous category page
2024-02-25T15:04:30.0389832Z       should remove an item's category
2024-02-25T15:04:30.0390523Z     GET #edit
2024-02-25T15:04:30.0575256Z       returns http success
2024-02-25T15:04:30.0575910Z     Looking at a different organization
2024-02-25T15:04:30.2375360Z       redirects the user to the sign-in page for CRUD actions
2024-02-25T15:04:30.2376035Z 
2024-02-25T15:04:30.2376198Z SyncNDBNMembers
2024-02-25T15:04:30.2376745Z   .sync
2024-02-25T15:04:30.2377883Z     when the HTTP request is successful
2024-02-25T15:04:30.2379019Z       when there are no exisiting NDBN Member records
2024-02-25T15:04:30.2787916Z         should create the NDBN Member records
2024-02-25T15:04:30.2788724Z       when the account name of a NDBN Member has changed
2024-02-25T15:04:30.2924219Z         should update the account name of the corresponding NDBN Member
2024-02-25T15:04:30.2925200Z       when no new NDBN Member has been added
2024-02-25T15:04:30.3052920Z         should not add any new NDBN Members
2024-02-25T15:04:30.3053724Z     when the HTTP request does not get a response of 200
2024-02-25T15:04:30.3096393Z       should raise an error regarding the response code
2024-02-25T15:04:30.3097211Z 
2024-02-25T15:04:30.3097513Z BroadcastAnnouncement
2024-02-25T15:04:30.3198757Z   is expected to belong to organization optional: true
2024-02-25T15:04:30.3252192Z   is expected to validate that :message cannot be empty/falsy
2024-02-25T15:04:30.3314634Z   should validate a good link
2024-02-25T15:04:30.3370511Z   should roughly check if link is valid
2024-02-25T15:04:30.3410045Z   is expected to belong to user required: true
2024-02-25T15:04:30.3463174Z   should validate a valid announcement
2024-02-25T15:04:30.3463800Z   versioning
2024-02-25T15:04:30.3499803Z     is expected to be versioned
2024-02-25T15:04:30.3500607Z   filter_announcements
2024-02-25T15:04:30.3636496Z     should include only announcements from the passed organization
2024-02-25T15:04:30.3764217Z     shouldn't include expired announcements
2024-02-25T15:04:30.3899191Z     sorts announcements from most recently created to last
2024-02-25T15:04:30.3899949Z   expired?
2024-02-25T15:04:30.3957959Z     should be true if the announcement is expired
2024-02-25T15:04:30.4011926Z     should be false if the announcement has not expired
2024-02-25T15:04:30.4012616Z 
2024-02-25T15:04:30.4012890Z DistributionContentChangeService
2024-02-25T15:04:30.4013894Z   #any_change?
2024-02-25T15:04:30.4015367Z     when there are no changes in the line items
2024-02-25T15:04:30.4051132Z       returns true
2024-02-25T15:04:30.4051662Z     when there are line items updated
2024-02-25T15:04:30.4087319Z       returns true
2024-02-25T15:04:30.4087895Z     when there are line items removed and updated
2024-02-25T15:04:30.4120526Z       returns true
2024-02-25T15:04:30.4121054Z     when there are line items removed
2024-02-25T15:04:30.4156570Z       returns true
2024-02-25T15:04:30.4157035Z   #changes
2024-02-25T15:04:30.4157855Z     when there are line items removed and updated
2024-02-25T15:04:30.4190657Z       returns true
2024-02-25T15:04:30.4191530Z 
2024-02-25T15:04:30.4191830Z DonationDestroyService
2024-02-25T15:04:30.4192710Z   #call
2024-02-25T15:04:30.4194563Z     when the donation succesfully gets destroyed
2024-02-25T15:04:30.4448494Z       to be a success
2024-02-25T15:04:30.4449070Z     when the donation destroy fails
2024-02-25T15:04:30.4498748Z       to not be a success
2024-02-25T15:04:30.4499491Z     when the organization_id matches no Organization
2024-02-25T15:04:30.4538178Z       to not be a success
2024-02-25T15:04:30.4539092Z     when storage_location fails to decrease the inventory of the donation
2024-02-25T15:04:30.4585433Z       to not be a success
2024-02-25T15:04:30.4586318Z     when the donation_id matches no Donation owned by the organization
2024-02-25T15:04:30.4627774Z       to not be a success
2024-02-25T15:04:30.4628657Z 
2024-02-25T15:04:30.4628914Z PartnerApprovalService
2024-02-25T15:04:30.4630214Z   #call
2024-02-25T15:04:30.4630997Z     when the arguments are correct
2024-02-25T15:04:30.4946752Z       should change the partner status to approved
2024-02-25T15:04:30.5237443Z       should send an email notification to the partner
2024-02-25T15:04:30.5535938Z       should have no errors
2024-02-25T15:04:30.5536597Z       but a unexpected error occured during the save
2024-02-25T15:04:30.5539436Z         for partner approval
2024-02-25T15:04:30.5803956Z           should not change the partner status to approved
2024-02-25T15:04:30.6054081Z           should not send an email notification to the partner
2024-02-25T15:04:30.6301239Z           should have an error with the raised error
2024-02-25T15:04:30.6302234Z     when the arguments are incorrect
2024-02-25T15:04:30.6303003Z       because the partner is not approvable
2024-02-25T15:04:30.6546610Z         should return the PartnerApprovalService object with an error
2024-02-25T15:04:30.6547482Z 
2024-02-25T15:04:30.6547714Z InventoryAggregate
2024-02-25T15:04:30.6548616Z   multiple events
2024-02-25T15:04:31.0565341Z     should process multiple events
2024-02-25T15:04:31.3319140Z     should handle changing storage location
2024-02-25T15:04:31.5952459Z     should handle timing correctly
2024-02-25T15:04:31.9326791Z     should handle intervening audits
2024-02-25T15:04:32.2024998Z     should ignore unusable snapshots
2024-02-25T15:04:32.2025782Z   individual events
2024-02-25T15:04:32.5238395Z     should process a distribution event
2024-02-25T15:04:32.8226785Z     should process a transfer event
2024-02-25T15:04:33.1283745Z     should process an audit event
2024-02-25T15:04:33.4440974Z     should process a kit allocation event
2024-02-25T15:04:33.8410999Z     should process a kit deallocation event
2024-02-25T15:04:34.1284799Z     should process a donation event after a new storage location is created
2024-02-25T15:04:34.4541096Z     should process a purchase destroyed event
2024-02-25T15:04:34.9532531Z     should process a donation destroyed event
2024-02-25T15:04:35.2493571Z     should process a purchase event
2024-02-25T15:04:35.5781005Z     should process a distribution destroyed event
2024-02-25T15:04:35.8857310Z     should process an adjustment event
2024-02-25T15:04:36.2161045Z     should process a transfer destroy event
2024-02-25T15:04:36.5110865Z     should process a donation event
2024-02-25T15:04:36.7995655Z     should process a snapshot event
2024-02-25T15:04:36.7996280Z   validation
2024-02-25T15:04:36.7997025Z     subsequent event is incorrect
2024-02-25T15:04:37.0915996Z       should add the event to the message
2024-02-25T15:04:37.0916720Z     current event is incorrect
2024-02-25T15:04:37.3220886Z       should raise a bare error
2024-02-25T15:04:37.3222353Z 
2024-02-25T15:04:37.3222639Z Transfer
2024-02-25T15:04:37.3224005Z   behaves like itemizable
2024-02-25T15:04:37.3224920Z     .line_items
2024-02-25T15:04:37.3225789Z       combine!
2024-02-25T15:04:37.3693457Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:04:37.3949860Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:04:37.3950684Z       quantities_by_name
2024-02-25T15:04:37.4553333Z         leaves out zero-quantitied items if requested
2024-02-25T15:04:37.5205884Z         returns a hash of items with id, name, and quantity
2024-02-25T15:04:37.5206630Z       sorted
2024-02-25T15:04:37.6010723Z         displays the items, sorted by name
2024-02-25T15:04:37.6011376Z       total
2024-02-25T15:04:37.6559078Z         has an item total
2024-02-25T15:04:37.6559703Z     .to_a
2024-02-25T15:04:37.6560425Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:04:37.6949869Z         calls line_item_values
2024-02-25T15:04:37.6950589Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:04:37.7343410Z         raises an error
2024-02-25T15:04:37.7344000Z   versioning
2024-02-25T15:04:37.7385900Z     is expected to be versioned
2024-02-25T15:04:37.7386475Z   Scopes >
2024-02-25T15:04:37.7616713Z     `to_location` can filter out transfers to a specific location
2024-02-25T15:04:37.7835047Z     `from_location` can filter out transfers from a specific location
2024-02-25T15:04:37.7835866Z   Methods >
2024-02-25T15:04:37.9886334Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-02-25T15:04:37.9886983Z   Validations >
2024-02-25T15:04:38.0007806Z     must have storage locations set
2024-02-25T15:04:38.1813701Z     must only use storage locations that belong to the organization (no hacks!)
2024-02-25T15:04:38.1894822Z     must belong to an organization
2024-02-25T15:04:38.2511453Z     requires that the line items must have sufficient quantity in the inventory
2024-02-25T15:04:38.2622406Z     must have different storage locations
2024-02-25T15:04:38.2861162Z     requires that each line item exists in the inventory
2024-02-25T15:04:38.2862264Z 
2024-02-25T15:04:38.2862465Z Reports::WarehouseReportService
2024-02-25T15:04:38.2863507Z   #report
2024-02-25T15:04:38.6246368Z     should print normal values
2024-02-25T15:04:38.9877953Z     should print unknown warehouse type
2024-02-25T15:04:39.1684772Z     should print unknown square footage
2024-02-25T15:04:39.3449882Z     should print zero values
2024-02-25T15:04:39.3450375Z 
2024-02-25T15:04:39.3450617Z DistributionDestroyService
2024-02-25T15:04:39.3451977Z   #call
2024-02-25T15:04:39.3453748Z     when the distribution_id does match a Distribution
2024-02-25T15:04:39.3454516Z       and the operations succeed
2024-02-25T15:04:39.5600692Z         should be successful
2024-02-25T15:04:39.7769726Z         should destroy the Distribution
2024-02-25T15:04:39.9863508Z         should increase the inventory of the storage location
2024-02-25T15:04:39.9864201Z       and the increase inventory operations fails
2024-02-25T15:04:40.1986220Z         should not be successful and have the error message
2024-02-25T15:04:40.4081584Z         should not delete the Distribution
2024-02-25T15:04:40.4082292Z       and the destroy! operation fails
2024-02-25T15:04:40.6119347Z         should not delete the Distribution
2024-02-25T15:04:40.8151310Z         should not be successful and have the error message
2024-02-25T15:04:40.8152246Z     when the distribution_id matches no Distribution
2024-02-25T15:04:40.8191986Z       to not be a success
2024-02-25T15:04:40.8192850Z 
2024-02-25T15:04:40.8193188Z DistributionItemizedBreakdownService
2024-02-25T15:04:40.8194323Z   #fetch
2024-02-25T15:04:41.1947886Z     should include the break down of items distributed with onhand data
2024-02-25T15:04:41.1948802Z   #fetch_csv
2024-02-25T15:04:41.5924953Z     should output the expected output but in CSV format
2024-02-25T15:04:41.5925573Z 
2024-02-25T15:04:41.5925716Z Kit
2024-02-25T15:04:41.8004791Z   deactivate and reactivate
2024-02-25T15:04:41.8005796Z   Filtering >
2024-02-25T15:04:41.8047771Z     can filter
2024-02-25T15:04:42.3668305Z     ->alphabetized retrieves items in alphabetical order
2024-02-25T15:04:42.3669091Z     ->by_partner_key
2024-02-25T15:04:42.5993903Z       shows the kits for a particular item
2024-02-25T15:04:42.5994653Z   Validations >
2024-02-25T15:04:42.6165119Z     is valid as built
2024-02-25T15:04:42.6343817Z     requires at least one item
2024-02-25T15:04:42.8533355Z     requires a unique name
2024-02-25T15:04:42.8716905Z     requires a name
2024-02-25T15:04:42.8888701Z     must belong to an organization
2024-02-25T15:04:42.9066823Z     can't have negative value
2024-02-25T15:04:42.9067395Z   versioning
2024-02-25T15:04:42.9104283Z     is expected to be versioned
2024-02-25T15:04:42.9104865Z   #can_deactivate?
2024-02-25T15:04:42.9105535Z     with inventory items
2024-02-25T15:04:43.1310037Z       should return false
2024-02-25T15:04:43.1310670Z     without inventory items
2024-02-25T15:04:43.3275940Z       should return true
2024-02-25T15:04:43.3276506Z   Value >
2024-02-25T15:04:43.3442510Z     converts cents to dollars
2024-02-25T15:04:43.3607037Z     converts dollars to cents
2024-02-25T15:04:43.3607631Z     .value_per_itemizable
2024-02-25T15:04:43.3998251Z       calculates values from associated items
2024-02-25T15:04:43.3998981Z 
2024-02-25T15:04:43.3999252Z AddRoleService
2024-02-25T15:04:43.4000344Z   #call
2024-02-25T15:04:43.4001369Z     when the role does not yet exist
2024-02-25T15:04:43.6105388Z       works with a partner
2024-02-25T15:04:43.7988209Z       works with super admin
2024-02-25T15:04:43.9980307Z       should add the user role when asked to add admin
2024-02-25T15:04:44.2079853Z       should add the role
2024-02-25T15:04:44.2080498Z     when the role already exists
2024-02-25T15:04:44.4125040Z       should raise an error for super admin
2024-02-25T15:04:44.6147595Z       should raise an error
2024-02-25T15:04:44.6148223Z 
2024-02-25T15:04:44.6148415Z HelpController
2024-02-25T15:04:44.6151609Z   While signed in as a normal user >
2024-02-25T15:04:44.6152202Z     GET #show
2024-02-25T15:04:44.6284303Z       returns http success
2024-02-25T15:04:44.6346905Z       does not display help page when the user logs out
2024-02-25T15:04:44.6347617Z 
2024-02-25T15:04:44.6347901Z KitAllocation
2024-02-25T15:04:44.6351791Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-02-25T15:04:44.6353298Z   versioning
2024-02-25T15:04:44.6437824Z     is expected to be versioned
2024-02-25T15:04:44.6438247Z 
2024-02-25T15:04:44.6438445Z Partners::ServedArea
2024-02-25T15:04:44.6484680Z   is expected to belong to partner_profile required: true
2024-02-25T15:04:44.6526151Z   is expected to belong to county required: true
2024-02-25T15:04:44.6786571Z   must only allow valid client share values
2024-02-25T15:04:44.6934611Z   must only allow integer client shares
2024-02-25T15:04:44.6935264Z   versioning
2024-02-25T15:04:44.6970424Z     is expected to be versioned
2024-02-25T15:04:44.6972814Z 
2024-02-25T15:04:44.6973185Z AllocateKitInventoryService
2024-02-25T15:04:44.6973933Z   #allocate
2024-02-25T15:04:44.6975313Z     when inventory items are available
2024-02-25T15:04:44.9844663Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-02-25T15:04:44.9845772Z       when there are more then one line items
2024-02-25T15:04:44.9846251Z         when same kit is allocated multiple times
2024-02-25T15:04:45.3055432Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-25T15:04:45.3056595Z         when there kit is allocated once
2024-02-25T15:04:45.5882431Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-25T15:04:45.5883552Z       When kit is allocated more then once
2024-02-25T15:04:45.9009126Z         increases the already existed inventory in and decreases the already existed inventory out
2024-02-25T15:04:45.9010751Z     when more than one kit is requested
2024-02-25T15:04:45.9011360Z       but one of the items is out of stock
2024-02-25T15:04:46.1786934Z         returns error and does not change kit or item quantity
2024-02-25T15:04:46.1787746Z   #error
2024-02-25T15:04:46.1788565Z     when the Store location organization doesn't match
2024-02-25T15:04:46.4021027Z       returns error
2024-02-25T15:04:46.4022952Z 
2024-02-25T15:04:46.4023214Z Distribution
2024-02-25T15:04:46.4024826Z   versioning
2024-02-25T15:04:46.4067638Z     is expected to be versioned
2024-02-25T15:04:46.4068245Z   Methods >
2024-02-25T15:04:46.4069365Z     #distributed_at
2024-02-25T15:04:46.5229676Z       displays explicit issued_at date
2024-02-25T15:04:46.5929151Z       shows the hour and minutes if it has been provided
2024-02-25T15:04:46.5942117Z     #copy_line_items
2024-02-25T15:04:46.6970941Z       replicates line_items from a donation into a distribution
2024-02-25T15:04:46.6979774Z     #copy_from_request
2024-02-25T15:04:46.7549914Z       copy over relevant request information into the distrubution
2024-02-25T15:04:46.7550708Z     #future?
2024-02-25T15:04:46.7556091Z       when issued_at has passed
2024-02-25T15:04:46.7850197Z         returns false
2024-02-25T15:04:46.7850707Z       when issued_at has not passed
2024-02-25T15:04:46.8135183Z         returns true
2024-02-25T15:04:46.8135696Z     #combine_duplicates
2024-02-25T15:04:46.8562339Z       condenses duplicate line_items if the item_ids match
2024-02-25T15:04:46.8563082Z   Callbacks >
2024-02-25T15:04:46.9052580Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-25T15:04:46.9053578Z     #before_save
2024-02-25T15:04:46.9054019Z       #reset_shipping_cost
2024-02-25T15:04:46.9054618Z         when delivery_method is other then shipped
2024-02-25T15:04:46.9325065Z           distribution will be created successfully and the shipping_cost will be zero
2024-02-25T15:04:46.9326031Z   Scopes >
2024-02-25T15:04:46.9326942Z     by_item_id >
2024-02-25T15:04:47.0707571Z       only returns distributions with given item id
2024-02-25T15:04:47.0708056Z     by_partner >
2024-02-25T15:04:47.1223490Z       only returns distributions with given partner id
2024-02-25T15:04:47.1224223Z     this_week >
2024-02-25T15:04:47.1224952Z       When it's Sunday (end of the week)
2024-02-25T15:04:47.1744511Z         doesn't include distributions past Sunday
2024-02-25T15:04:47.2484911Z       When it's Tuesday (mid-week)
2024-02-25T15:04:47.2485832Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-02-25T15:04:47.2486688Z     by_location >
2024-02-25T15:04:47.2999842Z       only returns distributions with given location id
2024-02-25T15:04:47.3000861Z     during >
2024-02-25T15:04:47.3713094Z       returns all distributions created between two dates
2024-02-25T15:04:47.3713828Z   Validations >
2024-02-25T15:04:47.3870445Z     ensures the associated line_items are invalid with a zero quantity
2024-02-25T15:04:47.4270004Z     ensures the associated line_items are valid
2024-02-25T15:04:47.4305308Z     ensures that any included items are found in the associated storage location
2024-02-25T15:04:47.4352729Z     must belong to an organization
2024-02-25T15:04:47.4504436Z     ensures the associated line_items are invalid with a nil quantity
2024-02-25T15:04:47.4561968Z     ensures that the issued at is no earlier than 2000
2024-02-25T15:04:47.4611601Z     requires a partner
2024-02-25T15:04:47.4659989Z     requires a storage location
2024-02-25T15:04:47.4660819Z     when delivery method is shipped
2024-02-25T15:04:47.4661588Z       shipping cost is negative
2024-02-25T15:04:47.4719112Z         will not allow to save distribution
2024-02-25T15:04:47.4719826Z       shipping cost is none negative
2024-02-25T15:04:47.4988416Z         allows to save distribution
2024-02-25T15:04:47.4989119Z     when delivery method is other then shipped
2024-02-25T15:04:47.5251165Z       allows to save distribution
2024-02-25T15:04:47.5252171Z   behaves like itemizable
2024-02-25T15:04:47.5252768Z     .to_a
2024-02-25T15:04:47.5253870Z       with Flipper flag :deprecate_to_a disabled
2024-02-25T15:04:47.5609192Z         calls line_item_values
2024-02-25T15:04:47.5609845Z       with Flipper flag :deprecate_to_a enabled
2024-02-25T15:04:47.5958002Z         raises an error
2024-02-25T15:04:47.5958656Z     .line_items
2024-02-25T15:04:47.5959950Z       sorted
2024-02-25T15:04:47.7286102Z         displays the items, sorted by name
2024-02-25T15:04:47.7286682Z       quantities_by_name
2024-02-25T15:04:47.8252143Z         returns a hash of items with id, name, and quantity
2024-02-25T15:04:47.9306976Z         leaves out zero-quantitied items if requested
2024-02-25T15:04:47.9307857Z       total
2024-02-25T15:04:48.0287529Z         has an item total
2024-02-25T15:04:48.0288138Z       combine!
2024-02-25T15:04:48.0887708Z         incrementally combines line_items on donations that have already been created
2024-02-25T15:04:48.1368642Z         combines multiple line_items with the same item_id into a single record
2024-02-25T15:04:48.1370030Z   CSV export >
2024-02-25T15:04:48.1370479Z     csv_export_attributes
2024-02-25T15:04:48.5496407Z       returns the set of attributes which define a row in case of distribution export
2024-02-25T15:04:48.8789240Z     for_csv_export >
2024-02-25T15:04:48.8789863Z       filters only to the given organization
2024-02-25T15:04:49.2174705Z       filters only to the given filter
2024-02-25T15:04:49.5576271Z       filters only to the given issue time range
2024-02-25T15:04:49.5577094Z 
2024-02-25T15:04:49.5577381Z Partners::FetchPartnersToRemindNowService
2024-02-25T15:04:49.5578323Z   .fetch
2024-02-25T15:04:49.5579224Z     when there is a partner
2024-02-25T15:04:49.5580621Z       that does NOT have a organization with a global reminder & deadline
2024-02-25T15:04:49.5582359Z         and is a part of a partner group that does have them defined
2024-02-25T15:04:49.5583165Z           that is for today
2024-02-25T15:04:49.5952411Z             should include that partner
2024-02-25T15:04:49.5953036Z             but the partner is deactivated
2024-02-25T15:04:49.6328021Z               should NOT include that partner
2024-02-25T15:04:49.6328651Z           that is not for today
2024-02-25T15:04:49.6673004Z             should NOT include that partner
2024-02-25T15:04:49.6673851Z       that has an organization with a global reminder & deadline
2024-02-25T15:04:49.6675088Z         AND a partner group that does have them defined
2024-02-25T15:04:49.7030365Z           should remind based on the partner group instead of the organization level reminder
2024-02-25T15:04:49.7031408Z           but the partner is deactivated
2024-02-25T15:04:49.7436950Z             should NOT include that partner
2024-02-25T15:04:49.7437905Z         that is for today
2024-02-25T15:04:49.7739101Z           should include that partner
2024-02-25T15:04:49.7739734Z           but the partner is deactivated
2024-02-25T15:04:49.8068348Z             should NOT include that partner
2024-02-25T15:04:49.8069011Z           and has send_reminder=false
2024-02-25T15:04:49.8394392Z             should NOT include that partner
2024-02-25T15:04:49.8395002Z         that is not for today
2024-02-25T15:04:49.8684632Z           should NOT include that partner
2024-02-25T15:04:49.8685720Z 
2024-02-25T15:04:49.8685923Z Partners::ItemRequest
2024-02-25T15:04:49.8686954Z   validations
2024-02-25T15:04:49.8748639Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-02-25T15:04:49.8807607Z     is expected to validate that :partner_key cannot be empty/falsy
2024-02-25T15:04:49.8867193Z     is expected to validate that :quantity cannot be empty/falsy
2024-02-25T15:04:49.8925563Z     is expected to validate that :name cannot be empty/falsy
2024-02-25T15:04:49.8926413Z   versioning
2024-02-25T15:04:49.8959663Z     is expected to be versioned
2024-02-25T15:04:49.8960200Z   associations
2024-02-25T15:04:49.8996826Z     is expected to have many child_item_requests dependent => destroy
2024-02-25T15:04:49.9032742Z     is expected to have many children through child_item_requests
2024-02-25T15:04:49.9071848Z     is expected to belong to request class_name => ::Request required: true
2024-02-25T15:04:49.9072533Z 
2024-02-25T15:04:49.9072686Z ItemsInTotalQuery
2024-02-25T15:04:49.9073141Z   items_in_total_query
2024-02-25T15:04:50.1219010Z     does not count negative adjustments towards in-flow
2024-02-25T15:04:50.3578052Z     does not count transfers going in the negative direction
2024-02-25T15:04:50.6355696Z     does not count donations, purchases, adjustments to other storage locations
2024-02-25T15:04:50.7996157Z     returns a sum total of all in-flows
2024-02-25T15:04:51.1575585Z     counts shared items together
2024-02-25T15:04:51.1576079Z 
2024-02-25T15:04:51.1576268Z Partners::UpdateFamily
2024-02-25T15:04:51.1577351Z   #call
2024-02-25T15:04:51.1578328Z     when family has children
2024-02-25T15:04:51.2012264Z       archives the family and its children
2024-02-25T15:04:51.2012995Z     when an error occurs during archiving
2024-02-25T15:04:51.2361439Z       does not archive the family or its children and adds error to the service
2024-02-25T15:04:51.5277582Z 
2024-02-25T15:04:51.5278627Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-02-25T15:04:51.5279171Z 
2024-02-25T15:04:51.5279927Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-02-25T15:04:51.5280814Z      # Not yet implemented
2024-02-25T15:04:51.5281181Z      # ./spec/models/kit_allocation_spec.rb:16
2024-02-25T15:04:51.5358398Z 
2024-02-25T15:04:51.5358605Z Failures:
2024-02-25T15:04:51.5358921Z 
2024-02-25T15:04:51.5359262Z   1) ApplicationHelper active_class Returns the controller name
2024-02-25T15:04:51.5360241Z      Failure/Error: if name.include?(controller_path) || name.find{|n| request.path.ends_with?(n)}
2024-02-25T15:04:51.5360934Z 
2024-02-25T15:04:51.5361068Z      NoMethodError:
2024-02-25T15:04:51.5361564Z        undefined method `find' for "foo":String
2024-02-25T15:04:51.5362120Z      # ./app/helpers/application_helper.rb:18:in `active_class'
2024-02-25T15:04:51.5362828Z      # ./spec/helpers/application_helper_spec.rb:32:in `block (3 levels) in <top (required)>'
2024-02-25T15:04:51.5379602Z 
2024-02-25T15:04:51.5379956Z Finished in 47.91 seconds (files took 8.4 seconds to load)
2024-02-25T15:04:51.5380660Z 619 examples, 1 failure, 1 pending
2024-02-25T15:04:51.5380918Z 
2024-02-25T15:04:51.5381019Z Failed examples:
2024-02-25T15:04:51.5381189Z 
2024-02-25T15:04:51.5381684Z rspec ./spec/helpers/application_helper_spec.rb:31 # ApplicationHelper active_class Returns the controller name
2024-02-25T15:04:51.5382601Z 
2024-02-25T15:04:51.5382717Z Randomized with seed 13445
2024-02-25T15:04:51.5382930Z 
2024-02-25T15:04:51.9070269Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T15:04:51.9072318Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3953 / 6454 LOC (61.25%) covered.
2024-02-25T15:04:52.0897402Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/partner_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/item_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/transfer_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/models/line_item_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/inventory_item_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/county_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/routing/account_requests_routing_spec.rb" failed
2024-02-25T15:04:52.4746507Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-25T15:04:52.4748268Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10719 LOC (0.35%) covered.
2024-02-25T15:04:52.5040879Z ##[error]Process completed with exit code 1.
