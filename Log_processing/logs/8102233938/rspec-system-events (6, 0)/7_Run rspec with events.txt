2024-02-29T20:32:45.4495683Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-29T20:32:45.4496568Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-29T20:32:45.4526860Z shell: /usr/bin/bash -e {0}
2024-02-29T20:32:45.4527458Z env:
2024-02-29T20:32:45.4528046Z   POSTGRES_HOST: localhost
2024-02-29T20:32:45.4528658Z   DATABASE_HOST: localhost
2024-02-29T20:32:45.4529222Z   PG_USERNAME: postgres
2024-02-29T20:32:45.4529817Z   PG_PASSWORD: password
2024-02-29T20:32:45.4530432Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-29T20:32:45.4531055Z   POSTGRES_PORT: 5432
2024-02-29T20:32:45.4531660Z   PGHOST: localhost
2024-02-29T20:32:45.4532187Z   PGUSER: postgres
2024-02-29T20:32:45.4532643Z   RAILS_ENV: test
2024-02-29T20:32:45.4533281Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-29T20:32:45.4533951Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-29T20:32:45.4534634Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-29T20:32:45.4535289Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-29T20:32:45.4536130Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-29T20:32:45.4537197Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-29T20:32:45.4538210Z   EVENTS_READ: true
2024-02-29T20:32:45.4538781Z ##[endgroup]
2024-02-29T20:32:51.2688535Z W, [2024-02-29T20:32:51.268543 #2449]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-29T20:32:51.2689994Z W, [2024-02-29T20:32:51.268604 #2449]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T20:32:51.2691414Z W, [2024-02-29T20:32:51.268628 #2449]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T20:32:51.2694370Z W, [2024-02-29T20:32:51.268665 #2449]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-29T20:32:53.3842124Z W, [2024-02-29T20:32:53.383848 #2449]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-29T20:32:53.3843879Z W, [2024-02-29T20:32:53.383895 #2449]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T20:32:53.3845448Z W, [2024-02-29T20:32:53.383911 #2449]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T20:32:53.3848003Z W, [2024-02-29T20:32:53.383951 #2449]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-29T20:32:53.3900196Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-29T20:33:02.0493308Z 
2024-02-29T20:33:02.0494152Z Randomized with seed 26349
2024-02-29T20:33:03.0314423Z 
2024-02-29T20:33:03.0315132Z Managing requests
2024-02-29T20:33:03.0316829Z   creating a # individuals request
2024-02-29T20:33:03.0317906Z     GIVEN a partner user is permitted to make a request
2024-02-29T20:33:03.0318742Z       Select Input Tests
2024-02-29T20:33:03.0319364Z         WHEN they reach the page
2024-02-29T20:33:04.8843230Z           should show the proper items in the select box
2024-02-29T20:33:04.8843898Z           WHEN they create a request inproperly
2024-02-29T20:33:06.2717400Z             should show the proper items in the select box
2024-02-29T20:33:06.2718407Z       WHEN they create a request properly
2024-02-29T20:33:06.2720579Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-29T20:33:08.4302562Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-29T20:33:08.4303521Z       WHEN they create a request inproperly
2024-02-29T20:33:09.3668200Z         should show an error message with the instructions
2024-02-29T20:33:09.3668985Z   creating a new quantity request
2024-02-29T20:33:09.3670215Z     GIVEN a partner user is permitted to make a request
2024-02-29T20:33:09.3671696Z       WHEN they create a request properly
2024-02-29T20:33:09.3673357Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-29T20:33:11.6335201Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-29T20:33:11.6336380Z       WHEN they create a request with only a comment
2024-02-29T20:33:12.6125144Z         should be created without any issue
2024-02-29T20:33:12.6126271Z       WHEN they create a request inproperly by not inputting anything
2024-02-29T20:33:13.5336151Z         should show an error message with the instructions
2024-02-29T20:33:13.5336941Z       Select Input Tests
2024-02-29T20:33:13.5337481Z         WHEN they reach the page
2024-02-29T20:33:14.4174064Z           should show the proper items in the select box
2024-02-29T20:33:14.4175026Z           WHEN they create a request inproperly
2024-02-29T20:33:15.7690457Z             should show the proper items in the select box
2024-02-29T20:33:15.7693971Z 
2024-02-29T20:33:15.7694296Z DonationSites
2024-02-29T20:33:15.7695436Z   while signed in
2024-02-29T20:33:15.7696247Z     GET #index
2024-02-29T20:33:15.7697392Z       html
2024-02-29T20:33:15.8304935Z         is expected to be successful
2024-02-29T20:33:15.8305938Z       csv
2024-02-29T20:33:15.8484218Z         is expected to be successful
2024-02-29T20:33:15.8485475Z 
2024-02-29T20:33:15.8485758Z Purchases
2024-02-29T20:33:15.8487347Z   while signed in as an organization admin
2024-02-29T20:33:16.9123185Z     allows deletion of a purchase
2024-02-29T20:33:16.9124108Z   while signed in as a normal user
2024-02-29T20:33:16.9124888Z     When creating a new purchase
2024-02-29T20:33:17.4330745Z       should not display inactive storage locations in dropdown
2024-02-29T20:33:17.4331713Z       via barcode entry
2024-02-29T20:33:18.6737412Z         a user can add items that do not yet have a barcode
2024-02-29T20:33:19.5721108Z         User scan same barcode 2 times
2024-02-29T20:33:20.2809785Z         a user can add items via scanning them in by barcode
2024-02-29T20:33:20.2810733Z       via manual entry
2024-02-29T20:33:21.2982228Z         Does not include inactive items in the line item fields
2024-02-29T20:33:22.5216803Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-29T20:33:23.5760421Z         User can create vendor from purchase
2024-02-29T20:33:24.7043293Z         User can create a purchase IN THE PAST
2024-02-29T20:33:25.6307015Z         User can create a purchase using dollars decimal amount
2024-02-29T20:33:26.6353002Z         when creating a purchase incorrectly
2024-02-29T20:33:26.6354120Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-29T20:33:27.4472775Z           should display failure with error messages
2024-02-29T20:33:27.4473675Z       Editing purchase
2024-02-29T20:33:28.0810743Z         A user can view another organizations purchase
2024-02-29T20:33:28.5918714Z         A user can see purchased_from value
2024-02-29T20:33:28.5919732Z     When visiting an existing purchase
2024-02-29T20:33:29.0703060Z       does not allow deletion of a purchase
2024-02-29T20:33:29.0704030Z     When visiting the index page
2024-02-29T20:33:29.0705153Z       When filtering on the index page
2024-02-29T20:33:29.9269134Z         User can filter the #index by storage location
2024-02-29T20:33:30.7754133Z         User can filter the #index by vendor
2024-02-29T20:33:30.7754816Z         behaves like Date Range Picker
2024-02-29T20:33:30.7755916Z           when choosing 'Last Month'
2024-02-29T20:33:31.7542207Z             shows only 2 of the records
2024-02-29T20:33:31.7543549Z           when choosing 'All Time'
2024-02-29T20:33:32.8087104Z             shows all the records
2024-02-29T20:33:32.8088244Z           when choosing a date range that only includes the previous week
2024-02-29T20:33:33.7987260Z             shows only 1 record
2024-02-29T20:33:33.7988281Z       In the middle of the year
2024-02-29T20:33:34.6179108Z         User can click to the new purchase form
2024-02-29T20:33:35.4176225Z         User sees total purchases value
2024-02-29T20:33:36.1878188Z         User sees purchased date column
2024-02-29T20:33:36.1880268Z 
2024-02-29T20:33:36.1880554Z Admin::Organizations
2024-02-29T20:33:36.1883131Z   When logged in as a super admin
2024-02-29T20:33:36.1885168Z     DELETE #destroy
2024-02-29T20:33:36.5893728Z       redirects
2024-02-29T20:33:36.5894702Z     GET #show
2024-02-29T20:33:36.8139635Z       returns http success
2024-02-29T20:33:36.8140176Z     GET #new
2024-02-29T20:33:36.8678650Z       returns http success
2024-02-29T20:33:36.8679791Z       when given a token that matches a account request that has already been processed
2024-02-29T20:33:37.1125003Z         should render new with a flash error message
2024-02-29T20:33:37.1125876Z       when given a valid account request token in the query parameters
2024-02-29T20:33:37.1732966Z         should render new with pre populate input fields from the account_request
2024-02-29T20:33:37.1734428Z     DELETE #destroy
2024-02-29T20:33:37.1735084Z       with a valid organization id
2024-02-29T20:33:37.6921259Z         redirects to #index
2024-02-29T20:33:37.6922050Z     POST #create
2024-02-29T20:33:37.6922600Z       with valid params
2024-02-29T20:33:38.0050735Z         creates an organization and redirects to #index
2024-02-29T20:33:38.0051662Z       with invalid params
2024-02-29T20:33:38.0499642Z         does not create an organization and renders #create with an error message
2024-02-29T20:33:38.0501036Z     PUT #update
2024-02-29T20:33:38.0733251Z       redirect
2024-02-29T20:33:38.0733929Z     GET #index
2024-02-29T20:33:38.1091640Z       returns http success
2024-02-29T20:33:38.1092526Z     GET #edit
2024-02-29T20:33:38.3287927Z       returns http success
2024-02-29T20:33:38.3288637Z     PATCH #update
2024-02-29T20:33:38.3289203Z       with a valid update
2024-02-29T20:33:38.5194992Z         redirects to #index
2024-02-29T20:33:38.5195958Z       with an invalid update
2024-02-29T20:33:38.7444831Z         redirects to #edit with an error message
2024-02-29T20:33:38.9676917Z         returns http success
2024-02-29T20:33:38.9678079Z   When logged in as a non-admin user
2024-02-29T20:33:38.9679150Z     GET #index
2024-02-29T20:33:38.9824193Z       redirects
2024-02-29T20:33:38.9824952Z     GET #new
2024-02-29T20:33:38.9962799Z       redirects
2024-02-29T20:33:38.9963553Z     PUT #update
2024-02-29T20:33:39.0102756Z       redirects
2024-02-29T20:33:39.0103348Z     POST #create
2024-02-29T20:33:39.0267767Z       redirects
2024-02-29T20:33:39.0268821Z     GET #edit
2024-02-29T20:33:39.0416738Z       redirects
2024-02-29T20:33:39.0418354Z 
2024-02-29T20:33:39.0418632Z StorageLocations
2024-02-29T20:33:39.0420389Z   While signed in
2024-02-29T20:33:39.0421975Z     POST #import_csv
2024-02-29T20:33:39.0422948Z       with a csv file
2024-02-29T20:33:39.0629662Z         redirects
2024-02-29T20:33:39.0690501Z         invokes .import_csv
2024-02-29T20:33:39.0868808Z         presents a flash notice message
2024-02-29T20:33:39.0869594Z       without a csv file
2024-02-29T20:33:39.1005510Z         presents a flash error message
2024-02-29T20:33:39.1136276Z         redirects to :index
2024-02-29T20:33:39.1137064Z       csv file with wrong headers
2024-02-29T20:33:39.1273068Z         redirects
2024-02-29T20:33:39.1406545Z         presents a flash error message
2024-02-29T20:33:39.1408333Z     GET #index
2024-02-29T20:33:39.1409234Z       html
2024-02-29T20:33:39.1807713Z         succeeds
2024-02-29T20:33:39.1808236Z         with inactive locations
2024-02-29T20:33:39.2200921Z           does not includes the inactive location
2024-02-29T20:33:39.2201908Z           with include_inactive_locations
2024-02-29T20:33:39.2606595Z             includes the inactive location
2024-02-29T20:33:39.2607693Z       csv
2024-02-29T20:33:39.2809948Z         succeeds
2024-02-29T20:33:39.3821502Z         includes headers followed by alphabetized item names
2024-02-29T20:33:39.3822463Z     Looking at a different organization
2024-02-29T20:33:39.5756990Z       redirects the user to the sign-in page for CRUD actions
2024-02-29T20:33:39.5758189Z     PUT #reactivate
2024-02-29T20:33:39.5956056Z       undiscards
2024-02-29T20:33:39.5956883Z     GET #show
2024-02-29T20:33:39.5957457Z       html
2024-02-29T20:33:39.6698398Z         should return a correct response
2024-02-29T20:33:39.6699712Z         with version date set
2024-02-29T20:33:39.6700457Z           with a version found
2024-02-29T20:33:39.7554956Z             should show the version specified
2024-02-29T20:33:39.7555831Z           with no version found
2024-02-29T20:33:39.8315458Z             should show N/A
2024-02-29T20:33:39.8316182Z       csv
2024-02-29T20:33:39.8851107Z         should be successful
2024-02-29T20:33:39.8852034Z     GET #new
2024-02-29T20:33:40.2544826Z       returns http success
2024-02-29T20:33:40.2545551Z     PUT #deactivate
2024-02-29T20:33:40.2797193Z       discards
2024-02-29T20:33:40.2797749Z       with inventory
2024-02-29T20:33:40.3336981Z         does not discard
2024-02-29T20:33:40.3337972Z     GET #inventory
2024-02-29T20:33:40.3338663Z       when also including omitted items
2024-02-29T20:33:40.3875785Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-29T20:33:40.4403043Z         contains a collection of ducktyped entries that respond the same
2024-02-29T20:33:40.4403739Z       without any overrides
2024-02-29T20:33:40.4951700Z         returns a collection that only includes items at the storage location
2024-02-29T20:33:40.4952738Z       when also including inactive items
2024-02-29T20:33:40.5668132Z         returns a collection that also includes items that have been deactivated
2024-02-29T20:33:40.5669131Z     GET #destroy
2024-02-29T20:33:40.5968894Z       redirects to #index
2024-02-29T20:33:40.5969762Z     GET #edit
2024-02-29T20:33:40.6335222Z       returns http success
2024-02-29T20:33:40.6335954Z   While not signed in
2024-02-29T20:33:40.6406226Z     redirects the user to the sign-in page for CRUD actions
2024-02-29T20:33:40.6406900Z 
2024-02-29T20:33:40.6407154Z Kit management
2024-02-29T20:33:41.7384073Z   can create a new kit as a user with the proper quantity
2024-02-29T20:33:43.2519991Z   can allocate and deallocate quantity per storage location from kit index
2024-02-29T20:33:43.8481459Z   should not display inactive storage locations under allocations
2024-02-29T20:33:43.8482657Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-29T20:33:44.9798070Z     will not change quantity amounts when allocating
2024-02-29T20:33:44.9798897Z   when there is no kit quantity
2024-02-29T20:33:46.1432744Z     will not change quantity amounts when deallocating
2024-02-29T20:33:46.1433461Z 
2024-02-29T20:33:46.1433893Z Admin Organization Management
2024-02-29T20:33:46.1435687Z   While signed in as an Administrative User (super admin)
2024-02-29T20:33:47.2521725Z     filters by organizations by name in organizations index page
2024-02-29T20:33:49.3944616Z     creates a new organization
2024-02-29T20:33:50.7259007Z     can view organization details
2024-02-29T20:33:50.7260130Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-29T20:33:52.7016129Z     creates a new organization
2024-02-29T20:33:52.7017026Z 
2024-02-29T20:33:52.7017440Z Profiles
2024-02-29T20:33:52.7018942Z   POST #update
2024-02-29T20:33:52.7019914Z     when updating an existing value to a blank value
2024-02-29T20:33:52.7528970Z       should have blank values
2024-02-29T20:33:52.8034148Z       update partner
2024-02-29T20:33:52.8035161Z     successful save
2024-02-29T20:33:52.8602484Z       update partner
2024-02-29T20:33:52.9076141Z       redirects to #show
2024-02-29T20:33:52.9077229Z   GET #edit
2024-02-29T20:33:53.0175454Z     returns http success
2024-02-29T20:33:53.0178877Z 
2024-02-29T20:33:53.0179237Z Dashboard
2024-02-29T20:33:53.0180743Z   With an existing essentials bank
2024-02-29T20:33:53.0182415Z     Inventory Totals
2024-02-29T20:33:53.0183324Z       Summary
2024-02-29T20:33:53.7800103Z         displays the on-hand totals
2024-02-29T20:33:53.7801018Z         when constrained to date range
2024-02-29T20:33:54.8639861Z           does not change
2024-02-29T20:33:54.8640852Z     Manufacturer Donations
2024-02-29T20:33:55.5292571Z       has a link to create a new donation
2024-02-29T20:33:55.5294217Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T20:33:55.5295626Z         filtering to 'Last Month'
2024-02-29T20:33:57.4831654Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-29T20:33:57.4833666Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 8 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:33:57.4835062Z         filtering to 'This Month'
2024-02-29T20:33:59.6408167Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-29T20:33:59.6410153Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 4 during 2000-01-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:33:59.6411647Z         filtering to 'All Time'
2024-02-29T20:34:01.5826569Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-29T20:34:01.5828569Z       given 1 Manufacturer donating on 2024-02-27  (unless 'All Time'), 6 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T20:34:01.5829683Z         filtering to 'Yesterday'
2024-02-29T20:34:03.7157951Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-29T20:34:03.7159673Z       given 1 Manufacturer donating on 2022-02-27  (unless 'All Time'), 5 during 2022-02-28..2023-09-08, and 1 on 2023-09-09
2024-02-29T20:34:03.7161016Z         filtering to '' (February 28, 2022 - September 8, 2023)
2024-02-29T20:34:05.9518824Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-29T20:34:05.9521276Z       given 1 Manufacturer donating on 2024-01-30  (unless 'All Time'), 7 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:05.9522180Z         filtering to 'Last 30 Days'
2024-02-29T20:34:08.3066940Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-29T20:34:08.3068909Z       given 1 Manufacturer donating on 2024-02-22  (unless 'All Time'), 0 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:08.3070021Z         filtering to 'Last 7 Days'
2024-02-29T20:34:09.7065563Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-29T20:34:09.7067516Z       given 1 Manufacturer donating on 2024-02-28  (unless 'All Time'), 4 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:09.7069078Z         filtering to 'Today'
2024-02-29T20:34:11.3741147Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-29T20:34:11.3743369Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T20:34:11.3744733Z         filtering to 'This Year'
2024-02-29T20:34:13.0795052Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-29T20:34:13.0796196Z     Donations
2024-02-29T20:34:14.0100612Z       has a link to create a new donation
2024-02-29T20:34:14.0102333Z       given 1 Donation on 2024-01-30 (only if a valid date), 4 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:14.0103753Z         filtering to 'Last 30 Days'
2024-02-29T20:34:15.5725480Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T20:34:15.5727346Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T20:34:15.5728828Z         filtering to 'Last Month'
2024-02-29T20:34:16.9904374Z           shows the correct total and 1 Recent Donation link(s)
2024-02-29T20:34:16.9906421Z       given 1 Donation on 2022-02-27 (only if a valid date), 2 during 2022-02-28..2023-11-17, and 1 on 2023-11-18
2024-02-29T20:34:16.9907894Z         filtering to '' (February 28, 2022 - November 17, 2023)
2024-02-29T20:34:18.4671365Z           shows the correct total and 2 Recent Donation link(s)
2024-02-29T20:34:18.4673105Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:18.4674169Z         filtering to 'This Month'
2024-02-29T20:34:20.1109397Z           shows the correct total and 2 Recent Donation link(s)
2024-02-29T20:34:20.1111276Z       given 1 Donation on 2024-02-28 (only if a valid date), 4 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:20.1112775Z         filtering to 'Today'
2024-02-29T20:34:21.6994516Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T20:34:21.6996249Z       given 1 Donation on 2024-02-27 (only if a valid date), 4 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T20:34:21.6997443Z         filtering to 'Yesterday'
2024-02-29T20:34:23.2425762Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T20:34:23.2427512Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T20:34:23.2428356Z         filtering to 'This Year'
2024-02-29T20:34:24.8321102Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T20:34:24.8322966Z       given 1 Donation on 2024-02-22 (only if a valid date), 4 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:24.8324039Z         filtering to 'Last 7 Days'
2024-02-29T20:34:26.5169696Z           shows the correct total and 3 Recent Donation link(s)
2024-02-29T20:34:26.5170909Z     Purchases
2024-02-29T20:34:27.4566528Z       has a link to create a new purchase
2024-02-29T20:34:27.4568449Z       given 1 Purchase on 2024-01-30  (unless 'All Time'), 4 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:27.4569750Z         filtering to 'Last 30 Days'
2024-02-29T20:34:29.0484987Z           shows correct 3 Recent Purchase link(s)
2024-02-29T20:34:29.0486485Z       given 1 Purchase on 2024-02-28  (unless 'All Time'), 2 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:29.0487370Z         filtering to 'Today'
2024-02-29T20:34:30.5421347Z           shows correct 2 Recent Purchase link(s)
2024-02-29T20:34:30.5422774Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:30.5424741Z         filtering to 'This Month'
2024-02-29T20:34:32.0271504Z           shows correct 2 Recent Purchase link(s)
2024-02-29T20:34:32.0273059Z       given 1 Purchase on 2024-02-27  (unless 'All Time'), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T20:34:32.0274353Z         filtering to 'Yesterday'
2024-02-29T20:34:33.7906979Z           shows correct 3 Recent Purchase link(s)
2024-02-29T20:34:33.7908710Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T20:34:33.7910076Z         filtering to 'Last Month'
2024-02-29T20:34:35.3847936Z           shows correct 3 Recent Purchase link(s)
2024-02-29T20:34:35.3849364Z       given 1 Purchase on 2022-02-27  (unless 'All Time'), 0 during 2022-02-28..2023-09-27, and 1 on 2023-09-28
2024-02-29T20:34:35.3850586Z         filtering to '' (February 28, 2022 - September 27, 2023)
2024-02-29T20:34:38.8141515Z           shows correct 0 Recent Purchase link(s)
2024-02-29T20:34:38.8143180Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T20:34:38.8143992Z         filtering to 'This Year'
2024-02-29T20:34:42.2096494Z           shows correct 0 Recent Purchase link(s)
2024-02-29T20:34:42.2098293Z       given 1 Purchase on 2024-02-22  (unless 'All Time'), 4 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:42.2099551Z         filtering to 'Last 7 Days'
2024-02-29T20:34:43.9076845Z           shows correct 3 Recent Purchase link(s)
2024-02-29T20:34:43.9077831Z     Product Drives
2024-02-29T20:34:44.5255792Z       has a widget for product drive summary data
2024-02-29T20:34:44.5257659Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T20:34:44.5259276Z         filtering to 'Last Month'
2024-02-29T20:34:46.1577271Z           shows 3 Recent Donation link(s)
2024-02-29T20:34:47.7596175Z           shows the correct total money raised
2024-02-29T20:34:49.3721917Z           shows the correct total donations
2024-02-29T20:34:49.3723191Z       Product drive behaviour with Mixed Donation types
2024-02-29T20:34:50.1455986Z         only shows product drive donations as product drive donations
2024-02-29T20:34:50.9175347Z         only counts product drive money raised
2024-02-29T20:34:51.6557124Z         only counts product drive donations for product drive
2024-02-29T20:34:51.6558575Z       given 1 Product Drive Donation on 2024-01-30 (unless 'All Time'), 0 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:51.6559456Z         filtering to 'Last 30 Days'
2024-02-29T20:34:53.0029407Z           shows the correct total money raised
2024-02-29T20:34:56.4085947Z           shows 0 Recent Donation link(s)
2024-02-29T20:34:57.7551377Z           shows the correct total donations
2024-02-29T20:34:57.7553764Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:34:57.7555157Z         filtering to 'This Month'
2024-02-29T20:34:59.2017628Z           shows the correct total donations
2024-02-29T20:35:00.6440163Z           shows the correct total money raised
2024-02-29T20:35:02.0627702Z           shows 1 Recent Donation link(s)
2024-02-29T20:35:02.0629575Z       given 1 Product Drive Donation on 2024-02-27 (unless 'All Time'), 0 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T20:35:02.0630571Z         filtering to 'Yesterday'
2024-02-29T20:35:05.4476069Z           shows 0 Recent Donation link(s)
2024-02-29T20:35:06.8403083Z           shows the correct total money raised
2024-02-29T20:35:08.2126229Z           shows the correct total donations
2024-02-29T20:35:08.2127817Z       given 1 Product Drive Donation on 2022-02-27 (unless 'All Time'), 2 during 2022-02-28..2024-01-28, and 1 on 2024-01-29
2024-02-29T20:35:08.2128937Z         filtering to '' (February 28, 2022 - January 28, 2024)
2024-02-29T20:35:09.7552798Z           shows the correct total money raised
2024-02-29T20:35:11.2673013Z           shows 2 Recent Donation link(s)
2024-02-29T20:35:12.7521694Z           shows the correct total donations
2024-02-29T20:35:12.7523836Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T20:35:12.7525269Z         filtering to 'This Year'
2024-02-29T20:35:14.3346784Z           shows the correct total money raised
2024-02-29T20:35:15.8923803Z           shows the correct total donations
2024-02-29T20:35:17.4866632Z           shows 3 Recent Donation link(s)
2024-02-29T20:35:17.4868721Z       given 1 Product Drive Donation on 2024-02-22 (unless 'All Time'), 0 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:17.4869959Z         filtering to 'Last 7 Days'
2024-02-29T20:35:20.8785082Z           shows 0 Recent Donation link(s)
2024-02-29T20:35:22.2630187Z           shows the correct total money raised
2024-02-29T20:35:23.6398183Z           shows the correct total donations
2024-02-29T20:35:23.6400026Z       given 1 Product Drive Donation on 2024-02-28 (unless 'All Time'), 2 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:23.6401652Z         filtering to 'Today'
2024-02-29T20:35:25.1194640Z           shows 2 Recent Donation link(s)
2024-02-29T20:35:26.6529886Z           shows the correct total money raised
2024-02-29T20:35:28.1195560Z           shows the correct total donations
2024-02-29T20:35:28.1196448Z     Distributions
2024-02-29T20:35:29.0502968Z       has a link to create a new distribution
2024-02-29T20:35:29.0504541Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-29T20:35:29.0505837Z         filtering to 'Last Month'
2024-02-29T20:35:32.4605411Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T20:35:32.4607122Z       given 1 Distribution on 2024-02-22  (unless 'All Time'), 3 during 2024-02-23..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:32.4607988Z         filtering to 'Last 7 Days'
2024-02-29T20:35:33.9655198Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:33.9657163Z       given 1 Distribution on 2024-02-28  (unless 'All Time'), 3 during 2024-02-29..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:33.9658476Z         filtering to 'Today'
2024-02-29T20:35:35.4474777Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:35.4476514Z       given 1 Distribution on 2022-02-27  (unless 'All Time'), 3 during 2022-02-28..2023-09-22, and 1 on 2023-09-23
2024-02-29T20:35:35.4477666Z         filtering to '' (February 28, 2022 - September 22, 2023)
2024-02-29T20:35:36.9501168Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:36.9502878Z       given 1 Distribution on 2024-01-30  (unless 'All Time'), 4 during 2024-01-31..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:36.9503894Z         filtering to 'Last 30 Days'
2024-02-29T20:35:38.4137331Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:38.4139141Z       given 1 Distribution on 2024-02-27  (unless 'All Time'), 4 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-29T20:35:38.4139996Z         filtering to 'Yesterday'
2024-02-29T20:35:39.9163492Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:39.9165124Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-29T20:35:39.9166809Z         filtering to 'This Year'
2024-02-29T20:35:41.4433822Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-29T20:35:41.4435530Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:41.4436815Z         filtering to 'This Month'
2024-02-29T20:35:44.9140787Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T20:35:44.9145073Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-29, and 1 on 2024-03-01
2024-02-29T20:35:44.9146723Z         filtering to 'All Time'
2024-02-29T20:35:48.3488938Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-29T20:35:48.3489939Z     Signage
2024-02-29T20:35:51.2259930Z       shows their organization name unless they have a logo set
2024-02-29T20:35:51.2260952Z   With a new essentials bank
2024-02-29T20:36:19.2930549Z     displays the getting started guide until the steps are completed
2024-02-29T20:36:19.2931356Z 
2024-02-29T20:36:19.2933521Z Audits
2024-02-29T20:36:19.2935737Z   while signed in as an organization admin
2024-02-29T20:36:19.2936261Z     POST #finalize
2024-02-29T20:36:19.3778472Z       sets the finalize status and saves an event
2024-02-29T20:36:19.3779310Z     GET #index
2024-02-29T20:36:19.4414966Z       is successful
2024-02-29T20:36:19.4415835Z     POST #create
2024-02-29T20:36:19.4416819Z       with invalid params
2024-02-29T20:36:19.5020859Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-29T20:36:19.5412239Z         re-renders the 'new' template
2024-02-29T20:36:19.5808494Z         assigns a newly created but unsaved audit as @audit
2024-02-29T20:36:19.5809364Z       with valid params
2024-02-29T20:36:19.6213068Z         assigns a newly created audit as @audit
2024-02-29T20:36:19.6632860Z         redirects to the #show after created audit
2024-02-29T20:36:19.7024825Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-29T20:36:19.7414480Z         creates a new Audit
2024-02-29T20:36:19.7816882Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-29T20:36:19.7818284Z     GET #show
2024-02-29T20:36:19.8338536Z       is successful
2024-02-29T20:36:19.8339511Z     DELETE #destroy
2024-02-29T20:36:19.8340455Z       with valid params
2024-02-29T20:36:19.8820653Z         destroys the audit if the audit's status is `confirms`
2024-02-29T20:36:19.9232759Z         can not destroy the audit if the audit's status is `finalized`
2024-02-29T20:36:19.9638853Z         destroys the audit if the audit's status is `in_progress`
2024-02-29T20:36:19.9639616Z     GET #new
2024-02-29T20:36:20.0062760Z       is successful
2024-02-29T20:36:20.0063402Z     GET #edit
2024-02-29T20:36:20.0769046Z       redirects to #index if the status of audit is not `in_progress`
2024-02-29T20:36:20.1417399Z       is successful if the status of audit is `in_progress`
2024-02-29T20:36:20.1418120Z 
2024-02-29T20:36:20.1418706Z Organization management
2024-02-29T20:36:20.1419895Z   while signed in as an organization admin
2024-02-29T20:36:20.6701200Z     can see 'Make user' button for admins
2024-02-29T20:36:21.6430915Z     can deactivate a user in the organization
2024-02-29T20:36:22.1572740Z     can re-invite a user to an organization after 7 days
2024-02-29T20:36:23.1023748Z     can re-activate a user in the organization
2024-02-29T20:36:24.0705632Z     can add a new user to an organization
2024-02-29T20:36:24.0706540Z     Viewing the organization
2024-02-29T20:36:24.6333404Z       can view organization details
2024-02-29T20:36:24.6334140Z     Editing the organization
2024-02-29T20:36:25.8753077Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-29T20:36:26.7638089Z       can set the NDBN Member ID
2024-02-29T20:36:27.7606174Z       can select if the org repackages essentials
2024-02-29T20:36:29.2611323Z       can select and deselect Required Partner Fields
2024-02-29T20:36:30.2490438Z       can enable if the org uses single step invite and approve partner process
2024-02-29T20:36:31.2601231Z       can select if the org distributes essentials monthly
2024-02-29T20:36:32.2526289Z       can select if the org shows year-to-date values on the distribution printout
2024-02-29T20:36:33.1145342Z       can set a reminder and a deadline day
2024-02-29T20:36:33.9795930Z       can set a default storage location on the organization
2024-02-29T20:36:34.9730769Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-29T20:36:34.9732076Z   while signed in as a normal user
2024-02-29T20:36:35.4455938Z     cannot see 'Make user' button for admins
2024-02-29T20:36:35.9185730Z     can see summary details about the organization as a user
2024-02-29T20:36:35.9186554Z 
2024-02-29T20:36:35.9186868Z /partners/profiles
2024-02-29T20:36:35.9188322Z   GET #show
2024-02-29T20:36:35.9802839Z     displays the partner
2024-02-29T20:36:36.0366995Z     shows correct values for yes/no buttons
2024-02-29T20:36:36.0367849Z   GET #edit
2024-02-29T20:36:36.1394843Z     does not have default radio button value when value is nil
2024-02-29T20:36:36.2380139Z     has "Yes" radio button value when value is true
2024-02-29T20:36:36.3361224Z     has "No" radio button value when value is false
2024-02-29T20:36:36.4313912Z     displays the partner
2024-02-29T20:36:36.4315006Z   PUT #update
2024-02-29T20:36:36.4885564Z     updates the partner and profile
2024-02-29T20:36:36.4886426Z     with no social media
2024-02-29T20:36:36.5930536Z       shows an error
2024-02-29T20:36:36.5932446Z     when updating an existing value to a blank value
2024-02-29T20:36:36.6684144Z       does store N/A in the database
2024-02-29T20:36:36.7313485Z       updates the partner profile attribute to a blank value
2024-02-29T20:36:36.7975915Z       does not update other partner profile attributes to blank
2024-02-29T20:36:36.7976569Z 
2024-02-29T20:36:36.7976880Z /partners/children
2024-02-29T20:36:36.7978375Z   GET #index
2024-02-29T20:36:36.8877725Z     should render without any issues
2024-02-29T20:36:36.9381590Z     should export CSV
2024-02-29T20:36:36.9382261Z 
2024-02-29T20:36:36.9382528Z Vendor
2024-02-29T20:36:36.9384484Z   When vendor have purchases associated with them already
2024-02-29T20:36:37.5725470Z     can have a single vendor show semi-detailed stats about purchases
2024-02-29T20:36:38.1753246Z     can have existing vendors show in the #index with some summary stats
2024-02-29T20:36:38.1754134Z   when creating a new vendor
2024-02-29T20:36:38.9141402Z     cannot add a new vendor instance with empty attributes
2024-02-29T20:36:39.7043464Z     can create a new vendor instance as a user
2024-02-29T20:36:39.7044193Z   when editing an existing vendor
2024-02-29T20:36:40.4689249Z     does not update a vendor with empty attributes
2024-02-29T20:36:41.2697430Z     can update the contact info for a vendor as a user
2024-02-29T20:36:41.2698216Z   When a user views the index page
2024-02-29T20:36:41.7621480Z     should have the vendor names in alphabetical order
2024-02-29T20:36:41.7622391Z 
2024-02-29T20:36:41.7622688Z /account_requests
2024-02-29T20:36:41.7624701Z   GET #received
2024-02-29T20:36:41.7625484Z     when given a invalid token
2024-02-29T20:36:41.7714740Z       should render a error that says that is code provided is invalid
2024-02-29T20:36:41.7715785Z     when given a valid token
2024-02-29T20:36:41.7890887Z       should render the received template
2024-02-29T20:36:41.7891649Z   POST #create
2024-02-29T20:36:41.7892398Z     with invalid parameters
2024-02-29T20:36:41.8094561Z       renders a successful response (i.e. to display the 'new' template)
2024-02-29T20:36:41.8285924Z       does not create a new AccountRequest
2024-02-29T20:36:41.8286723Z     with valid parameters
2024-02-29T20:36:41.8432728Z       creates a new AccountRequest
2024-02-29T20:36:41.8575972Z       redirects to the created account_request confirmation
2024-02-29T20:36:41.8702566Z       delivers the confirmation email via default queue
2024-02-29T20:36:41.8703247Z   GET #confirm
2024-02-29T20:36:41.8704343Z     when given a invalid token
2024-02-29T20:36:41.8778951Z       should render a error that says that is code provided is invalid
2024-02-29T20:36:41.8779984Z     when given a token that has already been confirmed
2024-02-29T20:36:42.0750685Z       should render a error that says that is code provided is invalid
2024-02-29T20:36:42.0751970Z     when given a valid token
2024-02-29T20:36:42.0948996Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-29T20:36:42.0950114Z   GET #new
2024-02-29T20:36:42.1077510Z     renders a successful response
2024-02-29T20:36:42.1078072Z   GET #confirmation
2024-02-29T20:36:42.1079194Z     when given a token that has already been confirmed
2024-02-29T20:36:42.2999558Z       should render a error that says that is code provided is invalid
2024-02-29T20:36:42.3000333Z     when given a valid token
2024-02-29T20:36:42.3149081Z       should render the confirmation template
2024-02-29T20:36:42.3149887Z     when given a invalid token
2024-02-29T20:36:42.3210236Z       should render a error that says that is code provided is invalid
2024-02-29T20:36:42.3210978Z 
2024-02-29T20:36:42.3211197Z User account management
2024-02-29T20:36:42.3212595Z   when in staging
2024-02-29T20:36:42.7843422Z     should display staging warning
2024-02-29T20:36:43.2392660Z     should not allow the user to change staging credentials
2024-02-29T20:36:43.2393191Z   when not in staging
2024-02-29T20:36:44.1533012Z     should change the email
2024-02-29T20:36:45.0351686Z     should change an user name
2024-02-29T20:36:45.8227677Z     should fail when the email is invalid
2024-02-29T20:36:45.8406733Z W, [2024-02-29T12:36:45.840423 #2479]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-29T20:36:45.8407850Z W, [2024-02-29T12:36:45.840486 #2479]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-29T20:36:45.8409663Z W, [2024-02-29T12:36:45.840515 #2479]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-29T20:36:45.8411239Z W, [2024-02-29T12:36:45.840552 #2479]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-29T20:36:45.8411945Z 
2024-02-29T20:36:45.8412184Z Finished in 3 minutes 43.8 seconds (files took 8.43 seconds to load)
2024-02-29T20:36:45.8412641Z 239 examples, 0 failures
2024-02-29T20:36:45.8412829Z 
2024-02-29T20:36:45.8412929Z Randomized with seed 26349
2024-02-29T20:36:45.8413122Z 
2024-02-29T20:36:46.1566630Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3814 / 6426 LOC (59.35%) covered.
2024-02-29T20:36:46.6714598Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10678 LOC (0.36%) covered.
