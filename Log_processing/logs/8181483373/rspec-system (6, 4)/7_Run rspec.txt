2024-03-07T01:31:41.9437016Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:31:41.9438024Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:31:41.9487778Z shell: /usr/bin/bash -e {0}
2024-03-07T01:31:41.9488181Z env:
2024-03-07T01:31:41.9488453Z   POSTGRES_HOST: localhost
2024-03-07T01:31:41.9488991Z   DATABASE_HOST: localhost
2024-03-07T01:31:41.9489399Z   PG_USERNAME: postgres
2024-03-07T01:31:41.9489845Z   PG_PASSWORD: password
2024-03-07T01:31:41.9490211Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:31:41.9490597Z   POSTGRES_PORT: 5432
2024-03-07T01:31:41.9491011Z   PGHOST: localhost
2024-03-07T01:31:41.9491304Z   PGUSER: postgres
2024-03-07T01:31:41.9491631Z   RAILS_ENV: test
2024-03-07T01:31:41.9492276Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:31:41.9492712Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-07T01:31:41.9493104Z   KNAPSACK_PRO_CI_NODE_INDEX: 4
2024-03-07T01:31:41.9493586Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:31:41.9494133Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:31:41.9494751Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:31:41.9495351Z ##[endgroup]
2024-03-07T01:31:47.7955985Z I, [2024-03-07T01:31:47.795166 #2319]  INFO -- : [knapsack_pro] Generating RSpec test examples JSON report for slow test files to prepare it to be split by test examples (by individual test cases). Thanks to that, a single slow test file can be split across parallel CI nodes. Analyzing 1 slow test files.
2024-03-07T01:31:56.3058317Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 2537 / 6688 LOC (37.93%) covered.
2024-03-07T01:31:59.9282996Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/partners/approval_process_spec.rb" "spec/system/item_system_spec.rb" "spec/system/profile_served_area_system_spec.rb" "spec/system/admin/base_items_system_spec.rb" "spec/system/barcode_item_system_spec.rb" "spec/system/manufacturer_system_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:5:1:3]" "spec/system/sign_in_system_spec.rb" "spec/system/manage_system_spec.rb" "spec/system/annual_reports_system_spec.rb" "spec/requests/partners_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:3]" "spec/system/dashboard_system_spec.rb[1:2:5:8:1:3]" "spec/system/dashboard_system_spec.rb[1:2:3:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:3:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:5:1:1]" "spec/system/admin/barcode_items_system_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/admin_requests_spec.rb" "spec/system/question_system_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/distributions_by_county_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/attachments_requests_spec.rb"
2024-03-07T01:32:08.1647048Z Run options: include {:ids=>{"./spec/system/dashboard_system_spec.rb"=>["1:2:5:5:1:3", "1:2:4:8:1:1", "1:2:5:2:1:3", "1:2:5:8:1:3", "1:2:3:4:1:1", "1:2:5:3:1:1", "1:2:4:7:1:1", "1:2:5:5:1:1"]}}
2024-03-07T01:32:08.1678629Z 
2024-03-07T01:32:08.1679173Z Randomized with seed 40731
2024-03-07T01:32:08.9111500Z 
2024-03-07T01:32:08.9114874Z Manufacturer
2024-03-07T01:32:10.2035775Z   allows a user to update a manufacturer with empty attributes
2024-03-07T01:32:11.0182727Z   allows a user to update the contact info for a manufacturer
2024-03-07T01:32:11.7208926Z   allows a user to add a new manufacturer instance with empty attributes
2024-03-07T01:32:12.4884464Z   allows a user to create a new manufacturer instance
2024-03-07T01:32:12.4885367Z   When a user views the index page
2024-03-07T01:32:12.9753620Z     alphabetizes the manufacturer names
2024-03-07T01:32:12.9754993Z   When the Manufacturers have donations associated with them already
2024-03-07T01:32:13.6526627Z     allows single Manufacturers to show semi-detailed stats about donations from that manufacturer
2024-03-07T01:32:14.2842636Z     shows existing Manufacturers in the #index with some summary stats
2024-03-07T01:32:14.2843422Z 
2024-03-07T01:32:14.2843714Z Question search
2024-03-07T01:32:14.2844818Z   while logged in
2024-03-07T01:32:14.9305035Z     filters by question title
2024-03-07T01:32:14.9305620Z 
2024-03-07T01:32:14.9305879Z /partners/distributions
2024-03-07T01:32:14.9307184Z   GET #print
2024-03-07T01:32:15.0713655Z     returns http success
2024-03-07T01:32:15.0715201Z     with non-UTF8 characters
2024-03-07T01:32:15.1858425Z       returns http success
2024-03-07T01:32:15.1859037Z   GET #index
2024-03-07T01:32:15.2400417Z     should render without any issues
2024-03-07T01:32:15.2407315Z 
2024-03-07T01:32:15.2407656Z Item management
2024-03-07T01:32:16.2425474Z   can create a new item with dollars decimal amount for value field
2024-03-07T01:32:17.0176713Z   can filter the #index by base item as a user
2024-03-07T01:32:18.1944264Z   can make the item invisible to partners
2024-03-07T01:32:18.9625453Z   can update an existing item with empty attributes as a user
2024-03-07T01:32:19.8194817Z   can create a new item as a user
2024-03-07T01:32:20.6552972Z   can update an existing item as a user
2024-03-07T01:32:21.4038660Z   can create a new item with empty attributes as a user
2024-03-07T01:32:21.4039908Z   destroying items
2024-03-07T01:32:21.4040502Z     when an item has history
2024-03-07T01:32:22.3971922Z       can be soft-deleted (deactivated) by the user
2024-03-07T01:32:22.3972587Z     when an item does not have history
2024-03-07T01:32:23.2980438Z       can be fully deleted by the user
2024-03-07T01:32:23.2981311Z   restoring items
2024-03-07T01:32:24.6796587Z     allows a user to restore the item
2024-03-07T01:32:24.6797462Z   Item Table Tabs >
2024-03-07T01:32:25.5007392Z     should display items in separate tabs
2024-03-07T01:32:28.2013442Z     should display an Item Inventory table
2024-03-07T01:32:28.2014542Z   Item Category Management
2024-03-07T01:32:28.2015377Z     creating a new item category and associating to a new item
2024-03-07T01:32:28.2016271Z       and associating to a new item
2024-03-07T01:32:30.1075037Z         should create the new item with the correct category
2024-03-07T01:32:30.1076014Z       and associating to a existing item
2024-03-07T01:32:32.3544369Z         should associate the item with the category
2024-03-07T01:32:32.3545473Z 
2024-03-07T01:32:32.3545835Z Attachments
2024-03-07T01:32:32.3547075Z   DELETE #destroy
2024-03-07T01:32:32.4071126Z     redirects to referrer
2024-03-07T01:32:32.4071717Z 
2024-03-07T01:32:32.4072291Z User sign-in handling
2024-03-07T01:32:32.4073760Z   when users are valid and don't belong to an organization
2024-03-07T01:32:33.2012877Z     redirects to 403
2024-03-07T01:32:33.2013848Z   when a partner user logs in
2024-03-07T01:32:34.2206624Z     redirects to the partner page
2024-03-07T01:32:34.2208232Z   when users are valid and belong to an organization
2024-03-07T01:32:35.1006677Z     redirects to user's dashboard
2024-03-07T01:32:35.1007738Z   when users are invalid
2024-03-07T01:32:35.7984701Z     shows invalid credentials alert
2024-03-07T01:32:35.7985323Z 
2024-03-07T01:32:35.7985815Z Organization Administration
2024-03-07T01:32:35.7987259Z   while signed in as an organization admin
2024-03-07T01:32:36.2781887Z     can bail back to their own site as a user
2024-03-07T01:32:37.3874232Z     can edit the properties for an organization as an admin
2024-03-07T01:32:37.3874947Z     When looking at a single organization
2024-03-07T01:32:38.1543508Z       can view details about an organization, including the users as an admin
2024-03-07T01:32:38.1544608Z   while signed in as a normal user
2024-03-07T01:32:38.6118535Z     cannot see an edit link as a user
2024-03-07T01:32:38.6120903Z 
2024-03-07T01:32:38.6121368Z Partners
2024-03-07T01:32:38.6123924Z   GET #approve_application
2024-03-07T01:32:38.6124756Z     when the approval was successful
2024-03-07T01:32:38.6515020Z       should redirect to the partners index page with a success flash message
2024-03-07T01:32:38.6516135Z     when the approval failed
2024-03-07T01:32:38.6828161Z       should redirect to the partners index page with a failure flash message
2024-03-07T01:32:38.6829403Z   POST #create
2024-03-07T01:32:38.6830058Z     when given invalid partner attributes in the params
2024-03-07T01:32:38.7234811Z       should not create a new Partners::Profile record
2024-03-07T01:32:38.7603310Z       should not create a new Partner record
2024-03-07T01:32:38.7986560Z       should display the error message
2024-03-07T01:32:38.7987930Z     when given valid partner attributes in the params
2024-03-07T01:32:38.8188991Z       should create a new Partner record
2024-03-07T01:32:38.8377045Z       redirect to the partners index page
2024-03-07T01:32:38.8575901Z       should create a new Partners::Profile record
2024-03-07T01:32:38.8576697Z   GET #show
2024-03-07T01:32:38.8577441Z     csv
2024-03-07T01:32:38.9348387Z       is expected to be successful
2024-03-07T01:32:38.9349205Z     html
2024-03-07T01:32:39.0173412Z       is expected to be successful
2024-03-07T01:32:39.0174363Z       when the partner is uninvited
2024-03-07T01:32:39.0903504Z         does not show the delete button
2024-03-07T01:32:39.1727385Z         does not include impact metrics
2024-03-07T01:32:39.1728436Z         when the partner has no users
2024-03-07T01:32:39.2614589Z           shows the delete button
2024-03-07T01:32:39.2615411Z       when the partner is invited
2024-03-07T01:32:39.3383400Z         includes impact metrics
2024-03-07T01:32:39.3384367Z   POST #recertify_partner
2024-03-07T01:32:39.3385328Z     when the request for recertification from the partner was successful
2024-03-07T01:32:39.3681517Z       should return back to the partners page with a success flash
2024-03-07T01:32:39.3682724Z     when the request for recertification from the partner was NOT successful
2024-03-07T01:32:39.3969184Z       should return back to the partners page with a success flash
2024-03-07T01:32:39.3970464Z   DELETE #destroy
2024-03-07T01:32:39.4397076Z     redirects to #index
2024-03-07T01:32:39.4397892Z   POST #invite_and_approve
2024-03-07T01:32:39.4398991Z     when invitation succeeded and approval succeed
2024-03-07T01:32:39.4716077Z       sends invitation email and approve partner in single step
2024-03-07T01:32:39.4717032Z     when invitation failed
2024-03-07T01:32:39.5014490Z       should redirect to the partners index page with a notice flash message
2024-03-07T01:32:39.5015751Z     when approval fails
2024-03-07T01:32:39.6299425Z       should redirect to the partners index page with a notice flash message
2024-03-07T01:32:39.6300522Z   POST #invite_partner_user
2024-03-07T01:32:39.6301357Z     when there is an error in invite
2024-03-07T01:32:39.6596777Z       redirect to partner url with error message
2024-03-07T01:32:39.6597909Z     when the invite successfully
2024-03-07T01:32:39.6886361Z       send the invite
2024-03-07T01:32:39.6886997Z   POST #update
2024-03-07T01:32:39.6888035Z     unsuccessful save due to empty params
2024-03-07T01:32:39.7416760Z       renders :edit
2024-03-07T01:32:39.7417497Z     successful save
2024-03-07T01:32:39.7738208Z       redirects to #show
2024-03-07T01:32:39.8061873Z       update partner
2024-03-07T01:32:39.8062480Z   GET #index
2024-03-07T01:32:39.8063329Z     html
2024-03-07T01:32:39.8602796Z       is expected to be successful
2024-03-07T01:32:39.8603690Z     csv
2024-03-07T01:32:39.8907265Z       is expected to be successful
2024-03-07T01:32:39.8908174Z   PUT #deactivate
2024-03-07T01:32:39.8909100Z     when the partner successfully deactivates
2024-03-07T01:32:39.9227794Z       changes the partner status to deactivated and redirects with flash
2024-03-07T01:32:39.9228766Z   GET #edit
2024-03-07T01:32:39.9713100Z     returns http success
2024-03-07T01:32:39.9714078Z   POST #import_csv
2024-03-07T01:32:39.9714861Z     csv file with wrong headers
2024-03-07T01:32:39.9839182Z       presents a flash error message
2024-03-07T01:32:39.9955209Z       redirects to :index
2024-03-07T01:32:39.9955727Z     with a csv file
2024-03-07T01:32:40.0274144Z       redirects to :index
2024-03-07T01:32:40.0323405Z       invokes .import_csv
2024-03-07T01:32:40.0635720Z       presents a flash notice message
2024-03-07T01:32:40.0636809Z     without a csv file
2024-03-07T01:32:40.0745510Z       redirects to :index
2024-03-07T01:32:40.0852513Z       presents a flash error message
2024-03-07T01:32:40.0853300Z   POST #create
2024-03-07T01:32:40.0854301Z     unsuccessful save due to empty params
2024-03-07T01:32:40.1207145Z       renders :new
2024-03-07T01:32:40.1208015Z     successful save
2024-03-07T01:32:40.1387852Z       redirects to #index
2024-03-07T01:32:40.1567591Z       creates a new partner
2024-03-07T01:32:40.1568478Z   GET #new
2024-03-07T01:32:40.1870294Z     returns http success
2024-03-07T01:32:40.1871011Z   PUT #reactivate
2024-03-07T01:32:40.1872082Z     when trying to reactivate a partner who is not deactivated
2024-03-07T01:32:40.2155750Z       fails to change the partner status to reactivated and redirects with flash error message
2024-03-07T01:32:40.2156939Z     when the partner successfully reactivates
2024-03-07T01:32:40.2473113Z       changes the partner status to approved and redirects with flash
2024-03-07T01:32:40.2474320Z   POST #invite
2024-03-07T01:32:40.2763837Z     sends the invite
2024-03-07T01:32:40.2764654Z 
2024-03-07T01:32:40.2764894Z /partners/profiles
2024-03-07T01:32:40.2766581Z   GET #show
2024-03-07T01:32:40.3416328Z     shows correct values for yes/no buttons
2024-03-07T01:32:40.3886504Z     displays the partner
2024-03-07T01:32:40.3887430Z   GET #edit
2024-03-07T01:32:40.4891984Z     has "No" radio button value when value is false
2024-03-07T01:32:40.5798436Z     does not have default radio button value when value is nil
2024-03-07T01:32:40.6606513Z     displays the partner
2024-03-07T01:32:40.7448662Z     has "Yes" radio button value when value is true
2024-03-07T01:32:40.7449988Z   PUT #update
2024-03-07T01:32:40.7956419Z     updates the partner and profile
2024-03-07T01:32:40.7957177Z     with no social media
2024-03-07T01:32:40.8831811Z       shows an error
2024-03-07T01:32:40.8832520Z     when updating an existing value to a blank value
2024-03-07T01:32:40.9302910Z       does not update other partner profile attributes to blank
2024-03-07T01:32:40.9773030Z       updates the partner profile attribute to a blank value
2024-03-07T01:32:41.0240855Z       does store N/A in the database
2024-03-07T01:32:41.0241933Z 
2024-03-07T01:32:41.0242180Z /partners/dashboard
2024-03-07T01:32:41.1111034Z   displays upcoming distributions
2024-03-07T01:32:41.1112110Z   with both roles
2024-03-07T01:32:41.1611427Z     should include the switch link
2024-03-07T01:32:41.1612219Z   GET #index
2024-03-07T01:32:41.2372183Z     does not display requests in other states
2024-03-07T01:32:41.3065142Z     displays requests that are pending
2024-03-07T01:32:41.3066006Z   with just partner role
2024-03-07T01:32:41.3518476Z     should not display the switch link
2024-03-07T01:32:41.3519452Z   BroadcastAnnouncement card
2024-03-07T01:32:41.4031645Z     doesn't display announcements from super admins
2024-03-07T01:32:41.4499173Z     doesn't display announcements if there are not valid ones
2024-03-07T01:32:41.4995367Z     displays announcements if there are valid ones
2024-03-07T01:32:41.4995995Z 
2024-03-07T01:32:41.4996243Z Admin::Questions
2024-03-07T01:32:41.4997334Z   while signed in as a super admin
2024-03-07T01:32:41.4998862Z     PATCH #update
2024-03-07T01:32:41.5235759Z       lets the user update questions
2024-03-07T01:32:41.5236809Z     GET #edit
2024-03-07T01:32:41.5631425Z       lets the user load the edit question page
2024-03-07T01:32:41.5632216Z     GET #new
2024-03-07T01:32:41.5922484Z       lets the user load the new question page
2024-03-07T01:32:41.5923375Z     GET #index
2024-03-07T01:32:41.6196526Z       lets the user load the page
2024-03-07T01:32:41.6197551Z     POST #create
2024-03-07T01:32:41.6372938Z       lets the user create questions
2024-03-07T01:32:41.6373667Z     DELETE #destroy
2024-03-07T01:32:41.6569169Z       lets the user delete questions
2024-03-07T01:32:41.6570032Z 
2024-03-07T01:32:41.6570270Z Barcode Items Admin
2024-03-07T01:32:41.6573374Z   while signed in as a super admin
2024-03-07T01:32:41.6574256Z     user visits the edit page
2024-03-07T01:32:41.7362587Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:41.7373519Z       updates the barcode item (FAILED - 1)
2024-03-07T01:32:41.7374220Z     user visits the index page
2024-03-07T01:32:41.8003847Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:41.8013183Z       deletes a global barcode (FAILED - 2)
2024-03-07T01:32:41.8683812Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:41.8693531Z       shows the barcode item (FAILED - 3)
2024-03-07T01:32:41.9337812Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:41.9346932Z       creates a new global barcode item (FAILED - 4)
2024-03-07T01:32:41.9347921Z     user visits the show page
2024-03-07T01:32:41.9990825Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:42.0000654Z       shows the barcode item (FAILED - 5)
2024-03-07T01:32:42.0001449Z     user visits the new page
2024-03-07T01:32:42.7595651Z       creates a new global barcode item (FAILED - 6)
2024-03-07T01:32:42.7597899Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_creates-a-new-global-barcode-item_2024-03-06-17-32-42.610.html[0m
2024-03-07T01:32:42.7601058Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_creates-a-new-global-barcode-item_2024-03-06-17-32-42.610.png[0m
2024-03-07T01:32:42.7602331Z 
2024-03-07T01:32:42.7602483Z Barcode management
2024-03-07T01:32:43.4857047Z   prevents a user from adding a new barcode with empty attributes
2024-03-07T01:32:43.4858289Z   While viewing the barcode items index page
2024-03-07T01:32:44.0049955Z     should have the filter presented to user list items in alphabetical order
2024-03-07T01:32:44.0844082Z WARN: Screenshot could not be saved. `page.current_path` is empty.
2024-03-07T01:32:44.0855958Z     should only show the barcodes created within the organization (FAILED - 7)
2024-03-07T01:32:44.8573224Z     can have a user filter the #index by item type
2024-03-07T01:32:45.6116473Z     can have a user filter the #index by barcode value
2024-03-07T01:32:46.3850689Z     can have a user filter the #index by base item type
2024-03-07T01:32:46.3851564Z   With organization-specific barcodes
2024-03-07T01:32:47.4590794Z     can have a user add a new barcode
2024-03-07T01:32:47.4591438Z     when editing an existing barcode
2024-03-07T01:32:48.2276209Z       saves the changes if they are valid
2024-03-07T01:32:48.9785054Z       fails to save the changes if the attributes are empty
2024-03-07T01:32:48.9790399Z 
2024-03-07T01:32:48.9790645Z Dashboard
2024-03-07T01:32:48.9792206Z   With an existing essentials bank
2024-03-07T01:32:48.9797157Z     Donations
2024-03-07T01:32:48.9799996Z       given 1 Donation on 2024-03-04 (only if a valid date), 3 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-07T01:32:48.9800823Z         filtering to 'Yesterday'
2024-03-07T01:32:50.3418698Z           shows the correct total and 3 Recent Donation link(s)
2024-03-07T01:32:50.3426998Z     Product Drives
2024-03-07T01:32:50.3430418Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-07T01:32:50.3431597Z         filtering to 'This Year'
2024-03-07T01:32:51.7524268Z           shows 3 Recent Donation link(s)
2024-03-07T01:32:51.7525879Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 3 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:32:51.7527216Z         filtering to 'Today'
2024-03-07T01:32:53.1412005Z           shows 3 Recent Donation link(s)
2024-03-07T01:32:53.1413896Z       given 1 Product Drive Donation on 2024-03-04 (unless 'All Time'), 4 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-07T01:32:53.1415496Z         filtering to 'Yesterday'
2024-03-07T01:32:54.5598613Z           shows the correct total donations
2024-03-07T01:32:54.5601049Z       given 1 Product Drive Donation on 2024-02-05 (unless 'All Time'), 4 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:32:54.5602204Z         filtering to 'Last 30 Days'
2024-03-07T01:32:56.1455288Z           shows the correct total donations
2024-03-07T01:32:57.5663631Z           shows 3 Recent Donation link(s)
2024-03-07T01:32:57.5664665Z     Purchases
2024-03-07T01:32:57.5668782Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-07T01:32:57.5670136Z         filtering to 'This Year'
2024-03-07T01:32:59.0511277Z           shows correct 3 Recent Purchase link(s)
2024-03-07T01:32:59.0512826Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:32:59.0513775Z         filtering to 'Last Month'
2024-03-07T01:33:00.4288716Z           shows correct 3 Recent Purchase link(s)
2024-03-07T01:33:00.4291161Z 
2024-03-07T01:33:00.4291456Z Admin
2024-03-07T01:33:00.4293152Z   while signed in as a non-super-admin
2024-03-07T01:33:00.4526717Z     disallows dashboard access, redirecting to the normal dashboard
2024-03-07T01:33:00.4527691Z   while signed in as a super admin
2024-03-07T01:33:00.4927668Z     allows a user to load the dashboard
2024-03-07T01:33:00.4928505Z     with rendered views
2024-03-07T01:33:00.7463283Z       shows the recently added users email
2024-03-07T01:33:01.0156156Z       shows a logout button
2024-03-07T01:33:01.0157157Z 
2024-03-07T01:33:01.0157496Z Base Item Admin
2024-03-07T01:33:01.0159246Z   While signed in as an Administrative User (super admin)
2024-03-07T01:33:01.5429081Z     can view a listing of all Base Items that shows a summary of its sub-items
2024-03-07T01:33:01.6489356Z     can view a single Base Item (FAILED - 8)
2024-03-07T01:33:01.6490431Z     when updating an existing base item
2024-03-07T01:33:02.3836462Z       should fail when updating the name to empty
2024-03-07T01:33:03.2082189Z       should succeed when changing the name
2024-03-07T01:33:03.2083098Z     when creating a new base item
2024-03-07T01:33:04.0261241Z       should succeed when creating a new base item with good data
2024-03-07T01:33:04.7456434Z       should fail when creating a new base item with empty attributes
2024-03-07T01:33:04.7457431Z   While signed in as a normal user
2024-03-07T01:33:06.1337490Z     should have a normal user not see anything
2024-03-07T01:33:06.1338476Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-07T01:33:06.2339092Z     can view a single Base Item (FAILED - 9)
2024-03-07T01:33:06.7700226Z     can view a listing of all Base Items that shows a summary of its sub-items
2024-03-07T01:33:06.7701751Z     when creating a new base item
2024-03-07T01:33:07.4908433Z       should fail when creating a new base item with empty attributes
2024-03-07T01:33:08.2731585Z       should succeed when creating a new base item with good data
2024-03-07T01:33:08.2732818Z     when updating an existing base item
2024-03-07T01:33:09.0800200Z       should succeed when changing the name
2024-03-07T01:33:09.8135180Z       should fail when updating the name to empty
2024-03-07T01:33:09.8135932Z 
2024-03-07T01:33:09.8136589Z Partners profile served area behaviour when accessed as bank
2024-03-07T01:33:09.8137880Z   changing the client share
2024-03-07T01:33:11.0838786Z     handles deletion properly
2024-03-07T01:33:12.1975888Z     handles a changed but correct total client share properly
2024-03-07T01:33:13.3918079Z     handles an invalid total client share properly
2024-03-07T01:33:14.1488182Z     handles addition properly
2024-03-07T01:33:14.1488974Z 
2024-03-07T01:33:14.1489470Z Approval process for partners
2024-03-07T01:33:14.1493024Z   request approval with invalid details
2024-03-07T01:33:15.4023952Z     should render an error message
2024-03-07T01:33:15.4024699Z   filling in organization details and requesting for approval
2024-03-07T01:33:15.4025599Z     GIVEN a partner user is new and wants to request approval
2024-03-07T01:33:32.3288813Z       should not allow them to make requests on the dashboard or the requests page
2024-03-07T01:33:32.3289822Z       AND they fill out the form and submit it
2024-03-07T01:33:32.3290809Z         THEN the organization approves them
2024-03-07T01:33:35.1704599Z           should show that they have been approved and able to make requests
2024-03-07T01:33:35.1705767Z 
2024-03-07T01:33:35.1706120Z Annual Reports
2024-03-07T01:33:35.1707439Z   while signed in as an organization admin
2024-03-07T01:33:36.2446478Z     has all the sub-reports we expect
2024-03-07T01:33:36.7473748Z     exists
2024-03-07T01:33:37.2562190Z     has the report from last year, if there is a purchase from last year
2024-03-07T01:33:37.2562986Z 
2024-03-07T01:33:37.2563287Z DistributionsByCounties
2024-03-07T01:33:37.2564420Z   While not signed in
2024-03-07T01:33:37.2651768Z     redirects for authentication
2024-03-07T01:33:37.2652506Z     While signed in as bank
2024-03-07T01:33:37.3584331Z       shows 'Unspecified 100%' if no served_areas
2024-03-07T01:33:37.3585426Z       basic behaviour with served areas
2024-03-07T01:33:37.5501330Z         handles multiple partners with overlapping service areas properly
2024-03-07T01:33:37.9088556Z 
2024-03-07T01:33:37.9089269Z Failures:
2024-03-07T01:33:37.9089664Z 
2024-03-07T01:33:37.9146401Z   1) Barcode Items Admin while signed in as a super admin user visits the edit page updates the barcode item
2024-03-07T01:33:37.9151345Z      Failure/Error: let!(:barcode_item) { create(:global_barcode_item) }
2024-03-07T01:33:37.9152032Z 
2024-03-07T01:33:37.9152390Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9153575Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9154343Z 
2024-03-07T01:33:37.9155714Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_edit_page_updates_the_barcode_item_561.png
2024-03-07T01:33:37.9156761Z 
2024-03-07T01:33:37.9198932Z 
2024-03-07T01:33:37.9200158Z      # ./spec/system/admin/barcode_items_system_spec.rb:63:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9205859Z 
2024-03-07T01:33:37.9206818Z   2) Barcode Items Admin while signed in as a super admin user visits the index page deletes a global barcode
2024-03-07T01:33:37.9208552Z      Failure/Error: let!(:barcode_item) { create(:global_barcode_item) }
2024-03-07T01:33:37.9209087Z 
2024-03-07T01:33:37.9209349Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9210113Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9210796Z 
2024-03-07T01:33:37.9212016Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_index_page_deletes_a_global_barcode_979.png
2024-03-07T01:33:37.9213144Z 
2024-03-07T01:33:37.9213149Z 
2024-03-07T01:33:37.9213571Z      # ./spec/system/admin/barcode_items_system_spec.rb:10:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9214079Z 
2024-03-07T01:33:37.9214559Z   3) Barcode Items Admin while signed in as a super admin user visits the index page shows the barcode item
2024-03-07T01:33:37.9215653Z      Failure/Error: let!(:barcode_item) { create(:global_barcode_item) }
2024-03-07T01:33:37.9216094Z 
2024-03-07T01:33:37.9216262Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9216833Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9217338Z 
2024-03-07T01:33:37.9218414Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_index_page_shows_the_barcode_item_125.png
2024-03-07T01:33:37.9219517Z 
2024-03-07T01:33:37.9219521Z 
2024-03-07T01:33:37.9219921Z      # ./spec/system/admin/barcode_items_system_spec.rb:10:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9220469Z 
2024-03-07T01:33:37.9221005Z   4) Barcode Items Admin while signed in as a super admin user visits the index page creates a new global barcode item
2024-03-07T01:33:37.9221900Z      Failure/Error: let!(:barcode_item) { create(:global_barcode_item) }
2024-03-07T01:33:37.9222356Z 
2024-03-07T01:33:37.9222521Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9223138Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9223459Z 
2024-03-07T01:33:37.9224632Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_index_page_creates_a_new_global_barcode_item_673.png
2024-03-07T01:33:37.9225747Z 
2024-03-07T01:33:37.9225752Z 
2024-03-07T01:33:37.9226175Z      # ./spec/system/admin/barcode_items_system_spec.rb:10:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9226749Z 
2024-03-07T01:33:37.9227211Z   5) Barcode Items Admin while signed in as a super admin user visits the show page shows the barcode item
2024-03-07T01:33:37.9228068Z      Failure/Error: let!(:barcode_item) { create(:global_barcode_item) }
2024-03-07T01:33:37.9228458Z 
2024-03-07T01:33:37.9228820Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9229386Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9229697Z 
2024-03-07T01:33:37.9230768Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_show_page_shows_the_barcode_item_305.png
2024-03-07T01:33:37.9231861Z 
2024-03-07T01:33:37.9231866Z 
2024-03-07T01:33:37.9232357Z      # ./spec/system/admin/barcode_items_system_spec.rb:82:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9232858Z 
2024-03-07T01:33:37.9233337Z   6) Barcode Items Admin while signed in as a super admin user visits the new page creates a new global barcode item
2024-03-07T01:33:37.9234636Z      Failure/Error: @barcode_item = BarcodeItem.create(barcode_item_params.merge(barcodeable_type: "BaseItem"))
2024-03-07T01:33:37.9235320Z 
2024-03-07T01:33:37.9235487Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9236069Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9236417Z 
2024-03-07T01:33:37.9237520Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_items_admin_while_signed_in_as_a_super_admin_user_visits_the_new_page_creates_a_new_global_barcode_item_109.png
2024-03-07T01:33:37.9238904Z 
2024-03-07T01:33:37.9238909Z 
2024-03-07T01:33:37.9239190Z      # ./app/controllers/admin/barcode_items_controller.rb:28:in `create'
2024-03-07T01:33:37.9239776Z      # ------------------
2024-03-07T01:33:37.9240318Z      # --- Caused by: ---
2024-03-07T01:33:37.9240716Z      # Capybara::ExpectationNotMet:
2024-03-07T01:33:37.9337173Z      #   expected to find text "66666" in "Puma caught this error: can't write unknown attribute `barcode_count` (ActiveModel::MissingAttributeError)\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activemodel-7.0.8/lib/active_model/attribute.rb:211:in `with_value_from_database'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activemodel-7.0.8/lib/active_model/attribute_set.rb:55:in `write_from_user'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/attribute_methods/write.rb:36:in `write_attribute'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/attribute_methods.rb:343:in `[]='\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/persistence.rb:836:in `increment'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/persistence.rb:848:in `increment!'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/locking/optimistic.rb:64:in `increment!'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/callbacks.rb:450:in `increment!'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/associations/belongs_to_association.rb:101:in `update_counters'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/associations/belongs_to_association.rb:53:in `increment_counters'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/counter_cache.rb:169:in `block in _create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/counter_cache.rb:192:in `block in each_counter_cached_associations'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/counter_cache.rb:191:in `each'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/counter_cache.rb:191:in `each_counter_cached_associations'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/counter_cache.rb:168:in `_create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/locking/optimistic.rb:84:in `_create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/attribute_methods/dirty.rb:222:in `_create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/callbacks.rb:459:in `block in _create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:107:in `run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:929:in `_run_create_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/callbacks.rb:459:in `_create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/timestamp.rb:108:in `_create_record'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/persistence.rb:1069:in `create_or_update'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/callbacks.rb:455:in `block in create_or_update'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:118:in `block in run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/autosave_association.rb:370:in `around_save_collection_association'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:127:in `block in run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:138:in `run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:929:in `_run_save_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/callbacks.rb:455:in `create_or_update'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/timestamp.rb:126:in `create_or_update'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/persistence.rb:615:in `save'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/validations.rb:47:in `save'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/transactions.rb:298:in `block in save'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/transactions.rb:298:in `save'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/suppressor.rb:50:in `save'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/persistence.rb:38:in `create'\n/home/runner/work/human-essentials/human-essentials/app/controllers/admin/barcode_items_controller.rb:28:in `create'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/abstract_controller/base.rb:215:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/rendering.rb:165:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/abstract_controller/callbacks.rb:234:in `block in process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:118:in `block in run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actiontext-7.0.8/lib/action_text/rendering.rb:20:in `with_renderer'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actiontext-7.0.8/lib/action_text/engine.rb:69:in `block (4 levels) in <class:Engine>'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:127:in `instance_exec'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:127:in `block in run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:138:in `run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/abstract_controller/callbacks.rb:233:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/rescue.rb:23:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/notifications.rb:206:in `block in instrument'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/notifications/instrumenter.rb:24:in `instrument'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/notifications.rb:206:in `instrument'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/instrumentation.rb:66:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activerecord-7.0.8/lib/active_record/railties/controller_runtime.rb:27:in `process_action'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/abstract_controller/base.rb:151:in `process'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionview-7.0.8/lib/action_view/rendering.rb:39:in `process'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal.rb:188:in `dispatch'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_controller/metal.rb:251:in `dispatch'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/routing/route_set.rb:32:in `serve'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/journey/router.rb:50:in `block in serve'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/journey/router.rb:32:in `each'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/journey/router.rb:32:in `serve'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/routing/route_set.rb:852:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/flipper-1.2.2/lib/flipper/middleware/memoizer.rb:87:in `memoized_call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/flipper-1.2.2/lib/flipper/middleware/memoizer.rb:45:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/omniauth-2.1.2/lib/omniauth/strategy.rb:202:in `call!'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/omniauth-2.1.2/lib/omniauth/strategy.rb:169:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/warden-1.2.9/lib/warden/manager.rb:36:in `block in call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/warden-1.2.9/lib/warden/manager.rb:34:in `catch'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/warden-1.2.9/lib/warden/manager.rb:34:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/tempfile_reaper.rb:15:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/etag.rb:27:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/conditional_get.rb:40:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/head.rb:12:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/http/permissions_policy.rb:38:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/http/content_security_policy.rb:36:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/session/abstract/id.rb:266:in `context'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/session/abstract/id.rb:260:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/cookies.rb:704:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/callbacks.rb:99:in `run_callbacks'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/callbacks.rb:26:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/bugsnag-6.26.3/lib/bugsnag/integrations/rack.rb:51:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/railties-7.0.8/lib/rails/rack/logger.rb:40:in `call_app'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/railties-7.0.8/lib/rails/rack/logger.rb:25:in `block in call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/tagged_logging.rb:99:in `block in tagged'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/tagged_logging.rb:37:in `tagged'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/activesupport-7.0.8/lib/active_support/tagged_logging.rb:99:in `tagged'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/railties-7.0.8/lib/rails/rack/logger.rb:25:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/remote_ip.rb:93:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/request_store-1.5.1/lib/request_store/middleware.rb:19:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/request_id.rb:26:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/method_override.rb:24:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/runtime.rb:22:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/executor.rb:14:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/static.rb:23:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/sendfile.rb:110:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/actionpack-7.0.8/lib/action_dispatch/middleware/host_authorization.rb:131:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/railties-7.0.8/lib/rails/engine.rb:530:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/urlmap.rb:74:in `block in call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/urlmap.rb:58:in `each'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/urlmap.rb:58:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rack-2.2.8.1/lib/rack/builder.rb:244:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/server/animation_disabler.rb:25:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/server/middleware.rb:60:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\n/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'"
2024-03-07T01:33:37.9428636Z      #   ./spec/system/admin/barcode_items_system_spec.rb:55:in `block (4 levels) in <top (required)>'
2024-03-07T01:33:37.9429309Z 
2024-03-07T01:33:37.9429845Z   7) Barcode management While viewing the barcode items index page should only show the barcodes created within the organization
2024-03-07T01:33:37.9430705Z      Failure/Error: create(:global_barcode_item)
2024-03-07T01:33:37.9431063Z 
2024-03-07T01:33:37.9431241Z      ActiveModel::MissingAttributeError:
2024-03-07T01:33:37.9432224Z        can't write unknown attribute `barcode_count`
2024-03-07T01:33:37.9432544Z 
2024-03-07T01:33:37.9434023Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_barcode_management_while_viewing_the_barcode_items_index_page_should_only_show_the_barcodes_created_within_the_organization_269.png
2024-03-07T01:33:37.9435193Z 
2024-03-07T01:33:37.9435198Z 
2024-03-07T01:33:37.9435655Z      # ./spec/system/barcode_item_system_spec.rb:16:in `block (3 levels) in <top (required)>'
2024-03-07T01:33:37.9436132Z 
2024-03-07T01:33:37.9436601Z   8) Base Item Admin While signed in as an Administrative User (super admin) can view a single Base Item
2024-03-07T01:33:37.9437615Z      Failure/Error: <h3 class="card-title">Size: <%= @base_item.size || "no size provided" %></h3>
2024-03-07T01:33:37.9438112Z 
2024-03-07T01:33:37.9438361Z      ActionView::Template::Error:
2024-03-07T01:33:37.9439835Z        undefined method `size' for #<BaseItem id: 1, name: "Adult Briefs (Large/X-Large)", category: "Diapers - Adult Briefs", created_at: "2024-03-06 17:32:08.341283000 -0800", updated_at: "2024-03-06 17:32:08.341273000 -0800", item_count: 1, partner_key: "adult_lxl">
2024-03-07T01:33:37.9441459Z      # ./app/views/admin/base_items/show.html.erb:33:in `_app_views_admin_base_items_show_html_erb___4101818325922469471_156920'
2024-03-07T01:33:37.9442230Z      # ------------------
2024-03-07T01:33:37.9442618Z      # --- Caused by: ---
2024-03-07T01:33:37.9442968Z      # NoMethodError:
2024-03-07T01:33:37.9444312Z      #   undefined method `size' for #<BaseItem id: 1, name: "Adult Briefs (Large/X-Large)", category: "Diapers - Adult Briefs", created_at: "2024-03-06 17:32:08.341283000 -0800", updated_at: "2024-03-06 17:32:08.341273000 -0800", item_count: 1, partner_key: "adult_lxl">
2024-03-07T01:33:37.9445850Z      #   ./app/views/admin/base_items/show.html.erb:33:in `_app_views_admin_base_items_show_html_erb___4101818325922469471_156920'
2024-03-07T01:33:37.9446444Z 
2024-03-07T01:33:37.9447000Z   9) Base Item Admin While signed in as an Administrative User with no organization (super admin no org) can view a single Base Item
2024-03-07T01:33:37.9448047Z      Failure/Error: <h3 class="card-title">Size: <%= @base_item.size || "no size provided" %></h3>
2024-03-07T01:33:37.9448500Z 
2024-03-07T01:33:37.9448675Z      ActionView::Template::Error:
2024-03-07T01:33:37.9450054Z        undefined method `size' for #<BaseItem id: 1, name: "Adult Briefs (Large/X-Large)", category: "Diapers - Adult Briefs", created_at: "2024-03-06 17:32:08.341283000 -0800", updated_at: "2024-03-06 17:32:08.341273000 -0800", item_count: 1, partner_key: "adult_lxl">
2024-03-07T01:33:37.9451532Z      # ./app/views/admin/base_items/show.html.erb:33:in `_app_views_admin_base_items_show_html_erb___4101818325922469471_156920'
2024-03-07T01:33:37.9452255Z      # ------------------
2024-03-07T01:33:37.9452719Z      # --- Caused by: ---
2024-03-07T01:33:37.9453035Z      # NoMethodError:
2024-03-07T01:33:37.9454308Z      #   undefined method `size' for #<BaseItem id: 1, name: "Adult Briefs (Large/X-Large)", category: "Diapers - Adult Briefs", created_at: "2024-03-06 17:32:08.341283000 -0800", updated_at: "2024-03-06 17:32:08.341273000 -0800", item_count: 1, partner_key: "adult_lxl">
2024-03-07T01:33:37.9455846Z      #   ./app/views/admin/base_items/show.html.erb:33:in `_app_views_admin_base_items_show_html_erb___4101818325922469471_156920'
2024-03-07T01:33:37.9456658Z 
2024-03-07T01:33:37.9456904Z Finished in 1 minute 29.69 seconds (files took 8.02 seconds to load)
2024-03-07T01:33:37.9457496Z 155 examples, 9 failures
2024-03-07T01:33:37.9457729Z 
2024-03-07T01:33:37.9457843Z Failed examples:
2024-03-07T01:33:37.9458013Z 
2024-03-07T01:33:37.9458686Z rspec ./spec/system/admin/barcode_items_system_spec.rb:69 # Barcode Items Admin while signed in as a super admin user visits the edit page updates the barcode item
2024-03-07T01:33:37.9460113Z rspec ./spec/system/admin/barcode_items_system_spec.rb:21 # Barcode Items Admin while signed in as a super admin user visits the index page deletes a global barcode
2024-03-07T01:33:37.9461633Z rspec ./spec/system/admin/barcode_items_system_spec.rb:16 # Barcode Items Admin while signed in as a super admin user visits the index page shows the barcode item
2024-03-07T01:33:37.9463025Z rspec ./spec/system/admin/barcode_items_system_spec.rb:26 # Barcode Items Admin while signed in as a super admin user visits the index page creates a new global barcode item
2024-03-07T01:33:37.9464470Z rspec ./spec/system/admin/barcode_items_system_spec.rb:88 # Barcode Items Admin while signed in as a super admin user visits the show page shows the barcode item
2024-03-07T01:33:37.9465889Z rspec ./spec/system/admin/barcode_items_system_spec.rb:48 # Barcode Items Admin while signed in as a super admin user visits the new page creates a new global barcode item
2024-03-07T01:33:37.9467384Z rspec ./spec/system/barcode_item_system_spec.rb:14 # Barcode management While viewing the barcode items index page should only show the barcodes created within the organization
2024-03-07T01:33:37.9468860Z rspec ./spec/system/admin/base_items_system_spec.rb:59 # Base Item Admin While signed in as an Administrative User (super admin) can view a single Base Item
2024-03-07T01:33:37.9470301Z rspec ./spec/system/admin/base_items_system_spec.rb:123 # Base Item Admin While signed in as an Administrative User with no organization (super admin no org) can view a single Base Item
2024-03-07T01:33:37.9471104Z 
2024-03-07T01:33:37.9471321Z Randomized with seed 40731
2024-03-07T01:33:37.9471531Z 
2024-03-07T01:33:38.3895885Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:33:38.3898588Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3750 / 6473 LOC (57.93%) covered.
2024-03-07T01:33:38.4991384Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/partners/approval_process_spec.rb" "spec/system/item_system_spec.rb" "spec/system/profile_served_area_system_spec.rb" "spec/system/admin/base_items_system_spec.rb" "spec/system/barcode_item_system_spec.rb" "spec/system/manufacturer_system_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:5:1:3]" "spec/system/sign_in_system_spec.rb" "spec/system/manage_system_spec.rb" "spec/system/annual_reports_system_spec.rb" "spec/requests/partners_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:3]" "spec/system/dashboard_system_spec.rb[1:2:5:8:1:3]" "spec/system/dashboard_system_spec.rb[1:2:3:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:3:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:5:1:1]" "spec/system/admin/barcode_items_system_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/admin_requests_spec.rb" "spec/system/question_system_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/distributions_by_county_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/attachments_requests_spec.rb" failed
2024-03-07T01:33:38.8831664Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:33:38.8833689Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10760 LOC (0.35%) covered.
2024-03-07T01:33:38.9098315Z ##[error]Process completed with exit code 1.
