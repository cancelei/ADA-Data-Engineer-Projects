2024-02-21T13:17:27.9662285Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-21T13:17:27.9663148Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-21T13:17:27.9690654Z shell: /usr/bin/bash -e {0}
2024-02-21T13:17:27.9691159Z env:
2024-02-21T13:17:27.9691488Z   POSTGRES_HOST: localhost
2024-02-21T13:17:27.9691896Z   DATABASE_HOST: localhost
2024-02-21T13:17:27.9692343Z   PG_USERNAME: postgres
2024-02-21T13:17:27.9692683Z   PG_PASSWORD: password
2024-02-21T13:17:27.9693080Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-21T13:17:27.9693582Z   POSTGRES_PORT: 5432
2024-02-21T13:17:27.9693932Z   PGHOST: localhost
2024-02-21T13:17:27.9694284Z   PGUSER: postgres
2024-02-21T13:17:27.9694656Z   RAILS_ENV: test
2024-02-21T13:17:27.9704063Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-21T13:17:27.9704538Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-21T13:17:27.9705017Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-21T13:17:27.9705478Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-21T13:17:27.9706069Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-21T13:17:27.9706715Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-21T13:17:27.9707353Z   EVENTS_READ: true
2024-02-21T13:17:27.9707763Z ##[endgroup]
2024-02-21T13:17:33.5486304Z W, [2024-02-21T13:17:33.548311 #2333]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-21T13:17:33.5488420Z W, [2024-02-21T13:17:33.548373 #2333]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T13:17:33.5494539Z W, [2024-02-21T13:17:33.548401 #2333]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T13:17:33.5500232Z W, [2024-02-21T13:17:33.548440 #2333]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-21T13:17:36.1615211Z W, [2024-02-21T13:17:36.161153 #2333]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-21T13:17:36.1617642Z W, [2024-02-21T13:17:36.161202 #2333]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T13:17:36.1619371Z W, [2024-02-21T13:17:36.161227 #2333]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T13:17:36.1621819Z W, [2024-02-21T13:17:36.161278 #2333]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-21T13:17:36.1672660Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-21T13:17:44.4643525Z 
2024-02-21T13:17:44.4644331Z Randomized with seed 49366
2024-02-21T13:17:45.4513846Z 
2024-02-21T13:17:45.4514595Z StorageLocations
2024-02-21T13:17:45.4515641Z   While not signed in
2024-02-21T13:17:45.4789024Z     redirects the user to the sign-in page for CRUD actions
2024-02-21T13:17:45.4789744Z   While signed in
2024-02-21T13:17:45.4791132Z     GET #destroy
2024-02-21T13:17:45.5307514Z       redirects to #index
2024-02-21T13:17:45.5308077Z     GET #edit
2024-02-21T13:17:45.8517611Z       returns http success
2024-02-21T13:17:45.8518401Z     GET #show
2024-02-21T13:17:45.8518962Z       csv
2024-02-21T13:17:45.9260313Z         should be successful
2024-02-21T13:17:45.9261106Z       html
2024-02-21T13:17:45.9993743Z         should return a correct response
2024-02-21T13:17:45.9994870Z         with version date set
2024-02-21T13:17:45.9995529Z           with no version found
2024-02-21T13:17:46.0755684Z             should show N/A
2024-02-21T13:17:46.0756568Z           with a version found
2024-02-21T13:17:46.1589262Z             should show the version specified
2024-02-21T13:17:46.1590366Z     POST #import_csv
2024-02-21T13:17:46.1591562Z       with a csv file
2024-02-21T13:17:46.1811202Z         redirects
2024-02-21T13:17:46.1964256Z         presents a flash notice message
2024-02-21T13:17:46.2197303Z         invokes .import_csv
2024-02-21T13:17:46.2198304Z       without a csv file
2024-02-21T13:17:46.2336121Z         redirects to :index
2024-02-21T13:17:46.2449313Z         presents a flash error message
2024-02-21T13:17:46.2450326Z       csv file with wrong headers
2024-02-21T13:17:46.2575614Z         presents a flash error message
2024-02-21T13:17:46.2693700Z         redirects
2024-02-21T13:17:46.2694501Z     GET #new
2024-02-21T13:17:46.3014771Z       returns http success
2024-02-21T13:17:46.3015973Z     Looking at a different organization
2024-02-21T13:17:46.4730345Z       redirects the user to the sign-in page for CRUD actions
2024-02-21T13:17:46.4731057Z     PUT #reactivate
2024-02-21T13:17:46.4916660Z       undiscards
2024-02-21T13:17:46.4917434Z     PUT #deactivate
2024-02-21T13:17:46.5106238Z       discards
2024-02-21T13:17:46.5107035Z       with inventory
2024-02-21T13:17:46.5595333Z         does not discard
2024-02-21T13:17:46.5596083Z     GET #inventory
2024-02-21T13:17:46.5596992Z       without any overrides
2024-02-21T13:17:46.6161637Z         returns a collection that only includes items at the storage location
2024-02-21T13:17:46.6162732Z       when also including omitted items
2024-02-21T13:17:46.6666416Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-21T13:17:46.7155538Z         contains a collection of ducktyped entries that respond the same
2024-02-21T13:17:46.7156790Z       when also including inactive items
2024-02-21T13:17:46.7822762Z         returns a collection that also includes items that have been deactivated
2024-02-21T13:17:46.7823839Z     GET #index
2024-02-21T13:17:46.7824620Z       csv
2024-02-21T13:17:46.8810898Z         includes headers followed by alphabetized item names
2024-02-21T13:17:46.8987286Z         succeeds
2024-02-21T13:17:46.8988086Z       html
2024-02-21T13:17:46.9331527Z         succeeds
2024-02-21T13:17:46.9332295Z         with inactive locations
2024-02-21T13:17:46.9684118Z           does not includes the inactive location
2024-02-21T13:17:46.9685302Z           with include_inactive_locations
2024-02-21T13:17:47.0048923Z             includes the inactive location
2024-02-21T13:17:47.0051318Z 
2024-02-21T13:17:47.0051832Z Admin::Organizations
2024-02-21T13:17:47.0052876Z   When logged in as a super admin
2024-02-21T13:17:47.0054705Z     DELETE #destroy
2024-02-21T13:17:47.0055676Z       with a valid organization id
2024-02-21T13:17:47.5366942Z         redirects to #index
2024-02-21T13:17:47.5368114Z     GET #new
2024-02-21T13:17:47.5885502Z       returns http success
2024-02-21T13:17:47.5886733Z       when given a valid account request token in the query parameters
2024-02-21T13:17:47.6557811Z         should render new with pre populate input fields from the account_request
2024-02-21T13:17:47.6559566Z       when given a token that matches a account request that has already been processed
2024-02-21T13:17:47.8851050Z         should render new with a flash error message
2024-02-21T13:17:47.8852011Z     POST #create
2024-02-21T13:17:47.8852876Z       with invalid params
2024-02-21T13:17:47.9293299Z         does not create an organization and renders #create with an error message
2024-02-21T13:17:47.9295016Z       with valid params
2024-02-21T13:17:48.2180301Z         creates an organization and redirects to #index
2024-02-21T13:17:48.2181237Z     GET #index
2024-02-21T13:17:48.2500212Z       returns http success
2024-02-21T13:17:48.2500779Z     DELETE #destroy
2024-02-21T13:17:48.6045317Z       redirects
2024-02-21T13:17:48.6045902Z     PUT #update
2024-02-21T13:17:48.6247696Z       redirect
2024-02-21T13:17:48.6248591Z     GET #show
2024-02-21T13:17:48.8401436Z       returns http success
2024-02-21T13:17:48.8402260Z     GET #edit
2024-02-21T13:17:49.0499326Z       returns http success
2024-02-21T13:17:49.0500131Z     PATCH #update
2024-02-21T13:17:49.0500986Z       with an invalid update
2024-02-21T13:17:49.2544155Z         redirects to #edit with an error message
2024-02-21T13:17:49.4665695Z         returns http success
2024-02-21T13:17:49.4666500Z       with a valid update
2024-02-21T13:17:49.6532783Z         redirects to #index
2024-02-21T13:17:49.6534090Z   When logged in as a non-admin user
2024-02-21T13:17:49.6535472Z     GET #new
2024-02-21T13:17:49.6663761Z       redirects
2024-02-21T13:17:49.6664435Z     GET #edit
2024-02-21T13:17:49.6784171Z       redirects
2024-02-21T13:17:49.6784676Z     GET #index
2024-02-21T13:17:49.6902491Z       redirects
2024-02-21T13:17:49.6903083Z     PUT #update
2024-02-21T13:17:49.7032319Z       redirects
2024-02-21T13:17:49.7033048Z     POST #create
2024-02-21T13:17:49.7172613Z       redirects
2024-02-21T13:17:49.7173415Z 
2024-02-21T13:17:49.7173862Z Organization management
2024-02-21T13:17:49.7175129Z   while signed in as an organization admin
2024-02-21T13:17:58.8701131Z     can deactivate a user in the organization
2024-02-21T13:17:59.8353623Z     can re-activate a user in the organization
2024-02-21T13:18:00.3228780Z     can re-invite a user to an organization after 7 days
2024-02-21T13:18:01.3039622Z     can add a new user to an organization
2024-02-21T13:18:01.8116529Z     can see 'Make user' button for admins
2024-02-21T13:18:01.8117307Z     Editing the organization
2024-02-21T13:18:02.8423736Z       can enable if the org uses single step invite and approve partner process
2024-02-21T13:18:03.8110378Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-21T13:18:04.6769264Z       can set a reminder and a deadline day
2024-02-21T13:18:06.1371565Z       can select and deselect Required Partner Fields
2024-02-21T13:18:07.2828790Z       can select if the org repackages essentials
2024-02-21T13:18:08.3596461Z       can select if the org shows year-to-date values on the distribution printout
2024-02-21T13:18:09.2378779Z       can set the NDBN Member ID
2024-02-21T13:18:10.2764990Z       can select if the org distributes essentials monthly
2024-02-21T13:18:11.5499111Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-21T13:18:12.4204209Z       can set a default storage location on the organization
2024-02-21T13:18:12.4204876Z     Viewing the organization
2024-02-21T13:18:13.0028510Z       can view organization details
2024-02-21T13:18:13.0029405Z   while signed in as a normal user
2024-02-21T13:18:13.4957547Z     cannot see 'Make user' button for admins
2024-02-21T13:18:13.9810937Z     can see summary details about the organization as a user
2024-02-21T13:18:13.9811849Z 
2024-02-21T13:18:13.9812245Z /account_requests
2024-02-21T13:18:13.9814132Z   GET #received
2024-02-21T13:18:13.9815102Z     when given a invalid token
2024-02-21T13:18:13.9900417Z       should render a error that says that is code provided is invalid
2024-02-21T13:18:13.9901399Z     when given a valid token
2024-02-21T13:18:14.0055556Z       should render the received template
2024-02-21T13:18:14.0056353Z   GET #new
2024-02-21T13:18:14.0199016Z     renders a successful response
2024-02-21T13:18:14.0199864Z   GET #confirm
2024-02-21T13:18:14.0200629Z     when given a invalid token
2024-02-21T13:18:14.0269319Z       should render a error that says that is code provided is invalid
2024-02-21T13:18:14.0270421Z     when given a valid token
2024-02-21T13:18:14.0486574Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-21T13:18:14.0487639Z     when given a token that has already been confirmed
2024-02-21T13:18:14.2403381Z       should render a error that says that is code provided is invalid
2024-02-21T13:18:14.2404604Z   GET #confirmation
2024-02-21T13:18:14.2405435Z     when given a invalid token
2024-02-21T13:18:14.2472550Z       should render a error that says that is code provided is invalid
2024-02-21T13:18:14.2473700Z     when given a valid token
2024-02-21T13:18:14.2629533Z       should render the confirmation template
2024-02-21T13:18:14.2630472Z     when given a token that has already been confirmed
2024-02-21T13:18:14.4757580Z       should render a error that says that is code provided is invalid
2024-02-21T13:18:14.4758727Z   POST #create
2024-02-21T13:18:14.4759295Z     with valid parameters
2024-02-21T13:18:14.4891187Z       creates a new AccountRequest
2024-02-21T13:18:14.5014087Z       redirects to the created account_request confirmation
2024-02-21T13:18:14.5126238Z       delivers the confirmation email via default queue
2024-02-21T13:18:14.5127377Z     with invalid parameters
2024-02-21T13:18:14.5301825Z       renders a successful response (i.e. to display the 'new' template)
2024-02-21T13:18:14.5476526Z       does not create a new AccountRequest
2024-02-21T13:18:14.5477373Z 
2024-02-21T13:18:14.5477605Z /partners/children
2024-02-21T13:18:14.5478605Z   GET #index
2024-02-21T13:18:14.6490488Z     should render without any issues
2024-02-21T13:18:14.6997624Z     should export CSV
2024-02-21T13:18:14.6998408Z 
2024-02-21T13:18:14.6998754Z Audits
2024-02-21T13:18:14.7000061Z   while signed in as an organization admin
2024-02-21T13:18:14.7001684Z     GET #new
2024-02-21T13:18:14.7501179Z       is successful
2024-02-21T13:18:14.7501825Z     GET #show
2024-02-21T13:18:14.8037598Z       is successful
2024-02-21T13:18:14.8038269Z     POST #finalize
2024-02-21T13:18:14.8690755Z       sets the finalize status and saves an event
2024-02-21T13:18:14.8691865Z     GET #edit
2024-02-21T13:18:14.9305573Z       redirects to #index if the status of audit is not `in_progress`
2024-02-21T13:18:14.9888457Z       is successful if the status of audit is `in_progress`
2024-02-21T13:18:14.9889701Z     POST #create
2024-02-21T13:18:14.9890296Z       with valid params
2024-02-21T13:18:15.0270489Z         assigns a newly created audit as @audit
2024-02-21T13:18:15.0649966Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-21T13:18:15.1023284Z         redirects to the #show after created audit
2024-02-21T13:18:15.1403762Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-21T13:18:15.1788760Z         creates a new Audit
2024-02-21T13:18:15.1789963Z       with invalid params
2024-02-21T13:18:15.2182086Z         assigns a newly created but unsaved audit as @audit
2024-02-21T13:18:15.2704289Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-21T13:18:15.3061824Z         re-renders the 'new' template
2024-02-21T13:18:15.3062748Z     DELETE #destroy
2024-02-21T13:18:15.3063532Z       with valid params
2024-02-21T13:18:15.3418313Z         destroys the audit if the audit's status is `confirms`
2024-02-21T13:18:15.3760409Z         can not destroy the audit if the audit's status is `finalized`
2024-02-21T13:18:15.4115676Z         destroys the audit if the audit's status is `in_progress`
2024-02-21T13:18:15.4116656Z     GET #index
2024-02-21T13:18:15.4724906Z       is successful
2024-02-21T13:18:15.4725367Z 
2024-02-21T13:18:15.4726107Z DonationSites
2024-02-21T13:18:15.4726744Z   while signed in
2024-02-21T13:18:15.4727581Z     GET #index
2024-02-21T13:18:15.4728517Z       csv
2024-02-21T13:18:15.4946548Z         is expected to be successful
2024-02-21T13:18:15.4947275Z       html
2024-02-21T13:18:15.5277039Z         is expected to be successful
2024-02-21T13:18:15.5277602Z 
2024-02-21T13:18:15.5277959Z Profiles
2024-02-21T13:18:15.5279051Z   GET #edit
2024-02-21T13:18:15.6300224Z     returns http success
2024-02-21T13:18:15.6300859Z   POST #update
2024-02-21T13:18:15.6301415Z     successful save
2024-02-21T13:18:15.6779648Z       update partner
2024-02-21T13:18:15.7230607Z       redirects to #show
2024-02-21T13:18:15.7232055Z     when updating an existing value to a blank value
2024-02-21T13:18:15.7684198Z       should have blank values
2024-02-21T13:18:15.8142449Z       update partner
2024-02-21T13:18:15.8143211Z 
2024-02-21T13:18:15.8144348Z Kit management
2024-02-21T13:18:16.7101364Z   can create a new kit as a user with the proper quantity
2024-02-21T13:18:17.2888492Z   should not display inactive storage locations under allocations
2024-02-21T13:18:18.7954347Z   can allocate and deallocate quantity per storage location from kit index
2024-02-21T13:18:18.7955461Z   when there is no kit quantity
2024-02-21T13:18:19.9438247Z     will not change quantity amounts when deallocating
2024-02-21T13:18:19.9439783Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-21T13:18:21.0392629Z     will not change quantity amounts when allocating
2024-02-21T13:18:21.0393309Z 
2024-02-21T13:18:21.0393631Z Admin Organization Management
2024-02-21T13:18:21.0394724Z   While signed in as an Administrative User (super admin)
2024-02-21T13:18:22.9394238Z     creates a new organization
2024-02-21T13:18:24.2415683Z     can view organization details
2024-02-21T13:18:25.3828038Z     filters by organizations by name in organizations index page
2024-02-21T13:18:25.3828996Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-21T13:18:27.2543750Z     creates a new organization
2024-02-21T13:18:27.2544727Z 
2024-02-21T13:18:27.2545206Z Managing requests
2024-02-21T13:18:27.2546724Z   creating a individuals/family request
2024-02-21T13:18:27.2547523Z     GIVEN a partner user is permitted to make a request
2024-02-21T13:18:27.2548482Z       WHEN they create a request inproperly
2024-02-21T13:18:28.1666473Z         should show an error message with the instructions
2024-02-21T13:18:28.1667433Z       WHEN they create a request properly
2024-02-21T13:18:28.1668616Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T13:18:30.2852789Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-21T13:18:30.2853962Z   creating a request
2024-02-21T13:18:30.2854806Z     GIVEN a partner user is permitted to make a request
2024-02-21T13:18:30.2856566Z       WHEN they create a request properly
2024-02-21T13:18:30.2858084Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T13:18:32.5309890Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-21T13:18:32.5311270Z       WHEN they create a request inproperly by not inputting anything
2024-02-21T13:18:33.4283162Z         should show an error message with the instructions
2024-02-21T13:18:33.4284195Z       WHEN they create a request with only a comment
2024-02-21T13:18:34.3921220Z         should be created without any issue
2024-02-21T13:18:34.3924896Z 
2024-02-21T13:18:34.3925247Z Dashboard
2024-02-21T13:18:34.3926379Z   With a new essentials bank
2024-02-21T13:19:02.5580509Z     displays the getting started guide until the steps are completed
2024-02-21T13:19:02.5582133Z   With an existing essentials bank
2024-02-21T13:19:02.5582909Z     Purchases
2024-02-21T13:19:03.4726906Z       has a link to create a new purchase
2024-02-21T13:19:03.4728503Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T13:19:03.4730210Z         filtering to 'Yesterday'
2024-02-21T13:19:04.8713814Z           shows correct 1 Recent Purchase link(s)
2024-02-21T13:19:04.8715959Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T13:19:04.8717496Z         filtering to 'Last Month'
2024-02-21T13:19:06.2536483Z           shows correct 1 Recent Purchase link(s)
2024-02-21T13:19:06.2538294Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T13:19:06.2539552Z         filtering to 'This Month'
2024-02-21T13:19:07.7763205Z           shows correct 3 Recent Purchase link(s)
2024-02-21T13:19:07.7764911Z       given 1 Purchase on 2024-01-22  (unless 'All Time'), 2 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:07.7766170Z         filtering to 'Last 30 Days'
2024-02-21T13:19:09.2049922Z           shows correct 2 Recent Purchase link(s)
2024-02-21T13:19:09.2051712Z       given 1 Purchase on 2022-02-20  (unless 'All Time'), 4 during 2022-02-21..2024-01-06, and 1 on 2024-01-07
2024-02-21T13:19:09.2053377Z         filtering to '' (February 21, 2022 - January 6, 2024)
2024-02-21T13:19:10.7498522Z           shows correct 3 Recent Purchase link(s)
2024-02-21T13:19:10.7500475Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T13:19:10.7501925Z         filtering to 'This Year'
2024-02-21T13:19:12.1666963Z           shows correct 2 Recent Purchase link(s)
2024-02-21T13:19:12.1668764Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 4 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:12.1670121Z         filtering to 'Today'
2024-02-21T13:19:13.6959173Z           shows correct 3 Recent Purchase link(s)
2024-02-21T13:19:13.6961045Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 3 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:13.6962275Z         filtering to 'Last 7 Days'
2024-02-21T13:19:15.1788343Z           shows correct 3 Recent Purchase link(s)
2024-02-21T13:19:15.1789233Z     Product Drives
2024-02-21T13:19:15.7659492Z       has a widget for product drive summary data
2024-02-21T13:19:15.7661434Z       given 1 Product Drive Donation on 2024-01-22 (unless 'All Time'), 2 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:15.7662718Z         filtering to 'Last 30 Days'
2024-02-21T13:19:17.2117333Z           shows the correct total money raised
2024-02-21T13:19:18.6754505Z           shows 2 Recent Donation link(s)
2024-02-21T13:19:20.1015310Z           shows the correct total donations
2024-02-21T13:19:20.1017446Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T13:19:20.1018985Z         filtering to 'This Month'
2024-02-21T13:19:21.4604296Z           shows the correct total money raised
2024-02-21T13:19:22.8283544Z           shows the correct total donations
2024-02-21T13:19:26.3547601Z           shows 0 Recent Donation link(s)
2024-02-21T13:19:26.3548603Z       Product drive behaviour with Mixed Donation types
2024-02-21T13:19:27.0847145Z         only counts product drive money raised
2024-02-21T13:19:27.8176957Z         only shows product drive donations as product drive donations
2024-02-21T13:19:28.5381178Z         only counts product drive donations for product drive
2024-02-21T13:19:28.5383039Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T13:19:28.5383891Z         filtering to 'This Year'
2024-02-21T13:19:31.8679391Z           shows 0 Recent Donation link(s)
2024-02-21T13:19:33.2033830Z           shows the correct total donations
2024-02-21T13:19:34.5421003Z           shows the correct total money raised
2024-02-21T13:19:34.5423227Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 3 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T13:19:34.5424664Z         filtering to 'Yesterday'
2024-02-21T13:19:36.0544499Z           shows 3 Recent Donation link(s)
2024-02-21T13:19:37.5600212Z           shows the correct total donations
2024-02-21T13:19:39.0430251Z           shows the correct total money raised
2024-02-21T13:19:39.0432228Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T13:19:39.0433836Z         filtering to 'Last Month'
2024-02-21T13:19:40.4057612Z           shows the correct total donations
2024-02-21T13:19:43.7680459Z           shows 0 Recent Donation link(s)
2024-02-21T13:19:45.1118983Z           shows the correct total money raised
2024-02-21T13:19:45.1121133Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:45.1122845Z         filtering to 'Last 7 Days'
2024-02-21T13:19:46.6470488Z           shows 3 Recent Donation link(s)
2024-02-21T13:19:48.1758856Z           shows the correct total money raised
2024-02-21T13:19:49.6922109Z           shows the correct total donations
2024-02-21T13:19:49.6923878Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 4 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:19:49.6925407Z         filtering to 'Today'
2024-02-21T13:19:51.2248120Z           shows the correct total money raised
2024-02-21T13:19:52.7589879Z           shows the correct total donations
2024-02-21T13:19:54.2824598Z           shows 3 Recent Donation link(s)
2024-02-21T13:19:54.2826239Z       given 1 Product Drive Donation on 2022-02-20 (unless 'All Time'), 0 during 2022-02-21..2023-12-22, and 1 on 2023-12-23
2024-02-21T13:19:54.2827363Z         filtering to '' (February 21, 2022 - December 22, 2023)
2024-02-21T13:19:55.6652770Z           shows the correct total donations
2024-02-21T13:19:57.0126801Z           shows the correct total money raised
2024-02-21T13:20:00.4725637Z           shows 0 Recent Donation link(s)
2024-02-21T13:20:00.4726581Z     Manufacturer Donations
2024-02-21T13:20:01.0511098Z       has a link to create a new donation
2024-02-21T13:20:01.0512764Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T13:20:01.0514179Z         filtering to 'This Year'
2024-02-21T13:20:02.8267032Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T13:20:02.8270613Z       given 1 Manufacturer donating on 2024-01-22  (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:02.8271868Z         filtering to 'Last 30 Days'
2024-02-21T13:20:04.7455222Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T13:20:04.7457387Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 7 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:04.7458886Z         filtering to 'Today'
2024-02-21T13:20:07.0155931Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-21T13:20:07.0159062Z       given 1 Manufacturer donating on 2022-02-20  (unless 'All Time'), 8 during 2022-02-21..2023-12-25, and 1 on 2023-12-26
2024-02-21T13:20:07.0160342Z         filtering to '' (February 21, 2022 - December 25, 2023)
2024-02-21T13:20:09.2330541Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T13:20:09.2332913Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 6 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T13:20:09.2334487Z         filtering to 'Yesterday'
2024-02-21T13:20:11.1711820Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T13:20:11.1714207Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T13:20:11.1715868Z         filtering to 'This Month'
2024-02-21T13:20:12.5438081Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T13:20:12.5441977Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T13:20:12.5443862Z         filtering to 'Last Month'
2024-02-21T13:20:14.0491609Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-21T13:20:14.0493504Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 5 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:14.0494395Z         filtering to 'All Time'
2024-02-21T13:20:15.8170181Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T13:20:15.8171747Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:15.8173093Z         filtering to 'Last 7 Days'
2024-02-21T13:20:17.6521455Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T13:20:17.6522781Z     Distributions
2024-02-21T13:20:18.5758353Z       has a link to create a new distribution
2024-02-21T13:20:18.5760399Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T13:20:18.5761959Z         filtering to 'This Month'
2024-02-21T13:20:20.0050926Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T13:20:20.0053111Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T13:20:20.0055085Z         filtering to 'Last Month'
2024-02-21T13:20:21.4081897Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T13:20:21.4083640Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:21.4084584Z         filtering to 'Last 7 Days'
2024-02-21T13:20:22.8568865Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T13:20:22.8570893Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T13:20:22.8572485Z         filtering to 'This Year'
2024-02-21T13:20:24.2295029Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T13:20:24.2297094Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:24.2298607Z         filtering to 'Today'
2024-02-21T13:20:25.6600189Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T13:20:25.6601912Z       given 1 Distribution on 2024-01-22  (unless 'All Time'), 1 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:25.6603074Z         filtering to 'Last 30 Days'
2024-02-21T13:20:27.1277753Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-21T13:20:27.1279981Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:27.1281981Z         filtering to 'All Time'
2024-02-21T13:20:30.4966467Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T13:20:30.4968751Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T13:20:30.4969792Z         filtering to 'Yesterday'
2024-02-21T13:20:33.8679186Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T13:20:33.8680841Z       given 1 Distribution on 2022-02-20  (unless 'All Time'), 0 during 2022-02-21..2023-12-06, and 1 on 2023-12-07
2024-02-21T13:20:33.8682289Z         filtering to '' (February 21, 2022 - December 6, 2023)
2024-02-21T13:20:37.2717924Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T13:20:37.2718860Z     Donations
2024-02-21T13:20:38.1802054Z       has a link to create a new donation
2024-02-21T13:20:38.1803472Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T13:20:38.1804432Z         filtering to 'This Year'
2024-02-21T13:20:39.7133892Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T13:20:39.7136147Z       given 1 Donation on 2024-02-20 (only if a valid date), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:39.7137573Z         filtering to 'Today'
2024-02-21T13:20:41.1027195Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T13:20:41.1029033Z       given 1 Donation on 2024-01-22 (only if a valid date), 0 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:41.1030418Z         filtering to 'Last 30 Days'
2024-02-21T13:20:44.4764835Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T13:20:44.4766345Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T13:20:44.4767345Z         filtering to 'Last Month'
2024-02-21T13:20:45.9656482Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T13:20:45.9662435Z       given 1 Donation on 2024-02-19 (only if a valid date), 2 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T13:20:45.9664642Z         filtering to 'Yesterday'
2024-02-21T13:20:47.4127225Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T13:20:47.4129155Z       given 1 Donation on 2024-02-14 (only if a valid date), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T13:20:47.4130005Z         filtering to 'Last 7 Days'
2024-02-21T13:20:50.7443755Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T13:20:50.7445642Z       given 1 Donation on 2022-02-20 (only if a valid date), 2 during 2022-02-21..2023-12-23, and 1 on 2023-12-24
2024-02-21T13:20:50.7447335Z         filtering to '' (February 21, 2022 - December 23, 2023)
2024-02-21T13:20:52.2016333Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T13:20:52.2018013Z       given 1 Donation on 2024-01-31 (only if a valid date), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T13:20:52.2019091Z         filtering to 'This Month'
2024-02-21T13:20:53.7553416Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T13:20:53.7556074Z     Signage
2024-02-21T13:20:56.6437701Z       shows their organization name unless they have a logo set
2024-02-21T13:20:56.6438864Z     Inventory Totals
2024-02-21T13:20:56.6439418Z       Summary
2024-02-21T13:20:57.3793114Z         displays the on-hand totals
2024-02-21T13:20:57.3793721Z         when constrained to date range
2024-02-21T13:20:58.4287245Z           does not change
2024-02-21T13:20:58.4288990Z 
2024-02-21T13:20:58.4289332Z /partners/profiles
2024-02-21T13:20:58.4294317Z   GET #show
2024-02-21T13:20:58.4908203Z     displays the partner
2024-02-21T13:20:58.5448975Z     shows correct values for yes/no buttons
2024-02-21T13:20:58.5449639Z   PUT #update
2024-02-21T13:20:58.6002970Z     updates the partner and profile
2024-02-21T13:20:58.6004114Z     with no social media
2024-02-21T13:20:58.7006694Z       shows an error
2024-02-21T13:20:58.7007633Z     when updating an existing value to a blank value
2024-02-21T13:20:58.7648798Z       does not update other partner profile attributes to blank
2024-02-21T13:20:58.8211049Z       updates the partner profile attribute to a blank value
2024-02-21T13:20:58.8775907Z       does store N/A in the database
2024-02-21T13:20:58.8776989Z   GET #edit
2024-02-21T13:20:58.9623190Z     displays the partner
2024-02-21T13:20:59.0519572Z     does not have default radio button value when value is nil
2024-02-21T13:20:59.1411830Z     has "No" radio button value when value is false
2024-02-21T13:20:59.2306780Z     has "Yes" radio button value when value is true
2024-02-21T13:20:59.2307733Z 
2024-02-21T13:20:59.2307975Z Vendor
2024-02-21T13:20:59.2309220Z   When a user views the index page
2024-02-21T13:20:59.6962582Z     should have the vendor names in alphabetical order
2024-02-21T13:20:59.6963872Z   When vendor have purchases associated with them already
2024-02-21T13:21:00.3008816Z     can have a single vendor show semi-detailed stats about purchases
2024-02-21T13:21:00.8947841Z     can have existing vendors show in the #index with some summary stats
2024-02-21T13:21:00.8948815Z   when creating a new vendor
2024-02-21T13:21:01.6005205Z     cannot add a new vendor instance with empty attributes
2024-02-21T13:21:02.3720242Z     can create a new vendor instance as a user
2024-02-21T13:21:02.3721033Z   when editing an existing vendor
2024-02-21T13:21:03.1206289Z     does not update a vendor with empty attributes
2024-02-21T13:21:03.8988541Z     can update the contact info for a vendor as a user
2024-02-21T13:21:03.8989316Z 
2024-02-21T13:21:03.8989659Z Purchases
2024-02-21T13:21:03.8991143Z   while signed in as a normal user
2024-02-21T13:21:03.8992058Z     When visiting the index page
2024-02-21T13:21:03.8993568Z       In the middle of the year
2024-02-21T13:21:04.6675026Z         User sees total purchases value
2024-02-21T13:21:05.4551217Z         User can click to the new purchase form
2024-02-21T13:21:06.2177201Z         User sees purchased date column
2024-02-21T13:21:06.2177868Z       When filtering on the index page
2024-02-21T13:21:07.0310136Z         User can filter the #index by storage location
2024-02-21T13:21:07.8676366Z         User can filter the #index by vendor
2024-02-21T13:21:07.8677348Z         behaves like Date Range Picker
2024-02-21T13:21:07.8678461Z           when choosing 'All Time'
2024-02-21T13:21:08.8297653Z             shows all the records
2024-02-21T13:21:08.8298874Z           when choosing a date range that only includes the previous week
2024-02-21T13:21:09.7906122Z             shows only 1 record
2024-02-21T13:21:09.8122764Z           when choosing 'Last Month'
2024-02-21T13:21:10.7493475Z             shows only 2 of the records
2024-02-21T13:21:10.7496810Z     When creating a new purchase
2024-02-21T13:21:11.2455559Z       should not display inactive storage locations in dropdown
2024-02-21T13:21:11.2456350Z       Editing purchase
2024-02-21T13:21:11.8767608Z         A user can view another organizations purchase
2024-02-21T13:21:12.3730535Z         A user can see purchased_from value
2024-02-21T13:21:12.3731058Z       via manual entry
2024-02-21T13:21:13.4489699Z         User can create a purchase IN THE PAST
2024-02-21T13:21:14.4961974Z         User can create vendor from purchase
2024-02-21T13:21:15.6872374Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-21T13:21:16.5921767Z         User can create a purchase using dollars decimal amount
2024-02-21T13:21:17.6227920Z         Does not include inactive items in the line item fields
2024-02-21T13:21:17.6228567Z         when creating a purchase incorrectly
2024-02-21T13:21:18.5901514Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-21T13:21:19.4013513Z           should display failure with error messages
2024-02-21T13:21:19.4014440Z       via barcode entry
2024-02-21T13:21:20.6304988Z         a user can add items that do not yet have a barcode
2024-02-21T13:21:21.3536579Z         a user can add items via scanning them in by barcode
2024-02-21T13:21:22.2541335Z         User scan same barcode 2 times
2024-02-21T13:21:22.2542162Z     When visiting an existing purchase
2024-02-21T13:21:22.7318569Z       does not allow deletion of a purchase
2024-02-21T13:21:22.7319884Z   while signed in as an organization admin
2024-02-21T13:21:23.6130659Z     allows deletion of a purchase
2024-02-21T13:21:23.6131400Z 
2024-02-21T13:21:23.6131609Z User account management
2024-02-21T13:21:23.6133570Z   when in staging
2024-02-21T13:21:24.0836464Z     should not allow the user to change staging credentials
2024-02-21T13:21:24.5471642Z     should display staging warning
2024-02-21T13:21:24.5472326Z   when not in staging
2024-02-21T13:21:25.3240348Z     should fail when the email is invalid
2024-02-21T13:21:26.1960443Z     should change an user name
2024-02-21T13:21:27.0970036Z     should change the email
2024-02-21T13:21:27.1870012Z W, [2024-02-21T05:21:27.186691 #2388]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-21T13:21:27.1871718Z W, [2024-02-21T05:21:27.186767 #2388]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T13:21:27.1873779Z W, [2024-02-21T05:21:27.186788 #2388]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T13:21:27.1876020Z W, [2024-02-21T05:21:27.186831 #2388]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-21T13:21:27.1877165Z 
2024-02-21T13:21:27.1877546Z Finished in 3 minutes 42.7 seconds (files took 8.07 seconds to load)
2024-02-21T13:21:27.1878446Z 235 examples, 0 failures
2024-02-21T13:21:27.1878801Z 
2024-02-21T13:21:27.1878985Z Randomized with seed 49366
2024-02-21T13:21:27.1879324Z 
2024-02-21T13:21:27.4929994Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6404 LOC (59.65%) covered.
2024-02-21T13:21:28.0040257Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
