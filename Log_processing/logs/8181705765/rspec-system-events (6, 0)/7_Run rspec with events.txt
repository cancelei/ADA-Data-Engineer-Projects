2024-03-07T01:54:26.3941145Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:54:26.3942069Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:54:26.3993096Z shell: /usr/bin/bash -e {0}
2024-03-07T01:54:26.3993500Z env:
2024-03-07T01:54:26.3993931Z   POSTGRES_HOST: localhost
2024-03-07T01:54:26.3994292Z   DATABASE_HOST: localhost
2024-03-07T01:54:26.3994696Z   PG_USERNAME: postgres
2024-03-07T01:54:26.3995132Z   PG_PASSWORD: password
2024-03-07T01:54:26.3995535Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:54:26.3996004Z   POSTGRES_PORT: 5432
2024-03-07T01:54:26.3996363Z   PGHOST: localhost
2024-03-07T01:54:26.3996719Z   PGUSER: postgres
2024-03-07T01:54:26.3997080Z   RAILS_ENV: test
2024-03-07T01:54:26.3997698Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:54:26.3998174Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-07T01:54:26.3998650Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-07T01:54:26.3999109Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:54:26.3999733Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:54:26.4000342Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:54:26.4000984Z   EVENTS_READ: true
2024-03-07T01:54:26.4001382Z ##[endgroup]
2024-03-07T01:54:32.3238749Z I, [2024-03-07T01:54:32.323510 #2405]  INFO -- : [knapsack_pro] Generating RSpec test examples JSON report for slow test files to prepare it to be split by test examples (by individual test cases). Thanks to that, a single slow test file can be split across parallel CI nodes. Analyzing 1 slow test files.
2024-03-07T01:54:41.1032998Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 2522 / 6650 LOC (37.92%) covered.
2024-03-07T01:54:45.0319997Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/storage_location_system_spec.rb" "spec/system/account_request_system_spec.rb" "spec/requests/product_drives_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:3:1:1]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:3]" "spec/requests/storage_locations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:7:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:7:1:2]" "spec/system/dashboard_system_spec.rb[1:2:2:1:2:1]" "spec/requests/audits_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/system/dashboard_system_spec.rb[1:2:6:1]" "spec/requests/kit_requests_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb"
2024-03-07T01:54:53.3495892Z Run options: include {:ids=>{"./spec/system/dashboard_system_spec.rb"=>["1:2:4:8:1:1", "1:2:1:1", "1:2:6:7:1:1", "1:2:6:3:1:1", "1:2:5:9:1:3", "1:2:7:6:1:1", "1:2:7:4:1:1", "1:2:5:2:1:1", "1:2:4:4:1:1", "1:2:5:7:1:2", "1:2:2:1:2:1", "1:2:5:10:1", "1:2:6:1"]}}
2024-03-07T01:54:53.3520696Z 
2024-03-07T01:54:53.3521436Z Randomized with seed 26194
2024-03-07T01:54:54.2675666Z 
2024-03-07T01:54:54.2676522Z /kits
2024-03-07T01:54:54.2677065Z   while signed in
2024-03-07T01:54:54.3710369Z     PUT #deactivate
2024-03-07T01:54:54.3711254Z     PUT #reactivate
2024-03-07T01:54:54.4135311Z       cannot reactivate if it has an inactive item
2024-03-07T01:54:54.4623937Z       should successfully reactivate
2024-03-07T01:54:54.4624720Z     GET #index
2024-03-07T01:54:54.5625603Z       should include deactivate
2024-03-07T01:54:54.5626287Z       when it is already deactivated
2024-03-07T01:54:54.6421649Z         should show reactivate button
2024-03-07T01:54:54.6422351Z       when show inactive is checked
2024-03-07T01:54:54.7279579Z         should show the inactive kit
2024-03-07T01:54:54.7280785Z       when it cannot be deactivated
2024-03-07T01:54:54.8644197Z         should disable the button
2024-03-07T01:54:54.8645290Z 
2024-03-07T01:54:54.8645691Z ProductDrives
2024-03-07T01:54:54.8646728Z   While signed in >
2024-03-07T01:54:54.8649017Z     POST#create
2024-03-07T01:54:55.0689351Z       returns redirect http status
2024-03-07T01:54:55.0689938Z     DELETE #destroy
2024-03-07T01:54:55.2617182Z       redirects to the index
2024-03-07T01:54:55.2617976Z     GET #new
2024-03-07T01:54:55.4793322Z       returns http success
2024-03-07T01:54:55.4794128Z     PUT#update
2024-03-07T01:54:55.6715557Z       returns redirect http status
2024-03-07T01:54:55.6716319Z     GET #edit
2024-03-07T01:54:55.8731188Z       returns http success
2024-03-07T01:54:55.8732081Z     GET #index
2024-03-07T01:54:56.0889382Z       returns http success
2024-03-07T01:54:56.4807859Z       displays only product drives that belong to organization and that match drive name and date range
2024-03-07T01:54:56.4808657Z       csv
2024-03-07T01:54:56.6863112Z         returns ONLY the product drives within a selected date range (inclusive)
2024-03-07T01:54:57.0640154Z         returns ONLY the associated product drives
2024-03-07T01:54:57.2920164Z         only counts items within the selected date range
2024-03-07T01:54:57.5059189Z         returns the quantity of all organization's items
2024-03-07T01:54:57.6967735Z         is successful
2024-03-07T01:54:57.6968437Z     GET #show
2024-03-07T01:54:57.9033063Z       returns http success
2024-03-07T01:54:58.1766283Z       shows appropriate number on the UI
2024-03-07T01:54:58.1767426Z   while not signed in
2024-03-07T01:54:58.3533942Z     is unsuccessful
2024-03-07T01:54:58.3534436Z 
2024-03-07T01:54:58.3534998Z Admin::BaseItems
2024-03-07T01:54:58.3536241Z   When logged in as an organization admin
2024-03-07T01:54:58.3537156Z     DELETE #destroy
2024-03-07T01:54:58.3672671Z       redirects
2024-03-07T01:54:58.3673409Z     GET #new
2024-03-07T01:54:58.3796777Z       returns http success
2024-03-07T01:54:58.3797431Z     PUT #update
2024-03-07T01:54:58.3915524Z       redirect
2024-03-07T01:54:58.3916075Z     GET #edit
2024-03-07T01:54:58.4032224Z       returns http success
2024-03-07T01:54:58.4032996Z     GET #show
2024-03-07T01:54:58.4149942Z       returns http success
2024-03-07T01:54:58.4150592Z     POST #create
2024-03-07T01:54:58.4284628Z       redirects
2024-03-07T01:54:58.4285173Z     GET #index
2024-03-07T01:54:58.4406029Z       returns http success
2024-03-07T01:54:58.4406913Z 
2024-03-07T01:54:58.4407219Z Admin::Partners
2024-03-07T01:54:58.4408240Z   When logged in as a super admin
2024-03-07T01:54:58.4409222Z     GET #edit
2024-03-07T01:54:58.4798243Z       returns http success (FAILED - 1)
2024-03-07T01:54:58.4798955Z     PUT #update
2024-03-07T01:54:58.4799684Z       unsuccessful save due to empty params
2024-03-07T01:54:58.5184459Z         renders #edit template with error message (FAILED - 2)
2024-03-07T01:54:58.5185322Z       successful save
2024-03-07T01:54:58.5536071Z         redirects
2024-03-07T01:54:58.5914753Z         updates partner
2024-03-07T01:54:58.5915689Z     GET #show
2024-03-07T01:54:58.6243492Z       returns http success (FAILED - 3)
2024-03-07T01:54:58.6244266Z     GET #index
2024-03-07T01:54:58.6403635Z       returns http success (FAILED - 4)
2024-03-07T01:54:58.6404653Z 
2024-03-07T01:54:58.6404963Z Account request flow
2024-03-07T01:54:58.6405826Z   when in staging
2024-03-07T01:55:10.3783408Z     should prompt prospective users to request an account on the live app
2024-03-07T01:55:10.3785004Z   when not in staging
2024-03-07T01:55:12.7721011Z     should allow prospective users to request an account via a form. And that request form data gets used to create an organization (FAILED - 5)
2024-03-07T01:55:12.7723658Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-allow-prospective-users-to-request-an-account-via-a-form.-And-that-request-form-data-gets-used-to-create-an-organization_2024-03-06-17-55-12.616.html[0m
2024-03-07T01:55:12.7727770Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-allow-prospective-users-to-request-an-account-via-a-form.-And-that-request-form-data-gets-used-to-create-an-organization_2024-03-06-17-55-12.616.png[0m
2024-03-07T01:55:12.7729583Z     renders the #new template with the form and errors visible
2024-03-07T01:55:13.6547733Z       shows create bank form info and errors when required fields are missing
2024-03-07T01:55:13.6548978Z     with a partner agency
2024-03-07T01:55:14.2404199Z       reveals text that directs current partner to human essentials sign in page
2024-03-07T01:55:14.2405345Z 
2024-03-07T01:55:14.2405564Z Purchases
2024-03-07T01:55:14.2407087Z   While signed in as an organizational admin
2024-03-07T01:55:14.2407901Z     DELETE #destroy
2024-03-07T01:55:14.3064602Z       deletes a purchase
2024-03-07T01:55:14.3433893Z       redirects to the index
2024-03-07T01:55:14.4419140Z       decreases storage location inventory
2024-03-07T01:55:14.4766880Z       displays the proper flash notice
2024-03-07T01:55:14.4767745Z   While signed in as a user >
2024-03-07T01:55:14.4769761Z     GET #new
2024-03-07T01:55:14.5295195Z       is expected to be successful
2024-03-07T01:55:14.5296071Z     GET #index
2024-03-07T01:55:14.5296809Z       csv
2024-03-07T01:55:14.5598799Z         is expected to be successful
2024-03-07T01:55:14.5599604Z       html
2024-03-07T01:55:14.6042736Z         is expected to be successful
2024-03-07T01:55:14.6043712Z     GET #edit
2024-03-07T01:55:14.6602176Z       storage location is correct
2024-03-07T01:55:14.7111230Z       returns http success
2024-03-07T01:55:14.7112808Z       when non-finalized audit has been performed on the purchased items
2024-03-07T01:55:14.8515025Z         does not show a warning
2024-03-07T01:55:14.8517028Z       when no audit has been performed
2024-03-07T01:55:14.9578588Z         does not show a warning
2024-03-07T01:55:14.9579308Z       when an finalized audit has been performed on the purchased items
2024-03-07T01:55:15.0978683Z         shows a warning
2024-03-07T01:55:15.0979347Z     DELETE #destroy
2024-03-07T01:55:15.1209299Z       does not delete a purchase
2024-03-07T01:55:15.1418393Z       redirects to the dashboard
2024-03-07T01:55:15.1419363Z     PUT#update
2024-03-07T01:55:15.1813835Z       redirects to index after update
2024-03-07T01:55:15.2969699Z       updates storage quantity correctly
2024-03-07T01:55:15.2970256Z       when changing storage location
2024-03-07T01:55:15.4082688Z         updates storage quantity correctly
2024-03-07T01:55:15.4122570Z         rollsback updates if quantity would go below 0
2024-03-07T01:55:15.4123742Z       when removing a line item
2024-03-07T01:55:15.5188605Z         updates storage invetory item quantity correctly
2024-03-07T01:55:15.5189508Z     POST#create
2024-03-07T01:55:15.5190327Z       on success
2024-03-07T01:55:15.5627093Z         redirects to GET#edit
2024-03-07T01:55:15.6037478Z         accepts :amount_spent_in_cents with dollar signs, commas, and periods
2024-03-07T01:55:15.6559745Z         storage location defaults to organizations storage location
2024-03-07T01:55:15.6560654Z       on failure
2024-03-07T01:55:15.7015612Z         renders GET#new with error
2024-03-07T01:55:15.7016789Z     GET #show
2024-03-07T01:55:15.7392790Z       returns http success
2024-03-07T01:55:15.7394484Z 
2024-03-07T01:55:15.7394850Z StorageLocations
2024-03-07T01:55:15.7396009Z   While not signed in
2024-03-07T01:55:15.7456777Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:55:15.7458011Z   While signed in
2024-03-07T01:55:15.7458867Z     GET #show
2024-03-07T01:55:15.7459944Z       csv
2024-03-07T01:55:15.8039802Z         should be successful
2024-03-07T01:55:15.8750863Z       html
2024-03-07T01:55:15.8751860Z         should return a correct response
2024-03-07T01:55:15.8752692Z         with version date set
2024-03-07T01:55:15.8753479Z           with a version found
2024-03-07T01:55:15.9564790Z             should show the version specified
2024-03-07T01:55:15.9565679Z           with no version found
2024-03-07T01:55:16.0262318Z             should show N/A
2024-03-07T01:55:16.0263066Z     Looking at a different organization
2024-03-07T01:55:16.2030376Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:55:16.2031307Z     GET #new
2024-03-07T01:55:16.6651272Z       returns http success
2024-03-07T01:55:16.6652007Z     GET #index
2024-03-07T01:55:16.6652589Z       html
2024-03-07T01:55:16.7001309Z         succeeds
2024-03-07T01:55:16.7001994Z         with inactive locations
2024-03-07T01:55:16.7430482Z           does not includes the inactive location
2024-03-07T01:55:16.7431405Z           with include_inactive_locations
2024-03-07T01:55:16.7799258Z             includes the inactive location
2024-03-07T01:55:16.7800185Z       csv
2024-03-07T01:55:16.7975459Z         succeeds
2024-03-07T01:55:16.8967386Z         includes headers followed by alphabetized item names
2024-03-07T01:55:16.8968564Z     GET #inventory
2024-03-07T01:55:16.8969402Z       when also including inactive items
2024-03-07T01:55:16.9615578Z         returns a collection that also includes items that have been deactivated
2024-03-07T01:55:16.9616892Z       when also including omitted items
2024-03-07T01:55:17.0082595Z         contains a collection of ducktyped entries that respond the same
2024-03-07T01:55:17.0556361Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-07T01:55:17.0557498Z       without any overrides
2024-03-07T01:55:17.1058182Z         returns a collection that only includes items at the storage location
2024-03-07T01:55:17.1059099Z     PUT #deactivate
2024-03-07T01:55:17.1253169Z       discards
2024-03-07T01:55:17.1253987Z       with inventory
2024-03-07T01:55:17.1699880Z         does not discard
2024-03-07T01:55:17.1700584Z     PUT #reactivate
2024-03-07T01:55:17.1861121Z       undiscards
2024-03-07T01:55:17.1861721Z     GET #destroy
2024-03-07T01:55:17.2161948Z       redirects to #index
2024-03-07T01:55:17.2162900Z     POST #import_csv
2024-03-07T01:55:17.2163466Z       with a csv file
2024-03-07T01:55:17.2216271Z         invokes .import_csv
2024-03-07T01:55:17.2395069Z         redirects
2024-03-07T01:55:17.2537422Z         presents a flash notice message
2024-03-07T01:55:17.2538219Z       without a csv file
2024-03-07T01:55:17.2647703Z         presents a flash error message
2024-03-07T01:55:17.2758995Z         redirects to :index
2024-03-07T01:55:17.2759727Z       csv file with wrong headers
2024-03-07T01:55:17.2874275Z         presents a flash error message
2024-03-07T01:55:17.2986622Z         redirects
2024-03-07T01:55:17.2987246Z     GET #edit
2024-03-07T01:55:17.3301274Z       returns http success
2024-03-07T01:55:17.3302027Z 
2024-03-07T01:55:17.3304058Z /partners/distributions
2024-03-07T01:55:17.3306754Z   GET #print
2024-03-07T01:55:17.4757946Z     returns http success
2024-03-07T01:55:17.4759180Z     with non-UTF8 characters
2024-03-07T01:55:17.6003305Z       returns http success
2024-03-07T01:55:17.6004113Z   GET #index
2024-03-07T01:55:17.6466550Z     should render without any issues
2024-03-07T01:55:17.6468885Z 
2024-03-07T01:55:17.6469465Z Audits
2024-03-07T01:55:17.6470335Z   while signed in as an organization admin
2024-03-07T01:55:17.6471823Z     DELETE #destroy
2024-03-07T01:55:17.6472641Z       with valid params
2024-03-07T01:55:17.6820212Z         can not destroy the audit if the audit's status is `finalized`
2024-03-07T01:55:17.7173296Z         destroys the audit if the audit's status is `in_progress`
2024-03-07T01:55:17.7514530Z         destroys the audit if the audit's status is `confirms`
2024-03-07T01:55:17.7515411Z     POST #finalize
2024-03-07T01:55:17.8144598Z       sets the finalize status and saves an event
2024-03-07T01:55:17.8145120Z     GET #index
2024-03-07T01:55:17.8711084Z       is successful
2024-03-07T01:55:17.8711967Z     POST #create
2024-03-07T01:55:17.8712495Z       with valid params
2024-03-07T01:55:17.9092027Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-03-07T01:55:17.9456267Z         assigns a newly created audit as @audit
2024-03-07T01:55:17.9830398Z         creates a new Audit
2024-03-07T01:55:18.0892890Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-03-07T01:55:18.1677653Z         redirects to the #show after created audit
2024-03-07T01:55:18.1678842Z       with invalid params
2024-03-07T01:55:18.2789497Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-03-07T01:55:18.3185059Z         re-renders the 'new' template
2024-03-07T01:55:18.3579602Z         assigns a newly created but unsaved audit as @audit
2024-03-07T01:55:18.3580549Z     GET #edit
2024-03-07T01:55:18.4187117Z       is successful if the status of audit is `in_progress`
2024-03-07T01:55:18.4872068Z       redirects to #index if the status of audit is not `in_progress`
2024-03-07T01:55:18.4873090Z     GET #new
2024-03-07T01:55:18.5267261Z       is successful
2024-03-07T01:55:18.5268407Z     GET #show
2024-03-07T01:55:18.5830234Z       is successful
2024-03-07T01:55:18.5834132Z 
2024-03-07T01:55:18.5834524Z Dashboard
2024-03-07T01:55:18.5836390Z   With an existing essentials bank
2024-03-07T01:55:18.5838121Z     Purchases
2024-03-07T01:55:18.5841052Z       given 1 Purchase on 2024-02-28  (unless 'All Time'), 0 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:55:18.5842395Z         filtering to 'Last 7 Days'
2024-03-07T01:55:22.4372560Z           shows correct 0 Recent Purchase link(s)
2024-03-07T01:55:22.4375357Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-07T01:55:22.4376587Z         filtering to 'This Year'
2024-03-07T01:55:25.7753508Z           shows correct 0 Recent Purchase link(s)
2024-03-07T01:55:25.7771838Z     Manufacturer Donations
2024-03-07T01:55:26.4692399Z       has a link to create a new donation
2024-03-07T01:55:26.4694284Z       given 1 Manufacturer donating on 2024-03-04  (unless 'All Time'), 9 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-07T01:55:26.4695550Z         filtering to 'Yesterday'
2024-03-07T01:55:28.8382745Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-07T01:55:28.8386412Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 7 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:55:28.8388084Z         filtering to 'Last Month'
2024-03-07T01:55:30.9898558Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-07T01:55:30.9899392Z     Signage
2024-03-07T01:55:33.8671402Z       shows their organization name unless they have a logo set
2024-03-07T01:55:33.8672236Z     Inventory Totals
2024-03-07T01:55:33.8672952Z       Summary
2024-03-07T01:55:33.8673523Z         when constrained to date range
2024-03-07T01:55:34.9340706Z           does not change
2024-03-07T01:55:34.9341599Z     Product Drives
2024-03-07T01:55:34.9345616Z       Product drive behaviour with Mixed Donation types
2024-03-07T01:55:35.6611937Z         only counts product drive donations for product drive
2024-03-07T01:55:35.6614021Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:55:35.6616043Z         filtering to 'Last Month'
2024-03-07T01:55:36.9839527Z           shows the correct total money raised
2024-03-07T01:55:36.9841096Z       given 1 Product Drive Donation on 2022-03-05 (unless 'All Time'), 0 during 2022-03-06..2023-10-30, and 1 on 2023-10-31
2024-03-07T01:55:36.9842671Z         filtering to '' (March 6, 2022 - October 30, 2023)
2024-03-07T01:55:40.3342052Z           shows 0 Recent Donation link(s)
2024-03-07T01:55:40.3344384Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 1 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:55:40.3345805Z         filtering to 'Today'
2024-03-07T01:55:41.7085979Z           shows the correct total donations
2024-03-07T01:55:41.7086823Z     Distributions
2024-03-07T01:55:41.7089971Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-07T01:55:41.7091424Z         filtering to 'This Month'
2024-03-07T01:55:43.0978192Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-07T01:55:43.0979857Z       given 1 Distribution on 2024-02-28  (unless 'All Time'), 1 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:55:43.0980844Z         filtering to 'Last 7 Days'
2024-03-07T01:55:44.5009636Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-07T01:55:44.5013983Z 
2024-03-07T01:55:44.5014295Z Distributions
2024-03-07T01:55:46.6188988Z   allows completion of corrected distribution with depleted inventory item
2024-03-07T01:55:47.3315720Z   errors if user does not fill storage_location
2024-03-07T01:55:47.3316837Z   When showing a individual distribution
2024-03-07T01:55:47.9296637Z     Show partner name in title
2024-03-07T01:55:47.9297448Z   With an existing distribution
2024-03-07T01:55:49.2104305Z     the user can make changes
2024-03-07T01:55:50.2078699Z     the user can reclaim it
2024-03-07T01:55:51.4749016Z     disallows the user from changing the quantity above the inventory quantity
2024-03-07T01:55:52.7648324Z     allows the user can change the issued_at date
2024-03-07T01:55:54.2842704Z     sends an email if reminders are enabled
2024-03-07T01:55:54.2843377Z     when delivery method is not shipped
2024-03-07T01:55:57.2193221Z       should not display shipping_cost field
2024-03-07T01:55:57.2194093Z     when delivery method is shipped and shipping cost is none negative
2024-03-07T01:55:58.5043945Z       should update distribution and display shipping_cost field
2024-03-07T01:55:58.5045041Z     when one of the items has been 'deleted'
2024-03-07T01:55:59.4722708Z       the user can still reclaim it
2024-03-07T01:55:59.4723665Z   When going to the Pick Ups & Deliveries page
2024-03-07T01:56:00.1986490Z     appears distribution in calendar with correct time & timezone
2024-03-07T01:56:00.1987771Z   When attempting to edit a distribution
2024-03-07T01:56:00.1988595Z     when logged as Admin
2024-03-07T01:56:01.1749479Z       can click on Edit button and a warning appears
2024-03-07T01:56:01.8346192Z       can be accessed directly
2024-03-07T01:56:01.8347267Z     after the distribution issued_at has passed or it has been marked complete
2024-03-07T01:56:02.5543311Z       does not contain a Edit button
2024-03-07T01:56:03.5490586Z       cannot be accessed directly
2024-03-07T01:56:03.5491718Z   When creating a distribution from a donation
2024-03-07T01:56:04.7781149Z     completes successfully
2024-03-07T01:56:04.7782133Z     when editing that distribution
2024-03-07T01:56:07.8403815Z       User creates duplicate line items
2024-03-07T01:56:10.1741371Z       User creates a distribution from a donation then tries to make the quantity too big
2024-03-07T01:56:12.4608994Z       User creates a distribution from a donation then edits it
2024-03-07T01:56:12.4610135Z   When creating a distribution and items have value
2024-03-07T01:56:13.2569361Z     the user sees value in row on index page
2024-03-07T01:56:14.3095499Z     the user sees value per item on show page
2024-03-07T01:56:15.1093975Z     the user sees total value on index page
2024-03-07T01:56:16.1496496Z     the user sees total value on show page
2024-03-07T01:56:16.1497622Z   When creating a new distribution manually
2024-03-07T01:56:16.8805484Z     Displays a complete form after validation errors
2024-03-07T01:56:17.4779800Z     should not display inactive storage locations in dropdown
2024-03-07T01:56:17.4780820Z     when the delivery_method is not shipped
2024-03-07T01:56:20.4009495Z       Allows a distribution to be created and shipping cost field not visible
2024-03-07T01:56:20.4010783Z     when the quantity is lower than the on hand minimum quantity
2024-03-07T01:56:21.5241164Z       should display an error
2024-03-07T01:56:21.5241931Z     when there is a default storage location
2024-03-07T01:56:22.0666306Z       automatically selects the default storage location
2024-03-07T01:56:22.0667109Z     when there is insufficient inventory to fulfill the Distribution
2024-03-07T01:56:23.0000147Z       gracefully handles the error
2024-03-07T01:56:23.0001212Z     when the quantity is lower than the on hand recommended quantity
2024-03-07T01:56:23.8493561Z       should display an alert
2024-03-07T01:56:23.8494713Z     when the delivery_method is shipped and shipping cost is none-negative
2024-03-07T01:56:24.8382747Z       Allows a distribution to be created
2024-03-07T01:56:24.8383646Z   via barcode entry
2024-03-07T01:56:26.3312844Z     a user can add items that do not yet have a barcode
2024-03-07T01:56:27.1150311Z     allows users to add items via scanning them in by barcode
2024-03-07T01:56:27.1151170Z   when filtering on the index page
2024-03-07T01:56:28.0405221Z     filters by partner
2024-03-07T01:56:29.2861167Z     filters by item category id
2024-03-07T01:56:30.5380358Z     filters by item id
2024-03-07T01:56:31.0654514Z     should not display inactive storage locations in dropdown
2024-03-07T01:56:31.9889147Z     filters by state
2024-03-07T01:56:31.9889962Z     behaves like Date Range Picker
2024-03-07T01:56:31.9891050Z       when choosing 'All Time'
2024-03-07T01:56:33.0976922Z         shows all the records
2024-03-07T01:56:33.0978027Z       when choosing 'Last Month'
2024-03-07T01:56:34.1906914Z         shows only 2 of the records
2024-03-07T01:56:34.1908297Z       when choosing a date range that only includes the previous week
2024-03-07T01:56:35.2358692Z         shows only 1 record
2024-03-07T01:56:35.2359748Z   When creating a distribution from a request
2024-03-07T01:56:36.6146437Z     maintains the connection with the request even when there are initial errors
2024-03-07T01:56:37.7982735Z     sets the distribution id and fulfilled status on the request
2024-03-07T01:56:37.7983473Z 
2024-03-07T01:56:37.7983779Z Storage Locations
2024-03-07T01:56:37.7985876Z   when editing an existing storage location
2024-03-07T01:56:38.6183575Z     User updates an existing storage location
2024-03-07T01:56:39.3953750Z     User updates an existing storage location with empty name
2024-03-07T01:56:39.3954771Z   when creating a new storage location
2024-03-07T01:56:40.1779683Z     User creates a new storage location
2024-03-07T01:56:40.8932075Z     User creates a new storage location with empty attributes
2024-03-07T01:56:41.7074973Z     User creates a new storage location with optional fields
2024-03-07T01:56:41.7076011Z   when viewing an existing storage location
2024-03-07T01:56:42.4046932Z     Items out (distributions)
2024-03-07T01:56:43.0462569Z     Items in (adjustments)
2024-03-07T01:56:43.0463302Z   when viewing the index
2024-03-07T01:56:43.6338817Z     Filter list presented to user is in alphabetical order by item name
2024-03-07T01:56:45.0101994Z     Allows user to deactivate and reactivate storage locations
2024-03-07T01:56:45.8184715Z     Stops a user from deactivating storage locations with inventory
2024-03-07T01:56:46.9119865Z     shows totals that are the sum totals of all inputs
2024-03-07T01:56:47.7919951Z     Allows user to filter discarded storage locations
2024-03-07T01:56:49.0188929Z     User can filter the #index by those that contain certain items
2024-03-07T01:56:49.3009744Z 
2024-03-07T01:56:49.3010572Z Failures:
2024-03-07T01:56:49.3011047Z 
2024-03-07T01:56:49.3015872Z   1) Admin::Partners When logged in as a super admin GET #edit returns http success
2024-03-07T01:56:49.3019745Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.3022586Z 
2024-03-07T01:56:49.3023194Z      ActionView::Template::Error:
2024-03-07T01:56:49.3024773Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000348a0>
2024-03-07T01:56:49.3026764Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3029016Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___2955909899683817497_102880'
2024-03-07T01:56:49.3030731Z      # ./spec/requests/admin/partners_requests_spec.rb:27:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.3032008Z      # ------------------
2024-03-07T01:56:49.3032647Z      # --- Caused by: ---
2024-03-07T01:56:49.3033197Z      # NameError:
2024-03-07T01:56:49.3034510Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000348a0>
2024-03-07T01:56:49.3036326Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3037427Z 
2024-03-07T01:56:49.3038424Z   2) Admin::Partners When logged in as a super admin PUT #update unsuccessful save due to empty params renders #edit template with error message
2024-03-07T01:56:49.3040516Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.3041409Z 
2024-03-07T01:56:49.3041634Z      ActionView::Template::Error:
2024-03-07T01:56:49.3043073Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034918>
2024-03-07T01:56:49.3044876Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3046764Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___2955909899683817497_102880'
2024-03-07T01:56:49.3048339Z      # ./app/controllers/admin/partners_controller.rb:20:in `update'
2024-03-07T01:56:49.3049633Z      # ./spec/requests/admin/partners_requests_spec.rb:47:in `block (5 levels) in <top (required)>'
2024-03-07T01:56:49.3051127Z      # ./spec/requests/admin/partners_requests_spec.rb:50:in `block (5 levels) in <top (required)>'
2024-03-07T01:56:49.3052354Z      # ------------------
2024-03-07T01:56:49.3052915Z      # --- Caused by: ---
2024-03-07T01:56:49.3053470Z      # NameError:
2024-03-07T01:56:49.3054825Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034918>
2024-03-07T01:56:49.3056620Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3057734Z 
2024-03-07T01:56:49.3058337Z   3) Admin::Partners When logged in as a super admin GET #show returns http success
2024-03-07T01:56:49.3059875Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.3060755Z 
2024-03-07T01:56:49.3060975Z      ActionView::Template::Error:
2024-03-07T01:56:49.3062425Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034aa8>
2024-03-07T01:56:49.3064206Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3066100Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___2955909899683817497_102880'
2024-03-07T01:56:49.3068307Z      # ./spec/requests/admin/partners_requests_spec.rb:20:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.3069467Z      # ------------------
2024-03-07T01:56:49.3070236Z      # --- Caused by: ---
2024-03-07T01:56:49.3070891Z      # NameError:
2024-03-07T01:56:49.3072202Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034aa8>
2024-03-07T01:56:49.3074077Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3075166Z 
2024-03-07T01:56:49.3075718Z   4) Admin::Partners When logged in as a super admin GET #index returns http success
2024-03-07T01:56:49.3077362Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.3078231Z 
2024-03-07T01:56:49.3078505Z      ActionView::Template::Error:
2024-03-07T01:56:49.3079941Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034b20>
2024-03-07T01:56:49.3082850Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3084746Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___2955909899683817497_102880'
2024-03-07T01:56:49.3086549Z      # ./spec/requests/admin/partners_requests_spec.rb:13:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.3087695Z      # ------------------
2024-03-07T01:56:49.3088352Z      # --- Caused by: ---
2024-03-07T01:56:49.3089017Z      # NameError:
2024-03-07T01:56:49.3090289Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x00000000034b20>
2024-03-07T01:56:49.3092243Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3093274Z 
2024-03-07T01:56:49.3094481Z   5) Account request flow when not in staging should allow prospective users to request an account via a form. And that request form data gets used to create an organization
2024-03-07T01:56:49.3096686Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.3097515Z 
2024-03-07T01:56:49.3097888Z      ActionView::Template::Error:
2024-03-07T01:56:49.3099284Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000355e8>
2024-03-07T01:56:49.3100178Z 
2024-03-07T01:56:49.3102544Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_account_request_flow_when_not_in_staging_should_allow_prospective_users_to_request_an_account_via_a_form__and_that_request_form_data_gets_used_to_create_an_organization_657.png
2024-03-07T01:56:49.3104860Z 
2024-03-07T01:56:49.3104921Z 
2024-03-07T01:56:49.3105762Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3107862Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___2955909899683817497_102880'
2024-03-07T01:56:49.3109286Z      # ------------------
2024-03-07T01:56:49.3109911Z      # --- Caused by: ---
2024-03-07T01:56:49.3110405Z      # NameError:
2024-03-07T01:56:49.3111782Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000355e8>
2024-03-07T01:56:49.3113561Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__2924761777645868176_107580'
2024-03-07T01:56:49.3114635Z 
2024-03-07T01:56:49.3115050Z Finished in 1 minute 55.93 seconds (files took 8.09 seconds to load)
2024-03-07T01:56:49.3116031Z 181 examples, 5 failures
2024-03-07T01:56:49.3116662Z 
2024-03-07T01:56:49.3116851Z Failed examples:
2024-03-07T01:56:49.3117127Z 
2024-03-07T01:56:49.3118120Z rspec ./spec/requests/admin/partners_requests_spec.rb:26 # Admin::Partners When logged in as a super admin GET #edit returns http success
2024-03-07T01:56:49.3121019Z rspec ./spec/requests/admin/partners_requests_spec.rb:49 # Admin::Partners When logged in as a super admin PUT #update unsuccessful save due to empty params renders #edit template with error message
2024-03-07T01:56:49.3123588Z rspec ./spec/requests/admin/partners_requests_spec.rb:19 # Admin::Partners When logged in as a super admin GET #show returns http success
2024-03-07T01:56:49.3125835Z rspec ./spec/requests/admin/partners_requests_spec.rb:12 # Admin::Partners When logged in as a super admin GET #index returns http success
2024-03-07T01:56:49.3128576Z rspec ./spec/system/account_request_system_spec.rb:17 # Account request flow when not in staging should allow prospective users to request an account via a form. And that request form data gets used to create an organization
2024-03-07T01:56:49.3130361Z 
2024-03-07T01:56:49.3130706Z Randomized with seed 26194
2024-03-07T01:56:49.3131060Z 
2024-03-07T01:56:49.6136581Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:56:49.6139347Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3857 / 6435 LOC (59.94%) covered.
2024-03-07T01:56:49.7343414Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/storage_location_system_spec.rb" "spec/system/account_request_system_spec.rb" "spec/requests/product_drives_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:3:1:1]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:3]" "spec/requests/storage_locations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:7:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:7:1:2]" "spec/system/dashboard_system_spec.rb[1:2:2:1:2:1]" "spec/requests/audits_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/system/dashboard_system_spec.rb[1:2:6:1]" "spec/requests/kit_requests_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb" failed
2024-03-07T01:56:50.1191954Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:56:50.1194305Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10705 LOC (0.35%) covered.
2024-03-07T01:56:50.1454187Z ##[error]Process completed with exit code 1.
