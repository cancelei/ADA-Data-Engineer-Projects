2024-03-04T19:10:24.1008949Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T19:10:24.1009926Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T19:10:24.1039984Z shell: /usr/bin/bash -e {0}
2024-03-04T19:10:24.1040499Z env:
2024-03-04T19:10:24.1040818Z   POSTGRES_HOST: localhost
2024-03-04T19:10:24.1041294Z   DATABASE_HOST: localhost
2024-03-04T19:10:24.1041670Z   PG_USERNAME: postgres
2024-03-04T19:10:24.1042065Z   PG_PASSWORD: password
2024-03-04T19:10:24.1042511Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T19:10:24.1042923Z   POSTGRES_PORT: 5432
2024-03-04T19:10:24.1043291Z   PGHOST: localhost
2024-03-04T19:10:24.1043692Z   PGUSER: postgres
2024-03-04T19:10:24.1044012Z   RAILS_ENV: test
2024-03-04T19:10:24.1044389Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T19:10:24.1044897Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T19:10:24.1045315Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T19:10:24.1045757Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T19:10:24.1046380Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T19:10:24.1046967Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T19:10:24.1047694Z ##[endgroup]
2024-03-04T19:10:30.0308647Z W, [2024-03-04T19:10:30.030493 #2407]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T19:10:30.0311898Z W, [2024-03-04T19:10:30.030558 #2407]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:10:30.0314231Z W, [2024-03-04T19:10:30.030576 #2407]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:10:30.0317365Z W, [2024-03-04T19:10:30.030604 #2407]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T19:10:32.7393667Z W, [2024-03-04T19:10:32.739028 #2407]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T19:10:32.7396088Z W, [2024-03-04T19:10:32.739077 #2407]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:10:32.7398733Z W, [2024-03-04T19:10:32.739091 #2407]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:10:32.7402996Z W, [2024-03-04T19:10:32.739142 #2407]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T19:10:32.7457628Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T19:10:41.6313907Z 
2024-03-04T19:10:41.6314789Z Randomized with seed 4017
2024-03-04T19:10:42.6144231Z 
2024-03-04T19:10:42.6145187Z Admin Organization Management
2024-03-04T19:10:42.6146833Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T19:10:57.0769500Z     creates a new organization
2024-03-04T19:10:57.0770511Z   While signed in as an Administrative User (super admin)
2024-03-04T19:10:58.9624033Z     creates a new organization
2024-03-04T19:11:00.0328722Z     filters by organizations by name in organizations index page
2024-03-04T19:11:01.3521386Z     can view organization details
2024-03-04T19:11:01.3522154Z 
2024-03-04T19:11:01.3522507Z /partners/profiles
2024-03-04T19:11:01.3523981Z   GET #edit
2024-03-04T19:11:01.4643688Z     does not have default radio button value when value is nil
2024-03-04T19:11:01.5688533Z     has "Yes" radio button value when value is true
2024-03-04T19:11:01.6558818Z     displays the partner
2024-03-04T19:11:01.7466143Z     has "No" radio button value when value is false
2024-03-04T19:11:01.7467117Z   PUT #update
2024-03-04T19:11:01.8028688Z     updates the partner and profile
2024-03-04T19:11:01.8029579Z     with no social media
2024-03-04T19:11:01.8974259Z       shows an error
2024-03-04T19:11:01.8974978Z     when updating an existing value to a blank value
2024-03-04T19:11:01.9526218Z       does store N/A in the database
2024-03-04T19:11:02.0042537Z       updates the partner profile attribute to a blank value
2024-03-04T19:11:02.0572556Z       does not update other partner profile attributes to blank
2024-03-04T19:11:02.0574046Z   GET #show
2024-03-04T19:11:02.1138552Z     displays the partner
2024-03-04T19:11:02.1688714Z     shows correct values for yes/no buttons
2024-03-04T19:11:02.1689751Z 
2024-03-04T19:11:02.1689977Z Purchases
2024-03-04T19:11:02.1691068Z   while signed in as a normal user
2024-03-04T19:11:02.1692508Z     When creating a new purchase
2024-03-04T19:11:02.7204398Z       should not display inactive storage locations in dropdown
2024-03-04T19:11:02.7205057Z       via barcode entry
2024-03-04T19:11:04.0713838Z         a user can add items that do not yet have a barcode
2024-03-04T19:11:05.0051128Z         User scan same barcode 2 times
2024-03-04T19:11:05.7204733Z         a user can add items via scanning them in by barcode
2024-03-04T19:11:05.7205647Z       via manual entry
2024-03-04T19:11:06.7458543Z         Does not include inactive items in the line item fields
2024-03-04T19:11:08.0861386Z         User can create a purchase IN THE PAST
2024-03-04T19:11:09.3049833Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T19:11:10.2066769Z         User can create a purchase using dollars decimal amount
2024-03-04T19:11:11.3608184Z         User can create vendor from purchase
2024-03-04T19:11:11.3609164Z         when creating a purchase incorrectly
2024-03-04T19:11:12.3887418Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T19:11:13.1885508Z           should display failure with error messages
2024-03-04T19:11:13.1886327Z       Editing purchase
2024-03-04T19:11:13.8154223Z         A user can view another organizations purchase
2024-03-04T19:11:14.3195954Z         A user can see purchased_from value
2024-03-04T19:11:14.3196853Z     When visiting an existing purchase
2024-03-04T19:11:14.7734251Z       does not allow deletion of a purchase
2024-03-04T19:11:14.7735133Z     When visiting the index page
2024-03-04T19:11:14.7735743Z       In the middle of the year
2024-03-04T19:11:15.5607134Z         User can click to the new purchase form
2024-03-04T19:11:16.3191206Z         User sees total purchases value
2024-03-04T19:11:17.0575949Z         User sees purchased date column
2024-03-04T19:11:17.0576828Z       When filtering on the index page
2024-03-04T19:11:17.8855755Z         User can filter the #index by storage location
2024-03-04T19:11:18.7237346Z         User can filter the #index by vendor
2024-03-04T19:11:18.7237986Z         behaves like Date Range Picker
2024-03-04T19:11:18.7239011Z           when choosing 'All Time'
2024-03-04T19:11:19.7114963Z             shows all the records
2024-03-04T19:11:19.7116328Z           when choosing 'Last Month'
2024-03-04T19:11:20.6636442Z             shows only 2 of the records
2024-03-04T19:11:20.6637667Z           when choosing a date range that only includes the previous week
2024-03-04T19:11:21.6041779Z             shows only 1 record
2024-03-04T19:11:21.6043224Z   while signed in as an organization admin
2024-03-04T19:11:22.4589780Z     allows deletion of a purchase
2024-03-04T19:11:22.4591208Z 
2024-03-04T19:11:22.4591662Z StorageLocations
2024-03-04T19:11:22.4594666Z   While signed in
2024-03-04T19:11:22.4595233Z     GET #destroy
2024-03-04T19:11:22.4903063Z       redirects to #index
2024-03-04T19:11:22.4903950Z     GET #edit
2024-03-04T19:11:22.9784804Z       returns http success
2024-03-04T19:11:22.9785596Z     Looking at a different organization
2024-03-04T19:11:23.1575213Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:11:23.1575826Z     PUT #deactivate
2024-03-04T19:11:23.1764026Z       discards
2024-03-04T19:11:23.1764647Z       with inventory
2024-03-04T19:11:23.2164433Z         does not discard
2024-03-04T19:11:23.2165014Z     PUT #reactivate
2024-03-04T19:11:23.2327040Z       undiscards
2024-03-04T19:11:23.2327985Z     GET #index
2024-03-04T19:11:23.2328529Z       html
2024-03-04T19:11:23.2705634Z         succeeds
2024-03-04T19:11:23.2706340Z         with inactive locations
2024-03-04T19:11:23.3101543Z           does not includes the inactive location
2024-03-04T19:11:23.3102471Z           with include_inactive_locations
2024-03-04T19:11:23.3534732Z             includes the inactive location
2024-03-04T19:11:23.3535526Z       csv
2024-03-04T19:11:23.3734485Z         succeeds
2024-03-04T19:11:23.4696463Z         includes headers followed by alphabetized item names
2024-03-04T19:11:23.4697507Z     GET #new
2024-03-04T19:11:23.5024474Z       returns http success
2024-03-04T19:11:23.5025264Z     GET #inventory
2024-03-04T19:11:23.5026127Z       without any overrides
2024-03-04T19:11:23.5596128Z         returns a collection that only includes items at the storage location
2024-03-04T19:11:23.5597230Z       when also including omitted items
2024-03-04T19:11:23.6119990Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T19:11:23.6637212Z         contains a collection of ducktyped entries that respond the same
2024-03-04T19:11:23.6638323Z       when also including inactive items
2024-03-04T19:11:23.7315845Z         returns a collection that also includes items that have been deactivated
2024-03-04T19:11:23.7316977Z     POST #import_csv
2024-03-04T19:11:23.7317591Z       with a csv file
2024-03-04T19:11:23.7376049Z         invokes .import_csv
2024-03-04T19:11:23.7550408Z         presents a flash notice message
2024-03-04T19:11:23.7718472Z         redirects
2024-03-04T19:11:23.7719495Z       csv file with wrong headers
2024-03-04T19:11:23.7854173Z         redirects
2024-03-04T19:11:23.7986553Z         presents a flash error message
2024-03-04T19:11:23.7987659Z       without a csv file
2024-03-04T19:11:23.8105194Z         redirects to :index
2024-03-04T19:11:23.8214235Z         presents a flash error message
2024-03-04T19:11:23.8215023Z     GET #show
2024-03-04T19:11:23.8216121Z       html
2024-03-04T19:11:23.8869367Z         should return a correct response
2024-03-04T19:11:23.8870278Z         with version date set
2024-03-04T19:11:23.8870961Z           with a version found
2024-03-04T19:11:23.9765386Z             should show the version specified
2024-03-04T19:11:23.9766232Z           with no version found
2024-03-04T19:11:24.0489323Z             should show N/A
2024-03-04T19:11:24.0490075Z       csv
2024-03-04T19:11:24.1037244Z         should be successful
2024-03-04T19:11:24.1038461Z   While not signed in
2024-03-04T19:11:24.1116240Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:11:24.1116943Z 
2024-03-04T19:11:24.1117184Z Adjustments
2024-03-04T19:11:24.1118262Z   while signed in
2024-03-04T19:11:24.1119448Z     GET #new
2024-03-04T19:11:24.1629516Z       is successful
2024-03-04T19:11:24.1630308Z     POST #create
2024-03-04T19:11:24.1631167Z       with invalid params
2024-03-04T19:11:24.2026722Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T19:11:24.2412534Z         re-renders the 'new' template
2024-03-04T19:11:24.2413600Z       with valid params
2024-03-04T19:11:24.2754529Z         assigns a newly created adjustment as @adjustment
2024-03-04T19:11:24.3036404Z         creates a new Adjustment
2024-03-04T19:11:24.3299770Z         assigns a user id from the current user
2024-03-04T19:11:24.3614854Z         redirects to the #show after created adjustment
2024-03-04T19:11:24.3615502Z     GET #show
2024-03-04T19:11:24.4033762Z       is expected to be successful
2024-03-04T19:11:24.4034561Z     GET #index
2024-03-04T19:11:24.4034987Z       html
2024-03-04T19:11:24.4477140Z         is successful
2024-03-04T19:11:24.4477934Z         when filtering by date
2024-03-04T19:11:24.4478790Z           when date parameters are not supplied
2024-03-04T19:11:24.4982613Z             returns all objects
2024-03-04T19:11:24.4983418Z           when date parameters are supplied
2024-03-04T19:11:24.5473980Z             only returns the correct objects
2024-03-04T19:11:24.5474881Z       csv
2024-03-04T19:11:24.5727014Z         is expected to be successful
2024-03-04T19:11:24.5727600Z 
2024-03-04T19:11:24.5729339Z Organization management
2024-03-04T19:11:24.5730630Z   while signed in as an organization admin
2024-03-04T19:11:25.0678727Z     can re-invite a user to an organization after 7 days
2024-03-04T19:11:26.0290407Z     can add a new user to an organization
2024-03-04T19:11:27.0666283Z     can re-activate a user in the organization
2024-03-04T19:11:28.0458905Z     can deactivate a user in the organization
2024-03-04T19:11:28.5639918Z     can see 'Make user' button for admins
2024-03-04T19:11:28.5641004Z     Editing the organization
2024-03-04T19:11:29.5934378Z       can select if the org distributes essentials monthly
2024-03-04T19:11:30.5911135Z       can enable if the org uses single step invite and approve partner process
2024-03-04T19:11:31.7887783Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T19:11:32.7779659Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T19:11:33.7655601Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T19:11:34.6413909Z       can set a reminder and a deadline day
2024-03-04T19:11:36.1438961Z       can select and deselect Required Partner Fields
2024-03-04T19:11:37.0036848Z       can set a default storage location on the organization
2024-03-04T19:11:38.1337382Z       can select if the org repackages essentials
2024-03-04T19:11:39.0131399Z       can set the NDBN Member ID
2024-03-04T19:11:39.0132265Z     Viewing the organization
2024-03-04T19:11:39.5541078Z       can view organization details
2024-03-04T19:11:39.5541899Z   while signed in as a normal user
2024-03-04T19:11:40.0183200Z     can see summary details about the organization as a user
2024-03-04T19:11:40.4986580Z     cannot see 'Make user' button for admins
2024-03-04T19:11:40.4987262Z 
2024-03-04T19:11:40.4987527Z User account management
2024-03-04T19:11:40.4988913Z   when not in staging
2024-03-04T19:11:41.3968159Z     should change the email
2024-03-04T19:11:42.2711493Z     should change an user name
2024-03-04T19:11:43.0447343Z     should fail when the email is invalid
2024-03-04T19:11:43.0448289Z   when in staging
2024-03-04T19:11:43.4956199Z     should display staging warning
2024-03-04T19:11:43.9632413Z     should not allow the user to change staging credentials
2024-03-04T19:11:43.9633512Z 
2024-03-04T19:11:43.9633728Z BarcodeItems
2024-03-04T19:11:43.9635347Z   While signed in
2024-03-04T19:11:43.9636978Z     GET #find
2024-03-04T19:11:43.9637902Z       via ajax
2024-03-04T19:11:44.1732735Z         can find a barcode that is scoped to just this organization
2024-03-04T19:11:44.3738940Z         can find a barcode that's universally available
2024-03-04T19:11:44.3739829Z         when it's missing
2024-03-04T19:11:44.5834710Z           returns a 404
2024-03-04T19:11:44.5835564Z     Looking at a different organization
2024-03-04T19:11:44.7694561Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:11:44.7695259Z     GET #show
2024-03-04T19:11:44.7695704Z       with a normal barcode item
2024-03-04T19:11:44.8120157Z         returns http success
2024-03-04T19:11:44.8120998Z       with a global barcode item
2024-03-04T19:11:44.8450721Z         returns a 404
2024-03-04T19:11:44.8451514Z     GET #edit
2024-03-04T19:11:44.8452114Z       with a global barcode item
2024-03-04T19:11:44.8771492Z         returns a 404
2024-03-04T19:11:44.8772023Z       with a normal barcode item
2024-03-04T19:11:44.9190741Z         returns http success
2024-03-04T19:11:44.9191432Z     GET #new
2024-03-04T19:11:44.9507441Z       returns http success
2024-03-04T19:11:44.9508252Z     DELETE #destroy
2024-03-04T19:11:45.1682841Z       disallows a user to delete someone else's barcode
2024-03-04T19:11:45.1915616Z       disallows a non-superadmin to delete a global barcode
2024-03-04T19:11:45.2226818Z       redirects to the index
2024-03-04T19:11:45.2227448Z     GET #index
2024-03-04T19:11:45.2228187Z       html
2024-03-04T19:11:45.2643789Z         is expected to be successful
2024-03-04T19:11:45.2644603Z       csv
2024-03-04T19:11:45.2877796Z         is expected to be successful
2024-03-04T19:11:45.2878487Z 
2024-03-04T19:11:45.2878710Z Kit management
2024-03-04T19:11:46.1796486Z   can create a new kit as a user with the proper quantity
2024-03-04T19:11:47.6304393Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T19:11:48.1936964Z   should not display inactive storage locations under allocations
2024-03-04T19:11:48.1937639Z   when there is no kit quantity
2024-03-04T19:11:49.2847621Z     will not change quantity amounts when deallocating
2024-03-04T19:11:49.2849156Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T19:11:50.4282240Z     will not change quantity amounts when allocating
2024-03-04T19:11:50.4283191Z 
2024-03-04T19:11:50.4283626Z Managing requests
2024-03-04T19:11:50.4285764Z   creating a # individuals request
2024-03-04T19:11:50.4286717Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:11:50.4288184Z       WHEN they create a request completely empty request
2024-03-04T19:11:51.3470375Z         should show an error message with the instructions
2024-03-04T19:11:51.3471293Z       Select Input Tests
2024-03-04T19:11:51.3479780Z         WHEN they reach the page
2024-03-04T19:11:52.2799760Z           should show the proper items in the select box
2024-03-04T19:11:52.2800414Z           WHEN they create a request improperly
2024-03-04T19:11:53.5924642Z             should show the proper items in the select box
2024-03-04T19:11:53.5925609Z       WHEN they create a request with blank lines
2024-03-04T19:11:54.9810932Z         should be created without any issue
2024-03-04T19:11:54.9812001Z       WHEN they create a request improperly by not inputting anything
2024-03-04T19:11:55.8898389Z         should show an error message with the instructions
2024-03-04T19:11:55.8899470Z       WHEN they create a request with only a comment
2024-03-04T19:11:56.8370144Z         should be created without any issue
2024-03-04T19:11:56.8371230Z       WHEN they create a request properly
2024-03-04T19:11:56.8372264Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:11:58.9482450Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T19:11:58.9484317Z   creating a new quantity request
2024-03-04T19:11:58.9485156Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:11:58.9486097Z       WHEN they create a request with blank lines
2024-03-04T19:12:00.3474983Z         should be created without any issue
2024-03-04T19:12:00.3475876Z       Select Input Tests
2024-03-04T19:12:00.3476723Z         WHEN they reach the page
2024-03-04T19:12:01.2252601Z           should show the proper items in the select box
2024-03-04T19:12:01.2253417Z           WHEN they create a request improperly
2024-03-04T19:12:02.5600286Z             should show the proper items in the select box
2024-03-04T19:12:02.5601391Z       WHEN they create a request properly
2024-03-04T19:12:02.5603095Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:12:04.8070367Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T19:12:04.8071718Z       WHEN they create a request completely empty request
2024-03-04T19:12:05.7342188Z         should show an error message with the instructions
2024-03-04T19:12:05.7342938Z       WHEN they create a request with only a comment
2024-03-04T19:12:06.7088517Z         should be created without any issue
2024-03-04T19:12:06.7089910Z 
2024-03-04T19:12:06.7090271Z Donations
2024-03-04T19:12:06.7091446Z   while signed in
2024-03-04T19:12:06.7092472Z     GET #edit
2024-03-04T19:12:06.7093408Z       when an finalized audit has been performed on the donated items
2024-03-04T19:12:06.8645300Z         shows a warning
2024-03-04T19:12:06.8646330Z     when no audit has been performed
2024-03-04T19:12:06.9620805Z       doesn't show a warning
2024-03-04T19:12:06.9622293Z     when an non-finalized audit has been performed on the donated items
2024-03-04T19:12:07.0994548Z       does not shows a warning
2024-03-04T19:12:07.0995354Z     GET #index
2024-03-04T19:12:07.0996175Z       csv
2024-03-04T19:12:07.1364383Z         is expected to be successful
2024-03-04T19:12:07.1365021Z       html
2024-03-04T19:12:07.1824272Z         is expected to be successful
2024-03-04T19:12:07.2260139Z         should have the columns source and details
2024-03-04T19:12:07.2261083Z         when given a product drive
2024-03-04T19:12:07.2839134Z           should display Product Drive and the name of the drive
2024-03-04T19:12:07.2840126Z         when given a manufacturer
2024-03-04T19:12:07.3402981Z           should display Manufacturer and the manufacturer name
2024-03-04T19:12:07.3403952Z         when given a misc donation
2024-03-04T19:12:07.3944750Z           should display Misc Donation and a truncated comment
2024-03-04T19:12:07.3946083Z         when given a donation site
2024-03-04T19:12:07.4561047Z           should display Donation Site and the name of the site
2024-03-04T19:12:07.4561693Z 
2024-03-04T19:12:07.4562221Z Admin::Partners
2024-03-04T19:12:07.4563181Z   When logged in as a super admin
2024-03-04T19:12:07.4564245Z     GET #index
2024-03-04T19:12:07.4918983Z       returns http success
2024-03-04T19:12:07.4919792Z     GET #edit
2024-03-04T19:12:07.5497525Z       returns http success
2024-03-04T19:12:07.5498478Z     PUT #update
2024-03-04T19:12:07.5498992Z       unsuccessful save due to empty params
2024-03-04T19:12:07.6085521Z         renders #edit template with error message
2024-03-04T19:12:07.6086133Z       successful save
2024-03-04T19:12:07.6479956Z         updates partner
2024-03-04T19:12:07.6871516Z         redirects
2024-03-04T19:12:07.6872332Z     GET #show
2024-03-04T19:12:07.7390366Z       returns http success
2024-03-04T19:12:07.7393756Z 
2024-03-04T19:12:07.7394395Z Dashboard
2024-03-04T19:12:07.7398041Z   With a new essentials bank
2024-03-04T19:12:35.7603182Z     displays the getting started guide until the steps are completed
2024-03-04T19:12:35.7604465Z   With an existing essentials bank
2024-03-04T19:12:35.7605524Z     Inventory Totals
2024-03-04T19:12:35.7606080Z       Summary
2024-03-04T19:12:36.4520929Z         displays the on-hand totals
2024-03-04T19:12:36.4521810Z         when constrained to date range
2024-03-04T19:12:37.4722992Z           does not change
2024-03-04T19:12:37.4723879Z     Purchases
2024-03-04T19:12:38.3875899Z       has a link to create a new purchase
2024-03-04T19:12:38.3877612Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:12:38.3878879Z         filtering to 'Today'
2024-03-04T19:12:39.8151260Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:12:39.8152919Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:12:39.8154066Z         filtering to 'Last 30 Days'
2024-03-04T19:12:41.1955545Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:12:41.1957390Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 4 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:12:41.1958661Z         filtering to 'Yesterday'
2024-03-04T19:12:42.6835123Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:12:42.6836971Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:12:42.6838075Z         filtering to 'This Year'
2024-03-04T19:12:44.0925851Z           shows correct 2 Recent Purchase link(s)
2024-03-04T19:12:44.0927306Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 4 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:12:44.0928678Z         filtering to 'Last 7 Days'
2024-03-04T19:12:45.5701869Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:12:45.5703898Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:12:45.5705176Z         filtering to 'This Month'
2024-03-04T19:12:46.9969322Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:12:46.9970829Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:12:46.9971656Z         filtering to 'Last Month'
2024-03-04T19:12:48.3960359Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:12:48.3961726Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 3 during 2022-03-04..2023-12-15, and 1 on 2023-12-16
2024-03-04T19:12:48.3962916Z         filtering to '' (March 4, 2022 - December 15, 2023)
2024-03-04T19:12:50.0203871Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:12:50.0204805Z     Signage
2024-03-04T19:12:52.9247035Z       shows their organization name unless they have a logo set
2024-03-04T19:12:52.9247708Z     Product Drives
2024-03-04T19:12:53.5149250Z       has a widget for product drive summary data
2024-03-04T19:12:53.5150231Z       Product drive behaviour with Mixed Donation types
2024-03-04T19:12:54.2054807Z         only counts product drive donations for product drive
2024-03-04T19:12:54.9006418Z         only counts product drive money raised
2024-03-04T19:12:55.6139664Z         only shows product drive donations as product drive donations
2024-03-04T19:12:55.6141821Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 3 during 2022-03-04..2023-11-15, and 1 on 2023-11-16
2024-03-04T19:12:55.6143491Z         filtering to '' (March 4, 2022 - November 15, 2023)
2024-03-04T19:12:57.0480578Z           shows the correct total money raised
2024-03-04T19:12:58.5050356Z           shows the correct total donations
2024-03-04T19:12:59.9568444Z           shows 3 Recent Donation link(s)
2024-03-04T19:12:59.9570311Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:12:59.9572142Z         filtering to 'This Year'
2024-03-04T19:13:01.4339612Z           shows the correct total donations
2024-03-04T19:13:02.8677271Z           shows the correct total money raised
2024-03-04T19:13:04.3565733Z           shows 3 Recent Donation link(s)
2024-03-04T19:13:04.3567942Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:13:04.3569436Z         filtering to 'Last Month'
2024-03-04T19:13:05.7283463Z           shows the correct total donations
2024-03-04T19:13:09.2547783Z           shows 0 Recent Donation link(s)
2024-03-04T19:13:10.6301883Z           shows the correct total money raised
2024-03-04T19:13:10.6303698Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:10.6305351Z         filtering to 'Today'
2024-03-04T19:13:11.9917882Z           shows the correct total money raised
2024-03-04T19:13:13.3629324Z           shows the correct total donations
2024-03-04T19:13:16.6969675Z           shows 0 Recent Donation link(s)
2024-03-04T19:13:16.6971635Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:13:16.6972984Z         filtering to 'This Month'
2024-03-04T19:13:18.1721448Z           shows the correct total money raised
2024-03-04T19:13:19.6468987Z           shows 3 Recent Donation link(s)
2024-03-04T19:13:21.2525029Z           shows the correct total donations
2024-03-04T19:13:21.2532917Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 3 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:13:21.2534713Z         filtering to 'Yesterday'
2024-03-04T19:13:22.6701410Z           shows the correct total money raised
2024-03-04T19:13:24.0823251Z           shows the correct total donations
2024-03-04T19:13:25.4996366Z           shows 3 Recent Donation link(s)
2024-03-04T19:13:25.4998317Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:25.4999651Z         filtering to 'Last 30 Days'
2024-03-04T19:13:26.8110901Z           shows the correct total money raised
2024-03-04T19:13:28.1222321Z           shows the correct total donations
2024-03-04T19:13:31.4811247Z           shows 0 Recent Donation link(s)
2024-03-04T19:13:31.4813494Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 3 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:31.4815167Z         filtering to 'Last 7 Days'
2024-03-04T19:13:32.9392050Z           shows 3 Recent Donation link(s)
2024-03-04T19:13:34.3914005Z           shows the correct total donations
2024-03-04T19:13:35.8248574Z           shows the correct total money raised
2024-03-04T19:13:35.8249656Z     Manufacturer Donations
2024-03-04T19:13:36.4059195Z       has a link to create a new donation
2024-03-04T19:13:36.4061115Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 6 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:13:36.4062312Z         filtering to 'Last Month'
2024-03-04T19:13:38.3452798Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T19:13:38.3454961Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 7 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:38.3456448Z         filtering to 'Last 7 Days'
2024-03-04T19:13:40.2425034Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-04T19:13:40.2426774Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 8 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:40.2427612Z         filtering to 'All Time'
2024-03-04T19:13:42.2845819Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-04T19:13:42.2847842Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 6 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:13:42.2849164Z         filtering to 'Yesterday'
2024-03-04T19:13:44.1642705Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T19:13:44.1644616Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:13:44.1645818Z         filtering to 'This Year'
2024-03-04T19:13:45.4993969Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:13:45.4995654Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 9 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:45.4998107Z         filtering to 'Last 30 Days'
2024-03-04T19:13:47.6234483Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:13:47.6236688Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:47.6238064Z         filtering to 'Today'
2024-03-04T19:13:49.2999332Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-04T19:13:49.3002053Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 7 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:13:49.3003483Z         filtering to 'This Month'
2024-03-04T19:13:51.1632610Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-04T19:13:51.1634710Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 2 during 2022-03-04..2023-11-26, and 1 on 2023-11-27
2024-03-04T19:13:51.1635692Z         filtering to '' (March 4, 2022 - November 26, 2023)
2024-03-04T19:13:52.6535512Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-04T19:13:52.6536710Z     Distributions
2024-03-04T19:13:53.5370095Z       has a link to create a new distribution
2024-03-04T19:13:53.5372082Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 3 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:13:53.5373418Z         filtering to 'Yesterday'
2024-03-04T19:13:54.9763748Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:13:54.9766559Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:13:54.9768031Z         filtering to 'Last Month'
2024-03-04T19:13:56.4615171Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:13:56.4616951Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 1 during 2022-03-04..2023-10-26, and 1 on 2023-10-27
2024-03-04T19:13:56.4618013Z         filtering to '' (March 4, 2022 - October 26, 2023)
2024-03-04T19:13:57.8723658Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T19:13:57.8725425Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:13:57.8726335Z         filtering to 'Last 7 Days'
2024-03-04T19:13:59.3270220Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T19:13:59.3271629Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:13:59.3272426Z         filtering to 'This Month'
2024-03-04T19:14:00.7696389Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:14:00.7698376Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:00.7699879Z         filtering to 'Last 30 Days'
2024-03-04T19:14:02.2227455Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:14:02.2229174Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:02.2229964Z         filtering to 'Today'
2024-03-04T19:14:03.7696709Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:14:03.7699214Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:14:03.7701436Z         filtering to 'This Year'
2024-03-04T19:14:05.2921966Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:14:05.2924113Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:05.2925085Z         filtering to 'All Time'
2024-03-04T19:14:08.6890543Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:14:08.6894204Z     Donations
2024-03-04T19:14:09.5939300Z       has a link to create a new donation
2024-03-04T19:14:09.5941016Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:14:09.5944103Z         filtering to 'Last Month'
2024-03-04T19:14:11.0386902Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:14:11.0388714Z       given 1 Donation on 2022-03-03 (only if a valid date), 4 during 2022-03-04..2023-12-08, and 1 on 2023-12-09
2024-03-04T19:14:11.0389867Z         filtering to '' (March 4, 2022 - December 8, 2023)
2024-03-04T19:14:12.5490904Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:14:12.5492758Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:14:12.5494010Z         filtering to 'This Year'
2024-03-04T19:14:14.0281782Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:14:14.0283387Z       given 1 Donation on 2024-03-03 (only if a valid date), 2 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:14.0284312Z         filtering to 'Today'
2024-03-04T19:14:15.6863932Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:14:15.6865580Z       given 1 Donation on 2024-03-02 (only if a valid date), 2 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:14:15.6866765Z         filtering to 'Yesterday'
2024-03-04T19:14:17.1073748Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:14:17.1075394Z       given 1 Donation on 2024-02-26 (only if a valid date), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:17.1076547Z         filtering to 'Last 7 Days'
2024-03-04T19:14:18.5397028Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:14:18.5398667Z       given 1 Donation on 2024-02-03 (only if a valid date), 3 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:14:18.5399830Z         filtering to 'Last 30 Days'
2024-03-04T19:14:19.9854295Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:14:19.9855938Z       given 1 Donation on 2024-02-29 (only if a valid date), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:14:19.9857092Z         filtering to 'This Month'
2024-03-04T19:14:23.3228264Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T19:14:23.3230911Z 
2024-03-04T19:14:23.3231097Z Profiles
2024-03-04T19:14:23.3235655Z   GET #edit
2024-03-04T19:14:23.4206101Z     returns http success
2024-03-04T19:14:23.4206758Z   POST #update
2024-03-04T19:14:23.4207280Z     when updating an existing value to a blank value
2024-03-04T19:14:23.4656361Z       should have blank values
2024-03-04T19:14:23.5109127Z       update partner
2024-03-04T19:14:23.5109670Z     successful save
2024-03-04T19:14:23.5645388Z       update partner
2024-03-04T19:14:23.6124212Z       redirects to #show
2024-03-04T19:14:23.6124806Z 
2024-03-04T19:14:23.6125053Z Vendor
2024-03-04T19:14:23.6126850Z   when creating a new vendor
2024-03-04T19:14:24.3558727Z     cannot add a new vendor instance with empty attributes
2024-03-04T19:14:25.1475160Z     can create a new vendor instance as a user
2024-03-04T19:14:25.1475910Z   when editing an existing vendor
2024-03-04T19:14:25.9182848Z     does not update a vendor with empty attributes
2024-03-04T19:14:26.7160696Z     can update the contact info for a vendor as a user
2024-03-04T19:14:26.7161498Z   When a user views the index page
2024-03-04T19:14:27.2157074Z     should have the vendor names in alphabetical order
2024-03-04T19:14:27.2158203Z   When vendor have purchases associated with them already
2024-03-04T19:14:27.7737514Z     can have existing vendors show in the #index with some summary stats
2024-03-04T19:14:28.3580250Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T19:14:28.3580947Z 
2024-03-04T19:14:28.3581119Z /partners/children
2024-03-04T19:14:28.3582051Z   GET #index
2024-03-04T19:14:28.4484560Z     should render without any issues
2024-03-04T19:14:28.5005984Z     should export CSV
2024-03-04T19:14:28.5180337Z W, [2024-03-04T11:14:28.517668 #2463]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T19:14:28.5181971Z W, [2024-03-04T11:14:28.517720 #2463]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:14:28.5184096Z W, [2024-03-04T11:14:28.517734 #2463]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:14:28.5189070Z W, [2024-03-04T11:14:28.517766 #2463]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T19:14:28.5190374Z 
2024-03-04T19:14:28.5190789Z Finished in 3 minutes 46.9 seconds (files took 8.65 seconds to load)
2024-03-04T19:14:28.5191627Z 233 examples, 0 failures
2024-03-04T19:14:28.5191954Z 
2024-03-04T19:14:28.5192135Z Randomized with seed 4017
2024-03-04T19:14:28.5192480Z 
2024-03-04T19:14:28.8277837Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3868 / 6475 LOC (59.74%) covered.
2024-03-04T19:14:29.3388806Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
