2024-03-04T22:35:28.9744900Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T22:35:28.9745962Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T22:35:28.9774323Z shell: /usr/bin/bash -e {0}
2024-03-04T22:35:28.9774683Z env:
2024-03-04T22:35:28.9775023Z   POSTGRES_HOST: localhost
2024-03-04T22:35:28.9775471Z   DATABASE_HOST: localhost
2024-03-04T22:35:28.9775866Z   PG_USERNAME: postgres
2024-03-04T22:35:28.9776247Z   PG_PASSWORD: password
2024-03-04T22:35:28.9776662Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T22:35:28.9777102Z   POSTGRES_PORT: 5432
2024-03-04T22:35:28.9777458Z   PGHOST: localhost
2024-03-04T22:35:28.9777852Z   PGUSER: postgres
2024-03-04T22:35:28.9778200Z   RAILS_ENV: test
2024-03-04T22:35:28.9778527Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T22:35:28.9779050Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T22:35:28.9779449Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T22:35:28.9779890Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T22:35:28.9780507Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T22:35:28.9781157Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T22:35:28.9781878Z   EVENTS_READ: true
2024-03-04T22:35:28.9782219Z ##[endgroup]
2024-03-04T22:35:34.5540685Z W, [2024-03-04T22:35:34.553736 #2328]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T22:35:34.5542631Z W, [2024-03-04T22:35:34.553790 #2328]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T22:35:34.5544296Z W, [2024-03-04T22:35:34.553812 #2328]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T22:35:34.5547483Z W, [2024-03-04T22:35:34.553842 #2328]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T22:35:37.1874706Z W, [2024-03-04T22:35:37.187184 #2328]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T22:35:37.1876670Z W, [2024-03-04T22:35:37.187227 #2328]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T22:35:37.1879246Z W, [2024-03-04T22:35:37.187243 #2328]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T22:35:37.1882788Z W, [2024-03-04T22:35:37.187292 #2328]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T22:35:37.1935726Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T22:35:45.5639892Z 
2024-03-04T22:35:45.5641004Z Randomized with seed 8082
2024-03-04T22:35:46.4884803Z 
2024-03-04T22:35:46.4885505Z Kit management
2024-03-04T22:35:48.1488099Z   can create a new kit as a user with the proper quantity
2024-03-04T22:35:49.6121234Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T22:35:50.1851289Z   should not display inactive storage locations under allocations
2024-03-04T22:35:50.1852596Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T22:35:51.2971553Z     will not change quantity amounts when allocating
2024-03-04T22:35:51.2972627Z   when there is no kit quantity
2024-03-04T22:35:52.4273019Z     will not change quantity amounts when deallocating
2024-03-04T22:35:52.4273913Z 
2024-03-04T22:35:52.4274165Z Profiles
2024-03-04T22:35:52.4275345Z   POST #update
2024-03-04T22:35:52.4276502Z     successful save
2024-03-04T22:35:52.4798442Z       redirects to #show
2024-03-04T22:35:52.5224151Z       update partner
2024-03-04T22:35:52.5224940Z     when updating an existing value to a blank value
2024-03-04T22:35:52.5651508Z       should have blank values
2024-03-04T22:35:52.6075810Z       update partner
2024-03-04T22:35:52.6076586Z   GET #edit
2024-03-04T22:35:52.7078329Z     returns http success
2024-03-04T22:35:52.7078935Z 
2024-03-04T22:35:52.7079223Z Admin::Partners
2024-03-04T22:35:52.7080010Z   When logged in as a super admin
2024-03-04T22:35:52.7080880Z     GET #index
2024-03-04T22:35:52.7414467Z       returns http success
2024-03-04T22:35:52.7415415Z     GET #show
2024-03-04T22:35:52.7881741Z       returns http success
2024-03-04T22:35:52.7882678Z     PUT #update
2024-03-04T22:35:52.7883382Z       unsuccessful save due to empty params
2024-03-04T22:35:52.8409209Z         renders #edit template with error message
2024-03-04T22:35:52.8410092Z       successful save
2024-03-04T22:35:52.8779009Z         updates partner
2024-03-04T22:35:52.9116958Z         redirects
2024-03-04T22:35:52.9117758Z     GET #edit
2024-03-04T22:35:52.9584690Z       returns http success
2024-03-04T22:35:52.9588108Z 
2024-03-04T22:35:52.9588663Z BarcodeItems
2024-03-04T22:35:52.9589428Z   While signed in
2024-03-04T22:35:52.9591459Z     GET #index
2024-03-04T22:35:52.9592282Z       html
2024-03-04T22:35:53.0077079Z         is expected to be successful
2024-03-04T22:35:53.0077687Z       csv
2024-03-04T22:35:53.0294533Z         is expected to be successful
2024-03-04T22:35:53.0295323Z     DELETE #destroy
2024-03-04T22:35:53.2401366Z       disallows a user to delete someone else's barcode
2024-03-04T22:35:53.2804627Z       disallows a non-superadmin to delete a global barcode
2024-03-04T22:35:53.3331535Z       redirects to the index
2024-03-04T22:35:53.3332225Z     GET #new
2024-03-04T22:35:53.3890080Z       returns http success
2024-03-04T22:35:53.3891247Z     GET #show
2024-03-04T22:35:53.3891963Z       with a normal barcode item
2024-03-04T22:35:53.4484540Z         returns http success
2024-03-04T22:35:53.4485484Z       with a global barcode item
2024-03-04T22:35:53.5153669Z         returns a 404
2024-03-04T22:35:53.5154248Z     Looking at a different organization
2024-03-04T22:35:53.7000252Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T22:35:53.7001130Z     GET #edit
2024-03-04T22:35:53.7001638Z       with a global barcode item
2024-03-04T22:35:53.7311013Z         returns a 404
2024-03-04T22:35:53.7311756Z       with a normal barcode item
2024-03-04T22:35:53.7722795Z         returns http success
2024-03-04T22:35:53.7723460Z     GET #find
2024-03-04T22:35:53.7724552Z       via ajax
2024-03-04T22:35:53.9748579Z         can find a barcode that is scoped to just this organization
2024-03-04T22:35:54.1747118Z         can find a barcode that's universally available
2024-03-04T22:35:54.1748160Z         when it's missing
2024-03-04T22:35:54.3705512Z           returns a 404
2024-03-04T22:35:54.3706993Z 
2024-03-04T22:35:54.3707194Z User account management
2024-03-04T22:35:54.3708538Z   when in staging
2024-03-04T22:35:54.8277270Z     should display staging warning
2024-03-04T22:35:55.2839449Z     should not allow the user to change staging credentials
2024-03-04T22:35:55.2840362Z   when not in staging
2024-03-04T22:35:56.0268411Z     should fail when the email is invalid
2024-03-04T22:35:56.9324029Z     should change the email
2024-03-04T22:35:57.8357863Z     should change an user name
2024-03-04T22:35:57.8358709Z 
2024-03-04T22:35:57.8359176Z /partners/profiles
2024-03-04T22:35:57.8360932Z   GET #show
2024-03-04T22:35:57.8994609Z     displays the partner
2024-03-04T22:35:57.9520741Z     shows correct values for yes/no buttons
2024-03-04T22:35:57.9521716Z   PUT #update
2024-03-04T22:35:58.0042895Z     updates the partner and profile
2024-03-04T22:35:58.0043814Z     with no social media
2024-03-04T22:35:58.1015619Z       shows an error
2024-03-04T22:35:58.1016437Z     when updating an existing value to a blank value
2024-03-04T22:35:58.1514646Z       does store N/A in the database
2024-03-04T22:35:58.2018989Z       does not update other partner profile attributes to blank
2024-03-04T22:35:58.2503175Z       updates the partner profile attribute to a blank value
2024-03-04T22:35:58.2504076Z   GET #edit
2024-03-04T22:35:58.3333630Z     does not have default radio button value when value is nil
2024-03-04T22:35:58.4142291Z     has "No" radio button value when value is false
2024-03-04T22:35:58.4953895Z     has "Yes" radio button value when value is true
2024-03-04T22:35:58.5887943Z     displays the partner
2024-03-04T22:35:58.5889807Z 
2024-03-04T22:35:58.5890093Z Organization management
2024-03-04T22:35:58.5891484Z   while signed in as a normal user
2024-03-04T22:35:59.0665741Z     can see summary details about the organization as a user
2024-03-04T22:35:59.5382861Z     cannot see 'Make user' button for admins
2024-03-04T22:35:59.5383841Z   while signed in as an organization admin
2024-03-04T22:36:00.4877056Z     can add a new user to an organization
2024-03-04T22:36:01.4329736Z     can re-activate a user in the organization
2024-03-04T22:36:01.9287931Z     can see 'Make user' button for admins
2024-03-04T22:36:02.8794875Z     can deactivate a user in the organization
2024-03-04T22:36:03.3815954Z     can re-invite a user to an organization after 7 days
2024-03-04T22:36:03.3817125Z     Editing the organization
2024-03-04T22:36:04.7950892Z       can select and deselect Required Partner Fields
2024-03-04T22:36:05.9476345Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T22:36:06.7799693Z       can set a default storage location on the organization
2024-03-04T22:36:07.6046601Z       can set the NDBN Member ID
2024-03-04T22:36:08.5866316Z       can select if the org repackages essentials
2024-03-04T22:36:09.5545859Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T22:36:10.5193248Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T22:36:11.5267289Z       can select if the org distributes essentials monthly
2024-03-04T22:36:12.4886122Z       can enable if the org uses single step invite and approve partner process
2024-03-04T22:36:13.3338254Z       can set a reminder and a deadline day
2024-03-04T22:36:13.3339111Z     Viewing the organization
2024-03-04T22:36:13.8847590Z       can view organization details
2024-03-04T22:36:13.8851712Z 
2024-03-04T22:36:13.8852026Z Dashboard
2024-03-04T22:36:13.8853536Z   With a new essentials bank
2024-03-04T22:36:41.8871729Z     displays the getting started guide until the steps are completed
2024-03-04T22:36:41.8872826Z   With an existing essentials bank
2024-03-04T22:36:41.8873714Z     Signage
2024-03-04T22:36:44.7439852Z       shows their organization name unless they have a logo set
2024-03-04T22:36:44.7440660Z     Manufacturer Donations
2024-03-04T22:36:45.3196861Z       has a link to create a new donation
2024-03-04T22:36:45.3199050Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 8 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T22:36:45.3200093Z         filtering to 'This Month'
2024-03-04T22:36:47.5158519Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T22:36:47.5160294Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 7 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:36:47.5161363Z         filtering to 'Today'
2024-03-04T22:36:49.7543052Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-04T22:36:49.7545194Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 3 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:36:49.7546482Z         filtering to 'Last 30 Days'
2024-03-04T22:36:51.3490931Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-04T22:36:51.3492938Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 3 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:36:51.3494437Z         filtering to 'All Time'
2024-03-04T22:36:52.8519923Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-04T22:36:52.8522077Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 6 during 2022-03-04..2023-12-17, and 1 on 2023-12-18
2024-03-04T22:36:52.8523172Z         filtering to '' (March 4, 2022 - December 17, 2023)
2024-03-04T22:36:54.8152475Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T22:36:54.8154886Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 5 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T22:36:54.8156057Z         filtering to 'This Year'
2024-03-04T22:36:56.6708128Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-03-04T22:36:56.6710120Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T22:36:56.6711360Z         filtering to 'Last Month'
2024-03-04T22:36:58.2054366Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-04T22:36:58.2056331Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 4 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T22:36:58.2057663Z         filtering to 'Yesterday'
2024-03-04T22:37:00.0797039Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-04T22:37:00.0798726Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 1 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:00.0799709Z         filtering to 'Last 7 Days'
2024-03-04T22:37:01.5589741Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-04T22:37:01.5590816Z     Distributions
2024-03-04T22:37:02.4746904Z       has a link to create a new distribution
2024-03-04T22:37:02.4748522Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 3 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T22:37:02.4749832Z         filtering to 'Yesterday'
2024-03-04T22:37:03.9154715Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T22:37:03.9156578Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 4 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:03.9157871Z         filtering to 'Last 30 Days'
2024-03-04T22:37:05.3341721Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T22:37:05.3343668Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:05.3344564Z         filtering to 'All Time'
2024-03-04T22:37:06.6982520Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T22:37:06.6984543Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T22:37:06.6986184Z         filtering to 'Last Month'
2024-03-04T22:37:08.1235049Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T22:37:08.1236950Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T22:37:08.1238245Z         filtering to 'This Year'
2024-03-04T22:37:09.5086402Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T22:37:09.5088497Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T22:37:09.5089952Z         filtering to 'This Month'
2024-03-04T22:37:10.8906848Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T22:37:10.8909042Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:10.8910321Z         filtering to 'Last 7 Days'
2024-03-04T22:37:12.3128753Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T22:37:12.3130687Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:12.3132317Z         filtering to 'Today'
2024-03-04T22:37:13.7000957Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T22:37:13.7002937Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 3 during 2022-03-04..2024-03-01, and 1 on 2024-03-02
2024-03-04T22:37:13.7004331Z         filtering to '' (March 4, 2022 - March 1, 2024)
2024-03-04T22:37:15.1085228Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T22:37:15.1086555Z     Inventory Totals
2024-03-04T22:37:15.1087469Z       Summary
2024-03-04T22:37:15.8170763Z         displays the on-hand totals
2024-03-04T22:37:15.8171780Z         when constrained to date range
2024-03-04T22:37:16.8381277Z           does not change
2024-03-04T22:37:16.8382280Z     Donations
2024-03-04T22:37:17.7284401Z       has a link to create a new donation
2024-03-04T22:37:17.7286106Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T22:37:17.7287689Z         filtering to 'Last Month'
2024-03-04T22:37:19.1860455Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T22:37:19.1862250Z       given 1 Donation on 2024-03-02 (only if a valid date), 0 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T22:37:19.1863299Z         filtering to 'Yesterday'
2024-03-04T22:37:22.5239375Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T22:37:22.5241476Z       given 1 Donation on 2022-03-03 (only if a valid date), 2 during 2022-03-04..2024-01-05, and 1 on 2024-01-06
2024-03-04T22:37:22.5242622Z         filtering to '' (March 4, 2022 - January 5, 2024)
2024-03-04T22:37:23.9553040Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T22:37:23.9554868Z       given 1 Donation on 2024-02-29 (only if a valid date), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T22:37:23.9556324Z         filtering to 'This Month'
2024-03-04T22:37:25.4109755Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T22:37:25.4111616Z       given 1 Donation on 2024-02-26 (only if a valid date), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:25.4113097Z         filtering to 'Last 7 Days'
2024-03-04T22:37:26.8134209Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T22:37:26.8136236Z       given 1 Donation on 2024-03-03 (only if a valid date), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:26.8137503Z         filtering to 'Today'
2024-03-04T22:37:28.3132425Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T22:37:28.3133944Z       given 1 Donation on 2024-02-03 (only if a valid date), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:28.3135092Z         filtering to 'Last 30 Days'
2024-03-04T22:37:29.6811956Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T22:37:29.6813808Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T22:37:29.6815362Z         filtering to 'This Year'
2024-03-04T22:37:33.0116966Z           shows the correct total and 0 Recent Donation link(s)
2024-03-04T22:37:33.0118068Z     Product Drives
2024-03-04T22:37:33.6009254Z       has a widget for product drive summary data
2024-03-04T22:37:33.6011267Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 3 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:33.6012201Z         filtering to 'Today'
2024-03-04T22:37:35.0388940Z           shows the correct total money raised
2024-03-04T22:37:36.4888010Z           shows 3 Recent Donation link(s)
2024-03-04T22:37:37.9239938Z           shows the correct total donations
2024-03-04T22:37:37.9241921Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T22:37:37.9243389Z         filtering to 'Last Month'
2024-03-04T22:37:39.2387761Z           shows the correct total donations
2024-03-04T22:37:42.5601027Z           shows 0 Recent Donation link(s)
2024-03-04T22:37:43.8881603Z           shows the correct total money raised
2024-03-04T22:37:43.8883971Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T22:37:43.8885387Z         filtering to 'This Year'
2024-03-04T22:37:45.2459438Z           shows the correct total donations
2024-03-04T22:37:46.6075615Z           shows 1 Recent Donation link(s)
2024-03-04T22:37:47.9806724Z           shows the correct total money raised
2024-03-04T22:37:47.9808741Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 0 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T22:37:47.9810133Z         filtering to 'Yesterday'
2024-03-04T22:37:51.3118611Z           shows 0 Recent Donation link(s)
2024-03-04T22:37:52.6779630Z           shows the correct total money raised
2024-03-04T22:37:54.0094480Z           shows the correct total donations
2024-03-04T22:37:54.0096087Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 0 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:37:54.0097287Z         filtering to 'Last 7 Days'
2024-03-04T22:37:55.3280540Z           shows the correct total money raised
2024-03-04T22:37:56.6549030Z           shows the correct total donations
2024-03-04T22:37:59.9823193Z           shows 0 Recent Donation link(s)
2024-03-04T22:37:59.9825031Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 3 during 2022-03-04..2024-01-24, and 1 on 2024-01-25
2024-03-04T22:37:59.9826530Z         filtering to '' (March 4, 2022 - January 24, 2024)
2024-03-04T22:38:01.4761513Z           shows the correct total money raised
2024-03-04T22:38:02.9400647Z           shows 3 Recent Donation link(s)
2024-03-04T22:38:04.4035409Z           shows the correct total donations
2024-03-04T22:38:04.4037335Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T22:38:04.4038265Z         filtering to 'This Month'
2024-03-04T22:38:05.7373620Z           shows the correct total money raised
2024-03-04T22:38:07.0846242Z           shows the correct total donations
2024-03-04T22:38:10.4224760Z           shows 0 Recent Donation link(s)
2024-03-04T22:38:10.4227898Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:38:10.4229450Z         filtering to 'Last 30 Days'
2024-03-04T22:38:11.8303428Z           shows the correct total donations
2024-03-04T22:38:13.3148801Z           shows the correct total money raised
2024-03-04T22:38:14.6969818Z           shows 1 Recent Donation link(s)
2024-03-04T22:38:14.6971358Z       Product drive behaviour with Mixed Donation types
2024-03-04T22:38:15.3901789Z         only counts product drive donations for product drive
2024-03-04T22:38:16.1114991Z         only counts product drive money raised
2024-03-04T22:38:16.8333034Z         only shows product drive donations as product drive donations
2024-03-04T22:38:16.8334226Z     Purchases
2024-03-04T22:38:17.8212641Z       has a link to create a new purchase
2024-03-04T22:38:17.8214473Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:38:17.8215803Z         filtering to 'Today'
2024-03-04T22:38:19.2208798Z           shows correct 1 Recent Purchase link(s)
2024-03-04T22:38:19.2210340Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 1 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T22:38:19.2214392Z         filtering to 'Yesterday'
2024-03-04T22:38:20.6071762Z           shows correct 1 Recent Purchase link(s)
2024-03-04T22:38:20.6073579Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 2 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T22:38:20.6074980Z         filtering to 'This Month'
2024-03-04T22:38:22.0286935Z           shows correct 2 Recent Purchase link(s)
2024-03-04T22:38:22.0288895Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:38:22.0290165Z         filtering to 'Last 7 Days'
2024-03-04T22:38:23.4318328Z           shows correct 2 Recent Purchase link(s)
2024-03-04T22:38:23.4320119Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T22:38:23.4321238Z         filtering to 'Last Month'
2024-03-04T22:38:24.9198898Z           shows correct 3 Recent Purchase link(s)
2024-03-04T22:38:24.9200595Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 1 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T22:38:24.9201993Z         filtering to 'Last 30 Days'
2024-03-04T22:38:26.2806535Z           shows correct 1 Recent Purchase link(s)
2024-03-04T22:38:26.2808523Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T22:38:26.2809789Z         filtering to 'This Year'
2024-03-04T22:38:27.7254851Z           shows correct 3 Recent Purchase link(s)
2024-03-04T22:38:27.7256559Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 1 during 2022-03-04..2023-12-16, and 1 on 2023-12-17
2024-03-04T22:38:27.7257916Z         filtering to '' (March 4, 2022 - December 16, 2023)
2024-03-04T22:38:29.1146439Z           shows correct 1 Recent Purchase link(s)
2024-03-04T22:38:29.1147909Z 
2024-03-04T22:38:29.1148243Z /partners/children
2024-03-04T22:38:29.1149458Z   GET #index
2024-03-04T22:38:29.1961848Z     should export CSV
2024-03-04T22:38:29.2594106Z     should render without any issues
2024-03-04T22:38:29.2595096Z 
2024-03-04T22:38:29.2595428Z Admin Organization Management
2024-03-04T22:38:29.2596507Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T22:38:31.2773321Z     creates a new organization
2024-03-04T22:38:31.2774257Z   While signed in as an Administrative User (super admin)
2024-03-04T22:38:32.6098205Z     can view organization details
2024-03-04T22:38:34.5022520Z     creates a new organization
2024-03-04T22:38:35.5709735Z     filters by organizations by name in organizations index page
2024-03-04T22:38:35.5710877Z 
2024-03-04T22:38:35.5711160Z Managing requests
2024-03-04T22:38:35.5712701Z   creating a # individuals request
2024-03-04T22:38:35.5713873Z     GIVEN a partner user is permitted to make a request
2024-03-04T22:38:35.5715559Z       Select Input Tests
2024-03-04T22:38:35.5716632Z         WHEN they reach the page
2024-03-04T22:38:36.4402672Z           should show the proper items in the select box
2024-03-04T22:38:36.4403507Z           WHEN they create a request improperly
2024-03-04T22:38:37.7515744Z             should show the proper items in the select box
2024-03-04T22:38:37.7517067Z       WHEN they create a request with blank lines
2024-03-04T22:38:39.1217628Z         should be created without any issue
2024-03-04T22:38:39.1218663Z       WHEN they create a request improperly by not inputting anything
2024-03-04T22:38:40.0035414Z         should show an error message with the instructions
2024-03-04T22:38:40.0036253Z       WHEN they create a request with only a comment
2024-03-04T22:38:40.9505661Z         should be created without any issue
2024-03-04T22:38:40.9506798Z       WHEN they create a request completely empty request
2024-03-04T22:38:41.8618787Z         should show an error message with the instructions
2024-03-04T22:38:41.8619770Z       WHEN they create a request properly
2024-03-04T22:38:41.8620874Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T22:38:44.0312221Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T22:38:44.0313306Z   creating a new quantity request
2024-03-04T22:38:44.0314329Z     GIVEN a partner user is permitted to make a request
2024-03-04T22:38:44.0316434Z       WHEN they create a request with only a comment
2024-03-04T22:38:44.9677844Z         should be created without any issue
2024-03-04T22:38:44.9678744Z       WHEN they create a request with blank lines
2024-03-04T22:38:46.3228134Z         should be created without any issue
2024-03-04T22:38:46.3229030Z       WHEN they create a request properly
2024-03-04T22:38:46.3230940Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T22:38:48.5587767Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T22:38:48.5589270Z       WHEN they create a request completely empty request
2024-03-04T22:38:49.4465136Z         should show an error message with the instructions
2024-03-04T22:38:49.4466329Z       Select Input Tests
2024-03-04T22:38:49.4467043Z         WHEN they reach the page
2024-03-04T22:38:50.3023757Z           should show the proper items in the select box
2024-03-04T22:38:50.3024797Z           WHEN they create a request improperly
2024-03-04T22:38:51.6187351Z             should show the proper items in the select box
2024-03-04T22:38:51.6189270Z 
2024-03-04T22:38:51.6189613Z Vendor
2024-03-04T22:38:51.6191679Z   When vendor have purchases associated with them already
2024-03-04T22:38:52.2141358Z     can have existing vendors show in the #index with some summary stats
2024-03-04T22:38:52.8229840Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T22:38:52.8230909Z   when creating a new vendor
2024-03-04T22:38:53.5919036Z     can create a new vendor instance as a user
2024-03-04T22:38:54.3106763Z     cannot add a new vendor instance with empty attributes
2024-03-04T22:38:54.3107735Z   when editing an existing vendor
2024-03-04T22:38:55.0646366Z     does not update a vendor with empty attributes
2024-03-04T22:38:55.8341515Z     can update the contact info for a vendor as a user
2024-03-04T22:38:55.8342504Z   When a user views the index page
2024-03-04T22:38:56.3153527Z     should have the vendor names in alphabetical order
2024-03-04T22:38:56.3154825Z 
2024-03-04T22:38:56.3155160Z Adjustments
2024-03-04T22:38:56.3156617Z   while signed in
2024-03-04T22:38:56.3158128Z     GET #index
2024-03-04T22:38:56.3159171Z       csv
2024-03-04T22:38:56.3497403Z         is expected to be successful
2024-03-04T22:38:56.3498311Z       html
2024-03-04T22:38:56.3919486Z         is successful
2024-03-04T22:38:56.3920322Z         when filtering by date
2024-03-04T22:38:56.3921188Z           when date parameters are supplied
2024-03-04T22:38:56.4409935Z             only returns the correct objects
2024-03-04T22:38:56.4410550Z           when date parameters are not supplied
2024-03-04T22:38:56.4928236Z             returns all objects
2024-03-04T22:38:56.4929420Z     GET #new
2024-03-04T22:38:56.5297308Z       is successful
2024-03-04T22:38:56.5298315Z     POST #create
2024-03-04T22:38:56.5298750Z       with valid params
2024-03-04T22:38:56.5604522Z         assigns a user id from the current user
2024-03-04T22:38:56.5881324Z         creates a new Adjustment
2024-03-04T22:38:56.6146051Z         redirects to the #show after created adjustment
2024-03-04T22:38:56.6415820Z         assigns a newly created adjustment as @adjustment
2024-03-04T22:38:56.6416752Z       with invalid params
2024-03-04T22:38:56.6856390Z         re-renders the 'new' template
2024-03-04T22:38:56.7223751Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T22:38:56.7224701Z     GET #show
2024-03-04T22:38:56.7568121Z       is expected to be successful
2024-03-04T22:38:56.7569302Z 
2024-03-04T22:38:56.7569723Z Donations
2024-03-04T22:38:56.7573252Z   while signed in
2024-03-04T22:38:56.7574498Z     GET #edit
2024-03-04T22:38:56.7575496Z       when an finalized audit has been performed on the donated items
2024-03-04T22:38:56.8935517Z         shows a warning
2024-03-04T22:38:56.8936307Z     GET #index
2024-03-04T22:38:56.8937461Z       csv
2024-03-04T22:38:56.9229179Z         is expected to be successful
2024-03-04T22:38:56.9642886Z       html
2024-03-04T22:38:56.9643522Z         is expected to be successful
2024-03-04T22:38:57.0051114Z         should have the columns source and details
2024-03-04T22:38:57.0052011Z         when given a donation site
2024-03-04T22:38:57.0526541Z           should display Donation Site and the name of the site
2024-03-04T22:38:57.0527742Z         when given a product drive
2024-03-04T22:38:57.1006759Z           should display Product Drive and the name of the drive
2024-03-04T22:38:57.1008606Z         when given a misc donation
2024-03-04T22:38:57.1451259Z           should display Misc Donation and a truncated comment
2024-03-04T22:38:57.1452172Z         when given a manufacturer
2024-03-04T22:38:57.1925009Z           should display Manufacturer and the manufacturer name
2024-03-04T22:38:57.1926099Z     when no audit has been performed
2024-03-04T22:38:57.2952538Z       doesn't show a warning
2024-03-04T22:38:57.2953460Z     when an non-finalized audit has been performed on the donated items
2024-03-04T22:38:57.4307583Z       does not shows a warning
2024-03-04T22:38:57.4308650Z 
2024-03-04T22:38:57.4309190Z StorageLocations
2024-03-04T22:38:57.4310324Z   While signed in
2024-03-04T22:38:57.4312454Z     GET #new
2024-03-04T22:38:57.5757234Z       returns http success
2024-03-04T22:38:57.5757982Z     GET #index
2024-03-04T22:38:57.5758527Z       html
2024-03-04T22:38:57.6121239Z         succeeds
2024-03-04T22:38:57.6121974Z         with inactive locations
2024-03-04T22:38:57.6482983Z           does not includes the inactive location
2024-03-04T22:38:57.6484006Z           with include_inactive_locations
2024-03-04T22:38:57.6840282Z             includes the inactive location
2024-03-04T22:38:57.6841287Z       csv
2024-03-04T22:38:57.7014426Z         succeeds
2024-03-04T22:38:57.7969210Z         includes headers followed by alphabetized item names
2024-03-04T22:38:57.7970301Z     PUT #deactivate
2024-03-04T22:38:57.8155509Z       discards
2024-03-04T22:38:57.8156206Z       with inventory
2024-03-04T22:38:57.8614583Z         does not discard
2024-03-04T22:38:57.8615184Z     PUT #reactivate
2024-03-04T22:38:57.8772510Z       undiscards
2024-03-04T22:38:57.8773097Z     GET #inventory
2024-03-04T22:38:57.8774278Z       without any overrides
2024-03-04T22:38:57.9272688Z         returns a collection that only includes items at the storage location
2024-03-04T22:38:57.9273598Z       when also including omitted items
2024-03-04T22:38:57.9737301Z         contains a collection of ducktyped entries that respond the same
2024-03-04T22:38:58.0300227Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T22:38:58.0301102Z       when also including inactive items
2024-03-04T22:38:58.0988719Z         returns a collection that also includes items that have been deactivated
2024-03-04T22:38:58.0990053Z     GET #destroy
2024-03-04T22:38:58.1266025Z       redirects to #index
2024-03-04T22:38:58.1266784Z     GET #show
2024-03-04T22:38:58.1267437Z       csv
2024-03-04T22:38:58.1773165Z         should be successful
2024-03-04T22:38:58.1774145Z       html
2024-03-04T22:38:58.2450218Z         should return a correct response
2024-03-04T22:38:58.2450964Z         with version date set
2024-03-04T22:38:58.2451595Z           with no version found
2024-03-04T22:38:58.3176609Z             should show N/A
2024-03-04T22:38:58.3177201Z           with a version found
2024-03-04T22:38:58.3974782Z             should show the version specified
2024-03-04T22:38:58.3975819Z     POST #import_csv
2024-03-04T22:38:58.3977325Z       with a csv file
2024-03-04T22:38:58.4132164Z         presents a flash notice message
2024-03-04T22:38:58.4184043Z         invokes .import_csv
2024-03-04T22:38:58.4325014Z         redirects
2024-03-04T22:38:58.4325690Z       without a csv file
2024-03-04T22:38:58.4436513Z         redirects to :index
2024-03-04T22:38:58.4545468Z         presents a flash error message
2024-03-04T22:38:58.4546631Z       csv file with wrong headers
2024-03-04T22:38:58.4664480Z         presents a flash error message
2024-03-04T22:38:58.4780787Z         redirects
2024-03-04T22:38:58.4782137Z     GET #edit
2024-03-04T22:38:58.5138606Z       returns http success
2024-03-04T22:38:58.5139424Z     Looking at a different organization
2024-03-04T22:38:58.6937627Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T22:38:58.6938604Z   While not signed in
2024-03-04T22:38:58.7000316Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T22:38:58.7001230Z 
2024-03-04T22:38:58.7001557Z Purchases
2024-03-04T22:38:58.7003229Z   while signed in as an organization admin
2024-03-04T22:38:59.5264975Z     allows deletion of a purchase
2024-03-04T22:38:59.5265879Z   while signed in as a normal user
2024-03-04T22:38:59.5266801Z     When creating a new purchase
2024-03-04T22:38:59.9971237Z       should not display inactive storage locations in dropdown
2024-03-04T22:38:59.9972174Z       via manual entry
2024-03-04T22:39:01.1788151Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T22:39:02.3126292Z         User can create a purchase IN THE PAST
2024-03-04T22:39:03.1852027Z         User can create a purchase using dollars decimal amount
2024-03-04T22:39:04.2272436Z         User can create vendor from purchase
2024-03-04T22:39:05.2353553Z         Does not include inactive items in the line item fields
2024-03-04T22:39:05.2354177Z         when creating a purchase incorrectly
2024-03-04T22:39:06.0313662Z           should display failure with error messages
2024-03-04T22:39:07.0117615Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T22:39:07.0118602Z       Editing purchase
2024-03-04T22:39:07.6513963Z         A user can view another organizations purchase
2024-03-04T22:39:08.1506461Z         A user can see purchased_from value
2024-03-04T22:39:08.1507195Z       via barcode entry
2024-03-04T22:39:08.9628558Z         a user can add items via scanning them in by barcode
2024-03-04T22:39:10.1665155Z         a user can add items that do not yet have a barcode
2024-03-04T22:39:11.0446374Z         User scan same barcode 2 times
2024-03-04T22:39:11.0447374Z     When visiting the index page
2024-03-04T22:39:11.0449510Z       When filtering on the index page
2024-03-04T22:39:11.8701872Z         User can filter the #index by vendor
2024-03-04T22:39:12.6911901Z         User can filter the #index by storage location
2024-03-04T22:39:12.6912710Z         behaves like Date Range Picker
2024-03-04T22:39:12.6913687Z           when choosing 'Last Month'
2024-03-04T22:39:13.6476742Z             shows only 2 of the records
2024-03-04T22:39:13.6477659Z           when choosing a date range that only includes the previous week
2024-03-04T22:39:14.5978263Z             shows only 1 record
2024-03-04T22:39:14.5979277Z           when choosing 'All Time'
2024-03-04T22:39:15.5473384Z             shows all the records
2024-03-04T22:39:15.5474337Z       In the middle of the year
2024-03-04T22:39:16.3219236Z         User sees total purchases value
2024-03-04T22:39:17.0689078Z         User sees purchased date column
2024-03-04T22:39:17.8454646Z         User can click to the new purchase form
2024-03-04T22:39:17.8455587Z     When visiting an existing purchase
2024-03-04T22:39:18.3102161Z       does not allow deletion of a purchase
2024-03-04T22:39:18.3361469Z W, [2024-03-04T14:39:18.335932 #2378]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T22:39:18.3363236Z W, [2024-03-04T14:39:18.335985 #2378]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T22:39:18.3365471Z W, [2024-03-04T14:39:18.336009 #2378]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T22:39:18.3409386Z W, [2024-03-04T14:39:18.336040 #2378]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T22:39:18.3411061Z 
2024-03-04T22:39:18.3411565Z Finished in 3 minutes 32.8 seconds (files took 8.11 seconds to load)
2024-03-04T22:39:18.3412446Z 233 examples, 0 failures
2024-03-04T22:39:18.3412675Z 
2024-03-04T22:39:18.3412807Z Randomized with seed 8082
2024-03-04T22:39:18.3413034Z 
2024-03-04T22:39:18.6366754Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3878 / 6475 LOC (59.89%) covered.
2024-03-04T22:39:19.1349585Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
