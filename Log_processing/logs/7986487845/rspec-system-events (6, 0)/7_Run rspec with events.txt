2024-02-21T09:05:51.3460549Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-21T09:05:51.3461538Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-21T09:05:51.3490077Z shell: /usr/bin/bash -e {0}
2024-02-21T09:05:51.3490436Z env:
2024-02-21T09:05:51.3490873Z   POSTGRES_HOST: localhost
2024-02-21T09:05:51.3491245Z   DATABASE_HOST: localhost
2024-02-21T09:05:51.3491625Z   PG_USERNAME: postgres
2024-02-21T09:05:51.3492055Z   PG_PASSWORD: password
2024-02-21T09:05:51.3492449Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-21T09:05:51.3492883Z   POSTGRES_PORT: 5432
2024-02-21T09:05:51.3493277Z   PGHOST: localhost
2024-02-21T09:05:51.3493632Z   PGUSER: postgres
2024-02-21T09:05:51.3493975Z   RAILS_ENV: test
2024-02-21T09:05:51.3494416Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-21T09:05:51.3494822Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-21T09:05:51.3495236Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-21T09:05:51.3495762Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-21T09:05:51.3496336Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-21T09:05:51.3497003Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-21T09:05:51.3497658Z   EVENTS_READ: true
2024-02-21T09:05:51.3498013Z ##[endgroup]
2024-02-21T09:05:57.0943052Z W, [2024-02-21T09:05:57.093992 #2310]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-21T09:05:57.0945097Z W, [2024-02-21T09:05:57.094046 #2310]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:05:57.0948832Z W, [2024-02-21T09:05:57.094062 #2310]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:05:57.0952077Z W, [2024-02-21T09:05:57.094085 #2310]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-21T09:05:59.7290414Z W, [2024-02-21T09:05:59.728696 #2310]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-21T09:05:59.7292105Z W, [2024-02-21T09:05:59.728737 #2310]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:05:59.7293674Z W, [2024-02-21T09:05:59.728751 #2310]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:05:59.7296169Z W, [2024-02-21T09:05:59.728801 #2310]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-21T09:05:59.7348856Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-21T09:06:08.0358227Z 
2024-02-21T09:06:08.0358978Z Randomized with seed 47720
2024-02-21T09:06:08.9781781Z 
2024-02-21T09:06:08.9782514Z /partners/profiles
2024-02-21T09:06:08.9783458Z   PUT #update
2024-02-21T09:06:09.0696465Z     updates the partner and profile
2024-02-21T09:06:09.0697370Z     with no social media
2024-02-21T09:06:09.1890781Z       shows an error
2024-02-21T09:06:09.1891856Z     when updating an existing value to a blank value
2024-02-21T09:06:09.2435515Z       updates the partner profile attribute to a blank value
2024-02-21T09:06:09.2956170Z       does store N/A in the database
2024-02-21T09:06:09.3470141Z       does not update other partner profile attributes to blank
2024-02-21T09:06:09.3470882Z   GET #show
2024-02-21T09:06:09.4073494Z     shows correct values for yes/no buttons
2024-02-21T09:06:09.4554231Z     displays the partner
2024-02-21T09:06:09.4554693Z   GET #edit
2024-02-21T09:06:09.5411761Z     does not have default radio button value when value is nil
2024-02-21T09:06:09.6279328Z     has "No" radio button value when value is false
2024-02-21T09:06:09.7140654Z     has "Yes" radio button value when value is true
2024-02-21T09:06:09.8139792Z     displays the partner
2024-02-21T09:06:09.8140541Z 
2024-02-21T09:06:09.8140815Z User account management
2024-02-21T09:06:09.8142494Z   when not in staging
2024-02-21T09:06:11.5016826Z     should change an user name
2024-02-21T09:06:12.3957856Z     should change the email
2024-02-21T09:06:13.1661195Z     should fail when the email is invalid
2024-02-21T09:06:13.1662126Z   when in staging
2024-02-21T09:06:13.6156164Z     should display staging warning
2024-02-21T09:06:14.0710491Z     should not allow the user to change staging credentials
2024-02-21T09:06:14.0711204Z 
2024-02-21T09:06:14.0711630Z DonationSites
2024-02-21T09:06:14.0712525Z   while signed in
2024-02-21T09:06:14.0713287Z     GET #index
2024-02-21T09:06:14.0714244Z       csv
2024-02-21T09:06:14.0980618Z         is expected to be successful
2024-02-21T09:06:14.0981673Z       html
2024-02-21T09:06:14.1338082Z         is expected to be successful
2024-02-21T09:06:14.1338913Z 
2024-02-21T09:06:14.1339292Z /account_requests
2024-02-21T09:06:14.1341077Z   GET #confirmation
2024-02-21T09:06:14.1341860Z     when given a token that has already been confirmed
2024-02-21T09:06:14.3280768Z       should render a error that says that is code provided is invalid
2024-02-21T09:06:14.3281827Z     when given a invalid token
2024-02-21T09:06:14.3341868Z       should render a error that says that is code provided is invalid
2024-02-21T09:06:14.3343035Z     when given a valid token
2024-02-21T09:06:14.3507850Z       should render the confirmation template
2024-02-21T09:06:14.3508693Z   GET #received
2024-02-21T09:06:14.3509396Z     when given a invalid token
2024-02-21T09:06:14.3566140Z       should render a error that says that is code provided is invalid
2024-02-21T09:06:14.3567179Z     when given a valid token
2024-02-21T09:06:14.3695293Z       should render the received template
2024-02-21T09:06:14.3696115Z   POST #create
2024-02-21T09:06:14.3698708Z     with valid parameters
2024-02-21T09:06:14.3856335Z       creates a new AccountRequest
2024-02-21T09:06:14.3977525Z       redirects to the created account_request confirmation
2024-02-21T09:06:14.4087152Z       delivers the confirmation email via default queue
2024-02-21T09:06:14.4088024Z     with invalid parameters
2024-02-21T09:06:14.4288072Z       does not create a new AccountRequest
2024-02-21T09:06:14.4451404Z       renders a successful response (i.e. to display the 'new' template)
2024-02-21T09:06:14.4452362Z   GET #confirm
2024-02-21T09:06:14.4452931Z     when given a valid token
2024-02-21T09:06:14.4640433Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-21T09:06:14.4642214Z     when given a invalid token
2024-02-21T09:06:14.4701948Z       should render a error that says that is code provided is invalid
2024-02-21T09:06:14.4703244Z     when given a token that has already been confirmed
2024-02-21T09:06:14.6510763Z       should render a error that says that is code provided is invalid
2024-02-21T09:06:14.6511805Z   GET #new
2024-02-21T09:06:14.6630180Z     renders a successful response
2024-02-21T09:06:14.6631407Z 
2024-02-21T09:06:14.6631678Z StorageLocations
2024-02-21T09:06:14.6632978Z   While signed in
2024-02-21T09:06:14.6635212Z     GET #edit
2024-02-21T09:06:14.8437398Z       returns http success
2024-02-21T09:06:14.8437971Z     GET #show
2024-02-21T09:06:14.8438583Z       html
2024-02-21T09:06:15.0090130Z         should return a correct response
2024-02-21T09:06:15.0091019Z         with version date set
2024-02-21T09:06:15.0095219Z           with a version found
2024-02-21T09:06:15.1361924Z             should show the version specified
2024-02-21T09:06:15.1362703Z           with no version found
2024-02-21T09:06:15.2128158Z             should show N/A
2024-02-21T09:06:15.2128967Z       csv
2024-02-21T09:06:15.2667544Z         should be successful
2024-02-21T09:06:15.2668481Z     POST #import_csv
2024-02-21T09:06:15.2671785Z       without a csv file
2024-02-21T09:06:15.2810727Z         presents a flash error message
2024-02-21T09:06:15.2928167Z         redirects to :index
2024-02-21T09:06:15.2928920Z       csv file with wrong headers
2024-02-21T09:06:15.3073301Z         redirects
2024-02-21T09:06:15.3197739Z         presents a flash error message
2024-02-21T09:06:15.3198619Z       with a csv file
2024-02-21T09:06:15.3351481Z         presents a flash notice message
2024-02-21T09:06:15.3493109Z         redirects
2024-02-21T09:06:15.3543683Z         invokes .import_csv
2024-02-21T09:06:15.3544273Z     GET #inventory
2024-02-21T09:06:15.3545268Z       when also including omitted items
2024-02-21T09:06:15.4049181Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-21T09:06:15.4529801Z         contains a collection of ducktyped entries that respond the same
2024-02-21T09:06:15.4530806Z       when also including inactive items
2024-02-21T09:06:15.5189858Z         returns a collection that also includes items that have been deactivated
2024-02-21T09:06:15.5190931Z       without any overrides
2024-02-21T09:06:15.5718115Z         returns a collection that only includes items at the storage location
2024-02-21T09:06:15.5719362Z     PUT #reactivate
2024-02-21T09:06:15.5894196Z       undiscards
2024-02-21T09:06:15.5894769Z     GET #new
2024-02-21T09:06:15.6215684Z       returns http success
2024-02-21T09:06:15.6216604Z     PUT #deactivate
2024-02-21T09:06:15.6421684Z       discards
2024-02-21T09:06:15.6422294Z       with inventory
2024-02-21T09:06:15.6899697Z         does not discard
2024-02-21T09:06:15.6900493Z     Looking at a different organization
2024-02-21T09:06:15.8639986Z       redirects the user to the sign-in page for CRUD actions
2024-02-21T09:06:15.8641098Z     GET #index
2024-02-21T09:06:15.8641631Z       html
2024-02-21T09:06:15.9009949Z         succeeds
2024-02-21T09:06:15.9010762Z         with inactive locations
2024-02-21T09:06:15.9371776Z           does not includes the inactive location
2024-02-21T09:06:15.9372802Z           with include_inactive_locations
2024-02-21T09:06:15.9733345Z             includes the inactive location
2024-02-21T09:06:15.9734168Z       csv
2024-02-21T09:06:16.0707209Z         includes headers followed by alphabetized item names
2024-02-21T09:06:16.0891231Z         succeeds
2024-02-21T09:06:16.0891944Z     GET #destroy
2024-02-21T09:06:16.1174717Z       redirects to #index
2024-02-21T09:06:16.1175413Z   While not signed in
2024-02-21T09:06:16.1239028Z     redirects the user to the sign-in page for CRUD actions
2024-02-21T09:06:16.1239942Z 
2024-02-21T09:06:16.1240146Z Vendor
2024-02-21T09:06:16.1241548Z   When vendor have purchases associated with them already
2024-02-21T09:06:16.7414472Z     can have a single vendor show semi-detailed stats about purchases
2024-02-21T09:06:17.3462468Z     can have existing vendors show in the #index with some summary stats
2024-02-21T09:06:17.3463714Z   when creating a new vendor
2024-02-21T09:06:18.0646522Z     cannot add a new vendor instance with empty attributes
2024-02-21T09:06:18.8291711Z     can create a new vendor instance as a user
2024-02-21T09:06:18.8292317Z   when editing an existing vendor
2024-02-21T09:06:19.5764782Z     does not update a vendor with empty attributes
2024-02-21T09:06:20.3380875Z     can update the contact info for a vendor as a user
2024-02-21T09:06:20.3381697Z   When a user views the index page
2024-02-21T09:06:20.8219438Z     should have the vendor names in alphabetical order
2024-02-21T09:06:20.8220918Z 
2024-02-21T09:06:20.8221150Z Purchases
2024-02-21T09:06:20.8223192Z   while signed in as an organization admin
2024-02-21T09:06:21.6845672Z     allows deletion of a purchase
2024-02-21T09:06:21.6846586Z   while signed in as a normal user
2024-02-21T09:06:21.6847377Z     When visiting the index page
2024-02-21T09:06:21.6848360Z       In the middle of the year
2024-02-21T09:06:22.4315395Z         User sees purchased date column
2024-02-21T09:06:23.2545336Z         User sees total purchases value
2024-02-21T09:06:24.0655650Z         User can click to the new purchase form
2024-02-21T09:06:24.0656571Z       When filtering on the index page
2024-02-21T09:06:24.9295073Z         User can filter the #index by storage location
2024-02-21T09:06:25.8122381Z         User can filter the #index by vendor
2024-02-21T09:06:25.8123391Z         behaves like Date Range Picker
2024-02-21T09:06:25.8124855Z           when choosing 'Last Month'
2024-02-21T09:06:26.9288976Z             shows only 2 of the records
2024-02-21T09:06:26.9290171Z           when choosing 'All Time'
2024-02-21T09:06:28.0596340Z             shows all the records
2024-02-21T09:06:28.0597829Z           when choosing a date range that only includes the previous week
2024-02-21T09:06:29.1119040Z             shows only 1 record
2024-02-21T09:06:29.1120331Z     When visiting an existing purchase
2024-02-21T09:06:29.6028768Z       does not allow deletion of a purchase
2024-02-21T09:06:29.6029415Z     When creating a new purchase
2024-02-21T09:06:30.0867369Z       should not display inactive storage locations in dropdown
2024-02-21T09:06:30.0868062Z       via barcode entry
2024-02-21T09:06:31.2936322Z         a user can add items that do not yet have a barcode
2024-02-21T09:06:32.2130966Z         User scan same barcode 2 times
2024-02-21T09:06:32.9331364Z         a user can add items via scanning them in by barcode
2024-02-21T09:06:32.9332352Z       Editing purchase
2024-02-21T09:06:33.5746682Z         A user can view another organizations purchase
2024-02-21T09:06:34.0752913Z         A user can see purchased_from value
2024-02-21T09:06:34.0753774Z       via manual entry
2024-02-21T09:06:35.0880860Z         Does not include inactive items in the line item fields
2024-02-21T09:06:36.2418902Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-21T09:06:37.3391679Z         User can create a purchase IN THE PAST
2024-02-21T09:06:38.3788796Z         User can create vendor from purchase
2024-02-21T09:06:39.2641169Z         User can create a purchase using dollars decimal amount
2024-02-21T09:06:39.2642011Z         when creating a purchase incorrectly
2024-02-21T09:06:40.2290856Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-21T09:06:41.0239886Z           should display failure with error messages
2024-02-21T09:06:41.0243421Z 
2024-02-21T09:06:41.0243996Z Admin Organization Management
2024-02-21T09:06:41.0245420Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-21T09:06:42.9912183Z     creates a new organization
2024-02-21T09:06:42.9913023Z   While signed in as an Administrative User (super admin)
2024-02-21T09:06:44.2667769Z     can view organization details
2024-02-21T09:06:46.3084561Z     creates a new organization
2024-02-21T09:06:47.3572995Z     filters by organizations by name in organizations index page
2024-02-21T09:06:47.3573635Z 
2024-02-21T09:06:47.3574033Z Profiles
2024-02-21T09:06:47.3574877Z   POST #update
2024-02-21T09:06:47.3575799Z     when updating an existing value to a blank value
2024-02-21T09:06:47.4056144Z       should have blank values
2024-02-21T09:06:47.4513780Z       update partner
2024-02-21T09:06:47.4514407Z     successful save
2024-02-21T09:06:47.4960920Z       update partner
2024-02-21T09:06:47.5363012Z       redirects to #show
2024-02-21T09:06:47.5363688Z   GET #edit
2024-02-21T09:06:47.6229746Z     returns http success
2024-02-21T09:06:47.6230260Z 
2024-02-21T09:06:47.6230500Z Audits
2024-02-21T09:06:47.6231574Z   while signed in as an organization admin
2024-02-21T09:06:47.6233155Z     GET #edit
2024-02-21T09:06:47.7023584Z       is successful if the status of audit is `in_progress`
2024-02-21T09:06:47.7658650Z       redirects to #index if the status of audit is not `in_progress`
2024-02-21T09:06:47.7659729Z     DELETE #destroy
2024-02-21T09:06:47.7660241Z       with valid params
2024-02-21T09:06:47.8031983Z         destroys the audit if the audit's status is `in_progress`
2024-02-21T09:06:47.8390367Z         can not destroy the audit if the audit's status is `finalized`
2024-02-21T09:06:47.8758156Z         destroys the audit if the audit's status is `confirms`
2024-02-21T09:06:47.8759069Z     GET #index
2024-02-21T09:06:47.9299967Z       is successful
2024-02-21T09:06:47.9300804Z     GET #new
2024-02-21T09:06:47.9705062Z       is successful
2024-02-21T09:06:47.9705720Z     POST #finalize
2024-02-21T09:06:48.0374760Z       sets the finalize status and saves an event
2024-02-21T09:06:48.0375422Z     GET #show
2024-02-21T09:06:48.0883740Z       is successful
2024-02-21T09:06:48.0884461Z     POST #create
2024-02-21T09:06:48.0885163Z       with invalid params
2024-02-21T09:06:48.1282784Z         assigns a newly created but unsaved audit as @audit
2024-02-21T09:06:48.1668717Z         re-renders the 'new' template
2024-02-21T09:06:48.2207235Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-21T09:06:48.2208183Z       with valid params
2024-02-21T09:06:48.2613662Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-21T09:06:48.2996787Z         redirects to the #show after created audit
2024-02-21T09:06:48.3383181Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-21T09:06:48.3766700Z         assigns a newly created audit as @audit
2024-02-21T09:06:48.4153180Z         creates a new Audit
2024-02-21T09:06:48.4154900Z 
2024-02-21T09:06:48.4155370Z Admin::Organizations
2024-02-21T09:06:48.4157004Z   When logged in as a non-admin user
2024-02-21T09:06:48.4157853Z     GET #new
2024-02-21T09:06:48.4286908Z       redirects
2024-02-21T09:06:48.4287616Z     POST #create
2024-02-21T09:06:48.4430212Z       redirects
2024-02-21T09:06:48.4430851Z     PUT #update
2024-02-21T09:06:48.4553577Z       redirects
2024-02-21T09:06:48.4554138Z     GET #edit
2024-02-21T09:06:48.4678217Z       redirects
2024-02-21T09:06:48.4678872Z     GET #index
2024-02-21T09:06:48.4796383Z       redirects
2024-02-21T09:06:48.4797093Z   When logged in as a super admin
2024-02-21T09:06:48.4798869Z     GET #show
2024-02-21T09:06:48.6817189Z       returns http success
2024-02-21T09:06:48.6818233Z     PUT #update
2024-02-21T09:06:48.7008051Z       redirect
2024-02-21T09:06:48.7008642Z     DELETE #destroy
2024-02-21T09:06:48.7009441Z       with a valid organization id
2024-02-21T09:06:49.2160300Z         redirects to #index
2024-02-21T09:06:49.2161046Z     GET #index
2024-02-21T09:06:49.2472147Z       returns http success
2024-02-21T09:06:49.2472887Z     DELETE #destroy
2024-02-21T09:06:49.6076196Z       redirects
2024-02-21T09:06:49.6076831Z     GET #new
2024-02-21T09:06:49.6448565Z       returns http success
2024-02-21T09:06:49.6449414Z       when given a valid account request token in the query parameters
2024-02-21T09:06:49.7027704Z         should render new with pre populate input fields from the account_request
2024-02-21T09:06:49.7029070Z       when given a token that matches a account request that has already been processed
2024-02-21T09:06:49.9226841Z         should render new with a flash error message
2024-02-21T09:06:49.9227757Z     GET #edit
2024-02-21T09:06:50.1332577Z       returns http success
2024-02-21T09:06:50.1333364Z     POST #create
2024-02-21T09:06:50.1334205Z       with valid params
2024-02-21T09:06:50.3504161Z         creates an organization and redirects to #index
2024-02-21T09:06:50.3505090Z       with invalid params
2024-02-21T09:06:50.3944100Z         does not create an organization and renders #create with an error message
2024-02-21T09:06:50.3945534Z     PATCH #update
2024-02-21T09:06:50.3946164Z       with an invalid update
2024-02-21T09:06:50.6075540Z         returns http success
2024-02-21T09:06:50.8207192Z         redirects to #edit with an error message
2024-02-21T09:06:50.8208102Z       with a valid update
2024-02-21T09:06:51.0068612Z         redirects to #index
2024-02-21T09:06:51.0069243Z 
2024-02-21T09:06:51.0069493Z Organization management
2024-02-21T09:06:51.0070887Z   while signed in as a normal user
2024-02-21T09:06:51.4781322Z     cannot see 'Make user' button for admins
2024-02-21T09:06:51.9502908Z     can see summary details about the organization as a user
2024-02-21T09:06:51.9504105Z   while signed in as an organization admin
2024-02-21T09:06:52.4325924Z     can re-invite a user to an organization after 7 days
2024-02-21T09:06:53.3805116Z     can re-activate a user in the organization
2024-02-21T09:06:53.8985598Z     can see 'Make user' button for admins
2024-02-21T09:06:54.8616766Z     can add a new user to an organization
2024-02-21T09:06:55.8067914Z     can deactivate a user in the organization
2024-02-21T09:06:55.8068785Z     Editing the organization
2024-02-21T09:06:56.9664104Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-21T09:06:57.9311462Z       can select if the org shows year-to-date values on the distribution printout
2024-02-21T09:06:58.7893859Z       can set a reminder and a deadline day
2024-02-21T09:06:59.7647088Z       can select if the org distributes essentials monthly
2024-02-21T09:07:00.7532268Z       can enable if the org uses single step invite and approve partner process
2024-02-21T09:07:02.3182594Z       can select and deselect Required Partner Fields
2024-02-21T09:07:03.3042476Z       can select if the org repackages essentials
2024-02-21T09:07:04.2835580Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-21T09:07:05.1210506Z       can set the NDBN Member ID
2024-02-21T09:07:05.9720839Z       can set a default storage location on the organization
2024-02-21T09:07:05.9721692Z     Viewing the organization
2024-02-21T09:07:06.5207656Z       can view organization details
2024-02-21T09:07:06.5208449Z 
2024-02-21T09:07:06.5208670Z Kit management
2024-02-21T09:07:07.4334232Z   can create a new kit as a user with the proper quantity
2024-02-21T09:07:08.9047094Z   can allocate and deallocate quantity per storage location from kit index
2024-02-21T09:07:09.4722797Z   should not display inactive storage locations under allocations
2024-02-21T09:07:09.4723968Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-21T09:07:10.5817164Z     will not change quantity amounts when allocating
2024-02-21T09:07:10.5817800Z   when there is no kit quantity
2024-02-21T09:07:11.7293697Z     will not change quantity amounts when deallocating
2024-02-21T09:07:11.7294482Z 
2024-02-21T09:07:11.7294731Z Managing requests
2024-02-21T09:07:11.7296403Z   creating a individuals/family request
2024-02-21T09:07:11.7297671Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:07:11.7298536Z       WHEN they create a request properly
2024-02-21T09:07:11.7299922Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:07:14.0403613Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-21T09:07:14.0404691Z       WHEN they create a request inproperly
2024-02-21T09:07:14.9638278Z         should show an error message with the instructions
2024-02-21T09:07:14.9639319Z   creating a request
2024-02-21T09:07:14.9640338Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:07:14.9641635Z       WHEN they create a request inproperly by not inputting anything
2024-02-21T09:07:15.8796981Z         should show an error message with the instructions
2024-02-21T09:07:15.8797677Z       WHEN they create a request with only a comment
2024-02-21T09:07:16.8329825Z         should be created without any issue
2024-02-21T09:07:16.8330764Z       WHEN they create a request properly
2024-02-21T09:07:16.8332079Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:07:19.0782107Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-21T09:07:19.0783207Z 
2024-02-21T09:07:19.0783447Z /partners/children
2024-02-21T09:07:19.0784888Z   GET #index
2024-02-21T09:07:19.1657609Z     should render without any issues
2024-02-21T09:07:19.2162602Z     should export CSV
2024-02-21T09:07:19.2165669Z 
2024-02-21T09:07:19.2165976Z Dashboard
2024-02-21T09:07:19.2167267Z   With an existing essentials bank
2024-02-21T09:07:19.2168996Z     Purchases
2024-02-21T09:07:20.0889539Z       has a link to create a new purchase
2024-02-21T09:07:20.0891274Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:20.0892590Z         filtering to 'Yesterday'
2024-02-21T09:07:21.4907132Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:07:21.4908859Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 0 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:21.4910190Z         filtering to 'Today'
2024-02-21T09:07:24.8114489Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:07:24.8116526Z       given 1 Purchase on 2022-02-20  (unless 'All Time'), 1 during 2022-02-21..2023-11-29, and 1 on 2023-11-30
2024-02-21T09:07:24.8117925Z         filtering to '' (February 21, 2022 - November 29, 2023)
2024-02-21T09:07:26.2464790Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:07:26.2466656Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 1 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:26.2468048Z         filtering to 'Last 7 Days'
2024-02-21T09:07:27.6246666Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:07:27.6248252Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:27.6249168Z         filtering to 'This Month'
2024-02-21T09:07:30.9665709Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:07:30.9667194Z       given 1 Purchase on 2024-01-22  (unless 'All Time'), 3 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:30.9668251Z         filtering to 'Last 30 Days'
2024-02-21T09:07:32.4480073Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:32.4481919Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:32.4483213Z         filtering to 'This Year'
2024-02-21T09:07:33.8399660Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:07:33.8402172Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:33.8403399Z         filtering to 'Last Month'
2024-02-21T09:07:35.3585693Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:35.3586639Z     Inventory Totals
2024-02-21T09:07:35.3587814Z       Summary
2024-02-21T09:07:36.0656602Z         displays the on-hand totals
2024-02-21T09:07:36.0657365Z         when constrained to date range
2024-02-21T09:07:37.1046985Z           does not change
2024-02-21T09:07:37.1047894Z     Donations
2024-02-21T09:07:37.9999656Z       has a link to create a new donation
2024-02-21T09:07:38.0001041Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:38.0002109Z         filtering to 'This Year'
2024-02-21T09:07:39.5161252Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:39.5163295Z       given 1 Donation on 2024-02-19 (only if a valid date), 2 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:39.5164545Z         filtering to 'Yesterday'
2024-02-21T09:07:40.9591276Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:07:40.9593186Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:40.9594651Z         filtering to 'This Month'
2024-02-21T09:07:42.4219148Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:42.4220914Z       given 1 Donation on 2022-02-20 (only if a valid date), 2 during 2022-02-21..2023-11-08, and 1 on 2023-11-09
2024-02-21T09:07:42.4221834Z         filtering to '' (February 21, 2022 - November 8, 2023)
2024-02-21T09:07:43.8849106Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:07:43.8851033Z       given 1 Donation on 2024-01-22 (only if a valid date), 2 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:43.8852431Z         filtering to 'Last 30 Days'
2024-02-21T09:07:45.4837024Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:07:45.4838509Z       given 1 Donation on 2024-02-14 (only if a valid date), 2 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:45.4839530Z         filtering to 'Last 7 Days'
2024-02-21T09:07:46.8982853Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:07:46.8984817Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:46.8986287Z         filtering to 'Last Month'
2024-02-21T09:07:50.2369345Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:07:50.2371109Z       given 1 Donation on 2024-02-20 (only if a valid date), 2 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:50.2372083Z         filtering to 'Today'
2024-02-21T09:07:51.7107429Z           shows the correct total and 2 Recent Donation link(s)
2024-02-21T09:07:51.7108340Z     Product Drives
2024-02-21T09:07:52.3026646Z       has a widget for product drive summary data
2024-02-21T09:07:52.3031012Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:52.3032499Z         filtering to 'Last Month'
2024-02-21T09:07:53.7531385Z           shows the correct total donations
2024-02-21T09:07:55.1849382Z           shows the correct total money raised
2024-02-21T09:07:56.6234295Z           shows 2 Recent Donation link(s)
2024-02-21T09:07:56.6236416Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:56.6237782Z         filtering to 'This Month'
2024-02-21T09:07:58.1421792Z           shows 2 Recent Donation link(s)
2024-02-21T09:07:59.5905706Z           shows the correct total donations
2024-02-21T09:08:01.0073855Z           shows the correct total money raised
2024-02-21T09:08:01.0075877Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 4 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:08:01.0076875Z         filtering to 'Yesterday'
2024-02-21T09:08:02.5262698Z           shows the correct total money raised
2024-02-21T09:08:04.0404573Z           shows the correct total donations
2024-02-21T09:08:05.5614301Z           shows 3 Recent Donation link(s)
2024-02-21T09:08:05.5615925Z       given 1 Product Drive Donation on 2022-02-20 (unless 'All Time'), 0 during 2022-02-21..2023-09-21, and 1 on 2023-09-22
2024-02-21T09:08:05.5616976Z         filtering to '' (February 21, 2022 - September 21, 2023)
2024-02-21T09:08:06.9455560Z           shows the correct total money raised
2024-02-21T09:08:10.2820531Z           shows 0 Recent Donation link(s)
2024-02-21T09:08:11.6176808Z           shows the correct total donations
2024-02-21T09:08:11.6178574Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 2 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:11.6179833Z         filtering to 'Today'
2024-02-21T09:08:13.0353068Z           shows the correct total donations
2024-02-21T09:08:14.4831660Z           shows 2 Recent Donation link(s)
2024-02-21T09:08:15.9249260Z           shows the correct total money raised
2024-02-21T09:08:15.9250840Z       given 1 Product Drive Donation on 2024-01-22 (unless 'All Time'), 0 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:15.9251658Z         filtering to 'Last 30 Days'
2024-02-21T09:08:17.2596379Z           shows the correct total money raised
2024-02-21T09:08:20.5915461Z           shows 0 Recent Donation link(s)
2024-02-21T09:08:21.9192455Z           shows the correct total donations
2024-02-21T09:08:21.9193438Z       Product drive behaviour with Mixed Donation types
2024-02-21T09:08:22.6267482Z         only counts product drive money raised
2024-02-21T09:08:23.3550799Z         only counts product drive donations for product drive
2024-02-21T09:08:24.0840052Z         only shows product drive donations as product drive donations
2024-02-21T09:08:24.0842019Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:24.0843587Z         filtering to 'Last 7 Days'
2024-02-21T09:08:27.4613362Z           shows 0 Recent Donation link(s)
2024-02-21T09:08:28.8049014Z           shows the correct total donations
2024-02-21T09:08:30.1319748Z           shows the correct total money raised
2024-02-21T09:08:30.1321679Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:08:30.1323045Z         filtering to 'This Year'
2024-02-21T09:08:31.5964074Z           shows 3 Recent Donation link(s)
2024-02-21T09:08:33.0671548Z           shows the correct total donations
2024-02-21T09:08:34.5468677Z           shows the correct total money raised
2024-02-21T09:08:34.5469596Z     Distributions
2024-02-21T09:08:35.4577899Z       has a link to create a new distribution
2024-02-21T09:08:35.4579519Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:35.4580713Z         filtering to 'Last 7 Days'
2024-02-21T09:08:38.8095592Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T09:08:38.8097508Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:08:38.8098537Z         filtering to 'Last Month'
2024-02-21T09:08:40.2926195Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:08:40.2928224Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 3 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:40.2929478Z         filtering to 'Today'
2024-02-21T09:08:41.7262677Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:08:41.7264447Z       given 1 Distribution on 2024-01-22  (unless 'All Time'), 3 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:41.7266261Z         filtering to 'Last 30 Days'
2024-02-21T09:08:43.2096339Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:08:43.2098377Z       given 1 Distribution on 2022-02-20  (unless 'All Time'), 3 during 2022-02-21..2024-02-16, and 1 on 2024-02-17
2024-02-21T09:08:43.2100202Z         filtering to '' (February 21, 2022 - February 16, 2024)
2024-02-21T09:08:44.6773627Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:08:44.6775604Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 3 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:08:44.6776895Z         filtering to 'Yesterday'
2024-02-21T09:08:46.1296570Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:08:46.1298460Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:46.1299456Z         filtering to 'All Time'
2024-02-21T09:08:47.5315464Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:08:47.5317403Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:08:47.5318636Z         filtering to 'This Month'
2024-02-21T09:08:48.9146380Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:08:48.9148239Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:08:48.9149480Z         filtering to 'This Year'
2024-02-21T09:08:52.2777442Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-21T09:08:52.2778383Z     Manufacturer Donations
2024-02-21T09:08:52.8706760Z       has a link to create a new donation
2024-02-21T09:08:52.8708482Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:52.8710089Z         filtering to 'All Time'
2024-02-21T09:08:54.3290374Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:08:54.3292340Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:08:54.3293283Z         filtering to 'This Year'
2024-02-21T09:08:56.3969476Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T09:08:56.3971270Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:56.3975660Z         filtering to 'Last 7 Days'
2024-02-21T09:08:57.7636424Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:08:57.7638077Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 5 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:08:57.7639065Z         filtering to 'Yesterday'
2024-02-21T09:08:59.6364843Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-21T09:08:59.6366559Z       given 1 Manufacturer donating on 2022-02-20  (unless 'All Time'), 6 during 2022-02-21..2023-11-24, and 1 on 2023-11-25
2024-02-21T09:08:59.6367533Z         filtering to '' (February 21, 2022 - November 24, 2023)
2024-02-21T09:09:01.5619089Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T09:09:01.5620824Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 3 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:09:01.5622077Z         filtering to 'Today'
2024-02-21T09:09:03.2346341Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:09:03.2348474Z       given 1 Manufacturer donating on 2024-01-22  (unless 'All Time'), 8 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:09:03.2349704Z         filtering to 'Last 30 Days'
2024-02-21T09:09:05.4303817Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:09:05.4305408Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 7 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:09:05.4306297Z         filtering to 'This Month'
2024-02-21T09:09:07.5417101Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-21T09:09:07.5419256Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 8 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:09:07.5420407Z         filtering to 'Last Month'
2024-02-21T09:09:09.9325742Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:09:09.9326427Z     Signage
2024-02-21T09:09:12.8328162Z       shows their organization name unless they have a logo set
2024-02-21T09:09:12.8328873Z   With a new essentials bank
2024-02-21T09:09:40.8372477Z     displays the getting started guide until the steps are completed
2024-02-21T09:09:40.9264347Z W, [2024-02-21T01:09:40.926109 #2363]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-21T09:09:40.9266519Z W, [2024-02-21T01:09:40.926181 #2363]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:09:40.9269157Z W, [2024-02-21T01:09:40.926209 #2363]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:09:40.9272210Z W, [2024-02-21T01:09:40.926250 #2363]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-21T09:09:40.9273492Z 
2024-02-21T09:09:40.9273910Z Finished in 3 minutes 32.9 seconds (files took 8.07 seconds to load)
2024-02-21T09:09:40.9274747Z 235 examples, 0 failures
2024-02-21T09:09:40.9276897Z 
2024-02-21T09:09:40.9278102Z Randomized with seed 47720
2024-02-21T09:09:40.9278475Z 
2024-02-21T09:09:41.2369339Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6404 LOC (59.65%) covered.
2024-02-21T09:09:41.7475981Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
