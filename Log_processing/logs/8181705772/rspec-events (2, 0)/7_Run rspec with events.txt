2024-03-07T01:53:51.7418736Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:53:51.7419648Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:53:51.7470523Z shell: /usr/bin/bash -e {0}
2024-03-07T01:53:51.7470891Z env:
2024-03-07T01:53:51.7471326Z   POSTGRES_HOST: localhost
2024-03-07T01:53:51.7471740Z   DATABASE_HOST: localhost
2024-03-07T01:53:51.7472119Z   PG_USERNAME: postgres
2024-03-07T01:53:51.7472558Z   PG_PASSWORD: password
2024-03-07T01:53:51.7472957Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:53:51.7473390Z   POSTGRES_PORT: 5432
2024-03-07T01:53:51.7473789Z   PGHOST: localhost
2024-03-07T01:53:51.7474137Z   PGUSER: postgres
2024-03-07T01:53:51.7474479Z   RAILS_ENV: test
2024-03-07T01:53:51.7475156Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:53:51.7475630Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T01:53:51.7476126Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-07T01:53:51.7476583Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:53:51.7477129Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:53:51.7477890Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:53:51.7478837Z   EVENTS_READ: true
2024-03-07T01:53:51.7479284Z ##[endgroup]
2024-03-07T01:54:00.7546611Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/models/partner_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/item_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/request_item_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/transfer_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/account_request_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/models/line_item_spec.rb" "spec/events/event_differ_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/models/partner_group_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/users_role_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/county_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb"
2024-03-07T01:54:09.7012033Z 
2024-03-07T01:54:09.7012918Z Randomized with seed 33542
2024-03-07T01:54:10.5516617Z 
2024-03-07T01:54:10.5517452Z PartnerCreateService
2024-03-07T01:54:10.5518311Z   #call
2024-03-07T01:54:10.7593675Z     should return an instance of itself
2024-03-07T01:54:10.7594337Z     when the arguments are valid
2024-03-07T01:54:10.9819236Z       should create a new partner record with the organization provided
2024-03-07T01:54:11.1810983Z       should create the associated partner profile data
2024-03-07T01:54:11.1812170Z       but there was an unexpected issue with saving the
2024-03-07T01:54:11.1813341Z         Partners::Profile record
2024-03-07T01:54:11.3664818Z           should not create the partner record for the organization
2024-03-07T01:54:11.5479174Z           should not create the associated partner records
2024-03-07T01:54:11.5479951Z         Partner record
2024-03-07T01:54:11.7366057Z           should not create the associated partner records
2024-03-07T01:54:11.9267580Z           should not create the partner record for the organization
2024-03-07T01:54:11.9268651Z     when the arguments are incorrect
2024-03-07T01:54:11.9269745Z       beacuse the partner_attrs are invalid
2024-03-07T01:54:12.1244960Z         should contain errors related to invalid partner attributes
2024-03-07T01:54:12.1245833Z 
2024-03-07T01:54:12.1246079Z RequestsConfirmationMailer
2024-03-07T01:54:12.1611190Z   handles duplicates
2024-03-07T01:54:12.1969986Z   pairs the right quantities with the right item names
2024-03-07T01:54:12.1971229Z   #confirmation_email
2024-03-07T01:54:12.2123879Z     renders the headers
2024-03-07T01:54:12.2314272Z     renders the body
2024-03-07T01:54:12.2314727Z 
2024-03-07T01:54:12.2315337Z Exports::ExportRequestService
2024-03-07T01:54:12.2316700Z   .generate_csv_data
2024-03-07T01:54:12.4386242Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-07T01:54:12.6474551Z     includes rows for each request with correct columns of item quantity
2024-03-07T01:54:12.6475420Z 
2024-03-07T01:54:12.6475638Z CustomDeviseMailer
2024-03-07T01:54:12.6476444Z   #invitation_instructions
2024-03-07T01:54:12.6477599Z     when partner is invited
2024-03-07T01:54:12.7025262Z       invites to primary user
2024-03-07T01:54:12.7026147Z     when other partner users invited
2024-03-07T01:54:12.7474100Z       invites to partner user
2024-03-07T01:54:12.7475140Z     when user is invited
2024-03-07T01:54:12.7692918Z       has invite expiration message
2024-03-07T01:54:12.7895765Z       invites to user
2024-03-07T01:54:12.7896345Z 
2024-03-07T01:54:12.7896886Z Reports::AcquisitionReportService
2024-03-07T01:54:12.7897831Z   acquisition report
2024-03-07T01:54:13.8012102Z     should return the proper results on #report
2024-03-07T01:54:13.8012779Z 
2024-03-07T01:54:13.8013078Z Reports::PartnerInfoReportService
2024-03-07T01:54:13.8014087Z   #report
2024-03-07T01:54:13.9826675Z     should report zero values
2024-03-07T01:54:14.2303943Z     should report normal values
2024-03-07T01:54:14.2304830Z 
2024-03-07T01:54:14.2305110Z DonationSitesController
2024-03-07T01:54:14.2306483Z   While not signed in
2024-03-07T01:54:14.2461728Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:54:14.2462928Z   While signed in
2024-03-07T01:54:14.2463892Z     GET #new
2024-03-07T01:54:14.2722355Z       returns http success
2024-03-07T01:54:14.2723145Z     GET #index
2024-03-07T01:54:14.2851630Z       returns http success
2024-03-07T01:54:14.2852468Z     POST #import_csv
2024-03-07T01:54:14.2852956Z       behaves like csv import
2024-03-07T01:54:14.2854273Z         with a csv file
2024-03-07T01:54:14.3073499Z           redirects to :index
2024-03-07T01:54:14.3207085Z           presents a flash notice message
2024-03-07T01:54:14.3257878Z           invokes .import_csv
2024-03-07T01:54:14.3258638Z         without a csv file
2024-03-07T01:54:14.3359130Z           redirects to :index
2024-03-07T01:54:14.3458041Z           presents a flash error message
2024-03-07T01:54:14.3458962Z         csv file with wrong headers
2024-03-07T01:54:14.3585693Z           presents a flash error message
2024-03-07T01:54:14.3713410Z           redirects to :index
2024-03-07T01:54:14.3714192Z     GET #show
2024-03-07T01:54:14.3870438Z       returns http success
2024-03-07T01:54:14.3871233Z     DELETE #destroy
2024-03-07T01:54:14.4060702Z       returns http success
2024-03-07T01:54:14.4061750Z     GET #edit
2024-03-07T01:54:14.4212419Z       returns http success
2024-03-07T01:54:14.4213148Z     Looking at a different organization
2024-03-07T01:54:14.6059343Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:54:14.6060066Z 
2024-03-07T01:54:14.6060421Z AccountRequest
2024-03-07T01:54:14.6305374Z   #reject!
2024-03-07T01:54:14.6441643Z   #confirm!
2024-03-07T01:54:14.6442294Z   #identity_token
2024-03-07T01:54:14.6545538Z     should return a JWT token that contains the id of the account_request_id
2024-03-07T01:54:14.6546707Z     when the account_request is not persisted
2024-03-07T01:54:14.6660296Z       should raise an error
2024-03-07T01:54:14.6661380Z   #processed?
2024-03-07T01:54:14.6662163Z     when the account request has no associated organization
2024-03-07T01:54:14.6768801Z       should return false
2024-03-07T01:54:14.6769750Z     when the account request has a associated organization
2024-03-07T01:54:14.8732361Z       should return true
2024-03-07T01:54:14.8733180Z   .get_by_identity_token
2024-03-07T01:54:14.8734059Z     when the identity_token provided does not match any AccountRequest
2024-03-07T01:54:14.8772498Z       should return nil
2024-03-07T01:54:14.8773368Z     when the identity_token corresponds to an existing AccountRequest
2024-03-07T01:54:14.8870274Z       should return the corresponding AccountRequest
2024-03-07T01:54:14.8871039Z   associations
2024-03-07T01:54:14.8935166Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-07T01:54:14.8967754Z     is expected to have one organization class_name => Organization
2024-03-07T01:54:14.8968551Z   validations
2024-03-07T01:54:14.9076007Z     is expected to allow :email to be ‹"tory.gutkowski@bernhard-franecki.example"›
2024-03-07T01:54:14.9201075Z     is expected to validate that the length of :request_details is at least 50
2024-03-07T01:54:14.9323748Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-07T01:54:14.9478075Z     is expected to validate that :email cannot be empty/falsy
2024-03-07T01:54:14.9630636Z     is expected to validate that :email is case-sensitively unique
2024-03-07T01:54:14.9744603Z     is expected not to allow :email to be ‹"not_email"›
2024-03-07T01:54:14.9900213Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T01:54:14.9901401Z     when the email provided is already used by an existing organization
2024-03-07T01:54:15.1749346Z       should not allow the email
2024-03-07T01:54:15.1750667Z     when the email provided is already used by an existing user
2024-03-07T01:54:15.1958913Z       should not allow the email
2024-03-07T01:54:15.1959842Z   versioning
2024-03-07T01:54:15.1998038Z     is expected to be versioned
2024-03-07T01:54:15.1998607Z 
2024-03-07T01:54:15.1998858Z HistoricalDataCacheJob
2024-03-07T01:54:15.3723251Z   queues the job
2024-03-07T01:54:15.5749488Z   caches the historical data
2024-03-07T01:54:15.5750933Z 
2024-03-07T01:54:15.5751237Z TextInterpolatorService
2024-03-07T01:54:15.5752031Z   #call
2024-03-07T01:54:15.5797121Z     returns interpolated text
2024-03-07T01:54:15.5797890Z     when interpolations are nil
2024-03-07T01:54:15.5841972Z       returns text
2024-03-07T01:54:15.5842711Z     when text is empty
2024-03-07T01:54:15.5884280Z       returns empty string
2024-03-07T01:54:15.5884989Z     when interpolations are empty
2024-03-07T01:54:15.5925614Z       returns text
2024-03-07T01:54:15.5926317Z     when interpolations are not present
2024-03-07T01:54:15.5966508Z       returns text
2024-03-07T01:54:15.5967094Z     when text is nil
2024-03-07T01:54:15.6002702Z       returns nil
2024-03-07T01:54:15.6003474Z 
2024-03-07T01:54:15.6003946Z ItemsInTotalQuery
2024-03-07T01:54:15.6004786Z   items_in_total_query
2024-03-07T01:54:15.8927249Z     does not count transfers going in the negative direction
2024-03-07T01:54:16.1038634Z     does not count negative adjustments towards in-flow
2024-03-07T01:54:16.4613399Z     counts shared items together
2024-03-07T01:54:16.7342845Z     does not count donations, purchases, adjustments to other storage locations
2024-03-07T01:54:16.8930730Z     returns a sum total of all in-flows
2024-03-07T01:54:16.8931414Z 
2024-03-07T01:54:16.8931647Z ServiceObjectErrorsMixin
2024-03-07T01:54:16.8932273Z   self.included
2024-03-07T01:54:16.8985749Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-07T01:54:16.8986684Z 
2024-03-07T01:54:16.8986919Z PartnerApprovalService
2024-03-07T01:54:16.8987522Z   #call
2024-03-07T01:54:16.8988192Z     when the arguments are correct
2024-03-07T01:54:16.9321094Z       should change the partner status to approved
2024-03-07T01:54:16.9641013Z       should send an email notification to the partner
2024-03-07T01:54:16.9941137Z       should have no errors
2024-03-07T01:54:16.9941962Z       but a unexpected error occured during the save
2024-03-07T01:54:16.9942945Z         for partner approval
2024-03-07T01:54:17.0224194Z           should not change the partner status to approved
2024-03-07T01:54:17.0486294Z           should not send an email notification to the partner
2024-03-07T01:54:17.0762939Z           should have an error with the raised error
2024-03-07T01:54:17.0763895Z     when the arguments are incorrect
2024-03-07T01:54:17.0764712Z       because the partner is not approvable
2024-03-07T01:54:17.1030197Z         should return the PartnerApprovalService object with an error
2024-03-07T01:54:17.1031024Z 
2024-03-07T01:54:17.1031344Z SyncNDBNMembers
2024-03-07T01:54:17.1032427Z   .sync
2024-03-07T01:54:17.1033182Z     when the HTTP request does not get a response of 200
2024-03-07T01:54:17.1265399Z       should raise an error regarding the response code
2024-03-07T01:54:17.1266728Z     when the HTTP request is successful
2024-03-07T01:54:17.1267794Z       when the account name of a NDBN Member has changed
2024-03-07T01:54:17.1430667Z         should update the account name of the corresponding NDBN Member
2024-03-07T01:54:17.1431886Z       when no new NDBN Member has been added
2024-03-07T01:54:17.1552616Z         should not add any new NDBN Members
2024-03-07T01:54:17.1553557Z       when there are no exisiting NDBN Member records
2024-03-07T01:54:17.1649512Z         should create the NDBN Member records
2024-03-07T01:54:17.1650526Z 
2024-03-07T01:54:17.1650954Z DistributionItemizedBreakdownService
2024-03-07T01:54:17.1652321Z   #fetch_csv
2024-03-07T01:54:17.5651230Z     should output the expected output but in CSV format
2024-03-07T01:54:17.5652766Z   #fetch
2024-03-07T01:54:17.9572913Z     should include the break down of items distributed with onhand data
2024-03-07T01:54:17.9574046Z 
2024-03-07T01:54:17.9574291Z View::Inventory
2024-03-07T01:54:17.9575463Z   #total_value_in_dollars
2024-03-07T01:54:18.0454267Z     should return total value across the given location
2024-03-07T01:54:18.0455448Z   #storage_location_name
2024-03-07T01:54:18.1398866Z     should return the right name
2024-03-07T01:54:18.1399791Z   #all_items
2024-03-07T01:54:18.2288719Z     should return all items across storage locations
2024-03-07T01:54:18.2289647Z   .total_inventory
2024-03-07T01:54:18.3179489Z     should return the total quantity
2024-03-07T01:54:18.3180329Z   #items_for_location
2024-03-07T01:54:18.4071598Z     should return the right values
2024-03-07T01:54:18.4072490Z     with include_omitted_items
2024-03-07T01:54:18.4993945Z       should add items not in the storage location
2024-03-07T01:54:18.4995202Z   #quantity_for
2024-03-07T01:54:18.4995771Z     with item id
2024-03-07T01:54:18.4996353Z       with no storage location
2024-03-07T01:54:18.5904250Z         should return quantities across all storage locations
2024-03-07T01:54:18.5905247Z       with storage location
2024-03-07T01:54:18.6806528Z         should return the quantity at that location
2024-03-07T01:54:18.6807622Z     with storage location but no item id
2024-03-07T01:54:18.7685901Z       should return all items at that location
2024-03-07T01:54:18.7687104Z   .items_for_location
2024-03-07T01:54:18.9788138Z     should return the right values
2024-03-07T01:54:18.9809660Z     with include_omitted_items
2024-03-07T01:54:19.1160278Z       should add items not in the storage location
2024-03-07T01:54:19.1161544Z   #storage_locations_for_item
2024-03-07T01:54:19.2064312Z     should return all relevant IDs
2024-03-07T01:54:19.2065881Z 
2024-03-07T01:54:19.2066187Z Partners::ItemRequest
2024-03-07T01:54:19.2066756Z   versioning
2024-03-07T01:54:19.2161252Z     is expected to be versioned
2024-03-07T01:54:19.2162006Z   associations
2024-03-07T01:54:19.2201671Z     is expected to have many children through child_item_requests
2024-03-07T01:54:19.2248997Z     is expected to belong to request class_name => ::Request required: true
2024-03-07T01:54:19.2298375Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:54:19.2299474Z   validations
2024-03-07T01:54:19.2363456Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-07T01:54:19.2420087Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T01:54:19.2480229Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-07T01:54:19.2539873Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-07T01:54:19.2540544Z 
2024-03-07T01:54:19.2541167Z PartnerRequestRecertificationService
2024-03-07T01:54:19.2542086Z   #call
2024-03-07T01:54:19.2543097Z     when the arguments are incorrect
2024-03-07T01:54:19.2544084Z       because the partner has already been requested to recertify
2024-03-07T01:54:19.2849632Z         should return the PartnerRequestRecertificationService object with an error
2024-03-07T01:54:19.2850464Z     when the arguments are correct
2024-03-07T01:54:19.3165658Z       should change the partner status to approved
2024-03-07T01:54:19.3454534Z       should have no errors
2024-03-07T01:54:19.3765386Z       should queue sending the notice to the partner
2024-03-07T01:54:19.3766292Z       but a unexpected error occurred during the save
2024-03-07T01:54:19.3766880Z         for partner approval
2024-03-07T01:54:19.4035954Z           should NOT queue sending the notice to the partner
2024-03-07T01:54:19.4315045Z           should not change the partner status to recertification_required
2024-03-07T01:54:19.4594745Z           should have an error with the raised error
2024-03-07T01:54:19.4596038Z     when the partner is deactivated
2024-03-07T01:54:19.4893823Z       does not send an email
2024-03-07T01:54:19.4894448Z 
2024-03-07T01:54:19.4895022Z Exports::ExportDonationsCSVService
2024-03-07T01:54:19.4895746Z   #generate_csv_data
2024-03-07T01:54:19.6046848Z     should match the expected content for the csv
2024-03-07T01:54:19.6047516Z 
2024-03-07T01:54:19.6048118Z Partners::FamilyRequestCreateService
2024-03-07T01:54:19.6048831Z   #call
2024-03-07T01:54:19.6049736Z     when the arguments are correct
2024-03-07T01:54:19.6050768Z       without children
2024-03-07T01:54:19.6366583Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-07T01:54:19.6368567Z       with children
2024-03-07T01:54:19.7722095Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-07T01:54:19.7723519Z     when the arguments are incorrect
2024-03-07T01:54:19.7724627Z       because a unrecognized item_id was provided
2024-03-07T01:54:19.7966987Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T01:54:19.7968222Z       because no family_requests_attributes were defined
2024-03-07T01:54:19.8193547Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-07T01:54:19.8194549Z 
2024-03-07T01:54:19.8194890Z InventoryCheckService
2024-03-07T01:54:19.8195623Z   call
2024-03-07T01:54:19.8196466Z     error
2024-03-07T01:54:19.9105379Z       should set the error
2024-03-07T01:54:19.9106246Z     alert
2024-03-07T01:54:19.9922924Z       should set the alert
2024-03-07T01:54:19.9923732Z 
2024-03-07T01:54:19.9924155Z Purchase
2024-03-07T01:54:19.9925399Z   versioning
2024-03-07T01:54:19.9964868Z     is expected to be versioned
2024-03-07T01:54:19.9965806Z   Callbacks >
2024-03-07T01:54:20.0155079Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:54:20.0377296Z     automatically combines duplicate line_item records when they're created
2024-03-07T01:54:20.0378461Z   Associations >
2024-03-07T01:54:20.0378829Z     items >
2024-03-07T01:54:20.0614297Z       has_many
2024-03-07T01:54:20.0614954Z   Methods >
2024-03-07T01:54:20.0615506Z     remove
2024-03-07T01:54:20.1320225Z       fails gracefully if the item doesn't exist
2024-03-07T01:54:20.2002611Z       removes the item from the purchase
2024-03-07T01:54:20.2003688Z     storage_view
2024-03-07T01:54:20.2643228Z       returns name of storage location
2024-03-07T01:54:20.2644081Z   Validations >
2024-03-07T01:54:20.2744788Z     is not valid if categories do not add up
2024-03-07T01:54:20.2830911Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:54:20.2916607Z     is valid if categories have no values
2024-03-07T01:54:20.2994016Z     must belong to an organization
2024-03-07T01:54:20.3180680Z     is invalid when the line items are invalid
2024-03-07T01:54:20.3362432Z     is not valid if any category is non-zero but does not add up to the total
2024-03-07T01:54:20.3448450Z     is valid if all categories add up to total
2024-03-07T01:54:20.3533590Z     is not valid if period supplies is non-zero but no other category is
2024-03-07T01:54:20.3612668Z     requires an inventory (storage location)
2024-03-07T01:54:20.3613594Z   Scopes >
2024-03-07T01:54:20.3614397Z     during >
2024-03-07T01:54:20.3859153Z       returns all purchases created between two dates
2024-03-07T01:54:20.3860102Z   behaves like itemizable
2024-03-07T01:54:20.3862435Z     .to_a
2024-03-07T01:54:20.3863201Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:54:20.4235150Z         raises an error
2024-03-07T01:54:20.4235998Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:54:20.4612838Z         calls line_item_values
2024-03-07T01:54:20.4613613Z     .line_items
2024-03-07T01:54:20.4614378Z       quantities_by_name
2024-03-07T01:54:20.5016316Z         returns a hash of items with id, name, and quantity
2024-03-07T01:54:20.5445447Z         leaves out zero-quantitied items if requested
2024-03-07T01:54:20.5446074Z       total
2024-03-07T01:54:20.5849961Z         has an item total
2024-03-07T01:54:20.5850855Z       sorted
2024-03-07T01:54:20.6401949Z         displays the items, sorted by name
2024-03-07T01:54:20.6402523Z       combine!
2024-03-07T01:54:20.6972454Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:54:20.7415889Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:54:20.7419244Z 
2024-03-07T01:54:20.7420241Z DistributionContentChangeService
2024-03-07T01:54:20.7421035Z   #changes
2024-03-07T01:54:20.7421969Z     when there are line items removed and updated
2024-03-07T01:54:20.7459590Z       returns true
2024-03-07T01:54:20.7460256Z   #any_change?
2024-03-07T01:54:20.7461694Z     when there are line items removed and updated
2024-03-07T01:54:20.7498316Z       returns true
2024-03-07T01:54:20.7499032Z     when there are no changes in the line items
2024-03-07T01:54:20.7535451Z       returns true
2024-03-07T01:54:20.7536170Z     when there are line items removed
2024-03-07T01:54:20.7572780Z       returns true
2024-03-07T01:54:20.7573633Z     when there are line items updated
2024-03-07T01:54:20.7607412Z       returns true
2024-03-07T01:54:20.7608279Z 
2024-03-07T01:54:20.7608725Z Partners::AuthorizedFamilyMember
2024-03-07T01:54:20.7610060Z   versioning
2024-03-07T01:54:20.7648704Z     is expected to be versioned
2024-03-07T01:54:20.7649447Z   #display_name
2024-03-07T01:54:20.7929199Z     should return the family member's first and last name
2024-03-07T01:54:20.7930156Z   associations
2024-03-07T01:54:20.7972389Z     is expected to have many child_item_requests dependent => nullify
2024-03-07T01:54:20.8013704Z     is expected to belong to family required: true
2024-03-07T01:54:20.8014614Z 
2024-03-07T01:54:20.8014905Z Partners::Child
2024-03-07T01:54:20.8015712Z   associations
2024-03-07T01:54:20.8049879Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:54:20.8088795Z     is expected to belong to family required: true
2024-03-07T01:54:20.8089523Z   #display_name
2024-03-07T01:54:20.8377322Z     should return a child's first and last name
2024-03-07T01:54:20.8378187Z   versioning
2024-03-07T01:54:20.8412821Z     is expected to be versioned
2024-03-07T01:54:20.8413812Z 
2024-03-07T01:54:20.8414321Z Partners::FetchPartnersToRemindNowService
2024-03-07T01:54:20.8418018Z   .fetch
2024-03-07T01:54:20.8419327Z     when there is a partner
2024-03-07T01:54:20.8420625Z       that has an organization with a global reminder & deadline
2024-03-07T01:54:20.8421734Z         that is for today
2024-03-07T01:54:20.8766325Z           should include that partner
2024-03-07T01:54:20.8767246Z           and has send_reminder=false
2024-03-07T01:54:20.9111291Z             should NOT include that partner
2024-03-07T01:54:20.9112436Z           but the partner is deactivated
2024-03-07T01:54:20.9454479Z             should NOT include that partner
2024-03-07T01:54:20.9455417Z         AND a partner group that does have them defined
2024-03-07T01:54:20.9867475Z           should remind based on the partner group instead of the organization level reminder
2024-03-07T01:54:20.9868841Z           but the partner is deactivated
2024-03-07T01:54:21.0277753Z             should NOT include that partner
2024-03-07T01:54:21.0278700Z         that is not for today
2024-03-07T01:54:21.0583824Z           should NOT include that partner
2024-03-07T01:54:21.0585295Z       that does NOT have a organization with a global reminder & deadline
2024-03-07T01:54:21.0586605Z         and is a part of a partner group that does have them defined
2024-03-07T01:54:21.0587518Z           that is not for today
2024-03-07T01:54:21.0945326Z             should NOT include that partner
2024-03-07T01:54:21.0946128Z           that is for today
2024-03-07T01:54:21.1324029Z             should include that partner
2024-03-07T01:54:21.1325196Z             but the partner is deactivated
2024-03-07T01:54:21.1732540Z               should NOT include that partner
2024-03-07T01:54:21.1734158Z 
2024-03-07T01:54:21.1734696Z Adjustment
2024-03-07T01:54:21.1735869Z   behaves like itemizable
2024-03-07T01:54:21.1738920Z     .to_a
2024-03-07T01:54:21.1740268Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:54:21.2113314Z         raises an error
2024-03-07T01:54:21.2114122Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:54:21.2493201Z         calls line_item_values
2024-03-07T01:54:21.2493989Z     .line_items
2024-03-07T01:54:21.2494941Z       quantities_by_name
2024-03-07T01:54:21.2917739Z         returns a hash of items with id, name, and quantity
2024-03-07T01:54:21.3322124Z         leaves out zero-quantitied items if requested
2024-03-07T01:54:21.3323022Z       total
2024-03-07T01:54:21.3717895Z         has an item total
2024-03-07T01:54:21.3718779Z       sorted
2024-03-07T01:54:21.4310249Z         displays the items, sorted by name
2024-03-07T01:54:21.4311079Z       combine!
2024-03-07T01:54:21.4748002Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:54:21.5290700Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:54:21.5291838Z   nested line item attributes
2024-03-07T01:54:21.5725824Z     accepts them
2024-03-07T01:54:21.5726496Z   Scopes >
2024-03-07T01:54:21.5898251Z     `by_user` can filter out adjustments to a specific user
2024-03-07T01:54:21.6065719Z     `at_location` can filter out adjustments to a specific location
2024-03-07T01:54:21.6066970Z   Validations >
2024-03-07T01:54:21.6240491Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-07T01:54:21.6660947Z     allows you to remove all the inventory that exists in the storage location
2024-03-07T01:54:21.6750077Z     must belong to an organization
2024-03-07T01:54:21.6750883Z   versioning
2024-03-07T01:54:21.6788869Z     is expected to be versioned
2024-03-07T01:54:21.6790054Z   Methods >
2024-03-07T01:54:21.8854083Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-07T01:54:21.8855280Z     split_difference
2024-03-07T01:54:21.9655563Z       gracefully handles adjustments with only negative
2024-03-07T01:54:22.0487129Z       returns two adjustment objects
2024-03-07T01:54:22.1268581Z       gracefully handles adjustments with only positive
2024-03-07T01:54:22.1269348Z 
2024-03-07T01:54:22.1269653Z DistributionsController
2024-03-07T01:54:22.1271444Z   While signed in
2024-03-07T01:54:22.1272103Z     PUT #update
2024-03-07T01:54:22.1273422Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T01:54:22.2412026Z         redirects with a flash notice and a flash error
2024-03-07T01:54:22.2413150Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-07T01:54:22.3588367Z         redirects with a flash notice and a flash error
2024-03-07T01:54:22.3589152Z       when distribution has items updated for minimum quantity
2024-03-07T01:54:22.4977414Z         redirects with a flash notice and send send_notification
2024-03-07T01:54:22.4978495Z     POST #create
2024-03-07T01:54:22.4979382Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T01:54:22.5706221Z         redirects with a flash notice and a flash error
2024-03-07T01:54:22.5707187Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-07T01:54:22.6573062Z         redirects with a flash notice and a flash error
2024-03-07T01:54:22.6574218Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-07T01:54:22.7451727Z         redirects with a flash notice and a flash alert
2024-03-07T01:54:22.7452990Z       when line item quantity is not positive
2024-03-07T01:54:22.8024758Z         flashes an error
2024-03-07T01:54:22.8026298Z 
2024-03-07T01:54:22.8026894Z CalendarService
2024-03-07T01:54:23.0426072Z   #time_zones
2024-03-07T01:54:23.0426630Z   .calendar
2024-03-07T01:54:23.1056927Z     should print the calendar correctly
2024-03-07T01:54:23.1057591Z 
2024-03-07T01:54:23.1057827Z Partners::ServedArea
2024-03-07T01:54:23.1134219Z   is expected to belong to partner_profile required: true
2024-03-07T01:54:23.1450473Z   must only allow valid client share values
2024-03-07T01:54:23.1495704Z   is expected to belong to county required: true
2024-03-07T01:54:23.1652781Z   must only allow integer client shares
2024-03-07T01:54:23.1653480Z   versioning
2024-03-07T01:54:23.1695862Z     is expected to be versioned
2024-03-07T01:54:23.1696706Z 
2024-03-07T01:54:23.1697116Z AccountRequestMailer
2024-03-07T01:54:23.1698548Z   #approval_request
2024-03-07T01:54:23.1854813Z     should be sent to the info@humanessentials.app email address
2024-03-07T01:54:23.1990996Z     should include the admin link to reject the organization
2024-03-07T01:54:23.2116438Z     should have the correct subject
2024-03-07T01:54:23.2404473Z     should include details of the account request
2024-03-07T01:54:23.2547405Z     should include the admin link to create the new organization from the account request
2024-03-07T01:54:23.2549186Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:54:23.2601526Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:54:23.2602477Z   #confirmation
2024-03-07T01:54:23.2741044Z     should be from no-reply@humanessentials.app
2024-03-07T01:54:23.2863319Z     should be sent to the specified account_request email
2024-03-07T01:54:23.2982486Z     should have the correct subject
2024-03-07T01:54:23.2983402Z     Text format
2024-03-07T01:54:23.3103115Z       should include the staging/demo account information
2024-03-07T01:54:23.3221507Z       should include the button to confirm the request
2024-03-07T01:54:23.3340803Z       should include the instruction video link
2024-03-07T01:54:23.3341697Z     HTML format
2024-03-07T01:54:23.3466209Z       should include the staging/demo account information
2024-03-07T01:54:23.3583356Z       should include the instruction video link
2024-03-07T01:54:23.3705000Z       should include the button to confirm the request
2024-03-07T01:54:23.3706263Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:54:23.3753945Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:54:23.3754846Z   #rejection
2024-03-07T01:54:23.3876838Z     should include the rejection reason
2024-03-07T01:54:23.3981435Z     should have the correct subject
2024-03-07T01:54:23.4147790Z     should be sent to the correct email address
2024-03-07T01:54:23.4148627Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:54:23.4199378Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:54:23.4200356Z 
2024-03-07T01:54:23.4201069Z ItemsController
2024-03-07T01:54:23.4201795Z   While not signed in
2024-03-07T01:54:23.4301454Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:54:23.4302532Z   While signed in
2024-03-07T01:54:23.4303191Z     PATCH #restore
2024-03-07T01:54:23.4304226Z       with another organizations item
2024-03-07T01:54:23.6249311Z         does nothing
2024-03-07T01:54:23.6250100Z       with an active item
2024-03-07T01:54:23.6479308Z         does nothing
2024-03-07T01:54:23.6480314Z       with a soft-deleted item
2024-03-07T01:54:23.6719838Z         re-activates the item
2024-03-07T01:54:23.6720886Z     GET #edit
2024-03-07T01:54:23.6900726Z       returns http success
2024-03-07T01:54:23.6901472Z     PUT #update
2024-03-07T01:54:23.6902287Z       visible
2024-03-07T01:54:23.7105827Z         should update visible_to_partners to true
2024-03-07T01:54:23.7106661Z       invisible
2024-03-07T01:54:23.7301342Z         should update visible_to_partners to false
2024-03-07T01:54:23.7302260Z     Looking at a different organization
2024-03-07T01:54:23.9085895Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:54:23.9086899Z     DELETE #destroy
2024-03-07T01:54:23.9392694Z       redirects to #index
2024-03-07T01:54:23.9393322Z     GET #show
2024-03-07T01:54:23.9599141Z       returns http success
2024-03-07T01:54:23.9600054Z     PATCH #remove_category
2024-03-07T01:54:24.1638773Z       should redirect to the previous category page
2024-03-07T01:54:24.3730644Z       should remove an item's category
2024-03-07T01:54:24.3731505Z     POST #create
2024-03-07T01:54:24.3732073Z       with invalid params
2024-03-07T01:54:24.3899410Z         should show an error
2024-03-07T01:54:24.3900524Z       with valid params
2024-03-07T01:54:24.4099813Z         should accept params with dollar signs, periods, and commas
2024-03-07T01:54:24.4296284Z         should redirect to the item page
2024-03-07T01:54:24.4499170Z         should create an item
2024-03-07T01:54:24.4500226Z     GET #index
2024-03-07T01:54:24.4715692Z       returns http success
2024-03-07T01:54:24.4716575Z     GET #new
2024-03-07T01:54:24.4849089Z       returns http success
2024-03-07T01:54:24.4849959Z 
2024-03-07T01:54:24.4850300Z DeadlineService
2024-03-07T01:54:24.4851569Z   #next_deadline
2024-03-07T01:54:24.4852404Z     do from the partner group
2024-03-07T01:54:24.4853598Z       when the deadline is before today
2024-03-07T01:54:24.4924762Z         returns a date in the next month
2024-03-07T01:54:24.4925534Z       when the deadline is today
2024-03-07T01:54:24.4986888Z         returns a date in the next month
2024-03-07T01:54:24.4989128Z       when the deadline is after today
2024-03-07T01:54:24.5049600Z         returns a date within the current month
2024-03-07T01:54:24.5050606Z     from the organization
2024-03-07T01:54:24.5051614Z       when the deadline is before today
2024-03-07T01:54:24.5111812Z         returns a date in the next month
2024-03-07T01:54:24.5112913Z       when the deadline is today
2024-03-07T01:54:24.5174352Z         returns a date in the next month
2024-03-07T01:54:24.5175321Z       when the deadline is after today
2024-03-07T01:54:24.5233136Z         returns a date within the current month
2024-03-07T01:54:24.5233906Z 
2024-03-07T01:54:24.5234401Z DeallocateKitInventoryService
2024-03-07T01:54:24.5235490Z   #deallocate
2024-03-07T01:54:24.5236287Z     when inventory items are available
2024-03-07T01:54:24.5237874Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-07T01:54:24.8887347Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-07T01:54:24.8889385Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-07T01:54:25.2053077Z         raises error about inconsistent inventory in or out
2024-03-07T01:54:25.2054596Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-07T01:54:25.5459959Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-07T01:54:25.5460845Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-07T01:54:26.0457966Z         raises error about KitAllocation not found
2024-03-07T01:54:26.0458670Z   #error
2024-03-07T01:54:26.0459457Z     when the storage location organization doesn't match
2024-03-07T01:54:26.2961034Z       returns error
2024-03-07T01:54:26.2961587Z 
2024-03-07T01:54:26.2961976Z RequestItem
2024-03-07T01:54:26.2963506Z   Methods >
2024-03-07T01:54:26.2964092Z     #from_json
2024-03-07T01:54:26.5654527Z       has the correct name
2024-03-07T01:54:26.8337459Z       has the correct amount on hand
2024-03-07T01:54:27.1108249Z       has the correct amount on hand for location
2024-03-07T01:54:27.3866199Z       has the correct quantity
2024-03-07T01:54:27.3866885Z 
2024-03-07T01:54:27.3867108Z User
2024-03-07T01:54:27.3868489Z   #role_added
2024-03-07T01:54:27.4264295Z     renders the body correctly
2024-03-07T01:54:27.4265395Z   #send_reset_password_instructions
2024-03-07T01:54:27.4266192Z     user gets an email with instructions
2024-03-07T01:54:27.5222124Z       sends an email with instructions
2024-03-07T01:54:27.5223190Z 
2024-03-07T01:54:27.5223506Z RequestsTotalItemsService
2024-03-07T01:54:27.5224273Z   #calculate
2024-03-07T01:54:27.5225204Z     when the request items is not blank
2024-03-07T01:54:27.5399888Z       return the names of items correctly
2024-03-07T01:54:27.5555880Z       return items with correct quantities calculated
2024-03-07T01:54:27.5556771Z     when item name is nil
2024-03-07T01:54:27.5693360Z       return Unknown Item
2024-03-07T01:54:27.5694138Z     when provided requests is nil
2024-03-07T01:54:27.5732821Z       is expected to be blank
2024-03-07T01:54:27.5733947Z     when provided with requests that have no request items
2024-03-07T01:54:27.5818217Z       is expected to be blank
2024-03-07T01:54:27.5818965Z 
2024-03-07T01:54:27.5819204Z PartnerMailer
2024-03-07T01:54:27.5820751Z   #application_approved
2024-03-07T01:54:27.6102069Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:54:27.6379956Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-07T01:54:27.6381137Z   #recertification_request
2024-03-07T01:54:27.6635401Z     renders the body with text that indicates to recertify and link to where
2024-03-07T01:54:27.6939733Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:54:27.6940586Z 
2024-03-07T01:54:27.6940901Z Partners::RequestApprovalService
2024-03-07T01:54:27.6941618Z   #call
2024-03-07T01:54:27.6946091Z     when the partner is already awaiting approval
2024-03-07T01:54:27.7239019Z       should return an error saying it the partner is already requested approval
2024-03-07T01:54:27.7240228Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-07T01:54:27.7521894Z       should return an error re social media
2024-03-07T01:54:27.7523373Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-07T01:54:27.7524863Z     when the partner is not yet awaiting approval
2024-03-07T01:54:27.7873748Z       should set the status on the partner record to awaiting_review
2024-03-07T01:54:27.8198128Z       should send an email notification to the partner's organization
2024-03-07T01:54:27.8199549Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-07T01:54:27.8531285Z       does not have an error
2024-03-07T01:54:27.8531957Z 
2024-03-07T01:54:27.8532198Z ReminderDeadlineJob
2024-03-07T01:54:27.8532854Z   #perform
2024-03-07T01:54:27.8805744Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-07T01:54:27.8806773Z 
2024-03-07T01:54:27.8807096Z ItemizableUpdateService
2024-03-07T01:54:27.8807767Z   decreases
2024-03-07T01:54:28.0035023Z     should raise an error if any item is inactive
2024-03-07T01:54:28.1590915Z     should update quantity in different locations
2024-03-07T01:54:28.3174784Z     should update quantity in same storage location
2024-03-07T01:54:28.3175424Z   increases
2024-03-07T01:54:28.4166991Z     should raise an error if any item is inactive
2024-03-07T01:54:28.5775698Z     should update quantity in different locations
2024-03-07T01:54:28.7273634Z     should update quantity in same storage location
2024-03-07T01:54:28.7274379Z 
2024-03-07T01:54:28.7274658Z LineItem
2024-03-07T01:54:28.7276160Z   Validations >
2024-03-07T01:54:28.7435655Z     requires a quantity
2024-03-07T01:54:28.7534130Z     requires an item
2024-03-07T01:54:28.8498140Z     the quantity must be a valid integer and cannot be 0
2024-03-07T01:54:28.8499203Z   package_count
2024-03-07T01:54:28.8716843Z     is nil if there is no package_size
2024-03-07T01:54:28.8925468Z     is equal to the quanity divided by the package_size
2024-03-07T01:54:28.8926749Z   Methods >
2024-03-07T01:54:28.8927369Z     item packages
2024-03-07T01:54:28.8928004Z       #has_packages
2024-03-07T01:54:28.8929006Z         item has package size
2024-03-07T01:54:28.9127598Z           is expected to be truthy
2024-03-07T01:54:28.9128477Z         item has no package size
2024-03-07T01:54:28.9274518Z           is expected to be falsy
2024-03-07T01:54:28.9275315Z       #package_count
2024-03-07T01:54:28.9276422Z         does not have packages
2024-03-07T01:54:28.9417989Z           is expected to be falsy
2024-03-07T01:54:28.9418748Z         has packages
2024-03-07T01:54:28.9606255Z           is expected to eq "1"
2024-03-07T01:54:28.9607053Z     #value_per_line_item
2024-03-07T01:54:28.9607655Z       item has no value
2024-03-07T01:54:28.9757596Z         is expected to eq 0
2024-03-07T01:54:28.9758553Z       item has value and quantity
2024-03-07T01:54:28.9951703Z         is expected to eq 25
2024-03-07T01:54:28.9952622Z   versioning
2024-03-07T01:54:28.9994960Z     is expected to be versioned
2024-03-07T01:54:28.9995697Z   Scopes >
2024-03-07T01:54:28.9996665Z     ->active
2024-03-07T01:54:29.0354438Z       retrieves only those with active status
2024-03-07T01:54:29.0355317Z 
2024-03-07T01:54:29.0355876Z Transfer
2024-03-07T01:54:29.0357052Z   Scopes >
2024-03-07T01:54:29.0597423Z     `from_location` can filter out transfers from a specific location
2024-03-07T01:54:29.0827115Z     `to_location` can filter out transfers to a specific location
2024-03-07T01:54:29.0827860Z   behaves like itemizable
2024-03-07T01:54:29.0828619Z     .line_items
2024-03-07T01:54:29.0830157Z       sorted
2024-03-07T01:54:29.1549320Z         displays the items, sorted by name
2024-03-07T01:54:29.1550467Z       quantities_by_name
2024-03-07T01:54:29.2108775Z         leaves out zero-quantitied items if requested
2024-03-07T01:54:29.2641598Z         returns a hash of items with id, name, and quantity
2024-03-07T01:54:29.2642871Z       combine!
2024-03-07T01:54:29.2931522Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:54:29.3435796Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:54:29.3436897Z       total
2024-03-07T01:54:29.3984182Z         has an item total
2024-03-07T01:54:29.3985330Z     .to_a
2024-03-07T01:54:29.3985975Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:54:29.4382971Z         raises an error
2024-03-07T01:54:29.4383839Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:54:29.4780711Z         calls line_item_values
2024-03-07T01:54:29.4781828Z   Methods >
2024-03-07T01:54:29.6954153Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-07T01:54:29.6955669Z   versioning
2024-03-07T01:54:29.6998437Z     is expected to be versioned
2024-03-07T01:54:29.6999252Z   Validations >
2024-03-07T01:54:29.7742849Z     requires that the line items must have sufficient quantity in the inventory
2024-03-07T01:54:29.8027765Z     requires that each line item exists in the inventory
2024-03-07T01:54:29.8167724Z     must have storage locations set
2024-03-07T01:54:29.8299199Z     must have different storage locations
2024-03-07T01:54:30.0250914Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-07T01:54:30.0345064Z     must belong to an organization
2024-03-07T01:54:30.0345904Z 
2024-03-07T01:54:30.0346375Z ProfileUpdateService
2024-03-07T01:54:30.0347175Z   #update
2024-03-07T01:54:30.0616751Z     updates the profile with the filtered and prepared params
2024-03-07T01:54:30.0617496Z 
2024-03-07T01:54:30.0617912Z Reports::ChildrenServedReportService
2024-03-07T01:54:30.0618685Z   #report
2024-03-07T01:54:30.6395069Z     should report normal values
2024-03-07T01:54:31.3124770Z     should work with no distribution_quantity
2024-03-07T01:54:31.5020513Z     should report zero values
2024-03-07T01:54:31.5021079Z 
2024-03-07T01:54:31.5021686Z Exports::ExportPurchasesCSVService
2024-03-07T01:54:31.5022419Z   #generate_csv_data
2024-03-07T01:54:31.6331550Z     should match the expected content for the csv
2024-03-07T01:54:31.6332084Z 
2024-03-07T01:54:31.6332688Z AllocateKitInventoryService
2024-03-07T01:54:31.6333490Z   #allocate
2024-03-07T01:54:31.6334444Z     when more than one kit is requested
2024-03-07T01:54:31.6335334Z       but one of the items is out of stock
2024-03-07T01:54:31.9160572Z         returns error and does not change kit or item quantity
2024-03-07T01:54:31.9161832Z     when inventory items are available
2024-03-07T01:54:32.2104445Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-07T01:54:32.2105936Z       when there are more then one line items
2024-03-07T01:54:32.2106518Z         when same kit is allocated multiple times
2024-03-07T01:54:32.5468460Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:54:32.5470521Z         when there kit is allocated once
2024-03-07T01:54:32.8437496Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:54:32.8439118Z       When kit is allocated more then once
2024-03-07T01:54:33.1763769Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-07T01:54:33.1765432Z   #error
2024-03-07T01:54:33.1766407Z     when the Store location organization doesn't match
2024-03-07T01:54:33.4088279Z       returns error
2024-03-07T01:54:33.4088795Z 
2024-03-07T01:54:33.4089056Z UiHelper
2024-03-07T01:54:33.4091404Z   optional_data_text
2024-03-07T01:54:33.4092455Z     when the field provided is blank
2024-03-07T01:54:33.4151372Z       should return the text Not-Provided in gray text
2024-03-07T01:54:33.4152341Z     when the field provided is not blank
2024-03-07T01:54:33.4201905Z       should return the content
2024-03-07T01:54:33.4202921Z 
2024-03-07T01:54:33.4203224Z UsersRole
2024-03-07T01:54:33.4204423Z   versioning
2024-03-07T01:54:33.4250095Z     is expected to be versioned
2024-03-07T01:54:33.4250959Z   #current_role_for
2024-03-07T01:54:33.4251795Z     for org admin
2024-03-07T01:54:33.4459012Z       should return org admin
2024-03-07T01:54:33.4459653Z     for org user
2024-03-07T01:54:33.4598279Z       should return org user
2024-03-07T01:54:33.4598997Z     for partner user
2024-03-07T01:54:33.4747275Z       should return partner user
2024-03-07T01:54:33.4748159Z     for super admin
2024-03-07T01:54:33.4927037Z       should return super admin
2024-03-07T01:54:33.4927661Z 
2024-03-07T01:54:33.4928374Z AccountRequestsController
2024-03-07T01:54:33.4929013Z   routing
2024-03-07T01:54:33.4973508Z     routes to #create
2024-03-07T01:54:33.5009221Z     routes to #new
2024-03-07T01:54:33.5009711Z 
2024-03-07T01:54:33.5010013Z Reports::OtherProductsReportService
2024-03-07T01:54:33.5010903Z   #report
2024-03-07T01:54:33.6926420Z     should report zero values
2024-03-07T01:54:34.3552890Z     should report normal values
2024-03-07T01:54:34.3554903Z 
2024-03-07T01:54:34.3555299Z EventDiffer
2024-03-07T01:54:34.6662936Z   should return a full diff
2024-03-07T01:54:34.6663472Z 
2024-03-07T01:54:34.6664040Z DonationItemizedBreakdownService
2024-03-07T01:54:34.6664754Z   #fetch
2024-03-07T01:54:35.1830197Z     return the list of items donated with distributed
2024-03-07T01:54:35.1830956Z 
2024-03-07T01:54:35.1831207Z TransferDestroyService
2024-03-07T01:54:35.1831824Z   #call
2024-03-07T01:54:35.1832759Z     when there are no issues
2024-03-07T01:54:35.4050989Z       should return an OpenStruct with success? set to true
2024-03-07T01:54:35.6110085Z       should execute the expected methods
2024-03-07T01:54:35.6111044Z     when an issue occurs in transaction
2024-03-07T01:54:35.6112468Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-07T01:54:35.8128696Z         should return a OpenStruct with the raised error
2024-03-07T01:54:35.8130074Z       because the transfer_id does not match any Transfer
2024-03-07T01:54:36.0192841Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-07T01:54:36.0193679Z       because the transfer destroy raised an error
2024-03-07T01:54:36.2166634Z         should return a OpenStruct with the raised error
2024-03-07T01:54:36.2167994Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-07T01:54:36.4105706Z         should return a OpenStruct with the raised error
2024-03-07T01:54:36.4106549Z     because transfer should not be deleted
2024-03-07T01:54:36.6149662Z       should return an OpenStruct with the raised error
2024-03-07T01:54:36.6150935Z 
2024-03-07T01:54:36.6151254Z AdjustmentCreateService
2024-03-07T01:54:36.6151895Z   call
2024-03-07T01:54:36.6781650Z     gives an error if we attempt to adjust inventory below 0
2024-03-07T01:54:36.7714280Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-07T01:54:36.8711537Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-07T01:54:36.9655586Z     decreases stored inventory on a negative adjustment
2024-03-07T01:54:37.0318689Z     does not allow inventory to be adjusted below 0
2024-03-07T01:54:37.1506710Z     increases stored inventory on a positive adjustment
2024-03-07T01:54:37.2143441Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-07T01:54:37.2982220Z     handles adjustments to multiple items
2024-03-07T01:54:37.3898662Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-07T01:54:37.3899524Z 
2024-03-07T01:54:37.3899715Z County
2024-03-07T01:54:37.3941855Z   is expected to have many served_areas
2024-03-07T01:54:37.3942483Z   versioning
2024-03-07T01:54:37.3977593Z     is expected to be versioned
2024-03-07T01:54:37.3979472Z 
2024-03-07T01:54:37.3979761Z Partner
2024-03-07T01:54:37.3981715Z   callbacks
2024-03-07T01:54:37.4206208Z     properly downcases email
2024-03-07T01:54:37.4207042Z   #quantity_year_to_date
2024-03-07T01:54:37.6051839Z     includes all item quantities from distributions issued during the current year
2024-03-07T01:54:37.8030470Z     does not include quantities from distributions issued during the previous year
2024-03-07T01:54:37.8031478Z   #deactivated?
2024-03-07T01:54:37.8032190Z     when the status is 'deactivated'
2024-03-07T01:54:37.8082568Z       should return true
2024-03-07T01:54:37.8083369Z     when the status is not 'deactivated'
2024-03-07T01:54:37.8130771Z       should return false
2024-03-07T01:54:37.8131466Z   ActiveStorage validation
2024-03-07T01:54:37.8257689Z     validates that attachments are pdf or docs
2024-03-07T01:54:37.8258388Z   Validations >
2024-03-07T01:54:37.8517120Z     does not require a unique name between organizations
2024-03-07T01:54:37.8799020Z     still requires a unique email between organizations
2024-03-07T01:54:37.8895263Z     validates the quota is a number but it is not required
2024-03-07T01:54:37.8951010Z     must belong to an organization
2024-03-07T01:54:37.9354544Z     requires a unique email that is formatted correctly
2024-03-07T01:54:37.9666008Z     requires a unique name within an organization
2024-03-07T01:54:37.9666743Z   #csv_export_attributes
2024-03-07T01:54:37.9946746Z     includes contact person information from parnerbase
2024-03-07T01:54:37.9947441Z   #deletable?
2024-03-07T01:54:37.9947903Z     when status is not uninvited
2024-03-07T01:54:38.0037504Z       should return false
2024-03-07T01:54:38.0038063Z     when status is uninvited
2024-03-07T01:54:38.0039053Z       when it has no other associations
2024-03-07T01:54:38.0165607Z         should return true
2024-03-07T01:54:38.0166064Z       when it has a request
2024-03-07T01:54:38.0335464Z         should return false
2024-03-07T01:54:38.0336117Z       when it has a profile but no users
2024-03-07T01:54:38.0508157Z         should return true
2024-03-07T01:54:38.0508823Z       when it has a profile and users
2024-03-07T01:54:38.0780865Z         should return false
2024-03-07T01:54:38.0781537Z       when it has a distribution
2024-03-07T01:54:38.0936469Z         should return false
2024-03-07T01:54:38.0939197Z   #profile
2024-03-07T01:54:38.1187281Z     should return the associated Partners::Profile record
2024-03-07T01:54:38.1188061Z   Filters
2024-03-07T01:54:38.1188443Z     by_status
2024-03-07T01:54:38.1601042Z       yields deactivated partner when deactivated status provided
2024-03-07T01:54:38.2019144Z       yields partners with the provided status
2024-03-07T01:54:38.2020177Z   changing emails
2024-03-07T01:54:38.2301457Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-07T01:54:38.2595767Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-07T01:54:38.2888013Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-07T01:54:38.3173583Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-07T01:54:38.3524306Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-07T01:54:38.3825311Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-07T01:54:38.4124750Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-07T01:54:38.4125825Z   #impact_metrics
2024-03-07T01:54:38.4126148Z     when partner has related information
2024-03-07T01:54:38.4667345Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-07T01:54:38.4668326Z     when partner don't have any related information
2024-03-07T01:54:38.4932919Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-07T01:54:38.4934016Z   associations
2024-03-07T01:54:38.4971907Z     is expected to have many requests
2024-03-07T01:54:38.5012538Z     is expected to have many requestable_items through item_categories source => items
2024-03-07T01:54:38.5047141Z     is expected to have many children through families
2024-03-07T01:54:38.5102405Z     is expected to belong to partner_group optional: true
2024-03-07T01:54:38.5139717Z     is expected to have many item_categories through partner_group
2024-03-07T01:54:38.5200119Z     is expected to belong to organization required: true
2024-03-07T01:54:38.5235202Z     is expected to have many distributions
2024-03-07T01:54:38.5271910Z     is expected to have many users dependent => destroy
2024-03-07T01:54:38.5306187Z     is expected to have many requests
2024-03-07T01:54:38.5342753Z     is expected to have many families dependent => destroy
2024-03-07T01:54:38.5343400Z     primary_user
2024-03-07T01:54:38.5653381Z       should return the first user ever created for a partner
2024-03-07T01:54:38.5654074Z   versioning
2024-03-07T01:54:38.5695413Z     is expected to be versioned
2024-03-07T01:54:38.5695936Z   #approvable?
2024-03-07T01:54:38.5697190Z     when status is not invited or awaiting_review
2024-03-07T01:54:38.5793963Z       should return false
2024-03-07T01:54:38.5794537Z     when status is awaiting_review
2024-03-07T01:54:38.5837144Z       should return true
2024-03-07T01:54:38.5837689Z     when status is invited
2024-03-07T01:54:38.5880613Z       should return true
2024-03-07T01:54:38.5881152Z   import_csv
2024-03-07T01:54:38.8071445Z     imports partners from a csv file and prevents multiple imports
2024-03-07T01:54:39.1162568Z     imports partners from a csv file with BOM encodings
2024-03-07T01:54:39.1163209Z 
2024-03-07T01:54:39.1163564Z PartnerGroup
2024-03-07T01:54:39.1164863Z   Validations >
2024-03-07T01:54:39.1215224Z     must belong to an organization
2024-03-07T01:54:39.1311810Z     requires a unique name within an organization
2024-03-07T01:54:39.1639754Z     does not require a unique name between organizations
2024-03-07T01:54:39.1640737Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-07T01:54:39.1696713Z       should not be valid
2024-03-07T01:54:39.1697240Z   versioning
2024-03-07T01:54:39.1737024Z     is expected to be versioned
2024-03-07T01:54:39.1737615Z   DB constraints
2024-03-07T01:54:39.1738497Z     deadline_day <= 28
2024-03-07T01:54:39.1815549Z       raises error if unmet
2024-03-07T01:54:39.1816127Z     send_reminders IS NOT NULL
2024-03-07T01:54:39.1890171Z       raises error if unmet
2024-03-07T01:54:39.1890705Z     reminder_day <= 28
2024-03-07T01:54:39.1965074Z       raises error if unmet
2024-03-07T01:54:39.1965597Z   associations
2024-03-07T01:54:39.2029431Z     is expected to have and belong to many item_categories
2024-03-07T01:54:39.2082794Z     is expected to belong to organization required: true
2024-03-07T01:54:39.2116750Z     is expected to have many partners
2024-03-07T01:54:39.2117706Z 
2024-03-07T01:54:39.2118052Z DistributionMailer
2024-03-07T01:54:39.2119574Z   #partner_mailer
2024-03-07T01:54:39.2788620Z     renders the body with distributions text
2024-03-07T01:54:39.3308647Z     renders the body with organization's email text
2024-03-07T01:54:39.3309437Z     with deliver_method: :pick_up
2024-03-07T01:54:39.3865275Z       renders the body with 'picked up' specified
2024-03-07T01:54:39.3866007Z       when parners profile pick_up_email is present
2024-03-07T01:54:39.4403744Z         sends email to the primary contact and partner`s pickup person
2024-03-07T01:54:39.4405136Z         when pickup person happens to be the same as the primary contact
2024-03-07T01:54:39.4966960Z           does not send email twice
2024-03-07T01:54:39.4967669Z     with deliver_method: :delivery
2024-03-07T01:54:39.5579244Z       renders the body with 'delivered' specified
2024-03-07T01:54:39.6143696Z       sends copy of email only to the partner
2024-03-07T01:54:39.6144448Z     with distribution changes
2024-03-07T01:54:39.6784659Z       renders the body with changes that happened in the distribution
2024-03-07T01:54:39.6785314Z   #reminder_email
2024-03-07T01:54:39.6786088Z     Text format
2024-03-07T01:54:39.7289086Z       renders the body with organization's email text
2024-03-07T01:54:39.7289799Z     with deliver_method: :delivery
2024-03-07T01:54:39.7824865Z       renders the body with 'delivery' specified
2024-03-07T01:54:39.7825553Z     HTML format
2024-03-07T01:54:39.8341976Z       renders the body with organization's email text
2024-03-07T01:54:39.8342726Z     with deliver_method: :pick_up
2024-03-07T01:54:39.8871410Z       renders the body with 'pick up' specified
2024-03-07T01:54:39.8872091Z 
2024-03-07T01:54:39.8872318Z PartnerInviteService
2024-03-07T01:54:39.9178915Z   should create invite
2024-03-07T01:54:39.9481469Z   should update the status of the partner to invited
2024-03-07T01:54:39.9482282Z   with force: true
2024-03-07T01:54:39.9792932Z     should send the force setting forward
2024-03-07T01:54:39.9793490Z 
2024-03-07T01:54:39.9793658Z Deadlinable
2024-03-07T01:54:39.9794264Z   validations
2024-03-07T01:54:39.9878149Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:54:39.9922697Z     validates that reminder day is not the same as deadline day
2024-03-07T01:54:39.9992665Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:54:39.9993877Z 
2024-03-07T01:54:39.9994051Z Organization
2024-03-07T01:54:39.9996765Z   validations
2024-03-07T01:54:40.0099224Z     validates that at least one distribution type is enabled
2024-03-07T01:54:40.0162972Z     validates that attachment file size is not higher than 1 MB
2024-03-07T01:54:40.0231333Z     validates that attachments are png or jpgs
2024-03-07T01:54:40.2000053Z     validates that short names are unique
2024-03-07T01:54:40.2000777Z   #short_name
2024-03-07T01:54:40.2072360Z     can only contain valid characters
2024-03-07T01:54:40.2072986Z   #ordered_requests
2024-03-07T01:54:40.4106534Z     puts active requests before fulfilled requests
2024-03-07T01:54:40.4107398Z     ordering of requests with matching status
2024-03-07T01:54:40.6066492Z       puts the most recently updated request before older requests
2024-03-07T01:54:40.6067130Z   is_active
2024-03-07T01:54:40.9848845Z     returns active organizations
2024-03-07T01:54:40.9849351Z   default storage location
2024-03-07T01:54:40.9891001Z     returns nil when not set
2024-03-07T01:54:40.9932632Z     associates the default storage location with a storage location
2024-03-07T01:54:40.9933483Z   total_inventory
2024-03-07T01:54:41.2331703Z     returns a sum total of all inventory at all storage locations
2024-03-07T01:54:41.4121792Z     returns 0 if there is nothing
2024-03-07T01:54:41.4122454Z   reminder_day
2024-03-07T01:54:41.4250974Z     can only contain numbers 1-28
2024-03-07T01:54:41.4251737Z   #assign_attributes_from_account_request
2024-03-07T01:54:41.4339763Z     should assign the proper attributes to the organization
2024-03-07T01:54:41.4340560Z   earliest reporting year
2024-03-07T01:54:41.6104805Z     is the organization created year if no associated data
2024-03-07T01:54:41.8580659Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-07T01:54:41.8581403Z   after_create
2024-03-07T01:54:41.8801975Z     should update the state of the account request
2024-03-07T01:54:41.8802757Z   geocode
2024-03-07T01:54:42.0570494Z     adds coordinates to the database
2024-03-07T01:54:42.0571155Z   from_email
2024-03-07T01:54:42.2603338Z     returns admin email when it's empty
2024-03-07T01:54:42.4593425Z     returns admin email when it's empty space
2024-03-07T01:54:42.6359894Z     returns email when present
2024-03-07T01:54:42.8651587Z     returns admin email when not present
2024-03-07T01:54:42.8652093Z   valid_items
2024-03-07T01:54:43.2022533Z     returns an array of item partner keys
2024-03-07T01:54:43.3889743Z     only shows active valid items
2024-03-07T01:54:43.3890314Z     with invisible items
2024-03-07T01:54:43.4193771Z       only shows active and visible items
2024-03-07T01:54:43.4194456Z   versioning
2024-03-07T01:54:43.4233034Z     is expected to be versioned
2024-03-07T01:54:43.4233605Z   address
2024-03-07T01:54:43.4274118Z     does not add any separators before the city when street is missing
2024-03-07T01:54:43.4309021Z     correctly formats an address string with commas and spaces
2024-03-07T01:54:43.4341874Z     does not add any separators after street when city, state, and zip are missing
2024-03-07T01:54:43.4376901Z     returns an empty string when the org has no address components
2024-03-07T01:54:43.4412710Z     does not add a trailing space when the zip code is missing
2024-03-07T01:54:43.4413600Z   Associations >
2024-03-07T01:54:43.4448251Z     is expected to have many item_categories
2024-03-07T01:54:43.4484726Z     is expected to have many users through roles
2024-03-07T01:54:43.4534331Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-07T01:54:43.4535264Z     items
2024-03-07T01:54:43.4535704Z       .during.top
2024-03-07T01:54:45.4670828Z         return just 3 elements
2024-03-07T01:54:47.4858731Z         return 3 most used items
2024-03-07T01:54:47.4859401Z       .during.bottom
2024-03-07T01:54:49.4994481Z         return just 3 elements
2024-03-07T01:54:51.4913764Z         return 3 least used items
2024-03-07T01:54:51.4914421Z       .during
2024-03-07T01:54:53.4936675Z         return ranking of all items
2024-03-07T01:54:53.4937141Z       .other
2024-03-07T01:54:55.4950350Z         returns all items for this organization designated 'other'
2024-03-07T01:54:55.4951037Z     distributions
2024-03-07T01:54:55.4951323Z       upcoming
2024-03-07T01:54:55.5756061Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-07T01:54:55.5757119Z     users
2024-03-07T01:54:55.5757631Z       when a organizaton has a user that has two roles
2024-03-07T01:54:55.7748540Z         should returns users without duplications
2024-03-07T01:54:55.7751656Z   .seed_items
2024-03-07T01:54:55.7752728Z     when provided with an organization to seed
2024-03-07T01:54:56.1135763Z       loads the base items into Item records
2024-03-07T01:54:56.1136569Z     when no organization is provided
2024-03-07T01:54:56.7631665Z       updates all organizations
2024-03-07T01:54:56.7632336Z   #seed_items
2024-03-07T01:54:56.9626813Z     allows a collection of items to be seeded
2024-03-07T01:54:57.1441613Z     allows a single base item to be seeded
2024-03-07T01:54:57.1442406Z     when given an item that already exists
2024-03-07T01:54:57.3313079Z       gracefully skips the item
2024-03-07T01:54:57.3314406Z     when given an item name that already exists, but with an 'other' partner key
2024-03-07T01:54:57.5279685Z       updates the old item to use the new base item as its base
2024-03-07T01:54:57.5280528Z   deadline_day
2024-03-07T01:54:57.5387695Z     can only contain numbers 1-28
2024-03-07T01:54:57.5388215Z 
2024-03-07T01:54:57.5388474Z NotifyPartnerJob
2024-03-07T01:54:57.5389259Z   #perform
2024-03-07T01:54:57.5437922Z     avoids exception when request doesn't exist
2024-03-07T01:54:57.5544668Z     is expected to call RequestsConfirmationMailer
2024-03-07T01:54:57.5545677Z     when the request's partner is deactivated
2024-03-07T01:54:57.5838976Z       does not send the confirmation email
2024-03-07T01:54:57.5840348Z 
2024-03-07T01:54:57.5840575Z Item
2024-03-07T01:54:57.5842270Z   Assocations >
2024-03-07T01:54:57.5892246Z     is expected to belong to item_category optional: true
2024-03-07T01:54:57.5892816Z   versioning
2024-03-07T01:54:57.5929121Z     is expected to be versioned
2024-03-07T01:54:57.5929691Z   default_quantity
2024-03-07T01:54:57.6012077Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-07T01:54:57.6091302Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-07T01:54:57.6169060Z     should return the value of distribution_quantity if it is set
2024-03-07T01:54:57.6246748Z     should return 50 if column is not set
2024-03-07T01:54:57.6247405Z   Validations >
2024-03-07T01:54:57.6377132Z     requires a unique name
2024-03-07T01:54:57.6428132Z     must belong to an organization
2024-03-07T01:54:57.6474088Z     requires a Base Item base
2024-03-07T01:54:57.6585357Z     requires that items quantity are not a negative number
2024-03-07T01:54:57.6586169Z   distribution_quantity and package size
2024-03-07T01:54:57.6716147Z     have nil values if an empty string is passed
2024-03-07T01:54:57.6716848Z   after update
2024-03-07T01:54:57.6717260Z     when item has the kit
2024-03-07T01:54:57.8808222Z       updates kit name
2024-03-07T01:54:57.8808828Z     when item does not have kit
2024-03-07T01:54:57.8956498Z       does not raise any errors
2024-03-07T01:54:57.8957131Z   Filtering >
2024-03-07T01:54:57.8994698Z     can filter
2024-03-07T01:54:57.9194009Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:54:57.9237439Z     ->by_size returns all items with the same size, per their BaseItem parent (FAILED - 1)
2024-03-07T01:54:57.9545464Z     ->active shows items that are still active
2024-03-07T01:54:57.9546245Z     ->cloth_diapers
2024-03-07T01:54:57.9855226Z       returns records associated with disposable diapers
2024-03-07T01:54:57.9856035Z     ->by_base_item
2024-03-07T01:54:58.1865733Z       can be chained to organization to constrain it to just 1 org's items
2024-03-07T01:54:58.2033006Z       shows the items for a particular base_item
2024-03-07T01:54:58.2033807Z     ->disposable
2024-03-07T01:54:58.2329600Z       returns records associated with disposable diapers
2024-03-07T01:54:58.2330487Z     ->by_partner_key
2024-03-07T01:54:58.2501216Z       filters by partner key
2024-03-07T01:54:58.2501793Z   Methods >
2024-03-07T01:54:58.2503107Z     destroy
2024-03-07T01:54:58.2700832Z       actually destroys an item that doesn't have history
2024-03-07T01:54:58.4878217Z       deactivates the kit if it exists
2024-03-07T01:54:58.5143535Z       only hides an item that has history
2024-03-07T01:54:58.5144244Z     #reactivate!
2024-03-07T01:54:58.5144711Z       given an array of item ids
2024-03-07T01:54:58.5391569Z         sets the active trait to true for all of them
2024-03-07T01:54:58.5392322Z       given a single item id
2024-03-07T01:54:58.5538497Z         sets the active trait to true for that item
2024-03-07T01:54:58.5539167Z     other?
2024-03-07T01:54:58.5686728Z       is true for items that are partner_key 'other'
2024-03-07T01:54:58.5687393Z     has_history?
2024-03-07T01:54:58.6519510Z       identifies items that have been used previously
2024-03-07T01:54:58.6520277Z     barcodes_for
2024-03-07T01:54:58.6738359Z       retrieves all BarcodeItems associated with an item
2024-03-07T01:54:58.6739359Z     barcoded_items >
2024-03-07T01:54:58.7110392Z       returns a collection of items that have barcodes associated with them
2024-03-07T01:54:58.7111304Z     storage_locations_containing
2024-03-07T01:54:58.7490210Z       retrieves all storage locations that contain an item
2024-03-07T01:54:59.0181888Z 
2024-03-07T01:54:59.0183277Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-07T01:54:59.0184243Z 
2024-03-07T01:54:59.0187190Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-07T01:54:59.0188572Z      # Temporarily skipped with xit
2024-03-07T01:54:59.0189146Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-07T01:54:59.0595010Z 
2024-03-07T01:54:59.0595736Z Failures:
2024-03-07T01:54:59.0596110Z 
2024-03-07T01:54:59.0597174Z   1) Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:54:59.0598140Z      Failure/Error: size4 = create(:base_item, size: "4")
2024-03-07T01:54:59.0599070Z 
2024-03-07T01:54:59.0599205Z      NoMethodError:
2024-03-07T01:54:59.0600477Z        undefined method `size=' for #<BaseItem id: nil, name: "4T Diapers", category: nil, created_at: nil, updated_at: nil, item_count: nil, partner_key: "4t_diapers">
2024-03-07T01:54:59.0601857Z      # ./spec/models/item_spec.rb:53:in `block (3 levels) in <top (required)>'
2024-03-07T01:54:59.0618765Z 
2024-03-07T01:54:59.0619204Z Finished in 49.32 seconds (files took 8.71 seconds to load)
2024-03-07T01:54:59.0619966Z 508 examples, 1 failure, 1 pending
2024-03-07T01:54:59.0620356Z 
2024-03-07T01:54:59.0620536Z Failed examples:
2024-03-07T01:54:59.0620795Z 
2024-03-07T01:54:59.0621590Z rspec ./spec/models/item_spec.rb:52 # Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:54:59.0622298Z 
2024-03-07T01:54:59.0622437Z Randomized with seed 33542
2024-03-07T01:54:59.0622650Z 
2024-03-07T01:54:59.5483092Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:54:59.5485528Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3823 / 6435 LOC (59.41%) covered.
2024-03-07T01:54:59.6034923Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/models/partner_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/item_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/request_item_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/view/inventory_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/transfer_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/account_request_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/models/line_item_spec.rb" "spec/events/event_differ_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/models/partner_group_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/users_role_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/county_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb" failed
2024-03-07T01:54:59.9938214Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:54:59.9939894Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10705 LOC (0.35%) covered.
2024-03-07T01:55:00.0200801Z ##[error]Process completed with exit code 1.
