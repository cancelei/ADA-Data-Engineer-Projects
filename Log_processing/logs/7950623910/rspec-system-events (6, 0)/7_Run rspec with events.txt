2024-02-18T17:32:59.1572527Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-18T17:32:59.1573498Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-18T17:32:59.1611006Z shell: /usr/bin/bash -e {0}
2024-02-18T17:32:59.1611371Z env:
2024-02-18T17:32:59.1611689Z   POSTGRES_HOST: localhost
2024-02-18T17:32:59.1612157Z   DATABASE_HOST: localhost
2024-02-18T17:32:59.1612541Z   PG_USERNAME: postgres
2024-02-18T17:32:59.1612925Z   PG_PASSWORD: password
2024-02-18T17:32:59.1613328Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-18T17:32:59.1613737Z   POSTGRES_PORT: 5432
2024-02-18T17:32:59.1614102Z   PGHOST: localhost
2024-02-18T17:32:59.1614507Z   PGUSER: postgres
2024-02-18T17:32:59.1614802Z   RAILS_ENV: test
2024-02-18T17:32:59.1615182Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-18T17:32:59.1615674Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-18T17:32:59.1616069Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-18T17:32:59.1616581Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-18T17:32:59.1617112Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-18T17:32:59.1617741Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-18T17:32:59.1618439Z   EVENTS_READ: true
2024-02-18T17:32:59.1618795Z ##[endgroup]
2024-02-18T17:33:04.7217323Z W, [2024-02-18T17:33:04.721310 #2331]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-18T17:33:04.7219723Z W, [2024-02-18T17:33:04.721370 #2331]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:33:04.7222438Z W, [2024-02-18T17:33:04.721391 #2331]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:33:04.7227964Z W, [2024-02-18T17:33:04.721426 #2331]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-18T17:33:07.1939687Z W, [2024-02-18T17:33:07.193675 #2331]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-18T17:33:07.1941410Z W, [2024-02-18T17:33:07.193723 #2331]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:33:07.1943226Z W, [2024-02-18T17:33:07.193739 #2331]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:33:07.1945944Z W, [2024-02-18T17:33:07.193784 #2331]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-18T17:33:07.1998291Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-18T17:33:15.4670306Z 
2024-02-18T17:33:15.4671174Z Randomized with seed 43666
2024-02-18T17:33:16.3835749Z 
2024-02-18T17:33:16.3836713Z Profiles
2024-02-18T17:33:16.3837517Z   POST #update
2024-02-18T17:33:16.3838308Z     successful save
2024-02-18T17:33:16.4640697Z       update partner
2024-02-18T17:33:16.5116286Z       redirects to #show
2024-02-18T17:33:16.5117275Z     when updating an existing value to a blank value
2024-02-18T17:33:16.5580921Z       should have blank values
2024-02-18T17:33:16.6029515Z       update partner
2024-02-18T17:33:16.6030459Z   GET #edit
2024-02-18T17:33:16.7197542Z     returns http success
2024-02-18T17:33:16.7198122Z 
2024-02-18T17:33:16.7198475Z /partners/profiles
2024-02-18T17:33:16.7199762Z   GET #edit
2024-02-18T17:33:16.8355451Z     has "No" radio button value when value is false
2024-02-18T17:33:16.9228204Z     does not have default radio button value when value is nil
2024-02-18T17:33:17.0107300Z     displays the partner
2024-02-18T17:33:17.1078440Z     has "Yes" radio button value when value is true
2024-02-18T17:33:17.1079436Z   PUT #update
2024-02-18T17:33:17.1697050Z     updates the partner and profile
2024-02-18T17:33:17.1697957Z     when updating an existing value to a blank value
2024-02-18T17:33:17.2264178Z       updates the partner profile attribute to a blank value
2024-02-18T17:33:17.2822585Z       does store N/A in the database
2024-02-18T17:33:17.3390672Z       does not update other partner profile attributes to blank
2024-02-18T17:33:17.3391455Z     with no social media
2024-02-18T17:33:17.4367120Z       shows an error
2024-02-18T17:33:17.4368040Z   GET #show
2024-02-18T17:33:17.4962255Z     shows correct values for yes/no buttons
2024-02-18T17:33:17.5541318Z     displays the partner
2024-02-18T17:33:17.5542089Z 
2024-02-18T17:33:17.5542704Z Audits
2024-02-18T17:33:17.5543357Z   while signed in as an organization admin
2024-02-18T17:33:17.5544646Z     GET #show
2024-02-18T17:33:17.6282504Z       is successful
2024-02-18T17:33:17.6283217Z     GET #new
2024-02-18T17:33:17.6777522Z       is successful
2024-02-18T17:33:17.6778300Z     POST #create
2024-02-18T17:33:17.6778955Z       with invalid params
2024-02-18T17:33:17.7356079Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-18T17:33:17.7750007Z         re-renders the 'new' template
2024-02-18T17:33:17.8161948Z         assigns a newly created but unsaved audit as @audit
2024-02-18T17:33:17.8162634Z       with valid params
2024-02-18T17:33:17.8568276Z         assigns a newly created audit as @audit
2024-02-18T17:33:17.8951010Z         redirects to the #show after created audit
2024-02-18T17:33:17.9356422Z         creates a new Audit
2024-02-18T17:33:17.9743045Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-18T17:33:18.0116626Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-18T17:33:18.0117748Z     GET #edit
2024-02-18T17:33:18.0714866Z       is successful if the status of audit is `in_progress`
2024-02-18T17:33:18.1371031Z       redirects to #index if the status of audit is not `in_progress`
2024-02-18T17:33:18.1371945Z     GET #index
2024-02-18T17:33:18.1907732Z       is successful
2024-02-18T17:33:18.1908547Z     DELETE #destroy
2024-02-18T17:33:18.1909513Z       with valid params
2024-02-18T17:33:18.2260801Z         can not destroy the audit if the audit's status is `finalized`
2024-02-18T17:33:18.2613128Z         destroys the audit if the audit's status is `confirms`
2024-02-18T17:33:18.2949791Z         destroys the audit if the audit's status is `in_progress`
2024-02-18T17:33:18.2950744Z     POST #finalize
2024-02-18T17:33:18.3641163Z       sets the finalize status and saves an event
2024-02-18T17:33:18.3641912Z 
2024-02-18T17:33:18.3642525Z /account_requests
2024-02-18T17:33:18.3643724Z   GET #received
2024-02-18T17:33:18.3644810Z     when given a invalid token
2024-02-18T17:33:18.3783188Z       should render a error that says that is code provided is invalid
2024-02-18T17:33:18.3784200Z     when given a valid token
2024-02-18T17:33:18.4050444Z       should render the received template
2024-02-18T17:33:18.4051075Z   GET #confirmation
2024-02-18T17:33:18.4052083Z     when given a token that has already been confirmed
2024-02-18T17:33:18.5955514Z       should render a error that says that is code provided is invalid
2024-02-18T17:33:18.5956338Z     when given a invalid token
2024-02-18T17:33:18.6017288Z       should render a error that says that is code provided is invalid
2024-02-18T17:33:18.6018310Z     when given a valid token
2024-02-18T17:33:18.6157127Z       should render the confirmation template
2024-02-18T17:33:18.6158148Z   GET #confirm
2024-02-18T17:33:18.6158871Z     when given a invalid token
2024-02-18T17:33:18.6214286Z       should render a error that says that is code provided is invalid
2024-02-18T17:33:18.6215412Z     when given a token that has already been confirmed
2024-02-18T17:33:18.8038950Z       should render a error that says that is code provided is invalid
2024-02-18T17:33:18.8039813Z     when given a valid token
2024-02-18T17:33:18.8248009Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-18T17:33:18.8249427Z   POST #create
2024-02-18T17:33:18.8250211Z     with valid parameters
2024-02-18T17:33:18.8364679Z       delivers the confirmation email via default queue
2024-02-18T17:33:18.8482344Z       redirects to the created account_request confirmation
2024-02-18T17:33:18.8598617Z       creates a new AccountRequest
2024-02-18T17:33:18.8599199Z     with invalid parameters
2024-02-18T17:33:18.8792606Z       renders a successful response (i.e. to display the 'new' template)
2024-02-18T17:33:18.8964064Z       does not create a new AccountRequest
2024-02-18T17:33:18.8964891Z   GET #new
2024-02-18T17:33:18.9068858Z     renders a successful response
2024-02-18T17:33:18.9069669Z 
2024-02-18T17:33:18.9069967Z /partners/children
2024-02-18T17:33:18.9070560Z   GET #index
2024-02-18T17:33:18.9983887Z     should render without any issues
2024-02-18T17:33:19.0584550Z     should export CSV
2024-02-18T17:33:19.0585538Z 
2024-02-18T17:33:19.0585894Z Purchases
2024-02-18T17:33:19.0587804Z   while signed in as a normal user
2024-02-18T17:33:19.0589222Z     When creating a new purchase
2024-02-18T17:33:25.9201302Z       should not display inactive storage locations in dropdown
2024-02-18T17:33:25.9201950Z       via manual entry
2024-02-18T17:33:26.9924194Z         User can create vendor from purchase
2024-02-18T17:33:28.0524606Z         User can create a purchase using dollars decimal amount
2024-02-18T17:33:29.0665867Z         Does not include inactive items in the line item fields
2024-02-18T17:33:30.2456050Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-18T17:33:31.3375031Z         User can create a purchase IN THE PAST
2024-02-18T17:33:31.3375813Z         when creating a purchase incorrectly
2024-02-18T17:33:32.1732932Z           should display failure with error messages
2024-02-18T17:33:33.1564222Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-18T17:33:33.1564995Z       via barcode entry
2024-02-18T17:33:34.3942990Z         a user can add items that do not yet have a barcode
2024-02-18T17:33:35.1258066Z         a user can add items via scanning them in by barcode
2024-02-18T17:33:36.0742181Z         User scan same barcode 2 times
2024-02-18T17:33:36.0742924Z       Editing purchase
2024-02-18T17:33:36.5831101Z         A user can see purchased_from value
2024-02-18T17:33:37.2384593Z         A user can view another organizations purchase
2024-02-18T17:33:37.2385670Z     When visiting the index page
2024-02-18T17:33:37.2386348Z       In the middle of the year
2024-02-18T17:33:37.9759079Z         User sees total purchases value
2024-02-18T17:33:38.7444525Z         User can click to the new purchase form
2024-02-18T17:33:39.4767564Z         User sees purchased date column
2024-02-18T17:33:39.4768468Z       When filtering on the index page
2024-02-18T17:33:40.2863894Z         User can filter the #index by vendor
2024-02-18T17:33:41.1030069Z         User can filter the #index by storage location
2024-02-18T17:33:41.1031012Z         behaves like Date Range Picker
2024-02-18T17:33:41.1032007Z           when choosing a date range that only includes the previous week
2024-02-18T17:33:42.0487923Z             shows only 1 record
2024-02-18T17:33:42.0488826Z           when choosing 'All Time'
2024-02-18T17:33:43.0054173Z             shows all the records
2024-02-18T17:33:43.0055189Z           when choosing 'Last Month'
2024-02-18T17:33:43.9627314Z             shows only 2 of the records
2024-02-18T17:33:43.9628454Z     When visiting an existing purchase
2024-02-18T17:33:44.4260412Z       does not allow deletion of a purchase
2024-02-18T17:33:44.4261410Z   while signed in as an organization admin
2024-02-18T17:33:45.2925689Z     allows deletion of a purchase
2024-02-18T17:33:45.2926330Z 
2024-02-18T17:33:45.2926535Z DonationSites
2024-02-18T17:33:45.2927699Z   while signed in
2024-02-18T17:33:45.2928490Z     GET #index
2024-02-18T17:33:45.2929552Z       csv
2024-02-18T17:33:45.3180990Z         is expected to be successful
2024-02-18T17:33:45.3181730Z       html
2024-02-18T17:33:45.3514587Z         is expected to be successful
2024-02-18T17:33:45.3515703Z 
2024-02-18T17:33:45.3515911Z Managing requests
2024-02-18T17:33:45.3517494Z   creating a individuals/family request
2024-02-18T17:33:45.3518515Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:33:45.3519544Z       WHEN they create a request inproperly
2024-02-18T17:33:46.2302734Z         should show an error message with the instructions
2024-02-18T17:33:46.2303920Z       WHEN they create a request properly
2024-02-18T17:33:46.2305265Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:33:48.3909441Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-18T17:33:48.3910857Z   creating a request
2024-02-18T17:33:48.3911766Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:33:48.3912944Z       WHEN they create a request properly
2024-02-18T17:33:48.3914252Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:33:50.6913363Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-18T17:33:50.6914690Z       WHEN they create a request with only a comment
2024-02-18T17:33:51.6932105Z         should be created without any issue
2024-02-18T17:33:51.6933142Z       WHEN they create a request inproperly by not inputting anything
2024-02-18T17:33:52.5942865Z         should show an error message with the instructions
2024-02-18T17:33:52.5945006Z 
2024-02-18T17:33:52.5945461Z Admin::Organizations
2024-02-18T17:33:52.5946873Z   When logged in as a non-admin user
2024-02-18T17:33:52.5948265Z     POST #create
2024-02-18T17:33:52.6125475Z       redirects
2024-02-18T17:33:52.6126100Z     GET #edit
2024-02-18T17:33:52.6255645Z       redirects
2024-02-18T17:33:52.6256252Z     GET #new
2024-02-18T17:33:52.6380780Z       redirects
2024-02-18T17:33:52.6381324Z     GET #index
2024-02-18T17:33:52.6497992Z       redirects
2024-02-18T17:33:52.6498876Z     PUT #update
2024-02-18T17:33:52.6618115Z       redirects
2024-02-18T17:33:52.6618798Z   When logged in as a super admin
2024-02-18T17:33:52.6620828Z     GET #edit
2024-02-18T17:33:52.8875201Z       returns http success
2024-02-18T17:33:52.8876088Z     GET #show
2024-02-18T17:33:53.1014263Z       returns http success
2024-02-18T17:33:53.1015174Z     PATCH #update
2024-02-18T17:33:53.1016052Z       with a valid update
2024-02-18T17:33:53.2969357Z         redirects to #index
2024-02-18T17:33:53.2970127Z       with an invalid update
2024-02-18T17:33:53.5088588Z         returns http success
2024-02-18T17:33:53.7250832Z         redirects to #edit with an error message
2024-02-18T17:33:53.7252013Z     GET #new
2024-02-18T17:33:53.7648762Z       returns http success
2024-02-18T17:33:53.7649880Z       when given a valid account request token in the query parameters
2024-02-18T17:33:53.8215119Z         should render new with pre populate input fields from the account_request
2024-02-18T17:33:53.8216703Z       when given a token that matches a account request that has already been processed
2024-02-18T17:33:54.0443204Z         should render new with a flash error message
2024-02-18T17:33:54.0444481Z     DELETE #destroy
2024-02-18T17:33:54.0445197Z       with a valid organization id
2024-02-18T17:33:54.5789795Z         redirects to #index
2024-02-18T17:33:54.5790450Z     GET #index
2024-02-18T17:33:54.6122824Z       returns http success
2024-02-18T17:33:54.6123555Z     DELETE #destroy
2024-02-18T17:33:54.9637973Z       redirects
2024-02-18T17:33:54.9638749Z     POST #create
2024-02-18T17:33:54.9639438Z       with invalid params
2024-02-18T17:33:55.0072609Z         does not create an organization and renders #create with an error message
2024-02-18T17:33:55.0073693Z       with valid params
2024-02-18T17:33:55.2919252Z         creates an organization and redirects to #index
2024-02-18T17:33:55.2919883Z     PUT #update
2024-02-18T17:33:55.3108512Z       redirect
2024-02-18T17:33:55.3109325Z 
2024-02-18T17:33:55.3109768Z User account management
2024-02-18T17:33:55.3111135Z   when not in staging
2024-02-18T17:33:56.0861365Z     should fail when the email is invalid
2024-02-18T17:33:57.0022083Z     should change an user name
2024-02-18T17:33:57.8777966Z     should change the email
2024-02-18T17:33:57.8778889Z   when in staging
2024-02-18T17:33:58.3273608Z     should display staging warning
2024-02-18T17:33:58.7914747Z     should not allow the user to change staging credentials
2024-02-18T17:33:58.7917922Z 
2024-02-18T17:33:58.7918270Z Dashboard
2024-02-18T17:33:58.7920711Z   With an existing essentials bank
2024-02-18T17:33:58.7922586Z     Purchases
2024-02-18T17:33:59.6963034Z       has a link to create a new purchase
2024-02-18T17:33:59.6964888Z       given 1 Purchase on 2022-02-17  (unless 'All Time'), 3 during 2022-02-18..2023-12-01, and 1 on 2023-12-02
2024-02-18T17:33:59.6966366Z         filtering to '' (February 18, 2022 - December 1, 2023)
2024-02-18T17:34:01.1852936Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:34:01.1854384Z       given 1 Purchase on 2024-02-16  (unless 'All Time'), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:34:01.1855675Z         filtering to 'Yesterday'
2024-02-18T17:34:02.7113715Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:34:02.7115454Z       given 1 Purchase on 2024-01-19  (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:02.7116823Z         filtering to 'Last 30 Days'
2024-02-18T17:34:04.2016544Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:34:04.2018179Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:04.2019573Z         filtering to 'Today'
2024-02-18T17:34:05.7207533Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:34:05.7209470Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:34:05.7210788Z         filtering to 'Last Month'
2024-02-18T17:34:07.1881875Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:34:07.1883711Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 1 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:07.1885297Z         filtering to 'Last 7 Days'
2024-02-18T17:34:08.5660954Z           shows correct 1 Recent Purchase link(s)
2024-02-18T17:34:08.5663038Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:34:08.5664923Z         filtering to 'This Month'
2024-02-18T17:34:10.0025675Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:34:10.0027294Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:34:10.0029284Z         filtering to 'This Year'
2024-02-18T17:34:11.4464879Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:34:11.4465803Z     Signage
2024-02-18T17:34:14.3337306Z       shows their organization name unless they have a logo set
2024-02-18T17:34:14.3338475Z     Distributions
2024-02-18T17:34:15.2436317Z       has a link to create a new distribution
2024-02-18T17:34:15.2438406Z       given 1 Distribution on 2024-01-19  (unless 'All Time'), 1 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:15.2439785Z         filtering to 'Last 30 Days'
2024-02-18T17:34:16.6688709Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:34:16.6690655Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:34:16.6691984Z         filtering to 'This Month'
2024-02-18T17:34:18.0556230Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:34:18.0557698Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:18.0558831Z         filtering to 'All Time'
2024-02-18T17:34:19.5546706Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:34:19.5548568Z       given 1 Distribution on 2022-02-17  (unless 'All Time'), 3 during 2022-02-18..2023-08-29, and 1 on 2023-08-30
2024-02-18T17:34:19.5549899Z         filtering to '' (February 18, 2022 - August 29, 2023)
2024-02-18T17:34:21.0183177Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:34:21.0184858Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:34:21.0185987Z         filtering to 'Last Month'
2024-02-18T17:34:22.4074435Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:34:22.4076358Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:22.4077256Z         filtering to 'Last 7 Days'
2024-02-18T17:34:23.7858381Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:34:23.7860427Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 4 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:23.7861688Z         filtering to 'Today'
2024-02-18T17:34:25.2555244Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:34:25.2557108Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:34:25.2558194Z         filtering to 'This Year'
2024-02-18T17:34:26.6492936Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:34:26.6495038Z       given 1 Distribution on 2024-02-16  (unless 'All Time'), 1 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:34:26.6496344Z         filtering to 'Yesterday'
2024-02-18T17:34:28.2042389Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:34:28.2043276Z     Inventory Totals
2024-02-18T17:34:28.2044467Z       Summary
2024-02-18T17:34:28.9175370Z         displays the on-hand totals
2024-02-18T17:34:28.9176394Z         when constrained to date range
2024-02-18T17:34:29.9491554Z           does not change
2024-02-18T17:34:29.9492317Z     Manufacturer Donations
2024-02-18T17:34:30.5351192Z       has a link to create a new donation
2024-02-18T17:34:30.5353019Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:30.5355216Z         filtering to 'Today'
2024-02-18T17:34:31.9169869Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-18T17:34:31.9172681Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 9 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:31.9173878Z         filtering to 'All Time'
2024-02-18T17:34:34.1186565Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:34:34.1189367Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 7 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:34:34.1190876Z         filtering to 'This Year'
2024-02-18T17:34:36.5961857Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-18T17:34:36.5964076Z       given 1 Manufacturer donating on 2024-01-19  (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:36.5965703Z         filtering to 'Last 30 Days'
2024-02-18T17:34:38.2210970Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-18T17:34:38.2212835Z       given 1 Manufacturer donating on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2023-11-13, and 1 on 2023-11-14
2024-02-18T17:34:38.2213975Z         filtering to '' (February 18, 2022 - November 13, 2023)
2024-02-18T17:34:40.0382865Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T17:34:40.0384525Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:40.0385333Z         filtering to 'Last 7 Days'
2024-02-18T17:34:41.4821682Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-18T17:34:41.4823698Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:34:41.4825244Z         filtering to 'This Month'
2024-02-18T17:34:43.2178990Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T17:34:43.2180964Z       given 1 Manufacturer donating on 2024-02-16  (unless 'All Time'), 8 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:34:43.2182490Z         filtering to 'Yesterday'
2024-02-18T17:34:45.6471908Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:34:45.6474083Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 7 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:34:45.6475385Z         filtering to 'Last Month'
2024-02-18T17:34:47.9382788Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-18T17:34:47.9383757Z     Product Drives
2024-02-18T17:34:48.5236413Z       has a widget for product drive summary data
2024-02-18T17:34:48.5237937Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:34:48.5239280Z         filtering to 'This Month'
2024-02-18T17:34:49.9804742Z           shows 2 Recent Donation link(s)
2024-02-18T17:34:51.3984249Z           shows the correct total money raised
2024-02-18T17:34:52.8459951Z           shows the correct total donations
2024-02-18T17:34:52.8466513Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:34:52.8467648Z         filtering to 'Last Month'
2024-02-18T17:34:54.4895868Z           shows the correct total donations
2024-02-18T17:34:55.9745779Z           shows 3 Recent Donation link(s)
2024-02-18T17:34:57.4560313Z           shows the correct total money raised
2024-02-18T17:34:57.4561316Z       Product drive behaviour with Mixed Donation types
2024-02-18T17:34:58.1837465Z         only shows product drive donations as product drive donations
2024-02-18T17:34:58.8847786Z         only counts product drive donations for product drive
2024-02-18T17:34:59.6264201Z         only counts product drive money raised
2024-02-18T17:34:59.6266006Z       given 1 Product Drive Donation on 2024-01-19 (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:34:59.6267394Z         filtering to 'Last 30 Days'
2024-02-18T17:35:01.1531120Z           shows the correct total donations
2024-02-18T17:35:02.6643750Z           shows the correct total money raised
2024-02-18T17:35:04.2130961Z           shows 3 Recent Donation link(s)
2024-02-18T17:35:04.2132934Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 1 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:35:04.2134271Z         filtering to 'Last 7 Days'
2024-02-18T17:35:05.5920569Z           shows the correct total donations
2024-02-18T17:35:06.9482531Z           shows the correct total money raised
2024-02-18T17:35:08.3264420Z           shows 1 Recent Donation link(s)
2024-02-18T17:35:08.3266331Z       given 1 Product Drive Donation on 2022-02-17 (unless 'All Time'), 0 during 2022-02-18..2023-12-22, and 1 on 2023-12-23
2024-02-18T17:35:08.3267632Z         filtering to '' (February 18, 2022 - December 22, 2023)
2024-02-18T17:35:09.6631769Z           shows the correct total money raised
2024-02-18T17:35:11.0291426Z           shows the correct total donations
2024-02-18T17:35:14.4076196Z           shows 0 Recent Donation link(s)
2024-02-18T17:35:14.4077714Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:35:14.4078645Z         filtering to 'Today'
2024-02-18T17:35:15.7366243Z           shows the correct total donations
2024-02-18T17:35:17.0450409Z           shows the correct total money raised
2024-02-18T17:35:20.3668422Z           shows 0 Recent Donation link(s)
2024-02-18T17:35:20.3670621Z       given 1 Product Drive Donation on 2024-02-16 (unless 'All Time'), 3 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:35:20.3671858Z         filtering to 'Yesterday'
2024-02-18T17:35:21.8239525Z           shows the correct total donations
2024-02-18T17:35:23.3038105Z           shows 3 Recent Donation link(s)
2024-02-18T17:35:24.7682637Z           shows the correct total money raised
2024-02-18T17:35:24.7684453Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:35:24.7685699Z         filtering to 'This Year'
2024-02-18T17:35:26.2359076Z           shows the correct total money raised
2024-02-18T17:35:27.7151688Z           shows the correct total donations
2024-02-18T17:35:29.1906166Z           shows 3 Recent Donation link(s)
2024-02-18T17:35:29.1907102Z     Donations
2024-02-18T17:35:30.0825212Z       has a link to create a new donation
2024-02-18T17:35:30.0826760Z       given 1 Donation on 2024-02-11 (only if a valid date), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:35:30.0827890Z         filtering to 'Last 7 Days'
2024-02-18T17:35:31.5167040Z           shows the correct total and 2 Recent Donation link(s)
2024-02-18T17:35:31.5169027Z       given 1 Donation on 2024-01-19 (only if a valid date), 1 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:35:31.5170316Z         filtering to 'Last 30 Days'
2024-02-18T17:35:32.8830052Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:35:32.8831890Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:35:32.8833168Z         filtering to 'This Month'
2024-02-18T17:35:34.3584111Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:35:34.3585970Z       given 1 Donation on 2022-02-17 (only if a valid date), 4 during 2022-02-18..2024-02-12, and 1 on 2024-02-13
2024-02-18T17:35:34.3587597Z         filtering to '' (February 18, 2022 - February 12, 2024)
2024-02-18T17:35:36.0772314Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:35:36.0774331Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:35:36.0775700Z         filtering to 'Last Month'
2024-02-18T17:35:37.5941901Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:35:37.5943676Z       given 1 Donation on 2024-02-17 (only if a valid date), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:35:37.5944864Z         filtering to 'Today'
2024-02-18T17:35:39.0171173Z           shows the correct total and 2 Recent Donation link(s)
2024-02-18T17:35:39.0172852Z       given 1 Donation on 2024-02-16 (only if a valid date), 0 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:35:39.0173722Z         filtering to 'Yesterday'
2024-02-18T17:35:42.3555838Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T17:35:42.3557353Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:35:42.3558274Z         filtering to 'This Year'
2024-02-18T17:35:45.7000512Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T17:35:45.7001756Z   With a new essentials bank
2024-02-18T17:36:13.6949924Z     displays the getting started guide until the steps are completed
2024-02-18T17:36:13.6951150Z 
2024-02-18T17:36:13.6953258Z StorageLocations
2024-02-18T17:36:13.6962644Z   While signed in
2024-02-18T17:36:13.6963309Z     GET #show
2024-02-18T17:36:13.6963954Z       html
2024-02-18T17:36:13.7672906Z         should return a correct response
2024-02-18T17:36:13.7673916Z         with version date set
2024-02-18T17:36:13.7674697Z           with a version found
2024-02-18T17:36:13.8504430Z             should show the version specified
2024-02-18T17:36:13.8505305Z           with no version found
2024-02-18T17:36:13.9242625Z             should show N/A
2024-02-18T17:36:13.9243501Z       csv
2024-02-18T17:36:13.9758386Z         should be successful
2024-02-18T17:36:13.9759684Z     POST #import_csv
2024-02-18T17:36:13.9760573Z       with a csv file
2024-02-18T17:36:13.9817407Z         invokes .import_csv
2024-02-18T17:36:14.0000676Z         presents a flash notice message
2024-02-18T17:36:14.0151820Z         redirects
2024-02-18T17:36:14.0152473Z       csv file with wrong headers
2024-02-18T17:36:14.0282229Z         redirects
2024-02-18T17:36:14.0406787Z         presents a flash error message
2024-02-18T17:36:14.0407367Z       without a csv file
2024-02-18T17:36:14.0525970Z         redirects to :index
2024-02-18T17:36:14.0646854Z         presents a flash error message
2024-02-18T17:36:14.0647618Z     PUT #reactivate
2024-02-18T17:36:14.0820046Z       undiscards
2024-02-18T17:36:14.0820751Z     Looking at a different organization
2024-02-18T17:36:14.2640302Z       redirects the user to the sign-in page for CRUD actions
2024-02-18T17:36:14.2640981Z     GET #destroy
2024-02-18T17:36:14.2935601Z       redirects to #index
2024-02-18T17:36:14.2936475Z     GET #edit
2024-02-18T17:36:14.8628757Z       returns http success
2024-02-18T17:36:14.8629801Z     GET #inventory
2024-02-18T17:36:14.8630367Z       when also including inactive items
2024-02-18T17:36:14.9285256Z         returns a collection that also includes items that have been deactivated
2024-02-18T17:36:14.9286192Z       when also including omitted items
2024-02-18T17:36:14.9774951Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-18T17:36:15.0399940Z         contains a collection of ducktyped entries that respond the same
2024-02-18T17:36:15.0401164Z       without any overrides
2024-02-18T17:36:15.0952506Z         returns a collection that only includes items at the storage location
2024-02-18T17:36:15.0953565Z     GET #new
2024-02-18T17:36:15.1285786Z       returns http success
2024-02-18T17:36:15.1286613Z     GET #index
2024-02-18T17:36:15.1287322Z       csv
2024-02-18T17:36:15.1481001Z         succeeds
2024-02-18T17:36:15.2475258Z         includes headers followed by alphabetized item names
2024-02-18T17:36:15.2476250Z       html
2024-02-18T17:36:15.2840947Z         succeeds
2024-02-18T17:36:15.2842007Z         with inactive locations
2024-02-18T17:36:15.3227022Z           does not includes the inactive location
2024-02-18T17:36:15.3228667Z           with include_inactive_locations
2024-02-18T17:36:15.3659199Z             includes the inactive location
2024-02-18T17:36:15.3660318Z     PUT #deactivate
2024-02-18T17:36:15.3873141Z       discards
2024-02-18T17:36:15.3873804Z       with inventory
2024-02-18T17:36:15.4361890Z         does not discard
2024-02-18T17:36:15.4362750Z   While not signed in
2024-02-18T17:36:15.4432615Z     redirects the user to the sign-in page for CRUD actions
2024-02-18T17:36:15.4433331Z 
2024-02-18T17:36:15.4435422Z Kit management
2024-02-18T17:36:16.3657099Z   can create a new kit as a user with the proper quantity
2024-02-18T17:36:16.9272868Z   should not display inactive storage locations under allocations
2024-02-18T17:36:18.4049791Z   can allocate and deallocate quantity per storage location from kit index
2024-02-18T17:36:18.4051495Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-18T17:36:19.5163316Z     will not change quantity amounts when allocating
2024-02-18T17:36:19.5164285Z   when there is no kit quantity
2024-02-18T17:36:20.6505378Z     will not change quantity amounts when deallocating
2024-02-18T17:36:20.6506166Z 
2024-02-18T17:36:20.6506413Z Vendor
2024-02-18T17:36:20.6508027Z   when creating a new vendor
2024-02-18T17:36:21.4454773Z     can create a new vendor instance as a user
2024-02-18T17:36:22.1739219Z     cannot add a new vendor instance with empty attributes
2024-02-18T17:36:22.1740154Z   When a user views the index page
2024-02-18T17:36:22.6813532Z     should have the vendor names in alphabetical order
2024-02-18T17:36:22.6814600Z   When vendor have purchases associated with them already
2024-02-18T17:36:23.2760193Z     can have existing vendors show in the #index with some summary stats
2024-02-18T17:36:23.8697843Z     can have a single vendor show semi-detailed stats about purchases
2024-02-18T17:36:23.8699007Z   when editing an existing vendor
2024-02-18T17:36:24.6270615Z     can update the contact info for a vendor as a user
2024-02-18T17:36:25.3965359Z     does not update a vendor with empty attributes
2024-02-18T17:36:25.3966303Z 
2024-02-18T17:36:25.3966618Z Admin Organization Management
2024-02-18T17:36:25.3969770Z   While signed in as an Administrative User (super admin)
2024-02-18T17:36:26.6849449Z     can view organization details
2024-02-18T17:36:27.7634792Z     filters by organizations by name in organizations index page
2024-02-18T17:36:29.6253437Z     creates a new organization
2024-02-18T17:36:29.6254602Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-18T17:36:31.5284310Z     creates a new organization
2024-02-18T17:36:31.5285065Z 
2024-02-18T17:36:31.5285313Z Organization management
2024-02-18T17:36:31.5505759Z   while signed in as an organization admin
2024-02-18T17:36:32.5286135Z     can deactivate a user in the organization
2024-02-18T17:36:33.0353044Z     can re-invite a user to an organization after 7 days
2024-02-18T17:36:33.9879732Z     can re-activate a user in the organization
2024-02-18T17:36:34.9481630Z     can add a new user to an organization
2024-02-18T17:36:35.4532750Z     can see 'Make user' button for admins
2024-02-18T17:36:35.4533402Z     Editing the organization
2024-02-18T17:36:36.9123128Z       can select and deselect Required Partner Fields
2024-02-18T17:36:37.9344228Z       can select if the org repackages essentials
2024-02-18T17:36:39.0813586Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-18T17:36:40.0543870Z       can select if the org distributes essentials monthly
2024-02-18T17:36:41.0598087Z       can enable if the org uses single step invite and approve partner process
2024-02-18T17:36:41.9009843Z       can set the NDBN Member ID
2024-02-18T17:36:42.8536534Z       can select if the org shows year-to-date values on the distribution printout
2024-02-18T17:36:43.8246364Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-18T17:36:44.6698570Z       can set a default storage location on the organization
2024-02-18T17:36:45.5151889Z       can set a reminder and a deadline day
2024-02-18T17:36:45.5152499Z     Viewing the organization
2024-02-18T17:36:46.0710628Z       can view organization details
2024-02-18T17:36:46.0711439Z   while signed in as a normal user
2024-02-18T17:36:46.5425990Z     cannot see 'Make user' button for admins
2024-02-18T17:36:46.9894691Z     can see summary details about the organization as a user
2024-02-18T17:36:47.0138205Z W, [2024-02-18T09:36:47.013570 #2364]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-18T17:36:47.0140573Z W, [2024-02-18T09:36:47.013621 #2364]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:36:47.0143705Z W, [2024-02-18T09:36:47.013644 #2364]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:36:47.0150512Z W, [2024-02-18T09:36:47.013673 #2364]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-18T17:36:47.0151756Z 
2024-02-18T17:36:47.0152179Z Finished in 3 minutes 31.5 seconds (files took 8.04 seconds to load)
2024-02-18T17:36:47.0153073Z 235 examples, 0 failures
2024-02-18T17:36:47.0153388Z 
2024-02-18T17:36:47.0153586Z Randomized with seed 43666
2024-02-18T17:36:47.0215048Z 
2024-02-18T17:36:47.5059830Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6405 LOC (59.64%) covered.
2024-02-18T17:36:48.0199570Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
