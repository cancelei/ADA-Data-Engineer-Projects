2024-03-07T01:54:30.0797082Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:54:30.0797976Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:54:30.0848243Z shell: /usr/bin/bash -e {0}
2024-03-07T01:54:30.0848752Z env:
2024-03-07T01:54:30.0849078Z   POSTGRES_HOST: localhost
2024-03-07T01:54:30.0849483Z   DATABASE_HOST: localhost
2024-03-07T01:54:30.0849922Z   PG_USERNAME: postgres
2024-03-07T01:54:30.0850259Z   PG_PASSWORD: password
2024-03-07T01:54:30.0850649Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:54:30.0851117Z   POSTGRES_PORT: 5432
2024-03-07T01:54:30.0851483Z   PGHOST: localhost
2024-03-07T01:54:30.0851819Z   PGUSER: postgres
2024-03-07T01:54:30.0852209Z   RAILS_ENV: test
2024-03-07T01:54:30.0852807Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:54:30.0853323Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-07T01:54:30.0853693Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-07T01:54:30.0854156Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:54:30.0854804Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:54:30.0855430Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:54:30.0856121Z ##[endgroup]
2024-03-07T01:54:36.2099973Z I, [2024-03-07T01:54:36.209578 #2362]  INFO -- : [knapsack_pro] Generating RSpec test examples JSON report for slow test files to prepare it to be split by test examples (by individual test cases). Thanks to that, a single slow test file can be split across parallel CI nodes. Analyzing 1 slow test files.
2024-03-07T01:54:44.9693193Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 2522 / 6650 LOC (37.92%) covered.
2024-03-07T01:54:49.2575649Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/storage_location_system_spec.rb" "spec/system/account_request_system_spec.rb" "spec/requests/product_drives_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:3:1:1]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:3]" "spec/requests/storage_locations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:7:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:7:1:2]" "spec/system/dashboard_system_spec.rb[1:2:2:1:2:1]" "spec/requests/audits_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/system/dashboard_system_spec.rb[1:2:6:1]" "spec/requests/kit_requests_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb"
2024-03-07T01:54:57.6475521Z Run options: include {:ids=>{"./spec/system/dashboard_system_spec.rb"=>["1:2:4:8:1:1", "1:2:1:1", "1:2:6:7:1:1", "1:2:6:3:1:1", "1:2:5:9:1:3", "1:2:7:6:1:1", "1:2:7:4:1:1", "1:2:5:2:1:1", "1:2:4:4:1:1", "1:2:5:7:1:2", "1:2:2:1:2:1", "1:2:5:10:1", "1:2:6:1"]}}
2024-03-07T01:54:57.6499455Z 
2024-03-07T01:54:57.6499895Z Randomized with seed 36896
2024-03-07T01:54:58.5868868Z 
2024-03-07T01:54:58.5869566Z Audits
2024-03-07T01:54:58.5870594Z   while signed in as an organization admin
2024-03-07T01:54:58.5871956Z     POST #create
2024-03-07T01:54:58.5873034Z       with invalid params
2024-03-07T01:54:58.6834752Z         re-renders the 'new' template
2024-03-07T01:54:58.7389889Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-03-07T01:54:58.7764704Z         assigns a newly created but unsaved audit as @audit
2024-03-07T01:54:58.7765707Z       with valid params
2024-03-07T01:54:58.8233641Z         redirects to the #show after created audit
2024-03-07T01:54:58.8612328Z         assigns a newly created audit as @audit
2024-03-07T01:54:58.8994085Z         creates a new Audit
2024-03-07T01:54:58.9361873Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-03-07T01:54:58.9734357Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-03-07T01:54:58.9735715Z     GET #index
2024-03-07T01:54:59.0331169Z       is successful
2024-03-07T01:54:59.0331717Z     POST #finalize
2024-03-07T01:54:59.1119334Z       sets the finalize status and saves an event
2024-03-07T01:54:59.1119981Z     GET #edit
2024-03-07T01:54:59.1734762Z       redirects to #index if the status of audit is not `in_progress`
2024-03-07T01:54:59.2326436Z       is successful if the status of audit is `in_progress`
2024-03-07T01:54:59.2327414Z     DELETE #destroy
2024-03-07T01:54:59.2328250Z       with valid params
2024-03-07T01:54:59.2679266Z         destroys the audit if the audit's status is `in_progress`
2024-03-07T01:54:59.3006556Z         can not destroy the audit if the audit's status is `finalized`
2024-03-07T01:54:59.3351557Z         destroys the audit if the audit's status is `confirms`
2024-03-07T01:54:59.3352486Z     GET #new
2024-03-07T01:54:59.3716908Z       is successful
2024-03-07T01:54:59.3717549Z     GET #show
2024-03-07T01:54:59.4208585Z       is successful
2024-03-07T01:54:59.4209249Z 
2024-03-07T01:54:59.4209674Z Storage Locations
2024-03-07T01:54:59.4211726Z   when viewing the index
2024-03-07T01:55:10.4857074Z     shows totals that are the sum totals of all inputs
2024-03-07T01:55:11.3725224Z     Allows user to filter discarded storage locations
2024-03-07T01:55:11.9645220Z     Filter list presented to user is in alphabetical order by item name
2024-03-07T01:55:12.7256877Z     Stops a user from deactivating storage locations with inventory
2024-03-07T01:55:14.1596764Z     Allows user to deactivate and reactivate storage locations
2024-03-07T01:55:15.3754706Z     User can filter the #index by those that contain certain items
2024-03-07T01:55:15.3755788Z   when creating a new storage location
2024-03-07T01:55:16.5040118Z     User creates a new storage location with empty attributes
2024-03-07T01:55:17.3972013Z     User creates a new storage location
2024-03-07T01:55:18.2237923Z     User creates a new storage location with optional fields
2024-03-07T01:55:18.2238571Z   when editing an existing storage location
2024-03-07T01:55:19.0193514Z     User updates an existing storage location with empty name
2024-03-07T01:55:19.7897070Z     User updates an existing storage location
2024-03-07T01:55:19.7898065Z   when viewing an existing storage location
2024-03-07T01:55:20.4195603Z     Items in (adjustments)
2024-03-07T01:55:21.0889761Z     Items out (distributions)
2024-03-07T01:55:21.0890375Z 
2024-03-07T01:55:21.0892473Z Admin::BaseItems
2024-03-07T01:55:21.0901362Z   When logged in as an organization admin
2024-03-07T01:55:21.0902266Z     PUT #update
2024-03-07T01:55:21.1050604Z       redirect
2024-03-07T01:55:21.1051248Z     GET #index
2024-03-07T01:55:21.1179234Z       returns http success
2024-03-07T01:55:21.1180063Z     GET #new
2024-03-07T01:55:21.1304319Z       returns http success
2024-03-07T01:55:21.1305004Z     POST #create
2024-03-07T01:55:21.1450893Z       redirects
2024-03-07T01:55:21.1451517Z     GET #show
2024-03-07T01:55:21.1572279Z       returns http success
2024-03-07T01:55:21.1573072Z     DELETE #destroy
2024-03-07T01:55:21.1692404Z       redirects
2024-03-07T01:55:21.1693152Z     GET #edit
2024-03-07T01:55:21.1814704Z       returns http success
2024-03-07T01:55:21.1816660Z 
2024-03-07T01:55:21.1817059Z Purchases
2024-03-07T01:55:21.1818317Z   While signed in as a user >
2024-03-07T01:55:21.1819561Z     POST#create
2024-03-07T01:55:21.1820418Z       on success
2024-03-07T01:55:21.2242394Z         accepts :amount_spent_in_cents with dollar signs, commas, and periods
2024-03-07T01:55:21.2648172Z         redirects to GET#edit
2024-03-07T01:55:21.3241951Z         storage location defaults to organizations storage location
2024-03-07T01:55:21.3243004Z       on failure
2024-03-07T01:55:21.3709524Z         renders GET#new with error
2024-03-07T01:55:21.3710884Z     GET #show
2024-03-07T01:55:21.4081610Z       returns http success
2024-03-07T01:55:21.4082586Z     GET #edit
2024-03-07T01:55:21.4583468Z       storage location is correct
2024-03-07T01:55:21.5083850Z       returns http success
2024-03-07T01:55:21.5084781Z       when no audit has been performed
2024-03-07T01:55:21.6029568Z         does not show a warning
2024-03-07T01:55:21.6030828Z       when an finalized audit has been performed on the purchased items
2024-03-07T01:55:21.7227956Z         shows a warning
2024-03-07T01:55:21.7229248Z       when non-finalized audit has been performed on the purchased items
2024-03-07T01:55:21.8407249Z         does not show a warning
2024-03-07T01:55:21.8408372Z     DELETE #destroy
2024-03-07T01:55:21.8623906Z       does not delete a purchase
2024-03-07T01:55:21.8823778Z       redirects to the dashboard
2024-03-07T01:55:21.8824703Z     GET #new
2024-03-07T01:55:21.9205929Z       is expected to be successful
2024-03-07T01:55:21.9206626Z     PUT#update
2024-03-07T01:55:22.0328933Z       updates storage quantity correctly
2024-03-07T01:55:22.0684385Z       redirects to index after update
2024-03-07T01:55:22.0685247Z       when changing storage location
2024-03-07T01:55:22.1674243Z         updates storage quantity correctly
2024-03-07T01:55:22.2775104Z         rollsback updates if quantity would go below 0
2024-03-07T01:55:22.2776062Z       when removing a line item
2024-03-07T01:55:22.3746284Z         updates storage invetory item quantity correctly
2024-03-07T01:55:22.3747254Z     GET #index
2024-03-07T01:55:22.3748072Z       html
2024-03-07T01:55:22.4207841Z         is expected to be successful
2024-03-07T01:55:22.4208837Z       csv
2024-03-07T01:55:22.4489647Z         is expected to be successful
2024-03-07T01:55:22.4490556Z   While signed in as an organizational admin
2024-03-07T01:55:22.4491498Z     DELETE #destroy
2024-03-07T01:55:22.5337185Z       decreases storage location inventory
2024-03-07T01:55:22.5646702Z       redirects to the index
2024-03-07T01:55:22.5956558Z       displays the proper flash notice
2024-03-07T01:55:22.6270516Z       deletes a purchase
2024-03-07T01:55:22.6271378Z 
2024-03-07T01:55:22.6271802Z /partners/distributions
2024-03-07T01:55:22.6273228Z   GET #index
2024-03-07T01:55:22.6740401Z     should render without any issues
2024-03-07T01:55:22.6741129Z   GET #print
2024-03-07T01:55:22.7927350Z     returns http success
2024-03-07T01:55:22.7928539Z     with non-UTF8 characters
2024-03-07T01:55:22.9162305Z       returns http success
2024-03-07T01:55:22.9162924Z 
2024-03-07T01:55:22.9163965Z Account request flow
2024-03-07T01:55:22.9164774Z   when in staging
2024-03-07T01:55:23.4483028Z     should prompt prospective users to request an account on the live app
2024-03-07T01:55:23.4484296Z   when not in staging
2024-03-07T01:55:25.7140198Z     should allow prospective users to request an account via a form. And that request form data gets used to create an organization (FAILED - 1)
2024-03-07T01:55:25.7144351Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-allow-prospective-users-to-request-an-account-via-a-form.-And-that-request-form-data-gets-used-to-create-an-organization_2024-03-06-17-55-25.557.html[0m
2024-03-07T01:55:25.7149073Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_should-allow-prospective-users-to-request-an-account-via-a-form.-And-that-request-form-data-gets-used-to-create-an-organization_2024-03-06-17-55-25.557.png[0m
2024-03-07T01:55:25.7152574Z     with a partner agency
2024-03-07T01:55:26.3031852Z       reveals text that directs current partner to human essentials sign in page
2024-03-07T01:55:26.3032911Z     renders the #new template with the form and errors visible
2024-03-07T01:55:27.1991918Z       shows create bank form info and errors when required fields are missing
2024-03-07T01:55:27.1993279Z 
2024-03-07T01:55:27.1993565Z Distributions
2024-03-07T01:55:27.9871494Z   errors if user does not fill storage_location
2024-03-07T01:55:29.9012020Z   allows completion of corrected distribution with depleted inventory item
2024-03-07T01:55:29.9013196Z   With an existing distribution
2024-03-07T01:55:31.0618798Z     the user can reclaim it
2024-03-07T01:55:32.6471272Z     sends an email if reminders are enabled
2024-03-07T01:55:34.0001082Z     allows the user can change the issued_at date
2024-03-07T01:55:35.4345352Z     the user can make changes
2024-03-07T01:55:36.7158783Z     disallows the user from changing the quantity above the inventory quantity
2024-03-07T01:55:36.7160019Z     when one of the items has been 'deleted'
2024-03-07T01:55:37.6623491Z       the user can still reclaim it
2024-03-07T01:55:37.6624747Z     when delivery method is shipped and shipping cost is none negative
2024-03-07T01:55:38.9600043Z       should update distribution and display shipping_cost field
2024-03-07T01:55:38.9601073Z     when delivery method is not shipped
2024-03-07T01:55:41.8754334Z       should not display shipping_cost field
2024-03-07T01:55:41.8755288Z   When attempting to edit a distribution
2024-03-07T01:55:41.8756798Z     after the distribution issued_at has passed or it has been marked complete
2024-03-07T01:55:42.8471919Z       cannot be accessed directly
2024-03-07T01:55:43.5420455Z       does not contain a Edit button
2024-03-07T01:55:43.5421071Z     when logged as Admin
2024-03-07T01:55:44.5187877Z       can click on Edit button and a warning appears
2024-03-07T01:55:45.1383820Z       can be accessed directly
2024-03-07T01:55:45.1384574Z   When creating a new distribution manually
2024-03-07T01:55:45.8428575Z     Displays a complete form after validation errors
2024-03-07T01:55:46.4322329Z     should not display inactive storage locations in dropdown
2024-03-07T01:55:46.4323213Z     when the delivery_method is not shipped
2024-03-07T01:55:49.3130701Z       Allows a distribution to be created and shipping cost field not visible
2024-03-07T01:55:49.3131776Z     when the quantity is lower than the on hand minimum quantity
2024-03-07T01:55:50.4351522Z       should display an error
2024-03-07T01:55:50.4352612Z     when there is insufficient inventory to fulfill the Distribution
2024-03-07T01:55:51.3466510Z       gracefully handles the error
2024-03-07T01:55:51.3467615Z     when the quantity is lower than the on hand recommended quantity
2024-03-07T01:55:52.1626490Z       should display an alert
2024-03-07T01:55:52.1627408Z     when there is a default storage location
2024-03-07T01:55:52.6883401Z       automatically selects the default storage location
2024-03-07T01:55:52.6884929Z     when the delivery_method is shipped and shipping cost is none-negative
2024-03-07T01:55:53.5795731Z       Allows a distribution to be created
2024-03-07T01:55:53.5796638Z   via barcode entry
2024-03-07T01:55:55.0936802Z     a user can add items that do not yet have a barcode
2024-03-07T01:55:55.8413863Z     allows users to add items via scanning them in by barcode
2024-03-07T01:55:55.8414602Z   When creating a distribution and items have value
2024-03-07T01:55:56.6273952Z     the user sees total value on index page
2024-03-07T01:55:57.4046977Z     the user sees value in row on index page
2024-03-07T01:55:58.4241449Z     the user sees total value on show page
2024-03-07T01:55:59.4204123Z     the user sees value per item on show page
2024-03-07T01:55:59.4204943Z   When creating a distribution from a request
2024-03-07T01:56:00.7778105Z     maintains the connection with the request even when there are initial errors
2024-03-07T01:56:01.9280361Z     sets the distribution id and fulfilled status on the request
2024-03-07T01:56:01.9281544Z   when filtering on the index page
2024-03-07T01:56:02.8546892Z     filters by partner
2024-03-07T01:56:04.0940735Z     filters by item id
2024-03-07T01:56:04.6111200Z     should not display inactive storage locations in dropdown
2024-03-07T01:56:05.5332455Z     filters by state
2024-03-07T01:56:06.9135381Z     filters by item category id
2024-03-07T01:56:06.9136236Z     behaves like Date Range Picker
2024-03-07T01:56:06.9137070Z       when choosing 'Last Month'
2024-03-07T01:56:07.9740061Z         shows only 2 of the records
2024-03-07T01:56:07.9741243Z       when choosing a date range that only includes the previous week
2024-03-07T01:56:09.0429028Z         shows only 1 record
2024-03-07T01:56:09.0430102Z       when choosing 'All Time'
2024-03-07T01:56:10.1160001Z         shows all the records
2024-03-07T01:56:10.1161090Z   When creating a distribution from a donation
2024-03-07T01:56:11.3080092Z     completes successfully
2024-03-07T01:56:11.3081040Z     when editing that distribution
2024-03-07T01:56:13.4571682Z       User creates a distribution from a donation then tries to make the quantity too big
2024-03-07T01:56:15.8079485Z       User creates a distribution from a donation then edits it
2024-03-07T01:56:18.8362113Z       User creates duplicate line items
2024-03-07T01:56:18.8363233Z   When showing a individual distribution
2024-03-07T01:56:19.4161642Z     Show partner name in title
2024-03-07T01:56:19.4162479Z   When going to the Pick Ups & Deliveries page
2024-03-07T01:56:20.1095434Z     appears distribution in calendar with correct time & timezone
2024-03-07T01:56:20.1096352Z 
2024-03-07T01:56:20.1106385Z ProductDrives
2024-03-07T01:56:20.1107035Z   While signed in >
2024-03-07T01:56:20.1107566Z     GET #index
2024-03-07T01:56:20.3222948Z       returns http success
2024-03-07T01:56:20.7245985Z       displays only product drives that belong to organization and that match drive name and date range
2024-03-07T01:56:20.7247545Z       csv
2024-03-07T01:56:20.9375772Z         returns ONLY the product drives within a selected date range (inclusive)
2024-03-07T01:56:21.3120325Z         returns ONLY the associated product drives
2024-03-07T01:56:21.5503227Z         only counts items within the selected date range
2024-03-07T01:56:21.7691743Z         returns the quantity of all organization's items
2024-03-07T01:56:21.9630069Z         is successful
2024-03-07T01:56:21.9631081Z     PUT#update
2024-03-07T01:56:22.1587504Z       returns redirect http status
2024-03-07T01:56:22.1588346Z     GET #show
2024-03-07T01:56:22.4287361Z       shows appropriate number on the UI
2024-03-07T01:56:22.6411517Z       returns http success
2024-03-07T01:56:22.6412685Z     DELETE #destroy
2024-03-07T01:56:22.8346608Z       redirects to the index
2024-03-07T01:56:22.8347368Z     GET #edit
2024-03-07T01:56:23.0415152Z       returns http success
2024-03-07T01:56:23.0415892Z     GET #new
2024-03-07T01:56:23.2484369Z       returns http success
2024-03-07T01:56:23.2485309Z     POST#create
2024-03-07T01:56:23.4472195Z       returns redirect http status
2024-03-07T01:56:23.4472867Z   while not signed in
2024-03-07T01:56:23.6231488Z     is unsuccessful
2024-03-07T01:56:23.6232355Z 
2024-03-07T01:56:23.6232563Z /kits
2024-03-07T01:56:23.6233239Z   while signed in
2024-03-07T01:56:23.6741639Z     PUT #deactivate
2024-03-07T01:56:23.6742274Z     GET #index
2024-03-07T01:56:23.7520577Z       should include deactivate
2024-03-07T01:56:23.7521647Z       when show inactive is checked
2024-03-07T01:56:23.8255950Z         should show the inactive kit
2024-03-07T01:56:23.8256713Z       when it cannot be deactivated
2024-03-07T01:56:23.9264343Z         should disable the button
2024-03-07T01:56:23.9265137Z       when it is already deactivated
2024-03-07T01:56:24.0066937Z         should show reactivate button
2024-03-07T01:56:24.0067756Z     PUT #reactivate
2024-03-07T01:56:24.0503989Z       cannot reactivate if it has an inactive item
2024-03-07T01:56:24.0999285Z       should successfully reactivate
2024-03-07T01:56:24.1000317Z 
2024-03-07T01:56:24.1000585Z Admin::Partners
2024-03-07T01:56:24.1003335Z   When logged in as a super admin
2024-03-07T01:56:24.1004690Z     GET #index
2024-03-07T01:56:24.1180772Z       returns http success (FAILED - 2)
2024-03-07T01:56:24.1181807Z     PUT #update
2024-03-07T01:56:24.1182402Z       successful save
2024-03-07T01:56:24.1524102Z         redirects
2024-03-07T01:56:24.1874064Z         updates partner
2024-03-07T01:56:24.1874800Z       unsuccessful save due to empty params
2024-03-07T01:56:24.2258840Z         renders #edit template with error message (FAILED - 3)
2024-03-07T01:56:24.2259959Z     GET #show
2024-03-07T01:56:24.2573786Z       returns http success (FAILED - 4)
2024-03-07T01:56:24.2574767Z     GET #edit
2024-03-07T01:56:24.2899440Z       returns http success (FAILED - 5)
2024-03-07T01:56:24.2901234Z 
2024-03-07T01:56:24.2901695Z StorageLocations
2024-03-07T01:56:24.2902938Z   While not signed in
2024-03-07T01:56:24.2961667Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:56:24.2962550Z   While signed in
2024-03-07T01:56:24.2963342Z     GET #destroy
2024-03-07T01:56:24.3210575Z       redirects to #index
2024-03-07T01:56:24.3211520Z     GET #inventory
2024-03-07T01:56:24.3212353Z       when also including inactive items
2024-03-07T01:56:24.3812855Z         returns a collection that also includes items that have been deactivated
2024-03-07T01:56:24.3813622Z       without any overrides
2024-03-07T01:56:24.4359731Z         returns a collection that only includes items at the storage location
2024-03-07T01:56:24.4361059Z       when also including omitted items
2024-03-07T01:56:24.4812736Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-07T01:56:24.5259018Z         contains a collection of ducktyped entries that respond the same
2024-03-07T01:56:24.5260368Z     GET #edit
2024-03-07T01:56:24.5593830Z       returns http success
2024-03-07T01:56:24.5594655Z     GET #show
2024-03-07T01:56:24.5595557Z       html
2024-03-07T01:56:24.6198275Z         should return a correct response
2024-03-07T01:56:24.6199483Z         with version date set
2024-03-07T01:56:24.6200382Z           with a version found
2024-03-07T01:56:24.6987784Z             should show the version specified
2024-03-07T01:56:24.6988940Z           with no version found
2024-03-07T01:56:24.7682618Z             should show N/A
2024-03-07T01:56:24.7683515Z       csv
2024-03-07T01:56:24.8111402Z         should be successful
2024-03-07T01:56:24.8112183Z     Looking at a different organization
2024-03-07T01:56:24.9900397Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:56:24.9901081Z     PUT #deactivate
2024-03-07T01:56:25.0086127Z       discards
2024-03-07T01:56:25.0086758Z       with inventory
2024-03-07T01:56:25.0481372Z         does not discard
2024-03-07T01:56:25.0482160Z     GET #new
2024-03-07T01:56:25.0781483Z       returns http success
2024-03-07T01:56:25.0782224Z     GET #index
2024-03-07T01:56:25.0783011Z       csv
2024-03-07T01:56:25.0976812Z         succeeds
2024-03-07T01:56:25.1909367Z         includes headers followed by alphabetized item names
2024-03-07T01:56:25.1910340Z       html
2024-03-07T01:56:25.2254237Z         succeeds
2024-03-07T01:56:25.2255125Z         with inactive locations
2024-03-07T01:56:25.2600402Z           does not includes the inactive location
2024-03-07T01:56:25.2601346Z           with include_inactive_locations
2024-03-07T01:56:25.3093339Z             includes the inactive location
2024-03-07T01:56:25.3094305Z     PUT #reactivate
2024-03-07T01:56:25.3267265Z       undiscards
2024-03-07T01:56:25.3268159Z     POST #import_csv
2024-03-07T01:56:25.3268777Z       with a csv file
2024-03-07T01:56:25.3458194Z         presents a flash notice message
2024-03-07T01:56:25.3611652Z         redirects
2024-03-07T01:56:25.3663016Z         invokes .import_csv
2024-03-07T01:56:25.3663757Z       csv file with wrong headers
2024-03-07T01:56:25.3790825Z         redirects
2024-03-07T01:56:25.3912284Z         presents a flash error message
2024-03-07T01:56:25.3912824Z       without a csv file
2024-03-07T01:56:25.4027932Z         presents a flash error message
2024-03-07T01:56:25.4139290Z         redirects to :index
2024-03-07T01:56:25.4142899Z 
2024-03-07T01:56:25.4143193Z Dashboard
2024-03-07T01:56:25.4144564Z   With an existing essentials bank
2024-03-07T01:56:25.4146363Z     Distributions
2024-03-07T01:56:25.4150649Z       given 1 Distribution on 2024-02-28  (unless 'All Time'), 0 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:56:25.4151710Z         filtering to 'Last 7 Days'
2024-03-07T01:56:28.8119195Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-07T01:56:28.8121263Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-07T01:56:28.8122594Z         filtering to 'This Month'
2024-03-07T01:56:30.2387616Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-07T01:56:30.2388696Z     Purchases
2024-03-07T01:56:30.2391980Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-07T01:56:30.2393389Z         filtering to 'This Year'
2024-03-07T01:56:33.5417594Z           shows correct 0 Recent Purchase link(s)
2024-03-07T01:56:33.5419779Z       given 1 Purchase on 2024-02-28  (unless 'All Time'), 0 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:56:33.5421154Z         filtering to 'Last 7 Days'
2024-03-07T01:56:36.8406844Z           shows correct 0 Recent Purchase link(s)
2024-03-07T01:56:36.8409055Z     Signage
2024-03-07T01:56:39.6981137Z       shows their organization name unless they have a logo set
2024-03-07T01:56:39.6984106Z     Inventory Totals
2024-03-07T01:56:39.6984921Z       Summary
2024-03-07T01:56:39.6986014Z         when constrained to date range
2024-03-07T01:56:40.7055684Z           does not change
2024-03-07T01:56:40.7056675Z     Manufacturer Donations
2024-03-07T01:56:41.2715831Z       has a link to create a new donation
2024-03-07T01:56:41.2718806Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:56:41.2720199Z         filtering to 'Last Month'
2024-03-07T01:56:42.9332519Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-07T01:56:42.9334873Z       given 1 Manufacturer donating on 2024-03-04  (unless 'All Time'), 2 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-07T01:56:42.9336271Z         filtering to 'Yesterday'
2024-03-07T01:56:44.4298415Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-07T01:56:44.4299598Z     Product Drives
2024-03-07T01:56:44.4302527Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-07T01:56:44.4303480Z         filtering to 'Last Month'
2024-03-07T01:56:45.8606298Z           shows the correct total money raised
2024-03-07T01:56:45.8610749Z       given 1 Product Drive Donation on 2022-03-05 (unless 'All Time'), 2 during 2022-03-06..2024-02-16, and 1 on 2024-02-17
2024-03-07T01:56:45.8612396Z         filtering to '' (March 6, 2022 - February 16, 2024)
2024-03-07T01:56:47.2264702Z           shows 2 Recent Donation link(s)
2024-03-07T01:56:47.2271024Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 4 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-07T01:56:47.2272481Z         filtering to 'Today'
2024-03-07T01:56:48.7123322Z           shows the correct total donations
2024-03-07T01:56:48.7130464Z       Product drive behaviour with Mixed Donation types
2024-03-07T01:56:49.4340437Z         only counts product drive donations for product drive
2024-03-07T01:56:49.8997127Z 
2024-03-07T01:56:49.8997832Z Failures:
2024-03-07T01:56:49.8998218Z 
2024-03-07T01:56:49.8999146Z   1) Account request flow when not in staging should allow prospective users to request an account via a form. And that request form data gets used to create an organization
2024-03-07T01:56:49.9001522Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.9002330Z 
2024-03-07T01:56:49.9002528Z      ActionView::Template::Error:
2024-03-07T01:56:49.9003603Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000392b0>
2024-03-07T01:56:49.9004309Z 
2024-03-07T01:56:49.9006492Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_account_request_flow_when_not_in_staging_should_allow_prospective_users_to_request_an_account_via_a_form__and_that_request_form_data_gets_used_to_create_an_organization_233.png
2024-03-07T01:56:49.9008454Z 
2024-03-07T01:56:49.9008464Z 
2024-03-07T01:56:49.9009051Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9010377Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___3522145536900263474_102120'
2024-03-07T01:56:49.9011389Z      # ------------------
2024-03-07T01:56:49.9011812Z      # --- Caused by: ---
2024-03-07T01:56:49.9012303Z      # NameError:
2024-03-07T01:56:49.9013162Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x000000000392b0>
2024-03-07T01:56:49.9014370Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9015121Z 
2024-03-07T01:56:49.9015554Z   2) Admin::Partners When logged in as a super admin GET #index returns http success
2024-03-07T01:56:49.9016622Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.9017204Z 
2024-03-07T01:56:49.9017349Z      ActionView::Template::Error:
2024-03-07T01:56:49.9018235Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e0c0>
2024-03-07T01:56:49.9019312Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9020415Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___3522145536900263474_102120'
2024-03-07T01:56:49.9021465Z      # ./spec/requests/admin/partners_requests_spec.rb:13:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.9022158Z      # ------------------
2024-03-07T01:56:49.9022635Z      # --- Caused by: ---
2024-03-07T01:56:49.9023007Z      # NameError:
2024-03-07T01:56:49.9023754Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e0c0>
2024-03-07T01:56:49.9024840Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9025509Z 
2024-03-07T01:56:49.9026107Z   3) Admin::Partners When logged in as a super admin PUT #update unsuccessful save due to empty params renders #edit template with error message
2024-03-07T01:56:49.9027275Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.9027870Z 
2024-03-07T01:56:49.9028010Z      ActionView::Template::Error:
2024-03-07T01:56:49.9028827Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e250>
2024-03-07T01:56:49.9029887Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9031073Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___3522145536900263474_102120'
2024-03-07T01:56:49.9031936Z      # ./app/controllers/admin/partners_controller.rb:20:in `update'
2024-03-07T01:56:49.9033130Z      # ./spec/requests/admin/partners_requests_spec.rb:47:in `block (5 levels) in <top (required)>'
2024-03-07T01:56:49.9034024Z      # ./spec/requests/admin/partners_requests_spec.rb:50:in `block (5 levels) in <top (required)>'
2024-03-07T01:56:49.9034702Z      # ------------------
2024-03-07T01:56:49.9035174Z      # --- Caused by: ---
2024-03-07T01:56:49.9035493Z      # NameError:
2024-03-07T01:56:49.9036326Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e250>
2024-03-07T01:56:49.9037447Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9038097Z 
2024-03-07T01:56:49.9038413Z   4) Admin::Partners When logged in as a super admin GET #show returns http success
2024-03-07T01:56:49.9039342Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.9039955Z 
2024-03-07T01:56:49.9040102Z      ActionView::Template::Error:
2024-03-07T01:56:49.9040924Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e2c8>
2024-03-07T01:56:49.9042043Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9043142Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___3522145536900263474_102120'
2024-03-07T01:56:49.9044141Z      # ./spec/requests/admin/partners_requests_spec.rb:20:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.9044879Z      # ------------------
2024-03-07T01:56:49.9045229Z      # --- Caused by: ---
2024-03-07T01:56:49.9045658Z      # NameError:
2024-03-07T01:56:49.9046468Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e2c8>
2024-03-07T01:56:49.9047536Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9048462Z 
2024-03-07T01:56:49.9048780Z   5) Admin::Partners When logged in as a super admin GET #edit returns http success
2024-03-07T01:56:49.9049793Z      Failure/Error: <li class="nav-item <%= 'active' if current_page?(new_admin_barcode_item_path) %>">
2024-03-07T01:56:49.9050307Z 
2024-03-07T01:56:49.9050485Z      ActionView::Template::Error:
2024-03-07T01:56:49.9051355Z        undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e318>
2024-03-07T01:56:49.9052430Z      # ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9053523Z      # ./app/views/layouts/application.html.erb:80:in `_app_views_layouts_application_html_erb___3522145536900263474_102120'
2024-03-07T01:56:49.9054571Z      # ./spec/requests/admin/partners_requests_spec.rb:27:in `block (4 levels) in <top (required)>'
2024-03-07T01:56:49.9055243Z      # ------------------
2024-03-07T01:56:49.9055692Z      # --- Caused by: ---
2024-03-07T01:56:49.9056111Z      # NameError:
2024-03-07T01:56:49.9056871Z      #   undefined local variable or method `new_admin_barcode_item_path' for #<ActionView::Base:0x0000000004e318>
2024-03-07T01:56:49.9057928Z      #   ./app/views/layouts/_lte_admin_sidebar.html.erb:17:in `_app_views_layouts__lte_admin_sidebar_html_erb__4474499662174293354_117060'
2024-03-07T01:56:49.9058652Z 
2024-03-07T01:56:49.9058913Z Finished in 1 minute 52.23 seconds (files took 8.16 seconds to load)
2024-03-07T01:56:49.9059460Z 181 examples, 5 failures
2024-03-07T01:56:49.9059667Z 
2024-03-07T01:56:49.9059885Z Failed examples:
2024-03-07T01:56:49.9060085Z 
2024-03-07T01:56:49.9061025Z rspec ./spec/system/account_request_system_spec.rb:17 # Account request flow when not in staging should allow prospective users to request an account via a form. And that request form data gets used to create an organization
2024-03-07T01:56:49.9062955Z rspec ./spec/requests/admin/partners_requests_spec.rb:12 # Admin::Partners When logged in as a super admin GET #index returns http success
2024-03-07T01:56:49.9064550Z rspec ./spec/requests/admin/partners_requests_spec.rb:49 # Admin::Partners When logged in as a super admin PUT #update unsuccessful save due to empty params renders #edit template with error message
2024-03-07T01:56:49.9066086Z rspec ./spec/requests/admin/partners_requests_spec.rb:19 # Admin::Partners When logged in as a super admin GET #show returns http success
2024-03-07T01:56:49.9067346Z rspec ./spec/requests/admin/partners_requests_spec.rb:26 # Admin::Partners When logged in as a super admin GET #edit returns http success
2024-03-07T01:56:49.9068115Z 
2024-03-07T01:56:49.9068248Z Randomized with seed 36896
2024-03-07T01:56:49.9068503Z 
2024-03-07T01:56:50.1964938Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:56:50.1967383Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3844 / 6435 LOC (59.74%) covered.
2024-03-07T01:56:50.3182127Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/system/distribution_system_spec.rb" "spec/system/storage_location_system_spec.rb" "spec/system/account_request_system_spec.rb" "spec/requests/product_drives_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:4:8:1:1]" "spec/system/dashboard_system_spec.rb[1:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:7:1:1]" "spec/system/dashboard_system_spec.rb[1:2:6:3:1:1]" "spec/requests/purchases_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:9:1:3]" "spec/requests/storage_locations_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:7:6:1:1]" "spec/system/dashboard_system_spec.rb[1:2:7:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:2:1:1]" "spec/system/dashboard_system_spec.rb[1:2:4:4:1:1]" "spec/system/dashboard_system_spec.rb[1:2:5:7:1:2]" "spec/system/dashboard_system_spec.rb[1:2:2:1:2:1]" "spec/requests/audits_requests_spec.rb" "spec/system/dashboard_system_spec.rb[1:2:5:10:1]" "spec/system/dashboard_system_spec.rb[1:2:6:1]" "spec/requests/kit_requests_spec.rb" "spec/requests/partners/distributions_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/admin/base_items_requests_spec.rb" failed
2024-03-07T01:56:50.7024343Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:56:50.7026673Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10705 LOC (0.35%) covered.
2024-03-07T01:56:50.7294809Z ##[error]Process completed with exit code 1.
