2024-03-02T20:32:00.5991349Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-02T20:32:00.5992189Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-02T20:32:00.6019943Z shell: /usr/bin/bash -e {0}
2024-03-02T20:32:00.6020291Z env:
2024-03-02T20:32:00.6020703Z   POSTGRES_HOST: localhost
2024-03-02T20:32:00.6021116Z   DATABASE_HOST: localhost
2024-03-02T20:32:00.6021497Z   PG_USERNAME: postgres
2024-03-02T20:32:00.6021939Z   PG_PASSWORD: password
2024-03-02T20:32:00.6022330Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-02T20:32:00.6022699Z   POSTGRES_PORT: 5432
2024-03-02T20:32:00.6023114Z   PGHOST: localhost
2024-03-02T20:32:00.6023467Z   PGUSER: postgres
2024-03-02T20:32:00.6023798Z   RAILS_ENV: test
2024-03-02T20:32:00.6024472Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-02T20:32:00.6024926Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-02T20:32:00.6025405Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-02T20:32:00.6026168Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-02T20:32:00.6026705Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-02T20:32:00.6027681Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-02T20:32:00.6028344Z   EVENTS_READ: true
2024-03-02T20:32:00.6028760Z ##[endgroup]
2024-03-02T20:32:11.2383295Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/models/view/inventory_spec.rb" "spec/models/item_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/request_item_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/account_request_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/vendor_spec.rb" "spec/models/partners/family_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/models/question_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/partner_group_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/users_role_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/request_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/service_object_errors_mixin_spec.rb"
2024-03-02T20:32:19.9437447Z 
2024-03-02T20:32:19.9438209Z Randomized with seed 62222
2024-03-02T20:32:20.7328128Z 
2024-03-02T20:32:20.7328824Z Partner
2024-03-02T20:32:20.7330825Z   #deletable?
2024-03-02T20:32:20.7331986Z     when status is not uninvited
2024-03-02T20:32:20.7563251Z       should return false
2024-03-02T20:32:20.7563961Z     when status is uninvited
2024-03-02T20:32:20.7564976Z       when it has no other associations
2024-03-02T20:32:20.7717668Z         should return true
2024-03-02T20:32:20.7718579Z       when it has a profile and users
2024-03-02T20:32:20.7963365Z         should return false
2024-03-02T20:32:20.7964101Z       when it has a request
2024-03-02T20:32:20.8173109Z         should return false
2024-03-02T20:32:20.8173929Z       when it has a profile but no users
2024-03-02T20:32:20.8328861Z         should return true
2024-03-02T20:32:20.8329793Z       when it has a distribution
2024-03-02T20:32:20.8627958Z         should return false
2024-03-02T20:32:20.8628717Z   associations
2024-03-02T20:32:20.8669565Z     is expected to have many requests
2024-03-02T20:32:20.8729958Z     is expected to belong to organization required: true
2024-03-02T20:32:20.8766462Z     is expected to have many children through families
2024-03-02T20:32:20.8820810Z     is expected to have many families dependent => destroy
2024-03-02T20:32:20.8855099Z     is expected to have many requests
2024-03-02T20:32:20.8892414Z     is expected to have many item_categories through partner_group
2024-03-02T20:32:20.8927108Z     is expected to have many users dependent => destroy
2024-03-02T20:32:20.8961685Z     is expected to have many distributions
2024-03-02T20:32:20.9013291Z     is expected to belong to partner_group optional: true
2024-03-02T20:32:20.9048791Z     is expected to have many requestable_items through item_categories source => items
2024-03-02T20:32:20.9049888Z     primary_user
2024-03-02T20:32:20.9359300Z       should return the first user ever created for a partner
2024-03-02T20:32:20.9360010Z   changing emails
2024-03-02T20:32:20.9635419Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-02T20:32:20.9946771Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-02T20:32:21.0197183Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-02T20:32:21.0453237Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-02T20:32:21.0703666Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-02T20:32:21.0961438Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-02T20:32:21.1217087Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-02T20:32:21.1218707Z   Filters
2024-03-02T20:32:21.1219265Z     by_status
2024-03-02T20:32:21.1615443Z       yields deactivated partner when deactivated status provided
2024-03-02T20:32:21.2000594Z       yields partners with the provided status
2024-03-02T20:32:21.2001750Z   #csv_export_attributes
2024-03-02T20:32:21.2299326Z     includes contact person information from parnerbase
2024-03-02T20:32:21.2300485Z   #quantity_year_to_date
2024-03-02T20:32:21.4567506Z     includes all item quantities from distributions issued during the current year
2024-03-02T20:32:21.6428541Z     does not include quantities from distributions issued during the previous year
2024-03-02T20:32:21.6429288Z   versioning
2024-03-02T20:32:21.6468317Z     is expected to be versioned
2024-03-02T20:32:21.6468812Z   #deactivated?
2024-03-02T20:32:21.6469654Z     when the status is not 'deactivated'
2024-03-02T20:32:21.6511223Z       should return false
2024-03-02T20:32:21.6512094Z     when the status is 'deactivated'
2024-03-02T20:32:21.6550791Z       should return true
2024-03-02T20:32:21.6551643Z   #approvable?
2024-03-02T20:32:21.6552477Z     when status is not invited or awaiting_review
2024-03-02T20:32:21.6638441Z       should return false
2024-03-02T20:32:21.6639293Z     when status is awaiting_review
2024-03-02T20:32:21.6680091Z       should return true
2024-03-02T20:32:21.6680829Z     when status is invited
2024-03-02T20:32:21.6721105Z       should return true
2024-03-02T20:32:21.6721809Z   Validations >
2024-03-02T20:32:21.6999693Z     requires a unique name within an organization
2024-03-02T20:32:21.7261698Z     still requires a unique email between organizations
2024-03-02T20:32:21.7350430Z     validates the quota is a number but it is not required
2024-03-02T20:32:21.7399390Z     must belong to an organization
2024-03-02T20:32:21.7650151Z     does not require a unique name between organizations
2024-03-02T20:32:21.7963334Z     requires a unique email that is formatted correctly
2024-03-02T20:32:21.7964354Z   ActiveStorage validation
2024-03-02T20:32:21.8080465Z     validates that attachments are pdf or docs
2024-03-02T20:32:21.8081236Z   import_csv
2024-03-02T20:32:22.0248564Z     imports partners from a csv file and prevents multiple imports
2024-03-02T20:32:22.3311779Z     imports partners from a csv file with BOM encodings
2024-03-02T20:32:22.3312702Z   #impact_metrics
2024-03-02T20:32:22.3313282Z     when partner has related information
2024-03-02T20:32:22.4014940Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-02T20:32:22.4016576Z     when partner don't have any related information
2024-03-02T20:32:22.4257584Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-02T20:32:22.4259032Z   callbacks
2024-03-02T20:32:22.4470873Z     properly downcases email
2024-03-02T20:32:22.4471785Z   #profile
2024-03-02T20:32:22.4699042Z     should return the associated Partners::Profile record
2024-03-02T20:32:22.4699688Z 
2024-03-02T20:32:22.4699977Z DistributionItemizedBreakdownService
2024-03-02T20:32:22.4701085Z   #fetch
2024-03-02T20:32:22.8426879Z     should include the break down of items distributed with onhand data
2024-03-02T20:32:22.8427850Z   #fetch_csv
2024-03-02T20:32:23.2241590Z     should output the expected output but in CSV format
2024-03-02T20:32:23.2242544Z 
2024-03-02T20:32:23.2242821Z DistributionCreateService
2024-03-02T20:32:23.2243397Z   call
2024-03-02T20:32:23.3018821Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T20:32:23.3734041Z     returns a successful object with Scheduled distribution
2024-03-02T20:32:23.3735359Z     when there's multiple line items and one has insufficient inventory
2024-03-02T20:32:23.4357225Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T20:32:23.4358138Z     when it fails to save
2024-03-02T20:32:23.4855522Z       preserves the error and is unsuccessful
2024-03-02T20:32:23.4856769Z     when the line item quantity is not positive
2024-03-02T20:32:23.5375150Z       preserves the RecordInvalid error and is unsuccessful
2024-03-02T20:32:23.5376440Z     when provided with a request ID
2024-03-02T20:32:23.6198238Z       changes the status of the request
2024-03-02T20:32:23.6199413Z       and the request already has a distribution associated with it
2024-03-02T20:32:23.6941195Z         should not be successful
2024-03-02T20:32:23.6941786Z     partner is deactivated
2024-03-02T20:32:23.7737805Z       does not send an email
2024-03-02T20:32:23.7738679Z     partner has send reminders setting set to true
2024-03-02T20:32:23.9541072Z       Sends a PartnerMailer
2024-03-02T20:32:23.9541966Z     partner has send reminders setting set to false
2024-03-02T20:32:24.0261245Z       does not send a PartnerMailer
2024-03-02T20:32:24.0262281Z     when there's not sufficient inventory
2024-03-02T20:32:24.0820784Z       preserves the Insufficiency error and is unsuccessful
2024-03-02T20:32:24.0821715Z 
2024-03-02T20:32:24.0823208Z TransferDestroyService
2024-03-02T20:32:24.0823844Z   #call
2024-03-02T20:32:24.0824426Z     when there are no issues
2024-03-02T20:32:24.3002518Z       should execute the expected methods
2024-03-02T20:32:24.4987968Z       should return an OpenStruct with success? set to true
2024-03-02T20:32:24.4989482Z     when an issue occurs in transaction
2024-03-02T20:32:24.4990162Z       because the transfer_id does not match any Transfer
2024-03-02T20:32:24.6884423Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-02T20:32:24.6885864Z       because the transfer destroy raised an error
2024-03-02T20:32:24.8762609Z         should return a OpenStruct with the raised error
2024-03-02T20:32:24.8764028Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-02T20:32:25.0570629Z         should return a OpenStruct with the raised error
2024-03-02T20:32:25.0571999Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-02T20:32:25.2348895Z         should return a OpenStruct with the raised error
2024-03-02T20:32:25.2349925Z     because transfer should not be deleted
2024-03-02T20:32:25.4200816Z       should return an OpenStruct with the raised error
2024-03-02T20:32:25.4201786Z 
2024-03-02T20:32:25.4202120Z OrganizationMailer
2024-03-02T20:32:25.4202684Z   #partner_approval_request
2024-03-02T20:32:25.4485016Z     renders the body with correct text with partner information
2024-03-02T20:32:25.4734948Z     includes a link to the relevant partner
2024-03-02T20:32:25.4976815Z     should be sent to the partner main email with the correct subject line
2024-03-02T20:32:25.4977831Z 
2024-03-02T20:32:25.4978371Z Partners::Family
2024-03-02T20:32:25.4979430Z   #search_non_archived
2024-03-02T20:32:25.5887005Z     should return all families if one is passed in
2024-03-02T20:32:25.6883615Z     should return non-archived families if zero is passed in
2024-03-02T20:32:25.6884284Z   #total_children_count
2024-03-02T20:32:25.6942761Z     should return the family's total children count
2024-03-02T20:32:25.6943643Z   #create_authorized
2024-03-02T20:32:25.7238758Z     should include authorized family members
2024-03-02T20:32:25.7239419Z   #guardian_display_name
2024-03-02T20:32:25.7297910Z     should return the guardian's first and last name
2024-03-02T20:32:25.7299002Z   associations
2024-03-02T20:32:25.7342974Z     is expected to belong to partner required: true
2024-03-02T20:32:25.7380841Z     is expected to have many children dependent => destroy
2024-03-02T20:32:25.7414130Z     is expected to have many authorized_family_members dependent => destroy
2024-03-02T20:32:25.7414779Z   validations
2024-03-02T20:32:25.7502369Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-02T20:32:25.7581653Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-02T20:32:25.7658925Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-02T20:32:25.7660167Z   versioning
2024-03-02T20:32:25.7695494Z     is expected to be versioned
2024-03-02T20:32:25.7696238Z 
2024-03-02T20:32:25.7696645Z PartnerGroup
2024-03-02T20:32:25.7698160Z   versioning
2024-03-02T20:32:25.7778530Z     is expected to be versioned
2024-03-02T20:32:25.7779276Z   associations
2024-03-02T20:32:25.7841224Z     is expected to have and belong to many item_categories
2024-03-02T20:32:25.7878163Z     is expected to have many partners
2024-03-02T20:32:25.7931426Z     is expected to belong to organization required: true
2024-03-02T20:32:25.7932359Z   Validations >
2024-03-02T20:32:25.8186555Z     does not require a unique name between organizations
2024-03-02T20:32:25.8231940Z     must belong to an organization
2024-03-02T20:32:25.8324987Z     requires a unique name within an organization
2024-03-02T20:32:25.8325662Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-02T20:32:25.8374340Z       should not be valid
2024-03-02T20:32:25.8375147Z   DB constraints
2024-03-02T20:32:25.8376203Z     reminder_day <= 28
2024-03-02T20:32:25.8461601Z       raises error if unmet
2024-03-02T20:32:25.8462334Z     send_reminders IS NOT NULL
2024-03-02T20:32:25.8531252Z       raises error if unmet
2024-03-02T20:32:25.8532294Z     deadline_day <= 28
2024-03-02T20:32:25.8600324Z       raises error if unmet
2024-03-02T20:32:25.8601091Z 
2024-03-02T20:32:25.8601514Z RequestDestroyService
2024-03-02T20:32:25.8602304Z   #call
2024-03-02T20:32:25.8744764Z     should return an instance of itself
2024-03-02T20:32:25.8746155Z     when the request_id matches no request
2024-03-02T20:32:25.8785338Z       should not be successful and have errors indicating request id is invalid
2024-03-02T20:32:25.8786656Z     when the request's partner is deactivated
2024-03-02T20:32:25.9060737Z       should have errors
2024-03-02T20:32:25.9061214Z     when the request is already discarded
2024-03-02T20:32:25.9163673Z       should not be successful and have errors
2024-03-02T20:32:25.9164227Z     when there are no validation errors
2024-03-02T20:32:25.9281574Z       should send a email notification to the partner
2024-03-02T20:32:25.9404615Z       should update the discarded_at column on the request
2024-03-02T20:32:25.9540175Z       should update the status column on the request
2024-03-02T20:32:25.9540879Z 
2024-03-02T20:32:25.9541084Z ProfileUpdateService
2024-03-02T20:32:25.9542227Z   #update
2024-03-02T20:32:25.9811402Z     updates the profile with the filtered and prepared params
2024-03-02T20:32:25.9812013Z 
2024-03-02T20:32:25.9812354Z KitCreateService
2024-03-02T20:32:25.9813252Z   #call
2024-03-02T20:32:26.1770620Z     should return an the instance
2024-03-02T20:32:26.1771433Z     when the parameters provided are invalid
2024-03-02T20:32:26.1772240Z       because the kit_params is invalid for kit creation
2024-03-02T20:32:26.3486394Z         should have errors saying why the kit_params are invalid
2024-03-02T20:32:26.3487253Z       because the organization_id does not match any Organization
2024-03-02T20:32:26.3543426Z         should have an error on organization_id saying it does not match any Organization
2024-03-02T20:32:26.3544231Z     when the parameters are valid
2024-03-02T20:32:26.5424610Z       should create a new Item
2024-03-02T20:32:26.7329589Z       should create a new Kit
2024-03-02T20:32:26.9182058Z       should create the new Item associated with the Kit
2024-03-02T20:32:26.9183384Z       but an unexpected error gets raised
2024-03-02T20:32:27.1135003Z         should have an error that includes the raised error
2024-03-02T20:32:27.3039113Z         should not create a Item
2024-03-02T20:32:27.4968902Z         should not create the Kit
2024-03-02T20:32:27.4969765Z       but the ItemCreationService is unsuccesful
2024-03-02T20:32:27.6879499Z         should not create a Item
2024-03-02T20:32:27.8788244Z         should not create the Kit
2024-03-02T20:32:28.0681096Z         should have an error that includes the error
2024-03-02T20:32:28.0681759Z 
2024-03-02T20:32:28.0681996Z DonationCreateService
2024-03-02T20:32:28.0682878Z   #call
2024-03-02T20:32:28.0933400Z     should create the donation
2024-03-02T20:32:28.0934083Z 
2024-03-02T20:32:28.0934372Z Reports::PeriodSupplyReportService
2024-03-02T20:32:28.0935457Z   #report
2024-03-02T20:32:28.2757443Z     should report zero values
2024-03-02T20:32:28.2758220Z     with values
2024-03-02T20:32:28.9076444Z       should report normal values
2024-03-02T20:32:28.9077024Z 
2024-03-02T20:32:28.9077324Z Partners::ServedArea
2024-03-02T20:32:28.9153719Z   is expected to belong to partner_profile required: true
2024-03-02T20:32:28.9195606Z   is expected to belong to county required: true
2024-03-02T20:32:28.9404161Z   must only allow integer client shares
2024-03-02T20:32:28.9659470Z   must only allow valid client share values
2024-03-02T20:32:28.9660495Z   versioning
2024-03-02T20:32:28.9697577Z     is expected to be versioned
2024-03-02T20:32:28.9698295Z 
2024-03-02T20:32:28.9698601Z Partners::RequestApprovalService
2024-03-02T20:32:28.9699475Z   #call
2024-03-02T20:32:28.9700742Z     when the partner is not yet awaiting approval
2024-03-02T20:32:28.9995370Z       should set the status on the partner record to awaiting_review
2024-03-02T20:32:29.0274946Z       should send an email notification to the partner's organization
2024-03-02T20:32:29.0276379Z     when the partner is already awaiting approval
2024-03-02T20:32:29.0535487Z       should return an error saying it the partner is already requested approval
2024-03-02T20:32:29.0536880Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-02T20:32:29.0538312Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-02T20:32:29.0782967Z       should return an error re social media
2024-03-02T20:32:29.0784078Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-02T20:32:29.1064012Z       does not have an error
2024-03-02T20:32:29.1064651Z 
2024-03-02T20:32:29.1065131Z AdjustmentCreateService
2024-03-02T20:32:29.1066270Z   call
2024-03-02T20:32:29.2116564Z     increases stored inventory on a positive adjustment
2024-03-02T20:32:29.2971502Z     decreases stored inventory on a negative adjustment
2024-03-02T20:32:29.3731909Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-02T20:32:29.4610615Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-02T20:32:29.5201603Z     does not allow inventory to be adjusted below 0
2024-03-02T20:32:29.6032044Z     handles adjustments to multiple items
2024-03-02T20:32:29.6548560Z     gives an error if we attempt to adjust inventory below 0
2024-03-02T20:32:29.7374999Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-02T20:32:29.8216386Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-02T20:32:29.8217707Z 
2024-03-02T20:32:29.8217908Z Item
2024-03-02T20:32:29.8218672Z   versioning
2024-03-02T20:32:29.8259567Z     is expected to be versioned
2024-03-02T20:32:29.8260378Z   Filtering >
2024-03-02T20:32:29.8553439Z     ->active shows items that are still active
2024-03-02T20:32:29.8603357Z     can filter
2024-03-02T20:32:29.8816018Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-02T20:32:29.9008726Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T20:32:29.9009737Z     ->cloth_diapers
2024-03-02T20:32:29.9277989Z       returns records associated with disposable diapers
2024-03-02T20:32:29.9279229Z     ->by_partner_key
2024-03-02T20:32:29.9433186Z       filters by partner key
2024-03-02T20:32:29.9433934Z     ->by_base_item
2024-03-02T20:32:30.1447769Z       can be chained to organization to constrain it to just 1 org's items
2024-03-02T20:32:30.1615193Z       shows the items for a particular base_item
2024-03-02T20:32:30.1615940Z     ->disposable
2024-03-02T20:32:30.1933605Z       returns records associated with disposable diapers
2024-03-02T20:32:30.1934478Z   Validations >
2024-03-02T20:32:30.1993983Z     requires a Base Item base
2024-03-02T20:32:30.2118836Z     requires that items quantity are not a negative number
2024-03-02T20:32:30.2185330Z     must belong to an organization
2024-03-02T20:32:30.2321608Z     requires a unique name
2024-03-02T20:32:30.2322365Z   distribution_quantity and package size
2024-03-02T20:32:30.2453839Z     have nil values if an empty string is passed
2024-03-02T20:32:30.2454870Z   after update
2024-03-02T20:32:30.2455487Z     when item has the kit
2024-03-02T20:32:30.4370395Z       updates kit name
2024-03-02T20:32:30.4371440Z     when item does not have kit
2024-03-02T20:32:30.4500037Z       does not raise any errors
2024-03-02T20:32:30.4500689Z   Methods >
2024-03-02T20:32:30.4502249Z     destroy
2024-03-02T20:32:30.6630363Z       deactivates the kit if it exists
2024-03-02T20:32:30.6866336Z       only hides an item that has history
2024-03-02T20:32:30.7069548Z       actually destroys an item that doesn't have history
2024-03-02T20:32:30.7070693Z     has_history?
2024-03-02T20:32:30.7842788Z       identifies items that have been used previously
2024-03-02T20:32:30.7843631Z     other?
2024-03-02T20:32:30.7964793Z       is true for items that are partner_key 'other'
2024-03-02T20:32:30.7966015Z     barcoded_items >
2024-03-02T20:32:30.8306748Z       returns a collection of items that have barcodes associated with them
2024-03-02T20:32:30.8307797Z     barcodes_for
2024-03-02T20:32:30.8503069Z       retrieves all BarcodeItems associated with an item
2024-03-02T20:32:30.8504122Z     #reactivate!
2024-03-02T20:32:30.8504745Z       given an array of item ids
2024-03-02T20:32:30.8722193Z         sets the active trait to true for all of them
2024-03-02T20:32:30.8723188Z       given a single item id
2024-03-02T20:32:30.8850233Z         sets the active trait to true for that item
2024-03-02T20:32:30.8851143Z     storage_locations_containing
2024-03-02T20:32:30.9214205Z       retrieves all storage locations that contain an item
2024-03-02T20:32:30.9215088Z   Assocations >
2024-03-02T20:32:30.9261685Z     is expected to belong to item_category optional: true
2024-03-02T20:32:30.9262453Z   default_quantity
2024-03-02T20:32:30.9339899Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-02T20:32:30.9416285Z     should return 50 if column is not set
2024-03-02T20:32:30.9491579Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-02T20:32:30.9567744Z     should return the value of distribution_quantity if it is set
2024-03-02T20:32:30.9568611Z 
2024-03-02T20:32:30.9568808Z Kit
2024-03-02T20:32:31.1548800Z   deactivate and reactivate
2024-03-02T20:32:31.1549793Z   Value >
2024-03-02T20:32:31.1707324Z     converts dollars to cents
2024-03-02T20:32:31.1862988Z     converts cents to dollars
2024-03-02T20:32:31.1863755Z     .value_per_itemizable
2024-03-02T20:32:31.2256076Z       calculates values from associated items
2024-03-02T20:32:31.2256879Z   Validations >
2024-03-02T20:32:31.2490614Z     requires a name
2024-03-02T20:32:31.2662237Z     is valid as built
2024-03-02T20:32:31.2833429Z     must belong to an organization
2024-03-02T20:32:31.4880002Z     requires a unique name
2024-03-02T20:32:31.5052502Z     requires at least one item
2024-03-02T20:32:31.5238614Z     can't have negative value
2024-03-02T20:32:31.5239342Z   Filtering >
2024-03-02T20:32:31.5278814Z     can filter
2024-03-02T20:32:32.0947027Z     ->alphabetized retrieves items in alphabetical order
2024-03-02T20:32:32.0948268Z     ->by_partner_key
2024-03-02T20:32:32.3218522Z       shows the kits for a particular item
2024-03-02T20:32:32.3219386Z   #can_deactivate?
2024-03-02T20:32:32.3220236Z     without inventory items
2024-03-02T20:32:32.5075278Z       should return true
2024-03-02T20:32:32.5075983Z     with inventory items
2024-03-02T20:32:32.7199041Z       should return false
2024-03-02T20:32:32.7200063Z   versioning
2024-03-02T20:32:32.7237669Z     is expected to be versioned
2024-03-02T20:32:32.7238289Z 
2024-03-02T20:32:32.7238613Z InventoryCheckService
2024-03-02T20:32:32.7239592Z   call
2024-03-02T20:32:32.7240450Z     error
2024-03-02T20:32:32.8035765Z       should set the error
2024-03-02T20:32:32.8036943Z     alert
2024-03-02T20:32:32.8786973Z       should set the alert
2024-03-02T20:32:32.8787483Z 
2024-03-02T20:32:32.8787827Z Reports::SummaryReportService
2024-03-02T20:32:32.8788970Z   #report
2024-03-02T20:32:33.3291789Z     should report positive values
2024-03-02T20:32:33.5025028Z     should report zero values
2024-03-02T20:32:33.9462297Z     should report negative values
2024-03-02T20:32:33.9463196Z 
2024-03-02T20:32:33.9463450Z ServiceObjectErrorsMixin
2024-03-02T20:32:33.9464105Z   self.included
2024-03-02T20:32:33.9513817Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-02T20:32:33.9514776Z 
2024-03-02T20:32:33.9515092Z AccountRequestsController
2024-03-02T20:32:33.9515756Z   routing
2024-03-02T20:32:33.9554096Z     routes to #create
2024-03-02T20:32:33.9587516Z     routes to #new
2024-03-02T20:32:33.9588056Z 
2024-03-02T20:32:33.9588517Z Reports::WarehouseReportService
2024-03-02T20:32:33.9589542Z   #report
2024-03-02T20:32:34.1419074Z     should print unknown square footage
2024-03-02T20:32:34.3177156Z     should print zero values
2024-03-02T20:32:34.6748581Z     should print normal values
2024-03-02T20:32:35.0289451Z     should print unknown warehouse type
2024-03-02T20:32:35.0290386Z 
2024-03-02T20:32:35.0290648Z Request
2024-03-02T20:32:35.0291212Z   total_items
2024-03-02T20:32:35.0407096Z     adds the quantity of all items in the request
2024-03-02T20:32:35.0408230Z   item data
2024-03-02T20:32:35.0497479Z     coerces item quantity and id to always be an integer before saving
2024-03-02T20:32:35.0498669Z   versioning
2024-03-02T20:32:35.0538677Z     is expected to be versioned
2024-03-02T20:32:35.0539427Z   Enums >
2024-03-02T20:32:35.0540116Z     #status
2024-03-02T20:32:35.0746221Z       scopes
2024-03-02T20:32:35.0746811Z 
2024-03-02T20:32:35.0747386Z EventDiffer
2024-03-02T20:32:35.3617346Z   should return a full diff
2024-03-02T20:32:35.3617863Z 
2024-03-02T20:32:35.3618108Z DistributionUpdateService
2024-03-02T20:32:35.3627008Z   call
2024-03-02T20:32:35.5427492Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-02T20:32:35.5428537Z   resend_notification?
2024-03-02T20:32:35.6543586Z     changes any distribution content, resulting in resend_notification? = true
2024-03-02T20:32:35.7437185Z     changes the issue_date, resulting in resend_notification? = true
2024-03-02T20:32:35.8325774Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-02T20:32:35.8326605Z 
2024-03-02T20:32:35.8326802Z Question
2024-03-02T20:32:35.8328172Z   remove_redundant_error
2024-03-02T20:32:35.8422603Z     should return an array with only one error message related to the checkboxes.
2024-03-02T20:32:35.8423579Z   validations
2024-03-02T20:32:35.8491578Z     is expected to validate that :title cannot be empty/falsy
2024-03-02T20:32:35.8546266Z     is expected to validate that :answer cannot be empty/falsy
2024-03-02T20:32:35.8697840Z     question for_banks and for_partners attributes can't both be false
2024-03-02T20:32:35.8699069Z   scope for_partners
2024-03-02T20:32:35.8941411Z     should filter out questions that aren't meant for partners
2024-03-02T20:32:35.8942366Z   versioning
2024-03-02T20:32:35.8974518Z     is expected to be versioned
2024-03-02T20:32:35.8975264Z   punctuate
2024-03-02T20:32:35.9020399Z     should punctuate each string in a given array
2024-03-02T20:32:35.9021249Z   scope for_banks
2024-03-02T20:32:35.9256148Z     should filter out questions that aren't meant for banks
2024-03-02T20:32:35.9256927Z 
2024-03-02T20:32:35.9257213Z CustomDeviseMailer
2024-03-02T20:32:35.9257847Z   #invitation_instructions
2024-03-02T20:32:35.9258940Z     when partner is invited
2024-03-02T20:32:35.9778810Z       invites to primary user
2024-03-02T20:32:35.9779665Z     when other partner users invited
2024-03-02T20:32:36.0212618Z       invites to partner user
2024-03-02T20:32:36.0213381Z     when user is invited
2024-03-02T20:32:36.0407587Z       invites to user
2024-03-02T20:32:36.0601119Z       has invite expiration message
2024-03-02T20:32:36.0601974Z 
2024-03-02T20:32:36.0602291Z UsersRole
2024-03-02T20:32:36.0603554Z   versioning
2024-03-02T20:32:36.0650231Z     is expected to be versioned
2024-03-02T20:32:36.0650923Z   #current_role_for
2024-03-02T20:32:36.0651724Z     for partner user
2024-03-02T20:32:36.0796999Z       should return partner user
2024-03-02T20:32:36.0797965Z     for org user
2024-03-02T20:32:36.0929226Z       should return org user
2024-03-02T20:32:36.0929930Z     for org admin
2024-03-02T20:32:36.1137304Z       should return org admin
2024-03-02T20:32:36.1137785Z     for super admin
2024-03-02T20:32:36.1297032Z       should return super admin
2024-03-02T20:32:36.1297695Z 
2024-03-02T20:32:36.1298044Z Exports::ExportPurchasesCSVService
2024-03-02T20:32:36.1299059Z   #generate_csv_data
2024-03-02T20:32:36.2410896Z     should match the expected content for the csv
2024-03-02T20:32:36.2411853Z 
2024-03-02T20:32:36.2412101Z DistributionContentChangeService
2024-03-02T20:32:36.2412772Z   #changes
2024-03-02T20:32:36.2413736Z     when there are line items removed and updated
2024-03-02T20:32:36.2454845Z       returns true
2024-03-02T20:32:36.2455445Z   #any_change?
2024-03-02T20:32:36.2456579Z     when there are line items removed and updated
2024-03-02T20:32:36.2490486Z       returns true
2024-03-02T20:32:36.2492852Z     when there are line items updated
2024-03-02T20:32:36.2526424Z       returns true
2024-03-02T20:32:36.2527091Z     when there are line items removed
2024-03-02T20:32:36.2563250Z       returns true
2024-03-02T20:32:36.2564062Z     when there are no changes in the line items
2024-03-02T20:32:36.2597783Z       returns true
2024-03-02T20:32:36.2601611Z 
2024-03-02T20:32:36.2602070Z RequestItem
2024-03-02T20:32:36.2602750Z   Methods >
2024-03-02T20:32:36.2603617Z     #from_json
2024-03-02T20:32:36.5113551Z       has the correct name
2024-03-02T20:32:36.7586812Z       has the correct amount on hand for location
2024-03-02T20:32:37.0058896Z       has the correct quantity
2024-03-02T20:32:37.2475737Z       has the correct amount on hand
2024-03-02T20:32:37.2476695Z 
2024-03-02T20:32:37.2476959Z DistributionMailer
2024-03-02T20:32:37.2477938Z   #reminder_email
2024-03-02T20:32:37.2479414Z     with deliver_method: :pick_up
2024-03-02T20:32:37.3027136Z       renders the body with 'pick up' specified
2024-03-02T20:32:37.3027964Z     Text format
2024-03-02T20:32:37.3515467Z       renders the body with organization's email text
2024-03-02T20:32:37.3516396Z     with deliver_method: :delivery
2024-03-02T20:32:37.4016726Z       renders the body with 'delivery' specified
2024-03-02T20:32:37.4017795Z     HTML format
2024-03-02T20:32:37.4487845Z       renders the body with organization's email text
2024-03-02T20:32:37.4488952Z   #partner_mailer
2024-03-02T20:32:37.4985433Z     renders the body with distributions text
2024-03-02T20:32:37.5472596Z     renders the body with organization's email text
2024-03-02T20:32:37.5473775Z     with deliver_method: :pick_up
2024-03-02T20:32:37.5987890Z       renders the body with 'picked up' specified
2024-03-02T20:32:37.5988977Z       when parners profile pick_up_email is present
2024-03-02T20:32:37.6483505Z         sends email to the primary contact and partner`s pickup person
2024-03-02T20:32:37.6484471Z         when pickup person happens to be the same as the primary contact
2024-03-02T20:32:37.6974287Z           does not send email twice
2024-03-02T20:32:37.6975172Z     with deliver_method: :delivery
2024-03-02T20:32:37.7473882Z       sends copy of email only to the partner
2024-03-02T20:32:37.7980670Z       renders the body with 'delivered' specified
2024-03-02T20:32:37.7981484Z     with distribution changes
2024-03-02T20:32:37.8495287Z       renders the body with changes that happened in the distribution
2024-03-02T20:32:37.8496340Z 
2024-03-02T20:32:37.8496610Z ApplicationHelper
2024-03-02T20:32:37.8498556Z   step_container_helper
2024-03-02T20:32:37.8499683Z     active_index is greater than index
2024-03-02T20:32:37.8563164Z       returns done
2024-03-02T20:32:37.8564107Z     active_index is equal to index
2024-03-02T20:32:37.8604491Z       returns active
2024-03-02T20:32:37.8605118Z     active_index is less than index
2024-03-02T20:32:37.8645310Z       returns empty string
2024-03-02T20:32:37.8646305Z   default_title_content
2024-03-02T20:32:37.8647291Z     Organization exists
2024-03-02T20:32:38.0296087Z       returns the organization's name
2024-03-02T20:32:38.0296954Z     Organization does not exist
2024-03-02T20:32:38.0344828Z       returns a default name
2024-03-02T20:32:38.0345910Z   active_class
2024-03-02T20:32:38.0390100Z     Returns the controller name (FAILED - 1)
2024-03-02T20:32:38.0390900Z   flash_class
2024-03-02T20:32:38.0433959Z     returns appropriate class for success
2024-03-02T20:32:38.0474971Z     returns appropriate class for error
2024-03-02T20:32:38.0515635Z     returns appropriate class for notice
2024-03-02T20:32:38.0556778Z     returns appropriate class for alert
2024-03-02T20:32:38.0557565Z   can_administrate?
2024-03-02T20:32:38.0558806Z     User is org admin and part of org
2024-03-02T20:32:38.0766861Z       can administrate
2024-03-02T20:32:38.0767771Z     User is part of org but not org admin
2024-03-02T20:32:38.0898480Z       cannot administrate
2024-03-02T20:32:38.0899165Z     User is org admin and not part of org
2024-03-02T20:32:38.2886697Z       cannot administrate
2024-03-02T20:32:38.2887905Z   confirm_delete_msg
2024-03-02T20:32:38.2936621Z     subs in string
2024-03-02T20:32:38.2937405Z 
2024-03-02T20:32:38.2937682Z HistoricalTrendsHelper
2024-03-02T20:32:38.2938791Z   #last_12_months
2024-03-02T20:32:38.2983001Z     returns the last 12 months starting from July when the current month is June
2024-03-02T20:32:38.3023626Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-02T20:32:38.3064095Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-02T20:32:38.3064925Z 
2024-03-02T20:32:38.3065319Z PartnerApprovalService
2024-03-02T20:32:38.3066353Z   #call
2024-03-02T20:32:38.3067212Z     when the arguments are correct
2024-03-02T20:32:38.3360449Z       should send an email notification to the partner
2024-03-02T20:32:38.3661703Z       should change the partner status to approved
2024-03-02T20:32:38.3940594Z       should have no errors
2024-03-02T20:32:38.3941486Z       but a unexpected error occured during the save
2024-03-02T20:32:38.3942312Z         for partner approval
2024-03-02T20:32:38.4200654Z           should have an error with the raised error
2024-03-02T20:32:38.4467497Z           should not change the partner status to approved
2024-03-02T20:32:38.4731828Z           should not send an email notification to the partner
2024-03-02T20:32:38.4733018Z     when the arguments are incorrect
2024-03-02T20:32:38.4733842Z       because the partner is not approvable
2024-03-02T20:32:38.5014919Z         should return the PartnerApprovalService object with an error
2024-03-02T20:32:38.5015705Z 
2024-03-02T20:32:38.5015913Z ItemsOutQuery
2024-03-02T20:32:38.5016502Z   items_out_query
2024-03-02T20:32:38.6218390Z     includes distributions, adjustments, transfers among sources
2024-03-02T20:32:38.7401335Z     returns a collection with the fields name, item_id, quantity
2024-03-02T20:32:38.7402321Z 
2024-03-02T20:32:38.7402578Z RequestMailer
2024-03-02T20:32:38.7403185Z   #request_cancel_partner_notification
2024-03-02T20:32:38.7569262Z     should be sent to the partner main email with the correct subject line
2024-03-02T20:32:38.7703255Z     renders the body with correct text with partner information
2024-03-02T20:32:38.7704093Z 
2024-03-02T20:32:38.7704473Z Partners::AuthorizedFamilyMember
2024-03-02T20:32:38.7705355Z   versioning
2024-03-02T20:32:38.7740598Z     is expected to be versioned
2024-03-02T20:32:38.7741257Z   #display_name
2024-03-02T20:32:38.8019449Z     should return the family member's first and last name
2024-03-02T20:32:38.8020348Z   associations
2024-03-02T20:32:38.8060868Z     is expected to belong to family required: true
2024-03-02T20:32:38.8115256Z     is expected to have many child_item_requests dependent => nullify
2024-03-02T20:32:38.8116006Z 
2024-03-02T20:32:38.8116329Z Partners::ItemRequest
2024-03-02T20:32:38.8116997Z   versioning
2024-03-02T20:32:38.8210845Z     is expected to be versioned
2024-03-02T20:32:38.8211601Z   associations
2024-03-02T20:32:38.8257405Z     is expected to belong to request class_name => ::Request required: true
2024-03-02T20:32:38.8294011Z     is expected to have many child_item_requests dependent => destroy
2024-03-02T20:32:38.8327774Z     is expected to have many children through child_item_requests
2024-03-02T20:32:38.8328874Z   validations
2024-03-02T20:32:38.8388638Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-02T20:32:38.8445767Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T20:32:38.8507829Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-02T20:32:38.8567138Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-02T20:32:38.8568356Z 
2024-03-02T20:32:38.8569073Z ProductDrive
2024-03-02T20:32:39.0967396Z   calculates donation quantity by date
2024-03-02T20:32:39.2360342Z   calculates donation quantity
2024-03-02T20:32:39.3844400Z   calculates in-kind value
2024-03-02T20:32:39.9137711Z   calculates and returns all donated organization item quantities by category and date
2024-03-02T20:32:40.1487706Z   calculates and returns all donated organization item quantities by name and date
2024-03-02T20:32:40.1489092Z   validations
2024-03-02T20:32:40.2949235Z     is expected not to be valid
2024-03-02T20:32:40.4343050Z     is expected not to be valid
2024-03-02T20:32:40.5683675Z     is expected not to be valid
2024-03-02T20:32:40.5684397Z   scopes
2024-03-02T20:32:40.5685475Z     .by_name
2024-03-02T20:32:40.7120517Z       does not return other_name
2024-03-02T20:32:40.8631240Z       returns the product_drive with name some_name
2024-03-02T20:32:40.8632395Z     .within_date_range
2024-03-02T20:32:41.0138942Z       does not include product drive 2
2024-03-02T20:32:41.1657138Z       returns the product drive 1
2024-03-02T20:32:41.1657761Z     .by_item_category_id
2024-03-02T20:32:41.5045577Z       does not return other_name
2024-03-02T20:32:41.8399624Z       returns the product_drive with name some_name
2024-03-02T20:32:41.8400789Z   associations
2024-03-02T20:32:41.9338204Z     has_many product_drive_participants through donations
2024-03-02T20:32:42.0183480Z     has_many donations
2024-03-02T20:32:42.0184521Z   versioning
2024-03-02T20:32:42.1791522Z     is expected to be versioned
2024-03-02T20:32:42.1792478Z   distinct_items
2024-03-02T20:32:42.5436287Z     counts the distinct items correctly by given date
2024-03-02T20:32:42.8968753Z     counts the distinct items correctly by given category
2024-03-02T20:32:43.2426152Z     counts the distinct items correctly in overlapping donations
2024-03-02T20:32:43.5886617Z     counts the items correctly for 1 donation with multiple items
2024-03-02T20:32:43.9385237Z     doesn't double_count the items if there are two donations for the same item
2024-03-02T20:32:43.9386905Z   donation_source_view
2024-03-02T20:32:44.0830036Z     returns formatted text
2024-03-02T20:32:44.0830779Z   .search_date_range
2024-03-02T20:32:44.2263302Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-02T20:32:44.2264126Z 
2024-03-02T20:32:44.2264328Z BarcodeItem
2024-03-02T20:32:44.2265700Z   Barcodes of BaseItems ('Global')
2024-03-02T20:32:44.2358261Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-02T20:32:44.2359041Z     validations >
2024-03-02T20:32:44.2434317Z       allows multiple barcodes to point at the same base item
2024-03-02T20:32:44.2517703Z       enforces uniqueness in the global scope
2024-03-02T20:32:44.2590406Z       is valid with or without an organization
2024-03-02T20:32:44.2590929Z       item >
2024-03-02T20:32:44.2640962Z         is invalid without an item associated with it
2024-03-02T20:32:44.2641900Z       quantity >
2024-03-02T20:32:44.2693389Z         is an integer
2024-03-02T20:32:44.2740906Z         is not a negative number
2024-03-02T20:32:44.2793580Z         is not nil
2024-03-02T20:32:44.2794089Z       value >
2024-03-02T20:32:44.2845814Z         requires a value
2024-03-02T20:32:44.2846821Z     filters >
2024-03-02T20:32:44.2994399Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-02T20:32:44.3149170Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-02T20:32:44.3261467Z       ->by_value returns the barcode with that value
2024-03-02T20:32:44.3262514Z     scopes >
2024-03-02T20:32:44.3263264Z       global
2024-03-02T20:32:44.3420207Z         includes all barcodes, for both base items and regular items
2024-03-02T20:32:44.3421217Z   Organization barcodes
2024-03-02T20:32:44.3536705Z     updates a counter in Item whenever it tracks a new barcode
2024-03-02T20:32:44.3537576Z     validations >
2024-03-02T20:32:44.3682023Z       is valid only with an organization
2024-03-02T20:32:44.3797087Z       allows multiple barcodes to point at the same item
2024-03-02T20:32:44.4032625Z       does not enforces value uniqueness across organizations
2024-03-02T20:32:44.4151122Z       does not enforce value uniqueness compared with the global scope
2024-03-02T20:32:44.4307284Z       enforces value uniqueness within the organization
2024-03-02T20:32:44.4308007Z       value >
2024-03-02T20:32:44.4400456Z         requires a value
2024-03-02T20:32:44.4401047Z       quantity >
2024-03-02T20:32:44.4489018Z         is an integer
2024-03-02T20:32:44.4576654Z         is not nil
2024-03-02T20:32:44.4666312Z         is not a negative number
2024-03-02T20:32:44.4667155Z       item >
2024-03-02T20:32:44.4755237Z         is invalid without an item associated with it
2024-03-02T20:32:44.4756235Z     to_h >
2024-03-02T20:32:44.4865753Z       emits a hash for a line_item
2024-03-02T20:32:44.4866518Z     filters >
2024-03-02T20:32:44.5051992Z       ->item_id shows only barcodes for a specific item_id
2024-03-02T20:32:44.5052603Z     scopes >
2024-03-02T20:32:44.5160127Z       ->by_value returns the barcode with that value
2024-03-02T20:32:44.7015263Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-02T20:32:44.7226155Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-02T20:32:44.7227199Z     when searching for a barcode where there is a global and local with the same value
2024-03-02T20:32:44.7577238Z       favors the local barcode
2024-03-02T20:32:44.7577947Z   versioning
2024-03-02T20:32:44.7616711Z     is expected to be versioned
2024-03-02T20:32:44.7617505Z 
2024-03-02T20:32:44.7617844Z View::Inventory
2024-03-02T20:32:44.7619502Z   #total_value_in_dollars
2024-03-02T20:32:44.8474335Z     should return total value across the given location
2024-03-02T20:32:44.8475207Z   #all_items
2024-03-02T20:32:44.9350138Z     should return all items across storage locations
2024-03-02T20:32:44.9351042Z   #storage_location_name
2024-03-02T20:32:45.0201928Z     should return the right name
2024-03-02T20:32:45.0202890Z   .items_for_location
2024-03-02T20:32:45.1086699Z     should return the right values
2024-03-02T20:32:45.1087701Z     with include_omitted_items
2024-03-02T20:32:45.1971040Z       should add items not in the storage location
2024-03-02T20:32:45.1971906Z   .total_inventory
2024-03-02T20:32:45.2816320Z     should return the total quantity
2024-03-02T20:32:45.2817132Z   #storage_locations_for_item
2024-03-02T20:32:45.3681634Z     should return all relevant IDs
2024-03-02T20:32:45.3682453Z   #quantity_for
2024-03-02T20:32:45.3682968Z     with item id
2024-03-02T20:32:45.3683728Z       with no storage location
2024-03-02T20:32:45.4566690Z         should return quantities across all storage locations
2024-03-02T20:32:45.4569361Z       with storage location
2024-03-02T20:32:45.5442623Z         should return the quantity at that location
2024-03-02T20:32:45.5443575Z     with storage location but no item id
2024-03-02T20:32:45.6316447Z       should return all items at that location
2024-03-02T20:32:45.6317317Z   #items_for_location
2024-03-02T20:32:45.7201147Z     should return the right values
2024-03-02T20:32:45.7201985Z     with include_omitted_items
2024-03-02T20:32:45.8085713Z       should add items not in the storage location
2024-03-02T20:32:45.8086673Z 
2024-03-02T20:32:45.8086990Z PartnerProfileUpdateService
2024-03-02T20:32:45.8087656Z   #call
2024-03-02T20:32:45.8089357Z     when served area client shares pre-exist
2024-03-02T20:32:45.8090197Z       and the new values are incorrect
2024-03-02T20:32:45.8414231Z         maintains the old values and returns failure
2024-03-02T20:32:45.8415585Z       and the new values are correct
2024-03-02T20:32:45.8416339Z         and there are errors on the profile
2024-03-02T20:32:45.8729503Z           maintains the old values and returns failure
2024-03-02T20:32:45.8730707Z         and there are no other errors
2024-03-02T20:32:45.9057133Z           replaces the old values and returns success
2024-03-02T20:32:45.9058777Z     when there are no pre-existing served areas
2024-03-02T20:32:45.9315731Z       and the new values are correct
2024-03-02T20:32:45.9362731Z         stores the new values and returns success
2024-03-02T20:32:45.9363468Z         and there are other errors in the profile
2024-03-02T20:32:45.9592516Z           does not store the new values and it returns a failure
2024-03-02T20:32:45.9593312Z       and the new values are incorrect
2024-03-02T20:32:45.9803545Z 0
2024-03-02T20:32:45.9813261Z         does not store the new values and returns a failure
2024-03-02T20:32:45.9814571Z 
2024-03-02T20:32:45.9814727Z Vendor
2024-03-02T20:32:45.9816406Z   behaves like provideable
2024-03-02T20:32:45.9817263Z     Validations
2024-03-02T20:32:45.9880554Z       is invalid unless it has either a contact name or a business name
2024-03-02T20:32:45.9915288Z       is invalid without an organization
2024-03-02T20:32:45.9915918Z     geocode
2024-03-02T20:32:45.9970513Z       adds coordinates to the database
2024-03-02T20:32:45.9971149Z     import_csv
2024-03-02T20:32:46.1801156Z       imports from a csv file
2024-03-02T20:32:46.1801744Z   Methods
2024-03-02T20:32:46.1802214Z     volume
2024-03-02T20:32:46.2506362Z       retrieves the amount of product that has been bought from this vendor
2024-03-02T20:32:46.2507231Z   versioning
2024-03-02T20:32:46.2545935Z     is expected to be versioned
2024-03-02T20:32:46.2546649Z 
2024-03-02T20:32:46.2546948Z SyncNDBNMembers
2024-03-02T20:32:46.2547892Z   .sync
2024-03-02T20:32:46.2548988Z     when the HTTP request does not get a response of 200
2024-03-02T20:32:46.2776852Z       should raise an error regarding the response code
2024-03-02T20:32:46.2777624Z     when the HTTP request is successful
2024-03-02T20:32:46.2778319Z       when there are no exisiting NDBN Member records
2024-03-02T20:32:46.2913875Z         should create the NDBN Member records
2024-03-02T20:32:46.2914664Z       when the account name of a NDBN Member has changed
2024-03-02T20:32:46.3028902Z         should update the account name of the corresponding NDBN Member
2024-03-02T20:32:46.3029839Z       when no new NDBN Member has been added
2024-03-02T20:32:46.3158106Z         should not add any new NDBN Members
2024-03-02T20:32:46.3164618Z 
2024-03-02T20:32:46.3164822Z AccountRequest
2024-03-02T20:32:46.3405372Z   #confirm!
2024-03-02T20:32:46.3532398Z   #reject!
2024-03-02T20:32:46.3533253Z   #identity_token
2024-03-02T20:32:46.3623616Z     should return a JWT token that contains the id of the account_request_id
2024-03-02T20:32:46.3624535Z     when the account_request is not persisted
2024-03-02T20:32:46.3709553Z       should raise an error
2024-03-02T20:32:46.3710143Z   associations
2024-03-02T20:32:46.3745064Z     is expected to have one organization class_name => Organization
2024-03-02T20:32:46.3806826Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-02T20:32:46.3807676Z   #processed?
2024-03-02T20:32:46.3808562Z     when the account request has no associated organization
2024-03-02T20:32:46.3902488Z       should return false
2024-03-02T20:32:46.3903167Z     when the account request has a associated organization
2024-03-02T20:32:46.5754732Z       should return true
2024-03-02T20:32:46.5755429Z   .get_by_identity_token
2024-03-02T20:32:46.5756867Z     when the identity_token provided does not match any AccountRequest
2024-03-02T20:32:46.5795952Z       should return nil
2024-03-02T20:32:46.5796791Z     when the identity_token corresponds to an existing AccountRequest
2024-03-02T20:32:46.5895641Z       should return the corresponding AccountRequest
2024-03-02T20:32:46.5896322Z   versioning
2024-03-02T20:32:46.5931995Z     is expected to be versioned
2024-03-02T20:32:46.5932537Z   validations
2024-03-02T20:32:46.6084772Z     is expected to validate that :email cannot be empty/falsy
2024-03-02T20:32:46.6203967Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-02T20:32:46.6304613Z     is expected not to allow :email to be ‹"not_email"›
2024-03-02T20:32:46.6404411Z     is expected to allow :email to be ‹"socorro_yundt@prosacco.test"›
2024-03-02T20:32:46.6543580Z     is expected to validate that :name cannot be empty/falsy
2024-03-02T20:32:46.6673112Z     is expected to validate that :email is case-sensitively unique
2024-03-02T20:32:46.6792501Z     is expected to validate that the length of :request_details is at least 50
2024-03-02T20:32:46.6793652Z     when the email provided is already used by an existing organization
2024-03-02T20:32:46.8529150Z       should not allow the email
2024-03-02T20:32:46.8529983Z     when the email provided is already used by an existing user
2024-03-02T20:32:46.8722018Z       should not allow the email
2024-03-02T20:32:46.8722730Z 
2024-03-02T20:32:46.8722979Z Reports::AcquisitionReportService
2024-03-02T20:32:46.8723886Z   acquisition report
2024-03-02T20:32:47.7790380Z     should return the proper results on #report
2024-03-02T20:32:47.7790936Z 
2024-03-02T20:32:47.7791137Z PartnerMailerJob
2024-03-02T20:32:47.7792044Z   conditionally sending the emails
2024-03-02T20:32:47.9690191Z     does not send mail for past distributions
2024-03-02T20:32:48.2722097Z     sends mail for future distributions immediately
2024-03-02T20:32:48.2722973Z     when the distribution is for a deactivated partner
2024-03-02T20:32:48.4697641Z       does not send the email
2024-03-02T20:32:48.4698730Z 
2024-03-02T20:32:48.4698991Z InventoryAggregate
2024-03-02T20:32:48.4700630Z   validation
2024-03-02T20:32:48.4701712Z     current event is incorrect
2024-03-02T20:32:48.7053237Z       should raise a bare error
2024-03-02T20:32:48.7053702Z     subsequent event is incorrect
2024-03-02T20:32:48.9974191Z       should add the event to the message
2024-03-02T20:32:48.9974949Z   individual events
2024-03-02T20:32:49.2957294Z     should process a distribution event
2024-03-02T20:32:49.6090452Z     should process a purchase destroyed event
2024-03-02T20:32:50.0014501Z     should process a transfer destroy event
2024-03-02T20:32:50.4179120Z     should process a donation destroyed event
2024-03-02T20:32:50.7094747Z     should process a donation event after a new storage location is created
2024-03-02T20:32:51.0044251Z     should process a purchase event
2024-03-02T20:32:51.2840724Z     should process a snapshot event
2024-03-02T20:32:51.5691077Z     should process a transfer event
2024-03-02T20:32:51.8990830Z     should process a distribution destroyed event
2024-03-02T20:32:52.2098621Z     should process an audit event
2024-03-02T20:32:52.5947889Z     should process a kit deallocation event
2024-03-02T20:32:52.8713116Z     should process a donation event
2024-03-02T20:32:53.1808350Z     should process an adjustment event
2024-03-02T20:32:53.5005575Z     should process a kit allocation event
2024-03-02T20:32:53.5006281Z   multiple events
2024-03-02T20:32:53.8104195Z     should handle intervening audits
2024-03-02T20:32:54.0676818Z     should ignore unusable snapshots
2024-03-02T20:32:54.3242755Z     should handle changing storage location
2024-03-02T20:32:54.7279107Z     should process multiple events
2024-03-02T20:32:54.9904893Z     should handle timing correctly
2024-03-02T20:32:54.9905347Z 
2024-03-02T20:32:54.9905782Z Reports::PartnerInfoReportService
2024-03-02T20:32:54.9906808Z   #report
2024-03-02T20:32:55.2570867Z     should report normal values (FAILED - 2)
2024-03-02T20:32:55.4249875Z     should report zero values
2024-03-02T20:32:55.4250375Z 
2024-03-02T20:32:55.4250512Z Event
2024-03-02T20:32:55.4251468Z   #most_recent_snapshot
2024-03-02T20:32:55.6637620Z     should include the last usable snapshot
2024-03-02T20:32:55.9009478Z     should not include an unusable snapshot
2024-03-02T20:32:55.9012642Z 
2024-03-02T20:32:55.9012948Z ItemsInTotalQuery
2024-03-02T20:32:55.9013785Z   items_in_total_query
2024-03-02T20:32:56.0688815Z     returns a sum total of all in-flows
2024-03-02T20:32:56.4367929Z     counts shared items together
2024-03-02T20:32:56.7076542Z     does not count donations, purchases, adjustments to other storage locations
2024-03-02T20:32:56.9367819Z     does not count transfers going in the negative direction
2024-03-02T20:32:57.1547833Z     does not count negative adjustments towards in-flow
2024-03-02T20:32:57.1548437Z 
2024-03-02T20:32:57.1548627Z RequestsConfirmationMailer
2024-03-02T20:32:57.1852598Z   pairs the right quantities with the right item names
2024-03-02T20:32:57.2038050Z   handles duplicates
2024-03-02T20:32:57.2038574Z   #confirmation_email
2024-03-02T20:32:57.2214238Z     renders the body
2024-03-02T20:32:57.2353499Z     renders the headers
2024-03-02T20:32:57.2354230Z 
2024-03-02T20:32:57.2354396Z Manufacturer
2024-03-02T20:32:57.2356007Z   Private Methods
2024-03-02T20:32:57.2356540Z     #exists_in_org?
2024-03-02T20:32:57.4115526Z       returns true if manufacturer exists in an organization
2024-03-02T20:32:57.4116041Z   Methods
2024-03-02T20:32:57.4116387Z     volume
2024-03-02T20:32:57.4801527Z       retrieves the amount of product that has been donated by manufacturer
2024-03-02T20:32:57.6223525Z       ignores the amount of product from other manufacturers
2024-03-02T20:32:57.7597235Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-02T20:32:57.7597906Z   versioning
2024-03-02T20:32:57.7638113Z     is expected to be versioned
2024-03-02T20:32:57.7638683Z   Validations
2024-03-02T20:32:57.9296332Z     must belong to an organization
2024-03-02T20:32:57.9386534Z     must have a unique name within organization
2024-03-02T20:32:57.9388889Z 
2024-03-02T20:32:57.9389121Z Distribution
2024-03-02T20:32:57.9391036Z   Scopes >
2024-03-02T20:32:57.9392218Z     by_location >
2024-03-02T20:32:57.9892620Z       only returns distributions with given location id
2024-03-02T20:32:57.9893353Z     this_week >
2024-03-02T20:32:57.9894047Z       When it's Tuesday (mid-week)
2024-03-02T20:32:58.0582216Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-02T20:32:58.0583384Z       When it's Sunday (end of the week)
2024-03-02T20:32:58.1137332Z         doesn't include distributions past Sunday
2024-03-02T20:32:58.1138016Z     by_item_id >
2024-03-02T20:32:58.2555119Z       only returns distributions with given item id
2024-03-02T20:32:58.2555621Z     during >
2024-03-02T20:32:58.3310271Z       returns all distributions created between two dates
2024-03-02T20:32:58.3310906Z     by_partner >
2024-03-02T20:32:58.3831534Z       only returns distributions with given partner id
2024-03-02T20:32:58.3832272Z   Methods >
2024-03-02T20:32:58.3832808Z     #copy_from_request
2024-03-02T20:32:58.4066805Z       copy over relevant request information into the distrubution
2024-03-02T20:32:58.4067638Z     #combine_duplicates
2024-03-02T20:32:58.4501021Z       condenses duplicate line_items if the item_ids match
2024-03-02T20:32:58.4501747Z     #future?
2024-03-02T20:32:58.4502736Z       when issued_at has passed
2024-03-02T20:32:58.4800388Z         returns false
2024-03-02T20:32:58.4800896Z       when issued_at has not passed
2024-03-02T20:32:58.5073316Z         returns true
2024-03-02T20:32:58.5073843Z     #copy_line_items
2024-03-02T20:32:58.5490776Z       replicates line_items from a donation into a distribution
2024-03-02T20:32:58.5491441Z     #distributed_at
2024-03-02T20:32:58.5982067Z       displays explicit issued_at date
2024-03-02T20:32:58.6241782Z       shows the hour and minutes if it has been provided
2024-03-02T20:32:58.6242499Z   versioning
2024-03-02T20:32:58.6280097Z     is expected to be versioned
2024-03-02T20:32:58.6280659Z   behaves like itemizable
2024-03-02T20:32:58.6281402Z     .line_items
2024-03-02T20:32:58.6282375Z       combine!
2024-03-02T20:32:58.6832657Z         incrementally combines line_items on donations that have already been created
2024-03-02T20:32:58.7271033Z         combines multiple line_items with the same item_id into a single record
2024-03-02T20:32:58.7271939Z       quantities_by_name
2024-03-02T20:32:58.8169090Z         leaves out zero-quantitied items if requested
2024-03-02T20:32:58.9057518Z         returns a hash of items with id, name, and quantity
2024-03-02T20:32:58.9058625Z       total
2024-03-02T20:32:58.9930362Z         has an item total
2024-03-02T20:32:58.9930879Z       sorted
2024-03-02T20:32:59.1126332Z         displays the items, sorted by name
2024-03-02T20:32:59.1127030Z     .to_a
2024-03-02T20:32:59.1127947Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T20:32:59.1477732Z         raises an error
2024-03-02T20:32:59.1478359Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T20:32:59.1824381Z         calls line_item_values
2024-03-02T20:32:59.1825090Z   Callbacks >
2024-03-02T20:32:59.2331119Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-02T20:32:59.2332129Z     #before_save
2024-03-02T20:32:59.2332553Z       #reset_shipping_cost
2024-03-02T20:32:59.2333100Z         when delivery_method is other then shipped
2024-03-02T20:32:59.2667033Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-02T20:32:59.2668000Z   Validations >
2024-03-02T20:32:59.2729799Z     must belong to an organization
2024-03-02T20:32:59.2767293Z     ensures that any included items are found in the associated storage location
2024-03-02T20:32:59.2818097Z     requires a partner
2024-03-02T20:32:59.2978890Z     ensures the associated line_items are invalid with a zero quantity
2024-03-02T20:32:59.3030244Z     requires a storage location
2024-03-02T20:32:59.3446342Z     ensures the associated line_items are valid
2024-03-02T20:32:59.3506182Z     ensures that the issued at is no earlier than 2000
2024-03-02T20:32:59.3664127Z     ensures the associated line_items are invalid with a nil quantity
2024-03-02T20:32:59.3665033Z     when delivery method is shipped
2024-03-02T20:32:59.3665842Z       shipping cost is none negative
2024-03-02T20:32:59.3937889Z         allows to save distribution
2024-03-02T20:32:59.3938527Z       shipping cost is negative
2024-03-02T20:32:59.3997443Z         will not allow to save distribution
2024-03-02T20:32:59.3998145Z     when delivery method is other then shipped
2024-03-02T20:32:59.4258856Z       allows to save distribution
2024-03-02T20:32:59.4259470Z   CSV export >
2024-03-02T20:32:59.4260382Z     for_csv_export >
2024-03-02T20:32:59.7574096Z       filters only to the given organization
2024-03-02T20:33:00.0873246Z       filters only to the given issue time range
2024-03-02T20:33:00.4060199Z       filters only to the given filter
2024-03-02T20:33:00.8200376Z     csv_export_attributes
2024-03-02T20:33:00.8201075Z       returns the set of attributes which define a row in case of distribution export
2024-03-02T20:33:00.8201795Z 
2024-03-02T20:33:00.8201960Z ProductDriveHelper
2024-03-02T20:33:00.8203019Z   #is_virtual
2024-03-02T20:33:00.8205118Z     when the product drive wasn't held virtually
2024-03-02T20:33:00.8264799Z       is expected to eq "No"
2024-03-02T20:33:00.8265631Z     when the product drive was held virtually
2024-03-02T20:33:00.8318306Z       is expected to eq "Yes"
2024-03-02T20:33:00.8319291Z     when a product drive was not provided
2024-03-02T20:33:00.8362733Z       with blank argument
2024-03-02T20:33:00.8405700Z       without argument
2024-03-02T20:33:00.8406698Z 
2024-03-02T20:33:00.8407005Z KitAllocation
2024-03-02T20:33:00.8410586Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-02T20:33:00.8412039Z   versioning
2024-03-02T20:33:00.8493248Z     is expected to be versioned
2024-03-02T20:33:00.8493673Z 
2024-03-02T20:33:00.8493968Z HelpController
2024-03-02T20:33:00.8494970Z   While signed in as a normal user >
2024-03-02T20:33:00.8495742Z     GET #show
2024-03-02T20:33:00.8589450Z       does not display help page when the user logs out
2024-03-02T20:33:00.8744618Z       returns http success
2024-03-02T20:33:00.8746158Z 
2024-03-02T20:33:00.8746382Z TransfersController
2024-03-02T20:33:00.8747305Z   While not signed in
2024-03-02T20:33:00.8891361Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T20:33:00.8892101Z   While signed in
2024-03-02T20:33:00.8892815Z     GET #index
2024-03-02T20:33:00.9038643Z       returns http success
2024-03-02T20:33:00.9039200Z       when filtering by date
2024-03-02T20:33:00.9039773Z         when date parameters are not supplied
2024-03-02T20:33:00.9411223Z           returns all objects
2024-03-02T20:33:00.9411854Z         when date parameters are supplied
2024-03-02T20:33:00.9780219Z           only returns the correct obejects
2024-03-02T20:33:00.9780892Z     GET #show
2024-03-02T20:33:01.0037878Z       returns http success
2024-03-02T20:33:01.0038430Z     POST #create
2024-03-02T20:33:01.0481165Z       redirects to #show when successful
2024-03-02T20:33:01.0620273Z       renders to #new when failing
2024-03-02T20:33:01.0620874Z     GET #new
2024-03-02T20:33:01.0740886Z       returns http success
2024-03-02T20:33:01.0741476Z     Looking at a different organization
2024-03-02T20:33:01.2676605Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T20:33:01.2677329Z 
2024-03-02T20:33:01.2677499Z RemoveRoleService
2024-03-02T20:33:01.2677897Z   #call
2024-03-02T20:33:01.2679459Z     when not enough information provided
2024-03-02T20:33:01.4598441Z       should raise an error
2024-03-02T20:33:01.4599071Z     when the role does not exist
2024-03-02T20:33:01.6467177Z       should raise an error
2024-03-02T20:33:01.6467605Z     when the role exists
2024-03-02T20:33:01.8551140Z       should remove the admin role when removing user role
2024-03-02T20:33:02.0476492Z       should work with a type and ID instead of role ID
2024-03-02T20:33:02.2416665Z       should remove the role
2024-03-02T20:33:02.2417312Z 
2024-03-02T20:33:02.2417513Z OrganizationUpdateService
2024-03-02T20:33:02.2418830Z   #update_partner_flags
2024-03-02T20:33:02.2419851Z     when request flags have changed
2024-03-02T20:33:02.4766560Z       should update partners when disabling child and individual request flags
2024-03-02T20:33:02.6975055Z       should update partners when disabling quantity-based request flags
2024-03-02T20:33:02.9172196Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-02T20:33:02.9172984Z     when request flags haven't changed
2024-03-02T20:33:03.1379284Z       should not update partners
2024-03-02T20:33:03.1379940Z   #update
2024-03-02T20:33:03.1380835Z     when object is invalid
2024-03-02T20:33:03.3138927Z       should not update and return false
2024-03-02T20:33:03.3139530Z     when object is valid
2024-03-02T20:33:03.4927820Z       should update and return true
2024-03-02T20:33:03.4928339Z     when organization has partners
2024-03-02T20:33:03.4929308Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-02T20:33:03.7250183Z         should allow the disabling of request flags in organization and its partners
2024-03-02T20:33:03.7251238Z       when all of a single partner's request flags will be disabled
2024-03-02T20:33:03.9469299Z         should add an error message to the organization
2024-03-02T20:33:04.2951283Z         should NOT change request flags in organization or its partners
2024-03-02T20:33:04.2955621Z 
2024-03-02T20:33:04.2955818Z Audit
2024-03-02T20:33:04.2957176Z   Validations >
2024-03-02T20:33:04.3383109Z     must belong to an organization admin of its organization
2024-03-02T20:33:04.4228157Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-02T20:33:04.4792991Z     can not have line items that has quantity as negative integer
2024-03-02T20:33:04.5378268Z     can have line items that has quantity as a positive integer
2024-03-02T20:33:04.5670511Z     must belong to an organization
2024-03-02T20:33:04.6226822Z     cannot have duplicate line items
2024-03-02T20:33:04.6787682Z     can have line items that has quantity as zero
2024-03-02T20:33:04.6788387Z   versioning
2024-03-02T20:33:04.6828263Z     is expected to be versioned
2024-03-02T20:33:04.6828894Z   behaves like itemizable
2024-03-02T20:33:04.6829555Z     .to_a
2024-03-02T20:33:04.6830682Z       with Flipper flag :deprecate_to_a enabled
2024-03-02T20:33:04.7336112Z         raises an error
2024-03-02T20:33:04.7336778Z       with Flipper flag :deprecate_to_a disabled
2024-03-02T20:33:04.7848195Z         calls line_item_values
2024-03-02T20:33:04.7848852Z     .line_items
2024-03-02T20:33:04.7849970Z       sorted
2024-03-02T20:33:04.9007940Z         displays the items, sorted by name
2024-03-02T20:33:04.9008538Z       combine!
2024-03-02T20:33:04.9379922Z         incrementally combines line_items on donations that have already been created
2024-03-02T20:33:04.9932508Z         combines multiple line_items with the same item_id into a single record
2024-03-02T20:33:04.9933440Z       total
2024-03-02T20:33:05.0727845Z         has an item total
2024-03-02T20:33:05.0728372Z       quantities_by_name
2024-03-02T20:33:05.1513260Z         returns a hash of items with id, name, and quantity
2024-03-02T20:33:05.2306111Z         leaves out zero-quantitied items if requested
2024-03-02T20:33:05.2306848Z   Methods >
2024-03-02T20:33:05.4663682Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-02T20:33:05.7957816Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-02T20:33:05.7959093Z   Scopes >
2024-03-02T20:33:05.8386529Z     `at_location` can filter out audits to a specific location
2024-03-02T20:33:05.8387129Z 
2024-03-02T20:33:05.8387319Z ReminderDeadlineMailer
2024-03-02T20:33:05.8388112Z   notify deadline
2024-03-02T20:33:05.8679768Z     renders the subject
2024-03-02T20:33:05.8945910Z     renders the receiver email
2024-03-02T20:33:05.9214369Z     renders the sender email
2024-03-02T20:33:05.9491790Z     renders the body
2024-03-02T20:33:05.9492275Z 
2024-03-02T20:33:05.9492657Z Partners::ChildItemRequest
2024-03-02T20:33:05.9494370Z   #ordered_item_diaperid
2024-03-02T20:33:05.9604954Z     should return the item_id on the item_request
2024-03-02T20:33:05.9605657Z   #quantity
2024-03-02T20:33:05.9646649Z     should return the quantity divided by the number of children
2024-03-02T20:33:05.9647434Z   versioning
2024-03-02T20:33:05.9681672Z     is expected to be versioned
2024-03-02T20:33:05.9682238Z   associations
2024-03-02T20:33:05.9725988Z     is expected to belong to authorized_family_member optional: true
2024-03-02T20:33:05.9769338Z     is expected to belong to child required: true
2024-03-02T20:33:05.9809480Z     is expected to belong to item_request required: true
2024-03-02T20:33:05.9810125Z 
2024-03-02T20:33:05.9810416Z PartnerRequestRecertificationService
2024-03-02T20:33:05.9811146Z   #call
2024-03-02T20:33:05.9812362Z     when the arguments are correct
2024-03-02T20:33:06.0133417Z       should have no errors
2024-03-02T20:33:06.0448706Z       should queue sending the notice to the partner
2024-03-02T20:33:06.0764820Z       should change the partner status to approved
2024-03-02T20:33:06.0765902Z       but a unexpected error occurred during the save
2024-03-02T20:33:06.0766577Z         for partner approval
2024-03-02T20:33:06.1031653Z           should have an error with the raised error
2024-03-02T20:33:06.1291690Z           should NOT queue sending the notice to the partner
2024-03-02T20:33:06.1569307Z           should not change the partner status to recertification_required
2024-03-02T20:33:06.1570140Z     when the partner is deactivated
2024-03-02T20:33:06.1866227Z       does not send an email
2024-03-02T20:33:06.1866785Z     when the arguments are incorrect
2024-03-02T20:33:06.1867568Z       because the partner has already been requested to recertify
2024-03-02T20:33:06.2160624Z         should return the PartnerRequestRecertificationService object with an error
2024-03-02T20:33:06.2161269Z 
2024-03-02T20:33:06.2161741Z DonationDestroyService
2024-03-02T20:33:06.2162411Z   #call
2024-03-02T20:33:06.2164048Z     when the donation_id matches no Donation owned by the organization
2024-03-02T20:33:06.2210182Z       to not be a success
2024-03-02T20:33:06.2211538Z     when storage_location fails to decrease the inventory of the donation
2024-03-02T20:33:06.2257964Z       to not be a success
2024-03-02T20:33:06.2258517Z     when the donation succesfully gets destroyed
2024-03-02T20:33:06.2511349Z       to be a success
2024-03-02T20:33:06.2513657Z     when the organization_id matches no Organization
2024-03-02T20:33:06.2551702Z       to not be a success
2024-03-02T20:33:06.2552204Z     when the donation destroy fails
2024-03-02T20:33:06.2600518Z       to not be a success
2024-03-02T20:33:06.2601619Z 
2024-03-02T20:33:06.2601954Z Partners::FetchPartnersToRemindNowService
2024-03-02T20:33:06.2602696Z   .fetch
2024-03-02T20:33:06.2603600Z     when there is a partner
2024-03-02T20:33:06.2604794Z       that does NOT have a organization with a global reminder & deadline
2024-03-02T20:33:06.2605993Z         and is a part of a partner group that does have them defined
2024-03-02T20:33:06.2606907Z           that is for today
2024-03-02T20:33:06.2973277Z             should include that partner
2024-03-02T20:33:06.2973927Z             but the partner is deactivated
2024-03-02T20:33:06.3345201Z               should NOT include that partner
2024-03-02T20:33:06.3346110Z           that is not for today
2024-03-02T20:33:06.3695050Z             should NOT include that partner
2024-03-02T20:33:06.3695907Z       that has an organization with a global reminder & deadline
2024-03-02T20:33:06.3696883Z         that is not for today
2024-03-02T20:33:06.4000080Z           should NOT include that partner
2024-03-02T20:33:06.4000776Z         AND a partner group that does have them defined
2024-03-02T20:33:06.4369140Z           should remind based on the partner group instead of the organization level reminder
2024-03-02T20:33:06.4370128Z           but the partner is deactivated
2024-03-02T20:33:06.4775871Z             should NOT include that partner
2024-03-02T20:33:06.4776549Z         that is for today
2024-03-02T20:33:06.5078089Z           should include that partner
2024-03-02T20:33:06.5080963Z           and has send_reminder=false
2024-03-02T20:33:06.5413005Z             should NOT include that partner
2024-03-02T20:33:06.5413603Z           but the partner is deactivated
2024-03-02T20:33:06.5732125Z             should NOT include that partner
2024-03-02T20:33:06.5733709Z 
2024-03-02T20:33:06.5733991Z PartnerCreateService
2024-03-02T20:33:06.5734749Z   #call
2024-03-02T20:33:06.7479281Z     should return an instance of itself
2024-03-02T20:33:06.7479942Z     when the arguments are valid
2024-03-02T20:33:06.9337229Z       should create a new partner record with the organization provided
2024-03-02T20:33:07.1211633Z       should create the associated partner profile data
2024-03-02T20:33:07.1212212Z       but there was an unexpected issue with saving the
2024-03-02T20:33:07.1213066Z         Partners::Profile record
2024-03-02T20:33:07.3008029Z           should not create the associated partner records
2024-03-02T20:33:07.4789579Z           should not create the partner record for the organization
2024-03-02T20:33:07.4790148Z         Partner record
2024-03-02T20:33:07.6614505Z           should not create the associated partner records
2024-03-02T20:33:07.8428662Z           should not create the partner record for the organization
2024-03-02T20:33:07.8429486Z     when the arguments are incorrect
2024-03-02T20:33:07.8430235Z       beacuse the partner_attrs are invalid
2024-03-02T20:33:08.0155494Z         should contain errors related to invalid partner attributes
2024-03-02T20:33:08.0156567Z 
2024-03-02T20:33:08.0156832Z DonationSitesController
2024-03-02T20:33:08.0158282Z   While signed in
2024-03-02T20:33:08.0160054Z     DELETE #destroy
2024-03-02T20:33:08.0379546Z       returns http success
2024-03-02T20:33:08.0380081Z     GET #show
2024-03-02T20:33:08.0518238Z       returns http success
2024-03-02T20:33:08.0518763Z     POST #import_csv
2024-03-02T20:33:08.0519455Z       behaves like csv import
2024-03-02T20:33:08.0520714Z         without a csv file
2024-03-02T20:33:08.0616911Z           redirects to :index
2024-03-02T20:33:08.0709781Z           presents a flash error message
2024-03-02T20:33:08.0710408Z         with a csv file
2024-03-02T20:33:08.0858502Z           redirects to :index
2024-03-02T20:33:08.0981085Z           presents a flash notice message
2024-03-02T20:33:08.1017116Z           invokes .import_csv
2024-03-02T20:33:08.1017685Z         csv file with wrong headers
2024-03-02T20:33:08.1120191Z           presents a flash error message
2024-03-02T20:33:08.1285697Z           redirects to :index
2024-03-02T20:33:08.1286266Z     GET #new
2024-03-02T20:33:08.1399848Z       returns http success
2024-03-02T20:33:08.1400370Z     GET #edit
2024-03-02T20:33:08.1533481Z       returns http success
2024-03-02T20:33:08.1534043Z     Looking at a different organization
2024-03-02T20:33:08.3228503Z       redirects the user to the sign-in page for CRUD actions
2024-03-02T20:33:08.3229088Z     GET #index
2024-03-02T20:33:08.3351004Z       returns http success
2024-03-02T20:33:08.3351670Z   While not signed in
2024-03-02T20:33:08.3410784Z     redirects the user to the sign-in page for CRUD actions
2024-03-02T20:33:08.7996993Z 
2024-03-02T20:33:08.7998437Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-02T20:33:08.7999231Z 
2024-03-02T20:33:08.8000361Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-02T20:33:08.8001490Z      # Temporarily skipped with xit
2024-03-02T20:33:08.8027550Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-02T20:33:08.8028336Z 
2024-03-02T20:33:08.8029790Z   2) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-02T20:33:08.8031428Z      # Not yet implemented
2024-03-02T20:33:08.8032070Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-02T20:33:08.8166879Z 
2024-03-02T20:33:08.8167239Z Failures:
2024-03-02T20:33:08.8167501Z 
2024-03-02T20:33:08.8167834Z   1) ApplicationHelper active_class Returns the controller name
2024-03-02T20:33:08.8168827Z      Failure/Error: if name.include?(controller_path) || name.find { |n| request.path.ends_with?(n) }
2024-03-02T20:33:08.8169517Z 
2024-03-02T20:33:08.8169655Z      NoMethodError:
2024-03-02T20:33:08.8170187Z        undefined method `find' for "foo":String
2024-03-02T20:33:08.8170845Z      # ./app/helpers/application_helper.rb:18:in `active_class'
2024-03-02T20:33:08.8171744Z      # ./spec/helpers/application_helper_spec.rb:32:in `block (3 levels) in <top (required)>'
2024-03-02T20:33:08.8173417Z 
2024-03-02T20:33:08.8173818Z   2) Reports::PartnerInfoReportService#report should report normal values
2024-03-02T20:33:08.8174514Z      Failure/Error:
2024-03-02T20:33:08.8174924Z        expect(report.report).to eq({
2024-03-02T20:33:08.8175597Z                                      entries: { "Agency Type: Career technical training" => 2,
2024-03-02T20:33:08.8176778Z                                                 "Agency Type: Education program" => 1,
2024-03-02T20:33:08.8177482Z                                                 "Number of Partner Agencies" => 3,
2024-03-02T20:33:08.8178379Z                                                 "Zip Codes Served" => "90210-1234, 12345, 09876-3564" },
2024-03-02T20:33:08.8179132Z                                      name: "Partner Agencies and Service Area"
2024-03-02T20:33:08.8179727Z                                    })
2024-03-02T20:33:08.8180052Z 
2024-03-02T20:33:08.8181467Z        expected: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"}, :name=>"Partner Agencies and Service Area"}
2024-03-02T20:33:08.8184236Z             got: {:entries=>{"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number...3, "Zip Codes Served"=>"09876-3564, 90210-1234, 12345"}, :name=>"Partner Agencies and Service Area"}
2024-03-02T20:33:08.8186243Z 
2024-03-02T20:33:08.8186413Z        (compared using ==)
2024-03-02T20:33:08.8186724Z 
2024-03-02T20:33:08.8186853Z        Diff:
2024-03-02T20:33:08.8187273Z        @@ -1 +1 @@
2024-03-02T20:33:08.8188775Z        -:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"90210-1234, 12345, 09876-3564"},
2024-03-02T20:33:08.8191195Z        +:entries => {"Agency Type: Career technical training"=>2, "Agency Type: Education program"=>1, "Number of Partner Agencies"=>3, "Zip Codes Served"=>"09876-3564, 90210-1234, 12345"},
2024-03-02T20:33:08.8193066Z      # ./spec/services/reports/partner_info_report_service_spec.rb:27:in `block (3 levels) in <top (required)>'
2024-03-02T20:33:08.8197199Z 
2024-03-02T20:33:08.8201326Z Finished in 48.86 seconds (files took 8.48 seconds to load)
2024-03-02T20:33:08.8202161Z 576 examples, 2 failures, 2 pending
2024-03-02T20:33:08.8202571Z 
2024-03-02T20:33:08.8202761Z Failed examples:
2024-03-02T20:33:08.8203022Z 
2024-03-02T20:33:08.8203787Z rspec ./spec/helpers/application_helper_spec.rb:31 # ApplicationHelper active_class Returns the controller name
2024-03-02T20:33:08.8205722Z rspec ./spec/services/reports/partner_info_report_service_spec.rb:19 # Reports::PartnerInfoReportService#report should report normal values
2024-03-02T20:33:08.8206906Z 
2024-03-02T20:33:08.8207101Z Randomized with seed 62222
2024-03-02T20:33:08.8207434Z 
2024-03-02T20:33:09.3398860Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T20:33:09.3400348Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3797 / 6462 LOC (58.76%) covered.
2024-03-02T20:33:09.3963558Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/models/audit_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/models/view/inventory_spec.rb" "spec/models/item_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/request_item_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/account_request_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/event_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/models/vendor_spec.rb" "spec/models/partners/family_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/models/question_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/partner_group_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/users_role_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/request_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" failed
2024-03-02T20:33:09.7874970Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-02T20:33:09.7876769Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10731 LOC (0.35%) covered.
2024-03-02T20:33:09.8159436Z ##[error]Process completed with exit code 1.
