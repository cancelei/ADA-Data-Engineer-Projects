2024-02-21T09:03:52.0187547Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-21T09:03:52.0188533Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-21T09:03:52.0216591Z shell: /usr/bin/bash -e {0}
2024-02-21T09:03:52.0216982Z env:
2024-02-21T09:03:52.0217310Z   POSTGRES_HOST: localhost
2024-02-21T09:03:52.0217759Z   DATABASE_HOST: localhost
2024-02-21T09:03:52.0218099Z   PG_USERNAME: postgres
2024-02-21T09:03:52.0218478Z   PG_PASSWORD: password
2024-02-21T09:03:52.0218921Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-21T09:03:52.0219337Z   POSTGRES_PORT: 5432
2024-02-21T09:03:52.0220072Z   PGHOST: localhost
2024-02-21T09:03:52.0220389Z   PGUSER: postgres
2024-02-21T09:03:52.0220741Z   RAILS_ENV: test
2024-02-21T09:03:52.0221149Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-21T09:03:52.0221601Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-21T09:03:52.0221987Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-21T09:03:52.0222444Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-21T09:03:52.0223040Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-21T09:03:52.0223704Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-21T09:03:52.0224362Z   EVENTS_READ: true
2024-02-21T09:03:52.0224652Z ##[endgroup]
2024-02-21T09:03:58.0335197Z W, [2024-02-21T09:03:58.033069 #2321]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-21T09:03:58.0336724Z W, [2024-02-21T09:03:58.033138 #2321]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:03:58.0338323Z W, [2024-02-21T09:03:58.033159 #2321]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:03:58.0342080Z W, [2024-02-21T09:03:58.033187 #2321]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-21T09:04:00.9990130Z W, [2024-02-21T09:04:00.998706 #2321]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-21T09:04:00.9992085Z W, [2024-02-21T09:04:00.998752 #2321]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:04:00.9993819Z W, [2024-02-21T09:04:00.998767 #2321]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:04:00.9996185Z W, [2024-02-21T09:04:00.998814 #2321]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-21T09:04:01.0049253Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-21T09:04:09.8791194Z 
2024-02-21T09:04:09.8792145Z Randomized with seed 28202
2024-02-21T09:04:10.8989514Z 
2024-02-21T09:04:10.8990601Z Admin Organization Management
2024-02-21T09:04:10.8991579Z   While signed in as an Administrative User (super admin)
2024-02-21T09:04:22.4944840Z     can view organization details
2024-02-21T09:04:23.6088803Z     filters by organizations by name in organizations index page
2024-02-21T09:04:25.8719835Z     creates a new organization
2024-02-21T09:04:25.8721016Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-21T09:04:27.8630501Z     creates a new organization
2024-02-21T09:04:27.8631258Z 
2024-02-21T09:04:27.8631490Z Organization management
2024-02-21T09:04:27.8633053Z   while signed in as a normal user
2024-02-21T09:04:28.3798504Z     cannot see 'Make user' button for admins
2024-02-21T09:04:28.8688546Z     can see summary details about the organization as a user
2024-02-21T09:04:28.8689300Z   while signed in as an organization admin
2024-02-21T09:04:29.4028052Z     can re-invite a user to an organization after 7 days
2024-02-21T09:04:30.4867989Z     can deactivate a user in the organization
2024-02-21T09:04:31.0058296Z     can see 'Make user' button for admins
2024-02-21T09:04:31.9992158Z     can re-activate a user in the organization
2024-02-21T09:04:32.9981111Z     can add a new user to an organization
2024-02-21T09:04:32.9982254Z     Editing the organization
2024-02-21T09:04:33.8874571Z       can set a default storage location on the organization
2024-02-21T09:04:34.9635827Z       can select if the org distributes essentials monthly
2024-02-21T09:04:36.0602523Z       can enable if the org uses single step invite and approve partner process
2024-02-21T09:04:37.1006995Z       can select if the org repackages essentials
2024-02-21T09:04:38.1383851Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-21T09:04:39.3622846Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-21T09:04:45.7478239Z       can select and deselect Required Partner Fields
2024-02-21T09:04:46.6151178Z       can set the NDBN Member ID
2024-02-21T09:04:47.5122434Z       can set a reminder and a deadline day
2024-02-21T09:04:48.5596532Z       can select if the org shows year-to-date values on the distribution printout
2024-02-21T09:04:48.5597803Z     Viewing the organization
2024-02-21T09:04:49.1435456Z       can view organization details
2024-02-21T09:04:49.1436974Z 
2024-02-21T09:04:49.1437242Z Purchases
2024-02-21T09:04:49.1438831Z   while signed in as an organization admin
2024-02-21T09:04:50.3811837Z     allows deletion of a purchase
2024-02-21T09:04:50.3812700Z   while signed in as a normal user
2024-02-21T09:04:50.3813613Z     When creating a new purchase
2024-02-21T09:04:50.9464011Z       should not display inactive storage locations in dropdown
2024-02-21T09:04:50.9465175Z       Editing purchase
2024-02-21T09:04:51.5931961Z         A user can view another organizations purchase
2024-02-21T09:04:52.1129370Z         A user can see purchased_from value
2024-02-21T09:04:52.1132654Z       via manual entry
2024-02-21T09:04:53.1807349Z         User can create vendor from purchase
2024-02-21T09:04:54.1197714Z         User can create a purchase using dollars decimal amount
2024-02-21T09:04:55.3497073Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-21T09:04:56.4870654Z         User can create a purchase IN THE PAST
2024-02-21T09:04:57.5489637Z         Does not include inactive items in the line item fields
2024-02-21T09:04:57.5490711Z         when creating a purchase incorrectly
2024-02-21T09:04:58.5905665Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-21T09:04:59.4215602Z           should display failure with error messages
2024-02-21T09:04:59.4216605Z       via barcode entry
2024-02-21T09:05:00.4657863Z         User scan same barcode 2 times
2024-02-21T09:05:01.2184259Z         a user can add items via scanning them in by barcode
2024-02-21T09:05:02.4639353Z         a user can add items that do not yet have a barcode
2024-02-21T09:05:02.4640311Z     When visiting the index page
2024-02-21T09:05:02.4641565Z       In the middle of the year
2024-02-21T09:05:03.2430812Z         User sees purchased date column
2024-02-21T09:05:04.0263384Z         User sees total purchases value
2024-02-21T09:05:04.8556761Z         User can click to the new purchase form
2024-02-21T09:05:04.8557545Z       When filtering on the index page
2024-02-21T09:05:05.7250753Z         User can filter the #index by storage location
2024-02-21T09:05:06.5947747Z         User can filter the #index by vendor
2024-02-21T09:05:06.5948509Z         behaves like Date Range Picker
2024-02-21T09:05:06.5949494Z           when choosing 'All Time'
2024-02-21T09:05:07.5806908Z             shows all the records
2024-02-21T09:05:07.5808277Z           when choosing 'Last Month'
2024-02-21T09:05:08.6768913Z             shows only 2 of the records
2024-02-21T09:05:08.6771753Z           when choosing a date range that only includes the previous week
2024-02-21T09:05:09.6568087Z             shows only 1 record
2024-02-21T09:05:09.6569388Z     When visiting an existing purchase
2024-02-21T09:05:10.1260134Z       does not allow deletion of a purchase
2024-02-21T09:05:10.1261000Z 
2024-02-21T09:05:10.1261375Z User account management
2024-02-21T09:05:10.1263068Z   when not in staging
2024-02-21T09:05:10.9093466Z     should fail when the email is invalid
2024-02-21T09:05:11.8611842Z     should change the email
2024-02-21T09:05:12.7813081Z     should change an user name
2024-02-21T09:05:12.7814438Z   when in staging
2024-02-21T09:05:13.2574163Z     should display staging warning
2024-02-21T09:05:13.7372815Z     should not allow the user to change staging credentials
2024-02-21T09:05:13.7373632Z 
2024-02-21T09:05:13.7373958Z Vendor
2024-02-21T09:05:13.7375481Z   when creating a new vendor
2024-02-21T09:05:14.5028916Z     cannot add a new vendor instance with empty attributes
2024-02-21T09:05:15.3315232Z     can create a new vendor instance as a user
2024-02-21T09:05:15.3316305Z   When vendor have purchases associated with them already
2024-02-21T09:05:15.9876736Z     can have a single vendor show semi-detailed stats about purchases
2024-02-21T09:05:16.6597756Z     can have existing vendors show in the #index with some summary stats
2024-02-21T09:05:16.6598922Z   when editing an existing vendor
2024-02-21T09:05:17.5469678Z     does not update a vendor with empty attributes
2024-02-21T09:05:18.4479768Z     can update the contact info for a vendor as a user
2024-02-21T09:05:18.4481173Z   When a user views the index page
2024-02-21T09:05:18.9702631Z     should have the vendor names in alphabetical order
2024-02-21T09:05:18.9704230Z 
2024-02-21T09:05:18.9704656Z StorageLocations
2024-02-21T09:05:18.9706638Z   While signed in
2024-02-21T09:05:18.9708541Z     GET #new
2024-02-21T09:05:19.2631052Z       returns http success
2024-02-21T09:05:19.2632766Z     GET #index
2024-02-21T09:05:19.2633354Z       csv
2024-02-21T09:05:19.3819797Z         includes headers followed by alphabetized item names
2024-02-21T09:05:19.4039993Z         succeeds
2024-02-21T09:05:19.4041136Z       html
2024-02-21T09:05:19.4445527Z         succeeds
2024-02-21T09:05:19.4446252Z         with inactive locations
2024-02-21T09:05:19.4909205Z           does not includes the inactive location
2024-02-21T09:05:19.4910222Z           with include_inactive_locations
2024-02-21T09:05:19.5410961Z             includes the inactive location
2024-02-21T09:05:19.5412259Z     GET #destroy
2024-02-21T09:05:19.5873600Z       redirects to #index
2024-02-21T09:05:19.5874301Z     GET #inventory
2024-02-21T09:05:19.5875439Z       when also including inactive items
2024-02-21T09:05:19.6688759Z         returns a collection that also includes items that have been deactivated
2024-02-21T09:05:19.6689926Z       when also including omitted items
2024-02-21T09:05:19.7297212Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-21T09:05:19.7895833Z         contains a collection of ducktyped entries that respond the same
2024-02-21T09:05:19.7896838Z       without any overrides
2024-02-21T09:05:19.8579737Z         returns a collection that only includes items at the storage location
2024-02-21T09:05:19.8581081Z     PUT #reactivate
2024-02-21T09:05:19.8801510Z       undiscards
2024-02-21T09:05:19.8802220Z     GET #show
2024-02-21T09:05:19.8803363Z       csv
2024-02-21T09:05:19.9404612Z         should be successful
2024-02-21T09:05:19.9405498Z       html
2024-02-21T09:05:20.0281677Z         should return a correct response
2024-02-21T09:05:20.0282617Z         with version date set
2024-02-21T09:05:20.0283588Z           with no version found
2024-02-21T09:05:20.1120132Z             should show N/A
2024-02-21T09:05:20.1120886Z           with a version found
2024-02-21T09:05:20.2037931Z             should show the version specified
2024-02-21T09:05:20.2038840Z     POST #import_csv
2024-02-21T09:05:20.2039853Z       without a csv file
2024-02-21T09:05:20.2186808Z         presents a flash error message
2024-02-21T09:05:20.2335487Z         redirects to :index
2024-02-21T09:05:20.2336535Z       csv file with wrong headers
2024-02-21T09:05:20.2512120Z         redirects
2024-02-21T09:05:20.2689435Z         presents a flash error message
2024-02-21T09:05:20.2692022Z       with a csv file
2024-02-21T09:05:20.2934305Z         presents a flash notice message
2024-02-21T09:05:20.3014104Z         invokes .import_csv
2024-02-21T09:05:20.3237278Z         redirects
2024-02-21T09:05:20.3238015Z     Looking at a different organization
2024-02-21T09:05:20.5303809Z       redirects the user to the sign-in page for CRUD actions
2024-02-21T09:05:20.5304881Z     PUT #deactivate
2024-02-21T09:05:20.5535603Z       discards
2024-02-21T09:05:20.5536517Z       with inventory
2024-02-21T09:05:20.6135875Z         does not discard
2024-02-21T09:05:20.6136652Z     GET #edit
2024-02-21T09:05:20.6594617Z       returns http success
2024-02-21T09:05:20.6595477Z   While not signed in
2024-02-21T09:05:20.6675295Z     redirects the user to the sign-in page for CRUD actions
2024-02-21T09:05:20.6676003Z 
2024-02-21T09:05:20.6676208Z /partners/children
2024-02-21T09:05:20.6676865Z   GET #index
2024-02-21T09:05:20.7897265Z     should render without any issues
2024-02-21T09:05:20.8471743Z     should export CSV
2024-02-21T09:05:20.8474140Z 
2024-02-21T09:05:20.8474668Z /partners/profiles
2024-02-21T09:05:20.8475989Z   GET #show
2024-02-21T09:05:20.9165018Z     shows correct values for yes/no buttons
2024-02-21T09:05:20.9728700Z     displays the partner
2024-02-21T09:05:20.9729985Z   GET #edit
2024-02-21T09:05:21.1154053Z     does not have default radio button value when value is nil
2024-02-21T09:05:21.2215614Z     displays the partner
2024-02-21T09:05:21.3261040Z     has "Yes" radio button value when value is true
2024-02-21T09:05:21.4389652Z     has "No" radio button value when value is false
2024-02-21T09:05:21.4391014Z   PUT #update
2024-02-21T09:05:21.5185049Z     updates the partner and profile
2024-02-21T09:05:21.5186376Z     with no social media
2024-02-21T09:05:21.6318035Z       shows an error
2024-02-21T09:05:21.6318895Z     when updating an existing value to a blank value
2024-02-21T09:05:21.6964187Z       does store N/A in the database
2024-02-21T09:05:21.7591728Z       does not update other partner profile attributes to blank
2024-02-21T09:05:21.8247131Z       updates the partner profile attribute to a blank value
2024-02-21T09:05:21.8247992Z 
2024-02-21T09:05:21.8248252Z Kit management
2024-02-21T09:05:22.4665126Z   should not display inactive storage locations under allocations
2024-02-21T09:05:24.1054525Z   can allocate and deallocate quantity per storage location from kit index
2024-02-21T09:05:25.1103467Z   can create a new kit as a user with the proper quantity
2024-02-21T09:05:25.1104825Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-21T09:05:26.3012233Z     will not change quantity amounts when allocating
2024-02-21T09:05:26.3013241Z   when there is no kit quantity
2024-02-21T09:05:27.5105918Z     will not change quantity amounts when deallocating
2024-02-21T09:05:27.5107107Z 
2024-02-21T09:05:27.5107427Z Admin::Organizations
2024-02-21T09:05:27.5109820Z   When logged in as a super admin
2024-02-21T09:05:27.5111705Z     GET #show
2024-02-21T09:05:27.7408925Z       returns http success
2024-02-21T09:05:27.7409705Z     PUT #update
2024-02-21T09:05:27.7618170Z       redirect
2024-02-21T09:05:27.7619099Z     PATCH #update
2024-02-21T09:05:27.7619979Z       with a valid update
2024-02-21T09:05:27.9622675Z         redirects to #index
2024-02-21T09:05:27.9623438Z       with an invalid update
2024-02-21T09:05:28.1822031Z         returns http success
2024-02-21T09:05:28.4044115Z         redirects to #edit with an error message
2024-02-21T09:05:28.4045048Z     GET #edit
2024-02-21T09:05:28.6236165Z       returns http success
2024-02-21T09:05:28.6237151Z     GET #index
2024-02-21T09:05:28.6562146Z       returns http success
2024-02-21T09:05:28.6562926Z     DELETE #destroy
2024-02-21T09:05:29.0814223Z       redirects
2024-02-21T09:05:29.0814847Z     GET #new
2024-02-21T09:05:29.1240863Z       returns http success
2024-02-21T09:05:29.1242149Z       when given a token that matches a account request that has already been processed
2024-02-21T09:05:29.3702409Z         should render new with a flash error message
2024-02-21T09:05:29.3703194Z       when given a valid account request token in the query parameters
2024-02-21T09:05:29.4298594Z         should render new with pre populate input fields from the account_request
2024-02-21T09:05:29.4300347Z     DELETE #destroy
2024-02-21T09:05:29.4300977Z       with a valid organization id
2024-02-21T09:05:29.9658005Z         redirects to #index
2024-02-21T09:05:29.9658738Z     POST #create
2024-02-21T09:05:29.9659319Z       with valid params
2024-02-21T09:05:30.3676551Z         creates an organization and redirects to #index
2024-02-21T09:05:30.3677263Z       with invalid params
2024-02-21T09:05:30.4392088Z         does not create an organization and renders #create with an error message
2024-02-21T09:05:30.4393629Z   When logged in as a non-admin user
2024-02-21T09:05:30.4394375Z     GET #new
2024-02-21T09:05:30.4563303Z       redirects
2024-02-21T09:05:30.4567722Z     POST #create
2024-02-21T09:05:30.4752350Z       redirects
2024-02-21T09:05:30.4753422Z     GET #edit
2024-02-21T09:05:30.4913830Z       redirects
2024-02-21T09:05:30.4914895Z     GET #index
2024-02-21T09:05:30.5070744Z       redirects
2024-02-21T09:05:30.5071470Z     PUT #update
2024-02-21T09:05:30.5234795Z       redirects
2024-02-21T09:05:30.5235398Z 
2024-02-21T09:05:30.5235633Z Profiles
2024-02-21T09:05:30.5237123Z   GET #edit
2024-02-21T09:05:30.6304751Z     returns http success
2024-02-21T09:05:30.6305591Z   POST #update
2024-02-21T09:05:30.6306149Z     successful save
2024-02-21T09:05:30.6832213Z       update partner
2024-02-21T09:05:30.7334465Z       redirects to #show
2024-02-21T09:05:30.7336040Z     when updating an existing value to a blank value
2024-02-21T09:05:30.7856221Z       update partner
2024-02-21T09:05:30.8342545Z       should have blank values
2024-02-21T09:05:30.8343065Z 
2024-02-21T09:05:30.8343253Z Audits
2024-02-21T09:05:30.8344322Z   while signed in as an organization admin
2024-02-21T09:05:30.8346267Z     DELETE #destroy
2024-02-21T09:05:30.8346960Z       with valid params
2024-02-21T09:05:30.8819328Z         destroys the audit if the audit's status is `confirms`
2024-02-21T09:05:30.9215047Z         can not destroy the audit if the audit's status is `finalized`
2024-02-21T09:05:30.9636082Z         destroys the audit if the audit's status is `in_progress`
2024-02-21T09:05:30.9637055Z     POST #create
2024-02-21T09:05:30.9637835Z       with invalid params
2024-02-21T09:05:31.0123728Z         assigns a newly created but unsaved audit as @audit
2024-02-21T09:05:31.0580957Z         re-renders the 'new' template
2024-02-21T09:05:31.1192464Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-21T09:05:31.1193781Z       with valid params
2024-02-21T09:05:31.1637888Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-21T09:05:31.2082398Z         redirects to the #show after created audit
2024-02-21T09:05:31.2517355Z         assigns a newly created audit as @audit
2024-02-21T09:05:31.2953528Z         creates a new Audit
2024-02-21T09:05:31.3371161Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-21T09:05:31.3372718Z     POST #finalize
2024-02-21T09:05:31.4089053Z       sets the finalize status and saves an event
2024-02-21T09:05:31.4089929Z     GET #edit
2024-02-21T09:05:31.4792683Z       redirects to #index if the status of audit is not `in_progress`
2024-02-21T09:05:31.5431984Z       is successful if the status of audit is `in_progress`
2024-02-21T09:05:31.5432915Z     GET #show
2024-02-21T09:05:31.6000502Z       is successful
2024-02-21T09:05:31.6001267Z     GET #new
2024-02-21T09:05:31.6417695Z       is successful
2024-02-21T09:05:31.6418713Z     GET #index
2024-02-21T09:05:31.7167145Z       is successful
2024-02-21T09:05:31.7168053Z 
2024-02-21T09:05:31.7168583Z DonationSites
2024-02-21T09:05:31.7170107Z   while signed in
2024-02-21T09:05:31.7171333Z     GET #index
2024-02-21T09:05:31.7173518Z       html
2024-02-21T09:05:31.7684247Z         is expected to be successful
2024-02-21T09:05:31.7685377Z       csv
2024-02-21T09:05:31.7883081Z         is expected to be successful
2024-02-21T09:05:31.7883855Z 
2024-02-21T09:05:31.7884092Z Managing requests
2024-02-21T09:05:31.7886218Z   creating a individuals/family request
2024-02-21T09:05:31.7887244Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:05:31.7888279Z       WHEN they create a request properly
2024-02-21T09:05:31.7889807Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:05:33.9887269Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-21T09:05:33.9888175Z       WHEN they create a request inproperly
2024-02-21T09:05:34.9256683Z         should show an error message with the instructions
2024-02-21T09:05:34.9257506Z   creating a request
2024-02-21T09:05:34.9258542Z     GIVEN a partner user is permitted to make a request
2024-02-21T09:05:34.9260002Z       WHEN they create a request properly
2024-02-21T09:05:34.9261285Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-21T09:05:37.2449220Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-21T09:05:37.2450376Z       WHEN they create a request inproperly by not inputting anything
2024-02-21T09:05:38.1978952Z         should show an error message with the instructions
2024-02-21T09:05:38.1980356Z       WHEN they create a request with only a comment
2024-02-21T09:05:39.2020208Z         should be created without any issue
2024-02-21T09:05:39.2025500Z 
2024-02-21T09:05:39.2026178Z Dashboard
2024-02-21T09:05:39.2027790Z   With a new essentials bank
2024-02-21T09:06:07.3042248Z     displays the getting started guide until the steps are completed
2024-02-21T09:06:07.3042996Z   With an existing essentials bank
2024-02-21T09:06:07.3043745Z     Inventory Totals
2024-02-21T09:06:07.3044611Z       Summary
2024-02-21T09:06:08.0777320Z         displays the on-hand totals
2024-02-21T09:06:08.0778283Z         when constrained to date range
2024-02-21T09:06:09.1897441Z           does not change
2024-02-21T09:06:09.1898412Z     Signage
2024-02-21T09:06:12.1218290Z       shows their organization name unless they have a logo set
2024-02-21T09:06:12.1220548Z     Product Drives
2024-02-21T09:06:12.7643779Z       has a widget for product drive summary data
2024-02-21T09:06:12.7645474Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:06:12.7646739Z         filtering to 'Last Month'
2024-02-21T09:06:14.3539829Z           shows the correct total donations
2024-02-21T09:06:15.9320429Z           shows the correct total money raised
2024-02-21T09:06:17.5259814Z           shows 3 Recent Donation link(s)
2024-02-21T09:06:17.5261330Z       given 1 Product Drive Donation on 2024-02-20 (unless 'All Time'), 4 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:06:17.5262527Z         filtering to 'Today'
2024-02-21T09:06:19.1551797Z           shows 3 Recent Donation link(s)
2024-02-21T09:06:20.8466209Z           shows the correct total money raised
2024-02-21T09:06:22.4716844Z           shows the correct total donations
2024-02-21T09:06:22.4718972Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:06:22.4720564Z         filtering to 'This Month'
2024-02-21T09:06:23.9612124Z           shows the correct total donations
2024-02-21T09:06:25.4236749Z           shows 1 Recent Donation link(s)
2024-02-21T09:06:26.8945035Z           shows the correct total money raised
2024-02-21T09:06:26.8951362Z       given 1 Product Drive Donation on 2022-02-20 (unless 'All Time'), 0 during 2022-02-21..2023-12-26, and 1 on 2023-12-27
2024-02-21T09:06:26.8952871Z         filtering to '' (February 21, 2022 - December 26, 2023)
2024-02-21T09:06:30.3182890Z           shows 0 Recent Donation link(s)
2024-02-21T09:06:31.7753453Z           shows the correct total donations
2024-02-21T09:06:33.2053803Z           shows the correct total money raised
2024-02-21T09:06:33.2055747Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:06:33.2056853Z         filtering to 'This Year'
2024-02-21T09:06:34.8043986Z           shows 1 Recent Donation link(s)
2024-02-21T09:06:36.2691169Z           shows the correct total money raised
2024-02-21T09:06:37.7391371Z           shows the correct total donations
2024-02-21T09:06:37.7392436Z       Product drive behaviour with Mixed Donation types
2024-02-21T09:06:38.5058895Z         only counts product drive money raised
2024-02-21T09:06:39.2698281Z         only shows product drive donations as product drive donations
2024-02-21T09:06:40.0503473Z         only counts product drive donations for product drive
2024-02-21T09:06:40.0505146Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 4 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:06:40.0506042Z         filtering to 'Yesterday'
2024-02-21T09:06:41.6723839Z           shows the correct total money raised
2024-02-21T09:06:43.2880355Z           shows 3 Recent Donation link(s)
2024-02-21T09:06:44.8983038Z           shows the correct total donations
2024-02-21T09:06:44.8984843Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 0 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:06:44.8986642Z         filtering to 'Last 7 Days'
2024-02-21T09:06:46.5387822Z           shows the correct total donations
2024-02-21T09:06:49.9530836Z           shows 0 Recent Donation link(s)
2024-02-21T09:06:51.3742211Z           shows the correct total money raised
2024-02-21T09:06:51.3744088Z       given 1 Product Drive Donation on 2024-01-22 (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:06:51.3745038Z         filtering to 'Last 30 Days'
2024-02-21T09:06:52.9714248Z           shows the correct total money raised
2024-02-21T09:06:54.5858102Z           shows the correct total donations
2024-02-21T09:06:56.2240766Z           shows 3 Recent Donation link(s)
2024-02-21T09:06:56.2241605Z     Manufacturer Donations
2024-02-21T09:06:56.8351379Z       has a link to create a new donation
2024-02-21T09:06:56.8353649Z       given 1 Manufacturer donating on 2022-02-20  (unless 'All Time'), 3 during 2022-02-21..2024-01-14, and 1 on 2024-01-15
2024-02-21T09:06:56.8355165Z         filtering to '' (February 21, 2022 - January 14, 2024)
2024-02-21T09:06:58.6260680Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:06:58.6263303Z       given 1 Manufacturer donating on 2024-01-22  (unless 'All Time'), 8 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:06:58.6265042Z         filtering to 'Last 30 Days'
2024-02-21T09:07:01.2200093Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-21T09:07:01.2201738Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:01.2202691Z         filtering to 'Last Month'
2024-02-21T09:07:02.9251385Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:07:02.9252979Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:02.9253834Z         filtering to 'This Month'
2024-02-21T09:07:04.5535010Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-21T09:07:04.5536702Z       given 1 Manufacturer donating on 2024-02-20  (unless 'All Time'), 0 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:04.5538221Z         filtering to 'Today'
2024-02-21T09:07:06.0550506Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-21T09:07:06.0552664Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 5 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:06.0554029Z         filtering to 'All Time'
2024-02-21T09:07:07.7804127Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T09:07:07.7807412Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:07.7808776Z         filtering to 'Last 7 Days'
2024-02-21T09:07:09.9732969Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-21T09:07:09.9735697Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 5 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:09.9736884Z         filtering to 'This Year'
2024-02-21T09:07:12.1805080Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-21T09:07:12.1807282Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 6 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:12.1808242Z         filtering to 'Yesterday'
2024-02-21T09:07:14.1060689Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-21T09:07:14.1061713Z     Donations
2024-02-21T09:07:15.0696514Z       has a link to create a new donation
2024-02-21T09:07:15.0698272Z       given 1 Donation on 2024-02-14 (only if a valid date), 4 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:15.0699731Z         filtering to 'Last 7 Days'
2024-02-21T09:07:16.6917907Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:16.6919964Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:16.6921039Z         filtering to 'Last Month'
2024-02-21T09:07:18.3141765Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:18.3143702Z       given 1 Donation on 2022-02-20 (only if a valid date), 4 during 2022-02-21..2023-12-27, and 1 on 2023-12-28
2024-02-21T09:07:18.3145200Z         filtering to '' (February 21, 2022 - December 27, 2023)
2024-02-21T09:07:19.9385963Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:19.9387538Z       given 1 Donation on 2024-01-22 (only if a valid date), 1 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:19.9389293Z         filtering to 'Last 30 Days'
2024-02-21T09:07:21.4345890Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:07:21.4347735Z       given 1 Donation on 2024-02-20 (only if a valid date), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:21.4349565Z         filtering to 'Today'
2024-02-21T09:07:22.8861816Z           shows the correct total and 1 Recent Donation link(s)
2024-02-21T09:07:22.8863508Z       given 1 Donation on 2024-02-19 (only if a valid date), 0 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:22.8864315Z         filtering to 'Yesterday'
2024-02-21T09:07:26.3412009Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:07:26.3413773Z       given 1 Donation on 2024-01-31 (only if a valid date), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:26.3414655Z         filtering to 'This Month'
2024-02-21T09:07:29.7627173Z           shows the correct total and 0 Recent Donation link(s)
2024-02-21T09:07:29.7629479Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:29.7631388Z         filtering to 'This Year'
2024-02-21T09:07:31.3704760Z           shows the correct total and 3 Recent Donation link(s)
2024-02-21T09:07:31.3705778Z     Distributions
2024-02-21T09:07:32.3320182Z       has a link to create a new distribution
2024-02-21T09:07:32.3322057Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 3 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:32.3323309Z         filtering to 'Last 7 Days'
2024-02-21T09:07:33.8725392Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:33.8727153Z       given 1 Distribution on 2024-01-22  (unless 'All Time'), 3 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:33.8728274Z         filtering to 'Last 30 Days'
2024-02-21T09:07:35.3850080Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:35.3852159Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:35.3853460Z         filtering to 'All Time'
2024-02-21T09:07:36.8747740Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:07:36.8749599Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 4 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:36.8750760Z         filtering to 'Yesterday'
2024-02-21T09:07:38.4309185Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:38.4311181Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:38.4312851Z         filtering to 'This Month'
2024-02-21T09:07:39.9831488Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:39.9833470Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:39.9834761Z         filtering to 'This Year'
2024-02-21T09:07:41.6845610Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:41.6848320Z       given 1 Distribution on 2022-02-20  (unless 'All Time'), 2 during 2022-02-21..2023-09-19, and 1 on 2023-09-20
2024-02-21T09:07:41.6849811Z         filtering to '' (February 21, 2022 - September 19, 2023)
2024-02-21T09:07:43.1671290Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:07:43.1672931Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:43.1674036Z         filtering to 'Last Month'
2024-02-21T09:07:44.6934881Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-21T09:07:44.6936965Z       given 1 Distribution on 2024-02-20  (unless 'All Time'), 2 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:44.6938708Z         filtering to 'Today'
2024-02-21T09:07:46.1794900Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-21T09:07:46.1796014Z     Purchases
2024-02-21T09:07:47.1091279Z       has a link to create a new purchase
2024-02-21T09:07:47.1092700Z       given 1 Purchase on 2024-01-22  (unless 'All Time'), 4 during 2024-01-23..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:47.1093604Z         filtering to 'Last 30 Days'
2024-02-21T09:07:48.7265240Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:48.7266760Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-21T09:07:48.7267874Z         filtering to 'Last Month'
2024-02-21T09:07:50.3575773Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:50.3577304Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 3 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-21T09:07:50.3578441Z         filtering to 'Yesterday'
2024-02-21T09:07:51.9188256Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:51.9189800Z       given 1 Purchase on 2024-02-20  (unless 'All Time'), 1 during 2024-02-21..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:07:51.9190946Z         filtering to 'Today'
2024-02-21T09:07:53.3845959Z           shows correct 1 Recent Purchase link(s)
2024-02-21T09:07:53.3847543Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-21T09:07:53.3848647Z         filtering to 'This Month'
2024-02-21T09:07:55.0006255Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:55.0007541Z       given 1 Purchase on 2022-02-20  (unless 'All Time'), 4 during 2022-02-21..2023-12-03, and 1 on 2023-12-04
2024-02-21T09:07:55.0008532Z         filtering to '' (February 21, 2022 - December 3, 2023)
2024-02-21T09:07:56.6262578Z           shows correct 3 Recent Purchase link(s)
2024-02-21T09:07:56.6264238Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-21T09:07:56.6265427Z         filtering to 'This Year'
2024-02-21T09:08:00.0351388Z           shows correct 0 Recent Purchase link(s)
2024-02-21T09:08:00.0352984Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 2 during 2024-02-15..2024-02-21, and 1 on 2024-02-22
2024-02-21T09:08:00.0355588Z         filtering to 'Last 7 Days'
2024-02-21T09:08:01.5478710Z           shows correct 2 Recent Purchase link(s)
2024-02-21T09:08:01.5481107Z 
2024-02-21T09:08:01.5483105Z /account_requests
2024-02-21T09:08:01.5483561Z   POST #create
2024-02-21T09:08:01.5484206Z     with valid parameters
2024-02-21T09:08:01.5669642Z       delivers the confirmation email via default queue
2024-02-21T09:08:01.5834811Z       redirects to the created account_request confirmation
2024-02-21T09:08:01.5996485Z       creates a new AccountRequest
2024-02-21T09:08:01.5997204Z     with invalid parameters
2024-02-21T09:08:01.6265942Z       renders a successful response (i.e. to display the 'new' template)
2024-02-21T09:08:01.6488850Z       does not create a new AccountRequest
2024-02-21T09:08:01.6489650Z   GET #confirm
2024-02-21T09:08:01.6490889Z     when given a valid token
2024-02-21T09:08:01.6724666Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-21T09:08:01.6725896Z     when given a invalid token
2024-02-21T09:08:01.6800878Z       should render a error that says that is code provided is invalid
2024-02-21T09:08:01.6801865Z     when given a token that has already been confirmed
2024-02-21T09:08:01.8815775Z       should render a error that says that is code provided is invalid
2024-02-21T09:08:01.8816628Z   GET #new
2024-02-21T09:08:01.8950699Z     renders a successful response
2024-02-21T09:08:01.8951382Z   GET #received
2024-02-21T09:08:01.8951833Z     when given a valid token
2024-02-21T09:08:01.9121360Z       should render the received template
2024-02-21T09:08:01.9122042Z     when given a invalid token
2024-02-21T09:08:01.9194986Z       should render a error that says that is code provided is invalid
2024-02-21T09:08:01.9195853Z   GET #confirmation
2024-02-21T09:08:01.9196591Z     when given a invalid token
2024-02-21T09:08:01.9267788Z       should render a error that says that is code provided is invalid
2024-02-21T09:08:01.9268745Z     when given a token that has already been confirmed
2024-02-21T09:08:02.1211161Z       should render a error that says that is code provided is invalid
2024-02-21T09:08:02.1213220Z     when given a valid token
2024-02-21T09:08:02.1385326Z       should render the confirmation template
2024-02-21T09:08:02.2099419Z W, [2024-02-21T01:08:02.209620 #2371]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-21T09:08:02.2101475Z W, [2024-02-21T01:08:02.209685 #2371]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-21T09:08:02.2103730Z W, [2024-02-21T01:08:02.209701 #2371]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-21T09:08:02.2106228Z W, [2024-02-21T01:08:02.209731 #2371]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-21T09:08:02.2150090Z 
2024-02-21T09:08:02.2150588Z Finished in 3 minutes 52.3 seconds (files took 8.63 seconds to load)
2024-02-21T09:08:02.2151425Z 235 examples, 0 failures
2024-02-21T09:08:02.2151752Z 
2024-02-21T09:08:02.2170142Z Randomized with seed 28202
2024-02-21T09:08:02.2170488Z 
2024-02-21T09:08:02.5189910Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6404 LOC (59.65%) covered.
2024-02-21T09:08:03.0481398Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
