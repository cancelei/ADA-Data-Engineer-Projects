2024-02-17T06:03:09.8156978Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-17T06:03:09.8158163Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-17T06:03:09.8186022Z shell: /usr/bin/bash -e {0}
2024-02-17T06:03:09.8186417Z env:
2024-02-17T06:03:09.8186809Z   POSTGRES_HOST: localhost
2024-02-17T06:03:09.8187203Z   DATABASE_HOST: localhost
2024-02-17T06:03:09.8187533Z   PG_USERNAME: postgres
2024-02-17T06:03:09.8187963Z   PG_PASSWORD: password
2024-02-17T06:03:09.8188346Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-17T06:03:09.8188745Z   POSTGRES_PORT: 5432
2024-02-17T06:03:09.8189126Z   PGHOST: localhost
2024-02-17T06:03:09.8189490Z   PGUSER: postgres
2024-02-17T06:03:09.8189823Z   RAILS_ENV: test
2024-02-17T06:03:09.8190479Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-17T06:03:09.8190939Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-17T06:03:09.8191292Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-17T06:03:09.8191818Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-17T06:03:09.8192398Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-17T06:03:09.8193072Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-17T06:03:09.8193666Z   EVENTS_READ: true
2024-02-17T06:03:09.8193993Z ##[endgroup]
2024-02-17T06:03:15.5891192Z W, [2024-02-17T06:03:15.588788 #2375]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-17T06:03:15.5893165Z W, [2024-02-17T06:03:15.588847 #2375]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-17T06:03:15.5894773Z W, [2024-02-17T06:03:15.588871 #2375]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-17T06:03:15.5897669Z W, [2024-02-17T06:03:15.588902 #2375]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-17T06:03:18.4600662Z W, [2024-02-17T06:03:18.459760 #2375]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-17T06:03:18.4602881Z W, [2024-02-17T06:03:18.459800 #2375]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-17T06:03:18.4605723Z W, [2024-02-17T06:03:18.459814 #2375]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-17T06:03:18.4609838Z W, [2024-02-17T06:03:18.459858 #2375]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-17T06:03:18.4661466Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-17T06:03:26.6677175Z 
2024-02-17T06:03:26.6677946Z Randomized with seed 21532
2024-02-17T06:03:27.5794192Z 
2024-02-17T06:03:27.5794968Z Kit management
2024-02-17T06:03:29.5925183Z   can create a new kit as a user with the proper quantity
2024-02-17T06:03:31.1046023Z   can allocate and deallocate quantity per storage location from kit index
2024-02-17T06:03:31.6913771Z   should not display inactive storage locations under allocations
2024-02-17T06:03:31.6914968Z   when there is no kit quantity
2024-02-17T06:03:32.8784433Z     will not change quantity amounts when deallocating
2024-02-17T06:03:32.8785674Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-17T06:03:33.9888586Z     will not change quantity amounts when allocating
2024-02-17T06:03:33.9889368Z 
2024-02-17T06:03:33.9889669Z Admin::Organizations
2024-02-17T06:03:33.9891639Z   When logged in as a non-admin user
2024-02-17T06:03:33.9892970Z     PUT #update
2024-02-17T06:03:34.0085988Z       redirects
2024-02-17T06:03:34.0086695Z     GET #edit
2024-02-17T06:03:34.0210405Z       redirects
2024-02-17T06:03:34.0211160Z     GET #new
2024-02-17T06:03:34.0330789Z       redirects
2024-02-17T06:03:34.0331265Z     POST #create
2024-02-17T06:03:34.0472623Z       redirects
2024-02-17T06:03:34.0473236Z     GET #index
2024-02-17T06:03:34.0598662Z       redirects
2024-02-17T06:03:34.0599609Z   When logged in as a super admin
2024-02-17T06:03:34.0602004Z     GET #edit
2024-02-17T06:03:34.2854375Z       returns http success
2024-02-17T06:03:34.2855062Z     DELETE #destroy
2024-02-17T06:03:34.2855937Z       with a valid organization id
2024-02-17T06:03:34.8239521Z         redirects to #index
2024-02-17T06:03:34.8240633Z     GET #new
2024-02-17T06:03:34.8640400Z       returns http success
2024-02-17T06:03:34.8643573Z       when given a valid account request token in the query parameters
2024-02-17T06:03:34.9315229Z         should render new with pre populate input fields from the account_request
2024-02-17T06:03:34.9316650Z       when given a token that matches a account request that has already been processed
2024-02-17T06:03:35.1546859Z         should render new with a flash error message
2024-02-17T06:03:35.1547698Z     PATCH #update
2024-02-17T06:03:35.1548420Z       with a valid update
2024-02-17T06:03:35.3431555Z         redirects to #index
2024-02-17T06:03:35.3433294Z       with an invalid update
2024-02-17T06:03:35.5472357Z         redirects to #edit with an error message
2024-02-17T06:03:35.7653497Z         returns http success
2024-02-17T06:03:35.7654230Z     GET #show
2024-02-17T06:03:35.9803820Z       returns http success
2024-02-17T06:03:35.9804534Z     PUT #update
2024-02-17T06:03:36.0002456Z       redirect
2024-02-17T06:03:36.0003225Z     POST #create
2024-02-17T06:03:36.0004006Z       with invalid params
2024-02-17T06:03:36.0438981Z         does not create an organization and renders #create with an error message
2024-02-17T06:03:36.0439981Z       with valid params
2024-02-17T06:03:36.3271820Z         creates an organization and redirects to #index
2024-02-17T06:03:36.3272742Z     DELETE #destroy
2024-02-17T06:03:36.6878945Z       redirects
2024-02-17T06:03:36.6879731Z     GET #index
2024-02-17T06:03:36.7224435Z       returns http success
2024-02-17T06:03:36.7225335Z 
2024-02-17T06:03:36.7225850Z /account_requests
2024-02-17T06:03:36.7227211Z   GET #new
2024-02-17T06:03:36.7384249Z     renders a successful response
2024-02-17T06:03:36.7385286Z   GET #confirm
2024-02-17T06:03:36.7385987Z     when given a valid token
2024-02-17T06:03:36.7599819Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-17T06:03:36.7601041Z     when given a token that has already been confirmed
2024-02-17T06:03:36.9453568Z       should render a error that says that is code provided is invalid
2024-02-17T06:03:36.9455288Z     when given a invalid token
2024-02-17T06:03:36.9513878Z       should render a error that says that is code provided is invalid
2024-02-17T06:03:36.9514913Z   GET #confirmation
2024-02-17T06:03:36.9515486Z     when given a invalid token
2024-02-17T06:03:36.9570608Z       should render a error that says that is code provided is invalid
2024-02-17T06:03:36.9571592Z     when given a token that has already been confirmed
2024-02-17T06:03:37.1425012Z       should render a error that says that is code provided is invalid
2024-02-17T06:03:37.1426056Z     when given a valid token
2024-02-17T06:03:37.1565425Z       should render the confirmation template
2024-02-17T06:03:37.1566420Z   GET #received
2024-02-17T06:03:37.1567079Z     when given a invalid token
2024-02-17T06:03:37.1623595Z       should render a error that says that is code provided is invalid
2024-02-17T06:03:37.1624786Z     when given a valid token
2024-02-17T06:03:37.1754805Z       should render the received template
2024-02-17T06:03:37.1755823Z   POST #create
2024-02-17T06:03:37.1756433Z     with valid parameters
2024-02-17T06:03:37.1875366Z       delivers the confirmation email via default queue
2024-02-17T06:03:37.1995681Z       redirects to the created account_request confirmation
2024-02-17T06:03:37.2114177Z       creates a new AccountRequest
2024-02-17T06:03:37.2115092Z     with invalid parameters
2024-02-17T06:03:37.2286125Z       does not create a new AccountRequest
2024-02-17T06:03:37.2437252Z       renders a successful response (i.e. to display the 'new' template)
2024-02-17T06:03:37.2438235Z 
2024-02-17T06:03:37.2438442Z Vendor
2024-02-17T06:03:37.2439882Z   When a user views the index page
2024-02-17T06:03:37.7426017Z     should have the vendor names in alphabetical order
2024-02-17T06:03:37.7427043Z   when editing an existing vendor
2024-02-17T06:03:38.5290661Z     can update the contact info for a vendor as a user
2024-02-17T06:03:39.2740498Z     does not update a vendor with empty attributes
2024-02-17T06:03:39.2741501Z   When vendor have purchases associated with them already
2024-02-17T06:03:39.8707500Z     can have existing vendors show in the #index with some summary stats
2024-02-17T06:03:40.5145281Z     can have a single vendor show semi-detailed stats about purchases
2024-02-17T06:03:40.5145903Z   when creating a new vendor
2024-02-17T06:03:41.2369487Z     cannot add a new vendor instance with empty attributes
2024-02-17T06:03:42.0215437Z     can create a new vendor instance as a user
2024-02-17T06:03:42.0216200Z 
2024-02-17T06:03:42.0216454Z User account management
2024-02-17T06:03:42.0218481Z   when not in staging
2024-02-17T06:03:42.8017942Z     should fail when the email is invalid
2024-02-17T06:03:43.7337272Z     should change an user name
2024-02-17T06:03:44.6138049Z     should change the email
2024-02-17T06:03:44.6138832Z   when in staging
2024-02-17T06:03:45.0673381Z     should display staging warning
2024-02-17T06:03:45.5299474Z     should not allow the user to change staging credentials
2024-02-17T06:03:45.5300239Z 
2024-02-17T06:03:45.5300452Z Organization management
2024-02-17T06:03:45.5301840Z   while signed in as an organization admin
2024-02-17T06:03:46.5877641Z     can deactivate a user in the organization
2024-02-17T06:03:47.0861600Z     can re-invite a user to an organization after 7 days
2024-02-17T06:03:47.5880500Z     can see 'Make user' button for admins
2024-02-17T06:03:48.5352538Z     can re-activate a user in the organization
2024-02-17T06:03:49.4739179Z     can add a new user to an organization
2024-02-17T06:03:49.4740238Z     Editing the organization
2024-02-17T06:03:50.4975352Z       can select if the org distributes essentials monthly
2024-02-17T06:03:51.4613447Z       can select if the org shows year-to-date values on the distribution printout
2024-02-17T06:03:52.4277032Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-17T06:03:53.5857284Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-17T06:03:54.5420193Z       can enable if the org uses single step invite and approve partner process
2024-02-17T06:03:56.1061111Z       can select and deselect Required Partner Fields
2024-02-17T06:03:56.9561515Z       can set a reminder and a deadline day
2024-02-17T06:03:57.9228905Z       can select if the org repackages essentials
2024-02-17T06:03:58.7527723Z       can set the NDBN Member ID
2024-02-17T06:03:59.5916890Z       can set a default storage location on the organization
2024-02-17T06:03:59.5917875Z     Viewing the organization
2024-02-17T06:04:00.1401358Z       can view organization details
2024-02-17T06:04:00.1402229Z   while signed in as a normal user
2024-02-17T06:04:00.6302358Z     can see summary details about the organization as a user
2024-02-17T06:04:01.1173564Z     cannot see 'Make user' button for admins
2024-02-17T06:04:01.1174175Z 
2024-02-17T06:04:01.1174572Z Audits
2024-02-17T06:04:01.1176093Z   while signed in as an organization admin
2024-02-17T06:04:01.1177183Z     GET #new
2024-02-17T06:04:01.1723129Z       is successful
2024-02-17T06:04:01.1723837Z     POST #finalize
2024-02-17T06:04:01.2429806Z       sets the finalize status and saves an event
2024-02-17T06:04:01.2430660Z     GET #edit
2024-02-17T06:04:01.3109512Z       redirects to #index if the status of audit is not `in_progress`
2024-02-17T06:04:01.3747012Z       is successful if the status of audit is `in_progress`
2024-02-17T06:04:01.3747773Z     GET #index
2024-02-17T06:04:01.4318398Z       is successful
2024-02-17T06:04:01.4319501Z     DELETE #destroy
2024-02-17T06:04:01.4320120Z       with valid params
2024-02-17T06:04:01.4701937Z         destroys the audit if the audit's status is `confirms`
2024-02-17T06:04:01.5100873Z         destroys the audit if the audit's status is `in_progress`
2024-02-17T06:04:01.5447624Z         can not destroy the audit if the audit's status is `finalized`
2024-02-17T06:04:01.5449021Z     GET #show
2024-02-17T06:04:01.5989430Z       is successful
2024-02-17T06:04:01.5990525Z     POST #create
2024-02-17T06:04:01.5991418Z       with invalid params
2024-02-17T06:04:01.6379962Z         assigns a newly created but unsaved audit as @audit
2024-02-17T06:04:01.6760655Z         re-renders the 'new' template
2024-02-17T06:04:01.7404269Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-17T06:04:01.7405232Z       with valid params
2024-02-17T06:04:01.7800302Z         redirects to the #show after created audit
2024-02-17T06:04:01.8194203Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-17T06:04:01.8573396Z         assigns a newly created audit as @audit
2024-02-17T06:04:01.8973754Z         creates a new Audit
2024-02-17T06:04:01.9370350Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-17T06:04:01.9371297Z 
2024-02-17T06:04:01.9371868Z Admin Organization Management
2024-02-17T06:04:01.9373183Z   While signed in as an Administrative User (super admin)
2024-02-17T06:04:04.0296567Z     creates a new organization
2024-02-17T06:04:05.3065728Z     can view organization details
2024-02-17T06:04:06.3913229Z     filters by organizations by name in organizations index page
2024-02-17T06:04:06.3914113Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-17T06:04:08.2595119Z     creates a new organization
2024-02-17T06:04:08.2596014Z 
2024-02-17T06:04:08.2596264Z Profiles
2024-02-17T06:04:08.2598205Z   POST #update
2024-02-17T06:04:08.2599525Z     when updating an existing value to a blank value
2024-02-17T06:04:08.3096533Z       should have blank values
2024-02-17T06:04:08.3657433Z       update partner
2024-02-17T06:04:08.3658469Z     successful save
2024-02-17T06:04:08.4118228Z       update partner
2024-02-17T06:04:08.4559836Z       redirects to #show
2024-02-17T06:04:08.4560600Z   GET #edit
2024-02-17T06:04:08.5598250Z     returns http success
2024-02-17T06:04:08.5601073Z 
2024-02-17T06:04:08.5602234Z Dashboard
2024-02-17T06:04:08.5603027Z   With an existing essentials bank
2024-02-17T06:04:08.5604158Z     Product Drives
2024-02-17T06:04:09.1462053Z       has a widget for product drive summary data
2024-02-17T06:04:09.1463045Z       Product drive behaviour with Mixed Donation types
2024-02-17T06:04:10.0778948Z         only shows product drive donations as product drive donations
2024-02-17T06:04:10.7998069Z         only counts product drive money raised
2024-02-17T06:04:11.5046853Z         only counts product drive donations for product drive
2024-02-17T06:04:11.5048786Z       given 1 Product Drive Donation on 2022-02-15 (unless 'All Time'), 4 during 2022-02-16..2023-09-19, and 1 on 2023-09-20
2024-02-17T06:04:11.5050504Z         filtering to '' (February 16, 2022 - September 19, 2023)
2024-02-17T06:04:13.1683184Z           shows the correct total donations
2024-02-17T06:04:14.7248672Z           shows 3 Recent Donation link(s)
2024-02-17T06:04:16.2953887Z           shows the correct total money raised
2024-02-17T06:04:16.2955496Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-17T06:04:16.2956413Z         filtering to 'This Year'
2024-02-17T06:04:17.6291153Z           shows the correct total money raised
2024-02-17T06:04:20.9700107Z           shows 0 Recent Donation link(s)
2024-02-17T06:04:22.2974374Z           shows the correct total donations
2024-02-17T06:04:22.2975998Z       given 1 Product Drive Donation on 2024-01-17 (unless 'All Time'), 3 during 2024-01-18..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:04:22.2978562Z         filtering to 'Last 30 Days'
2024-02-17T06:04:23.7961293Z           shows 3 Recent Donation link(s)
2024-02-17T06:04:25.2673889Z           shows the correct total money raised
2024-02-17T06:04:26.7669797Z           shows the correct total donations
2024-02-17T06:04:26.7671555Z       given 1 Product Drive Donation on 2024-02-15 (unless 'All Time'), 3 during 2024-02-16..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:04:26.7673132Z         filtering to 'Today'
2024-02-17T06:04:28.2373683Z           shows 3 Recent Donation link(s)
2024-02-17T06:04:29.9311714Z           shows the correct total money raised
2024-02-17T06:04:31.4425841Z           shows the correct total donations
2024-02-17T06:04:31.4427678Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-17T06:04:31.4429089Z         filtering to 'Last Month'
2024-02-17T06:04:32.8710821Z           shows the correct total donations
2024-02-17T06:04:34.2939475Z           shows the correct total money raised
2024-02-17T06:04:35.7133507Z           shows 1 Recent Donation link(s)
2024-02-17T06:04:35.7135528Z       given 1 Product Drive Donation on 2024-02-14 (unless 'All Time'), 4 during 2024-02-15..2024-02-15, and 1 on 2024-02-16
2024-02-17T06:04:35.7136923Z         filtering to 'Yesterday'
2024-02-17T06:04:37.4068065Z           shows the correct total money raised
2024-02-17T06:04:38.9308726Z           shows the correct total donations
2024-02-17T06:04:40.4628144Z           shows 3 Recent Donation link(s)
2024-02-17T06:04:40.4629609Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-17T06:04:40.4636025Z         filtering to 'This Month'
2024-02-17T06:04:43.8303049Z           shows 0 Recent Donation link(s)
2024-02-17T06:04:45.3138536Z           shows the correct total donations
2024-02-17T06:04:46.6627329Z           shows the correct total money raised
2024-02-17T06:04:46.6629171Z       given 1 Product Drive Donation on 2024-02-09 (unless 'All Time'), 0 during 2024-02-10..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:04:46.6630805Z         filtering to 'Last 7 Days'
2024-02-17T06:04:48.0126631Z           shows the correct total money raised
2024-02-17T06:04:49.3667296Z           shows the correct total donations
2024-02-17T06:04:52.7144581Z           shows 0 Recent Donation link(s)
2024-02-17T06:04:52.7145902Z     Distributions
2024-02-17T06:04:53.7369933Z       has a link to create a new distribution
2024-02-17T06:04:53.7371320Z       given 1 Distribution on 2024-02-15  (unless 'All Time'), 0 during 2024-02-16..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:04:53.7372317Z         filtering to 'Today'
2024-02-17T06:04:57.1646059Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-17T06:04:57.1648098Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-17T06:04:57.1649397Z         filtering to 'This Month'
2024-02-17T06:04:58.6304046Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-17T06:04:58.6305623Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-17T06:04:58.6306454Z         filtering to 'This Year'
2024-02-17T06:05:00.0226058Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-17T06:05:00.0227701Z       given 1 Distribution on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-15, and 1 on 2024-02-16
2024-02-17T06:05:00.0229091Z         filtering to 'Yesterday'
2024-02-17T06:05:03.4387481Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-17T06:05:03.4389457Z       given 1 Distribution on 2024-02-09  (unless 'All Time'), 2 during 2024-02-10..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:03.4390986Z         filtering to 'Last 7 Days'
2024-02-17T06:05:04.8850045Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-17T06:05:04.8852044Z       given 1 Distribution on 2024-01-17  (unless 'All Time'), 0 during 2024-01-18..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:04.8853215Z         filtering to 'Last 30 Days'
2024-02-17T06:05:08.2857869Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-17T06:05:08.2859849Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-17T06:05:08.2861339Z         filtering to 'Last Month'
2024-02-17T06:05:09.6595806Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-17T06:05:09.6597812Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 3 during 2000-01-01..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:09.6599083Z         filtering to 'All Time'
2024-02-17T06:05:11.0869093Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-17T06:05:11.0870815Z       given 1 Distribution on 2022-02-15  (unless 'All Time'), 2 during 2022-02-16..2023-10-24, and 1 on 2023-10-25
2024-02-17T06:05:11.0872104Z         filtering to '' (February 16, 2022 - October 24, 2023)
2024-02-17T06:05:12.5457181Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-17T06:05:12.5458207Z     Inventory Totals
2024-02-17T06:05:12.5459381Z       Summary
2024-02-17T06:05:13.2645346Z         displays the on-hand totals
2024-02-17T06:05:13.2646381Z         when constrained to date range
2024-02-17T06:05:14.3067925Z           does not change
2024-02-17T06:05:14.3068707Z     Purchases
2024-02-17T06:05:15.2798069Z       has a link to create a new purchase
2024-02-17T06:05:15.2799734Z       given 1 Purchase on 2024-02-09  (unless 'All Time'), 2 during 2024-02-10..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:15.2801201Z         filtering to 'Last 7 Days'
2024-02-17T06:05:16.6854134Z           shows correct 2 Recent Purchase link(s)
2024-02-17T06:05:16.6856081Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-17T06:05:16.6857405Z         filtering to 'This Month'
2024-02-17T06:05:20.0106800Z           shows correct 0 Recent Purchase link(s)
2024-02-17T06:05:20.0108415Z       given 1 Purchase on 2024-02-15  (unless 'All Time'), 2 during 2024-02-16..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:20.0109750Z         filtering to 'Today'
2024-02-17T06:05:21.4412555Z           shows correct 2 Recent Purchase link(s)
2024-02-17T06:05:21.4414834Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-17T06:05:21.4416092Z         filtering to 'Last Month'
2024-02-17T06:05:22.9683245Z           shows correct 3 Recent Purchase link(s)
2024-02-17T06:05:22.9684676Z       given 1 Purchase on 2022-02-15  (unless 'All Time'), 1 during 2022-02-16..2023-11-06, and 1 on 2023-11-07
2024-02-17T06:05:22.9685636Z         filtering to '' (February 16, 2022 - November 6, 2023)
2024-02-17T06:05:24.3631151Z           shows correct 1 Recent Purchase link(s)
2024-02-17T06:05:24.3632701Z       given 1 Purchase on 2024-02-14  (unless 'All Time'), 4 during 2024-02-15..2024-02-15, and 1 on 2024-02-16
2024-02-17T06:05:24.3633784Z         filtering to 'Yesterday'
2024-02-17T06:05:25.8528293Z           shows correct 3 Recent Purchase link(s)
2024-02-17T06:05:25.8530113Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-17T06:05:25.8531556Z         filtering to 'This Year'
2024-02-17T06:05:27.3676236Z           shows correct 3 Recent Purchase link(s)
2024-02-17T06:05:27.3677859Z       given 1 Purchase on 2024-01-17  (unless 'All Time'), 2 during 2024-01-18..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:27.3679095Z         filtering to 'Last 30 Days'
2024-02-17T06:05:28.7847299Z           shows correct 2 Recent Purchase link(s)
2024-02-17T06:05:28.7848180Z     Signage
2024-02-17T06:05:31.7146244Z       shows their organization name unless they have a logo set
2024-02-17T06:05:31.7147159Z     Donations
2024-02-17T06:05:32.6262831Z       has a link to create a new donation
2024-02-17T06:05:32.6264514Z       given 1 Donation on 2022-02-15 (only if a valid date), 2 during 2022-02-16..2023-09-13, and 1 on 2023-09-14
2024-02-17T06:05:32.6266119Z         filtering to '' (February 16, 2022 - September 13, 2023)
2024-02-17T06:05:34.0420242Z           shows the correct total and 2 Recent Donation link(s)
2024-02-17T06:05:34.0421679Z       given 1 Donation on 2024-01-17 (only if a valid date), 2 during 2024-01-18..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:34.0422729Z         filtering to 'Last 30 Days'
2024-02-17T06:05:35.5732785Z           shows the correct total and 2 Recent Donation link(s)
2024-02-17T06:05:35.5738499Z       given 1 Donation on 2024-02-15 (only if a valid date), 4 during 2024-02-16..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:35.5739827Z         filtering to 'Today'
2024-02-17T06:05:37.0839010Z           shows the correct total and 3 Recent Donation link(s)
2024-02-17T06:05:37.0841531Z       given 1 Donation on 2024-02-14 (only if a valid date), 3 during 2024-02-15..2024-02-15, and 1 on 2024-02-16
2024-02-17T06:05:37.0842769Z         filtering to 'Yesterday'
2024-02-17T06:05:38.5365721Z           shows the correct total and 3 Recent Donation link(s)
2024-02-17T06:05:38.5367530Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-17T06:05:38.5369071Z         filtering to 'This Year'
2024-02-17T06:05:39.9095984Z           shows the correct total and 1 Recent Donation link(s)
2024-02-17T06:05:39.9097881Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-17T06:05:39.9098755Z         filtering to 'Last Month'
2024-02-17T06:05:41.3140445Z           shows the correct total and 1 Recent Donation link(s)
2024-02-17T06:05:41.3142391Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-17T06:05:41.3143958Z         filtering to 'This Month'
2024-02-17T06:05:42.7481206Z           shows the correct total and 2 Recent Donation link(s)
2024-02-17T06:05:42.7482784Z       given 1 Donation on 2024-02-09 (only if a valid date), 4 during 2024-02-10..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:42.7483649Z         filtering to 'Last 7 Days'
2024-02-17T06:05:44.2570561Z           shows the correct total and 3 Recent Donation link(s)
2024-02-17T06:05:44.2572629Z     Manufacturer Donations
2024-02-17T06:05:44.8804674Z       has a link to create a new donation
2024-02-17T06:05:44.8806703Z       given 1 Manufacturer donating on 2024-02-15  (unless 'All Time'), 0 during 2024-02-16..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:44.8808070Z         filtering to 'Today'
2024-02-17T06:05:46.2689771Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-17T06:05:46.2691755Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 4 during 2000-01-01..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:46.2693098Z         filtering to 'All Time'
2024-02-17T06:05:47.9437284Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-17T06:05:47.9439306Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 5 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-17T06:05:47.9440822Z         filtering to 'Last Month'
2024-02-17T06:05:49.8439305Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-17T06:05:49.8441522Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-17T06:05:49.8442873Z         filtering to 'This Month'
2024-02-17T06:05:51.5004395Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-17T06:05:51.5006350Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-17T06:05:51.5007684Z         filtering to 'This Year'
2024-02-17T06:05:53.5282576Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-17T06:05:53.5284424Z       given 1 Manufacturer donating on 2024-02-14  (unless 'All Time'), 0 during 2024-02-15..2024-02-15, and 1 on 2024-02-16
2024-02-17T06:05:53.5287815Z         filtering to 'Yesterday'
2024-02-17T06:05:54.8832109Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-17T06:05:54.8833939Z       given 1 Manufacturer donating on 2022-02-15  (unless 'All Time'), 7 during 2022-02-16..2023-12-28, and 1 on 2023-12-29
2024-02-17T06:05:54.8835119Z         filtering to '' (February 16, 2022 - December 28, 2023)
2024-02-17T06:05:56.8560219Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-17T06:05:56.8562315Z       given 1 Manufacturer donating on 2024-01-17  (unless 'All Time'), 9 during 2024-01-18..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:56.8563563Z         filtering to 'Last 30 Days'
2024-02-17T06:05:59.1811130Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-17T06:05:59.1813183Z       given 1 Manufacturer donating on 2024-02-09  (unless 'All Time'), 5 during 2024-02-10..2024-02-16, and 1 on 2024-02-17
2024-02-17T06:05:59.1814529Z         filtering to 'Last 7 Days'
2024-02-17T06:06:01.2338426Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-17T06:06:01.2339440Z   With a new essentials bank
2024-02-17T06:06:29.2770855Z     displays the getting started guide until the steps are completed
2024-02-17T06:06:29.2771719Z 
2024-02-17T06:06:29.2772132Z /partners/children
2024-02-17T06:06:29.2772901Z   GET #index
2024-02-17T06:06:29.3549424Z     should export CSV
2024-02-17T06:06:29.4158296Z     should render without any issues
2024-02-17T06:06:29.4159012Z 
2024-02-17T06:06:29.4159253Z DonationSites
2024-02-17T06:06:29.4160120Z   while signed in
2024-02-17T06:06:29.4160855Z     GET #index
2024-02-17T06:06:29.4161784Z       csv
2024-02-17T06:06:29.4328171Z         is expected to be successful
2024-02-17T06:06:29.4328969Z       html
2024-02-17T06:06:29.4657696Z         is expected to be successful
2024-02-17T06:06:29.4659894Z 
2024-02-17T06:06:29.4660497Z StorageLocations
2024-02-17T06:06:29.4661265Z   While signed in
2024-02-17T06:06:29.4663255Z     GET #new
2024-02-17T06:06:29.6094061Z       returns http success
2024-02-17T06:06:29.6095338Z     GET #show
2024-02-17T06:06:29.6096160Z       csv
2024-02-17T06:06:29.6607072Z         should be successful
2024-02-17T06:06:29.6607815Z       html
2024-02-17T06:06:29.7254176Z         should return a correct response
2024-02-17T06:06:29.7255031Z         with version date set
2024-02-17T06:06:29.7255722Z           with no version found
2024-02-17T06:06:29.7925638Z             should show N/A
2024-02-17T06:06:29.7926350Z           with a version found
2024-02-17T06:06:29.8683805Z             should show the version specified
2024-02-17T06:06:29.8684903Z     PUT #reactivate
2024-02-17T06:06:29.8839580Z       undiscards
2024-02-17T06:06:29.8841174Z     PUT #deactivate
2024-02-17T06:06:29.9016483Z       discards
2024-02-17T06:06:29.9017124Z       with inventory
2024-02-17T06:06:29.9464457Z         does not discard
2024-02-17T06:06:29.9465175Z     GET #edit
2024-02-17T06:06:29.9950841Z       returns http success
2024-02-17T06:06:29.9951898Z     POST #import_csv
2024-02-17T06:06:29.9952539Z       csv file with wrong headers
2024-02-17T06:06:30.0097036Z         redirects
2024-02-17T06:06:30.0222654Z         presents a flash error message
2024-02-17T06:06:30.0223384Z       without a csv file
2024-02-17T06:06:30.0339564Z         redirects to :index
2024-02-17T06:06:30.0463227Z         presents a flash error message
2024-02-17T06:06:30.0464032Z       with a csv file
2024-02-17T06:06:30.0519852Z         invokes .import_csv
2024-02-17T06:06:30.0677643Z         redirects
2024-02-17T06:06:30.0824981Z         presents a flash notice message
2024-02-17T06:06:30.0825984Z     GET #destroy
2024-02-17T06:06:30.1089884Z       redirects to #index
2024-02-17T06:06:30.1090766Z     Looking at a different organization
2024-02-17T06:06:30.2862729Z       redirects the user to the sign-in page for CRUD actions
2024-02-17T06:06:30.2865195Z     GET #index
2024-02-17T06:06:30.2866086Z       html
2024-02-17T06:06:30.3255895Z         succeeds
2024-02-17T06:06:30.3256821Z         with inactive locations
2024-02-17T06:06:30.3674506Z           does not includes the inactive location
2024-02-17T06:06:30.3675499Z           with include_inactive_locations
2024-02-17T06:06:30.4075803Z             includes the inactive location
2024-02-17T06:06:30.4076653Z       csv
2024-02-17T06:06:30.5073589Z         includes headers followed by alphabetized item names
2024-02-17T06:06:30.5253445Z         succeeds
2024-02-17T06:06:30.5254182Z     GET #inventory
2024-02-17T06:06:30.5255717Z       without any overrides
2024-02-17T06:06:30.5790903Z         returns a collection that only includes items at the storage location
2024-02-17T06:06:30.5791986Z       when also including inactive items
2024-02-17T06:06:30.6442473Z         returns a collection that also includes items that have been deactivated
2024-02-17T06:06:30.6443581Z       when also including omitted items
2024-02-17T06:06:30.6946468Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-17T06:06:30.7446492Z         contains a collection of ducktyped entries that respond the same
2024-02-17T06:06:30.7447625Z   While not signed in
2024-02-17T06:06:30.7511318Z     redirects the user to the sign-in page for CRUD actions
2024-02-17T06:06:30.7511965Z 
2024-02-17T06:06:30.7512277Z /partners/profiles
2024-02-17T06:06:30.7513560Z   GET #show
2024-02-17T06:06:30.8079328Z     displays the partner
2024-02-17T06:06:30.8617981Z     shows correct values for yes/no buttons
2024-02-17T06:06:30.8619101Z   GET #edit
2024-02-17T06:06:30.9514677Z     displays the partner
2024-02-17T06:06:31.0368758Z     has "No" radio button value when value is false
2024-02-17T06:06:31.1208721Z     has "Yes" radio button value when value is true
2024-02-17T06:06:31.2201970Z     does not have default radio button value when value is nil
2024-02-17T06:06:31.2746741Z   PUT #update
2024-02-17T06:06:31.2747410Z     updates the partner and profile
2024-02-17T06:06:31.2748146Z     with no social media
2024-02-17T06:06:31.3704614Z       shows an error
2024-02-17T06:06:31.3705311Z     when updating an existing value to a blank value
2024-02-17T06:06:31.4273229Z       does store N/A in the database
2024-02-17T06:06:31.4783838Z       updates the partner profile attribute to a blank value
2024-02-17T06:06:31.5297481Z       does not update other partner profile attributes to blank
2024-02-17T06:06:31.5298660Z 
2024-02-17T06:06:31.5299267Z Purchases
2024-02-17T06:06:31.5300666Z   while signed in as a normal user
2024-02-17T06:06:31.5301909Z     When creating a new purchase
2024-02-17T06:06:32.0272785Z       should not display inactive storage locations in dropdown
2024-02-17T06:06:32.0273411Z       via manual entry
2024-02-17T06:06:33.0564377Z         User can create vendor from purchase
2024-02-17T06:06:33.9484976Z         User can create a purchase using dollars decimal amount
2024-02-17T06:06:35.0613578Z         User can create a purchase IN THE PAST
2024-02-17T06:06:36.2704886Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-17T06:06:37.2898040Z         Does not include inactive items in the line item fields
2024-02-17T06:06:37.2899283Z         when creating a purchase incorrectly
2024-02-17T06:06:38.1078347Z           should display failure with error messages
2024-02-17T06:06:39.0970199Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-17T06:06:39.0971090Z       via barcode entry
2024-02-17T06:06:40.3302558Z         a user can add items that do not yet have a barcode
2024-02-17T06:06:41.0857428Z         a user can add items via scanning them in by barcode
2024-02-17T06:06:42.0087627Z         User scan same barcode 2 times
2024-02-17T06:06:42.0088474Z       Editing purchase
2024-02-17T06:06:42.6358083Z         A user can view another organizations purchase
2024-02-17T06:06:43.1477108Z         A user can see purchased_from value
2024-02-17T06:06:43.1477919Z     When visiting the index page
2024-02-17T06:06:43.1478936Z       When filtering on the index page
2024-02-17T06:06:43.9577982Z         User can filter the #index by storage location
2024-02-17T06:06:44.7760649Z         User can filter the #index by vendor
2024-02-17T06:06:44.7761546Z         behaves like Date Range Picker
2024-02-17T06:06:44.7762453Z           when choosing a date range that only includes the previous week
2024-02-17T06:06:45.7703214Z             shows only 1 record
2024-02-17T06:06:45.7704284Z           when choosing 'All Time'
2024-02-17T06:06:46.7205117Z             shows all the records
2024-02-17T06:06:46.7206046Z           when choosing 'Last Month'
2024-02-17T06:06:47.6688217Z             shows only 2 of the records
2024-02-17T06:06:47.6689435Z       In the middle of the year
2024-02-17T06:06:48.4138003Z         User sees purchased date column
2024-02-17T06:06:49.2052918Z         User can click to the new purchase form
2024-02-17T06:06:49.9726610Z         User sees total purchases value
2024-02-17T06:06:49.9727344Z     When visiting an existing purchase
2024-02-17T06:06:50.4388346Z       does not allow deletion of a purchase
2024-02-17T06:06:50.4389107Z   while signed in as an organization admin
2024-02-17T06:06:51.2977907Z     allows deletion of a purchase
2024-02-17T06:06:51.2978898Z 
2024-02-17T06:06:51.2979185Z Managing requests
2024-02-17T06:06:51.2981058Z   creating a request
2024-02-17T06:06:51.2982065Z     GIVEN a partner user is permitted to make a request
2024-02-17T06:06:51.2983369Z       WHEN they create a request with only a comment
2024-02-17T06:06:52.2775099Z         should be created without any issue
2024-02-17T06:06:52.2775739Z       WHEN they create a request inproperly by not inputting anything
2024-02-17T06:06:53.1953559Z         should show an error message with the instructions
2024-02-17T06:06:53.1954398Z       WHEN they create a request properly
2024-02-17T06:06:53.1955564Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-17T06:06:55.4054204Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-17T06:06:55.4055694Z   creating a individuals/family request
2024-02-17T06:06:55.4056539Z     GIVEN a partner user is permitted to make a request
2024-02-17T06:06:55.4057979Z       WHEN they create a request properly
2024-02-17T06:06:55.4059158Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-17T06:06:57.5222071Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-17T06:06:57.5223162Z       WHEN they create a request inproperly
2024-02-17T06:06:58.4196800Z         should show an error message with the instructions
2024-02-17T06:06:58.4324864Z W, [2024-02-16T22:06:58.432305 #2424]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-17T06:06:58.4325939Z W, [2024-02-16T22:06:58.432352 #2424]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-17T06:06:58.4327597Z W, [2024-02-16T22:06:58.432366 #2424]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-17T06:06:58.4329250Z W, [2024-02-16T22:06:58.432389 #2424]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-17T06:06:58.4329995Z 
2024-02-17T06:06:58.4330236Z Finished in 3 minutes 31.8 seconds (files took 7.98 seconds to load)
2024-02-17T06:06:58.4330725Z 235 examples, 0 failures
2024-02-17T06:06:58.4330914Z 
2024-02-17T06:06:58.4331019Z Randomized with seed 21532
2024-02-17T06:06:58.4331213Z 
2024-02-17T06:06:58.9326906Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3818 / 6418 LOC (59.49%) covered.
2024-02-17T06:06:59.4432009Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10666 LOC (0.36%) covered.
