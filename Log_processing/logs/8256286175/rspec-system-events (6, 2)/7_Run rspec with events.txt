2024-03-12T22:03:38.1453307Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-12T22:03:38.1454178Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-12T22:03:38.1504753Z shell: /usr/bin/bash -e {0}
2024-03-12T22:03:38.1505252Z env:
2024-03-12T22:03:38.1505540Z   POSTGRES_HOST: localhost
2024-03-12T22:03:38.1505946Z   DATABASE_HOST: localhost
2024-03-12T22:03:38.1506410Z   PG_USERNAME: postgres
2024-03-12T22:03:38.1506795Z   PG_PASSWORD: password
2024-03-12T22:03:38.1507182Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-12T22:03:38.1507634Z   POSTGRES_PORT: 5432
2024-03-12T22:03:38.1508004Z   PGHOST: localhost
2024-03-12T22:03:38.1508345Z   PGUSER: postgres
2024-03-12T22:03:38.1508762Z   RAILS_ENV: test
2024-03-12T22:03:38.1509091Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-12T22:03:38.1509549Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-12T22:03:38.1510016Z   KNAPSACK_PRO_CI_NODE_INDEX: 2
2024-03-12T22:03:38.1510502Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-12T22:03:38.1511108Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-12T22:03:38.1511735Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-12T22:03:38.1512385Z   EVENTS_READ: true
2024-03-12T22:03:38.1512784Z ##[endgroup]
2024-03-12T22:03:44.0208783Z W, [2024-03-12T22:03:44.020390 #2462]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-12T22:03:44.0210856Z W, [2024-03-12T22:03:44.020460 #2462]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T22:03:44.0212920Z W, [2024-03-12T22:03:44.020479 #2462]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T22:03:44.0217623Z W, [2024-03-12T22:03:44.020508 #2462]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-12T22:03:46.5618276Z W, [2024-03-12T22:03:46.561489 #2462]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-12T22:03:46.5619978Z W, [2024-03-12T22:03:46.561538 #2462]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T22:03:46.5621686Z W, [2024-03-12T22:03:46.561554 #2462]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T22:03:46.5624494Z W, [2024-03-12T22:03:46.561595 #2462]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-12T22:03:46.5680238Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/admin/account_requests_requests_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/events_requests_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-12T22:03:55.0688636Z 
2024-03-12T22:03:55.0689998Z Randomized with seed 54777
2024-03-12T22:03:55.9816831Z 
2024-03-12T22:03:55.9817644Z BroadcastAnnouncements
2024-03-12T22:03:55.9818943Z   PATCH /update
2024-03-12T22:03:55.9819586Z     with valid parameters
2024-03-12T22:03:56.0346915Z       updates the requested announcement and redirects
2024-03-12T22:03:56.0348109Z     with invalid parameters
2024-03-12T22:03:56.0869156Z       does not render a successful response
2024-03-12T22:03:56.0870047Z   GET /index
2024-03-12T22:03:56.1219178Z     renders a successful response
2024-03-12T22:03:56.1220007Z   POST /create
2024-03-12T22:03:56.1220775Z     with invalid parameters
2024-03-12T22:03:56.1529688Z       does not render a successful response
2024-03-12T22:03:56.1836102Z       does not create a new BroadcastAnnouncement
2024-03-12T22:03:56.1837197Z     with valid parameters
2024-03-12T22:03:56.1995265Z       creates a new BroadcastAnnouncement then redirects
2024-03-12T22:03:56.1996135Z   GET /new
2024-03-12T22:03:56.2261281Z     renders a successful response
2024-03-12T22:03:56.2262013Z   DELETE /destroy
2024-03-12T22:03:56.2426156Z     destroys the requested announcement then redirects
2024-03-12T22:03:56.2427239Z   GET /edit
2024-03-12T22:03:56.2718468Z     render a successful response
2024-03-12T22:03:56.2719110Z 
2024-03-12T22:03:56.2719500Z Admin Organization Management
2024-03-12T22:03:56.2721317Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-12T22:03:59.1088003Z     creates a new organization
2024-03-12T22:03:59.1089306Z   While signed in as an Administrative User (super admin)
2024-03-12T22:04:00.1340023Z     filters by organizations by name in organizations index page
2024-03-12T22:04:01.4149129Z     can view organization details
2024-03-12T22:04:03.3160341Z     creates a new organization
2024-03-12T22:04:03.3161464Z 
2024-03-12T22:04:03.3161670Z Events
2024-03-12T22:04:03.3163213Z   When not signed in
2024-03-12T22:04:03.3592795Z     redirects the user to the sign-in page for CRUD actions
2024-03-12T22:04:03.3593532Z   When signed in
2024-03-12T22:04:03.3593940Z     GET #index
2024-03-12T22:04:03.9511930Z       should be successful
2024-03-12T22:04:03.9512688Z       with item filter
2024-03-12T22:04:04.4963331Z         should not include the other item
2024-03-12T22:04:04.4964062Z       with type filter
2024-03-12T22:04:05.0472223Z         should not include the adjustment
2024-03-12T22:04:05.0472889Z       with eventable_id
2024-03-12T22:04:05.7937175Z         should only show events from that eventable
2024-03-12T22:04:05.7937963Z       with date filter
2024-03-12T22:04:06.3407090Z         should not include the old donation
2024-03-12T22:04:06.3407936Z       with storage location filter
2024-03-12T22:04:07.0269239Z         should not include the other storage location
2024-03-12T22:04:07.0270053Z 
2024-03-12T22:04:07.0270368Z Managing requests
2024-03-12T22:04:07.0275998Z   creating a new quantity request
2024-03-12T22:04:07.0276927Z     GIVEN a partner user is permitted to make a request
2024-03-12T22:04:07.0281279Z       WHEN a request is built using add and remove buttons
2024-03-12T22:04:07.0282336Z         THEN a request records will be created
2024-03-12T22:04:09.0855748Z           creates the correct request
2024-03-12T22:04:09.0856785Z   creating a # individuals request
2024-03-12T22:04:09.0857931Z     GIVEN a partner user is permitted to make a request
2024-03-12T22:04:09.0859498Z       WHEN a request is built using add and remove buttons
2024-03-12T22:04:09.0860500Z         THEN a request records will be created
2024-03-12T22:04:10.9422485Z           creates the correct request
2024-03-12T22:04:10.9424139Z 
2024-03-12T22:04:10.9424429Z Purchases
2024-03-12T22:04:10.9425861Z   while signed in as an organization admin
2024-03-12T22:04:11.8462185Z     allows deletion of a purchase
2024-03-12T22:04:11.8463275Z   while signed in as a normal user
2024-03-12T22:04:11.8464036Z     When visiting the index page
2024-03-12T22:04:11.8464740Z       In the middle of the year
2024-03-12T22:04:12.6444746Z         User can click to the new purchase form
2024-03-12T22:04:13.4095628Z         User sees purchased date column
2024-03-12T22:04:14.1876123Z         User sees total purchases value
2024-03-12T22:04:14.1877042Z       When filtering on the index page
2024-03-12T22:04:15.0274024Z         User can filter the #index by storage location
2024-03-12T22:04:15.8777381Z         User can filter the #index by vendor
2024-03-12T22:04:15.8778098Z         behaves like Date Range Picker
2024-03-12T22:04:15.8779241Z           when choosing a date range that only includes the previous week
2024-03-12T22:04:16.8295173Z             shows only 1 record
2024-03-12T22:04:16.8296397Z           when choosing 'All Time'
2024-03-12T22:04:17.8107451Z             shows all the records
2024-03-12T22:04:17.8108784Z           when choosing 'Last Month'
2024-03-12T22:04:18.7682461Z             shows only 2 of the records
2024-03-12T22:04:18.7683791Z     When visiting an existing purchase
2024-03-12T22:04:19.2361168Z       does not allow deletion of a purchase
2024-03-12T22:04:19.2362218Z     When creating a new purchase
2024-03-12T22:04:19.7279717Z       should not display inactive storage locations in dropdown
2024-03-12T22:04:19.7280434Z       via barcode entry
2024-03-12T22:04:20.4737583Z         a user can add items via scanning them in by barcode
2024-03-12T22:04:21.3835784Z         User scan same barcode 2 times
2024-03-12T22:04:22.6017312Z         a user can add items that do not yet have a barcode
2024-03-12T22:04:22.6018497Z       Editing purchase
2024-03-12T22:04:23.2464010Z         A user can view another organizations purchase
2024-03-12T22:04:23.7545668Z         A user can see purchased_from value
2024-03-12T22:04:23.7546570Z       via manual entry
2024-03-12T22:04:24.8088554Z         User can create vendor from purchase
2024-03-12T22:04:25.6962178Z         User can create a purchase using dollars decimal amount
2024-03-12T22:04:26.9254890Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-12T22:04:28.0418110Z         User can create a purchase IN THE PAST
2024-03-12T22:04:29.0663271Z         Does not include inactive items in the line item fields
2024-03-12T22:04:29.0664054Z         when creating a purchase incorrectly
2024-03-12T22:04:30.0634638Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-12T22:04:30.8816080Z           should display failure with error messages
2024-03-12T22:04:30.8817629Z 
2024-03-12T22:04:30.8817893Z Profiles
2024-03-12T22:04:30.8819169Z   GET #edit
2024-03-12T22:04:30.9938772Z     returns http success
2024-03-12T22:04:30.9939494Z   POST #update
2024-03-12T22:04:30.9940423Z     when updating an existing value to a blank value
2024-03-12T22:04:31.0403661Z       should have blank values
2024-03-12T22:04:31.0864368Z       update partner
2024-03-12T22:04:31.0865127Z     successful save
2024-03-12T22:04:31.1341974Z       update partner
2024-03-12T22:04:31.1805823Z       redirects to #show
2024-03-12T22:04:31.1807090Z 
2024-03-12T22:04:31.1807359Z StorageLocations
2024-03-12T22:04:31.1808806Z   While signed in
2024-03-12T22:04:31.1811596Z     GET #show
2024-03-12T22:04:31.1812320Z       csv
2024-03-12T22:04:31.2383189Z         should be successful
2024-03-12T22:04:31.3161947Z       html
2024-03-12T22:04:31.3162656Z         should return a correct response
2024-03-12T22:04:31.3163499Z         with version date set
2024-03-12T22:04:31.3164692Z           with no version found
2024-03-12T22:04:31.3912511Z             should show N/A
2024-03-12T22:04:31.3913420Z           with a version found
2024-03-12T22:04:31.4915880Z             should show the version specified
2024-03-12T22:04:31.4916838Z     GET #inventory
2024-03-12T22:04:31.4917999Z       when also including inactive items
2024-03-12T22:04:31.5686219Z         returns a collection that also includes items that have been deactivated
2024-03-12T22:04:31.5687717Z       without any overrides
2024-03-12T22:04:31.6291493Z         returns a collection that only includes items at the storage location
2024-03-12T22:04:31.6292623Z       when also including omitted items
2024-03-12T22:04:31.6858979Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-12T22:04:31.7398858Z         contains a collection of ducktyped entries that respond the same
2024-03-12T22:04:31.7399942Z     GET #destroy
2024-03-12T22:04:31.7730656Z       redirects to #index
2024-03-12T22:04:31.7731496Z     PUT #deactivate
2024-03-12T22:04:31.7964576Z       discards
2024-03-12T22:04:31.7965356Z       with inventory
2024-03-12T22:04:31.8519882Z         does not discard
2024-03-12T22:04:31.8520598Z     GET #new
2024-03-12T22:04:32.3095910Z       returns http success
2024-03-12T22:04:32.3096479Z     GET #index
2024-03-12T22:04:32.3097252Z       html
2024-03-12T22:04:32.3500469Z         succeeds
2024-03-12T22:04:32.3501339Z         with inactive locations
2024-03-12T22:04:32.3912643Z           does not includes the inactive location
2024-03-12T22:04:32.3914088Z           with include_inactive_locations
2024-03-12T22:04:32.4317857Z             includes the inactive location
2024-03-12T22:04:32.4318755Z       csv
2024-03-12T22:04:32.5368399Z         includes headers followed by alphabetized item names
2024-03-12T22:04:32.5576238Z         succeeds
2024-03-12T22:04:32.5576995Z     Looking at a different organization
2024-03-12T22:04:32.7344463Z       redirects the user to the sign-in page for CRUD actions
2024-03-12T22:04:32.7345455Z     GET #edit
2024-03-12T22:04:32.7696134Z       returns http success
2024-03-12T22:04:32.7875141Z     PUT #reactivate
2024-03-12T22:04:32.7875763Z       undiscards
2024-03-12T22:04:32.7876383Z     POST #import_csv
2024-03-12T22:04:32.7877224Z       with a csv file
2024-03-12T22:04:32.7931728Z         invokes .import_csv
2024-03-12T22:04:32.8092301Z         redirects
2024-03-12T22:04:32.8253817Z         presents a flash notice message
2024-03-12T22:04:32.8254766Z       without a csv file
2024-03-12T22:04:32.8384782Z         presents a flash error message
2024-03-12T22:04:32.8510726Z         redirects to :index
2024-03-12T22:04:32.8511546Z       csv file with wrong headers
2024-03-12T22:04:32.8658217Z         redirects
2024-03-12T22:04:32.8796958Z         presents a flash error message
2024-03-12T22:04:32.8798024Z   While not signed in
2024-03-12T22:04:32.8864625Z     redirects the user to the sign-in page for CRUD actions
2024-03-12T22:04:32.8865315Z 
2024-03-12T22:04:32.8865585Z /partners/profiles
2024-03-12T22:04:32.8866465Z   GET #show
2024-03-12T22:04:32.9532076Z     displays the partner
2024-03-12T22:04:33.0116334Z     shows correct values for yes/no buttons
2024-03-12T22:04:33.0117551Z   PUT #update
2024-03-12T22:04:33.0702517Z     updates the partner and profile
2024-03-12T22:04:33.0703792Z     when updating an existing value to a blank value
2024-03-12T22:04:33.1268212Z       does store N/A in the database
2024-03-12T22:04:33.1815873Z       does not update other partner profile attributes to blank
2024-03-12T22:04:33.2389914Z       updates the partner profile attribute to a blank value
2024-03-12T22:04:33.2390746Z     with no social media
2024-03-12T22:04:33.3484538Z       shows an error
2024-03-12T22:04:33.3485300Z   GET #edit
2024-03-12T22:04:33.4382713Z     displays the partner
2024-03-12T22:04:33.5336538Z     has "Yes" radio button value when value is true
2024-03-12T22:04:33.6319272Z     has "No" radio button value when value is false
2024-03-12T22:04:33.7275661Z     does not have default radio button value when value is nil
2024-03-12T22:04:33.7278023Z 
2024-03-12T22:04:33.7278362Z Dashboard
2024-03-12T22:04:33.7279760Z   With an existing essentials bank
2024-03-12T22:04:33.7281333Z     Manufacturer Donations
2024-03-12T22:04:34.3372857Z       has a link to create a new donation
2024-03-12T22:04:34.3374952Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 7 during 2024-02-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:04:34.3376099Z         filtering to 'Last 30 Days'
2024-03-12T22:04:36.6361069Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-12T22:04:36.6363217Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 2 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T22:04:36.6364201Z         filtering to 'This Month'
2024-03-12T22:04:38.2496717Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-12T22:04:38.2498729Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T22:04:38.2499789Z         filtering to 'Last Month'
2024-03-12T22:04:39.6529765Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-12T22:04:39.6533090Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T22:04:39.6534840Z         filtering to 'This Year'
2024-03-12T22:04:41.3289272Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-12T22:04:41.3291569Z       given 1 Manufacturer donating on 2024-03-10  (unless 'All Time'), 2 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T22:04:41.3294207Z         filtering to 'Yesterday'
2024-03-12T22:04:42.9726155Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-12T22:04:42.9728226Z       given 1 Manufacturer donating on 2022-03-11  (unless 'All Time'), 1 during 2022-03-12..2023-10-23, and 1 on 2023-10-24
2024-03-12T22:04:42.9730064Z         filtering to '' (March 12, 2022 - October 23, 2023)
2024-03-12T22:04:44.5876323Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-12T22:04:44.5878346Z       given 1 Manufacturer donating on 2024-03-11  (unless 'All Time'), 7 during 2024-03-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:04:44.5879201Z         filtering to 'Today'
2024-03-12T22:04:46.9110815Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-12T22:04:46.9112982Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:04:46.9114472Z         filtering to 'All Time'
2024-03-12T22:04:48.3365896Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-12T22:04:48.3368520Z       given 1 Manufacturer donating on 2024-03-05  (unless 'All Time'), 4 during 2024-03-06..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:04:48.3370461Z         filtering to 'Last 7 Days'
2024-03-12T22:04:50.0752406Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-12T22:04:50.0753440Z     Inventory Totals
2024-03-12T22:04:50.0754339Z       Summary
2024-03-12T22:04:50.8088619Z         displays the on-hand totals
2024-03-12T22:04:50.8089299Z         when constrained to date range
2024-03-12T22:04:51.8798110Z           does not change
2024-03-12T22:04:51.8798915Z     Distributions
2024-03-12T22:04:52.7937843Z       has a link to create a new distribution
2024-03-12T22:04:52.7939247Z       given 1 Distribution on 2022-03-11  (unless 'All Time'), 4 during 2022-03-12..2023-12-15, and 1 on 2023-12-16
2024-03-12T22:04:52.7944284Z         filtering to '' (March 12, 2022 - December 15, 2023)
2024-03-12T22:04:54.3183742Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-12T22:04:54.3185528Z       given 1 Distribution on 2024-03-10  (unless 'All Time'), 3 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T22:04:54.3190707Z         filtering to 'Yesterday'
2024-03-12T22:04:55.8328540Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-12T22:04:55.8330421Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T22:04:55.8331522Z         filtering to 'Last Month'
2024-03-12T22:04:57.2524406Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-12T22:04:57.2526416Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T22:04:57.2527424Z         filtering to 'This Year'
2024-03-12T22:05:00.6642769Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-12T22:05:00.6644594Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:00.6645528Z         filtering to 'Last 30 Days'
2024-03-12T22:05:04.0743650Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-12T22:05:04.0745472Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:04.0746931Z         filtering to 'All Time'
2024-03-12T22:05:05.7365040Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-12T22:05:05.7367330Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T22:05:05.7368767Z         filtering to 'This Month'
2024-03-12T22:05:09.1496122Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-12T22:05:09.1497914Z       given 1 Distribution on 2024-03-05  (unless 'All Time'), 2 during 2024-03-06..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:09.1499074Z         filtering to 'Last 7 Days'
2024-03-12T22:05:10.5773079Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-12T22:05:10.5774770Z       given 1 Distribution on 2024-03-11  (unless 'All Time'), 3 during 2024-03-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:10.5776071Z         filtering to 'Today'
2024-03-12T22:05:12.0459886Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-12T22:05:12.0461119Z     Product Drives
2024-03-12T22:05:12.6426184Z       has a widget for product drive summary data
2024-03-12T22:05:12.6428655Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 0 during 2024-03-06..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:12.6430143Z         filtering to 'Last 7 Days'
2024-03-12T22:05:16.1099848Z           shows 0 Recent Donation link(s)
2024-03-12T22:05:17.5018647Z           shows the correct total donations
2024-03-12T22:05:18.8777892Z           shows the correct total money raised
2024-03-12T22:05:18.8778954Z       Product drive behaviour with Mixed Donation types
2024-03-12T22:05:19.6129769Z         only shows product drive donations as product drive donations
2024-03-12T22:05:20.3315343Z         only counts product drive donations for product drive
2024-03-12T22:05:21.0745241Z         only counts product drive money raised
2024-03-12T22:05:21.0747076Z       given 1 Product Drive Donation on 2024-03-10 (unless 'All Time'), 1 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T22:05:21.0748536Z         filtering to 'Yesterday'
2024-03-12T22:05:22.5326231Z           shows the correct total money raised
2024-03-12T22:05:23.9537666Z           shows the correct total donations
2024-03-12T22:05:25.3803636Z           shows 1 Recent Donation link(s)
2024-03-12T22:05:25.3805209Z       given 1 Product Drive Donation on 2022-03-11 (unless 'All Time'), 0 during 2022-03-12..2024-01-13, and 1 on 2024-01-14
2024-03-12T22:05:25.3806450Z         filtering to '' (March 12, 2022 - January 13, 2024)
2024-03-12T22:05:26.7696003Z           shows the correct total donations
2024-03-12T22:05:28.1524747Z           shows the correct total money raised
2024-03-12T22:05:31.5416155Z           shows 0 Recent Donation link(s)
2024-03-12T22:05:31.5418083Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 2 during 2024-02-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:31.5419647Z         filtering to 'Last 30 Days'
2024-03-12T22:05:32.9817428Z           shows the correct total money raised
2024-03-12T22:05:34.4646036Z           shows 2 Recent Donation link(s)
2024-03-12T22:05:35.8989246Z           shows the correct total donations
2024-03-12T22:05:35.8991431Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T22:05:35.8992995Z         filtering to 'This Month'
2024-03-12T22:05:37.3033469Z           shows the correct total donations
2024-03-12T22:05:38.7509452Z           shows 1 Recent Donation link(s)
2024-03-12T22:05:40.1656554Z           shows the correct total money raised
2024-03-12T22:05:40.1658486Z       given 1 Product Drive Donation on 2024-03-11 (unless 'All Time'), 1 during 2024-03-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:40.1660169Z         filtering to 'Today'
2024-03-12T22:05:41.5871135Z           shows the correct total donations
2024-03-12T22:05:42.9977627Z           shows the correct total money raised
2024-03-12T22:05:44.4116210Z           shows 1 Recent Donation link(s)
2024-03-12T22:05:44.4117862Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T22:05:44.4118884Z         filtering to 'This Year'
2024-03-12T22:05:45.9045903Z           shows 3 Recent Donation link(s)
2024-03-12T22:05:47.4338989Z           shows the correct total donations
2024-03-12T22:05:49.0013838Z           shows the correct total money raised
2024-03-12T22:05:49.0015793Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T22:05:49.0016946Z         filtering to 'Last Month'
2024-03-12T22:05:50.3556929Z           shows the correct total money raised
2024-03-12T22:05:51.7131565Z           shows the correct total donations
2024-03-12T22:05:55.0768762Z           shows 0 Recent Donation link(s)
2024-03-12T22:05:55.0769715Z     Donations
2024-03-12T22:05:55.9835567Z       has a link to create a new donation
2024-03-12T22:05:55.9837552Z       given 1 Donation on 2024-02-11 (only if a valid date), 3 during 2024-02-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:05:55.9839012Z         filtering to 'Last 30 Days'
2024-03-12T22:05:57.4499059Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T22:05:57.4501029Z       given 1 Donation on 2022-03-11 (only if a valid date), 2 during 2022-03-12..2023-12-26, and 1 on 2023-12-27
2024-03-12T22:05:57.4502762Z         filtering to '' (March 12, 2022 - December 26, 2023)
2024-03-12T22:05:58.9199655Z           shows the correct total and 2 Recent Donation link(s)
2024-03-12T22:05:58.9201493Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T22:05:58.9202465Z         filtering to 'This Year'
2024-03-12T22:06:00.3404532Z           shows the correct total and 1 Recent Donation link(s)
2024-03-12T22:06:00.3406469Z       given 1 Donation on 2024-03-05 (only if a valid date), 3 during 2024-03-06..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:06:00.3407743Z         filtering to 'Last 7 Days'
2024-03-12T22:06:01.8548793Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T22:06:01.8556611Z       given 1 Donation on 2024-01-31 (only if a valid date), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T22:06:01.8558061Z         filtering to 'Last Month'
2024-03-12T22:06:05.3892830Z           shows the correct total and 0 Recent Donation link(s)
2024-03-12T22:06:05.3894760Z       given 1 Donation on 2024-03-11 (only if a valid date), 4 during 2024-03-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:06:05.3895867Z         filtering to 'Today'
2024-03-12T22:06:06.9148578Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T22:06:06.9150336Z       given 1 Donation on 2024-03-10 (only if a valid date), 3 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T22:06:06.9151588Z         filtering to 'Yesterday'
2024-03-12T22:06:08.4558239Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T22:06:08.4560585Z       given 1 Donation on 2024-02-29 (only if a valid date), 2 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T22:06:08.4562049Z         filtering to 'This Month'
2024-03-12T22:06:09.9322570Z           shows the correct total and 2 Recent Donation link(s)
2024-03-12T22:06:09.9323525Z     Purchases
2024-03-12T22:06:10.8405222Z       has a link to create a new purchase
2024-03-12T22:06:10.8406913Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T22:06:10.8408290Z         filtering to 'This Month'
2024-03-12T22:06:12.3172236Z           shows correct 3 Recent Purchase link(s)
2024-03-12T22:06:12.3174383Z       given 1 Purchase on 2022-03-11  (unless 'All Time'), 4 during 2022-03-12..2023-09-17, and 1 on 2023-09-18
2024-03-12T22:06:12.3175951Z         filtering to '' (March 12, 2022 - September 17, 2023)
2024-03-12T22:06:13.8733106Z           shows correct 3 Recent Purchase link(s)
2024-03-12T22:06:13.8734788Z       given 1 Purchase on 2024-03-10  (unless 'All Time'), 0 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T22:06:13.8735783Z         filtering to 'Yesterday'
2024-03-12T22:06:17.2142446Z           shows correct 0 Recent Purchase link(s)
2024-03-12T22:06:17.2144057Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 1 during 2024-02-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:06:17.2145194Z         filtering to 'Last 30 Days'
2024-03-12T22:06:18.6393160Z           shows correct 1 Recent Purchase link(s)
2024-03-12T22:06:18.6394879Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T22:06:18.6395862Z         filtering to 'Last Month'
2024-03-12T22:06:20.0742917Z           shows correct 2 Recent Purchase link(s)
2024-03-12T22:06:20.0744834Z       given 1 Purchase on 2024-03-11  (unless 'All Time'), 3 during 2024-03-12..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:06:20.0746064Z         filtering to 'Today'
2024-03-12T22:06:21.5756446Z           shows correct 3 Recent Purchase link(s)
2024-03-12T22:06:21.5758238Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T22:06:21.5759451Z         filtering to 'This Year'
2024-03-12T22:06:23.0674109Z           shows correct 3 Recent Purchase link(s)
2024-03-12T22:06:23.0676102Z       given 1 Purchase on 2024-03-05  (unless 'All Time'), 0 during 2024-03-06..2024-03-12, and 1 on 2024-03-13
2024-03-12T22:06:23.0677031Z         filtering to 'Last 7 Days'
2024-03-12T22:06:26.4224115Z           shows correct 0 Recent Purchase link(s)
2024-03-12T22:06:26.4225053Z     Signage
2024-03-12T22:06:29.3353038Z       shows their organization name unless they have a logo set
2024-03-12T22:06:29.3354009Z   With a new essentials bank
2024-03-12T22:06:57.3759578Z     displays the getting started guide until the steps are completed
2024-03-12T22:06:57.3760388Z 
2024-03-12T22:06:57.3760656Z Admin::AccountRequestsController
2024-03-12T22:06:57.3762897Z   while signed in as a super admin
2024-03-12T22:06:57.3763884Z     GET #for_rejection
2024-03-12T22:06:57.3764748Z       with an invalid token
2024-03-12T22:06:57.4166979Z         should show a not found message
2024-03-12T22:06:57.4167866Z       with a valid token
2024-03-12T22:06:57.4627206Z         should show the request
2024-03-12T22:06:57.4627825Z     POST #reject
2024-03-12T22:06:57.4879873Z       should redirect back on success
2024-03-12T22:06:57.4881017Z     GET #index
2024-03-12T22:06:57.5215895Z       returns success
2024-03-12T22:06:57.5216549Z 
2024-03-12T22:06:57.5216905Z Admin::Questions
2024-03-12T22:06:57.5218571Z   while signed in as a super admin
2024-03-12T22:06:57.5220008Z     POST #create
2024-03-12T22:06:57.5522553Z       lets the user create questions
2024-03-12T22:06:57.5523733Z     PATCH #update
2024-03-12T22:06:57.5763085Z       lets the user update questions
2024-03-12T22:06:57.5763961Z     DELETE #destroy
2024-03-12T22:06:57.5998328Z       lets the user delete questions
2024-03-12T22:06:57.5999633Z     GET #edit
2024-03-12T22:06:57.6567645Z       lets the user load the edit question page
2024-03-12T22:06:57.6568886Z     GET #new
2024-03-12T22:06:57.6928713Z       lets the user load the new question page
2024-03-12T22:06:57.6929850Z     GET #index
2024-03-12T22:06:57.7265192Z       lets the user load the page
2024-03-12T22:06:57.7265777Z 
2024-03-12T22:06:57.7266028Z Kit management
2024-03-12T22:06:59.2728282Z   can allocate and deallocate quantity per storage location from kit index
2024-03-12T22:06:59.8657292Z   should not display inactive storage locations under allocations
2024-03-12T22:07:00.7743988Z   can create a new kit as a user with the proper quantity
2024-03-12T22:07:00.7744701Z   when there is no kit quantity
2024-03-12T22:07:01.9492288Z     will not change quantity amounts when deallocating
2024-03-12T22:07:01.9494009Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-12T22:07:03.0849754Z     will not change quantity amounts when allocating
2024-03-12T22:07:03.0850526Z 
2024-03-12T22:07:03.0854836Z User account management
2024-03-12T22:07:03.0855663Z   when not in staging
2024-03-12T22:07:03.8609251Z     should fail when the email is invalid
2024-03-12T22:07:04.7848119Z     should change an user name
2024-03-12T22:07:05.6458067Z     should change the email
2024-03-12T22:07:05.6459513Z   when in staging
2024-03-12T22:07:06.1206793Z     should display staging warning
2024-03-12T22:07:06.5789068Z     should not allow the user to change staging credentials
2024-03-12T22:07:06.5789743Z 
2024-03-12T22:07:06.5790276Z Organization management
2024-03-12T22:07:06.5792516Z   while signed in as an organization admin
2024-03-12T22:07:07.0844402Z     can re-invite a user to an organization after 7 days
2024-03-12T22:07:08.0459032Z     can add a new user to an organization
2024-03-12T22:07:08.4912446Z     can see 'Make user' button for admins
2024-03-12T22:07:11.2111716Z     can re-activate a user in the organization (FAILED - 1)
2024-03-12T22:07:11.2114236Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_can-re-activate-a-user-in-the-organization_2024-03-12-15-07-11.076.html[0m
2024-03-12T22:07:11.2117069Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_can-re-activate-a-user-in-the-organization_2024-03-12-15-07-11.076.png[0m
2024-03-12T22:07:12.1699484Z     can deactivate a user in the organization
2024-03-12T22:07:12.1700268Z     Viewing the organization
2024-03-12T22:07:12.7428646Z       can view organization details
2024-03-12T22:07:12.7429520Z     Editing the organization
2024-03-12T22:07:13.7453691Z       can select if the org shows year-to-date values on the distribution printout
2024-03-12T22:07:14.7293001Z       can select if the org distributes essentials monthly
2024-03-12T22:07:15.5472246Z       can set a default storage location on the organization
2024-03-12T22:07:16.5154142Z       can enable if the org uses single step invite and approve partner process
2024-03-12T22:07:17.4837409Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-12T22:07:18.3689989Z       can set a reminder and a deadline day
2024-03-12T22:07:19.5392337Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-12T22:07:20.3983852Z       can set the NDBN Member ID
2024-03-12T22:07:21.8510698Z       can select and deselect Required Partner Fields
2024-03-12T22:07:22.7982530Z       can select if the org repackages essentials
2024-03-12T22:07:22.7983858Z   while signed in as a normal user
2024-03-12T22:07:23.1866854Z     can see summary details about the organization as a user
2024-03-12T22:07:23.6652304Z     cannot see 'Make user' button for admins
2024-03-12T22:07:23.6652996Z 
2024-03-12T22:07:23.6653173Z /partners/dashboard
2024-03-12T22:07:23.7837435Z   displays upcoming distributions
2024-03-12T22:07:23.7838597Z   with both roles
2024-03-12T22:07:23.8463607Z     should include the switch link
2024-03-12T22:07:23.8464325Z   BroadcastAnnouncement card
2024-03-12T22:07:23.9026508Z     doesn't display announcements from super admins
2024-03-12T22:07:23.9611964Z     doesn't display announcements if there are not valid ones
2024-03-12T22:07:24.0221503Z     displays announcements if there are valid ones
2024-03-12T22:07:24.0222222Z   GET #index
2024-03-12T22:07:24.1013968Z     does not display requests in other states
2024-03-12T22:07:24.1828769Z     displays requests that are pending
2024-03-12T22:07:24.1829574Z   with just partner role
2024-03-12T22:07:24.2382981Z     should not display the switch link
2024-03-12T22:07:24.2383841Z 
2024-03-12T22:07:24.2384020Z Vendor
2024-03-12T22:07:24.2384973Z   When vendor have purchases associated with them already
2024-03-12T22:07:24.8575169Z     can have a single vendor show semi-detailed stats about purchases
2024-03-12T22:07:25.3753430Z     can have existing vendors show in the #index with some summary stats
2024-03-12T22:07:25.3754224Z   when creating a new vendor
2024-03-12T22:07:26.1221783Z     cannot add a new vendor instance with empty attributes
2024-03-12T22:07:26.9195268Z     can create a new vendor instance as a user
2024-03-12T22:07:26.9196409Z   when editing an existing vendor
2024-03-12T22:07:27.7065116Z     does not update a vendor with empty attributes
2024-03-12T22:07:28.5003704Z     can update the contact info for a vendor as a user
2024-03-12T22:07:28.5004371Z   When a user views the index page
2024-03-12T22:07:28.8975471Z     should have the vendor names in alphabetical order
2024-03-12T22:07:28.9326876Z W, [2024-03-12T15:07:28.932346 #2512]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-12T22:07:28.9329650Z W, [2024-03-12T15:07:28.932412 #2512]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T22:07:28.9334304Z W, [2024-03-12T15:07:28.932430 #2512]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T22:07:28.9336531Z W, [2024-03-12T15:07:28.932457 #2512]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-12T22:07:28.9530097Z 
2024-03-12T22:07:28.9530649Z Failures:
2024-03-12T22:07:28.9531105Z 
2024-03-12T22:07:28.9532408Z   1) Organization management while signed in as an organization admin can re-activate a user in the organization
2024-03-12T22:07:28.9533609Z      Failure/Error: click_link dom_id(user)
2024-03-12T22:07:28.9748311Z 
2024-03-12T22:07:28.9752073Z      Capybara::ElementNotFound:
2024-03-12T22:07:28.9752699Z        Unable to find visible link "user_63"
2024-03-12T22:07:28.9753125Z 
2024-03-12T22:07:28.9755082Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_organization_management_while_signed_in_as_an_organization_admin_can_re_activate_a_user_in_the_organization_869.png
2024-03-12T22:07:28.9756796Z 
2024-03-12T22:07:28.9756809Z 
2024-03-12T22:07:28.9759053Z      # ./spec/system/organization_system_spec.rb:178:in `block (4 levels) in <top (required)>'
2024-03-12T22:07:28.9760315Z      # ./spec/system/organization_system_spec.rb:176:in `block (3 levels) in <top (required)>'
2024-03-12T22:07:28.9761042Z 
2024-03-12T22:07:28.9762221Z Finished in 3 minutes 33.9 seconds (files took 8.26 seconds to load)
2024-03-12T22:07:28.9763020Z 212 examples, 1 failure
2024-03-12T22:07:28.9764951Z 
2024-03-12T22:07:28.9765382Z Failed examples:
2024-03-12T22:07:28.9766648Z 
2024-03-12T22:07:28.9768697Z rspec ./spec/system/organization_system_spec.rb:173 # Organization management while signed in as an organization admin can re-activate a user in the organization
2024-03-12T22:07:28.9770298Z 
2024-03-12T22:07:28.9770514Z Randomized with seed 54777
2024-03-12T22:07:28.9770868Z 
2024-03-12T22:07:29.4770027Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-12T22:07:29.4773105Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3758 / 6478 LOC (58.01%) covered.
2024-03-12T22:07:29.6057673Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/admin/account_requests_requests_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/events_requests_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb" failed
2024-03-12T22:07:30.0189023Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-12T22:07:30.0191622Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10780 LOC (0.35%) covered.
2024-03-12T22:07:30.0456158Z ##[error]Process completed with exit code 1.
