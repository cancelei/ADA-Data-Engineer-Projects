2024-02-19T17:58:06.7884604Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-19T17:58:06.7885510Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-19T17:58:06.7913815Z shell: /usr/bin/bash -e {0}
2024-02-19T17:58:06.7914200Z env:
2024-02-19T17:58:06.7914625Z   POSTGRES_HOST: localhost
2024-02-19T17:58:06.7915029Z   DATABASE_HOST: localhost
2024-02-19T17:58:06.7915372Z   PG_USERNAME: postgres
2024-02-19T17:58:06.7915809Z   PG_PASSWORD: password
2024-02-19T17:58:06.7916208Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-19T17:58:06.7916687Z   POSTGRES_PORT: 5432
2024-02-19T17:58:06.7917036Z   PGHOST: localhost
2024-02-19T17:58:06.7917394Z   PGUSER: postgres
2024-02-19T17:58:06.7917809Z   RAILS_ENV: test
2024-02-19T17:58:06.7918189Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-19T17:58:06.7918623Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-19T17:58:06.7919043Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-19T17:58:06.7919495Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-19T17:58:06.7920116Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-19T17:58:06.7920790Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-19T17:58:06.7921420Z   EVENTS_READ: true
2024-02-19T17:58:06.7921781Z ##[endgroup]
2024-02-19T17:58:12.4940791Z W, [2024-02-19T17:58:12.493732 #2348]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-19T17:58:12.4943126Z W, [2024-02-19T17:58:12.493792 #2348]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T17:58:12.4946297Z W, [2024-02-19T17:58:12.493808 #2348]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T17:58:12.4952319Z W, [2024-02-19T17:58:12.493840 #2348]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-19T17:58:15.0501834Z W, [2024-02-19T17:58:15.049820 #2348]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-19T17:58:15.0504241Z W, [2024-02-19T17:58:15.049864 #2348]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T17:58:15.0505883Z W, [2024-02-19T17:58:15.049884 #2348]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T17:58:15.0508639Z W, [2024-02-19T17:58:15.049930 #2348]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-19T17:58:15.0557936Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-19T17:58:23.3818606Z 
2024-02-19T17:58:23.3819689Z Randomized with seed 55228
2024-02-19T17:58:24.3892848Z 
2024-02-19T17:58:24.3893629Z Profiles
2024-02-19T17:58:24.3894496Z   POST #update
2024-02-19T17:58:24.3895736Z     successful save
2024-02-19T17:58:24.4700556Z       update partner
2024-02-19T17:58:24.5169232Z       redirects to #show
2024-02-19T17:58:24.5170161Z     when updating an existing value to a blank value
2024-02-19T17:58:24.5666132Z       update partner
2024-02-19T17:58:24.6101307Z       should have blank values
2024-02-19T17:58:24.6102032Z   GET #edit
2024-02-19T17:58:24.7296618Z     returns http success
2024-02-19T17:58:24.7297428Z 
2024-02-19T17:58:24.7297664Z Vendor
2024-02-19T17:58:24.7298963Z   when creating a new vendor
2024-02-19T17:58:30.9329702Z     can create a new vendor instance as a user
2024-02-19T17:58:31.6732397Z     cannot add a new vendor instance with empty attributes
2024-02-19T17:58:31.6733399Z   when editing an existing vendor
2024-02-19T17:58:32.4451224Z     does not update a vendor with empty attributes
2024-02-19T17:58:33.2293056Z     can update the contact info for a vendor as a user
2024-02-19T17:58:33.2293934Z   When vendor have purchases associated with them already
2024-02-19T17:58:33.8827674Z     can have existing vendors show in the #index with some summary stats
2024-02-19T17:58:34.5101539Z     can have a single vendor show semi-detailed stats about purchases
2024-02-19T17:58:34.5102626Z   When a user views the index page
2024-02-19T17:58:34.9979468Z     should have the vendor names in alphabetical order
2024-02-19T17:58:34.9983338Z 
2024-02-19T17:58:34.9983661Z Dashboard
2024-02-19T17:58:34.9985027Z   With a new essentials bank
2024-02-19T17:59:03.1689962Z     displays the getting started guide until the steps are completed
2024-02-19T17:59:03.1691046Z   With an existing essentials bank
2024-02-19T17:59:03.1692293Z     Purchases
2024-02-19T17:59:04.1264422Z       has a link to create a new purchase
2024-02-19T17:59:04.1266165Z       given 1 Purchase on 2024-02-18  (unless 'All Time'), 4 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:04.1267146Z         filtering to 'Today'
2024-02-19T17:59:05.6942640Z           shows correct 3 Recent Purchase link(s)
2024-02-19T17:59:05.6944410Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T17:59:05.6945608Z         filtering to 'Last Month'
2024-02-19T17:59:07.1434295Z           shows correct 2 Recent Purchase link(s)
2024-02-19T17:59:07.1435706Z       given 1 Purchase on 2022-02-18  (unless 'All Time'), 3 during 2022-02-19..2023-11-13, and 1 on 2023-11-14
2024-02-19T17:59:07.1436845Z         filtering to '' (February 19, 2022 - November 13, 2023)
2024-02-19T17:59:08.6736546Z           shows correct 3 Recent Purchase link(s)
2024-02-19T17:59:08.6738092Z       given 1 Purchase on 2024-01-20  (unless 'All Time'), 3 during 2024-01-21..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:08.6739354Z         filtering to 'Last 30 Days'
2024-02-19T17:59:10.1686894Z           shows correct 3 Recent Purchase link(s)
2024-02-19T17:59:10.1688305Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T17:59:10.1689739Z         filtering to 'Yesterday'
2024-02-19T17:59:11.6563449Z           shows correct 3 Recent Purchase link(s)
2024-02-19T17:59:11.6565412Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T17:59:11.6567069Z         filtering to 'This Month'
2024-02-19T17:59:13.0859510Z           shows correct 2 Recent Purchase link(s)
2024-02-19T17:59:13.0861495Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T17:59:13.0862768Z         filtering to 'This Year'
2024-02-19T17:59:14.4649943Z           shows correct 1 Recent Purchase link(s)
2024-02-19T17:59:14.4651680Z       given 1 Purchase on 2024-02-12  (unless 'All Time'), 3 during 2024-02-13..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:14.4653126Z         filtering to 'Last 7 Days'
2024-02-19T17:59:15.9465988Z           shows correct 3 Recent Purchase link(s)
2024-02-19T17:59:15.9467229Z     Signage
2024-02-19T17:59:18.8459983Z       shows their organization name unless they have a logo set
2024-02-19T17:59:18.8461244Z     Inventory Totals
2024-02-19T17:59:18.8461850Z       Summary
2024-02-19T17:59:19.5641463Z         displays the on-hand totals
2024-02-19T17:59:19.5642654Z         when constrained to date range
2024-02-19T17:59:20.6381774Z           does not change
2024-02-19T17:59:20.6382905Z     Manufacturer Donations
2024-02-19T17:59:21.2478068Z       has a link to create a new donation
2024-02-19T17:59:21.2480382Z       given 1 Manufacturer donating on 2024-02-12  (unless 'All Time'), 2 during 2024-02-13..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:21.2481798Z         filtering to 'Last 7 Days'
2024-02-19T17:59:22.8885797Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-19T17:59:22.8888016Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T17:59:22.8889384Z         filtering to 'This Year'
2024-02-19T17:59:24.4748466Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-19T17:59:24.4750333Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 5 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T17:59:24.4751253Z         filtering to 'Yesterday'
2024-02-19T17:59:26.5280649Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-19T17:59:26.5282728Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 8 during 2000-01-01..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:26.5283611Z         filtering to 'All Time'
2024-02-19T17:59:28.6546908Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-19T17:59:28.6549581Z       given 1 Manufacturer donating on 2024-01-20  (unless 'All Time'), 3 during 2024-01-21..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:28.6551184Z         filtering to 'Last 30 Days'
2024-02-19T17:59:30.5024348Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-19T17:59:30.5026712Z       given 1 Manufacturer donating on 2024-02-18  (unless 'All Time'), 9 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:30.5028416Z         filtering to 'Today'
2024-02-19T17:59:33.1549792Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-19T17:59:33.1551924Z       given 1 Manufacturer donating on 2022-02-18  (unless 'All Time'), 8 during 2022-02-19..2023-10-10, and 1 on 2023-10-11
2024-02-19T17:59:33.1553797Z         filtering to '' (February 19, 2022 - October 10, 2023)
2024-02-19T17:59:35.6065396Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-19T17:59:35.6067009Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 9 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T17:59:35.6067869Z         filtering to 'Last Month'
2024-02-19T17:59:38.0623267Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-19T17:59:38.0625585Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T17:59:38.0627582Z         filtering to 'This Month'
2024-02-19T17:59:39.7251420Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-19T17:59:39.7252606Z     Distributions
2024-02-19T17:59:40.6494453Z       has a link to create a new distribution
2024-02-19T17:59:40.6496890Z       given 1 Distribution on 2022-02-18  (unless 'All Time'), 0 during 2022-02-19..2023-09-08, and 1 on 2023-09-09
2024-02-19T17:59:40.6499178Z         filtering to '' (February 19, 2022 - September 8, 2023)
2024-02-19T17:59:44.0652652Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-19T17:59:44.0654658Z       given 1 Distribution on 2024-01-20  (unless 'All Time'), 2 during 2024-01-21..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:44.0656113Z         filtering to 'Last 30 Days'
2024-02-19T17:59:45.4563139Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-19T17:59:45.4564940Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T17:59:45.4566059Z         filtering to 'Yesterday'
2024-02-19T17:59:48.8555063Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-19T17:59:48.8557290Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T17:59:48.8558370Z         filtering to 'Last Month'
2024-02-19T17:59:50.2244711Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-19T17:59:50.2246446Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T17:59:50.2247228Z         filtering to 'This Month'
2024-02-19T17:59:51.6694119Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T17:59:51.6695765Z       given 1 Distribution on 2024-02-18  (unless 'All Time'), 0 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:51.6697214Z         filtering to 'Today'
2024-02-19T17:59:55.0814863Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-19T17:59:55.0817257Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T17:59:55.0818758Z         filtering to 'This Year'
2024-02-19T17:59:56.4848996Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-19T17:59:56.4851053Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 4 during 2000-01-01..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:56.4852272Z         filtering to 'All Time'
2024-02-19T17:59:57.8989864Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-19T17:59:57.8992322Z       given 1 Distribution on 2024-02-12  (unless 'All Time'), 2 during 2024-02-13..2024-02-19, and 1 on 2024-02-20
2024-02-19T17:59:57.8994272Z         filtering to 'Last 7 Days'
2024-02-19T17:59:59.3668179Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-19T17:59:59.3669397Z     Product Drives
2024-02-19T17:59:59.9538484Z       has a widget for product drive summary data
2024-02-19T17:59:59.9540519Z       given 1 Product Drive Donation on 2022-02-18 (unless 'All Time'), 1 during 2022-02-19..2023-12-24, and 1 on 2023-12-25
2024-02-19T17:59:59.9542161Z         filtering to '' (February 19, 2022 - December 24, 2023)
2024-02-19T18:00:01.4375466Z           shows the correct total donations
2024-02-19T18:00:02.8385385Z           shows 1 Recent Donation link(s)
2024-02-19T18:00:04.2794704Z           shows the correct total money raised
2024-02-19T18:00:04.2796664Z       given 1 Product Drive Donation on 2024-02-18 (unless 'All Time'), 0 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:04.2798168Z         filtering to 'Today'
2024-02-19T18:00:05.6511930Z           shows the correct total donations
2024-02-19T18:00:09.0241937Z           shows 0 Recent Donation link(s)
2024-02-19T18:00:10.3777836Z           shows the correct total money raised
2024-02-19T18:00:10.3779902Z       given 1 Product Drive Donation on 2024-02-12 (unless 'All Time'), 1 during 2024-02-13..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:10.3780924Z         filtering to 'Last 7 Days'
2024-02-19T18:00:11.7867926Z           shows the correct total money raised
2024-02-19T18:00:13.1791259Z           shows the correct total donations
2024-02-19T18:00:14.5909046Z           shows 1 Recent Donation link(s)
2024-02-19T18:00:14.5911598Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T18:00:14.5912887Z         filtering to 'Yesterday'
2024-02-19T18:00:16.1889705Z           shows the correct total donations
2024-02-19T18:00:17.6741900Z           shows 3 Recent Donation link(s)
2024-02-19T18:00:19.1502324Z           shows the correct total money raised
2024-02-19T18:00:19.1504616Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T18:00:19.1506058Z         filtering to 'Last Month'
2024-02-19T18:00:20.5895510Z           shows the correct total donations
2024-02-19T18:00:22.0154236Z           shows the correct total money raised
2024-02-19T18:00:23.4739199Z           shows 2 Recent Donation link(s)
2024-02-19T18:00:23.4740172Z       Product drive behaviour with Mixed Donation types
2024-02-19T18:00:24.1948242Z         only counts product drive money raised
2024-02-19T18:00:24.9232147Z         only counts product drive donations for product drive
2024-02-19T18:00:25.6418983Z         only shows product drive donations as product drive donations
2024-02-19T18:00:25.6420692Z       given 1 Product Drive Donation on 2024-01-20 (unless 'All Time'), 3 during 2024-01-21..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:25.6421761Z         filtering to 'Last 30 Days'
2024-02-19T18:00:27.1345273Z           shows the correct total money raised
2024-02-19T18:00:28.6069892Z           shows 3 Recent Donation link(s)
2024-02-19T18:00:30.0909558Z           shows the correct total donations
2024-02-19T18:00:30.0911612Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T18:00:30.0912922Z         filtering to 'This Year'
2024-02-19T18:00:31.5519103Z           shows 2 Recent Donation link(s)
2024-02-19T18:00:32.9905649Z           shows the correct total donations
2024-02-19T18:00:34.5541015Z           shows the correct total money raised
2024-02-19T18:00:34.5542744Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T18:00:34.5545682Z         filtering to 'This Month'
2024-02-19T18:00:37.9088604Z           shows 0 Recent Donation link(s)
2024-02-19T18:00:39.2567934Z           shows the correct total donations
2024-02-19T18:00:40.6091808Z           shows the correct total money raised
2024-02-19T18:00:40.6092746Z     Donations
2024-02-19T18:00:41.5232192Z       has a link to create a new donation
2024-02-19T18:00:41.5233674Z       given 1 Donation on 2022-02-18 (only if a valid date), 2 during 2022-02-19..2024-02-08, and 1 on 2024-02-09
2024-02-19T18:00:41.5234664Z         filtering to '' (February 19, 2022 - February 8, 2024)
2024-02-19T18:00:43.0217790Z           shows the correct total and 2 Recent Donation link(s)
2024-02-19T18:00:43.0219772Z       given 1 Donation on 2024-02-12 (only if a valid date), 1 during 2024-02-13..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:43.0221181Z         filtering to 'Last 7 Days'
2024-02-19T18:00:44.4652544Z           shows the correct total and 1 Recent Donation link(s)
2024-02-19T18:00:44.4654636Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-19T18:00:44.4656228Z         filtering to 'This Month'
2024-02-19T18:00:45.9389972Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T18:00:45.9391848Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-19T18:00:45.9393146Z         filtering to 'Last Month'
2024-02-19T18:00:47.3409058Z           shows the correct total and 1 Recent Donation link(s)
2024-02-19T18:00:47.3411217Z       given 1 Donation on 2024-02-17 (only if a valid date), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-19T18:00:47.3412775Z         filtering to 'Yesterday'
2024-02-19T18:00:50.7239767Z           shows the correct total and 0 Recent Donation link(s)
2024-02-19T18:00:50.7241882Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-19T18:00:50.7243219Z         filtering to 'This Year'
2024-02-19T18:00:52.4179263Z           shows the correct total and 3 Recent Donation link(s)
2024-02-19T18:00:52.4181478Z       given 1 Donation on 2024-01-20 (only if a valid date), 0 during 2024-01-21..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:52.4182599Z         filtering to 'Last 30 Days'
2024-02-19T18:00:55.8167673Z           shows the correct total and 0 Recent Donation link(s)
2024-02-19T18:00:55.8169536Z       given 1 Donation on 2024-02-18 (only if a valid date), 2 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-19T18:00:55.8171008Z         filtering to 'Today'
2024-02-19T18:00:57.2892427Z           shows the correct total and 2 Recent Donation link(s)
2024-02-19T18:00:57.2895869Z 
2024-02-19T18:00:57.2896695Z Audits
2024-02-19T18:00:57.2897837Z   while signed in as an organization admin
2024-02-19T18:00:57.2899260Z     DELETE #destroy
2024-02-19T18:00:57.2900124Z       with valid params
2024-02-19T18:00:57.3374945Z         can not destroy the audit if the audit's status is `finalized`
2024-02-19T18:00:57.3792830Z         destroys the audit if the audit's status is `in_progress`
2024-02-19T18:00:57.4209350Z         destroys the audit if the audit's status is `confirms`
2024-02-19T18:00:57.4210504Z     POST #create
2024-02-19T18:00:57.4211352Z       with valid params
2024-02-19T18:00:57.4622719Z         creates a new Audit
2024-02-19T18:00:57.5035003Z         redirects to the #show after created audit
2024-02-19T18:00:57.5436637Z         assigns a newly created audit as @audit
2024-02-19T18:00:57.5853317Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-19T18:00:57.6269002Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-19T18:00:57.6269923Z       with invalid params
2024-02-19T18:00:57.6895693Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-19T18:00:57.7318866Z         re-renders the 'new' template
2024-02-19T18:00:57.7718290Z         assigns a newly created but unsaved audit as @audit
2024-02-19T18:00:57.7719519Z     GET #index
2024-02-19T18:00:57.8268201Z       is successful
2024-02-19T18:00:57.8269108Z     POST #finalize
2024-02-19T18:00:57.8929559Z       sets the finalize status and saves an event
2024-02-19T18:00:57.8930505Z     GET #new
2024-02-19T18:00:57.9303316Z       is successful
2024-02-19T18:00:57.9304354Z     GET #edit
2024-02-19T18:00:57.9903929Z       is successful if the status of audit is `in_progress`
2024-02-19T18:00:58.0625404Z       redirects to #index if the status of audit is not `in_progress`
2024-02-19T18:00:58.0626395Z     GET #show
2024-02-19T18:00:58.1158659Z       is successful
2024-02-19T18:00:58.1159798Z 
2024-02-19T18:00:58.1160069Z StorageLocations
2024-02-19T18:00:58.1161671Z   While signed in
2024-02-19T18:00:58.1163387Z     GET #new
2024-02-19T18:00:58.4080652Z       returns http success
2024-02-19T18:00:58.4081754Z     PUT #deactivate
2024-02-19T18:00:58.4301991Z       discards
2024-02-19T18:00:58.4302672Z       with inventory
2024-02-19T18:00:58.4822915Z         does not discard
2024-02-19T18:00:58.4823625Z     GET #destroy
2024-02-19T18:00:58.5136921Z       redirects to #index
2024-02-19T18:00:58.5137955Z     Looking at a different organization
2024-02-19T18:00:58.6902295Z       redirects the user to the sign-in page for CRUD actions
2024-02-19T18:00:58.7261389Z     GET #edit
2024-02-19T18:00:58.7262310Z       returns http success
2024-02-19T18:00:58.7263019Z     POST #import_csv
2024-02-19T18:00:58.7263574Z       csv file with wrong headers
2024-02-19T18:00:58.7441084Z         redirects
2024-02-19T18:00:58.7576583Z         presents a flash error message
2024-02-19T18:00:58.7577528Z       without a csv file
2024-02-19T18:00:58.7701271Z         redirects to :index
2024-02-19T18:00:58.7826103Z         presents a flash error message
2024-02-19T18:00:58.7826869Z       with a csv file
2024-02-19T18:00:58.7988337Z         redirects
2024-02-19T18:00:58.8178721Z         presents a flash notice message
2024-02-19T18:00:58.8231775Z         invokes .import_csv
2024-02-19T18:00:58.8232506Z     GET #show
2024-02-19T18:00:58.8233649Z       html
2024-02-19T18:00:58.8934577Z         should return a correct response
2024-02-19T18:00:58.8935584Z         with version date set
2024-02-19T18:00:58.8936752Z           with no version found
2024-02-19T18:00:58.9665949Z             should show N/A
2024-02-19T18:00:58.9666501Z           with a version found
2024-02-19T18:00:59.0591419Z             should show the version specified
2024-02-19T18:00:59.0592461Z       csv
2024-02-19T18:00:59.1110003Z         should be successful
2024-02-19T18:00:59.1111033Z     GET #inventory
2024-02-19T18:00:59.1111640Z       when also including inactive items
2024-02-19T18:00:59.1785856Z         returns a collection that also includes items that have been deactivated
2024-02-19T18:00:59.1787022Z       without any overrides
2024-02-19T18:00:59.2377379Z         returns a collection that only includes items at the storage location
2024-02-19T18:00:59.2378778Z       when also including omitted items
2024-02-19T18:00:59.2960133Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-19T18:00:59.3457769Z         contains a collection of ducktyped entries that respond the same
2024-02-19T18:00:59.3458762Z     PUT #reactivate
2024-02-19T18:00:59.3646739Z       undiscards
2024-02-19T18:00:59.3647617Z     GET #index
2024-02-19T18:00:59.3648222Z       csv
2024-02-19T18:00:59.4656095Z         includes headers followed by alphabetized item names
2024-02-19T18:00:59.4853270Z         succeeds
2024-02-19T18:00:59.4853922Z       html
2024-02-19T18:00:59.5222713Z         succeeds
2024-02-19T18:00:59.5223478Z         with inactive locations
2024-02-19T18:00:59.5601063Z           does not includes the inactive location
2024-02-19T18:00:59.5602228Z           with include_inactive_locations
2024-02-19T18:00:59.5985750Z             includes the inactive location
2024-02-19T18:00:59.5986600Z   While not signed in
2024-02-19T18:00:59.6051701Z     redirects the user to the sign-in page for CRUD actions
2024-02-19T18:00:59.6054395Z 
2024-02-19T18:00:59.6054778Z Purchases
2024-02-19T18:00:59.6056215Z   while signed in as a normal user
2024-02-19T18:00:59.6057374Z     When creating a new purchase
2024-02-19T18:01:00.0998715Z       should not display inactive storage locations in dropdown
2024-02-19T18:01:00.0999686Z       via manual entry
2024-02-19T18:01:01.3169943Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-19T18:01:02.2224143Z         User can create a purchase using dollars decimal amount
2024-02-19T18:01:03.2858018Z         User can create vendor from purchase
2024-02-19T18:01:04.5444706Z         User can create a purchase IN THE PAST
2024-02-19T18:01:05.5661411Z         Does not include inactive items in the line item fields
2024-02-19T18:01:05.5662484Z         when creating a purchase incorrectly
2024-02-19T18:01:06.3747682Z           should display failure with error messages
2024-02-19T18:01:07.3691958Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-19T18:01:07.3693073Z       Editing purchase
2024-02-19T18:01:08.0088791Z         A user can view another organizations purchase
2024-02-19T18:01:08.5135688Z         A user can see purchased_from value
2024-02-19T18:01:08.5138214Z       via barcode entry
2024-02-19T18:01:09.2520706Z         a user can add items via scanning them in by barcode
2024-02-19T18:01:10.1877873Z         User scan same barcode 2 times
2024-02-19T18:01:11.4069422Z         a user can add items that do not yet have a barcode
2024-02-19T18:01:11.4070450Z     When visiting the index page
2024-02-19T18:01:11.4071425Z       In the middle of the year
2024-02-19T18:01:12.2167949Z         User can click to the new purchase form
2024-02-19T18:01:12.9549410Z         User sees purchased date column
2024-02-19T18:01:13.7346227Z         User sees total purchases value
2024-02-19T18:01:13.7347093Z       When filtering on the index page
2024-02-19T18:01:14.5837388Z         User can filter the #index by storage location
2024-02-19T18:01:15.4427020Z         User can filter the #index by vendor
2024-02-19T18:01:15.4427736Z         behaves like Date Range Picker
2024-02-19T18:01:15.4429382Z           when choosing 'Last Month'
2024-02-19T18:01:16.4253707Z             shows only 2 of the records
2024-02-19T18:01:16.4254772Z           when choosing a date range that only includes the previous week
2024-02-19T18:01:17.4080288Z             shows only 1 record
2024-02-19T18:01:17.4081557Z           when choosing 'All Time'
2024-02-19T18:01:18.3912540Z             shows all the records
2024-02-19T18:01:18.3913955Z     When visiting an existing purchase
2024-02-19T18:01:18.8617930Z       does not allow deletion of a purchase
2024-02-19T18:01:18.8619070Z   while signed in as an organization admin
2024-02-19T18:01:19.7415271Z     allows deletion of a purchase
2024-02-19T18:01:19.7415946Z 
2024-02-19T18:01:19.7416696Z Organization management
2024-02-19T18:01:19.7419160Z   while signed in as a normal user
2024-02-19T18:01:20.2556266Z     cannot see 'Make user' button for admins
2024-02-19T18:01:20.7176531Z     can see summary details about the organization as a user
2024-02-19T18:01:20.7177614Z   while signed in as an organization admin
2024-02-19T18:01:21.7619575Z     can deactivate a user in the organization
2024-02-19T18:01:22.7867124Z     can add a new user to an organization
2024-02-19T18:01:23.7976012Z     can re-activate a user in the organization
2024-02-19T18:01:24.3316428Z     can see 'Make user' button for admins
2024-02-19T18:01:24.8456841Z     can re-invite a user to an organization after 7 days
2024-02-19T18:01:24.8457666Z     Viewing the organization
2024-02-19T18:01:25.4536250Z       can view organization details
2024-02-19T18:01:25.4537571Z     Editing the organization
2024-02-19T18:01:26.3643589Z       can set a reminder and a deadline day
2024-02-19T18:01:27.5874475Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-19T18:01:28.6025773Z       can select if the org distributes essentials monthly
2024-02-19T18:01:29.6545357Z       can select if the org repackages essentials
2024-02-19T18:01:30.6580359Z       can enable if the org uses single step invite and approve partner process
2024-02-19T18:01:31.6877300Z       can select if the org shows year-to-date values on the distribution printout
2024-02-19T18:01:32.5484093Z       can set the NDBN Member ID
2024-02-19T18:01:33.4221273Z       can set a default storage location on the organization
2024-02-19T18:01:34.9348521Z       can select and deselect Required Partner Fields
2024-02-19T18:01:35.9462790Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-19T18:01:35.9463671Z 
2024-02-19T18:01:35.9463822Z DonationSites
2024-02-19T18:01:35.9465117Z   while signed in
2024-02-19T18:01:35.9466057Z     GET #index
2024-02-19T18:01:35.9467014Z       csv
2024-02-19T18:01:35.9675744Z         is expected to be successful
2024-02-19T18:01:35.9676913Z       html
2024-02-19T18:01:36.0059511Z         is expected to be successful
2024-02-19T18:01:36.0060654Z 
2024-02-19T18:01:36.0060963Z /account_requests
2024-02-19T18:01:36.0063151Z   GET #confirmation
2024-02-19T18:01:36.0064356Z     when given a token that has already been confirmed
2024-02-19T18:01:36.2151230Z       should render a error that says that is code provided is invalid
2024-02-19T18:01:36.2152303Z     when given a invalid token
2024-02-19T18:01:36.2218914Z       should render a error that says that is code provided is invalid
2024-02-19T18:01:36.2219660Z     when given a valid token
2024-02-19T18:01:36.2413861Z       should render the confirmation template
2024-02-19T18:01:36.2415222Z   GET #confirm
2024-02-19T18:01:36.2416102Z     when given a valid token
2024-02-19T18:01:36.2641990Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-19T18:01:36.2643616Z     when given a invalid token
2024-02-19T18:01:36.2710475Z       should render a error that says that is code provided is invalid
2024-02-19T18:01:36.2711620Z     when given a token that has already been confirmed
2024-02-19T18:01:36.4564376Z       should render a error that says that is code provided is invalid
2024-02-19T18:01:36.4565445Z   GET #new
2024-02-19T18:01:36.4726207Z     renders a successful response
2024-02-19T18:01:36.4727184Z   GET #received
2024-02-19T18:01:36.4727726Z     when given a invalid token
2024-02-19T18:01:36.4808965Z       should render a error that says that is code provided is invalid
2024-02-19T18:01:36.4809904Z     when given a valid token
2024-02-19T18:01:36.4986213Z       should render the received template
2024-02-19T18:01:36.4987437Z   POST #create
2024-02-19T18:01:36.4988086Z     with invalid parameters
2024-02-19T18:01:36.5208221Z       does not create a new AccountRequest
2024-02-19T18:01:36.5397619Z       renders a successful response (i.e. to display the 'new' template)
2024-02-19T18:01:36.5398955Z     with valid parameters
2024-02-19T18:01:36.5652073Z       redirects to the created account_request confirmation
2024-02-19T18:01:36.5809922Z       delivers the confirmation email via default queue
2024-02-19T18:01:36.5971996Z       creates a new AccountRequest
2024-02-19T18:01:36.5975210Z 
2024-02-19T18:01:36.5975935Z /partners/children
2024-02-19T18:01:36.5976925Z   GET #index
2024-02-19T18:01:36.7068286Z     should render without any issues
2024-02-19T18:01:36.7692583Z     should export CSV
2024-02-19T18:01:36.7693120Z 
2024-02-19T18:01:36.7693342Z Managing requests
2024-02-19T18:01:36.7695199Z   creating a request
2024-02-19T18:01:36.7696884Z     GIVEN a partner user is permitted to make a request
2024-02-19T18:01:36.7700851Z       WHEN they create a request with only a comment
2024-02-19T18:01:37.7970204Z         should be created without any issue
2024-02-19T18:01:37.7971124Z       WHEN they create a request properly
2024-02-19T18:01:37.7972568Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-19T18:01:40.0869932Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-19T18:01:40.0871323Z       WHEN they create a request inproperly by not inputting anything
2024-02-19T18:01:41.0244155Z         should show an error message with the instructions
2024-02-19T18:01:41.0245133Z   creating a individuals/family request
2024-02-19T18:01:41.0246113Z     GIVEN a partner user is permitted to make a request
2024-02-19T18:01:41.0247273Z       WHEN they create a request properly
2024-02-19T18:01:41.0248541Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-19T18:01:43.1918090Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-19T18:01:43.1919345Z       WHEN they create a request inproperly
2024-02-19T18:01:44.1220322Z         should show an error message with the instructions
2024-02-19T18:01:44.1221377Z 
2024-02-19T18:01:44.1221836Z Admin Organization Management
2024-02-19T18:01:44.1223714Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-19T18:01:46.1615884Z     creates a new organization
2024-02-19T18:01:46.1617755Z   While signed in as an Administrative User (super admin)
2024-02-19T18:01:48.1239614Z     creates a new organization
2024-02-19T18:01:49.4327040Z     can view organization details
2024-02-19T18:01:50.5571364Z     filters by organizations by name in organizations index page
2024-02-19T18:01:50.5572266Z 
2024-02-19T18:01:50.5572663Z Admin::Organizations
2024-02-19T18:01:50.5574129Z   When logged in as a super admin
2024-02-19T18:01:50.5575844Z     PATCH #update
2024-02-19T18:01:50.5576931Z       with a valid update
2024-02-19T18:01:50.7511982Z         redirects to #index
2024-02-19T18:01:50.7512806Z       with an invalid update
2024-02-19T18:01:50.9814734Z         redirects to #edit with an error message
2024-02-19T18:01:51.2028831Z         returns http success
2024-02-19T18:01:51.2029707Z     GET #index
2024-02-19T18:01:51.2374881Z       returns http success
2024-02-19T18:01:51.2375741Z     GET #show
2024-02-19T18:01:51.4482209Z       returns http success
2024-02-19T18:01:51.4483024Z     GET #edit
2024-02-19T18:01:51.6606549Z       returns http success
2024-02-19T18:01:51.6607309Z     POST #create
2024-02-19T18:01:51.6607682Z       with valid params
2024-02-19T18:01:51.8834513Z         creates an organization and redirects to #index
2024-02-19T18:01:51.8835151Z       with invalid params
2024-02-19T18:01:51.9292691Z         does not create an organization and renders #create with an error message
2024-02-19T18:01:51.9294113Z     GET #new
2024-02-19T18:01:51.9703824Z       returns http success
2024-02-19T18:01:51.9705066Z       when given a valid account request token in the query parameters
2024-02-19T18:01:52.0291740Z         should render new with pre populate input fields from the account_request
2024-02-19T18:01:52.0293453Z       when given a token that matches a account request that has already been processed
2024-02-19T18:01:52.2558375Z         should render new with a flash error message
2024-02-19T18:01:52.2558983Z     DELETE #destroy
2024-02-19T18:01:52.2559647Z       with a valid organization id
2024-02-19T18:01:52.8017287Z         redirects to #index
2024-02-19T18:01:52.8018050Z     DELETE #destroy
2024-02-19T18:01:53.1685208Z       redirects
2024-02-19T18:01:53.1685916Z     PUT #update
2024-02-19T18:01:53.1921984Z       redirect
2024-02-19T18:01:53.1922919Z   When logged in as a non-admin user
2024-02-19T18:01:53.1924631Z     GET #edit
2024-02-19T18:01:53.2088431Z       redirects
2024-02-19T18:01:53.2089009Z     GET #index
2024-02-19T18:01:53.2232664Z       redirects
2024-02-19T18:01:53.2233238Z     GET #new
2024-02-19T18:01:53.2371678Z       redirects
2024-02-19T18:01:53.2373484Z     POST #create
2024-02-19T18:01:53.2530532Z       redirects
2024-02-19T18:01:53.2531120Z     PUT #update
2024-02-19T18:01:53.2670123Z       redirects
2024-02-19T18:01:53.2671020Z 
2024-02-19T18:01:53.2671336Z /partners/profiles
2024-02-19T18:01:53.2672908Z   PUT #update
2024-02-19T18:01:53.3269744Z     updates the partner and profile
2024-02-19T18:01:53.3270550Z     when updating an existing value to a blank value
2024-02-19T18:01:53.3822374Z       does store N/A in the database
2024-02-19T18:01:53.4372546Z       updates the partner profile attribute to a blank value
2024-02-19T18:01:53.4941556Z       does not update other partner profile attributes to blank
2024-02-19T18:01:53.4942383Z     with no social media
2024-02-19T18:01:53.6091349Z       shows an error
2024-02-19T18:01:53.6091952Z   GET #edit
2024-02-19T18:01:53.7029237Z     displays the partner
2024-02-19T18:01:53.7991493Z     does not have default radio button value when value is nil
2024-02-19T18:01:53.8937663Z     has "Yes" radio button value when value is true
2024-02-19T18:01:53.9891342Z     has "No" radio button value when value is false
2024-02-19T18:01:53.9892142Z   GET #show
2024-02-19T18:01:54.0513534Z     shows correct values for yes/no buttons
2024-02-19T18:01:54.1031859Z     displays the partner
2024-02-19T18:01:54.1032386Z 
2024-02-19T18:01:54.1032630Z Kit management
2024-02-19T18:01:55.6821516Z   can allocate and deallocate quantity per storage location from kit index
2024-02-19T18:01:56.6267659Z   can create a new kit as a user with the proper quantity
2024-02-19T18:01:57.2383355Z   should not display inactive storage locations under allocations
2024-02-19T18:01:57.2384273Z   when there is no kit quantity
2024-02-19T18:01:58.4581963Z     will not change quantity amounts when deallocating
2024-02-19T18:01:58.4583155Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-19T18:01:59.7707344Z     will not change quantity amounts when allocating
2024-02-19T18:01:59.7707880Z 
2024-02-19T18:01:59.7708148Z User account management
2024-02-19T18:01:59.7709547Z   when in staging
2024-02-19T18:02:00.2552089Z     should display staging warning
2024-02-19T18:02:00.7240698Z     should not allow the user to change staging credentials
2024-02-19T18:02:00.7241315Z   when not in staging
2024-02-19T18:02:01.6618729Z     should change the email
2024-02-19T18:02:02.4668379Z     should fail when the email is invalid
2024-02-19T18:02:03.3759858Z     should change an user name
2024-02-19T18:02:03.4152339Z W, [2024-02-19T10:02:03.414940 #2399]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-19T18:02:03.4153553Z W, [2024-02-19T10:02:03.415014 #2399]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T18:02:03.4155022Z W, [2024-02-19T10:02:03.415035 #2399]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T18:02:03.4156778Z W, [2024-02-19T10:02:03.415072 #2399]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-19T18:02:03.4157848Z 
2024-02-19T18:02:03.4158244Z Finished in 3 minutes 40 seconds (files took 8.1 seconds to load)
2024-02-19T18:02:03.4159000Z 235 examples, 0 failures
2024-02-19T18:02:03.4159216Z 
2024-02-19T18:02:03.4159334Z Randomized with seed 55228
2024-02-19T18:02:03.4159552Z 
2024-02-19T18:02:03.7246902Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3819 / 6404 LOC (59.63%) covered.
2024-02-19T18:02:04.2499122Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10655 LOC (0.36%) covered.
