2024-03-14T18:21:31.7877251Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-14T18:21:31.7878225Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-14T18:21:31.7902571Z shell: /usr/bin/bash -e {0}
2024-03-14T18:21:31.7902964Z env:
2024-03-14T18:21:31.7903299Z   POSTGRES_HOST: localhost
2024-03-14T18:21:31.7903775Z   DATABASE_HOST: localhost
2024-03-14T18:21:31.7904161Z   PG_USERNAME: postgres
2024-03-14T18:21:31.7904512Z   PG_PASSWORD: password
2024-03-14T18:21:31.7904962Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-14T18:21:31.7905390Z   POSTGRES_PORT: 5432
2024-03-14T18:21:31.7905836Z   PGHOST: localhost
2024-03-14T18:21:31.7906188Z   PGUSER: postgres
2024-03-14T18:21:31.7906510Z   RAILS_ENV: test
2024-03-14T18:21:31.7906941Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-14T18:21:31.7907384Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-14T18:21:31.7907807Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-14T18:21:31.7908319Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-14T18:21:31.7909121Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-14T18:21:31.7909848Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-14T18:21:31.7910543Z   EVENTS_READ: true
2024-03-14T18:21:31.7910896Z ##[endgroup]
2024-03-14T18:21:37.6997729Z W, [2024-03-14T18:21:37.699432 #2198]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-14T18:21:37.6999028Z W, [2024-03-14T18:21:37.699486 #2198]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-14T18:21:37.7000436Z W, [2024-03-14T18:21:37.699501 #2198]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-14T18:21:37.7003501Z W, [2024-03-14T18:21:37.699523 #2198]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-14T18:21:41.6978342Z W, [2024-03-14T18:21:41.697523 #2198]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-14T18:21:41.6979874Z W, [2024-03-14T18:21:41.697564 #2198]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-14T18:21:41.6981501Z W, [2024-03-14T18:21:41.697577 #2198]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-14T18:21:41.6984101Z W, [2024-03-14T18:21:41.697612 #2198]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-14T18:21:41.7051010Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-03-14T18:21:50.3529846Z 
2024-03-14T18:21:50.3530952Z Randomized with seed 34978
2024-03-14T18:21:51.1836657Z 
2024-03-14T18:21:51.1837370Z ReminderDeadlineJob
2024-03-14T18:21:51.1838288Z   #perform
2024-03-14T18:21:51.2218120Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-14T18:21:51.2219212Z 
2024-03-14T18:21:51.2219718Z Partners::AuthorizedFamilyMember
2024-03-14T18:21:51.2220172Z   associations
2024-03-14T18:21:51.2330004Z     is expected to have many child_item_requests dependent => nullify
2024-03-14T18:21:51.2378536Z     is expected to belong to family required: true
2024-03-14T18:21:51.2379087Z   #display_name
2024-03-14T18:21:51.2764173Z     should return the family member's first and last name
2024-03-14T18:21:51.2765431Z   versioning
2024-03-14T18:21:51.2801765Z     is expected to be versioned
2024-03-14T18:21:51.2802394Z 
2024-03-14T18:21:51.2802765Z Partners::UpdateFamily
2024-03-14T18:21:51.2803614Z   #call
2024-03-14T18:21:51.2804601Z     when family has children
2024-03-14T18:21:51.3288350Z       archives the family and its children
2024-03-14T18:21:51.3289283Z     when an error occurs during archiving
2024-03-14T18:21:51.3635581Z       does not archive the family or its children and adds error to the service
2024-03-14T18:21:51.3636386Z 
2024-03-14T18:21:51.3636799Z HelpController
2024-03-14T18:21:51.3637410Z   While signed in as a normal user >
2024-03-14T18:21:51.3638117Z     GET #show
2024-03-14T18:21:51.3776727Z       does not display help page when the user logs out
2024-03-14T18:21:51.3948476Z       returns http success
2024-03-14T18:21:51.3949577Z 
2024-03-14T18:21:51.3949965Z DistributionCreateService
2024-03-14T18:21:51.3951138Z   call
2024-03-14T18:21:51.5133860Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-14T18:21:51.5839177Z     returns a successful object with Scheduled distribution
2024-03-14T18:21:51.5840457Z     when it fails to save
2024-03-14T18:21:51.6334159Z       preserves the error and is unsuccessful
2024-03-14T18:21:51.6335496Z     when there's not sufficient inventory
2024-03-14T18:21:51.6919191Z       preserves the Insufficiency error and is unsuccessful
2024-03-14T18:21:51.6920038Z     partner has send reminders setting set to false
2024-03-14T18:21:51.7660477Z       does not send a PartnerMailer
2024-03-14T18:21:51.7661806Z     when there's multiple line items and one has insufficient inventory
2024-03-14T18:21:51.8302373Z       preserves the Insufficiency error and is unsuccessful
2024-03-14T18:21:51.8303724Z     when provided with a request ID
2024-03-14T18:21:51.9460837Z       changes the status of the request
2024-03-14T18:21:51.9462149Z       and the request already has a distribution associated with it
2024-03-14T18:21:52.0232702Z         should not be successful
2024-03-14T18:21:52.0233355Z     partner is deactivated
2024-03-14T18:21:52.1039266Z       does not send an email
2024-03-14T18:21:52.1040216Z     partner has send reminders setting set to true
2024-03-14T18:21:52.3163848Z       Sends a PartnerMailer
2024-03-14T18:21:52.3165088Z     when the line item quantity is not positive
2024-03-14T18:21:52.3673503Z       preserves the RecordInvalid error and is unsuccessful
2024-03-14T18:21:52.3674240Z 
2024-03-14T18:21:52.3674467Z InventoryAggregate
2024-03-14T18:21:52.3675797Z   individual events
2024-03-14T18:21:52.6784164Z     should process an adjustment event
2024-03-14T18:21:52.9813218Z     should process a kit allocation event
2024-03-14T18:21:53.3163684Z     should process a transfer destroy event
2024-03-14T18:21:53.6064508Z     should process a snapshot event
2024-03-14T18:21:53.9059034Z     should process a distribution event
2024-03-14T18:21:54.2024651Z     should process a donation event after a new storage location is created
2024-03-14T18:21:54.5286497Z     should process an audit event
2024-03-14T18:21:54.8267887Z     should process a transfer event
2024-03-14T18:21:55.1419204Z     should process a purchase event
2024-03-14T18:21:55.4551460Z     should process a purchase destroyed event
2024-03-14T18:21:55.8461841Z     should process a kit deallocation event
2024-03-14T18:21:56.1331928Z     should process a donation event
2024-03-14T18:21:56.4717061Z     should process a distribution destroyed event
2024-03-14T18:21:56.7804779Z     should process a donation destroyed event
2024-03-14T18:21:56.7805866Z   validation
2024-03-14T18:21:56.7806471Z     subsequent event is incorrect
2024-03-14T18:21:57.0818069Z       should add the event to the message
2024-03-14T18:21:57.3440751Z       should handle negative quantities
2024-03-14T18:21:57.3441692Z     current event is incorrect
2024-03-14T18:21:57.5839053Z       should raise a bare error
2024-03-14T18:21:57.5839864Z   multiple events
2024-03-14T18:21:57.9090255Z     should handle intervening audits
2024-03-14T18:21:58.1802150Z     should handle timing correctly
2024-03-14T18:21:58.4522414Z     should handle changing storage location
2024-03-14T18:21:58.7173576Z     should ignore unusable snapshots
2024-03-14T18:21:59.1187058Z     should process multiple events
2024-03-14T18:21:59.1187808Z 
2024-03-14T18:21:59.1188157Z DeallocateKitInventoryService
2024-03-14T18:21:59.1189820Z   #error
2024-03-14T18:21:59.1191033Z     when the storage location organization doesn't match
2024-03-14T18:21:59.3597731Z       returns error
2024-03-14T18:21:59.3598425Z   #deallocate
2024-03-14T18:21:59.3599027Z     when inventory items are available
2024-03-14T18:21:59.3600599Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-14T18:21:59.6641854Z         raises error about inconsistent inventory in or out
2024-03-14T18:21:59.6643122Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-14T18:22:00.0009787Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-14T18:22:00.0011769Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-14T18:22:00.3206156Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-14T18:22:00.3207093Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-14T18:22:00.5815254Z         raises error about KitAllocation not found
2024-03-14T18:22:00.5816012Z 
2024-03-14T18:22:00.5816417Z PartnerGroup
2024-03-14T18:22:00.5817507Z   DB constraints
2024-03-14T18:22:00.5818347Z     reminder_day <= 28
2024-03-14T18:22:00.5942797Z       raises error if unmet
2024-03-14T18:22:00.5943277Z     send_reminders IS NOT NULL
2024-03-14T18:22:00.6010351Z       raises error if unmet
2024-03-14T18:22:00.6011032Z     deadline_day <= 28
2024-03-14T18:22:00.6076281Z       raises error if unmet
2024-03-14T18:22:00.6077046Z   associations
2024-03-14T18:22:00.6139282Z     is expected to have and belong to many item_categories
2024-03-14T18:22:00.6189394Z     is expected to belong to organization required: true
2024-03-14T18:22:00.6223165Z     is expected to have many partners
2024-03-14T18:22:00.6223916Z   Validations >
2024-03-14T18:22:00.6265747Z     must belong to an organization
2024-03-14T18:22:00.6353739Z     requires a unique name within an organization
2024-03-14T18:22:00.6587427Z     does not require a unique name between organizations
2024-03-14T18:22:00.6635955Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-14T18:22:00.6636985Z       should not be valid
2024-03-14T18:22:00.6637710Z   versioning
2024-03-14T18:22:00.6670507Z     is expected to be versioned
2024-03-14T18:22:00.6671147Z 
2024-03-14T18:22:00.6671510Z Deadlinable
2024-03-14T18:22:00.6672405Z   validations
2024-03-14T18:22:00.6745589Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-14T18:22:00.6814724Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-14T18:22:00.6855896Z     validates that reminder day is not the same as deadline day
2024-03-14T18:22:00.6857228Z 
2024-03-14T18:22:00.6857476Z Item
2024-03-14T18:22:00.6859007Z   Filtering >
2024-03-14T18:22:00.6907024Z     can filter
2024-03-14T18:22:00.7184567Z     ->active shows items that are still active
2024-03-14T18:22:00.7395334Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-14T18:22:00.7660115Z     ->alphabetized retrieves items in alphabetical order
2024-03-14T18:22:00.7661088Z     ->by_base_item
2024-03-14T18:22:00.7828861Z       shows the items for a particular base_item
2024-03-14T18:22:00.9803775Z       can be chained to organization to constrain it to just 1 org's items
2024-03-14T18:22:00.9805083Z     ->disposable
2024-03-14T18:22:01.0100423Z       returns records associated with disposable diapers
2024-03-14T18:22:01.0101487Z     ->by_partner_key
2024-03-14T18:22:01.0264714Z       filters by partner key
2024-03-14T18:22:01.0542013Z     ->cloth_diapers
2024-03-14T18:22:01.0542742Z       returns records associated with disposable diapers
2024-03-14T18:22:01.0543611Z   default_quantity
2024-03-14T18:22:01.0623788Z     should return the value of distribution_quantity if it is set
2024-03-14T18:22:01.0704264Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-14T18:22:01.0786199Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-14T18:22:01.0866705Z     should return 50 if column is not set
2024-03-14T18:22:01.0867501Z   Validations >
2024-03-14T18:22:01.0917883Z     requires a Base Item base
2024-03-14T18:22:01.1053291Z     requires a unique name
2024-03-14T18:22:01.1108763Z     must belong to an organization
2024-03-14T18:22:01.1230544Z     requires that items quantity are not a negative number
2024-03-14T18:22:01.1231404Z   after update
2024-03-14T18:22:01.1232071Z     when item has the kit
2024-03-14T18:22:01.3326145Z       updates kit name
2024-03-14T18:22:01.3327157Z     when item does not have kit
2024-03-14T18:22:01.3463350Z       does not raise any errors
2024-03-14T18:22:01.3464055Z   Assocations >
2024-03-14T18:22:01.3513162Z     is expected to belong to item_category optional: true
2024-03-14T18:22:01.3514084Z   Methods >
2024-03-14T18:22:01.3515228Z     barcoded_items >
2024-03-14T18:22:01.3944449Z       returns a collection of items that have barcodes associated with them
2024-03-14T18:22:01.3945428Z     has_history?
2024-03-14T18:22:01.4683247Z       identifies items that have been used previously
2024-03-14T18:22:01.4684003Z     storage_locations_containing
2024-03-14T18:22:01.5050520Z       retrieves all storage locations that contain an item
2024-03-14T18:22:01.5051331Z     barcodes_for
2024-03-14T18:22:01.5254881Z       retrieves all BarcodeItems associated with an item
2024-03-14T18:22:01.5255759Z     other?
2024-03-14T18:22:01.5380262Z       is true for items that are partner_key 'other'
2024-03-14T18:22:01.5381133Z     destroy
2024-03-14T18:22:01.7506810Z       deactivates the kit if it exists
2024-03-14T18:22:01.7688391Z       actually destroys an item that doesn't have history
2024-03-14T18:22:01.7915650Z       only hides an item that has history
2024-03-14T18:22:01.7916739Z     #reactivate!
2024-03-14T18:22:01.7917407Z       given an array of item ids
2024-03-14T18:22:01.8136225Z         sets the active trait to true for all of them
2024-03-14T18:22:01.8137096Z       given a single item id
2024-03-14T18:22:01.8279562Z         sets the active trait to true for that item
2024-03-14T18:22:01.8280561Z   versioning
2024-03-14T18:22:01.8315964Z     is expected to be versioned
2024-03-14T18:22:01.8316810Z   distribution_quantity and package size
2024-03-14T18:22:01.8446946Z     have nil values if an empty string is passed
2024-03-14T18:22:01.8447547Z 
2024-03-14T18:22:01.8447910Z Reports::AdultIncontinenceReportService
2024-03-14T18:22:01.8448765Z   #report
2024-03-14T18:22:02.0292263Z     should report zero values
2024-03-14T18:22:02.0292891Z     with values
2024-03-14T18:22:02.6511498Z       should report normal values
2024-03-14T18:22:03.2548229Z       should handle null distribution quantity
2024-03-14T18:22:03.2549240Z 
2024-03-14T18:22:03.2549482Z RemoveRoleService
2024-03-14T18:22:03.2550118Z   #call
2024-03-14T18:22:03.2551301Z     when the role exists
2024-03-14T18:22:03.4578887Z       should remove the role
2024-03-14T18:22:03.6524754Z       should work with a type and ID instead of role ID
2024-03-14T18:22:03.8628239Z       should remove the admin role when removing user role
2024-03-14T18:22:03.8629035Z     when the role does not exist
2024-03-14T18:22:04.0530490Z       should raise an error
2024-03-14T18:22:04.0531379Z     when not enough information provided
2024-03-14T18:22:04.2538543Z       should raise an error
2024-03-14T18:22:04.2540526Z 
2024-03-14T18:22:04.2540902Z ItemsOutQuery
2024-03-14T18:22:04.2541824Z   items_out_query
2024-03-14T18:22:04.3732474Z     returns a collection with the fields name, item_id, quantity
2024-03-14T18:22:04.4976908Z     includes distributions, adjustments, transfers among sources
2024-03-14T18:22:04.4978194Z 
2024-03-14T18:22:04.4978765Z DonationItemizedBreakdownService
2024-03-14T18:22:04.4982203Z   #fetch
2024-03-14T18:22:04.8856698Z     return the list of items donated with distributed
2024-03-14T18:22:04.8857643Z 
2024-03-14T18:22:04.8857861Z ItemCreateService
2024-03-14T18:22:04.8858465Z   #call
2024-03-14T18:22:04.8859456Z     when an issue occurs in transaction
2024-03-14T18:22:04.8860669Z       because the organization_id does not match any Organization
2024-03-14T18:22:05.0623141Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-14T18:22:05.0624656Z       because the item create raised an error
2024-03-14T18:22:05.2394529Z         should return a OpenStruct with the raised error
2024-03-14T18:22:05.2395656Z       because a inventory item creation failed and raised an error
2024-03-14T18:22:05.4176457Z         should return a OpenStruct with the raised error
2024-03-14T18:22:05.4177485Z     when there are no issues
2024-03-14T18:22:05.5935900Z       should execute the expected methods
2024-03-14T18:22:05.7713406Z       should return an OpenStruct with success? set to true and the item
2024-03-14T18:22:05.7714186Z 
2024-03-14T18:22:05.7714750Z Partners::Child
2024-03-14T18:22:05.7715570Z   #display_name
2024-03-14T18:22:05.8018203Z     should return a child's first and last name
2024-03-14T18:22:05.8019214Z   associations
2024-03-14T18:22:05.8056916Z     is expected to have many child_item_requests dependent => destroy
2024-03-14T18:22:05.8099095Z     is expected to belong to family required: true
2024-03-14T18:22:05.8100434Z   versioning
2024-03-14T18:22:05.8135964Z     is expected to be versioned
2024-03-14T18:22:05.8136663Z 
2024-03-14T18:22:05.8137011Z TransfersController
2024-03-14T18:22:05.8138302Z   While not signed in
2024-03-14T18:22:05.8276508Z     redirects the user to the sign-in page for CRUD actions
2024-03-14T18:22:05.8277567Z   While signed in
2024-03-14T18:22:05.8278108Z     GET #new
2024-03-14T18:22:05.8414337Z       returns http success
2024-03-14T18:22:05.8415169Z     GET #show
2024-03-14T18:22:05.8660678Z       returns http success
2024-03-14T18:22:05.8661380Z     GET #index
2024-03-14T18:22:05.8791029Z       returns http success
2024-03-14T18:22:05.8791761Z       when filtering by date
2024-03-14T18:22:05.8792771Z         when date parameters are supplied
2024-03-14T18:22:05.9157575Z           only returns the correct obejects
2024-03-14T18:22:05.9158524Z         when date parameters are not supplied
2024-03-14T18:22:05.9512068Z           returns all objects
2024-03-14T18:22:05.9512966Z     POST #create
2024-03-14T18:22:05.9692529Z       renders to #new when failing
2024-03-14T18:22:06.0056874Z       redirects to #show when successful
2024-03-14T18:22:06.0057944Z     Looking at a different organization
2024-03-14T18:22:06.1860484Z       redirects the user to the sign-in page for CRUD actions
2024-03-14T18:22:06.1861233Z 
2024-03-14T18:22:06.1861509Z Exports::ExportReportCSVService
2024-03-14T18:22:06.1862175Z   .generate_csv_data
2024-03-14T18:22:06.1901497Z     creates a CSV string
2024-03-14T18:22:06.1938098Z     creates CSV data including headers
2024-03-14T18:22:06.1938676Z 
2024-03-14T18:22:06.1938920Z AdjustmentCreateService
2024-03-14T18:22:06.1939945Z   call
2024-03-14T18:22:06.2496475Z     gives an error if we attempt to adjust inventory below 0
2024-03-14T18:22:06.3352803Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-14T18:22:06.4193625Z     handles adjustments to multiple items
2024-03-14T18:22:06.5079975Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-14T18:22:06.5954814Z     decreases stored inventory on a negative adjustment
2024-03-14T18:22:06.6612478Z     does not allow inventory to be adjusted below 0
2024-03-14T18:22:06.7431532Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-14T18:22:06.8293426Z     increases stored inventory on a positive adjustment
2024-03-14T18:22:06.9172207Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-14T18:22:06.9173172Z 
2024-03-14T18:22:06.9173481Z Reports::WarehouseReportService
2024-03-14T18:22:06.9174410Z   #report
2024-03-14T18:22:07.0995185Z     should print unknown square footage
2024-03-14T18:22:07.5347314Z     should print unknown warehouse type
2024-03-14T18:22:07.9898385Z     should print normal values
2024-03-14T18:22:08.1703668Z     should print zero values
2024-03-14T18:22:08.1704353Z 
2024-03-14T18:22:08.1704743Z SyncNDBNMembers
2024-03-14T18:22:08.1705982Z   .sync
2024-03-14T18:22:08.1706989Z     when the HTTP request is successful
2024-03-14T18:22:08.1707820Z       when no new NDBN Member has been added
2024-03-14T18:22:08.2103672Z         should not add any new NDBN Members
2024-03-14T18:22:08.2104431Z       when the account name of a NDBN Member has changed
2024-03-14T18:22:08.2248969Z         should update the account name of the corresponding NDBN Member
2024-03-14T18:22:08.2249958Z       when there are no exisiting NDBN Member records
2024-03-14T18:22:08.2347646Z         should create the NDBN Member records
2024-03-14T18:22:08.2348327Z     when the HTTP request does not get a response of 200
2024-03-14T18:22:08.2391679Z       should raise an error regarding the response code
2024-03-14T18:22:08.2393859Z 
2024-03-14T18:22:08.2394104Z Distribution
2024-03-14T18:22:08.2395892Z   CSV export >
2024-03-14T18:22:08.2396567Z     for_csv_export >
2024-03-14T18:22:08.5748498Z       filters only to the given filter
2024-03-14T18:22:08.9040000Z       filters only to the given issue time range
2024-03-14T18:22:09.2395519Z       filters only to the given organization
2024-03-14T18:22:09.2396164Z     csv_export_attributes
2024-03-14T18:22:09.6483775Z       returns the set of attributes which define a row in case of distribution export
2024-03-14T18:22:09.6485175Z   versioning
2024-03-14T18:22:09.6521224Z     is expected to be versioned
2024-03-14T18:22:09.6522140Z   Callbacks >
2024-03-14T18:22:09.7022587Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-14T18:22:09.7023710Z     #before_save
2024-03-14T18:22:09.7024441Z       #reset_shipping_cost
2024-03-14T18:22:09.7025147Z         when delivery_method is other then shipped
2024-03-14T18:22:09.7294958Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-14T18:22:09.7295970Z   Scopes >
2024-03-14T18:22:09.7296533Z     by_item_id >
2024-03-14T18:22:09.8637725Z       only returns distributions with given item id
2024-03-14T18:22:09.8638649Z     by_partner >
2024-03-14T18:22:09.9143816Z       only returns distributions with given partner id
2024-03-14T18:22:09.9144923Z     during >
2024-03-14T18:22:09.9882815Z       returns all distributions created between two dates
2024-03-14T18:22:09.9883607Z     by_location >
2024-03-14T18:22:10.0393496Z       only returns distributions with given location id
2024-03-14T18:22:10.0394421Z     this_week >
2024-03-14T18:22:10.0395299Z       When it's Tuesday (mid-week)
2024-03-14T18:22:10.1137309Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-14T18:22:10.1138186Z       When it's Sunday (end of the week)
2024-03-14T18:22:10.1623940Z         doesn't include distributions past Sunday
2024-03-14T18:22:10.1624725Z   behaves like itemizable
2024-03-14T18:22:10.1625616Z     .line_items
2024-03-14T18:22:10.1626523Z       combine!
2024-03-14T18:22:10.2071468Z         combines multiple line_items with the same item_id into a single record
2024-03-14T18:22:10.2638237Z         incrementally combines line_items on donations that have already been created
2024-03-14T18:22:10.2639045Z       sorted
2024-03-14T18:22:10.3835573Z         displays the items, sorted by name
2024-03-14T18:22:10.3836533Z       quantities_by_name
2024-03-14T18:22:10.4754580Z         returns a hash of items with id, name, and quantity
2024-03-14T18:22:10.5653236Z         leaves out zero-quantitied items if requested
2024-03-14T18:22:10.5654125Z       total
2024-03-14T18:22:10.6531032Z         has an item total
2024-03-14T18:22:10.6531845Z     .to_a
2024-03-14T18:22:10.6532752Z       with Flipper flag :deprecate_to_a disabled
2024-03-14T18:22:10.6874635Z         calls line_item_values
2024-03-14T18:22:10.6875595Z       with Flipper flag :deprecate_to_a enabled
2024-03-14T18:22:10.7207815Z         raises an error
2024-03-14T18:22:10.7208818Z   Methods >
2024-03-14T18:22:10.7210298Z     #distributed_at
2024-03-14T18:22:10.7700560Z       displays explicit issued_at date
2024-03-14T18:22:10.7960697Z       shows the hour and minutes if it has been provided
2024-03-14T18:22:10.7961898Z     #copy_from_request
2024-03-14T18:22:10.8200215Z       copy over relevant request information into the distrubution
2024-03-14T18:22:10.8201204Z     #copy_line_items
2024-03-14T18:22:10.8654929Z       replicates line_items from a donation into a distribution
2024-03-14T18:22:10.8655831Z     #combine_duplicates
2024-03-14T18:22:10.9071047Z       condenses duplicate line_items if the item_ids match
2024-03-14T18:22:10.9071901Z     #future?
2024-03-14T18:22:10.9072383Z       when issued_at has passed
2024-03-14T18:22:10.9349335Z         returns false
2024-03-14T18:22:10.9349970Z       when issued_at has not passed
2024-03-14T18:22:10.9615235Z         returns true
2024-03-14T18:22:10.9616029Z   Validations >
2024-03-14T18:22:10.9669584Z     must belong to an organization
2024-03-14T18:22:11.0074014Z     ensures the associated line_items are valid
2024-03-14T18:22:11.0132744Z     ensures that the issued at is no earlier than 2000
2024-03-14T18:22:11.0182676Z     requires a partner
2024-03-14T18:22:11.0334304Z     ensures the associated line_items are invalid with a nil quantity
2024-03-14T18:22:11.0369472Z     ensures that any included items are found in the associated storage location
2024-03-14T18:22:11.0519459Z     ensures the associated line_items are invalid with a zero quantity
2024-03-14T18:22:11.0569548Z     requires a storage location
2024-03-14T18:22:11.0570342Z     when delivery method is shipped
2024-03-14T18:22:11.0571263Z       shipping cost is negative
2024-03-14T18:22:11.0631095Z         will not allow to save distribution
2024-03-14T18:22:11.0631959Z       shipping cost is none negative
2024-03-14T18:22:11.0894389Z         allows to save distribution
2024-03-14T18:22:11.0895212Z     when delivery method is other then shipped
2024-03-14T18:22:11.1150126Z       allows to save distribution
2024-03-14T18:22:11.1151034Z 
2024-03-14T18:22:11.1151483Z AccountRequestMailer
2024-03-14T18:22:11.1152929Z   #rejection
2024-03-14T18:22:11.1372415Z     should be sent to the correct email address
2024-03-14T18:22:11.1489528Z     should include the rejection reason
2024-03-14T18:22:11.1602162Z     should have the correct subject
2024-03-14T18:22:11.1603390Z     when the account_request_id provided does not match any AccountRequest
2024-03-14T18:22:11.1650757Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-14T18:22:11.1651652Z   #approval_request
2024-03-14T18:22:11.1782143Z     should have the correct subject
2024-03-14T18:22:11.2063410Z     should include details of the account request
2024-03-14T18:22:11.2196237Z     should include the admin link to reject the organization
2024-03-14T18:22:11.2333324Z     should include the admin link to create the new organization from the account request
2024-03-14T18:22:11.2451584Z     should be sent to the info@humanessentials.app email address
2024-03-14T18:22:11.2453019Z     when the account_request_id provided does not match any AccountRequest
2024-03-14T18:22:11.2508000Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-14T18:22:11.2509288Z   #confirmation
2024-03-14T18:22:11.2629690Z     should be from no-reply@humanessentials.app
2024-03-14T18:22:11.2735569Z     should be sent to the specified account_request email
2024-03-14T18:22:11.2840964Z     should have the correct subject
2024-03-14T18:22:11.2841721Z     Text format
2024-03-14T18:22:11.2949565Z       should include the staging/demo account information
2024-03-14T18:22:11.3056895Z       should include the instruction video link
2024-03-14T18:22:11.3167968Z       should include the button to confirm the request
2024-03-14T18:22:11.3168968Z     HTML format
2024-03-14T18:22:11.3280442Z       should include the instruction video link
2024-03-14T18:22:11.3393866Z       should include the button to confirm the request
2024-03-14T18:22:11.3507162Z       should include the staging/demo account information
2024-03-14T18:22:11.3508542Z     when the account_request_id provided does not match any AccountRequest
2024-03-14T18:22:11.3554067Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-14T18:22:11.3554916Z 
2024-03-14T18:22:11.3555389Z Role
2024-03-14T18:22:11.3591060Z   is expected to accepts_nested_attributes_for :users
2024-03-14T18:22:11.3591869Z   Validations
2024-03-14T18:22:11.3641138Z     is expected to validate that :resource_type is either â€¹"Organization"â€º or â€¹"Partner"â€º
2024-03-14T18:22:11.3642019Z   Associations
2024-03-14T18:22:11.3677716Z     is expected to belong to resource optional: true
2024-03-14T18:22:11.3736882Z     is expected to have and belong to many users
2024-03-14T18:22:11.3737540Z   versioning
2024-03-14T18:22:11.3771726Z     is expected to be versioned
2024-03-14T18:22:11.3772592Z 
2024-03-14T18:22:11.3772820Z Manufacturer
2024-03-14T18:22:11.3774312Z   Methods
2024-03-14T18:22:11.3775254Z     volume
2024-03-14T18:22:11.4536427Z       retrieves the amount of product that has been donated by manufacturer
2024-03-14T18:22:11.5953432Z       ignores the amount of product from other manufacturers
2024-03-14T18:22:11.7285294Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-14T18:22:11.7286500Z   Validations
2024-03-14T18:22:11.7381820Z     must have a unique name within organization
2024-03-14T18:22:11.9155008Z     must belong to an organization
2024-03-14T18:22:11.9156227Z   Private Methods
2024-03-14T18:22:11.9156854Z     #exists_in_org?
2024-03-14T18:22:12.0951007Z       returns true if manufacturer exists in an organization
2024-03-14T18:22:12.0952020Z   versioning
2024-03-14T18:22:12.0991263Z     is expected to be versioned
2024-03-14T18:22:12.0991815Z 
2024-03-14T18:22:12.0992059Z HistoricalTrendService
2024-03-14T18:22:12.0992900Z   #series
2024-03-14T18:22:12.3783894Z     returns an array of items with their monthly data
2024-03-14T18:22:12.3784893Z 
2024-03-14T18:22:12.3785090Z User
2024-03-14T18:22:12.3785790Z   #send_reset_password_instructions
2024-03-14T18:22:12.3787006Z     user gets an email with instructions
2024-03-14T18:22:12.4704212Z       sends an email with instructions
2024-03-14T18:22:12.4705071Z   #role_added
2024-03-14T18:22:12.5054860Z     renders the body correctly
2024-03-14T18:22:12.5055497Z 
2024-03-14T18:22:12.5055903Z PartnerFetchRequestableItemsService
2024-03-14T18:22:12.5056741Z   #call
2024-03-14T18:22:12.5178588Z     raises an error indiciating the partner does not exist with invalid id
2024-03-14T18:22:12.5179735Z     org with any amount of items
2024-03-14T18:22:12.5180633Z       when the partner is in a partner group and has items
2024-03-14T18:22:12.7449405Z         should return only active and visible items from partner
2024-03-14T18:22:12.7450352Z       when the partner is in a partner group and has no items
2024-03-14T18:22:12.9574967Z         should return only active and visible items from partner
2024-03-14T18:22:12.9576061Z     when the partner is not in any partner group
2024-03-14T18:22:12.9857677Z       is expected to be nil
2024-03-14T18:22:12.9858754Z       when the organization has items
2024-03-14T18:22:13.0189984Z         is expected to eq [#<Item id: 2963, name: "Item 1", category: nil, created_at: "2024-03-14 11:22:13.004203823 -0700", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-14T18:22:13.0702952Z         should return only active and visible items
2024-03-14T18:22:13.0703785Z       when the organization has no items
2024-03-14T18:22:13.1007709Z         should return no items
2024-03-14T18:22:13.1009307Z 
2024-03-14T18:22:13.1009862Z Partners::Profile
2024-03-14T18:22:13.1047620Z   must allow deleting served_areas
2024-03-14T18:22:13.1048274Z   versioning
2024-03-14T18:22:13.1083888Z     is expected to be versioned
2024-03-14T18:22:13.1084733Z   social media info validation for profile
2024-03-14T18:22:13.1085405Z     no social media presence and the checkbox is checked
2024-03-14T18:22:13.1144418Z       should be valid
2024-03-14T18:22:13.1145443Z     has social media presence and the checkbox is unchecked
2024-03-14T18:22:13.1218184Z       with every social media option it should be valid
2024-03-14T18:22:13.1288509Z       with just a website it should be valid
2024-03-14T18:22:13.1359940Z       with just instagram it should be valid
2024-03-14T18:22:13.1429662Z       with just twitter it should be valid
2024-03-14T18:22:13.1499502Z       with just facebook it should be valid
2024-03-14T18:22:13.1500984Z     no social media presence and the checkbox isn't checked
2024-03-14T18:22:13.1600246Z       should be valid if media_information is not needed
2024-03-14T18:22:13.1656804Z       should not be valid
2024-03-14T18:22:13.1657643Z   associations
2024-03-14T18:22:13.1701053Z     is expected to have a has_many_attached called documents
2024-03-14T18:22:13.1748837Z     is expected to have many served_areas
2024-03-14T18:22:13.1787674Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-14T18:22:13.1826837Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-14T18:22:13.1828402Z   request settings validation for profile
2024-03-14T18:22:13.1829297Z     at least one request type is set to true
2024-03-14T18:22:13.1902101Z       should be valid when enable_quantity_based_requests is true
2024-03-14T18:22:13.1973830Z       should be valid when enable_individual_requests is true
2024-03-14T18:22:13.2045528Z       should be valid when enable_child_based_requests is true
2024-03-14T18:22:13.2046528Z     no settings are set to true
2024-03-14T18:22:13.2096133Z       should not be valid
2024-03-14T18:22:13.2096824Z   client share behaviour
2024-03-14T18:22:13.2097531Z     multiple
2024-03-14T18:22:13.2352702Z       is valid if client share sum is 100
2024-03-14T18:22:13.2525050Z       sums the client shares
2024-03-14T18:22:13.2525799Z     no served areas
2024-03-14T18:22:13.2575762Z       has 0 client share
2024-03-14T18:22:13.2576545Z 
2024-03-14T18:22:13.2576985Z DistributionItemizedBreakdownService
2024-03-14T18:22:13.2578150Z   #fetch_csv
2024-03-14T18:22:13.6438366Z     should output the expected output but in CSV format
2024-03-14T18:22:13.6439555Z   #fetch
2024-03-14T18:22:14.0216827Z     should include the break down of items distributed with onhand data
2024-03-14T18:22:14.0217632Z 
2024-03-14T18:22:14.0218178Z InventoryItem
2024-03-14T18:22:14.0256061Z   initializes the quantity to 0 if it was not specified
2024-03-14T18:22:14.0256962Z   versioning
2024-03-14T18:22:14.0292842Z     is expected to be versioned
2024-03-14T18:22:14.0293620Z   Filtering >
2024-03-14T18:22:14.0294440Z     ->by_partner_key
2024-03-14T18:22:14.0428967Z       shows the Base Items by partner_key
2024-03-14T18:22:14.0429810Z   Validations >
2024-03-14T18:22:14.0473177Z     requires an item
2024-03-14T18:22:14.0521483Z     requires an inventory association
2024-03-14T18:22:14.0522239Z     quantity >
2024-03-14T18:22:14.0658563Z       is gte 0
2024-03-14T18:22:14.0715275Z       is required
2024-03-14T18:22:14.0770309Z       is less than the max integer
2024-03-14T18:22:14.0824762Z       is numerical
2024-03-14T18:22:14.0825623Z 
2024-03-14T18:22:14.0827355Z DistributionUpdateService
2024-03-14T18:22:14.0828050Z   resend_notification?
2024-03-14T18:22:14.1893813Z     changes any distribution content, resulting in resend_notification? = true
2024-03-14T18:22:14.2826042Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-14T18:22:14.3718255Z     changes the issue_date, resulting in resend_notification? = true
2024-03-14T18:22:14.3719253Z   call
2024-03-14T18:22:14.4741548Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-14T18:22:14.4742435Z 
2024-03-14T18:22:14.4742910Z ApplicationController
2024-03-14T18:22:14.4743719Z   current_organization
2024-03-14T18:22:14.4744642Z     As an org user
2024-03-14T18:22:14.8497433Z       should return the first org role
2024-03-14T18:22:14.8498227Z       with a changed current role
2024-03-14T18:22:15.2124147Z         should return the first org role
2024-03-14T18:22:15.2125463Z     As a partner user
2024-03-14T18:22:15.2282364Z       should return nil
2024-03-14T18:22:15.2283029Z   current_partner
2024-03-14T18:22:15.2283929Z     As a partner user
2024-03-14T18:22:15.2788154Z       should return the first partner role
2024-03-14T18:22:15.2788910Z       with a changed current role
2024-03-14T18:22:15.3329490Z         should return the first partner role
2024-03-14T18:22:15.3330261Z     As an org user
2024-03-14T18:22:15.3460815Z       should return nil
2024-03-14T18:22:15.3461660Z   dashboard_path_from_current_role
2024-03-14T18:22:15.3462563Z     As a user without super admin status
2024-03-14T18:22:15.3652464Z       links to the general dashboard
2024-03-14T18:22:15.3653222Z     As a super admin
2024-03-14T18:22:15.3836373Z       links to the admin dashboard
2024-03-14T18:22:15.3837169Z 
2024-03-14T18:22:15.3838692Z PartnerMailer
2024-03-14T18:22:15.3839389Z   #recertification_request
2024-03-14T18:22:15.4070589Z     renders the body with text that indicates to recertify and link to where
2024-03-14T18:22:15.4287552Z     should be sent to the partner main email with the correct subject line
2024-03-14T18:22:15.4519261Z   #application_approved
2024-03-14T18:22:15.4520177Z     should be sent to the partner main email with the correct subject line
2024-03-14T18:22:15.4763107Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-14T18:22:15.4764030Z 
2024-03-14T18:22:15.4764227Z BaseItem
2024-03-14T18:22:15.4765457Z   Associations >
2024-03-14T18:22:15.4942261Z     keeps count of its associated items
2024-03-14T18:22:15.4942995Z   versioning
2024-03-14T18:22:15.4981278Z     is expected to be versioned
2024-03-14T18:22:15.4982172Z   Validations >
2024-03-14T18:22:15.5029650Z     is invalid without a partner key
2024-03-14T18:22:15.5075816Z     is invalid without a name
2024-03-14T18:22:15.5144331Z     is invalid without a unique name
2024-03-14T18:22:15.5214294Z     is invalid without a uniqueness key
2024-03-14T18:22:15.5215129Z   Filtering >
2024-03-14T18:22:15.5216148Z     ->without_kit
2024-03-14T18:22:15.5272410Z       should not include the Kit BaseItem
2024-03-14T18:22:15.5273289Z     ->by_partner_key
2024-03-14T18:22:15.5324804Z       shows the Base Items by partner_key
2024-03-14T18:22:15.5325982Z 
2024-03-14T18:22:15.5326249Z TransferDestroyService
2024-03-14T18:22:15.5327480Z   #call
2024-03-14T18:22:15.5328672Z     because transfer should not be deleted
2024-03-14T18:22:15.7181034Z       should return an OpenStruct with the raised error
2024-03-14T18:22:15.7182047Z     when an issue occurs in transaction
2024-03-14T18:22:15.7183453Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-14T18:22:15.9094483Z         should return a OpenStruct with the raised error
2024-03-14T18:22:15.9095815Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-14T18:22:16.1021241Z         should return a OpenStruct with the raised error
2024-03-14T18:22:16.1021980Z       because the transfer_id does not match any Transfer
2024-03-14T18:22:16.2843819Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-14T18:22:16.2845406Z       because the transfer destroy raised an error
2024-03-14T18:22:16.4790016Z         should return a OpenStruct with the raised error
2024-03-14T18:22:16.4790934Z     when there are no issues
2024-03-14T18:22:16.6734716Z       should execute the expected methods
2024-03-14T18:22:16.8682012Z       should return an OpenStruct with success? set to true
2024-03-14T18:22:16.8682715Z 
2024-03-14T18:22:16.8683284Z DonationCreateService
2024-03-14T18:22:16.8683899Z   #call
2024-03-14T18:22:16.8897369Z     should create the donation
2024-03-14T18:22:16.8898256Z 
2024-03-14T18:22:16.8898615Z DistributionMailer
2024-03-14T18:22:16.8899918Z   #partner_mailer
2024-03-14T18:22:16.9482375Z     renders the body with organization's email text
2024-03-14T18:22:16.9978009Z     renders the body with distributions text
2024-03-14T18:22:16.9978934Z     with distribution changes
2024-03-14T18:22:17.0530208Z       renders the body with changes that happened in the distribution
2024-03-14T18:22:17.0531262Z     with deliver_method: :delivery
2024-03-14T18:22:17.1043048Z       sends copy of email only to the partner
2024-03-14T18:22:17.1590866Z       renders the body with 'delivered' specified
2024-03-14T18:22:17.1591907Z     with deliver_method: :pick_up
2024-03-14T18:22:17.2150246Z       renders the body with 'picked up' specified
2024-03-14T18:22:17.2151202Z       when parners profile pick_up_email is present
2024-03-14T18:22:17.2685544Z         sends email to the primary contact and partner`s pickup person
2024-03-14T18:22:17.2687237Z         when pickup person happens to be the same as the primary contact
2024-03-14T18:22:17.3213519Z           does not send email twice
2024-03-14T18:22:17.3214241Z   #reminder_email
2024-03-14T18:22:17.3215662Z     with deliver_method: :pick_up
2024-03-14T18:22:17.3739253Z       renders the body with 'pick up' specified
2024-03-14T18:22:17.3739966Z     Text format
2024-03-14T18:22:17.4206777Z       renders the body with organization's email text
2024-03-14T18:22:17.4207724Z     HTML format
2024-03-14T18:22:17.4688426Z       renders the body with organization's email text
2024-03-14T18:22:17.4689052Z     with deliver_method: :delivery
2024-03-14T18:22:17.5195825Z       renders the body with 'delivery' specified
2024-03-14T18:22:17.5196469Z 
2024-03-14T18:22:17.5196866Z RequestItem
2024-03-14T18:22:17.5197714Z   Methods >
2024-03-14T18:22:17.5198502Z     #from_json
2024-03-14T18:22:17.7628818Z       has the correct name
2024-03-14T18:22:18.0128717Z       has the correct amount on hand for location
2024-03-14T18:22:18.2713225Z       has the correct quantity
2024-03-14T18:22:18.5272115Z       has the correct amount on hand
2024-03-14T18:22:18.5273077Z 
2024-03-14T18:22:18.5273360Z HistoricalTrendsHelper
2024-03-14T18:22:18.5274482Z   #last_12_months
2024-03-14T18:22:18.5327846Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-14T18:22:18.5371427Z     returns the last 12 months starting from July when the current month is June
2024-03-14T18:22:18.5415652Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-14T18:22:18.5416393Z 
2024-03-14T18:22:18.5416656Z AccountRequest
2024-03-14T18:22:18.5553943Z   #reject!
2024-03-14T18:22:18.5680496Z   #confirm!
2024-03-14T18:22:18.5681389Z   #identity_token
2024-03-14T18:22:18.5772997Z     should return a JWT token that contains the id of the account_request_id
2024-03-14T18:22:18.5774114Z     when the account_request is not persisted
2024-03-14T18:22:18.5863343Z       should raise an error
2024-03-14T18:22:18.5863985Z   #processed?
2024-03-14T18:22:18.5864850Z     when the account request has a associated organization
2024-03-14T18:22:18.7779233Z       should return true
2024-03-14T18:22:18.7780092Z     when the account request has no associated organization
2024-03-14T18:22:18.7875928Z       should return false
2024-03-14T18:22:18.7876653Z   .get_by_identity_token
2024-03-14T18:22:18.7877726Z     when the identity_token corresponds to an existing AccountRequest
2024-03-14T18:22:18.7971624Z       should return the corresponding AccountRequest
2024-03-14T18:22:18.7972789Z     when the identity_token provided does not match any AccountRequest
2024-03-14T18:22:18.8006799Z       should return nil
2024-03-14T18:22:18.8007578Z   validations
2024-03-14T18:22:18.8151922Z     is expected to validate that :email is case-sensitively unique
2024-03-14T18:22:18.8275169Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-14T18:22:18.8403521Z     is expected to validate that the length of :request_details is at least 50
2024-03-14T18:22:18.8510246Z     is expected not to allow :email to be â€¹"not_email"â€º
2024-03-14T18:22:18.8656579Z     is expected to validate that :name cannot be empty/falsy
2024-03-14T18:22:18.8760703Z     is expected to allow :email to be â€¹"jim@stiedemann-kuvalis.test"â€º
2024-03-14T18:22:18.8904184Z     is expected to validate that :email cannot be empty/falsy
2024-03-14T18:22:18.8905312Z     when the email provided is already used by an existing organization
2024-03-14T18:22:19.0747001Z       should not allow the email
2024-03-14T18:22:19.0747956Z     when the email provided is already used by an existing user
2024-03-14T18:22:19.0943944Z       should not allow the email
2024-03-14T18:22:19.0944741Z   associations
2024-03-14T18:22:19.0981559Z     is expected to have one organization class_name => Organization
2024-03-14T18:22:19.1036931Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-14T18:22:19.1038016Z   versioning
2024-03-14T18:22:19.1072644Z     is expected to be versioned
2024-03-14T18:22:19.1074919Z 
2024-03-14T18:22:19.1075333Z Donation
2024-03-14T18:22:19.1077159Z   Methods >
2024-03-14T18:22:19.1078270Z     source_view
2024-03-14T18:22:19.1079223Z       from a drive
2024-03-14T18:22:19.1080261Z         participant known
2024-03-14T18:22:19.1081329Z           contact name present
2024-03-14T18:22:19.1335408Z             returns participant display name
2024-03-14T18:22:19.1336398Z           no contact name
2024-03-14T18:22:19.1459342Z             returns drive display name
2024-03-14T18:22:19.1460272Z         unknown participant
2024-03-14T18:22:19.1563023Z           returns drive display name
2024-03-14T18:22:19.1563798Z       details
2024-03-14T18:22:19.1565266Z         manufacturer
2024-03-14T18:22:19.1732554Z           returns manufacturer name
2024-03-14T18:22:19.1733317Z         donation site
2024-03-14T18:22:19.1894739Z           returns donation_site name
2024-03-14T18:22:19.1895479Z         misc
2024-03-14T18:22:19.1982045Z           returns a truncated comment
2024-03-14T18:22:19.1983059Z         product drive
2024-03-14T18:22:19.2088213Z           returns product_drive name
2024-03-14T18:22:19.2088982Z       not from a drive
2024-03-14T18:22:19.2199605Z         returns source
2024-03-14T18:22:19.2200327Z     money_raised
2024-03-14T18:22:19.2813283Z       tracks the money raised in a donation
2024-03-14T18:22:19.2814131Z     remove
2024-03-14T18:22:19.3473174Z       removes the item from the donation
2024-03-14T18:22:19.4124983Z       fails gracefully if the item doesn't exist
2024-03-14T18:22:19.4708295Z       works with either an id or an object
2024-03-14T18:22:19.4709083Z   SOURCES
2024-03-14T18:22:19.4745281Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-14T18:22:19.4780249Z     the hash is immutable
2024-03-14T18:22:19.4814343Z     the hash values are immutable
2024-03-14T18:22:19.4815166Z   Callbacks >
2024-03-14T18:22:19.4943187Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-14T18:22:19.5096046Z     automatically combines duplicate line_item records when they're created
2024-03-14T18:22:19.5096991Z   Associations >
2024-03-14T18:22:19.5097342Z     items >
2024-03-14T18:22:19.5250321Z       has_many
2024-03-14T18:22:19.5250859Z   Validations >
2024-03-14T18:22:19.5375027Z     requires a donation_site if the source is 'Donation Site'
2024-03-14T18:22:19.5527893Z     is invalid when the line items are invalid
2024-03-14T18:22:19.5650670Z     requires a product drive participant if the source is 'Product Drive'
2024-03-14T18:22:19.5692602Z     must belong to an organization
2024-03-14T18:22:19.5809723Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-14T18:22:19.5874123Z     requires a source from the list of available sources
2024-03-14T18:22:19.5922897Z     ensures that the issued at is no earlier than 2000
2024-03-14T18:22:19.5964544Z     requires an inventory (storage location)
2024-03-14T18:22:19.5965085Z   versioning
2024-03-14T18:22:19.6000757Z     is expected to be versioned
2024-03-14T18:22:19.6001398Z   Scopes >
2024-03-14T18:22:19.6002037Z     during >
2024-03-14T18:22:19.6185113Z       returns all donations created between two dates
2024-03-14T18:22:19.6185924Z     by_source >
2024-03-14T18:22:19.6186681Z       when source is not a symbol
2024-03-14T18:22:19.6187570Z         when source is invalid
2024-03-14T18:22:19.6365040Z           does not throw errors, returns no results
2024-03-14T18:22:19.6365978Z         when source comes from the SOURCES hash
2024-03-14T18:22:19.6533966Z           returns all donations with the provided source
2024-03-14T18:22:19.6534809Z       when source is a symbol
2024-03-14T18:22:19.6535607Z         when source is valid
2024-03-14T18:22:19.6713493Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-14T18:22:19.6714427Z         when source is invalid
2024-03-14T18:22:19.6892632Z           does not throw errors, returns no results
2024-03-14T18:22:19.6893434Z   behaves like itemizable
2024-03-14T18:22:19.6894471Z     .line_items
2024-03-14T18:22:19.6895382Z       total
2024-03-14T18:22:19.7245159Z         has an item total
2024-03-14T18:22:19.7245917Z       combine!
2024-03-14T18:22:19.7715539Z         incrementally combines line_items on donations that have already been created
2024-03-14T18:22:19.8105213Z         combines multiple line_items with the same item_id into a single record
2024-03-14T18:22:19.8106252Z       quantities_by_name
2024-03-14T18:22:19.8444932Z         leaves out zero-quantitied items if requested
2024-03-14T18:22:19.8779739Z         returns a hash of items with id, name, and quantity
2024-03-14T18:22:19.8780608Z       sorted
2024-03-14T18:22:19.9263939Z         displays the items, sorted by name
2024-03-14T18:22:19.9264906Z     .to_a
2024-03-14T18:22:19.9265617Z       with Flipper flag :deprecate_to_a enabled
2024-03-14T18:22:19.9597954Z         raises an error
2024-03-14T18:22:19.9598888Z       with Flipper flag :deprecate_to_a disabled
2024-03-14T18:22:19.9934902Z         calls line_item_values
2024-03-14T18:22:19.9935942Z 
2024-03-14T18:22:19.9936164Z NotifyPartnerJob
2024-03-14T18:22:19.9937053Z   #perform
2024-03-14T18:22:19.9986933Z     avoids exception when request doesn't exist
2024-03-14T18:22:20.0091926Z     is expected to call RequestsConfirmationMailer
2024-03-14T18:22:20.0092950Z     when the request's partner is deactivated
2024-03-14T18:22:20.0373998Z       does not send the confirmation email
2024-03-14T18:22:20.0374572Z 
2024-03-14T18:22:20.0591718Z Reports::PeriodSupplyReportService
2024-03-14T18:22:20.0592566Z   #report
2024-03-14T18:22:20.2193044Z     should report zero values
2024-03-14T18:22:20.2193589Z     with values
2024-03-14T18:22:20.8630662Z       should report normal values
2024-03-14T18:22:20.8631784Z 
2024-03-14T18:22:20.8631990Z View::Inventory
2024-03-14T18:22:20.8634233Z   #storage_location_name
2024-03-14T18:22:20.9495576Z     should return the right name
2024-03-14T18:22:20.9496184Z   #all_items
2024-03-14T18:22:21.0358304Z     should return all items across storage locations
2024-03-14T18:22:21.0358776Z   .total_inventory
2024-03-14T18:22:21.1252658Z     should return the total quantity
2024-03-14T18:22:21.1253286Z   .items_for_location
2024-03-14T18:22:21.2137413Z     should return the right values
2024-03-14T18:22:21.2138062Z     with include_omitted_items
2024-03-14T18:22:21.2991704Z       should add items not in the storage location
2024-03-14T18:22:21.2992422Z   #items_for_location
2024-03-14T18:22:21.3881841Z     should return the right values
2024-03-14T18:22:21.3882497Z     with include_omitted_items
2024-03-14T18:22:21.4739257Z       should add items not in the storage location
2024-03-14T18:22:21.4740116Z   #quantity_for
2024-03-14T18:22:21.4740482Z     with storage location but no item id
2024-03-14T18:22:21.5700690Z       should return all items at that location
2024-03-14T18:22:21.5701118Z     with item id
2024-03-14T18:22:21.5701876Z       with storage location
2024-03-14T18:22:21.6582506Z         should return the quantity at that location
2024-03-14T18:22:21.6583225Z       with no storage location
2024-03-14T18:22:21.7481180Z         should return quantities across all storage locations
2024-03-14T18:22:21.7481957Z   #storage_locations_for_item
2024-03-14T18:22:21.8377479Z     should return all relevant IDs
2024-03-14T18:22:21.8378531Z   #total_value_in_dollars
2024-03-14T18:22:21.9312391Z     should return total value across the given location
2024-03-14T18:22:21.9312948Z 
2024-03-14T18:22:21.9313241Z PartnerProfileUpdateService
2024-03-14T18:22:21.9314271Z   #call
2024-03-14T18:22:21.9315530Z     when there are no pre-existing served areas
2024-03-14T18:22:21.9316174Z       and the new values are correct
2024-03-14T18:22:21.9546621Z         stores the new values and returns success
2024-03-14T18:22:21.9547327Z         and there are other errors in the profile
2024-03-14T18:22:21.9748569Z           does not store the new values and it returns a failure
2024-03-14T18:22:21.9749315Z       and the new values are incorrect
2024-03-14T18:22:21.9934997Z 0
2024-03-14T18:22:21.9943874Z         does not store the new values and returns a failure
2024-03-14T18:22:21.9944771Z     when served area client shares pre-exist
2024-03-14T18:22:21.9945368Z       and the new values are correct
2024-03-14T18:22:21.9946342Z         and there are errors on the profile
2024-03-14T18:22:22.0226487Z           maintains the old values and returns failure
2024-03-14T18:22:22.0227217Z         and there are no other errors
2024-03-14T18:22:22.0513742Z           replaces the old values and returns success
2024-03-14T18:22:22.0514419Z       and the new values are incorrect
2024-03-14T18:22:22.0795542Z         maintains the old values and returns failure
2024-03-14T18:22:22.0796835Z 
2024-03-14T18:22:22.0797010Z KitCreateService
2024-03-14T18:22:22.0797845Z   #call
2024-03-14T18:22:22.2741207Z     should return an the instance
2024-03-14T18:22:22.2741876Z     when the parameters provided are invalid
2024-03-14T18:22:22.2742611Z       because the organization_id does not match any Organization
2024-03-14T18:22:22.2794818Z         should have an error on organization_id saying it does not match any Organization
2024-03-14T18:22:22.2795484Z       because the kit_params is invalid for kit creation
2024-03-14T18:22:22.4565998Z         should have errors saying why the kit_params are invalid
2024-03-14T18:22:22.4566877Z     when the parameters are valid
2024-03-14T18:22:22.6648725Z       should create a new Kit
2024-03-14T18:22:22.8636935Z       should create a new Item
2024-03-14T18:22:23.0574547Z       should create the new Item associated with the Kit
2024-03-14T18:22:23.0575205Z       but the ItemCreationService is unsuccesful
2024-03-14T18:22:23.2536672Z         should have an error that includes the error
2024-03-14T18:22:23.4538775Z         should not create the Kit
2024-03-14T18:22:23.6473739Z         should not create a Item
2024-03-14T18:22:23.6474412Z       but an unexpected error gets raised
2024-03-14T18:22:23.8757773Z         should have an error that includes the raised error
2024-03-14T18:22:24.2116528Z         should not create a Item
2024-03-14T18:22:24.4098333Z         should not create the Kit
2024-03-14T18:22:24.4099033Z 
2024-03-14T18:22:24.4099436Z ItemsInQuery
2024-03-14T18:22:24.4100318Z   items_in
2024-03-14T18:22:24.6944052Z     returns a collection with the fields name, item_id, quantity
2024-03-14T18:22:25.0166892Z     does not count negative adjustments towards in-flow
2024-03-14T18:22:25.3457746Z     does not count transfers going in the negative direction
2024-03-14T18:22:25.6097735Z     includes donations, purchases, adjustments, transfers among sources
2024-03-14T18:22:25.6098498Z 
2024-03-14T18:22:25.6098657Z Audit
2024-03-14T18:22:25.6099893Z   Validations >
2024-03-14T18:22:25.6655075Z     cannot have duplicate line items
2024-03-14T18:22:25.7214291Z     can have line items that has quantity as zero
2024-03-14T18:22:25.7506711Z     must belong to an organization
2024-03-14T18:22:25.8051531Z     can not have line items that has quantity as negative integer
2024-03-14T18:22:25.8157974Z     must belong to an organization admin of its organization
2024-03-14T18:22:25.8745491Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-14T18:22:25.9343880Z     can have line items that has quantity as a positive integer
2024-03-14T18:22:25.9344761Z   Scopes >
2024-03-14T18:22:25.9817856Z     `at_location` can filter out audits to a specific location
2024-03-14T18:22:25.9818640Z   behaves like itemizable
2024-03-14T18:22:25.9819787Z     .line_items
2024-03-14T18:22:25.9821036Z       total
2024-03-14T18:22:26.0676271Z         has an item total
2024-03-14T18:22:26.0676883Z       combine!
2024-03-14T18:22:26.1261456Z         combines multiple line_items with the same item_id into a single record
2024-03-14T18:22:26.1662964Z         incrementally combines line_items on donations that have already been created
2024-03-14T18:22:26.1663881Z       sorted
2024-03-14T18:22:26.2796302Z         displays the items, sorted by name
2024-03-14T18:22:26.2796984Z       quantities_by_name
2024-03-14T18:22:26.3621095Z         leaves out zero-quantitied items if requested
2024-03-14T18:22:26.4424298Z         returns a hash of items with id, name, and quantity
2024-03-14T18:22:26.4425476Z     .to_a
2024-03-14T18:22:26.4425978Z       with Flipper flag :deprecate_to_a enabled
2024-03-14T18:22:26.4911826Z         raises an error
2024-03-14T18:22:26.4912435Z       with Flipper flag :deprecate_to_a disabled
2024-03-14T18:22:26.5389970Z         calls line_item_values
2024-03-14T18:22:26.5390744Z   versioning
2024-03-14T18:22:26.5426940Z     is expected to be versioned
2024-03-14T18:22:26.5427509Z   Methods >
2024-03-14T18:22:26.7842231Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-14T18:22:27.1236960Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-14T18:22:27.1238074Z 
2024-03-14T18:22:27.1238237Z Purchase
2024-03-14T18:22:27.1240303Z   versioning
2024-03-14T18:22:27.1283566Z     is expected to be versioned
2024-03-14T18:22:27.1284159Z   behaves like itemizable
2024-03-14T18:22:27.1285122Z     .to_a
2024-03-14T18:22:27.1286351Z       with Flipper flag :deprecate_to_a disabled
2024-03-14T18:22:27.1692501Z         calls line_item_values
2024-03-14T18:22:27.1693126Z       with Flipper flag :deprecate_to_a enabled
2024-03-14T18:22:27.2073330Z         raises an error
2024-03-14T18:22:27.2073841Z     .line_items
2024-03-14T18:22:27.2074956Z       sorted
2024-03-14T18:22:27.2652106Z         displays the items, sorted by name
2024-03-14T18:22:27.2652780Z       combine!
2024-03-14T18:22:27.3157353Z         incrementally combines line_items on donations that have already been created
2024-03-14T18:22:27.3591525Z         combines multiple line_items with the same item_id into a single record
2024-03-14T18:22:27.3592334Z       total
2024-03-14T18:22:27.3983535Z         has an item total
2024-03-14T18:22:27.3984100Z       quantities_by_name
2024-03-14T18:22:27.4376773Z         returns a hash of items with id, name, and quantity
2024-03-14T18:22:27.4776371Z         leaves out zero-quantitied items if requested
2024-03-14T18:22:27.4777027Z   Callbacks >
2024-03-14T18:22:27.4967571Z     automatically combines duplicate line_item records when they're created
2024-03-14T18:22:27.5140642Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-14T18:22:27.5141369Z   Methods >
2024-03-14T18:22:27.5143172Z     remove
2024-03-14T18:22:27.5840871Z       fails gracefully if the item doesn't exist
2024-03-14T18:22:27.6496393Z       removes the item from the purchase
2024-03-14T18:22:27.6497018Z     storage_view
2024-03-14T18:22:27.7101618Z       returns name of storage location
2024-03-14T18:22:27.7102219Z   Scopes >
2024-03-14T18:22:27.7102820Z     during >
2024-03-14T18:22:27.7340193Z       returns all purchases created between two dates
2024-03-14T18:22:27.7340851Z   Associations >
2024-03-14T18:22:27.7341238Z     items >
2024-03-14T18:22:27.7524181Z       has_many
2024-03-14T18:22:27.7524942Z   Validations >
2024-03-14T18:22:27.7607850Z     is valid if all categories add up to total
2024-03-14T18:22:27.7686859Z     is valid if categories have no values
2024-03-14T18:22:27.7761065Z     must belong to an organization
2024-03-14T18:22:27.7834013Z     requires an inventory (storage location)
2024-03-14T18:22:27.8004542Z     is not valid if any category is non-zero but does not add up to the total
2024-03-14T18:22:27.8084820Z     ensures that the issued at is no earlier than 2000
2024-03-14T18:22:27.8260248Z     is invalid when the line items are invalid
2024-03-14T18:22:27.8344678Z     is not valid if period supplies is non-zero but no other category is
2024-03-14T18:22:27.8426920Z     is not valid if categories do not add up
2024-03-14T18:22:27.8427837Z 
2024-03-14T18:22:27.8428042Z DonationSitesController
2024-03-14T18:22:27.8429097Z   While signed in
2024-03-14T18:22:27.8430572Z     DELETE #destroy
2024-03-14T18:22:27.8588159Z       returns http success
2024-03-14T18:22:27.8588651Z     GET #new
2024-03-14T18:22:27.8704535Z       returns http success
2024-03-14T18:22:27.8705031Z     GET #index
2024-03-14T18:22:27.8809735Z       returns http success
2024-03-14T18:22:27.8810319Z     POST #import_csv
2024-03-14T18:22:27.8810817Z       behaves like csv import
2024-03-14T18:22:27.8811857Z         csv file with wrong headers
2024-03-14T18:22:27.8937267Z           redirects to :index
2024-03-14T18:22:27.9038211Z           presents a flash error message
2024-03-14T18:22:27.9038670Z         with a csv file
2024-03-14T18:22:27.9164969Z           presents a flash notice message
2024-03-14T18:22:27.9287107Z           redirects to :index
2024-03-14T18:22:27.9321502Z           invokes .import_csv
2024-03-14T18:22:27.9321911Z         without a csv file
2024-03-14T18:22:27.9490962Z           redirects to :index
2024-03-14T18:22:27.9593274Z           presents a flash error message
2024-03-14T18:22:27.9593888Z     GET #show
2024-03-14T18:22:27.9726476Z       returns http success
2024-03-14T18:22:27.9727041Z     Looking at a different organization
2024-03-14T18:22:28.1525923Z       redirects the user to the sign-in page for CRUD actions
2024-03-14T18:22:28.1526634Z     GET #edit
2024-03-14T18:22:28.1671654Z       returns http success
2024-03-14T18:22:28.1672272Z   While not signed in
2024-03-14T18:22:28.1732728Z     redirects the user to the sign-in page for CRUD actions
2024-03-14T18:22:28.1733282Z 
2024-03-14T18:22:28.1733547Z Partners::FamilyRequestCreateService
2024-03-14T18:22:28.1734410Z   #call
2024-03-14T18:22:28.1735338Z     when the arguments are correct
2024-03-14T18:22:28.1736138Z       with children
2024-03-14T18:22:28.2901874Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-14T18:22:28.2902629Z       without children
2024-03-14T18:22:28.3222194Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-14T18:22:28.3223141Z     when the arguments are incorrect
2024-03-14T18:22:28.3223888Z       because no family_requests_attributes or comments were defined
2024-03-14T18:22:28.3513776Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-14T18:22:28.3514633Z       because a unrecognized item_id was provided
2024-03-14T18:22:28.3746114Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-14T18:22:28.3747191Z 
2024-03-14T18:22:28.3747372Z UiHelper
2024-03-14T18:22:28.3749271Z   input_add_button
2024-03-14T18:22:28.3750157Z     with default options
2024-03-14T18:22:28.3801726Z       should generate a button with correct attributes (FAILED - 1)
2024-03-14T18:22:28.3802595Z     with custom options
2024-03-14T18:22:28.3848105Z       should generate a button with correct attributes (FAILED - 2)
2024-03-14T18:22:28.3848857Z   optional_data_text
2024-03-14T18:22:28.3849647Z     when the field provided is blank
2024-03-14T18:22:28.3895371Z       should return the text Not-Provided in gray text
2024-03-14T18:22:28.3896133Z     when the field provided is not blank
2024-03-14T18:22:28.3941485Z       should return the content
2024-03-14T18:22:28.3942158Z   input_delete_button
2024-03-14T18:22:28.3943549Z     with custom options
2024-03-14T18:22:28.3988108Z       should generate a button with correct attributes (FAILED - 3)
2024-03-14T18:22:28.3988882Z     with default options
2024-03-14T18:22:28.4033277Z       should generate a button with correct attributes (FAILED - 4)
2024-03-14T18:22:28.4033927Z       when soft is false
2024-03-14T18:22:28.4078044Z         should generate a button with correct attributes (FAILED - 5)
2024-03-14T18:22:28.4079029Z 
2024-03-14T18:22:28.4079231Z RequestsTotalItemsService
2024-03-14T18:22:28.4080114Z   #calculate
2024-03-14T18:22:28.4081336Z     when provided with requests that have no request items
2024-03-14T18:22:28.4160115Z       is expected to be blank
2024-03-14T18:22:28.4160649Z     when item name is nil
2024-03-14T18:22:28.4286568Z       return Unknown Item
2024-03-14T18:22:28.4287101Z     when the request items is not blank
2024-03-14T18:22:28.4421687Z       return items with correct quantities calculated
2024-03-14T18:22:28.4562605Z       return the names of items correctly
2024-03-14T18:22:28.4563275Z     when provided requests is nil
2024-03-14T18:22:28.4597041Z       is expected to be blank
2024-03-14T18:22:28.4597962Z 
2024-03-14T18:22:28.4598118Z UsersRole
2024-03-14T18:22:28.4599098Z   #current_role_for
2024-03-14T18:22:28.4601683Z     for partner user
2024-03-14T18:22:28.4736722Z       should return partner user
2024-03-14T18:22:28.4737781Z     for org admin
2024-03-14T18:22:28.4933746Z       should return org admin
2024-03-14T18:22:28.4934322Z     for super admin
2024-03-14T18:22:28.5092653Z       should return super admin
2024-03-14T18:22:28.5093243Z     for org user
2024-03-14T18:22:28.5218245Z       should return org user
2024-03-14T18:22:28.5218804Z   versioning
2024-03-14T18:22:28.5253266Z     is expected to be versioned
2024-03-14T18:22:28.5253690Z 
2024-03-14T18:22:28.5253867Z CalendarService
2024-03-14T18:22:28.7546263Z   #time_zones
2024-03-14T18:22:28.7546586Z   .calendar
2024-03-14T18:22:28.8143597Z     should print the calendar correctly
2024-03-14T18:22:28.8144265Z 
2024-03-14T18:22:28.8144472Z PartnerApprovalService
2024-03-14T18:22:28.8145451Z   #call
2024-03-14T18:22:28.8146364Z     when the arguments are correct
2024-03-14T18:22:28.8433621Z       should have no errors
2024-03-14T18:22:28.8732869Z       should change the partner status to approved
2024-03-14T18:22:28.9006311Z       should send an email notification to the partner
2024-03-14T18:22:28.9006868Z       but a unexpected error occured during the save
2024-03-14T18:22:28.9007464Z         for partner approval
2024-03-14T18:22:28.9250888Z           should not send an email notification to the partner
2024-03-14T18:22:28.9508279Z           should not change the partner status to approved
2024-03-14T18:22:28.9759276Z           should have an error with the raised error
2024-03-14T18:22:28.9759989Z     when the arguments are incorrect
2024-03-14T18:22:28.9760722Z       because the partner is not approvable
2024-03-14T18:22:29.0148432Z         should return the PartnerApprovalService object with an error
2024-03-14T18:22:29.0150502Z 
2024-03-14T18:22:29.0150753Z Organization
2024-03-14T18:22:29.0154009Z   after_create
2024-03-14T18:22:29.0397930Z     should update the state of the account request
2024-03-14T18:22:29.0398616Z   .seed_items
2024-03-14T18:22:29.0399069Z     when provided with an organization to seed
2024-03-14T18:22:29.3753989Z       loads the base items into Item records
2024-03-14T18:22:29.3754770Z     when no organization is provided
2024-03-14T18:22:30.0224391Z       updates all organizations
2024-03-14T18:22:30.0225007Z   reminder_day
2024-03-14T18:22:30.0342789Z     can only contain numbers 1-28
2024-03-14T18:22:30.0343165Z   versioning
2024-03-14T18:22:30.0377841Z     is expected to be versioned
2024-03-14T18:22:30.0378290Z   validations
2024-03-14T18:22:30.0473332Z     validates that at least one distribution type is enabled
2024-03-14T18:22:30.2362317Z     validates that short names are unique
2024-03-14T18:22:30.2436682Z     validates that attachments are png or jpgs
2024-03-14T18:22:30.2507923Z     validates that attachment file size is not higher than 1 MB
2024-03-14T18:22:30.2508562Z   is_active
2024-03-14T18:22:30.6242305Z     returns active organizations
2024-03-14T18:22:30.6242892Z   #seed_items
2024-03-14T18:22:30.8041423Z     allows a single base item to be seeded
2024-03-14T18:22:30.9969235Z     allows a collection of items to be seeded
2024-03-14T18:22:30.9969999Z     when given an item that already exists
2024-03-14T18:22:31.1815042Z       gracefully skips the item
2024-03-14T18:22:31.1815943Z     when given an item name that already exists, but with an 'other' partner key
2024-03-14T18:22:31.3724235Z       updates the old item to use the new base item as its base
2024-03-14T18:22:31.3725120Z   valid_items
2024-03-14T18:22:31.5596461Z     only shows active valid items
2024-03-14T18:22:31.7400514Z     returns an array of item partner keys
2024-03-14T18:22:31.7400982Z     with invisible items
2024-03-14T18:22:31.7693283Z       only shows active and visible items
2024-03-14T18:22:31.7693939Z   address
2024-03-14T18:22:31.7730336Z     does not add any separators after street when city, state, and zip are missing
2024-03-14T18:22:31.7766299Z     returns an empty string when the org has no address components
2024-03-14T18:22:31.7798960Z     does not add any separators before the city when street is missing
2024-03-14T18:22:31.7834702Z     correctly formats an address string with commas and spaces
2024-03-14T18:22:31.7870807Z     does not add a trailing space when the zip code is missing
2024-03-14T18:22:31.7871595Z   deadline_day
2024-03-14T18:22:31.7969858Z     can only contain numbers 1-28
2024-03-14T18:22:31.7970450Z   #short_name
2024-03-14T18:22:31.8035971Z     can only contain valid characters
2024-03-14T18:22:31.8041537Z   earliest reporting year
2024-03-14T18:22:32.0489283Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-14T18:22:32.2237390Z     is the organization created year if no associated data
2024-03-14T18:22:32.2238176Z   #ordered_requests
2024-03-14T18:22:32.4164070Z     puts active requests before fulfilled requests
2024-03-14T18:22:32.4165116Z     ordering of requests with matching status
2024-03-14T18:22:32.6146041Z       puts the most recently updated request before older requests
2024-03-14T18:22:32.6147189Z   total_inventory
2024-03-14T18:22:32.7967459Z     returns 0 if there is nothing
2024-03-14T18:22:33.0354276Z     returns a sum total of all inventory at all storage locations
2024-03-14T18:22:33.0355082Z   geocode
2024-03-14T18:22:33.2181725Z     adds coordinates to the database
2024-03-14T18:22:33.2182376Z   default storage location
2024-03-14T18:22:33.2222221Z     returns nil when not set
2024-03-14T18:22:33.2266607Z     associates the default storage location with a storage location
2024-03-14T18:22:33.2267402Z   from_email
2024-03-14T18:22:33.4194042Z     returns admin email when it's empty
2024-03-14T18:22:33.6182479Z     returns admin email when not present
2024-03-14T18:22:33.7851778Z     returns email when present
2024-03-14T18:22:33.9837028Z     returns admin email when it's empty space
2024-03-14T18:22:33.9837509Z   Associations >
2024-03-14T18:22:33.9876870Z     is expected to have many users through roles
2024-03-14T18:22:33.9916478Z     is expected to have many item_categories
2024-03-14T18:22:33.9964708Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-14T18:22:33.9965615Z     distributions
2024-03-14T18:22:33.9966099Z       upcoming
2024-03-14T18:22:34.0697115Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-14T18:22:34.0698086Z     barcode_items
2024-03-14T18:22:34.2613414Z       returns only this organization's barcodes, no globals
2024-03-14T18:22:34.2614153Z       .all
2024-03-14T18:22:34.4567668Z         includes global barcode items also
2024-03-14T18:22:34.4568468Z     users
2024-03-14T18:22:34.4569420Z       when a organizaton has a user that has two roles
2024-03-14T18:22:34.6531093Z         should returns users without duplications
2024-03-14T18:22:34.6531757Z     items
2024-03-14T18:22:34.6532979Z       .other
2024-03-14T18:22:36.8372792Z         returns all items for this organization designated 'other'
2024-03-14T18:22:36.8373606Z       .during.bottom
2024-03-14T18:22:38.8174033Z         return just 3 elements
2024-03-14T18:22:40.8385449Z         return 3 least used items
2024-03-14T18:22:40.8388054Z       .during
2024-03-14T18:22:42.8271277Z         return ranking of all items
2024-03-14T18:22:42.8271952Z       .during.top
2024-03-14T18:22:44.8493100Z         return 3 most used items
2024-03-14T18:22:46.8620322Z         return just 3 elements
2024-03-14T18:22:46.8621143Z   #assign_attributes_from_account_request
2024-03-14T18:22:46.8722681Z     should assign the proper attributes to the organization
2024-03-14T18:22:46.8723460Z 
2024-03-14T18:22:46.8723659Z Reports::OtherProductsReportService
2024-03-14T18:22:46.8724731Z   #report
2024-03-14T18:22:47.0593150Z     should report zero values
2024-03-14T18:22:47.6818058Z     should report normal values
2024-03-14T18:22:47.6818593Z 
2024-03-14T18:22:47.6820652Z RequestMailer
2024-03-14T18:22:47.6826481Z   #request_cancel_partner_notification
2024-03-14T18:22:47.6988034Z     should be sent to the partner main email with the correct subject line
2024-03-14T18:22:47.7125500Z     renders the body with correct text with partner information
2024-03-14T18:22:47.7126130Z 
2024-03-14T18:22:47.7126342Z Partners::Family
2024-03-14T18:22:47.7129025Z   versioning
2024-03-14T18:22:47.7165647Z     is expected to be versioned
2024-03-14T18:22:47.7166215Z   #create_authorized
2024-03-14T18:22:47.7438329Z     should include authorized family members
2024-03-14T18:22:47.7438981Z   #guardian_display_name
2024-03-14T18:22:47.7488669Z     should return the guardian's first and last name
2024-03-14T18:22:47.7489141Z   associations
2024-03-14T18:22:47.7526619Z     is expected to have many children dependent => destroy
2024-03-14T18:22:47.7568656Z     is expected to belong to partner required: true
2024-03-14T18:22:47.7607395Z     is expected to have many authorized_family_members dependent => destroy
2024-03-14T18:22:47.7608245Z   #total_children_count
2024-03-14T18:22:47.7659345Z     should return the family's total children count
2024-03-14T18:22:47.7659986Z   validations
2024-03-14T18:22:47.7747404Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-14T18:22:47.7825870Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-14T18:22:47.7906557Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-14T18:22:47.7907565Z   #search_non_archived
2024-03-14T18:22:47.8858176Z     should return non-archived families if zero is passed in
2024-03-14T18:22:47.9744189Z     should return all families if one is passed in
2024-03-14T18:22:47.9744822Z 
2024-03-14T18:22:47.9745134Z Exports::ExportDonationsCSVService
2024-03-14T18:22:47.9746011Z   #generate_csv_data
2024-03-14T18:22:48.0864992Z     should match the expected content for the csv
2024-03-14T18:22:48.0867558Z 
2024-03-14T18:22:48.0867751Z Kit
2024-03-14T18:22:48.2976217Z   deactivate and reactivate
2024-03-14T18:22:48.2976778Z   Value >
2024-03-14T18:22:48.3141435Z     converts dollars to cents
2024-03-14T18:22:48.3297398Z     converts cents to dollars
2024-03-14T18:22:48.3297956Z     .value_per_itemizable
2024-03-14T18:22:48.3692239Z       calculates values from associated items
2024-03-14T18:22:48.3692875Z   Filtering >
2024-03-14T18:22:48.3728448Z     can filter
2024-03-14T18:22:48.9455374Z     ->alphabetized retrieves items in alphabetical order
2024-03-14T18:22:48.9455935Z     ->by_partner_key
2024-03-14T18:22:49.1787547Z       shows the kits for a particular item
2024-03-14T18:22:49.1788143Z   Validations >
2024-03-14T18:22:49.1967372Z     can't have negative value
2024-03-14T18:22:49.2128373Z     is valid as built
2024-03-14T18:22:49.2292506Z     must belong to an organization
2024-03-14T18:22:49.2456785Z     requires a name
2024-03-14T18:22:49.2623398Z     requires at least one item
2024-03-14T18:22:49.4662690Z     requires a unique name
2024-03-14T18:22:49.4663297Z   versioning
2024-03-14T18:22:49.4702019Z     is expected to be versioned
2024-03-14T18:22:49.4702561Z   #can_deactivate?
2024-03-14T18:22:49.4703344Z     with inventory items
2024-03-14T18:22:49.7592370Z       should return false
2024-03-14T18:22:49.7593010Z     without inventory items
2024-03-14T18:22:50.0800866Z       should return true
2024-03-14T18:22:50.0801833Z 
2024-03-14T18:22:50.0802156Z ProductDriveParticipant
2024-03-14T18:22:50.0803704Z   Methods
2024-03-14T18:22:50.0804609Z     volume
2024-03-14T18:22:50.1496329Z       retrieves the amount of product that has been donated by participant
2024-03-14T18:22:50.1497180Z     donation_source_view
2024-03-14T18:22:50.1497896Z       contact name present
2024-03-14T18:22:50.1559791Z         is expected to eq "Contact Name (participant)"
2024-03-14T18:22:50.1560471Z       no contact name
2024-03-14T18:22:50.1622688Z         is expected to be nil
2024-03-14T18:22:50.1623286Z     volume_by_product_drive
2024-03-14T18:22:50.3079285Z       retrieves the amount of product that has been donated through specific product drive
2024-03-14T18:22:50.3080283Z   versioning
2024-03-14T18:22:50.3119936Z     is expected to be versioned
2024-03-14T18:22:50.3120454Z   Validations
2024-03-14T18:22:50.3157811Z     is invalid without an organization
2024-03-14T18:22:50.3220934Z     is invalid unless it has either a phone number or an email
2024-03-14T18:22:50.3221697Z   behaves like provideable
2024-03-14T18:22:50.3222691Z     import_csv
2024-03-14T18:22:50.5084290Z       imports from a csv file
2024-03-14T18:22:50.5085137Z     Validations
2024-03-14T18:22:50.5125475Z       is invalid without an organization
2024-03-14T18:22:50.5185413Z       is invalid unless it has either a contact name or a business name
2024-03-14T18:22:50.5186251Z     geocode
2024-03-14T18:22:50.5243100Z       adds coordinates to the database
2024-03-14T18:22:50.5244075Z 
2024-03-14T18:22:50.5244659Z Partners::RequestApprovalService
2024-03-14T18:22:50.5245652Z   #call
2024-03-14T18:22:50.5247428Z     when the partner is already awaiting approval
2024-03-14T18:22:50.5516701Z       should return an error saying it the partner is already requested approval
2024-03-14T18:22:50.5517737Z     when the partner is not yet awaiting approval
2024-03-14T18:22:50.5800351Z       should send an email notification to the partner's organization
2024-03-14T18:22:50.6083835Z       should set the status on the partner record to awaiting_review
2024-03-14T18:22:50.6085340Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-14T18:22:50.6334336Z       should return an error re social media
2024-03-14T18:22:50.6335858Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-14T18:22:50.6337072Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-14T18:22:50.6639533Z       does not have an error
2024-03-14T18:22:50.6640271Z 
2024-03-14T18:22:50.6640582Z AccountRequestsController
2024-03-14T18:22:50.6641604Z   routing
2024-03-14T18:22:50.6683506Z     routes to #create
2024-03-14T18:22:50.6717864Z     routes to #new
2024-03-14T18:22:50.6718910Z 
2024-03-14T18:22:50.6721746Z Transfer
2024-03-14T18:22:50.6723027Z   behaves like itemizable
2024-03-14T18:22:50.6724864Z     .line_items
2024-03-14T18:22:50.6725955Z       total
2024-03-14T18:22:50.7222243Z         has an item total
2024-03-14T18:22:50.7222774Z       combine!
2024-03-14T18:22:50.7494129Z         incrementally combines line_items on donations that have already been created
2024-03-14T18:22:50.7965047Z         combines multiple line_items with the same item_id into a single record
2024-03-14T18:22:50.7965989Z       quantities_by_name
2024-03-14T18:22:50.8456782Z         returns a hash of items with id, name, and quantity
2024-03-14T18:22:50.8943501Z         leaves out zero-quantitied items if requested
2024-03-14T18:22:50.8943982Z       sorted
2024-03-14T18:22:50.9612006Z         displays the items, sorted by name
2024-03-14T18:22:50.9612647Z     .to_a
2024-03-14T18:22:50.9613809Z       with Flipper flag :deprecate_to_a enabled
2024-03-14T18:22:50.9952205Z         raises an error
2024-03-14T18:22:50.9952694Z       with Flipper flag :deprecate_to_a disabled
2024-03-14T18:22:51.0288371Z         calls line_item_values
2024-03-14T18:22:51.0289027Z   Validations >
2024-03-14T18:22:51.2176597Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-14T18:22:51.2429578Z     requires that each line item exists in the inventory
2024-03-14T18:22:51.2512736Z     must belong to an organization
2024-03-14T18:22:51.2630680Z     must have different storage locations
2024-03-14T18:22:51.3264768Z     requires that the line items must have sufficient quantity in the inventory
2024-03-14T18:22:51.3390191Z     must have storage locations set
2024-03-14T18:22:51.3390880Z   versioning
2024-03-14T18:22:51.3430553Z     is expected to be versioned
2024-03-14T18:22:51.3431139Z   Methods >
2024-03-14T18:22:51.5533259Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-14T18:22:51.5534211Z   Scopes >
2024-03-14T18:22:51.5775268Z     `to_location` can filter out transfers to a specific location
2024-03-14T18:22:51.5999748Z     `from_location` can filter out transfers from a specific location
2024-03-14T18:22:51.6942356Z W, [2024-03-14T11:22:51.694019 #2252]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-14T18:22:51.6944050Z W, [2024-03-14T11:22:51.694061 #2252]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-14T18:22:51.6946284Z W, [2024-03-14T11:22:51.694079 #2252]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-14T18:22:51.6948762Z W, [2024-03-14T11:22:51.694111 #2252]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-14T18:22:51.6949954Z 
2024-03-14T18:22:51.6950564Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-14T18:22:51.6951256Z 
2024-03-14T18:22:51.6952372Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-14T18:22:51.6959229Z      # Temporarily skipped with xit
2024-03-14T18:22:51.6960079Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-14T18:22:51.7190546Z 
2024-03-14T18:22:51.7190899Z Failures:
2024-03-14T18:22:51.7194590Z 
2024-03-14T18:22:51.7195486Z   1) UiHelper input_add_button with default options should generate a button with correct attributes
2024-03-14T18:22:51.7196678Z      Failure/Error: subject { helper.input_add_button("Label", container_selector: "Container") { "Block" } }
2024-03-14T18:22:51.7197248Z 
2024-03-14T18:22:51.7197346Z      NoMethodError:
2024-03-14T18:22:51.7198166Z        undefined method `input_add_button' for #<ActionView::Base:0x000000000d5688>
2024-03-14T18:22:51.7198880Z      # ./spec/helpers/ui_helper_spec.rb:29:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7199578Z      # ./spec/helpers/ui_helper_spec.rb:32:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7200002Z 
2024-03-14T18:22:51.7200374Z   2) UiHelper input_add_button with custom options should generate a button with correct attributes
2024-03-14T18:22:51.7200965Z      Failure/Error:
2024-03-14T18:22:51.7201461Z        helper.input_add_button("Label", container_selector: "Container", class: "Class", id: "Id",
2024-03-14T18:22:51.7202043Z          data: {test: "test"}) { "Block" }
2024-03-14T18:22:51.7202293Z 
2024-03-14T18:22:51.7202389Z      NoMethodError:
2024-03-14T18:22:51.7202915Z        undefined method `input_add_button' for #<ActionView::Base:0x000000000d5ae8>
2024-03-14T18:22:51.7203602Z      # ./spec/helpers/ui_helper_spec.rb:52:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7204937Z      # ./spec/helpers/ui_helper_spec.rb:57:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7205367Z 
2024-03-14T18:22:51.7205762Z   3) UiHelper input_delete_button with custom options should generate a button with correct attributes
2024-03-14T18:22:51.7206783Z      Failure/Error: subject { helper.input_remove_button("Label", container_selector: "Container", class: "test", data: {test: "test"}) }
2024-03-14T18:22:51.7207418Z 
2024-03-14T18:22:51.7207519Z      NoMethodError:
2024-03-14T18:22:51.7208071Z        undefined method `input_remove_button' for #<ActionView::Base:0x000000000d60b0>
2024-03-14T18:22:51.7208752Z      # ./spec/helpers/ui_helper_spec.rb:106:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7209417Z      # ./spec/helpers/ui_helper_spec.rb:109:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7209814Z 
2024-03-14T18:22:51.7210182Z   4) UiHelper input_delete_button with default options should generate a button with correct attributes
2024-03-14T18:22:51.7211246Z      Failure/Error: subject { helper.input_remove_button("Label", container_selector: "Container") }
2024-03-14T18:22:51.7211727Z 
2024-03-14T18:22:51.7211823Z      NoMethodError:
2024-03-14T18:22:51.7212348Z        undefined method `input_remove_button' for #<ActionView::Base:0x000000000d6448>
2024-03-14T18:22:51.7213104Z      # ./spec/helpers/ui_helper_spec.rb:80:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7218117Z      # ./spec/helpers/ui_helper_spec.rb:83:in `block (4 levels) in <top (required)>'
2024-03-14T18:22:51.7218885Z 
2024-03-14T18:22:51.7219694Z   5) UiHelper input_delete_button with default options when soft is false should generate a button with correct attributes
2024-03-14T18:22:51.7221400Z      Failure/Error: subject { helper.input_remove_button("Label", container_selector: "Container", soft: true) }
2024-03-14T18:22:51.7222306Z 
2024-03-14T18:22:51.7222477Z      NoMethodError:
2024-03-14T18:22:51.7223449Z        undefined method `input_remove_button' for #<ActionView::Base:0x000000000d6830>
2024-03-14T18:22:51.7224612Z      # ./spec/helpers/ui_helper_spec.rb:95:in `block (5 levels) in <top (required)>'
2024-03-14T18:22:51.7225776Z      # ./spec/helpers/ui_helper_spec.rb:98:in `block (5 levels) in <top (required)>'
2024-03-14T18:22:51.7226495Z 
2024-03-14T18:22:51.7226879Z Finished in 1 minute 1.34 seconds (files took 8.41 seconds to load)
2024-03-14T18:22:51.7227680Z 613 examples, 5 failures, 1 pending
2024-03-14T18:22:51.7228065Z 
2024-03-14T18:22:51.7228224Z Failed examples:
2024-03-14T18:22:51.7228474Z 
2024-03-14T18:22:51.7229577Z rspec ./spec/helpers/ui_helper_spec.rb:31 # UiHelper input_add_button with default options should generate a button with correct attributes
2024-03-14T18:22:51.7231898Z rspec ./spec/helpers/ui_helper_spec.rb:56 # UiHelper input_add_button with custom options should generate a button with correct attributes
2024-03-14T18:22:51.7233976Z rspec ./spec/helpers/ui_helper_spec.rb:108 # UiHelper input_delete_button with custom options should generate a button with correct attributes
2024-03-14T18:22:51.7236073Z rspec ./spec/helpers/ui_helper_spec.rb:82 # UiHelper input_delete_button with default options should generate a button with correct attributes
2024-03-14T18:22:51.7238310Z rspec ./spec/helpers/ui_helper_spec.rb:97 # UiHelper input_delete_button with default options when soft is false should generate a button with correct attributes
2024-03-14T18:22:51.7239611Z 
2024-03-14T18:22:51.7239782Z Randomized with seed 34978
2024-03-14T18:22:51.7250301Z 
2024-03-14T18:22:52.0381704Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-14T18:22:52.0383441Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3834 / 6493 LOC (59.05%) covered.
2024-03-14T18:22:52.1052753Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb" failed
2024-03-14T18:22:52.5132050Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-14T18:22:52.5134261Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10802 LOC (0.35%) covered.
2024-03-14T18:22:52.5395292Z ##[error]Process completed with exit code 1.
