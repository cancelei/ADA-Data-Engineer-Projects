2024-03-07T01:31:08.0081106Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:31:08.0082123Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:31:08.0133453Z shell: /usr/bin/bash -e {0}
2024-03-07T01:31:08.0134277Z env:
2024-03-07T01:31:08.0134702Z   POSTGRES_HOST: localhost
2024-03-07T01:31:08.0135171Z   DATABASE_HOST: localhost
2024-03-07T01:31:08.0135692Z   PG_USERNAME: postgres
2024-03-07T01:31:08.0136101Z   PG_PASSWORD: password
2024-03-07T01:31:08.0136550Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:31:08.0137108Z   POSTGRES_PORT: 5432
2024-03-07T01:31:08.0137532Z   PGHOST: localhost
2024-03-07T01:31:08.0137927Z   PGUSER: postgres
2024-03-07T01:31:08.0138390Z   RAILS_ENV: test
2024-03-07T01:31:08.0139059Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:31:08.0139659Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T01:31:08.0140118Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-07T01:31:08.0140649Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:31:08.0141389Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:31:08.0142141Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:31:08.0143231Z   EVENTS_READ: true
2024-03-07T01:31:08.0143597Z ##[endgroup]
2024-03-07T01:31:17.7128796Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/models/partner_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/item_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/transfer_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/models/donation_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/event_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/models/vendor_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/user_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/users_role_spec.rb" "spec/models/organization_stats_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/base_item_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/models/role_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb"
2024-03-07T01:31:26.5346180Z 
2024-03-07T01:31:26.5347072Z Randomized with seed 40913
2024-03-07T01:31:27.3189299Z 
2024-03-07T01:31:27.3190228Z PartnerRequestRecertificationService
2024-03-07T01:31:27.3191217Z   #call
2024-03-07T01:31:27.3192715Z     when the arguments are correct
2024-03-07T01:31:27.3670533Z       should change the partner status to approved
2024-03-07T01:31:27.3961257Z       should have no errors
2024-03-07T01:31:27.4253669Z       should queue sending the notice to the partner
2024-03-07T01:31:27.4255626Z       but a unexpected error occurred during the save
2024-03-07T01:31:27.4256390Z         for partner approval
2024-03-07T01:31:27.4503831Z           should NOT queue sending the notice to the partner
2024-03-07T01:31:27.4760598Z           should not change the partner status to recertification_required
2024-03-07T01:31:27.5019865Z           should have an error with the raised error
2024-03-07T01:31:27.5021025Z     when the arguments are incorrect
2024-03-07T01:31:27.5022425Z       because the partner has already been requested to recertify
2024-03-07T01:31:27.5300466Z         should return the PartnerRequestRecertificationService object with an error
2024-03-07T01:31:27.5301718Z     when the partner is deactivated
2024-03-07T01:31:27.5577354Z       does not send an email
2024-03-07T01:31:27.5578318Z 
2024-03-07T01:31:27.5580050Z DonationDestroyService
2024-03-07T01:31:27.5580828Z   #call
2024-03-07T01:31:27.5581523Z     when the donation succesfully gets destroyed
2024-03-07T01:31:27.6086293Z       to be a success
2024-03-07T01:31:27.6087489Z     when storage_location fails to decrease the inventory of the donation
2024-03-07T01:31:27.6147621Z       to not be a success
2024-03-07T01:31:27.6148624Z     when the donation destroy fails
2024-03-07T01:31:27.6195849Z       to not be a success
2024-03-07T01:31:27.6196992Z     when the donation_id matches no Donation owned by the organization
2024-03-07T01:31:27.6236619Z       to not be a success
2024-03-07T01:31:27.6237561Z     when the organization_id matches no Organization
2024-03-07T01:31:27.6276442Z       to not be a success
2024-03-07T01:31:27.6277980Z 
2024-03-07T01:31:27.6278219Z BarcodeItem
2024-03-07T01:31:27.6279186Z   versioning
2024-03-07T01:31:27.6365454Z     is expected to be versioned
2024-03-07T01:31:27.6366579Z   Barcodes of BaseItems ('Global')
2024-03-07T01:31:27.6428332Z     updates a counter in BaseItem whenever it tracks a new barcode (FAILED - 1)
2024-03-07T01:31:27.6429546Z     filters >
2024-03-07T01:31:27.6540318Z       #by_base_item_partner_key returns barcodes that match the partner key (FAILED - 2)
2024-03-07T01:31:27.6620801Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id (FAILED - 3)
2024-03-07T01:31:27.6686356Z       ->by_value returns the barcode with that value (FAILED - 4)
2024-03-07T01:31:27.6687616Z     scopes >
2024-03-07T01:31:27.6688358Z       global
2024-03-07T01:31:27.6755742Z         includes all barcodes, for both base items and regular items (FAILED - 5)
2024-03-07T01:31:27.6756696Z     validations >
2024-03-07T01:31:27.6821947Z       allows multiple barcodes to point at the same base item (FAILED - 6)
2024-03-07T01:31:27.6885025Z       enforces uniqueness in the global scope (FAILED - 7)
2024-03-07T01:31:27.6958695Z       is valid with or without an organization
2024-03-07T01:31:27.6960000Z       item >
2024-03-07T01:31:27.7010750Z         is invalid without an item associated with it
2024-03-07T01:31:27.7011756Z       value >
2024-03-07T01:31:27.7063359Z         requires a value
2024-03-07T01:31:27.7064102Z       quantity >
2024-03-07T01:31:27.7115135Z         is not a negative number
2024-03-07T01:31:27.7166141Z         is an integer
2024-03-07T01:31:27.7216383Z         is not nil
2024-03-07T01:31:27.7217816Z   Organization barcodes
2024-03-07T01:31:27.7338338Z     updates a counter in Item whenever it tracks a new barcode
2024-03-07T01:31:27.7339476Z     filters >
2024-03-07T01:31:27.7543617Z       ->item_id shows only barcodes for a specific item_id
2024-03-07T01:31:27.7544838Z     validations >
2024-03-07T01:31:27.7791940Z       does not enforces value uniqueness across organizations
2024-03-07T01:31:27.7948597Z       enforces value uniqueness within the organization
2024-03-07T01:31:27.8098591Z       is valid only with an organization
2024-03-07T01:31:27.8215942Z       allows multiple barcodes to point at the same item
2024-03-07T01:31:27.8283738Z       does not enforce value uniqueness compared with the global scope (FAILED - 8)
2024-03-07T01:31:27.8284993Z       quantity >
2024-03-07T01:31:27.8376108Z         is not nil
2024-03-07T01:31:27.8466210Z         is not a negative number
2024-03-07T01:31:27.8555318Z         is an integer
2024-03-07T01:31:27.8556052Z       value >
2024-03-07T01:31:27.8649042Z         requires a value
2024-03-07T01:31:27.8649867Z       item >
2024-03-07T01:31:27.8744278Z         is invalid without an item associated with it
2024-03-07T01:31:27.8745593Z     when searching for a barcode where there is a global and local with the same value
2024-03-07T01:31:27.9281042Z       favors the local barcode (FAILED - 9)
2024-03-07T01:31:27.9282197Z     scopes >
2024-03-07T01:31:27.9513735Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-07T01:31:28.1483728Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-07T01:31:28.1557635Z       ->by_value returns the barcode with that value (FAILED - 10)
2024-03-07T01:31:28.1559094Z     to_h >
2024-03-07T01:31:28.1677911Z       emits a hash for a line_item
2024-03-07T01:31:28.1679826Z 
2024-03-07T01:31:28.1680212Z Distribution
2024-03-07T01:31:28.1681608Z   CSV export >
2024-03-07T01:31:28.1682396Z     csv_export_attributes
2024-03-07T01:31:28.6020263Z       returns the set of attributes which define a row in case of distribution export
2024-03-07T01:31:28.6021051Z     for_csv_export >
2024-03-07T01:31:28.9292154Z       filters only to the given organization
2024-03-07T01:31:29.2494291Z       filters only to the given issue time range
2024-03-07T01:31:29.5704518Z       filters only to the given filter
2024-03-07T01:31:29.5705384Z   Methods >
2024-03-07T01:31:29.5706120Z     #copy_from_request
2024-03-07T01:31:29.6105536Z       copy over relevant request information into the distrubution
2024-03-07T01:31:29.6106473Z     #copy_line_items
2024-03-07T01:31:29.6525980Z       replicates line_items from a donation into a distribution
2024-03-07T01:31:29.6527260Z     #distributed_at
2024-03-07T01:31:29.6793508Z       shows the hour and minutes if it has been provided
2024-03-07T01:31:29.7274075Z       displays explicit issued_at date
2024-03-07T01:31:29.7274905Z     #combine_duplicates
2024-03-07T01:31:29.7677472Z       condenses duplicate line_items if the item_ids match
2024-03-07T01:31:29.7678586Z     #future?
2024-03-07T01:31:29.7679199Z       when issued_at has not passed
2024-03-07T01:31:29.7943495Z         returns true
2024-03-07T01:31:29.7944373Z       when issued_at has passed
2024-03-07T01:31:29.8198517Z         returns false
2024-03-07T01:31:29.8199344Z   Scopes >
2024-03-07T01:31:29.8200722Z     during >
2024-03-07T01:31:29.8916615Z       returns all distributions created between two dates
2024-03-07T01:31:29.8917798Z     this_week >
2024-03-07T01:31:29.8918749Z       When it's Sunday (end of the week)
2024-03-07T01:31:29.9407649Z         doesn't include distributions past Sunday
2024-03-07T01:31:29.9408642Z       When it's Tuesday (mid-week)
2024-03-07T01:31:30.0125157Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-07T01:31:30.0126640Z     by_location >
2024-03-07T01:31:30.0678106Z       only returns distributions with given location id
2024-03-07T01:31:30.0679306Z     by_item_id >
2024-03-07T01:31:30.2031715Z       only returns distributions with given item id
2024-03-07T01:31:30.2032628Z     by_partner >
2024-03-07T01:31:30.2538653Z       only returns distributions with given partner id
2024-03-07T01:31:30.2539583Z   versioning
2024-03-07T01:31:30.2577788Z     is expected to be versioned
2024-03-07T01:31:30.2578793Z   Validations >
2024-03-07T01:31:30.2743071Z     ensures the associated line_items are invalid with a nil quantity
2024-03-07T01:31:30.2792083Z     requires a storage location
2024-03-07T01:31:30.2843911Z     must belong to an organization
2024-03-07T01:31:30.2901382Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:31:30.3053952Z     ensures the associated line_items are invalid with a zero quantity
2024-03-07T01:31:30.3473428Z     ensures the associated line_items are valid
2024-03-07T01:31:30.3527529Z     requires a partner
2024-03-07T01:31:30.3560886Z     ensures that any included items are found in the associated storage location
2024-03-07T01:31:30.3562057Z     when delivery method is shipped
2024-03-07T01:31:30.3562824Z       shipping cost is negative
2024-03-07T01:31:30.3624058Z         will not allow to save distribution
2024-03-07T01:31:30.3624939Z       shipping cost is none negative
2024-03-07T01:31:30.3891686Z         allows to save distribution
2024-03-07T01:31:30.3892785Z     when delivery method is other then shipped
2024-03-07T01:31:30.4152924Z       allows to save distribution
2024-03-07T01:31:30.4153843Z   Callbacks >
2024-03-07T01:31:30.4628743Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:31:30.4630186Z     #before_save
2024-03-07T01:31:30.4630816Z       #reset_shipping_cost
2024-03-07T01:31:30.4631603Z         when delivery_method is other then shipped
2024-03-07T01:31:30.4884213Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-07T01:31:30.4885446Z   behaves like itemizable
2024-03-07T01:31:30.4886158Z     .to_a
2024-03-07T01:31:30.4886955Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:31:30.5238362Z         calls line_item_values
2024-03-07T01:31:30.5239298Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:31:30.5589180Z         raises an error
2024-03-07T01:31:30.5589917Z     .line_items
2024-03-07T01:31:30.5591488Z       total
2024-03-07T01:31:30.6456137Z         has an item total
2024-03-07T01:31:30.6457695Z       sorted
2024-03-07T01:31:30.7675767Z         displays the items, sorted by name
2024-03-07T01:31:30.7676842Z       quantities_by_name
2024-03-07T01:31:30.8548123Z         returns a hash of items with id, name, and quantity
2024-03-07T01:31:30.9409416Z         leaves out zero-quantitied items if requested
2024-03-07T01:31:30.9410274Z       combine!
2024-03-07T01:31:30.9838582Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:31:31.0371431Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:31:31.0372526Z 
2024-03-07T01:31:31.0372835Z Reports::WarehouseReportService
2024-03-07T01:31:31.0373732Z   #report
2024-03-07T01:31:31.3988325Z     should print unknown warehouse type
2024-03-07T01:31:31.5792819Z     should print unknown square footage
2024-03-07T01:31:31.7593857Z     should print zero values
2024-03-07T01:31:32.1103602Z     should print normal values
2024-03-07T01:31:32.1104348Z 
2024-03-07T01:31:32.1104984Z UserInviteService
2024-03-07T01:31:32.2215856Z   should invite a user with the partner role
2024-03-07T01:31:32.4187127Z   should create the user without a name with default role
2024-03-07T01:31:32.4188406Z   with existing user
2024-03-07T01:31:32.4279542Z     should raise an error when reinviting an existing user with the same role
2024-03-07T01:31:32.6128433Z     should add roles to existing user
2024-03-07T01:31:32.6129246Z     with force: true
2024-03-07T01:31:32.6327377Z       should reinvite the user
2024-03-07T01:31:32.6328290Z   with a new user
2024-03-07T01:31:32.6581287Z     should create the user without name with role
2024-03-07T01:31:32.8461537Z     should create the user with roles
2024-03-07T01:31:32.8462494Z 
2024-03-07T01:31:32.8462747Z User
2024-03-07T01:31:32.8524192Z   has a valid factory
2024-03-07T01:31:32.8524968Z   omniauth
2024-03-07T01:31:32.8656640Z     retrieves the user from an omniauth context
2024-03-07T01:31:32.8657642Z   versioning
2024-03-07T01:31:32.8759623Z     is expected to be versioned
2024-03-07T01:31:32.8760538Z   Methods >
2024-03-07T01:31:32.8841889Z     #reinvitable?
2024-03-07T01:31:32.8895447Z     discarded?
2024-03-07T01:31:32.9392483Z     #kind
2024-03-07T01:31:32.9470290Z     #invitation_status
2024-03-07T01:31:32.9470964Z   Scopes >
2024-03-07T01:31:32.9471939Z     ->alphabetized
2024-03-07T01:31:32.9861117Z       retrieves users in the correct order
2024-03-07T01:31:32.9862012Z   Scopes >
2024-03-07T01:31:32.9863052Z     ->alphabetized
2024-03-07T01:31:33.0083551Z       retrieves users in the correct order
2024-03-07T01:31:33.0084557Z   Validations >
2024-03-07T01:31:33.0270867Z     requires an email that is formatted correctly
2024-03-07T01:31:33.0353716Z     requires a name
2024-03-07T01:31:33.0354859Z 
2024-03-07T01:31:33.0355135Z Transfer
2024-03-07T01:31:33.0356499Z   behaves like itemizable
2024-03-07T01:31:33.0357610Z     .line_items
2024-03-07T01:31:33.0358825Z       combine!
2024-03-07T01:31:33.0685783Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:31:33.1178632Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:31:33.1180355Z       quantities_by_name
2024-03-07T01:31:33.1684660Z         returns a hash of items with id, name, and quantity
2024-03-07T01:31:33.2198737Z         leaves out zero-quantitied items if requested
2024-03-07T01:31:33.2199991Z       sorted
2024-03-07T01:31:33.2940778Z         displays the items, sorted by name
2024-03-07T01:31:33.2941809Z       total
2024-03-07T01:31:33.3442320Z         has an item total
2024-03-07T01:31:33.3443133Z     .to_a
2024-03-07T01:31:33.3443918Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:31:33.3803860Z         raises an error
2024-03-07T01:31:33.3804637Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:31:33.4146704Z         calls line_item_values
2024-03-07T01:31:33.4149356Z   Scopes >
2024-03-07T01:31:33.4364458Z     `to_location` can filter out transfers to a specific location
2024-03-07T01:31:33.4575129Z     `from_location` can filter out transfers from a specific location
2024-03-07T01:31:33.4576330Z   Methods >
2024-03-07T01:31:33.6575027Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-07T01:31:33.6576241Z   Validations >
2024-03-07T01:31:33.7216684Z     requires that the line items must have sufficient quantity in the inventory
2024-03-07T01:31:33.7293102Z     must belong to an organization
2024-03-07T01:31:33.9256865Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-07T01:31:33.9372198Z     must have different storage locations
2024-03-07T01:31:33.9486677Z     must have storage locations set
2024-03-07T01:31:33.9726143Z     requires that each line item exists in the inventory
2024-03-07T01:31:33.9727251Z   versioning
2024-03-07T01:31:33.9760510Z     is expected to be versioned
2024-03-07T01:31:33.9761172Z 
2024-03-07T01:31:33.9761585Z DeadlineService
2024-03-07T01:31:33.9762434Z   #next_deadline
2024-03-07T01:31:33.9763347Z     do from the partner group
2024-03-07T01:31:33.9764271Z       when the deadline is before today
2024-03-07T01:31:33.9871471Z         returns a date in the next month
2024-03-07T01:31:33.9872678Z       when the deadline is today
2024-03-07T01:31:33.9926890Z         returns a date in the next month
2024-03-07T01:31:33.9928038Z       when the deadline is after today
2024-03-07T01:31:33.9982548Z         returns a date within the current month
2024-03-07T01:31:33.9983657Z     from the organization
2024-03-07T01:31:33.9984648Z       when the deadline is before today
2024-03-07T01:31:34.0038361Z         returns a date in the next month
2024-03-07T01:31:34.0039386Z       when the deadline is today
2024-03-07T01:31:34.0091085Z         returns a date in the next month
2024-03-07T01:31:34.0091968Z       when the deadline is after today
2024-03-07T01:31:34.0142659Z         returns a date within the current month
2024-03-07T01:31:34.0143571Z 
2024-03-07T01:31:34.0143952Z PartnerInviteService
2024-03-07T01:31:34.0451009Z   should create invite
2024-03-07T01:31:34.0736898Z   should update the status of the partner to invited
2024-03-07T01:31:34.0737952Z   with force: true
2024-03-07T01:31:34.1027724Z     should send the force setting forward
2024-03-07T01:31:34.1028954Z 
2024-03-07T01:31:34.1029399Z Item
2024-03-07T01:31:34.1031034Z   Methods >
2024-03-07T01:31:34.1032460Z     has_history?
2024-03-07T01:31:34.1901157Z       identifies items that have been used previously
2024-03-07T01:31:34.1902186Z     storage_locations_containing
2024-03-07T01:31:34.2246533Z       retrieves all storage locations that contain an item
2024-03-07T01:31:34.2247898Z     #reactivate!
2024-03-07T01:31:34.2248507Z       given a single item id
2024-03-07T01:31:34.2380637Z         sets the active trait to true for that item
2024-03-07T01:31:34.2381562Z       given an array of item ids
2024-03-07T01:31:34.2589363Z         sets the active trait to true for all of them
2024-03-07T01:31:34.2590421Z     other?
2024-03-07T01:31:34.2707513Z       is true for items that are partner_key 'other'
2024-03-07T01:31:34.2708363Z     destroy
2024-03-07T01:31:34.4946813Z       deactivates the kit if it exists
2024-03-07T01:31:34.5124467Z       actually destroys an item that doesn't have history
2024-03-07T01:31:34.5352437Z       only hides an item that has history
2024-03-07T01:31:34.5355085Z     barcoded_items >
2024-03-07T01:31:34.5709789Z       returns a collection of items that have barcodes associated with them
2024-03-07T01:31:34.5710609Z     barcodes_for
2024-03-07T01:31:34.5907411Z       retrieves all BarcodeItems associated with an item
2024-03-07T01:31:34.5908488Z   Validations >
2024-03-07T01:31:34.6022456Z     requires that items quantity are not a negative number
2024-03-07T01:31:34.6152697Z     requires a unique name
2024-03-07T01:31:34.6208278Z     must belong to an organization
2024-03-07T01:31:34.6258852Z     requires a Base Item base
2024-03-07T01:31:34.6259750Z   Filtering >
2024-03-07T01:31:34.6528412Z     ->active shows items that are still active
2024-03-07T01:31:34.6578614Z     can filter
2024-03-07T01:31:34.6768225Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:31:34.6807091Z     ->by_size returns all items with the same size, per their BaseItem parent (FAILED - 11)
2024-03-07T01:31:34.6808208Z     ->cloth_diapers
2024-03-07T01:31:34.7101000Z       returns records associated with disposable diapers
2024-03-07T01:31:34.7101847Z     ->by_base_item
2024-03-07T01:31:34.9065688Z       can be chained to organization to constrain it to just 1 org's items
2024-03-07T01:31:34.9231221Z       shows the items for a particular base_item
2024-03-07T01:31:34.9232501Z     ->disposable
2024-03-07T01:31:34.9511244Z       returns records associated with disposable diapers
2024-03-07T01:31:34.9512186Z     ->by_partner_key
2024-03-07T01:31:34.9663045Z       filters by partner key
2024-03-07T01:31:34.9663749Z   default_quantity
2024-03-07T01:31:34.9743611Z     should return the value of distribution_quantity if it is set
2024-03-07T01:31:34.9822492Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-07T01:31:34.9900066Z     should return 50 if column is not set
2024-03-07T01:31:34.9978467Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-07T01:31:34.9979550Z   Assocations >
2024-03-07T01:31:35.0028406Z     is expected to belong to item_category optional: true
2024-03-07T01:31:35.0029272Z   versioning
2024-03-07T01:31:35.0064273Z     is expected to be versioned
2024-03-07T01:31:35.0064849Z   after update
2024-03-07T01:31:35.0065618Z     when item has the kit
2024-03-07T01:31:35.2017761Z       updates kit name
2024-03-07T01:31:35.2018763Z     when item does not have kit
2024-03-07T01:31:35.2153977Z       does not raise any errors
2024-03-07T01:31:35.2154906Z   distribution_quantity and package size
2024-03-07T01:31:35.2286395Z     have nil values if an empty string is passed
2024-03-07T01:31:35.2287050Z 
2024-03-07T01:31:35.2287323Z ItemCreateService
2024-03-07T01:31:35.2288315Z   #call
2024-03-07T01:31:35.2291417Z     when an issue occurs in transaction
2024-03-07T01:31:35.2292558Z       because a inventory item creation failed and raised an error
2024-03-07T01:31:35.4050807Z         should return a OpenStruct with the raised error
2024-03-07T01:31:35.4051879Z       because the organization_id does not match any Organization
2024-03-07T01:31:35.5756581Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-07T01:31:35.5757899Z       because the item create raised an error
2024-03-07T01:31:35.7442357Z         should return a OpenStruct with the raised error
2024-03-07T01:31:35.7443505Z     when there are no issues
2024-03-07T01:31:35.9140748Z       should execute the expected methods
2024-03-07T01:31:36.0929385Z       should return an OpenStruct with success? set to true and the item
2024-03-07T01:31:36.0930309Z 
2024-03-07T01:31:36.0930514Z NDBNMember
2024-03-07T01:31:36.0931032Z   #full_name
2024-03-07T01:31:36.1001289Z     should equal the id and the account name
2024-03-07T01:31:36.1002199Z   validations
2024-03-07T01:31:36.1080987Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-07T01:31:36.1137392Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-07T01:31:36.1206448Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-07T01:31:36.1207535Z   versioning
2024-03-07T01:31:36.1251455Z     is expected to be versioned
2024-03-07T01:31:36.1252360Z 
2024-03-07T01:31:36.1252642Z DeallocateKitInventoryService
2024-03-07T01:31:36.1253619Z   #error
2024-03-07T01:31:36.1254946Z     when the storage location organization doesn't match
2024-03-07T01:31:36.3588019Z       returns error
2024-03-07T01:31:36.3588764Z   #deallocate
2024-03-07T01:31:36.3589423Z     when inventory items are available
2024-03-07T01:31:36.3591512Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-07T01:31:36.6625299Z         raises error about inconsistent inventory in or out
2024-03-07T01:31:36.6627313Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-07T01:31:36.9887680Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-07T01:31:36.9889965Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-07T01:31:37.3068556Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-07T01:31:37.3069972Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-07T01:31:37.5766754Z         raises error about KitAllocation not found
2024-03-07T01:31:37.5767633Z 
2024-03-07T01:31:37.5767982Z TransfersController
2024-03-07T01:31:37.5769531Z   While not signed in
2024-03-07T01:31:37.5932306Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:31:37.5933419Z   While signed in
2024-03-07T01:31:37.5934254Z     GET #show
2024-03-07T01:31:37.6232607Z       returns http success
2024-03-07T01:31:37.6233575Z     POST #create
2024-03-07T01:31:37.6425241Z       renders to #new when failing
2024-03-07T01:31:37.6919281Z       redirects to #show when successful
2024-03-07T01:31:37.6920366Z     GET #new
2024-03-07T01:31:37.7045205Z       returns http success
2024-03-07T01:31:37.7046004Z     GET #index
2024-03-07T01:31:37.7170890Z       returns http success
2024-03-07T01:31:37.7171734Z       when filtering by date
2024-03-07T01:31:37.7172509Z         when date parameters are supplied
2024-03-07T01:31:37.7549982Z           only returns the correct obejects
2024-03-07T01:31:37.7550932Z         when date parameters are not supplied
2024-03-07T01:31:37.7913248Z           returns all objects
2024-03-07T01:31:37.7914288Z     Looking at a different organization
2024-03-07T01:31:37.9752623Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:31:37.9753505Z 
2024-03-07T01:31:37.9753756Z Manufacturer
2024-03-07T01:31:37.9755195Z   Methods
2024-03-07T01:31:37.9756005Z     volume
2024-03-07T01:31:38.0481375Z       retrieves the amount of product that has been donated by manufacturer
2024-03-07T01:31:38.1837663Z       ignores the amount of product from other manufacturers
2024-03-07T01:31:38.3156608Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-07T01:31:38.3158211Z   versioning
2024-03-07T01:31:38.3200672Z     is expected to be versioned
2024-03-07T01:31:38.3202034Z   Private Methods
2024-03-07T01:31:38.3202682Z     #exists_in_org?
2024-03-07T01:31:38.4969478Z       returns true if manufacturer exists in an organization
2024-03-07T01:31:38.4970450Z   Validations
2024-03-07T01:31:38.5060260Z     must have a unique name within organization
2024-03-07T01:31:38.6793239Z     must belong to an organization
2024-03-07T01:31:38.6793933Z 
2024-03-07T01:31:38.6794280Z UsersRole
2024-03-07T01:31:38.6795310Z   #current_role_for
2024-03-07T01:31:38.6796502Z     for super admin
2024-03-07T01:31:38.6968319Z       should return super admin
2024-03-07T01:31:38.6969355Z     for org user
2024-03-07T01:31:38.7091806Z       should return org user
2024-03-07T01:31:38.7092419Z     for partner user
2024-03-07T01:31:38.7219706Z       should return partner user
2024-03-07T01:31:38.7220572Z     for org admin
2024-03-07T01:31:38.7414681Z       should return org admin
2024-03-07T01:31:38.7415634Z   versioning
2024-03-07T01:31:38.7458028Z     is expected to be versioned
2024-03-07T01:31:38.7461091Z 
2024-03-07T01:31:38.7461627Z Vendor
2024-03-07T01:31:38.7462411Z   Methods
2024-03-07T01:31:38.7463199Z     volume
2024-03-07T01:31:38.8122405Z       retrieves the amount of product that has been bought from this vendor
2024-03-07T01:31:38.8123586Z   behaves like provideable
2024-03-07T01:31:38.8124242Z     import_csv
2024-03-07T01:31:38.9898901Z       imports from a csv file
2024-03-07T01:31:38.9899674Z     geocode
2024-03-07T01:31:38.9959479Z       adds coordinates to the database
2024-03-07T01:31:38.9960289Z     Validations
2024-03-07T01:31:38.9996385Z       is invalid without an organization
2024-03-07T01:31:39.0052122Z       is invalid unless it has either a contact name or a business name
2024-03-07T01:31:39.0053166Z   versioning
2024-03-07T01:31:39.0086772Z     is expected to be versioned
2024-03-07T01:31:39.0087703Z 
2024-03-07T01:31:39.0088352Z OrganizationStats
2024-03-07T01:31:39.0089635Z   storage_locations_added method >
2024-03-07T01:31:39.0090939Z     current org is nil >
2024-03-07T01:31:39.0124558Z       should return 0
2024-03-07T01:31:39.0125264Z     current org is not nil >
2024-03-07T01:31:39.0159146Z       should return actual count of locations
2024-03-07T01:31:39.0160228Z   donation_sites_added method >
2024-03-07T01:31:39.0161289Z     current org is not nil >
2024-03-07T01:31:39.0195074Z       should return actual count of donation sites
2024-03-07T01:31:39.0195978Z     current org is nil >
2024-03-07T01:31:39.0229129Z       should return 0
2024-03-07T01:31:39.0230056Z   partners_added method >
2024-03-07T01:31:39.0230926Z     current org is nil >
2024-03-07T01:31:39.0264647Z       should return 0
2024-03-07T01:31:39.0265363Z     current org is not nil >
2024-03-07T01:31:39.0299545Z       should return actual count of partners
2024-03-07T01:31:39.0301301Z   locations_with_inventory method >
2024-03-07T01:31:39.0302036Z     current org is nil >
2024-03-07T01:31:39.0335675Z       should return an empty array
2024-03-07T01:31:39.0336633Z     current org is not nil + no locations have items >
2024-03-07T01:31:39.0400691Z       should return an empty array
2024-03-07T01:31:39.0401801Z     current org is not nil + locations have items >
2024-03-07T01:31:39.0734273Z       should return storage location
2024-03-07T01:31:39.0735286Z 
2024-03-07T01:31:39.0735747Z Event
2024-03-07T01:31:39.0736692Z   #most_recent_snapshot
2024-03-07T01:31:39.3214885Z     should not include an unusable snapshot
2024-03-07T01:31:39.5640465Z     should include the last usable snapshot
2024-03-07T01:31:39.5642374Z 
2024-03-07T01:31:39.5642728Z ItemsOutTotalQuery
2024-03-07T01:31:39.5643489Z   items_out_total_query
2024-03-07T01:31:39.6846944Z     returns a sum total of all out-flows
2024-03-07T01:31:39.6848433Z 
2024-03-07T01:31:39.6848665Z Partners::Profile
2024-03-07T01:31:39.6885767Z   must allow deleting served_areas
2024-03-07T01:31:39.6886641Z   request settings validation for profile
2024-03-07T01:31:39.6887543Z     no settings are set to true
2024-03-07T01:31:39.6938222Z       should not be valid
2024-03-07T01:31:39.6939540Z     at least one request type is set to true
2024-03-07T01:31:39.7009587Z       should be valid when enable_individual_requests is true
2024-03-07T01:31:39.7079235Z       should be valid when enable_child_based_requests is true
2024-03-07T01:31:39.7149967Z       should be valid when enable_quantity_based_requests is true
2024-03-07T01:31:39.7151152Z   associations
2024-03-07T01:31:39.7192539Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-07T01:31:39.7239450Z     is expected to have many served_areas
2024-03-07T01:31:39.7276314Z     is expected to have a has_many_attached called documents
2024-03-07T01:31:39.7315367Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-07T01:31:39.7316667Z   social media info validation for profile
2024-03-07T01:31:39.7317694Z     no social media presence and the checkbox is checked
2024-03-07T01:31:39.7372916Z       should be valid
2024-03-07T01:31:39.7373954Z     has social media presence and the checkbox is unchecked
2024-03-07T01:31:39.7446172Z       with just instagram it should be valid
2024-03-07T01:31:39.7514793Z       with just facebook it should be valid
2024-03-07T01:31:39.7584027Z       with just a website it should be valid
2024-03-07T01:31:39.7650824Z       with every social media option it should be valid
2024-03-07T01:31:39.7721891Z       with just twitter it should be valid
2024-03-07T01:31:39.7723039Z     no social media presence and the checkbox isn't checked
2024-03-07T01:31:39.7777839Z       should not be valid
2024-03-07T01:31:39.7880551Z       should be valid if media_information is not needed
2024-03-07T01:31:39.7881534Z   versioning
2024-03-07T01:31:39.7915064Z     is expected to be versioned
2024-03-07T01:31:39.7916030Z   client share behaviour
2024-03-07T01:31:39.7916804Z     multiple
2024-03-07T01:31:39.8167137Z       sums the client shares
2024-03-07T01:31:39.8322149Z       is valid if client share sum is 100
2024-03-07T01:31:39.8323160Z     no served areas
2024-03-07T01:31:39.8372493Z       has 0 client share
2024-03-07T01:31:39.8373120Z 
2024-03-07T01:31:39.8373487Z TextInterpolatorService
2024-03-07T01:31:39.8374505Z   #call
2024-03-07T01:31:39.8409947Z     returns interpolated text
2024-03-07T01:31:39.8410765Z     when interpolations are not present
2024-03-07T01:31:39.8444017Z       returns text
2024-03-07T01:31:39.8444988Z     when interpolations are empty
2024-03-07T01:31:39.8479596Z       returns text
2024-03-07T01:31:39.8480375Z     when text is nil
2024-03-07T01:31:39.8512697Z       returns nil
2024-03-07T01:31:39.8513460Z     when text is empty
2024-03-07T01:31:39.8548564Z       returns empty string
2024-03-07T01:31:39.8549389Z     when interpolations are nil
2024-03-07T01:31:39.8581823Z       returns text
2024-03-07T01:31:39.8582733Z 
2024-03-07T01:31:39.8583330Z Reports::AcquisitionReportService
2024-03-07T01:31:39.8584362Z   acquisition report
2024-03-07T01:31:40.9570427Z     should return the proper results on #report
2024-03-07T01:31:40.9571072Z 
2024-03-07T01:31:40.9571393Z DistributionUpdateService
2024-03-07T01:31:40.9572289Z   call
2024-03-07T01:31:41.0584999Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T01:31:41.0586242Z   resend_notification?
2024-03-07T01:31:41.1452449Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-07T01:31:41.2447833Z     changes any distribution content, resulting in resend_notification? = true
2024-03-07T01:31:41.3356537Z     changes the issue_date, resulting in resend_notification? = true
2024-03-07T01:31:41.3357571Z 
2024-03-07T01:31:41.3357865Z UiHelper
2024-03-07T01:31:41.3359480Z   optional_data_text
2024-03-07T01:31:41.3360825Z     when the field provided is blank
2024-03-07T01:31:41.3423473Z       should return the text Not-Provided in gray text
2024-03-07T01:31:41.3424311Z     when the field provided is not blank
2024-03-07T01:31:41.3471116Z       should return the content
2024-03-07T01:31:41.3475197Z 
2024-03-07T01:31:41.3475803Z Partner
2024-03-07T01:31:41.3477948Z   Filters
2024-03-07T01:31:41.3478675Z     by_status
2024-03-07T01:31:41.3877149Z       yields partners with the provided status
2024-03-07T01:31:41.4274471Z       yields deactivated partner when deactivated status provided
2024-03-07T01:31:41.4275460Z   associations
2024-03-07T01:31:41.4314785Z     is expected to have many item_categories through partner_group
2024-03-07T01:31:41.4349469Z     is expected to have many distributions
2024-03-07T01:31:41.4382843Z     is expected to have many users dependent => destroy
2024-03-07T01:31:41.4417801Z     is expected to have many requestable_items through item_categories source => items
2024-03-07T01:31:41.4473567Z     is expected to have many families dependent => destroy
2024-03-07T01:31:41.4530947Z     is expected to belong to organization required: true
2024-03-07T01:31:41.4582100Z     is expected to belong to partner_group optional: true
2024-03-07T01:31:41.4615746Z     is expected to have many requests
2024-03-07T01:31:41.4649858Z     is expected to have many children through families
2024-03-07T01:31:41.4682515Z     is expected to have many requests
2024-03-07T01:31:41.4683246Z     primary_user
2024-03-07T01:31:41.4954196Z       should return the first user ever created for a partner
2024-03-07T01:31:41.4955239Z   callbacks
2024-03-07T01:31:41.5157206Z     properly downcases email
2024-03-07T01:31:41.5158156Z   #csv_export_attributes
2024-03-07T01:31:41.5401375Z     includes contact person information from parnerbase
2024-03-07T01:31:41.5402056Z   Validations >
2024-03-07T01:31:41.5452235Z     must belong to an organization
2024-03-07T01:31:41.5737861Z     requires a unique email that is formatted correctly
2024-03-07T01:31:41.5965914Z     does not require a unique name between organizations
2024-03-07T01:31:41.6223272Z     requires a unique name within an organization
2024-03-07T01:31:41.6470158Z     still requires a unique email between organizations
2024-03-07T01:31:41.6555217Z     validates the quota is a number but it is not required
2024-03-07T01:31:41.6556283Z   ActiveStorage validation
2024-03-07T01:31:41.6665627Z     validates that attachments are pdf or docs
2024-03-07T01:31:41.6666660Z   #impact_metrics
2024-03-07T01:31:41.6667404Z     when partner has related information
2024-03-07T01:31:41.7363634Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-07T01:31:41.7365471Z     when partner don't have any related information
2024-03-07T01:31:41.7680556Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-07T01:31:41.7681865Z   #deletable?
2024-03-07T01:31:41.7682368Z     when status is not uninvited
2024-03-07T01:31:41.7772586Z       should return false
2024-03-07T01:31:41.7773509Z     when status is uninvited
2024-03-07T01:31:41.7774528Z       when it has a profile but no users
2024-03-07T01:31:41.7935829Z         should return true
2024-03-07T01:31:41.7936787Z       when it has a distribution
2024-03-07T01:31:41.8089371Z         should return false
2024-03-07T01:31:41.8090378Z       when it has a request
2024-03-07T01:31:41.8248406Z         should return false
2024-03-07T01:31:41.8249307Z       when it has no other associations
2024-03-07T01:31:41.8358359Z         should return true
2024-03-07T01:31:41.8359133Z       when it has a profile and users
2024-03-07T01:31:41.8606193Z         should return false
2024-03-07T01:31:41.8607142Z   changing emails
2024-03-07T01:31:41.8867278Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-07T01:31:41.9118014Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-07T01:31:41.9380356Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-07T01:31:41.9639612Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-07T01:31:41.9895164Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-07T01:31:42.0210195Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-07T01:31:42.0467930Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-07T01:31:42.0469455Z   #deactivated?
2024-03-07T01:31:42.0470247Z     when the status is 'deactivated'
2024-03-07T01:31:42.0512973Z       should return true
2024-03-07T01:31:42.0513994Z     when the status is not 'deactivated'
2024-03-07T01:31:42.0558871Z       should return false
2024-03-07T01:31:42.0559689Z   #quantity_year_to_date
2024-03-07T01:31:42.2524621Z     does not include quantities from distributions issued during the previous year
2024-03-07T01:31:42.4270204Z     includes all item quantities from distributions issued during the current year
2024-03-07T01:31:42.4271386Z   import_csv
2024-03-07T01:31:42.6402200Z     imports partners from a csv file and prevents multiple imports
2024-03-07T01:31:42.9475037Z     imports partners from a csv file with BOM encodings
2024-03-07T01:31:42.9475875Z   #profile
2024-03-07T01:31:42.9715136Z     should return the associated Partners::Profile record
2024-03-07T01:31:42.9716334Z   #approvable?
2024-03-07T01:31:42.9717083Z     when status is not invited or awaiting_review
2024-03-07T01:31:42.9805118Z       should return false
2024-03-07T01:31:42.9806019Z     when status is awaiting_review
2024-03-07T01:31:42.9845715Z       should return true
2024-03-07T01:31:42.9846455Z     when status is invited
2024-03-07T01:31:42.9885680Z       should return true
2024-03-07T01:31:42.9886387Z   versioning
2024-03-07T01:31:42.9919609Z     is expected to be versioned
2024-03-07T01:31:42.9920322Z 
2024-03-07T01:31:42.9920585Z AccountRequestsController
2024-03-07T01:31:42.9921500Z   routing
2024-03-07T01:31:42.9960112Z     routes to #create
2024-03-07T01:31:42.9994098Z     routes to #new
2024-03-07T01:31:42.9994950Z 
2024-03-07T01:31:42.9995411Z KitCreateService
2024-03-07T01:31:42.9996337Z   #call
2024-03-07T01:31:43.1986657Z     should return an the instance
2024-03-07T01:31:43.1987516Z     when the parameters are valid
2024-03-07T01:31:43.4030543Z       should create a new Item
2024-03-07T01:31:43.6073626Z       should create the new Item associated with the Kit
2024-03-07T01:31:43.8131088Z       should create a new Kit
2024-03-07T01:31:43.8132245Z       but the ItemCreationService is unsuccesful
2024-03-07T01:31:44.0135773Z         should not create the Kit
2024-03-07T01:31:44.2051374Z         should not create a Item
2024-03-07T01:31:44.3969785Z         should have an error that includes the error
2024-03-07T01:31:44.3970700Z       but an unexpected error gets raised
2024-03-07T01:31:44.5831945Z         should not create the Kit
2024-03-07T01:31:44.7692783Z         should have an error that includes the raised error
2024-03-07T01:31:44.9665605Z         should not create a Item
2024-03-07T01:31:44.9666674Z     when the parameters provided are invalid
2024-03-07T01:31:44.9667931Z       because the kit_params is invalid for kit creation
2024-03-07T01:31:45.1506334Z         should have errors saying why the kit_params are invalid
2024-03-07T01:31:45.1507906Z       because the organization_id does not match any Organization
2024-03-07T01:31:45.1561748Z         should have an error on organization_id saying it does not match any Organization
2024-03-07T01:31:45.1562536Z 
2024-03-07T01:31:45.1562861Z AllocateKitInventoryService
2024-03-07T01:31:45.1563638Z   #error
2024-03-07T01:31:45.1564908Z     when the Store location organization doesn't match
2024-03-07T01:31:45.3782665Z       returns error
2024-03-07T01:31:45.3783419Z   #allocate
2024-03-07T01:31:45.3784357Z     when more than one kit is requested
2024-03-07T01:31:45.3785234Z       but one of the items is out of stock
2024-03-07T01:31:45.6417476Z         returns error and does not change kit or item quantity
2024-03-07T01:31:45.6419160Z     when inventory items are available
2024-03-07T01:31:45.9084236Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-07T01:31:45.9085577Z       When kit is allocated more then once
2024-03-07T01:31:46.1907754Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-07T01:31:46.1909492Z       when there are more then one line items
2024-03-07T01:31:46.1910223Z         when same kit is allocated multiple times
2024-03-07T01:31:46.5012546Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:31:46.5013694Z         when there kit is allocated once
2024-03-07T01:31:46.7702655Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:31:46.7703641Z 
2024-03-07T01:31:46.7703873Z DistributionMailer
2024-03-07T01:31:46.7704930Z   #partner_mailer
2024-03-07T01:31:46.8379392Z     renders the body with organization's email text
2024-03-07T01:31:46.8881622Z     renders the body with distributions text
2024-03-07T01:31:46.8882521Z     with distribution changes
2024-03-07T01:31:46.9470316Z       renders the body with changes that happened in the distribution
2024-03-07T01:31:46.9471310Z     with deliver_method: :pick_up
2024-03-07T01:31:47.0024279Z       renders the body with 'picked up' specified
2024-03-07T01:31:47.0549512Z       when parners profile pick_up_email is present
2024-03-07T01:31:47.0550972Z         sends email to the primary contact and partner`s pickup person
2024-03-07T01:31:47.0552737Z         when pickup person happens to be the same as the primary contact
2024-03-07T01:31:47.1077499Z           does not send email twice
2024-03-07T01:31:47.1078508Z     with deliver_method: :delivery
2024-03-07T01:31:47.1596823Z       sends copy of email only to the partner
2024-03-07T01:31:47.2137498Z       renders the body with 'delivered' specified
2024-03-07T01:31:47.2138769Z   #reminder_email
2024-03-07T01:31:47.2139385Z     HTML format
2024-03-07T01:31:47.2649517Z       renders the body with organization's email text
2024-03-07T01:31:47.2650937Z     with deliver_method: :delivery
2024-03-07T01:31:47.3163589Z       renders the body with 'delivery' specified
2024-03-07T01:31:47.3164597Z     with deliver_method: :pick_up
2024-03-07T01:31:47.3650314Z       renders the body with 'pick up' specified
2024-03-07T01:31:47.3651301Z     Text format
2024-03-07T01:31:47.4106335Z       renders the body with organization's email text
2024-03-07T01:31:47.4107219Z 
2024-03-07T01:31:47.4107583Z Exports::ExportReportCSVService
2024-03-07T01:31:47.4108511Z   .generate_csv_data
2024-03-07T01:31:47.4143982Z     creates a CSV string
2024-03-07T01:31:47.4177357Z     creates CSV data including headers
2024-03-07T01:31:47.4179183Z 
2024-03-07T01:31:47.4179549Z Donation
2024-03-07T01:31:47.4181007Z   SOURCES
2024-03-07T01:31:47.4217078Z     the hash values are immutable
2024-03-07T01:31:47.4250445Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-07T01:31:47.4283319Z     the hash is immutable
2024-03-07T01:31:47.4284256Z   behaves like itemizable
2024-03-07T01:31:47.4284985Z     .to_a
2024-03-07T01:31:47.4285822Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:31:47.4617081Z         calls line_item_values
2024-03-07T01:31:47.4617967Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:31:47.4940217Z         raises an error
2024-03-07T01:31:47.4941052Z     .line_items
2024-03-07T01:31:47.4942108Z       quantities_by_name
2024-03-07T01:31:47.5277056Z         leaves out zero-quantitied items if requested
2024-03-07T01:31:47.5595713Z         returns a hash of items with id, name, and quantity
2024-03-07T01:31:47.5596643Z       sorted
2024-03-07T01:31:47.6074765Z         displays the items, sorted by name
2024-03-07T01:31:47.6075598Z       combine!
2024-03-07T01:31:47.6621406Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:31:47.7018355Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:31:47.7019443Z       total
2024-03-07T01:31:47.7355837Z         has an item total
2024-03-07T01:31:47.7356645Z   Callbacks >
2024-03-07T01:31:47.7511668Z     automatically combines duplicate line_item records when they're created
2024-03-07T01:31:47.7636105Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:31:47.7637502Z   Validations >
2024-03-07T01:31:47.7757939Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-07T01:31:47.7800011Z     requires an inventory (storage location)
2024-03-07T01:31:47.7943790Z     is invalid when the line items are invalid
2024-03-07T01:31:47.8060371Z     requires a product drive participant if the source is 'Product Drive'
2024-03-07T01:31:47.8123555Z     requires a source from the list of available sources
2024-03-07T01:31:47.8168128Z     must belong to an organization
2024-03-07T01:31:47.8217323Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:31:47.8326736Z     requires a donation_site if the source is 'Donation Site'
2024-03-07T01:31:47.8327713Z   Methods >
2024-03-07T01:31:47.8328301Z     source_view
2024-03-07T01:31:47.8329046Z       not from a drive
2024-03-07T01:31:47.8436679Z         returns source
2024-03-07T01:31:47.8437421Z       details
2024-03-07T01:31:47.8438211Z         misc
2024-03-07T01:31:47.8523606Z           returns a truncated comment
2024-03-07T01:31:47.8524416Z         manufacturer
2024-03-07T01:31:47.8629080Z           returns manufacturer name
2024-03-07T01:31:47.8630068Z         donation site
2024-03-07T01:31:47.8794619Z           returns donation_site name
2024-03-07T01:31:47.8795600Z         product drive
2024-03-07T01:31:47.8899320Z           returns product_drive name
2024-03-07T01:31:47.8900387Z       from a drive
2024-03-07T01:31:47.8901043Z         unknown participant
2024-03-07T01:31:47.9009102Z           returns drive display name
2024-03-07T01:31:47.9010339Z         participant known
2024-03-07T01:31:47.9011099Z           no contact name
2024-03-07T01:31:47.9137080Z             returns drive display name
2024-03-07T01:31:47.9138148Z           contact name present
2024-03-07T01:31:47.9263847Z             returns participant display name
2024-03-07T01:31:47.9264999Z     remove
2024-03-07T01:31:47.9966299Z       fails gracefully if the item doesn't exist
2024-03-07T01:31:48.0582743Z       removes the item from the donation
2024-03-07T01:31:48.1191122Z       works with either an id or an object
2024-03-07T01:31:48.1399687Z     money_raised
2024-03-07T01:31:48.1838669Z       tracks the money raised in a donation
2024-03-07T01:31:48.1839412Z   Scopes >
2024-03-07T01:31:48.1840389Z     by_source >
2024-03-07T01:31:48.1841887Z       when source is not a symbol
2024-03-07T01:31:48.1842855Z         when source comes from the SOURCES hash
2024-03-07T01:31:48.2027043Z           returns all donations with the provided source
2024-03-07T01:31:48.2027809Z         when source is invalid
2024-03-07T01:31:48.2210162Z           does not throw errors, returns no results
2024-03-07T01:31:48.2210966Z       when source is a symbol
2024-03-07T01:31:48.2211540Z         when source is valid
2024-03-07T01:31:48.2381669Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-07T01:31:48.2382655Z         when source is invalid
2024-03-07T01:31:48.2562063Z           does not throw errors, returns no results
2024-03-07T01:31:48.2562753Z     during >
2024-03-07T01:31:48.2746056Z       returns all donations created between two dates
2024-03-07T01:31:48.2746766Z   versioning
2024-03-07T01:31:48.2785472Z     is expected to be versioned
2024-03-07T01:31:48.2786065Z   Associations >
2024-03-07T01:31:48.2786653Z     items >
2024-03-07T01:31:48.2955041Z       has_many
2024-03-07T01:31:48.2955961Z 
2024-03-07T01:31:48.2956378Z DistributionItemizedBreakdownService
2024-03-07T01:31:48.2957466Z   #fetch_csv
2024-03-07T01:31:48.6741906Z     should output the expected output but in CSV format
2024-03-07T01:31:48.6742671Z   #fetch
2024-03-07T01:31:49.0566152Z     should include the break down of items distributed with onhand data
2024-03-07T01:31:49.0567219Z 
2024-03-07T01:31:49.0567491Z RequestsConfirmationMailer
2024-03-07T01:31:49.0880970Z   pairs the right quantities with the right item names
2024-03-07T01:31:49.1059393Z   handles duplicates
2024-03-07T01:31:49.1059908Z   #confirmation_email
2024-03-07T01:31:49.1232992Z     renders the body
2024-03-07T01:31:49.1359415Z     renders the headers
2024-03-07T01:31:49.1360314Z 
2024-03-07T01:31:49.1362112Z OrganizationUpdateService
2024-03-07T01:31:49.1362677Z   #update_partner_flags
2024-03-07T01:31:49.1363479Z     when request flags haven't changed
2024-03-07T01:31:49.3547775Z       should not update partners
2024-03-07T01:31:49.3548352Z     when request flags have changed
2024-03-07T01:31:49.5809585Z       should update partners when disabling child and individual request flags
2024-03-07T01:31:49.8008196Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-07T01:31:50.0217008Z       should update partners when disabling quantity-based request flags
2024-03-07T01:31:50.0218073Z   #update
2024-03-07T01:31:50.0218666Z     when organization has partners
2024-03-07T01:31:50.0219894Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-07T01:31:50.2475890Z         should allow the disabling of request flags in organization and its partners
2024-03-07T01:31:50.2477269Z       when all of a single partner's request flags will be disabled
2024-03-07T01:31:50.4674047Z         should NOT change request flags in organization or its partners
2024-03-07T01:31:50.6843484Z         should add an error message to the organization
2024-03-07T01:31:50.6844285Z     when object is invalid
2024-03-07T01:31:50.8622285Z       should not update and return false
2024-03-07T01:31:50.8623066Z     when object is valid
2024-03-07T01:31:51.0394023Z       should update and return true
2024-03-07T01:31:51.0395297Z 
2024-03-07T01:31:51.0395621Z DistributionsController
2024-03-07T01:31:51.0396893Z   While signed in
2024-03-07T01:31:51.0398092Z     POST #create
2024-03-07T01:31:51.0399962Z       when line item quantity is not positive
2024-03-07T01:31:51.0993141Z         flashes an error
2024-03-07T01:31:51.0994158Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-07T01:31:51.1951576Z         redirects with a flash notice and a flash alert
2024-03-07T01:31:51.1952924Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T01:31:51.2889778Z         redirects with a flash notice and a flash error
2024-03-07T01:31:51.2890904Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-07T01:31:51.3757052Z         redirects with a flash notice and a flash error
2024-03-07T01:31:51.3757781Z     PUT #update
2024-03-07T01:31:51.3759104Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-07T01:31:51.4880833Z         redirects with a flash notice and a flash error
2024-03-07T01:31:51.4882067Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-07T01:31:51.6090662Z         redirects with a flash notice and a flash error
2024-03-07T01:31:51.7508759Z       when distribution has items updated for minimum quantity
2024-03-07T01:31:51.7509811Z         redirects with a flash notice and send send_notification
2024-03-07T01:31:51.7510614Z 
2024-03-07T01:31:51.7510814Z User
2024-03-07T01:31:51.7511373Z   #send_reset_password_instructions
2024-03-07T01:31:51.7512205Z     user gets an email with instructions
2024-03-07T01:31:51.8431300Z       sends an email with instructions
2024-03-07T01:31:51.8432315Z   #role_added
2024-03-07T01:31:51.8782704Z     renders the body correctly
2024-03-07T01:31:51.8783370Z 
2024-03-07T01:31:51.8783629Z PartnerGroup
2024-03-07T01:31:51.8784898Z   DB constraints
2024-03-07T01:31:51.8785966Z     reminder_day <= 28
2024-03-07T01:31:51.8871513Z       raises error if unmet
2024-03-07T01:31:51.8872367Z     deadline_day <= 28
2024-03-07T01:31:51.8942627Z       raises error if unmet
2024-03-07T01:31:51.8943476Z     send_reminders IS NOT NULL
2024-03-07T01:31:51.9010974Z       raises error if unmet
2024-03-07T01:31:51.9013767Z   Validations >
2024-03-07T01:31:51.9253688Z     does not require a unique name between organizations
2024-03-07T01:31:51.9347314Z     requires a unique name within an organization
2024-03-07T01:31:51.9391580Z     must belong to an organization
2024-03-07T01:31:51.9392788Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-07T01:31:51.9443582Z       should not be valid
2024-03-07T01:31:51.9444385Z   versioning
2024-03-07T01:31:51.9484724Z     is expected to be versioned
2024-03-07T01:31:51.9485569Z   associations
2024-03-07T01:31:51.9541679Z     is expected to belong to organization required: true
2024-03-07T01:31:51.9608687Z     is expected to have and belong to many item_categories
2024-03-07T01:31:51.9647998Z     is expected to have many partners
2024-03-07T01:31:51.9648599Z 
2024-03-07T01:31:51.9648835Z NotifyPartnerJob
2024-03-07T01:31:51.9649657Z   #perform
2024-03-07T01:31:51.9705171Z     avoids exception when request doesn't exist
2024-03-07T01:31:51.9816186Z     is expected to call RequestsConfirmationMailer
2024-03-07T01:31:51.9818849Z     when the request's partner is deactivated
2024-03-07T01:31:52.0101971Z       does not send the confirmation email
2024-03-07T01:31:52.0102741Z 
2024-03-07T01:31:52.0103021Z EventDiffer
2024-03-07T01:31:52.2261166Z   should return a full diff
2024-03-07T01:31:52.2261773Z 
2024-03-07T01:31:52.2262026Z Deadlinable
2024-03-07T01:31:52.2263070Z   validations
2024-03-07T01:31:52.2356032Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:31:52.2430657Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-07T01:31:52.2475680Z     validates that reminder day is not the same as deadline day
2024-03-07T01:31:52.2476657Z 
2024-03-07T01:31:52.2476943Z DonationSitesController
2024-03-07T01:31:52.2478089Z   While signed in
2024-03-07T01:31:52.2479545Z     GET #new
2024-03-07T01:31:52.2613838Z       returns http success
2024-03-07T01:31:52.2614706Z     GET #edit
2024-03-07T01:31:52.2750320Z       returns http success
2024-03-07T01:31:52.2750988Z     GET #index
2024-03-07T01:31:52.2864343Z       returns http success
2024-03-07T01:31:52.2865165Z     POST #import_csv
2024-03-07T01:31:52.2865971Z       behaves like csv import
2024-03-07T01:31:52.2867046Z         with a csv file
2024-03-07T01:31:52.2915586Z           invokes .import_csv
2024-03-07T01:31:52.3085074Z           presents a flash notice message
2024-03-07T01:31:52.3210797Z           redirects to :index
2024-03-07T01:31:52.3211342Z         csv file with wrong headers
2024-03-07T01:31:52.3318018Z           redirects to :index
2024-03-07T01:31:52.3422756Z           presents a flash error message
2024-03-07T01:31:52.3423473Z         without a csv file
2024-03-07T01:31:52.3523092Z           redirects to :index
2024-03-07T01:31:52.3619204Z           presents a flash error message
2024-03-07T01:31:52.3619843Z     GET #show
2024-03-07T01:31:52.3749502Z       returns http success
2024-03-07T01:31:52.3750098Z     Looking at a different organization
2024-03-07T01:31:52.5518919Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:31:52.5519783Z     DELETE #destroy
2024-03-07T01:31:52.5688859Z       returns http success
2024-03-07T01:31:52.5689795Z   While not signed in
2024-03-07T01:31:52.5751822Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:31:52.5752727Z 
2024-03-07T01:31:52.5753178Z Partners::FetchPartnersToRemindNowService
2024-03-07T01:31:52.5754193Z   .fetch
2024-03-07T01:31:52.5754841Z     when there is a partner
2024-03-07T01:31:52.5756420Z       that does NOT have a organization with a global reminder & deadline
2024-03-07T01:31:52.5758026Z         and is a part of a partner group that does have them defined
2024-03-07T01:31:52.5758785Z           that is not for today
2024-03-07T01:31:52.6129354Z             should NOT include that partner
2024-03-07T01:31:52.6130201Z           that is for today
2024-03-07T01:31:52.6468334Z             should include that partner
2024-03-07T01:31:52.6469252Z             but the partner is deactivated
2024-03-07T01:31:52.6844337Z               should NOT include that partner
2024-03-07T01:31:52.6845486Z       that has an organization with a global reminder & deadline
2024-03-07T01:31:52.6846565Z         that is for today
2024-03-07T01:31:52.7142517Z           should include that partner
2024-03-07T01:31:52.7143287Z           but the partner is deactivated
2024-03-07T01:31:52.7479255Z             should NOT include that partner
2024-03-07T01:31:52.7480094Z           and has send_reminder=false
2024-03-07T01:31:52.7816417Z             should NOT include that partner
2024-03-07T01:31:52.7817624Z         AND a partner group that does have them defined
2024-03-07T01:31:52.8173747Z           should remind based on the partner group instead of the organization level reminder
2024-03-07T01:31:52.8175160Z           but the partner is deactivated
2024-03-07T01:31:52.8566420Z             should NOT include that partner
2024-03-07T01:31:52.8567492Z         that is not for today
2024-03-07T01:31:52.8851067Z           should NOT include that partner
2024-03-07T01:31:52.8852181Z 
2024-03-07T01:31:52.8852515Z Reports::ChildrenServedReportService
2024-03-07T01:31:52.8853420Z   #report
2024-03-07T01:31:53.3902193Z     should work with no distribution_quantity
2024-03-07T01:31:53.8868964Z     should report normal values
2024-03-07T01:31:54.0725250Z     should report zero values
2024-03-07T01:31:54.0725868Z 
2024-03-07T01:31:54.0726244Z Partners::RequestCreateService
2024-03-07T01:31:54.0727267Z   #call
2024-03-07T01:31:54.0728319Z     when the arguments are incorrect
2024-03-07T01:31:54.0729406Z       because a unrecogonized item_id was provided
2024-03-07T01:31:54.1098344Z         should return the Request object with an error
2024-03-07T01:31:54.1099091Z       because no item_requests_attributes and comments were defined
2024-03-07T01:31:54.1348466Z         should return the Request object with an error
2024-03-07T01:31:54.1349257Z     when the arguments are correct
2024-03-07T01:31:54.1704438Z       should create a Request record
2024-03-07T01:31:54.2134630Z       should notify the Partner via email
2024-03-07T01:31:54.2496160Z       should have no errors
2024-03-07T01:31:54.2497059Z       but a unexpected error occured during the save
2024-03-07T01:31:54.2499385Z         for the Request record
2024-03-07T01:31:54.2873749Z           should NOT create a Request record
2024-03-07T01:31:54.3270093Z           should have an error with the raised error
2024-03-07T01:31:54.3649952Z           should NOT notify the Partner via email
2024-03-07T01:31:54.3651231Z 
2024-03-07T01:31:54.3651840Z Exports::ExportDistributionsCSVService
2024-03-07T01:31:54.3652695Z   #generate_csv_data
2024-03-07T01:31:54.5512256Z     should match the expected content for the csv
2024-03-07T01:31:54.5513187Z     when there are no distributions but the report is requested
2024-03-07T01:31:54.7197105Z       returns a csv with only headers and no rows
2024-03-07T01:31:54.7197876Z     when a new item is added
2024-03-07T01:31:54.9015484Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-07T01:31:55.0852307Z       should add it to the end of the row
2024-03-07T01:31:55.0853028Z 
2024-03-07T01:31:55.0853360Z InventoryAggregate
2024-03-07T01:31:55.0855287Z   individual events
2024-03-07T01:31:55.6617995Z     should process a kit deallocation event
2024-03-07T01:31:55.9780783Z     should process a donation destroyed event
2024-03-07T01:31:56.2893842Z     should process an adjustment event
2024-03-07T01:31:56.5842634Z     should process a donation event after a new storage location is created
2024-03-07T01:31:56.8940758Z     should process a transfer destroy event
2024-03-07T01:31:57.1927415Z     should process a donation event
2024-03-07T01:31:57.5117921Z     should process an audit event
2024-03-07T01:31:57.8428921Z     should process a distribution destroyed event
2024-03-07T01:31:58.1205177Z     should process a snapshot event
2024-03-07T01:31:58.4344101Z     should process a purchase destroyed event
2024-03-07T01:31:58.7307292Z     should process a purchase event
2024-03-07T01:31:59.0276054Z     should process a transfer event
2024-03-07T01:31:59.3395005Z     should process a distribution event
2024-03-07T01:31:59.6448409Z     should process a kit allocation event
2024-03-07T01:31:59.6449421Z   multiple events
2024-03-07T01:31:59.9055948Z     should ignore unusable snapshots
2024-03-07T01:32:00.1758477Z     should handle changing storage location
2024-03-07T01:32:00.4899249Z     should handle intervening audits
2024-03-07T01:32:00.7509869Z     should handle timing correctly
2024-03-07T01:32:01.1452077Z     should process multiple events
2024-03-07T01:32:01.1452764Z   validation
2024-03-07T01:32:01.1453217Z     current event is incorrect
2024-03-07T01:32:01.3759244Z       should raise a bare error
2024-03-07T01:32:01.3759845Z     subsequent event is incorrect
2024-03-07T01:32:01.6838972Z       should add the event to the message
2024-03-07T01:32:01.9412701Z       should handle negative quantities
2024-03-07T01:32:01.9414519Z 
2024-03-07T01:32:01.9414903Z DonationsController
2024-03-07T01:32:01.9416402Z   While signed in as a normal user >
2024-03-07T01:32:01.9417964Z     GET #index
2024-03-07T01:32:01.9587144Z       returns http success
2024-03-07T01:32:01.9587790Z     DELETE #destroy
2024-03-07T01:32:01.9750781Z       redirects to the dashboard path
2024-03-07T01:32:01.9751359Z     GET #new
2024-03-07T01:32:01.9874839Z       returns http success
2024-03-07T01:32:01.9875416Z     PUT#update
2024-03-07T01:32:02.0214563Z       redirects to index after update
2024-03-07T01:32:02.1303727Z       updates storage quantity correctly
2024-03-07T01:32:02.1304466Z       when changing storage location
2024-03-07T01:32:02.2328400Z         updates storage quantity correctly
2024-03-07T01:32:02.2370507Z         rolls back updates if quantity would go below 0
2024-03-07T01:32:02.2371301Z       when removing a line item
2024-03-07T01:32:02.3368839Z         updates storage invetory item quantity correctly
2024-03-07T01:32:02.3369581Z     GET #edit
2024-03-07T01:32:02.3555093Z       returns http success
2024-03-07T01:32:02.3555645Z     GET #show
2024-03-07T01:32:02.3710932Z       returns http success
2024-03-07T01:32:02.3711493Z     POST#create
2024-03-07T01:32:02.4107018Z       redirects to GET#edit on success
2024-03-07T01:32:02.4304447Z       renders GET#new with error on failure
2024-03-07T01:32:02.4305160Z   While signed in as an organization admin >
2024-03-07T01:32:02.4305829Z     DELETE #destroy
2024-03-07T01:32:02.4599106Z       redirects to the index
2024-03-07T01:32:02.4599908Z   calculating total money raised for all donations
2024-03-07T01:32:02.4636871Z     returns zero for an empty array of donations
2024-03-07T01:32:02.4762725Z     correctly calculates the total
2024-03-07T01:32:02.4763678Z   calculating total value of multiple donations
2024-03-07T01:32:02.4799815Z     returns zero for an empty array of donations
2024-03-07T01:32:02.6056023Z     works correctly for multiple line items per donation
2024-03-07T01:32:02.6056641Z 
2024-03-07T01:32:02.6056821Z SyncNDBNMembers
2024-03-07T01:32:02.6057955Z   .sync
2024-03-07T01:32:02.6059661Z     when the HTTP request is successful
2024-03-07T01:32:02.6060972Z       when the account name of a NDBN Member has changed
2024-03-07T01:32:02.6354896Z         should update the account name of the corresponding NDBN Member
2024-03-07T01:32:02.6355855Z       when there are no exisiting NDBN Member records
2024-03-07T01:32:02.6457357Z         should create the NDBN Member records
2024-03-07T01:32:02.6458439Z       when no new NDBN Member has been added
2024-03-07T01:32:02.6652609Z         should not add any new NDBN Members
2024-03-07T01:32:02.6653454Z     when the HTTP request does not get a response of 200
2024-03-07T01:32:02.6699505Z       should raise an error regarding the response code
2024-03-07T01:32:02.6700185Z 
2024-03-07T01:32:02.6700450Z OrganizationMailer
2024-03-07T01:32:02.6701433Z   #partner_approval_request
2024-03-07T01:32:02.6971456Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:32:02.7219376Z     includes a link to the relevant partner
2024-03-07T01:32:02.7459427Z     renders the body with correct text with partner information
2024-03-07T01:32:02.7463478Z 
2024-03-07T01:32:02.7463810Z ItemsController
2024-03-07T01:32:02.7464807Z   While signed in
2024-03-07T01:32:02.7467108Z     PATCH #remove_category
2024-03-07T01:32:02.9449335Z       should redirect to the previous category page
2024-03-07T01:32:03.1384334Z       should remove an item's category
2024-03-07T01:32:03.1385126Z     GET #new
2024-03-07T01:32:03.1507889Z       returns http success
2024-03-07T01:32:03.1508525Z     GET #show
2024-03-07T01:32:03.1690522Z       returns http success
2024-03-07T01:32:03.1691150Z     POST #create
2024-03-07T01:32:03.1691803Z       with valid params
2024-03-07T01:32:03.1875403Z         should create an item
2024-03-07T01:32:03.2046463Z         should redirect to the item page
2024-03-07T01:32:03.2217110Z         should accept params with dollar signs, periods, and commas
2024-03-07T01:32:03.2218270Z       with invalid params
2024-03-07T01:32:03.2353027Z         should show an error
2024-03-07T01:32:03.2353613Z     PUT #update
2024-03-07T01:32:03.2354424Z       invisible
2024-03-07T01:32:03.2551944Z         should update visible_to_partners to false
2024-03-07T01:32:03.2552616Z       visible
2024-03-07T01:32:03.2744871Z         should update visible_to_partners to true
2024-03-07T01:32:03.2745806Z     GET #index
2024-03-07T01:32:03.2916848Z       returns http success
2024-03-07T01:32:03.2917542Z     PATCH #restore
2024-03-07T01:32:03.2918268Z       with an active item
2024-03-07T01:32:03.3122663Z         does nothing
2024-03-07T01:32:03.3123282Z       with another organizations item
2024-03-07T01:32:03.5002851Z         does nothing
2024-03-07T01:32:03.5003818Z       with a soft-deleted item
2024-03-07T01:32:03.5223916Z         re-activates the item
2024-03-07T01:32:03.5224627Z     Looking at a different organization
2024-03-07T01:32:03.6959839Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:32:03.6960609Z     GET #edit
2024-03-07T01:32:03.7118043Z       returns http success
2024-03-07T01:32:03.7118602Z     DELETE #destroy
2024-03-07T01:32:03.7341055Z       redirects to #index
2024-03-07T01:32:03.7342001Z   While not signed in
2024-03-07T01:32:03.7424278Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:32:03.7424888Z 
2024-03-07T01:32:03.7425149Z Reports::AdultIncontinenceReportService
2024-03-07T01:32:03.7425928Z   #report
2024-03-07T01:32:03.9179731Z     should report zero values
2024-03-07T01:32:03.9180524Z     with values
2024-03-07T01:32:04.5535293Z       should report normal values
2024-03-07T01:32:05.1676004Z       should handle null distribution quantity
2024-03-07T01:32:05.1676571Z 
2024-03-07T01:32:05.1676744Z ItemsInTotalQuery
2024-03-07T01:32:05.1677605Z   items_in_total_query
2024-03-07T01:32:05.3292900Z     returns a sum total of all in-flows
2024-03-07T01:32:05.6872986Z     counts shared items together
2024-03-07T01:32:05.9473064Z     does not count donations, purchases, adjustments to other storage locations
2024-03-07T01:32:06.1509472Z     does not count negative adjustments towards in-flow
2024-03-07T01:32:06.3583603Z     does not count transfers going in the negative direction
2024-03-07T01:32:06.3584376Z 
2024-03-07T01:32:06.3584616Z CustomDeviseMailer
2024-03-07T01:32:06.3585703Z   #invitation_instructions
2024-03-07T01:32:06.3587133Z     when other partner users invited
2024-03-07T01:32:06.3994675Z       invites to partner user
2024-03-07T01:32:06.3995284Z     when partner is invited
2024-03-07T01:32:06.4484793Z       invites to primary user
2024-03-07T01:32:06.4485503Z     when user is invited
2024-03-07T01:32:06.4673594Z       invites to user
2024-03-07T01:32:06.4853806Z       has invite expiration message
2024-03-07T01:32:06.4854884Z 
2024-03-07T01:32:06.4855160Z ServiceObjectErrorsMixin
2024-03-07T01:32:06.4855986Z   self.included
2024-03-07T01:32:06.4892137Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-07T01:32:06.4893096Z 
2024-03-07T01:32:06.4893236Z RequestMailer
2024-03-07T01:32:06.4896262Z   #request_cancel_partner_notification
2024-03-07T01:32:06.5053467Z     renders the body with correct text with partner information
2024-03-07T01:32:06.5186540Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:32:06.5187536Z 
2024-03-07T01:32:06.5187778Z View::Inventory
2024-03-07T01:32:06.5188830Z   #storage_location_name
2024-03-07T01:32:06.6063786Z     should return the right name
2024-03-07T01:32:06.6064515Z   .total_inventory
2024-03-07T01:32:06.6916965Z     should return the total quantity
2024-03-07T01:32:06.6917714Z   #storage_locations_for_item
2024-03-07T01:32:06.7826090Z     should return all relevant IDs
2024-03-07T01:32:06.7826855Z   #total_value_in_dollars
2024-03-07T01:32:06.8682636Z     should return total value across the given location
2024-03-07T01:32:06.8683403Z   #quantity_for
2024-03-07T01:32:06.8683910Z     with storage location but no item id
2024-03-07T01:32:06.9535048Z       should return all items at that location
2024-03-07T01:32:06.9535756Z     with item id
2024-03-07T01:32:06.9536647Z       with storage location
2024-03-07T01:32:07.0401471Z         should return the quantity at that location
2024-03-07T01:32:07.0402217Z       with no storage location
2024-03-07T01:32:07.1267592Z         should return quantities across all storage locations
2024-03-07T01:32:07.1268550Z   #items_for_location
2024-03-07T01:32:07.2152725Z     should return the right values
2024-03-07T01:32:07.2153596Z     with include_omitted_items
2024-03-07T01:32:07.3033641Z       should add items not in the storage location
2024-03-07T01:32:07.3034467Z   #all_items
2024-03-07T01:32:07.3906909Z     should return all items across storage locations
2024-03-07T01:32:07.3907985Z   .items_for_location
2024-03-07T01:32:07.4776481Z     should return the right values
2024-03-07T01:32:07.4777273Z     with include_omitted_items
2024-03-07T01:32:07.5631046Z       should add items not in the storage location
2024-03-07T01:32:07.5631997Z 
2024-03-07T01:32:07.5632219Z AccountRequestMailer
2024-03-07T01:32:07.5633909Z   #rejection
2024-03-07T01:32:07.5852628Z     should include the rejection reason
2024-03-07T01:32:07.5959811Z     should be sent to the correct email address
2024-03-07T01:32:07.6064009Z     should have the correct subject
2024-03-07T01:32:07.6065185Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:32:07.6111799Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:32:07.6112878Z   #approval_request
2024-03-07T01:32:07.6302043Z     should include the admin link to create the new organization from the account request
2024-03-07T01:32:07.6436100Z     should have the correct subject
2024-03-07T01:32:07.6737136Z     should include details of the account request
2024-03-07T01:32:07.6870434Z     should include the admin link to reject the organization
2024-03-07T01:32:07.6990065Z     should be sent to the info@humanessentials.app email address
2024-03-07T01:32:07.6991556Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:32:07.7037577Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:32:07.7038520Z   #confirmation
2024-03-07T01:32:07.7163956Z     should have the correct subject
2024-03-07T01:32:07.7279994Z     should be sent to the specified account_request email
2024-03-07T01:32:07.7393272Z     should be from no-reply@humanessentials.app
2024-03-07T01:32:07.7394660Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:32:07.7439941Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:32:07.7441007Z     Text format
2024-03-07T01:32:07.7561260Z       should include the staging/demo account information
2024-03-07T01:32:07.7677627Z       should include the button to confirm the request
2024-03-07T01:32:07.7792094Z       should include the instruction video link
2024-03-07T01:32:07.7793000Z     HTML format
2024-03-07T01:32:07.7915761Z       should include the instruction video link
2024-03-07T01:32:07.8043078Z       should include the button to confirm the request
2024-03-07T01:32:07.8157738Z       should include the staging/demo account information
2024-03-07T01:32:07.8158568Z 
2024-03-07T01:32:07.8158905Z HistoricalTrendsHelper
2024-03-07T01:32:07.8160793Z   #last_12_months
2024-03-07T01:32:07.8209618Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-07T01:32:07.8251136Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-07T01:32:07.8293921Z     returns the last 12 months starting from July when the current month is June
2024-03-07T01:32:07.8294999Z 
2024-03-07T01:32:08.0530400Z ProductDrive
2024-03-07T01:32:08.0531124Z   calculates and returns all donated organization item quantities by name and date
2024-03-07T01:32:08.2751834Z   calculates donation quantity by date
2024-03-07T01:32:08.4871007Z   calculates donation quantity
2024-03-07T01:32:08.7381936Z   calculates in-kind value
2024-03-07T01:32:09.2593695Z   calculates and returns all donated organization item quantities by category and date
2024-03-07T01:32:09.2594730Z   .search_date_range
2024-03-07T01:32:09.3980542Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-07T01:32:09.3981293Z   associations
2024-03-07T01:32:09.4860517Z     has_many product_drive_participants through donations
2024-03-07T01:32:09.5715014Z     has_many donations
2024-03-07T01:32:09.5715739Z   versioning
2024-03-07T01:32:09.7077777Z     is expected to be versioned
2024-03-07T01:32:09.7078540Z   distinct_items
2024-03-07T01:32:10.0500817Z     counts the items correctly for 1 donation with multiple items
2024-03-07T01:32:10.4087328Z     counts the distinct items correctly by given category
2024-03-07T01:32:10.7706429Z     counts the distinct items correctly in overlapping donations
2024-03-07T01:32:11.1246342Z     counts the distinct items correctly by given date
2024-03-07T01:32:11.4604383Z     doesn't double_count the items if there are two donations for the same item
2024-03-07T01:32:11.4605277Z   scopes
2024-03-07T01:32:11.4605763Z     .by_name
2024-03-07T01:32:11.6111368Z       returns the product_drive with name some_name
2024-03-07T01:32:11.7582864Z       does not return other_name
2024-03-07T01:32:11.7583383Z     .by_item_category_id
2024-03-07T01:32:12.0946623Z       returns the product_drive with name some_name
2024-03-07T01:32:12.4296042Z       does not return other_name
2024-03-07T01:32:12.4296658Z     .within_date_range
2024-03-07T01:32:12.5755551Z       does not include product drive 2
2024-03-07T01:32:12.7151671Z       returns the product drive 1
2024-03-07T01:32:12.7152445Z   donation_source_view
2024-03-07T01:32:12.8541033Z     returns formatted text
2024-03-07T01:32:12.8541550Z   validations
2024-03-07T01:32:12.9952208Z     is expected not to be valid
2024-03-07T01:32:13.1384792Z     is expected not to be valid
2024-03-07T01:32:13.2825900Z     is expected not to be valid
2024-03-07T01:32:13.2826566Z 
2024-03-07T01:32:13.2826858Z Partners::ItemRequest
2024-03-07T01:32:13.2828317Z   versioning
2024-03-07T01:32:13.2868446Z     is expected to be versioned
2024-03-07T01:32:13.2869028Z   associations
2024-03-07T01:32:13.2914247Z     is expected to belong to request class_name => ::Request required: true
2024-03-07T01:32:13.2950306Z     is expected to have many children through child_item_requests
2024-03-07T01:32:13.3004389Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:32:13.3005451Z   validations
2024-03-07T01:32:13.3067240Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-07T01:32:13.3125122Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-07T01:32:13.3185952Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-07T01:32:13.3244238Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T01:32:13.3245022Z 
2024-03-07T01:32:13.3245319Z Exports::ExportRequestService
2024-03-07T01:32:13.3246041Z   .generate_csv_data
2024-03-07T01:32:13.5271060Z     includes rows for each request with correct columns of item quantity
2024-03-07T01:32:13.7349609Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-07T01:32:13.7350633Z 
2024-03-07T01:32:13.7350802Z BaseItem
2024-03-07T01:32:13.7351585Z   versioning
2024-03-07T01:32:13.7392043Z     is expected to be versioned
2024-03-07T01:32:13.7392672Z   Validations >
2024-03-07T01:32:13.7441838Z     is invalid without a name
2024-03-07T01:32:13.7514946Z     is invalid without a uniqueness key
2024-03-07T01:32:13.7583865Z     is invalid without a unique name
2024-03-07T01:32:13.7631852Z     is invalid without a partner key
2024-03-07T01:32:13.7632488Z   Filtering >
2024-03-07T01:32:13.7633441Z     ->by_partner_key
2024-03-07T01:32:13.7688051Z       shows the Base Items by partner_key
2024-03-07T01:32:13.7688810Z     ->without_kit
2024-03-07T01:32:13.7744859Z       should not include the Kit BaseItem
2024-03-07T01:32:13.7745523Z   Associations >
2024-03-07T01:32:13.7872061Z     keeps count of its associated items
2024-03-07T01:32:13.7872680Z 
2024-03-07T01:32:13.7872913Z Role
2024-03-07T01:32:13.7911908Z   is expected to accepts_nested_attributes_for :users
2024-03-07T01:32:13.7912694Z   Validations
2024-03-07T01:32:13.7964341Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-07T01:32:13.7965422Z   Associations
2024-03-07T01:32:13.8025146Z     is expected to have and belong to many users
2024-03-07T01:32:13.8059760Z     is expected to belong to resource optional: true
2024-03-07T01:32:13.8060498Z   versioning
2024-03-07T01:32:13.8099048Z     is expected to be versioned
2024-03-07T01:32:13.8099623Z 
2024-03-07T01:32:13.8100089Z PartnerApprovalService
2024-03-07T01:32:13.8100784Z   #call
2024-03-07T01:32:13.8101593Z     when the arguments are correct
2024-03-07T01:32:13.8391147Z       should send an email notification to the partner
2024-03-07T01:32:13.8693342Z       should change the partner status to approved
2024-03-07T01:32:13.8976556Z       should have no errors
2024-03-07T01:32:13.8978196Z       but a unexpected error occured during the save
2024-03-07T01:32:13.8979560Z         for partner approval
2024-03-07T01:32:13.9242133Z           should not change the partner status to approved
2024-03-07T01:32:13.9492690Z           should have an error with the raised error
2024-03-07T01:32:13.9742433Z           should not send an email notification to the partner
2024-03-07T01:32:13.9743775Z     when the arguments are incorrect
2024-03-07T01:32:13.9744670Z       because the partner is not approvable
2024-03-07T01:32:13.9992259Z         should return the PartnerApprovalService object with an error
2024-03-07T01:32:13.9993983Z 
2024-03-07T01:32:13.9995525Z InventoryCheckService
2024-03-07T01:32:13.9995958Z   call
2024-03-07T01:32:13.9996287Z     error
2024-03-07T01:32:14.0737621Z       should set the error
2024-03-07T01:32:14.0738339Z     alert
2024-03-07T01:32:14.1565484Z       should set the alert
2024-03-07T01:32:14.1565994Z 
2024-03-07T01:32:14.1566178Z PartnerMailer
2024-03-07T01:32:14.1566684Z   #application_approved
2024-03-07T01:32:14.1903629Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-07T01:32:14.2215857Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:32:14.2217223Z   #recertification_request
2024-03-07T01:32:14.2469697Z     renders the body with text that indicates to recertify and link to where
2024-03-07T01:32:14.2702651Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:32:14.6079054Z 
2024-03-07T01:32:14.6079685Z Failures:
2024-03-07T01:32:14.6080155Z 
2024-03-07T01:32:14.6082043Z   1) BarcodeItem Barcodes of BaseItems ('Global') updates a counter in BaseItem whenever it tracks a new barcode
2024-03-07T01:32:14.6083796Z      Failure/Error:
2024-03-07T01:32:14.6084405Z        expect do
2024-03-07T01:32:14.6085184Z          create(:global_barcode_item, barcodeable: base_item)
2024-03-07T01:32:14.6085967Z        end.to change { base_item.barcode_count }.to(1)
2024-03-07T01:32:14.6086418Z 
2024-03-07T01:32:14.6086565Z      NoMethodError:
2024-03-07T01:32:14.6088400Z        undefined method `barcode_count' for #<BaseItem id: 46, name: "1T Diapers", category: nil, created_at: "2024-03-06 17:31:27.640805389 -0800", updated_at: "2024-03-06 17:31:27.640805389 -0800", item_count: nil, partner_key: "1t_diapers">
2024-03-07T01:32:14.6090363Z      # ./spec/models/barcode_item_spec.rb:51:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6091412Z      # ./spec/models/barcode_item_spec.rb:49:in `block (3 levels) in <top (required)>'
2024-03-07T01:32:14.6092016Z 
2024-03-07T01:32:14.6092865Z   2) BarcodeItem Barcodes of BaseItems ('Global') filters > #by_base_item_partner_key returns barcodes that match the partner key
2024-03-07T01:32:14.6093843Z      Failure/Error: b1 = create(:global_barcode_item, barcodeable: c1)
2024-03-07T01:32:14.6094675Z 
2024-03-07T01:32:14.6094913Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6095768Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6096773Z      # ./spec/models/barcode_item_spec.rb:67:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6097456Z 
2024-03-07T01:32:14.6098095Z   3) BarcodeItem Barcodes of BaseItems ('Global') filters > ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-07T01:32:14.6099172Z      Failure/Error: let(:global_barcode_item) { create(:global_barcode_item, barcodeable: base_item) }
2024-03-07T01:32:14.6099727Z 
2024-03-07T01:32:14.6099874Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6100371Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6101003Z      # ./spec/models/barcode_item_spec.rb:46:in `block (3 levels) in <top (required)>'
2024-03-07T01:32:14.6101775Z      # ./spec/models/barcode_item_spec.rb:57:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6102227Z 
2024-03-07T01:32:14.6102742Z   4) BarcodeItem Barcodes of BaseItems ('Global') filters > ->by_value returns the barcode with that value
2024-03-07T01:32:14.6103810Z      Failure/Error: b1 = create(:global_barcode_item, value: "DEADBEEF")
2024-03-07T01:32:14.6104187Z 
2024-03-07T01:32:14.6104317Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6104774Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6105340Z      # ./spec/models/barcode_item_spec.rb:72:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6105768Z 
2024-03-07T01:32:14.6106324Z   5) BarcodeItem Barcodes of BaseItems ('Global') scopes > global includes all barcodes, for both base items and regular items
2024-03-07T01:32:14.6107070Z      Failure/Error: create(:global_barcode_item)
2024-03-07T01:32:14.6107341Z 
2024-03-07T01:32:14.6107479Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6107924Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6108491Z      # ./spec/models/barcode_item_spec.rb:86:in `block (5 levels) in <top (required)>'
2024-03-07T01:32:14.6108915Z 
2024-03-07T01:32:14.6109439Z   6) BarcodeItem Barcodes of BaseItems ('Global') validations > allows multiple barcodes to point at the same base item
2024-03-07T01:32:14.6110240Z      Failure/Error: create(:global_barcode_item, barcodeable: base_item)
2024-03-07T01:32:14.6110804Z 
2024-03-07T01:32:14.6110933Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6111373Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6111942Z      # ./spec/models/barcode_item_spec.rb:108:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6112368Z 
2024-03-07T01:32:14.6112953Z   7) BarcodeItem Barcodes of BaseItems ('Global') validations > enforces uniqueness in the global scope
2024-03-07T01:32:14.6114215Z      Failure/Error: barcode = create(:global_barcode_item, value: "DEADBEEF")
2024-03-07T01:32:14.6114862Z 
2024-03-07T01:32:14.6115073Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6115816Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6116754Z      # ./spec/models/barcode_item_spec.rb:102:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6117207Z 
2024-03-07T01:32:14.6117647Z   8) BarcodeItem Organization barcodes validations > does not enforce value uniqueness compared with the global scope
2024-03-07T01:32:14.6118446Z      Failure/Error: barcode = create(:global_barcode_item, value: "DEADBEEF")
2024-03-07T01:32:14.6118817Z 
2024-03-07T01:32:14.6118944Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6119383Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6119926Z      # ./spec/models/barcode_item_spec.rb:190:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6120332Z 
2024-03-07T01:32:14.6120879Z   9) BarcodeItem Organization barcodes when searching for a barcode where there is a global and local with the same value favors the local barcode
2024-03-07T01:32:14.6121922Z      Failure/Error: let!(:global) { create(:global_barcode_item, value: "DEADBEEF", barcodeable: base_item) }
2024-03-07T01:32:14.6122426Z 
2024-03-07T01:32:14.6122559Z      ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6123001Z        can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6123559Z      # ./spec/models/barcode_item_spec.rb:162:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6123978Z 
2024-03-07T01:32:14.6124383Z   10) BarcodeItem Organization barcodes scopes > ->by_value returns the barcode with that value
2024-03-07T01:32:14.6125075Z       Failure/Error: b1 = create(:global_barcode_item, value: "DEADBEEF")
2024-03-07T01:32:14.6125427Z 
2024-03-07T01:32:14.6125566Z       ActiveModel::MissingAttributeError:
2024-03-07T01:32:14.6126007Z         can't write unknown attribute `barcode_count`
2024-03-07T01:32:14.6126568Z       # ./spec/models/barcode_item_spec.rb:151:in `block (4 levels) in <top (required)>'
2024-03-07T01:32:14.6126983Z 
2024-03-07T01:32:14.6127515Z   11) Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:32:14.6128307Z       Failure/Error: size4 = create(:base_item, size: "4")
2024-03-07T01:32:14.6128608Z 
2024-03-07T01:32:14.6128703Z       NoMethodError:
2024-03-07T01:32:14.6129548Z         undefined method `size=' for #<BaseItem id: nil, name: "5T Diapers", category: nil, created_at: nil, updated_at: nil, item_count: nil, partner_key: "3t_diapers">
2024-03-07T01:32:14.6130488Z       # ./spec/models/item_spec.rb:53:in `block (3 levels) in <top (required)>'
2024-03-07T01:32:14.6130857Z 
2024-03-07T01:32:14.6131057Z Finished in 48.01 seconds (files took 8.59 seconds to load)
2024-03-07T01:32:14.6131473Z 628 examples, 11 failures
2024-03-07T01:32:14.6131652Z 
2024-03-07T01:32:14.6131750Z Failed examples:
2024-03-07T01:32:14.6131899Z 
2024-03-07T01:32:14.6132575Z rspec ./spec/models/barcode_item_spec.rb:48 # BarcodeItem Barcodes of BaseItems ('Global') updates a counter in BaseItem whenever it tracks a new barcode
2024-03-07T01:32:14.6134221Z rspec ./spec/models/barcode_item_spec.rb:64 # BarcodeItem Barcodes of BaseItems ('Global') filters > #by_base_item_partner_key returns barcodes that match the partner key
2024-03-07T01:32:14.6135745Z rspec ./spec/models/barcode_item_spec.rb:56 # BarcodeItem Barcodes of BaseItems ('Global') filters > ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-07T01:32:14.6137278Z rspec ./spec/models/barcode_item_spec.rb:71 # BarcodeItem Barcodes of BaseItems ('Global') filters > ->by_value returns the barcode with that value
2024-03-07T01:32:14.6138653Z rspec ./spec/models/barcode_item_spec.rb:85 # BarcodeItem Barcodes of BaseItems ('Global') scopes > global includes all barcodes, for both base items and regular items
2024-03-07T01:32:14.6140088Z rspec ./spec/models/barcode_item_spec.rb:106 # BarcodeItem Barcodes of BaseItems ('Global') validations > allows multiple barcodes to point at the same base item
2024-03-07T01:32:14.6141457Z rspec ./spec/models/barcode_item_spec.rb:101 # BarcodeItem Barcodes of BaseItems ('Global') validations > enforces uniqueness in the global scope
2024-03-07T01:32:14.6142712Z rspec ./spec/models/barcode_item_spec.rb:189 # BarcodeItem Organization barcodes validations > does not enforce value uniqueness compared with the global scope
2024-03-07T01:32:14.6144155Z rspec ./spec/models/barcode_item_spec.rb:166 # BarcodeItem Organization barcodes when searching for a barcode where there is a global and local with the same value favors the local barcode
2024-03-07T01:32:14.6145588Z rspec ./spec/models/barcode_item_spec.rb:150 # BarcodeItem Organization barcodes scopes > ->by_value returns the barcode with that value
2024-03-07T01:32:14.6146760Z rspec ./spec/models/item_spec.rb:52 # Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:32:14.6147350Z 
2024-03-07T01:32:14.6147454Z Randomized with seed 40913
2024-03-07T01:32:14.6147639Z 
2024-03-07T01:32:15.1277038Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:32:15.1279571Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3959 / 6473 LOC (61.16%) covered.
2024-03-07T01:32:15.1825960Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/models/partner_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/item_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/models/transfer_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/models/donation_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/event_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/models/vendor_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/user_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/users_role_spec.rb" "spec/models/organization_stats_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/models/base_item_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/services/deadline_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/models/role_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" failed
2024-03-07T01:32:15.5855882Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:32:15.5858574Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10760 LOC (0.35%) covered.
2024-03-07T01:32:15.6128886Z ##[error]Process completed with exit code 1.
