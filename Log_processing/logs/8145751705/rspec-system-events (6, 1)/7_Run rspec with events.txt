2024-03-04T19:17:00.9121505Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-04T19:17:00.9122501Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-04T19:17:00.9150403Z shell: /usr/bin/bash -e {0}
2024-03-04T19:17:00.9150768Z env:
2024-03-04T19:17:00.9151090Z   POSTGRES_HOST: localhost
2024-03-04T19:17:00.9151554Z   DATABASE_HOST: localhost
2024-03-04T19:17:00.9151943Z   PG_USERNAME: postgres
2024-03-04T19:17:00.9152344Z   PG_PASSWORD: password
2024-03-04T19:17:00.9152757Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-04T19:17:00.9153175Z   POSTGRES_PORT: 5432
2024-03-04T19:17:00.9153547Z   PGHOST: localhost
2024-03-04T19:17:00.9153948Z   PGUSER: postgres
2024-03-04T19:17:00.9154249Z   RAILS_ENV: test
2024-03-04T19:17:00.9154842Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-04T19:17:00.9155351Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-04T19:17:00.9155769Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-04T19:17:00.9156214Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-04T19:17:00.9156837Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-04T19:17:00.9157460Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-04T19:17:00.9158150Z   EVENTS_READ: true
2024-03-04T19:17:00.9158499Z ##[endgroup]
2024-03-04T19:17:06.8730816Z W, [2024-03-04T19:17:06.872733 #2396]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-04T19:17:06.8734025Z W, [2024-03-04T19:17:06.872794 #2396]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:06.8736379Z W, [2024-03-04T19:17:06.872810 #2396]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:06.8739609Z W, [2024-03-04T19:17:06.872834 #2396]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-04T19:17:09.6430983Z W, [2024-03-04T19:17:09.642711 #2396]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-04T19:17:09.6433489Z W, [2024-03-04T19:17:09.642766 #2396]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:17:09.6437480Z W, [2024-03-04T19:17:09.642791 #2396]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:17:09.6442253Z W, [2024-03-04T19:17:09.642849 #2396]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-04T19:17:09.6497238Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-04T19:17:18.4942976Z 
2024-03-04T19:17:18.4943808Z Randomized with seed 35045
2024-03-04T19:17:19.5223987Z 
2024-03-04T19:17:19.5224758Z BarcodeItems
2024-03-04T19:17:19.5225624Z   While signed in
2024-03-04T19:17:19.5227576Z     DELETE #destroy
2024-03-04T19:17:19.6031700Z       redirects to the index
2024-03-04T19:17:19.7964732Z       disallows a user to delete someone else's barcode
2024-03-04T19:17:19.8191614Z       disallows a non-superadmin to delete a global barcode
2024-03-04T19:17:19.8192692Z     GET #edit
2024-03-04T19:17:19.8193785Z       with a global barcode item
2024-03-04T19:17:19.8732527Z         returns a 404
2024-03-04T19:17:19.8733261Z       with a normal barcode item
2024-03-04T19:17:19.9202416Z         returns http success
2024-03-04T19:17:19.9203148Z     GET #find
2024-03-04T19:17:19.9203622Z       via ajax
2024-03-04T19:17:20.1312837Z         can find a barcode that is scoped to just this organization
2024-03-04T19:17:20.3431177Z         can find a barcode that's universally available
2024-03-04T19:17:20.3432112Z         when it's missing
2024-03-04T19:17:20.5479395Z           returns a 404
2024-03-04T19:17:20.5480529Z     GET #show
2024-03-04T19:17:20.5481701Z       with a normal barcode item
2024-03-04T19:17:20.5894741Z         returns http success
2024-03-04T19:17:20.5895583Z       with a global barcode item
2024-03-04T19:17:20.6225540Z         returns a 404
2024-03-04T19:17:20.6226276Z     Looking at a different organization
2024-03-04T19:17:20.8324492Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:17:20.8325197Z     GET #new
2024-03-04T19:17:20.8688493Z       returns http success
2024-03-04T19:17:20.8689476Z     GET #index
2024-03-04T19:17:20.8689977Z       csv
2024-03-04T19:17:20.8959024Z         is expected to be successful
2024-03-04T19:17:20.8960351Z       html
2024-03-04T19:17:20.9436512Z         is expected to be successful
2024-03-04T19:17:20.9437134Z 
2024-03-04T19:17:20.9437566Z User account management
2024-03-04T19:17:20.9438674Z   when in staging
2024-03-04T19:17:22.4628513Z     should display staging warning
2024-03-04T19:17:22.9402945Z     should not allow the user to change staging credentials
2024-03-04T19:17:22.9403961Z   when not in staging
2024-03-04T19:17:24.0303962Z     should change an user name
2024-03-04T19:17:24.8146438Z     should fail when the email is invalid
2024-03-04T19:17:25.7504827Z     should change the email
2024-03-04T19:17:25.7505649Z 
2024-03-04T19:17:25.7505961Z Profiles
2024-03-04T19:17:25.7507457Z   POST #update
2024-03-04T19:17:25.7508318Z     when updating an existing value to a blank value
2024-03-04T19:17:25.8030733Z       should have blank values
2024-03-04T19:17:25.8500121Z       update partner
2024-03-04T19:17:25.8500845Z     successful save
2024-03-04T19:17:25.8972069Z       update partner
2024-03-04T19:17:25.9415451Z       redirects to #show
2024-03-04T19:17:25.9416197Z   GET #edit
2024-03-04T19:17:26.0510195Z     returns http success
2024-03-04T19:17:26.0513101Z 
2024-03-04T19:17:26.0513390Z Dashboard
2024-03-04T19:17:26.0515349Z   With an existing essentials bank
2024-03-04T19:17:26.0516387Z     Donations
2024-03-04T19:17:27.0258183Z       has a link to create a new donation
2024-03-04T19:17:27.0259558Z       given 1 Donation on 2024-03-03 (only if a valid date), 1 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:27.0260662Z         filtering to 'Today'
2024-03-04T19:17:28.6680200Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T19:17:28.6681971Z       given 1 Donation on 2024-02-26 (only if a valid date), 2 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:28.6682992Z         filtering to 'Last 7 Days'
2024-03-04T19:17:30.1531037Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:17:30.1532859Z       given 1 Donation on 2024-02-29 (only if a valid date), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:17:30.1534063Z         filtering to 'This Month'
2024-03-04T19:17:31.5996770Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T19:17:31.5998597Z       given 1 Donation on 2023-12-31 (only if a valid date), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:17:31.6000268Z         filtering to 'This Year'
2024-03-04T19:17:33.0197120Z           shows the correct total and 1 Recent Donation link(s)
2024-03-04T19:17:33.0198976Z       given 1 Donation on 2024-01-31 (only if a valid date), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:17:33.0200777Z         filtering to 'Last Month'
2024-03-04T19:17:34.5007737Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:17:34.5009339Z       given 1 Donation on 2022-03-03 (only if a valid date), 4 during 2022-03-04..2024-01-06, and 1 on 2024-01-07
2024-03-04T19:17:34.5010734Z         filtering to '' (March 4, 2022 - January 6, 2024)
2024-03-04T19:17:36.0919041Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:17:36.0921224Z       given 1 Donation on 2024-03-02 (only if a valid date), 2 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:17:36.0922862Z         filtering to 'Yesterday'
2024-03-04T19:17:37.6066151Z           shows the correct total and 2 Recent Donation link(s)
2024-03-04T19:17:37.6068081Z       given 1 Donation on 2024-02-03 (only if a valid date), 3 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:37.6069013Z         filtering to 'Last 30 Days'
2024-03-04T19:17:39.1404765Z           shows the correct total and 3 Recent Donation link(s)
2024-03-04T19:17:39.1405846Z     Distributions
2024-03-04T19:17:40.0979386Z       has a link to create a new distribution
2024-03-04T19:17:40.0981205Z       given 1 Distribution on 2024-03-03  (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:40.0986168Z         filtering to 'Today'
2024-03-04T19:17:43.5782812Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:17:43.5784741Z       given 1 Distribution on 2024-03-02  (unless 'All Time'), 2 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:17:43.5785964Z         filtering to 'Yesterday'
2024-03-04T19:17:45.0344566Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-04T19:17:45.0346396Z       given 1 Distribution on 2022-03-03  (unless 'All Time'), 1 during 2022-03-04..2023-10-02, and 1 on 2023-10-03
2024-03-04T19:17:45.0347442Z         filtering to '' (March 4, 2022 - October 2, 2023)
2024-03-04T19:17:46.4748288Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T19:17:46.4750220Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:46.4751666Z         filtering to 'All Time'
2024-03-04T19:17:49.8897180Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:17:49.8898914Z       given 1 Distribution on 2024-02-03  (unless 'All Time'), 0 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:49.8900012Z         filtering to 'Last 30 Days'
2024-03-04T19:17:53.3347723Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-04T19:17:53.3350026Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:17:53.3351373Z         filtering to 'Last Month'
2024-03-04T19:17:54.8100968Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-04T19:17:54.8102750Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:17:54.8104148Z         filtering to 'This Month'
2024-03-04T19:17:56.3443624Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:17:56.3445475Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 4 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:17:56.3446948Z         filtering to 'Last 7 Days'
2024-03-04T19:17:57.8989458Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:17:57.8991029Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:17:57.8991919Z         filtering to 'This Year'
2024-03-04T19:17:59.4390536Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-04T19:17:59.4391379Z     Product Drives
2024-03-04T19:18:00.0566694Z       has a widget for product drive summary data
2024-03-04T19:18:00.0568137Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:18:00.0569776Z         filtering to 'This Year'
2024-03-04T19:18:03.4184131Z           shows 0 Recent Donation link(s)
2024-03-04T19:18:04.7955693Z           shows the correct total money raised
2024-03-04T19:18:06.1394567Z           shows the correct total donations
2024-03-04T19:18:06.1396309Z       given 1 Product Drive Donation on 2022-03-03 (unless 'All Time'), 4 during 2022-03-04..2024-01-03, and 1 on 2024-01-04
2024-03-04T19:18:06.1397360Z         filtering to '' (March 4, 2022 - January 3, 2024)
2024-03-04T19:18:07.7270468Z           shows the correct total donations
2024-03-04T19:18:09.3160228Z           shows 3 Recent Donation link(s)
2024-03-04T19:18:10.8613955Z           shows the correct total money raised
2024-03-04T19:18:10.8615701Z       given 1 Product Drive Donation on 2024-03-02 (unless 'All Time'), 0 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:18:10.8616979Z         filtering to 'Yesterday'
2024-03-04T19:18:12.2819714Z           shows the correct total money raised
2024-03-04T19:18:15.6715743Z           shows 0 Recent Donation link(s)
2024-03-04T19:18:17.0467030Z           shows the correct total donations
2024-03-04T19:18:17.0468924Z       given 1 Product Drive Donation on 2024-03-03 (unless 'All Time'), 4 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:17.0470583Z         filtering to 'Today'
2024-03-04T19:18:18.5884128Z           shows the correct total donations
2024-03-04T19:18:20.1297554Z           shows the correct total money raised
2024-03-04T19:18:21.6888193Z           shows 3 Recent Donation link(s)
2024-03-04T19:18:21.6889978Z       given 1 Product Drive Donation on 2024-02-03 (unless 'All Time'), 2 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:21.6891493Z         filtering to 'Last 30 Days'
2024-03-04T19:18:23.1662207Z           shows the correct total donations
2024-03-04T19:18:24.6315987Z           shows the correct total money raised
2024-03-04T19:18:26.1258773Z           shows 2 Recent Donation link(s)
2024-03-04T19:18:26.1260525Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 4 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:26.1261667Z         filtering to 'Last 7 Days'
2024-03-04T19:18:27.8113353Z           shows the correct total money raised
2024-03-04T19:18:29.3495064Z           shows the correct total donations
2024-03-04T19:18:30.9176525Z           shows 3 Recent Donation link(s)
2024-03-04T19:18:30.9178454Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:18:30.9179882Z         filtering to 'This Month'
2024-03-04T19:18:32.3766723Z           shows the correct total donations
2024-03-04T19:18:33.8153709Z           shows the correct total money raised
2024-03-04T19:18:35.2483262Z           shows 1 Recent Donation link(s)
2024-03-04T19:18:35.2484424Z       Product drive behaviour with Mixed Donation types
2024-03-04T19:18:35.9789314Z         only counts product drive money raised
2024-03-04T19:18:36.7059847Z         only shows product drive donations as product drive donations
2024-03-04T19:18:37.4270919Z         only counts product drive donations for product drive
2024-03-04T19:18:37.4273662Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:18:37.4275013Z         filtering to 'Last Month'
2024-03-04T19:18:38.8360796Z           shows the correct total money raised
2024-03-04T19:18:40.2773764Z           shows the correct total donations
2024-03-04T19:18:41.7457371Z           shows 1 Recent Donation link(s)
2024-03-04T19:18:41.7458228Z     Inventory Totals
2024-03-04T19:18:41.7459469Z       Summary
2024-03-04T19:18:42.5034665Z         displays the on-hand totals
2024-03-04T19:18:42.5035542Z         when constrained to date range
2024-03-04T19:18:43.7839437Z           does not change
2024-03-04T19:18:43.7840587Z     Signage
2024-03-04T19:18:46.7467082Z       shows their organization name unless they have a logo set
2024-03-04T19:18:46.7467990Z     Manufacturer Donations
2024-03-04T19:18:47.3894796Z       has a link to create a new donation
2024-03-04T19:18:47.3896578Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:18:47.3898148Z         filtering to 'Last Month'
2024-03-04T19:18:48.8579931Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:18:48.8584141Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:48.8585502Z         filtering to 'All Time'
2024-03-04T19:18:50.4555524Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-04T19:18:50.4557723Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:18:50.4562562Z         filtering to 'This Month'
2024-03-04T19:18:51.9305481Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-04T19:18:51.9307441Z       given 1 Manufacturer donating on 2024-03-02  (unless 'All Time'), 6 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:18:51.9309154Z         filtering to 'Yesterday'
2024-03-04T19:18:54.0518400Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T19:18:54.0520812Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 7 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:54.0522182Z         filtering to 'Last 7 Days'
2024-03-04T19:18:56.2434155Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-03-04T19:18:56.2436082Z       given 1 Manufacturer donating on 2024-03-03  (unless 'All Time'), 5 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:18:56.2437551Z         filtering to 'Today'
2024-03-04T19:18:58.2313393Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-03-04T19:18:58.2315623Z       given 1 Manufacturer donating on 2022-03-03  (unless 'All Time'), 9 during 2022-03-04..2024-01-21, and 1 on 2024-01-22
2024-03-04T19:18:58.2317198Z         filtering to '' (March 4, 2022 - January 21, 2024)
2024-03-04T19:19:00.7261407Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-04T19:19:00.7263151Z       given 1 Manufacturer donating on 2024-02-03  (unless 'All Time'), 3 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:00.7264125Z         filtering to 'Last 30 Days'
2024-03-04T19:19:02.4204696Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-04T19:19:02.4206713Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:19:02.4208039Z         filtering to 'This Year'
2024-03-04T19:19:04.3060415Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-04T19:19:04.3061342Z     Purchases
2024-03-04T19:19:05.2352003Z       has a link to create a new purchase
2024-03-04T19:19:05.2353758Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-04T19:19:05.2355760Z         filtering to 'This Month'
2024-03-04T19:19:06.7126444Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:19:06.7128453Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 1 during 2024-02-27..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:06.7129753Z         filtering to 'Last 7 Days'
2024-03-04T19:19:08.1113286Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:19:08.1114658Z       given 1 Purchase on 2024-03-03  (unless 'All Time'), 0 during 2024-03-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:08.1115722Z         filtering to 'Today'
2024-03-04T19:19:11.4438577Z           shows correct 0 Recent Purchase link(s)
2024-03-04T19:19:11.4441203Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-04T19:19:11.4442545Z         filtering to 'Last Month'
2024-03-04T19:19:12.9347195Z           shows correct 3 Recent Purchase link(s)
2024-03-04T19:19:12.9348855Z       given 1 Purchase on 2022-03-03  (unless 'All Time'), 2 during 2022-03-04..2024-01-16, and 1 on 2024-01-17
2024-03-04T19:19:12.9350016Z         filtering to '' (March 4, 2022 - January 16, 2024)
2024-03-04T19:19:14.3821047Z           shows correct 2 Recent Purchase link(s)
2024-03-04T19:19:14.3822813Z       given 1 Purchase on 2024-03-02  (unless 'All Time'), 0 during 2024-03-03..2024-03-03, and 1 on 2024-03-04
2024-03-04T19:19:14.3824137Z         filtering to 'Yesterday'
2024-03-04T19:19:17.7256003Z           shows correct 0 Recent Purchase link(s)
2024-03-04T19:19:17.7257637Z       given 1 Purchase on 2024-02-03  (unless 'All Time'), 2 during 2024-02-04..2024-03-04, and 1 on 2024-03-05
2024-03-04T19:19:17.7260608Z         filtering to 'Last 30 Days'
2024-03-04T19:19:19.1468642Z           shows correct 2 Recent Purchase link(s)
2024-03-04T19:19:19.1470255Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-04T19:19:19.1471255Z         filtering to 'This Year'
2024-03-04T19:19:20.5764892Z           shows correct 1 Recent Purchase link(s)
2024-03-04T19:19:20.5766599Z   With a new essentials bank
2024-03-04T19:19:48.5801043Z     displays the getting started guide until the steps are completed
2024-03-04T19:19:48.5803075Z 
2024-03-04T19:19:48.5803489Z Kit management
2024-03-04T19:19:50.2046156Z   can allocate and deallocate quantity per storage location from kit index
2024-03-04T19:19:50.8103595Z   should not display inactive storage locations under allocations
2024-03-04T19:19:51.7510071Z   can create a new kit as a user with the proper quantity
2024-03-04T19:19:51.7511269Z   when there is no kit quantity
2024-03-04T19:19:52.9576831Z     will not change quantity amounts when deallocating
2024-03-04T19:19:52.9578431Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-04T19:19:54.1269936Z     will not change quantity amounts when allocating
2024-03-04T19:19:54.1270658Z 
2024-03-04T19:19:54.1271085Z /partners/children
2024-03-04T19:19:54.1272598Z   GET #index
2024-03-04T19:19:54.2328813Z     should render without any issues
2024-03-04T19:19:54.2878009Z     should export CSV
2024-03-04T19:19:54.2878899Z 
2024-03-04T19:19:54.2879522Z Vendor
2024-03-04T19:19:54.2883876Z   when editing an existing vendor
2024-03-04T19:19:55.1008179Z     can update the contact info for a vendor as a user
2024-03-04T19:19:55.9103311Z     does not update a vendor with empty attributes
2024-03-04T19:19:55.9104306Z   When a user views the index page
2024-03-04T19:19:56.4093711Z     should have the vendor names in alphabetical order
2024-03-04T19:19:56.4095065Z   When vendor have purchases associated with them already
2024-03-04T19:19:57.0590207Z     can have existing vendors show in the #index with some summary stats
2024-03-04T19:19:57.6967431Z     can have a single vendor show semi-detailed stats about purchases
2024-03-04T19:19:57.6968202Z   when creating a new vendor
2024-03-04T19:19:58.5153022Z     can create a new vendor instance as a user
2024-03-04T19:19:59.2545362Z     cannot add a new vendor instance with empty attributes
2024-03-04T19:19:59.2548276Z 
2024-03-04T19:19:59.2548603Z Donations
2024-03-04T19:19:59.2549673Z   while signed in
2024-03-04T19:19:59.2551340Z     when no audit has been performed
2024-03-04T19:19:59.3690324Z       doesn't show a warning
2024-03-04T19:19:59.3691155Z     GET #edit
2024-03-04T19:19:59.3692208Z       when an finalized audit has been performed on the donated items
2024-03-04T19:19:59.5033431Z         shows a warning
2024-03-04T19:19:59.5035146Z     when an non-finalized audit has been performed on the donated items
2024-03-04T19:19:59.6510039Z       does not shows a warning
2024-03-04T19:19:59.6511622Z     GET #index
2024-03-04T19:19:59.6512030Z       csv
2024-03-04T19:19:59.6823734Z         is expected to be successful
2024-03-04T19:19:59.6824487Z       html
2024-03-04T19:19:59.7272110Z         is expected to be successful
2024-03-04T19:19:59.7695410Z         should have the columns source and details
2024-03-04T19:19:59.7696667Z         when given a misc donation
2024-03-04T19:19:59.8186226Z           should display Misc Donation and a truncated comment
2024-03-04T19:19:59.8186955Z         when given a product drive
2024-03-04T19:19:59.8692248Z           should display Product Drive and the name of the drive
2024-03-04T19:19:59.8693015Z         when given a manufacturer
2024-03-04T19:19:59.9195036Z           should display Manufacturer and the manufacturer name
2024-03-04T19:19:59.9196323Z         when given a donation site
2024-03-04T19:19:59.9726991Z           should display Donation Site and the name of the site
2024-03-04T19:19:59.9728599Z 
2024-03-04T19:19:59.9729223Z StorageLocations
2024-03-04T19:19:59.9730515Z   While not signed in
2024-03-04T19:19:59.9801850Z     redirects the user to the sign-in page for CRUD actions
2024-03-04T19:19:59.9802979Z   While signed in
2024-03-04T19:19:59.9804149Z     Looking at a different organization
2024-03-04T19:20:00.1708231Z       redirects the user to the sign-in page for CRUD actions
2024-03-04T19:20:00.1709205Z     POST #import_csv
2024-03-04T19:20:00.1709839Z       csv file with wrong headers
2024-03-04T19:20:00.1880563Z         redirects
2024-03-04T19:20:00.2013947Z         presents a flash error message
2024-03-04T19:20:00.2014750Z       with a csv file
2024-03-04T19:20:00.2186901Z         redirects
2024-03-04T19:20:00.2353663Z         presents a flash notice message
2024-03-04T19:20:00.2408353Z         invokes .import_csv
2024-03-04T19:20:00.2409374Z       without a csv file
2024-03-04T19:20:00.2532607Z         presents a flash error message
2024-03-04T19:20:00.2648232Z         redirects to :index
2024-03-04T19:20:00.2648958Z     GET #edit
2024-03-04T19:20:00.4312805Z       returns http success
2024-03-04T19:20:00.4313886Z     PUT #deactivate
2024-03-04T19:20:00.4550103Z       discards
2024-03-04T19:20:00.4550791Z       with inventory
2024-03-04T19:20:00.5051081Z         does not discard
2024-03-04T19:20:00.5051831Z     GET #index
2024-03-04T19:20:00.5052378Z       csv
2024-03-04T19:20:00.6113094Z         includes headers followed by alphabetized item names
2024-03-04T19:20:00.6314237Z         succeeds
2024-03-04T19:20:00.6315166Z       html
2024-03-04T19:20:00.6684220Z         succeeds
2024-03-04T19:20:00.6685002Z         with inactive locations
2024-03-04T19:20:00.7059970Z           does not includes the inactive location
2024-03-04T19:20:00.7060696Z           with include_inactive_locations
2024-03-04T19:20:00.7452509Z             includes the inactive location
2024-03-04T19:20:00.7453342Z     PUT #reactivate
2024-03-04T19:20:00.7654675Z       undiscards
2024-03-04T19:20:00.7655458Z     GET #inventory
2024-03-04T19:20:00.7656048Z       without any overrides
2024-03-04T19:20:00.8203492Z         returns a collection that only includes items at the storage location
2024-03-04T19:20:00.8693886Z       when also including omitted items
2024-03-04T19:20:00.8694696Z         contains a collection of ducktyped entries that respond the same
2024-03-04T19:20:00.9197003Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-04T19:20:00.9198064Z       when also including inactive items
2024-03-04T19:20:00.9874064Z         returns a collection that also includes items that have been deactivated
2024-03-04T19:20:00.9875582Z     GET #new
2024-03-04T19:20:01.0195398Z       returns http success
2024-03-04T19:20:01.0196526Z     GET #show
2024-03-04T19:20:01.0197108Z       csv
2024-03-04T19:20:01.0716401Z         should be successful
2024-03-04T19:20:01.0717420Z       html
2024-03-04T19:20:01.1399997Z         should return a correct response
2024-03-04T19:20:01.1400921Z         with version date set
2024-03-04T19:20:01.1402208Z           with a version found
2024-03-04T19:20:01.2322924Z             should show the version specified
2024-03-04T19:20:01.2324093Z           with no version found
2024-03-04T19:20:01.3056505Z             should show N/A
2024-03-04T19:20:01.3057238Z     GET #destroy
2024-03-04T19:20:01.3357191Z       redirects to #index
2024-03-04T19:20:01.3357794Z 
2024-03-04T19:20:01.3358060Z Managing requests
2024-03-04T19:20:01.3359008Z   creating a new quantity request
2024-03-04T19:20:01.3360581Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:20:01.3362135Z       WHEN they create a request with blank lines
2024-03-04T19:20:02.7756456Z         should be created without any issue
2024-03-04T19:20:02.7757290Z       WHEN they create a request with only a comment
2024-03-04T19:20:03.7249038Z         should be created without any issue
2024-03-04T19:20:03.7249792Z       Select Input Tests
2024-03-04T19:20:03.7250441Z         WHEN they reach the page
2024-03-04T19:20:04.6076982Z           should show the proper items in the select box
2024-03-04T19:20:04.6077796Z           WHEN they create a request improperly
2024-03-04T19:20:05.9252535Z             should show the proper items in the select box
2024-03-04T19:20:05.9253444Z       WHEN they create a request properly
2024-03-04T19:20:05.9255464Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:20:08.2017091Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-04T19:20:08.2018535Z       WHEN they create a request completely empty request
2024-03-04T19:20:09.1037708Z         should show an error message with the instructions
2024-03-04T19:20:09.1038660Z   creating a # individuals request
2024-03-04T19:20:09.1040350Z     GIVEN a partner user is permitted to make a request
2024-03-04T19:20:09.1042126Z       WHEN they create a request completely empty request
2024-03-04T19:20:10.0155274Z         should show an error message with the instructions
2024-03-04T19:20:10.0156248Z       Select Input Tests
2024-03-04T19:20:10.0157074Z         WHEN they reach the page
2024-03-04T19:20:10.8999000Z           should show the proper items in the select box
2024-03-04T19:20:10.9000067Z           WHEN they create a request improperly
2024-03-04T19:20:12.2457604Z             should show the proper items in the select box
2024-03-04T19:20:12.2458642Z       WHEN they create a request properly
2024-03-04T19:20:12.2460423Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-04T19:20:14.3547301Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-04T19:20:14.3548614Z       WHEN they create a request improperly by not inputting anything
2024-03-04T19:20:15.2795591Z         should show an error message with the instructions
2024-03-04T19:20:15.2796796Z       WHEN they create a request with blank lines
2024-03-04T19:20:16.6741836Z         should be created without any issue
2024-03-04T19:20:16.6743018Z       WHEN they create a request with only a comment
2024-03-04T19:20:17.6353828Z         should be created without any issue
2024-03-04T19:20:17.6355696Z 
2024-03-04T19:20:17.6356018Z Adjustments
2024-03-04T19:20:17.6357202Z   while signed in
2024-03-04T19:20:17.6358618Z     GET #show
2024-03-04T19:20:17.6843896Z       is expected to be successful
2024-03-04T19:20:17.6846296Z     GET #index
2024-03-04T19:20:17.6847333Z       csv
2024-03-04T19:20:17.7105162Z         is expected to be successful
2024-03-04T19:20:17.7105992Z       html
2024-03-04T19:20:17.7559481Z         is successful
2024-03-04T19:20:17.7560472Z         when filtering by date
2024-03-04T19:20:17.7560988Z           when date parameters are supplied
2024-03-04T19:20:17.8130233Z             only returns the correct objects
2024-03-04T19:20:17.8131128Z           when date parameters are not supplied
2024-03-04T19:20:17.8693325Z             returns all objects
2024-03-04T19:20:17.8694530Z     GET #new
2024-03-04T19:20:17.9127530Z       is successful
2024-03-04T19:20:17.9128202Z     POST #create
2024-03-04T19:20:17.9129044Z       with valid params
2024-03-04T19:20:17.9463720Z         assigns a user id from the current user
2024-03-04T19:20:17.9764245Z         redirects to the #show after created adjustment
2024-03-04T19:20:18.0067821Z         assigns a newly created adjustment as @adjustment
2024-03-04T19:20:18.0389359Z         creates a new Adjustment
2024-03-04T19:20:18.0390449Z       with invalid params
2024-03-04T19:20:18.0782576Z         re-renders the 'new' template
2024-03-04T19:20:18.1162242Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-04T19:20:18.1163263Z 
2024-03-04T19:20:18.1163527Z /partners/profiles
2024-03-04T19:20:18.1165021Z   GET #edit
2024-03-04T19:20:18.2211229Z     has "Yes" radio button value when value is true
2024-03-04T19:20:18.3255372Z     does not have default radio button value when value is nil
2024-03-04T19:20:18.4190750Z     has "No" radio button value when value is false
2024-03-04T19:20:18.5112948Z     displays the partner
2024-03-04T19:20:18.5113511Z   GET #show
2024-03-04T19:20:18.5745769Z     shows correct values for yes/no buttons
2024-03-04T19:20:18.6292110Z     displays the partner
2024-03-04T19:20:18.6292748Z   PUT #update
2024-03-04T19:20:18.6851415Z     updates the partner and profile
2024-03-04T19:20:18.6851991Z     with no social media
2024-03-04T19:20:18.7779076Z       shows an error
2024-03-04T19:20:18.7780002Z     when updating an existing value to a blank value
2024-03-04T19:20:18.8396273Z       does not update other partner profile attributes to blank
2024-03-04T19:20:18.8951084Z       updates the partner profile attribute to a blank value
2024-03-04T19:20:18.9503213Z       does store N/A in the database
2024-03-04T19:20:18.9503902Z 
2024-03-04T19:20:18.9504132Z Organization management
2024-03-04T19:20:18.9506108Z   while signed in as an organization admin
2024-03-04T19:20:19.9435040Z     can re-activate a user in the organization
2024-03-04T19:20:20.4545708Z     can re-invite a user to an organization after 7 days
2024-03-04T19:20:21.4168673Z     can add a new user to an organization
2024-03-04T19:20:22.4281377Z     can deactivate a user in the organization
2024-03-04T19:20:23.0214793Z     can see 'Make user' button for admins
2024-03-04T19:20:23.0215850Z     Viewing the organization
2024-03-04T19:20:23.5915209Z       can view organization details
2024-03-04T19:20:23.5916192Z     Editing the organization
2024-03-04T19:20:24.5799739Z       can select if the org distributes essentials monthly
2024-03-04T19:20:25.4343699Z       can set a default storage location on the organization
2024-03-04T19:20:26.6224141Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-04T19:20:27.6131416Z       can enable if the org uses single step invite and approve partner process
2024-03-04T19:20:28.6023184Z       can select if the org repackages essentials
2024-03-04T19:20:29.5952026Z       can select if the org shows year-to-date values on the distribution printout
2024-03-04T19:20:30.5020947Z       can set a reminder and a deadline day
2024-03-04T19:20:31.3618742Z       can set the NDBN Member ID
2024-03-04T19:20:32.3560536Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-04T19:20:33.8506863Z       can select and deselect Required Partner Fields
2024-03-04T19:20:33.8507821Z   while signed in as a normal user
2024-03-04T19:20:34.3409147Z     can see summary details about the organization as a user
2024-03-04T19:20:34.8189623Z     cannot see 'Make user' button for admins
2024-03-04T19:20:34.8192178Z 
2024-03-04T19:20:34.8192752Z Admin Organization Management
2024-03-04T19:20:34.8194456Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-04T19:20:36.8487922Z     creates a new organization
2024-03-04T19:20:36.8488855Z   While signed in as an Administrative User (super admin)
2024-03-04T19:20:38.1795600Z     can view organization details
2024-03-04T19:20:39.2631131Z     filters by organizations by name in organizations index page
2024-03-04T19:20:41.2241809Z     creates a new organization
2024-03-04T19:20:41.2242635Z 
2024-03-04T19:20:41.2243106Z Admin::Partners
2024-03-04T19:20:41.2244384Z   When logged in as a super admin
2024-03-04T19:20:41.2245858Z     GET #show
2024-03-04T19:20:41.2791370Z       returns http success
2024-03-04T19:20:41.2792161Z     GET #index
2024-03-04T19:20:41.3125556Z       returns http success
2024-03-04T19:20:41.3126353Z     PUT #update
2024-03-04T19:20:41.3127226Z       successful save
2024-03-04T19:20:41.3669346Z         updates partner
2024-03-04T19:20:41.4065794Z         redirects
2024-03-04T19:20:41.4066864Z       unsuccessful save due to empty params
2024-03-04T19:20:41.4673918Z         renders #edit template with error message
2024-03-04T19:20:41.4675196Z     GET #edit
2024-03-04T19:20:41.5259175Z       returns http success
2024-03-04T19:20:41.5260437Z 
2024-03-04T19:20:41.5260906Z Purchases
2024-03-04T19:20:41.5262536Z   while signed in as an organization admin
2024-03-04T19:20:42.4398640Z     allows deletion of a purchase
2024-03-04T19:20:42.4399906Z   while signed in as a normal user
2024-03-04T19:20:42.4400627Z     When visiting the index page
2024-03-04T19:20:42.4401690Z       When filtering on the index page
2024-03-04T19:20:43.2778176Z         User can filter the #index by vendor
2024-03-04T19:20:44.0976704Z         User can filter the #index by storage location
2024-03-04T19:20:44.0977454Z         behaves like Date Range Picker
2024-03-04T19:20:44.0978335Z           when choosing 'All Time'
2024-03-04T19:20:45.0815567Z             shows all the records
2024-03-04T19:20:45.0816520Z           when choosing 'Last Month'
2024-03-04T19:20:46.0442081Z             shows only 2 of the records
2024-03-04T19:20:46.0443192Z           when choosing a date range that only includes the previous week
2024-03-04T19:20:47.0078831Z             shows only 1 record
2024-03-04T19:20:47.0080170Z       In the middle of the year
2024-03-04T19:20:47.8107251Z         User can click to the new purchase form
2024-03-04T19:20:48.5668783Z         User sees purchased date column
2024-03-04T19:20:49.3306307Z         User sees total purchases value
2024-03-04T19:20:49.3307092Z     When creating a new purchase
2024-03-04T19:20:49.8337925Z       should not display inactive storage locations in dropdown
2024-03-04T19:20:49.8338459Z       via manual entry
2024-03-04T19:20:50.7513103Z         User can create a purchase using dollars decimal amount
2024-03-04T19:20:51.8946230Z         User can create a purchase IN THE PAST
2024-03-04T19:20:52.9112659Z         Does not include inactive items in the line item fields
2024-03-04T19:20:53.9519727Z         User can create vendor from purchase
2024-03-04T19:20:55.1593611Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-04T19:20:55.1594626Z         when creating a purchase incorrectly
2024-03-04T19:20:55.9916438Z           should display failure with error messages
2024-03-04T19:20:56.9866342Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-04T19:20:56.9867350Z       Editing purchase
2024-03-04T19:20:57.4821995Z         A user can see purchased_from value
2024-03-04T19:20:58.1321261Z         A user can view another organizations purchase
2024-03-04T19:20:58.1321997Z       via barcode entry
2024-03-04T19:20:58.8823926Z         a user can add items via scanning them in by barcode
2024-03-04T19:20:59.8032312Z         User scan same barcode 2 times
2024-03-04T19:21:01.0413532Z         a user can add items that do not yet have a barcode
2024-03-04T19:21:01.0414346Z     When visiting an existing purchase
2024-03-04T19:21:01.5032398Z       does not allow deletion of a purchase
2024-03-04T19:21:01.5327478Z W, [2024-03-04T11:21:01.532498 #2454]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-04T19:21:01.5329959Z W, [2024-03-04T11:21:01.532553 #2454]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-04T19:21:01.5347352Z W, [2024-03-04T11:21:01.532577 #2454]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-04T19:21:01.5350137Z W, [2024-03-04T11:21:01.532647 #2454]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-04T19:21:01.5351285Z 
2024-03-04T19:21:01.5351662Z Finished in 3 minutes 43 seconds (files took 8.6 seconds to load)
2024-03-04T19:21:01.5352403Z 233 examples, 0 failures
2024-03-04T19:21:01.5352699Z 
2024-03-04T19:21:01.5352863Z Randomized with seed 35045
2024-03-04T19:21:01.5358596Z 
2024-03-04T19:21:02.0414724Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3877 / 6475 LOC (59.88%) covered.
2024-03-04T19:21:02.5596091Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10762 LOC (0.35%) covered.
