2024-03-01T20:26:59.9911336Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-01T20:26:59.9912251Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-01T20:26:59.9940155Z shell: /usr/bin/bash -e {0}
2024-03-01T20:26:59.9940676Z env:
2024-03-01T20:26:59.9940996Z   POSTGRES_HOST: localhost
2024-03-01T20:26:59.9941397Z   DATABASE_HOST: localhost
2024-03-01T20:26:59.9941833Z   PG_USERNAME: postgres
2024-03-01T20:26:59.9942223Z   PG_PASSWORD: password
2024-03-01T20:26:59.9942568Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-01T20:26:59.9943040Z   POSTGRES_PORT: 5432
2024-03-01T20:26:59.9943407Z   PGHOST: localhost
2024-03-01T20:26:59.9943812Z   PGUSER: postgres
2024-03-01T20:26:59.9944158Z   RAILS_ENV: test
2024-03-01T20:26:59.9944966Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-01T20:26:59.9945519Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-01T20:26:59.9945942Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-01T20:26:59.9946350Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-01T20:26:59.9947009Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-01T20:26:59.9947663Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-01T20:26:59.9948375Z   EVENTS_READ: true
2024-03-01T20:26:59.9948732Z ##[endgroup]
2024-03-01T20:27:09.6533530Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/item_spec.rb" "spec/services/add_role_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/manufacturer_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/models/event_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/models/partners/profile_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/users_role_spec.rb" "spec/models/item_category_spec.rb" "spec/models/organization_stats_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/models/base_item_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/role_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb"
2024-03-01T20:27:18.2979975Z 
2024-03-01T20:27:18.2980868Z Randomized with seed 31122
2024-03-01T20:27:19.0995187Z 
2024-03-01T20:27:19.0996073Z ProductDriveParticipant
2024-03-01T20:27:19.0997277Z   Validations
2024-03-01T20:27:19.1260439Z     is invalid unless it has either a phone number or an email
2024-03-01T20:27:19.1299914Z     is invalid without an organization
2024-03-01T20:27:19.1300997Z   behaves like provideable
2024-03-01T20:27:19.1301751Z     import_csv
2024-03-01T20:27:19.3085417Z       imports from a csv file
2024-03-01T20:27:19.3086279Z     Validations
2024-03-01T20:27:19.3151160Z       is invalid unless it has either a contact name or a business name
2024-03-01T20:27:19.3186989Z       is invalid without an organization
2024-03-01T20:27:19.3187727Z     geocode
2024-03-01T20:27:19.3244577Z       adds coordinates to the database
2024-03-01T20:27:19.3245361Z   Methods
2024-03-01T20:27:19.3246190Z     donation_source_view
2024-03-01T20:27:19.3247338Z       no contact name
2024-03-01T20:27:19.3303779Z         is expected to be nil
2024-03-01T20:27:19.3304541Z       contact name present
2024-03-01T20:27:19.3358785Z         is expected to eq "Contact Name (participant)"
2024-03-01T20:27:19.3359716Z     volume_by_product_drive
2024-03-01T20:27:19.5567477Z       retrieves the amount of product that has been donated through specific product drive
2024-03-01T20:27:19.5569044Z     volume
2024-03-01T20:27:19.6257093Z       retrieves the amount of product that has been donated by participant
2024-03-01T20:27:19.6258750Z   versioning
2024-03-01T20:27:19.6294954Z     is expected to be versioned
2024-03-01T20:27:19.6295675Z 
2024-03-01T20:27:19.6296417Z Partners::RequestCreateService
2024-03-01T20:27:19.6297683Z   #call
2024-03-01T20:27:19.6298692Z     when the arguments are correct
2024-03-01T20:27:19.6866677Z       should create a Request record
2024-03-01T20:27:19.7257822Z       should have no errors
2024-03-01T20:27:19.7634201Z       should notify the Partner via email
2024-03-01T20:27:19.7636230Z       but a unexpected error occured during the save
2024-03-01T20:27:19.7637275Z         for the Request record
2024-03-01T20:27:19.7999874Z           should have an error with the raised error
2024-03-01T20:27:19.8346825Z           should NOT notify the Partner via email
2024-03-01T20:27:19.8689500Z           should NOT create a Request record
2024-03-01T20:27:19.8690548Z     when the arguments are incorrect
2024-03-01T20:27:19.8691870Z       because a unrecogonized item_id was provided
2024-03-01T20:27:19.9008850Z         should return the Request object with an error
2024-03-01T20:27:19.9010223Z       because no item_requests_attributes and comments were defined
2024-03-01T20:27:19.9275139Z         should return the Request object with an error
2024-03-01T20:27:19.9275762Z 
2024-03-01T20:27:19.9276342Z EventDiffer
2024-03-01T20:27:20.1407748Z   should return a full diff (FAILED - 1)
2024-03-01T20:27:20.1408401Z 
2024-03-01T20:27:20.1413316Z ProductDrive
2024-03-01T20:27:20.6655286Z   calculates and returns all donated organization item quantities by category and date
2024-03-01T20:27:20.8152563Z   calculates in-kind value
2024-03-01T20:27:21.0473788Z   calculates donation quantity by date
2024-03-01T20:27:21.2770822Z   calculates and returns all donated organization item quantities by name and date
2024-03-01T20:27:21.4279525Z   calculates donation quantity
2024-03-01T20:27:21.4280180Z   scopes
2024-03-01T20:27:21.4281008Z     .by_item_category_id
2024-03-01T20:27:21.7627849Z       returns the product_drive with name some_name
2024-03-01T20:27:22.0952285Z       does not return other_name
2024-03-01T20:27:22.0953169Z     .within_date_range
2024-03-01T20:27:22.2479503Z       returns the product drive 1
2024-03-01T20:27:22.3981475Z       does not include product drive 2
2024-03-01T20:27:22.3982369Z     .by_name
2024-03-01T20:27:22.5485431Z       does not return other_name
2024-03-01T20:27:22.6977523Z       returns the product_drive with name some_name
2024-03-01T20:27:22.6978781Z   validations
2024-03-01T20:27:22.8508047Z     is expected not to be valid
2024-03-01T20:27:22.9952026Z     is expected not to be valid
2024-03-01T20:27:23.1396052Z     is expected not to be valid
2024-03-01T20:27:23.1396911Z   distinct_items
2024-03-01T20:27:23.4959387Z     counts the distinct items correctly in overlapping donations
2024-03-01T20:27:23.8597488Z     counts the items correctly for 1 donation with multiple items
2024-03-01T20:27:24.2190022Z     counts the distinct items correctly by given category
2024-03-01T20:27:24.5748929Z     doesn't double_count the items if there are two donations for the same item
2024-03-01T20:27:24.9259234Z     counts the distinct items correctly by given date
2024-03-01T20:27:24.9260207Z   .search_date_range
2024-03-01T20:27:25.0714481Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-01T20:27:25.0715616Z   donation_source_view
2024-03-01T20:27:25.2178974Z     returns formatted text
2024-03-01T20:27:25.2179841Z   associations
2024-03-01T20:27:25.3100751Z     has_many donations
2024-03-01T20:27:25.4005941Z     has_many product_drive_participants through donations
2024-03-01T20:27:25.4006781Z   versioning
2024-03-01T20:27:25.5497983Z     is expected to be versioned
2024-03-01T20:27:25.5498674Z 
2024-03-01T20:27:25.5499003Z ProfileUpdateService
2024-03-01T20:27:25.5500058Z   #update
2024-03-01T20:27:25.5792296Z     updates the profile with the filtered and prepared params
2024-03-01T20:27:25.5793074Z 
2024-03-01T20:27:25.5793293Z DonationSite
2024-03-01T20:27:25.5794412Z   import_csv
2024-03-01T20:27:25.7628027Z     imports storage locations from a csv file
2024-03-01T20:27:25.7628732Z   geocode
2024-03-01T20:27:25.7690069Z     adds coordinates to the database
2024-03-01T20:27:25.7690644Z   Validations >
2024-03-01T20:27:25.7736192Z     is invalid without a name
2024-03-01T20:27:25.7772374Z     must belong to an organization
2024-03-01T20:27:25.7813693Z     is invalid without an address
2024-03-01T20:27:25.7814600Z   versioning
2024-03-01T20:27:25.7851539Z     is expected to be versioned
2024-03-01T20:27:25.7852222Z 
2024-03-01T20:27:25.7852567Z KitCreateService
2024-03-01T20:27:25.7853512Z   #call
2024-03-01T20:27:25.9840257Z     should return an the instance
2024-03-01T20:27:25.9841648Z     when the parameters are valid
2024-03-01T20:27:26.1830490Z       should create a new Kit
2024-03-01T20:27:26.3763277Z       should create the new Item associated with the Kit
2024-03-01T20:27:26.5710470Z       should create a new Item
2024-03-01T20:27:26.5711410Z       but the ItemCreationService is unsuccesful
2024-03-01T20:27:26.7622312Z         should not create a Item
2024-03-01T20:27:26.9510403Z         should not create the Kit
2024-03-01T20:27:27.1443001Z         should have an error that includes the error
2024-03-01T20:27:27.1443732Z       but an unexpected error gets raised
2024-03-01T20:27:27.3347047Z         should not create a Item
2024-03-01T20:27:27.5231741Z         should have an error that includes the raised error
2024-03-01T20:27:27.7151832Z         should not create the Kit
2024-03-01T20:27:27.7152988Z     when the parameters provided are invalid
2024-03-01T20:27:27.7153776Z       because the kit_params is invalid for kit creation
2024-03-01T20:27:27.8914159Z         should have errors saying why the kit_params are invalid
2024-03-01T20:27:27.8915628Z       because the organization_id does not match any Organization
2024-03-01T20:27:27.8968495Z         should have an error on organization_id saying it does not match any Organization
2024-03-01T20:27:27.8969632Z 
2024-03-01T20:27:27.8969936Z DispersedPastDatesGenerator
2024-03-01T20:27:27.8970964Z   #next
2024-03-01T20:27:27.9022912Z     returns equally dispersed dates between all time ranges
2024-03-01T20:27:27.9023865Z   constants
2024-03-01T20:27:27.9056827Z     has 4 day ranges for generation of past dates
2024-03-01T20:27:27.9057411Z 
2024-03-01T20:27:27.9057912Z AddRoleService
2024-03-01T20:27:27.9058776Z   #call
2024-03-01T20:27:27.9059842Z     when the role does not yet exist
2024-03-01T20:27:28.1175582Z       works with a partner
2024-03-01T20:27:28.3113223Z       should add the role
2024-03-01T20:27:28.5067042Z       works with super admin
2024-03-01T20:27:28.7086711Z       should add the user role when asked to add admin
2024-03-01T20:27:28.7087539Z     when the role already exists
2024-03-01T20:27:28.9040759Z       should raise an error for super admin
2024-03-01T20:27:29.1019519Z       should raise an error
2024-03-01T20:27:29.1020403Z 
2024-03-01T20:27:29.1020655Z AdjustmentCreateService
2024-03-01T20:27:29.1021374Z   call
2024-03-01T20:27:29.2073286Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-01T20:27:29.2868107Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-01T20:27:29.3793645Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-01T20:27:29.4718927Z     handles adjustments to multiple items
2024-03-01T20:27:29.5284716Z     gives an error if we attempt to adjust inventory below 0
2024-03-01T20:27:29.6067996Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-01T20:27:29.6992196Z     decreases stored inventory on a negative adjustment
2024-03-01T20:27:29.7635133Z     does not allow inventory to be adjusted below 0
2024-03-01T20:27:29.8491678Z     increases stored inventory on a positive adjustment
2024-03-01T20:27:29.8493140Z 
2024-03-01T20:27:29.8493975Z UiHelper
2024-03-01T20:27:29.8494931Z   optional_data_text
2024-03-01T20:27:29.8496374Z     when the field provided is blank
2024-03-01T20:27:29.8578587Z       should return the text Not-Provided in gray text
2024-03-01T20:27:29.8579487Z     when the field provided is not blank
2024-03-01T20:27:29.8626314Z       should return the content
2024-03-01T20:27:29.8627044Z 
2024-03-01T20:27:29.8627458Z Partners::UpdateFamily
2024-03-01T20:27:29.8628252Z   #call
2024-03-01T20:27:29.8629201Z     when family has children
2024-03-01T20:27:29.9320573Z       archives the family and its children
2024-03-01T20:27:29.9321622Z     when an error occurs during archiving
2024-03-01T20:27:29.9793376Z       does not archive the family or its children and adds error to the service
2024-03-01T20:27:29.9794315Z 
2024-03-01T20:27:29.9794656Z Reports::AcquisitionReportService
2024-03-01T20:27:29.9795416Z   acquisition report
2024-03-01T20:27:31.0537094Z     should return the proper results on #report
2024-03-01T20:27:31.0537755Z 
2024-03-01T20:27:31.0538311Z Partners::Family
2024-03-01T20:27:31.0539570Z   #guardian_display_name
2024-03-01T20:27:31.0619686Z     should return the guardian's first and last name
2024-03-01T20:27:31.0620708Z   versioning
2024-03-01T20:27:31.0671710Z     is expected to be versioned
2024-03-01T20:27:31.0672444Z   associations
2024-03-01T20:27:31.0709721Z     is expected to have many authorized_family_members dependent => destroy
2024-03-01T20:27:31.0758868Z     is expected to have many children dependent => destroy
2024-03-01T20:27:31.0811752Z     is expected to belong to partner required: true
2024-03-01T20:27:31.0812842Z   #total_children_count
2024-03-01T20:27:31.0863576Z     should return the family's total children count
2024-03-01T20:27:31.0864634Z   #create_authorized
2024-03-01T20:27:31.1171646Z     should include authorized family members
2024-03-01T20:27:31.1172403Z   #search_non_archived
2024-03-01T20:27:31.2078829Z     should return all families if one is passed in
2024-03-01T20:27:31.2999225Z     should return non-archived families if zero is passed in
2024-03-01T20:27:31.3000274Z   validations
2024-03-01T20:27:31.3081520Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-01T20:27:31.3154395Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-01T20:27:31.3227701Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-01T20:27:31.3228643Z 
2024-03-01T20:27:31.3228868Z Role
2024-03-01T20:27:31.3263771Z   is expected to accepts_nested_attributes_for :users
2024-03-01T20:27:31.3264789Z   Validations
2024-03-01T20:27:31.3311470Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-01T20:27:31.3312519Z   versioning
2024-03-01T20:27:31.3346289Z     is expected to be versioned
2024-03-01T20:27:31.3347733Z   Associations
2024-03-01T20:27:31.3384544Z     is expected to belong to resource optional: true
2024-03-01T20:27:31.3444505Z     is expected to have and belong to many users
2024-03-01T20:27:31.3445359Z 
2024-03-01T20:27:31.3445634Z DistributionDestroyService
2024-03-01T20:27:31.3446644Z   #call
2024-03-01T20:27:31.3447675Z     when the distribution_id matches no Distribution
2024-03-01T20:27:31.3486404Z       to not be a success
2024-03-01T20:27:31.3487730Z     when the distribution_id does match a Distribution
2024-03-01T20:27:31.3488611Z       and the destroy! operation fails
2024-03-01T20:27:31.5645310Z         should not delete the Distribution
2024-03-01T20:27:31.7757135Z         should not be successful and have the error message
2024-03-01T20:27:31.7758046Z       and the operations succeed
2024-03-01T20:27:31.9862168Z         should increase the inventory of the storage location
2024-03-01T20:27:32.1950342Z         should be successful
2024-03-01T20:27:32.4047290Z         should destroy the Distribution
2024-03-01T20:27:32.4048081Z       and the increase inventory operations fails
2024-03-01T20:27:32.6176440Z         should not delete the Distribution
2024-03-01T20:27:32.8261587Z         should not be successful and have the error message
2024-03-01T20:27:32.8262651Z 
2024-03-01T20:27:32.8262995Z Partners::AuthorizedFamilyMember
2024-03-01T20:27:32.8264003Z   #display_name
2024-03-01T20:27:32.8539559Z     should return the family member's first and last name
2024-03-01T20:27:32.8540466Z   associations
2024-03-01T20:27:32.8585762Z     is expected to belong to family required: true
2024-03-01T20:27:32.8640523Z     is expected to have many child_item_requests dependent => nullify
2024-03-01T20:27:32.8641742Z   versioning
2024-03-01T20:27:32.8676711Z     is expected to be versioned
2024-03-01T20:27:32.8677350Z 
2024-03-01T20:27:32.8677682Z DistributionCreateService
2024-03-01T20:27:32.8678623Z   call
2024-03-01T20:27:32.9465666Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-01T20:27:33.0154843Z     returns a successful object with Scheduled distribution
2024-03-01T20:27:33.0155865Z     when provided with a request ID
2024-03-01T20:27:33.0949271Z       changes the status of the request
2024-03-01T20:27:33.0950396Z       and the request already has a distribution associated with it
2024-03-01T20:27:33.1683106Z         should not be successful
2024-03-01T20:27:33.1683962Z     partner is deactivated
2024-03-01T20:27:33.2463313Z       does not send an email
2024-03-01T20:27:33.2464206Z     partner has send reminders setting set to true
2024-03-01T20:27:33.4444938Z       Sends a PartnerMailer
2024-03-01T20:27:33.4950670Z     when it fails to save
2024-03-01T20:27:33.4951460Z       preserves the error and is unsuccessful
2024-03-01T20:27:33.4952136Z     partner has send reminders setting set to false
2024-03-01T20:27:33.5703671Z       does not send a PartnerMailer
2024-03-01T20:27:33.5704620Z     when the line item quantity is not positive
2024-03-01T20:27:33.6190531Z       preserves the RecordInvalid error and is unsuccessful
2024-03-01T20:27:33.6192202Z     when there's multiple line items and one has insufficient inventory
2024-03-01T20:27:33.6902409Z       preserves the Insufficiency error and is unsuccessful
2024-03-01T20:27:33.6903411Z     when there's not sufficient inventory
2024-03-01T20:27:33.7732908Z       preserves the Insufficiency error and is unsuccessful
2024-03-01T20:27:33.7734080Z 
2024-03-01T20:27:33.7734543Z StorageLocation
2024-03-01T20:27:33.7736584Z   Methods >
2024-03-01T20:27:33.7738005Z     size
2024-03-01T20:27:33.8208842Z       returns total quantity of all items in this storage location
2024-03-01T20:27:33.8209858Z     item_total
2024-03-01T20:27:33.8721719Z       retrieves the total for a single item
2024-03-01T20:27:33.8722845Z     geocode
2024-03-01T20:27:33.8832689Z       adds coordinates to the database
2024-03-01T20:27:33.8833469Z     StorageLocation.items_inventoried
2024-03-01T20:27:33.9635648Z       returns a collection of items that are stored within inventories
2024-03-01T20:27:33.9636381Z     import_csv
2024-03-01T20:27:33.9753498Z       imports storage locations from a csv file
2024-03-01T20:27:33.9754074Z     csv_export_attributes
2024-03-01T20:27:34.0390038Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-01T20:27:34.0391453Z     increase_inventory
2024-03-01T20:27:34.0391978Z       when providing a new item that does not yet exist
2024-03-01T20:27:34.1507394Z         creates those new inventory items in the storage location
2024-03-01T20:27:34.1508710Z       With existing inventory
2024-03-01T20:27:34.2691513Z         increases inventory quantities from an itemizable object
2024-03-01T20:27:34.2692831Z       when increasing with an inactive item
2024-03-01T20:27:34.3844883Z         re-activates the item as part of the creation process
2024-03-01T20:27:34.3846105Z     inventory_total_value_in_dollars
2024-03-01T20:27:34.3973309Z       returns 0 when there are no items in this storage location
2024-03-01T20:27:34.4454329Z       returns total value of all items in this storage location
2024-03-01T20:27:34.4836025Z       returns a value including cents if the total isn't an even dollar amount
2024-03-01T20:27:34.4837456Z     import_inventory
2024-03-01T20:27:34.8542451Z       imports storage locations from a csv file
2024-03-01T20:27:34.8543095Z     decrease_inventory
2024-03-01T20:27:34.9579468Z       decreases inventory quantities from an itemizable object
2024-03-01T20:27:34.9580447Z       when there is insufficient inventory available
2024-03-01T20:27:34.9668208Z         gives informative errors
2024-03-01T20:27:34.9750936Z         does not change inventory quantities if there is an error
2024-03-01T20:27:34.9751824Z   Filtering >
2024-03-01T20:27:34.9843628Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-01T20:27:35.0583490Z     ->containing yields only inventories that have that item
2024-03-01T20:27:35.0584570Z   Callbacks >
2024-03-01T20:27:35.0585001Z     before_destroy
2024-03-01T20:27:35.0984285Z       does not delete storage locations with inventory items on it
2024-03-01T20:27:35.1652382Z       deletes storage locations with no inventory items on it
2024-03-01T20:27:35.1653488Z   Validations >
2024-03-01T20:27:35.1716470Z     is expected to validate that :organization cannot be empty/falsy
2024-03-01T20:27:35.1774010Z     is expected to validate that :address cannot be empty/falsy
2024-03-01T20:27:35.1831010Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:27:35.1831963Z   versioning
2024-03-01T20:27:35.1866694Z     is expected to be versioned
2024-03-01T20:27:35.1867377Z 
2024-03-01T20:27:35.1867624Z InventoryAggregate
2024-03-01T20:27:35.1868776Z   multiple events
2024-03-01T20:27:35.5147917Z     should handle intervening audits
2024-03-01T20:27:35.7853489Z     should handle changing storage location
2024-03-01T20:27:36.0594409Z     should ignore unusable snapshots
2024-03-01T20:27:36.3292992Z     should handle timing correctly
2024-03-01T20:27:36.7269006Z     should process multiple events
2024-03-01T20:27:36.7269761Z   validation
2024-03-01T20:27:36.7270376Z     current event is incorrect
2024-03-01T20:27:36.9662785Z       should raise a bare error
2024-03-01T20:27:36.9663449Z     subsequent event is incorrect
2024-03-01T20:27:37.2664242Z       should add the event to the message
2024-03-01T20:27:37.2664897Z   individual events
2024-03-01T20:27:37.7433289Z     should process a purchase event
2024-03-01T20:27:38.1315054Z     should process a kit deallocation event
2024-03-01T20:27:38.4470344Z     should process a kit allocation event
2024-03-01T20:27:38.7564185Z     should process a donation destroyed event
2024-03-01T20:27:39.0474558Z     should process a donation event
2024-03-01T20:27:39.3782093Z     should process a transfer destroy event
2024-03-01T20:27:39.6942089Z     should process a distribution event
2024-03-01T20:27:39.9972588Z     should process an adjustment event
2024-03-01T20:27:40.2764953Z     should process a snapshot event
2024-03-01T20:27:40.5894720Z     should process a purchase destroyed event
2024-03-01T20:27:40.8906409Z     should process a donation event after a new storage location is created
2024-03-01T20:27:41.1903114Z     should process a transfer event
2024-03-01T20:27:41.4949621Z     should process an audit event
2024-03-01T20:27:41.8306795Z     should process a distribution destroyed event
2024-03-01T20:27:41.8307446Z 
2024-03-01T20:27:41.8307723Z BaseItem
2024-03-01T20:27:41.8309392Z   Filtering >
2024-03-01T20:27:41.8310569Z     ->by_partner_key
2024-03-01T20:27:41.8367321Z       shows the Base Items by partner_key
2024-03-01T20:27:41.8368196Z     ->without_kit
2024-03-01T20:27:41.8421292Z       should not include the Kit BaseItem
2024-03-01T20:27:41.8422137Z   Validations >
2024-03-01T20:27:41.8495148Z     is invalid without a uniqueness key
2024-03-01T20:27:41.8565218Z     is invalid without a unique name
2024-03-01T20:27:41.8610356Z     is invalid without a name
2024-03-01T20:27:41.8653883Z     is invalid without a partner key
2024-03-01T20:27:41.8654707Z   versioning
2024-03-01T20:27:41.8690841Z     is expected to be versioned
2024-03-01T20:27:41.8692275Z   Associations >
2024-03-01T20:27:41.8817717Z     keeps count of its associated items
2024-03-01T20:27:41.8818371Z 
2024-03-01T20:27:41.8818633Z PartnerInviteService
2024-03-01T20:27:41.9132688Z   should update the status of the partner to invited
2024-03-01T20:27:41.9424732Z   should create invite
2024-03-01T20:27:41.9425406Z   with force: true
2024-03-01T20:27:41.9721852Z     should send the force setting forward
2024-03-01T20:27:41.9722461Z 
2024-03-01T20:27:41.9722735Z Partners::ItemRequest
2024-03-01T20:27:41.9723968Z   versioning
2024-03-01T20:27:41.9764546Z     is expected to be versioned
2024-03-01T20:27:41.9765144Z   validations
2024-03-01T20:27:41.9830241Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-01T20:27:41.9886976Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:27:41.9948234Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-01T20:27:42.0009295Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-01T20:27:42.0010232Z   associations
2024-03-01T20:27:42.0047709Z     is expected to have many children through child_item_requests
2024-03-01T20:27:42.0089417Z     is expected to belong to request class_name => ::Request required: true
2024-03-01T20:27:42.0123528Z     is expected to have many child_item_requests dependent => destroy
2024-03-01T20:27:42.0124465Z 
2024-03-01T20:27:42.0124715Z DistributionUpdateService
2024-03-01T20:27:42.0127335Z   resend_notification?
2024-03-01T20:27:42.1164073Z     changes any distribution content, resulting in resend_notification? = true
2024-03-01T20:27:42.2099879Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-01T20:27:42.3055888Z     changes the issue_date, resulting in resend_notification? = true
2024-03-01T20:27:42.3057199Z   call
2024-03-01T20:27:42.4113372Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-01T20:27:42.4115407Z 
2024-03-01T20:27:42.4115657Z PartnerGroup
2024-03-01T20:27:42.4117130Z   DB constraints
2024-03-01T20:27:42.4118343Z     deadline_day <= 28
2024-03-01T20:27:42.4254336Z       raises error if unmet
2024-03-01T20:27:42.4254971Z     send_reminders IS NOT NULL
2024-03-01T20:27:42.4326247Z       raises error if unmet
2024-03-01T20:27:42.4326985Z     reminder_day <= 28
2024-03-01T20:27:42.4395382Z       raises error if unmet
2024-03-01T20:27:42.4396260Z   Validations >
2024-03-01T20:27:42.4489800Z     requires a unique name within an organization
2024-03-01T20:27:42.4531962Z     must belong to an organization
2024-03-01T20:27:42.4772528Z     does not require a unique name between organizations
2024-03-01T20:27:42.4773701Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-03-01T20:27:42.4823530Z       should not be valid
2024-03-01T20:27:42.4824227Z   versioning
2024-03-01T20:27:42.4858204Z     is expected to be versioned
2024-03-01T20:27:42.4859101Z   associations
2024-03-01T20:27:42.4909998Z     is expected to belong to organization required: true
2024-03-01T20:27:42.4971694Z     is expected to have and belong to many item_categories
2024-03-01T20:27:42.5006982Z     is expected to have many partners
2024-03-01T20:27:42.5007706Z 
2024-03-01T20:27:42.5008014Z PartnerFetchRequestableItemsService
2024-03-01T20:27:42.5009025Z   #call
2024-03-01T20:27:42.5129616Z     raises an error indiciating the partner does not exist with invalid id
2024-03-01T20:27:42.5130770Z     org with any amount of items
2024-03-01T20:27:42.5131802Z       when the partner is in a partner group and has items
2024-03-01T20:27:42.7395275Z         should return only active and visible items from partner
2024-03-01T20:27:42.7396136Z       when the partner is in a partner group and has no items
2024-03-01T20:27:42.9476295Z         should return only active and visible items from partner
2024-03-01T20:27:42.9477701Z     when the partner is not in any partner group
2024-03-01T20:27:42.9767113Z       is expected to be nil
2024-03-01T20:27:42.9768164Z       when the organization has no items
2024-03-01T20:27:43.0070255Z         should return no items
2024-03-01T20:27:43.0072533Z       when the organization has items
2024-03-01T20:27:43.0583738Z         should return only active and visible items
2024-03-01T20:27:43.0910688Z         is expected to eq [#<Item id: 2999, name: "Item 1", category: nil, created_at: "2024-03-01 12:27:43.076164745 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-01T20:27:43.0912495Z 
2024-03-01T20:27:43.0912662Z Deadlinable
2024-03-01T20:27:43.0913113Z   validations
2024-03-01T20:27:43.0992358Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-01T20:27:43.1072591Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-03-01T20:27:43.1118516Z     validates that reminder day is not the same as deadline day
2024-03-01T20:27:43.1119233Z 
2024-03-01T20:27:43.1119542Z Manufacturer
2024-03-01T20:27:43.1120632Z   Methods
2024-03-01T20:27:43.1121807Z     volume
2024-03-01T20:27:43.2623974Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-01T20:27:43.4067005Z       ignores the amount of product from other manufacturers
2024-03-01T20:27:43.5443265Z       retrieves the amount of product that has been donated by manufacturer
2024-03-01T20:27:43.5444509Z   versioning
2024-03-01T20:27:43.5561707Z     is expected to be versioned
2024-03-01T20:27:43.5562521Z   Validations
2024-03-01T20:27:43.5823404Z     must have a unique name within organization
2024-03-01T20:27:43.8419255Z     must belong to an organization
2024-03-01T20:27:43.8420254Z   Private Methods
2024-03-01T20:27:43.8420755Z     #exists_in_org?
2024-03-01T20:27:44.0197505Z       returns true if manufacturer exists in an organization
2024-03-01T20:27:44.0198578Z 
2024-03-01T20:27:44.0198809Z BroadcastAnnouncement
2024-03-01T20:27:44.0316584Z   is expected to validate that :message cannot be empty/falsy
2024-03-01T20:27:44.0379947Z   should validate a valid announcement
2024-03-01T20:27:44.0421130Z   is expected to belong to user required: true
2024-03-01T20:27:44.0458733Z   is expected to belong to organization optional: true
2024-03-01T20:27:44.0511501Z   should validate a good link
2024-03-01T20:27:44.0565975Z   should roughly check if link is valid
2024-03-01T20:27:44.0566878Z   expired?
2024-03-01T20:27:44.0625179Z     should be true if the announcement is expired
2024-03-01T20:27:44.0680491Z     should be false if the announcement has not expired
2024-03-01T20:27:44.0681721Z   versioning
2024-03-01T20:27:44.0716703Z     is expected to be versioned
2024-03-01T20:27:44.0717451Z   filter_announcements
2024-03-01T20:27:44.0863539Z     shouldn't include expired announcements
2024-03-01T20:27:44.0992632Z     should include only announcements from the passed organization
2024-03-01T20:27:44.1145867Z     sorts announcements from most recently created to last
2024-03-01T20:27:44.1146736Z 
2024-03-01T20:27:44.1147009Z Reports::WarehouseReportService
2024-03-01T20:27:44.1147662Z   #report
2024-03-01T20:27:44.3031992Z     should print unknown square footage
2024-03-01T20:27:44.6544752Z     should print unknown warehouse type
2024-03-01T20:27:44.8352260Z     should print zero values
2024-03-01T20:27:45.1895195Z     should print normal values
2024-03-01T20:27:45.1895810Z 
2024-03-01T20:27:45.1896010Z User
2024-03-01T20:27:45.1896783Z   #role_added
2024-03-01T20:27:45.2245488Z     renders the body correctly
2024-03-01T20:27:45.2246436Z   #send_reset_password_instructions
2024-03-01T20:27:45.2247070Z     user gets an email with instructions
2024-03-01T20:27:45.3216748Z       sends an email with instructions
2024-03-01T20:27:45.3217533Z 
2024-03-01T20:27:45.3217803Z Partners::ChildItemRequest
2024-03-01T20:27:45.3219395Z   #quantity
2024-03-01T20:27:45.3343600Z     should return the quantity divided by the number of children
2024-03-01T20:27:45.3344551Z   associations
2024-03-01T20:27:45.3396230Z     is expected to belong to child required: true
2024-03-01T20:27:45.3437609Z     is expected to belong to item_request required: true
2024-03-01T20:27:45.3473418Z     is expected to belong to authorized_family_member optional: true
2024-03-01T20:27:45.3474445Z   versioning
2024-03-01T20:27:45.3510499Z     is expected to be versioned
2024-03-01T20:27:45.3511269Z   #ordered_item_diaperid
2024-03-01T20:27:45.3549152Z     should return the item_id on the item_request
2024-03-01T20:27:45.3549751Z 
2024-03-01T20:27:45.3550099Z Reports::PartnerInfoReportService
2024-03-01T20:27:45.3551182Z   #report
2024-03-01T20:27:45.5292990Z     should report zero values
2024-03-01T20:27:45.7666768Z     should report normal values
2024-03-01T20:27:45.7667382Z 
2024-03-01T20:27:45.7667600Z DistributionMailer
2024-03-01T20:27:45.7668762Z   #reminder_email
2024-03-01T20:27:45.7669794Z     with deliver_method: :delivery
2024-03-01T20:27:45.8273182Z       renders the body with 'delivery' specified
2024-03-01T20:27:45.8273869Z     HTML format
2024-03-01T20:27:45.8754395Z       renders the body with organization's email text
2024-03-01T20:27:45.8755281Z     with deliver_method: :pick_up
2024-03-01T20:27:45.9273219Z       renders the body with 'pick up' specified
2024-03-01T20:27:45.9274376Z     Text format
2024-03-01T20:27:45.9750507Z       renders the body with organization's email text
2024-03-01T20:27:45.9751458Z   #partner_mailer
2024-03-01T20:27:46.0236352Z     renders the body with distributions text
2024-03-01T20:27:46.0721522Z     renders the body with organization's email text
2024-03-01T20:27:46.0722712Z     with distribution changes
2024-03-01T20:27:46.1286858Z       renders the body with changes that happened in the distribution
2024-03-01T20:27:46.1287977Z     with deliver_method: :delivery
2024-03-01T20:27:46.1848096Z       renders the body with 'delivered' specified
2024-03-01T20:27:46.2364372Z       sends copy of email only to the partner
2024-03-01T20:27:46.2365284Z     with deliver_method: :pick_up
2024-03-01T20:27:46.2931113Z       renders the body with 'picked up' specified
2024-03-01T20:27:46.2931824Z       when parners profile pick_up_email is present
2024-03-01T20:27:46.3450641Z         sends email to the primary contact and partner`s pickup person
2024-03-01T20:27:46.3452130Z         when pickup person happens to be the same as the primary contact
2024-03-01T20:27:46.3968092Z           does not send email twice
2024-03-01T20:27:46.3968990Z 
2024-03-01T20:27:46.3969427Z Exports::ExportDistributionsCSVService
2024-03-01T20:27:46.3970221Z   #generate_csv_data
2024-03-01T20:27:46.5734060Z     should match the expected content for the csv
2024-03-01T20:27:46.5735035Z     when there are no distributions but the report is requested
2024-03-01T20:27:46.7386910Z       returns a csv with only headers and no rows
2024-03-01T20:27:46.7388081Z     when a new item is added
2024-03-01T20:27:46.9186782Z       should add it to the end of the row
2024-03-01T20:27:47.1076788Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-01T20:27:47.1078093Z 
2024-03-01T20:27:47.1078343Z ReminderDeadlineMailer
2024-03-01T20:27:47.1079002Z   notify deadline
2024-03-01T20:27:47.1377550Z     renders the receiver email
2024-03-01T20:27:47.1664533Z     renders the body
2024-03-01T20:27:47.1942247Z     renders the sender email
2024-03-01T20:27:47.2214241Z     renders the subject
2024-03-01T20:27:47.2215103Z 
2024-03-01T20:27:47.2215498Z AllocateKitInventoryService
2024-03-01T20:27:47.2216703Z   #error
2024-03-01T20:27:47.2218051Z     when the Store location organization doesn't match
2024-03-01T20:27:47.4387099Z       returns error
2024-03-01T20:27:47.4388118Z   #allocate
2024-03-01T20:27:47.4388679Z     when inventory items are available
2024-03-01T20:27:47.7287186Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-01T20:27:47.7288482Z       When kit is allocated more then once
2024-03-01T20:27:48.0338713Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-01T20:27:48.0340162Z       when there are more then one line items
2024-03-01T20:27:48.0341011Z         when there kit is allocated once
2024-03-01T20:27:48.3111079Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-01T20:27:48.3112293Z         when same kit is allocated multiple times
2024-03-01T20:27:48.6173661Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-01T20:27:48.6174897Z     when more than one kit is requested
2024-03-01T20:27:48.6175618Z       but one of the items is out of stock
2024-03-01T20:27:48.8754496Z         returns error and does not change kit or item quantity
2024-03-01T20:27:48.8755153Z 
2024-03-01T20:27:48.8755481Z Kit
2024-03-01T20:27:49.0865173Z   deactivate and reactivate
2024-03-01T20:27:49.0866001Z   Validations >
2024-03-01T20:27:49.1054924Z     can't have negative value
2024-03-01T20:27:49.1215467Z     must belong to an organization
2024-03-01T20:27:49.3208532Z     requires a unique name
2024-03-01T20:27:49.3378840Z     requires a name
2024-03-01T20:27:49.3541198Z     is valid as built
2024-03-01T20:27:49.3707848Z     requires at least one item
2024-03-01T20:27:49.3708636Z   #can_deactivate?
2024-03-01T20:27:49.3709199Z     without inventory items
2024-03-01T20:27:49.5658334Z       should return true
2024-03-01T20:27:49.5658992Z     with inventory items
2024-03-01T20:27:49.7819008Z       should return false
2024-03-01T20:27:49.7820042Z   versioning
2024-03-01T20:27:49.7860278Z     is expected to be versioned
2024-03-01T20:27:49.7861363Z   Value >
2024-03-01T20:27:49.8025711Z     converts dollars to cents
2024-03-01T20:27:49.8183432Z     converts cents to dollars
2024-03-01T20:27:49.8184239Z     .value_per_itemizable
2024-03-01T20:27:49.8577491Z       calculates values from associated items
2024-03-01T20:27:49.8578538Z   Filtering >
2024-03-01T20:27:49.8612411Z     can filter
2024-03-01T20:27:50.4100929Z     ->alphabetized retrieves items in alphabetical order
2024-03-01T20:27:50.4101684Z     ->by_partner_key
2024-03-01T20:27:50.6347300Z       shows the kits for a particular item
2024-03-01T20:27:50.6348082Z 
2024-03-01T20:27:50.6348783Z Partners::FetchPartnersToRemindNowService
2024-03-01T20:27:50.6349730Z   .fetch
2024-03-01T20:27:50.6350524Z     when there is a partner
2024-03-01T20:27:50.6351867Z       that does NOT have a organization with a global reminder & deadline
2024-03-01T20:27:50.6353082Z         and is a part of a partner group that does have them defined
2024-03-01T20:27:50.6353986Z           that is not for today
2024-03-01T20:27:50.6702314Z             should NOT include that partner
2024-03-01T20:27:50.6703290Z           that is for today
2024-03-01T20:27:50.7033785Z             should include that partner
2024-03-01T20:27:50.7034637Z             but the partner is deactivated
2024-03-01T20:27:50.7394746Z               should NOT include that partner
2024-03-01T20:27:50.7395983Z       that has an organization with a global reminder & deadline
2024-03-01T20:27:50.7396935Z         that is for today
2024-03-01T20:27:50.7685672Z           should include that partner
2024-03-01T20:27:50.7686655Z           but the partner is deactivated
2024-03-01T20:27:50.8012077Z             should NOT include that partner
2024-03-01T20:27:50.8013080Z           and has send_reminder=false
2024-03-01T20:27:50.8333813Z             should NOT include that partner
2024-03-01T20:27:50.8334925Z         AND a partner group that does have them defined
2024-03-01T20:27:50.8745412Z           should remind based on the partner group instead of the organization level reminder
2024-03-01T20:27:50.8746755Z           but the partner is deactivated
2024-03-01T20:27:50.9142562Z             should NOT include that partner
2024-03-01T20:27:50.9143416Z         that is not for today
2024-03-01T20:27:50.9440444Z           should NOT include that partner
2024-03-01T20:27:50.9441992Z 
2024-03-01T20:27:50.9442367Z OrganizationStats
2024-03-01T20:27:50.9443862Z   donation_sites_added method >
2024-03-01T20:27:50.9444962Z     current org is not nil >
2024-03-01T20:27:50.9485757Z       should return actual count of donation sites
2024-03-01T20:27:50.9486620Z     current org is nil >
2024-03-01T20:27:50.9520027Z       should return 0
2024-03-01T20:27:50.9520665Z   storage_locations_added method >
2024-03-01T20:27:50.9521562Z     current org is not nil >
2024-03-01T20:27:50.9558447Z       should return actual count of locations
2024-03-01T20:27:50.9559252Z     current org is nil >
2024-03-01T20:27:50.9593587Z       should return 0
2024-03-01T20:27:50.9594181Z   partners_added method >
2024-03-01T20:27:50.9594863Z     current org is nil >
2024-03-01T20:27:50.9627618Z       should return 0
2024-03-01T20:27:50.9628364Z     current org is not nil >
2024-03-01T20:27:50.9663837Z       should return actual count of partners
2024-03-01T20:27:50.9664895Z   locations_with_inventory method >
2024-03-01T20:27:50.9665815Z     current org is not nil + no locations have items >
2024-03-01T20:27:50.9734214Z       should return an empty array
2024-03-01T20:27:50.9735400Z     current org is not nil + locations have items >
2024-03-01T20:27:51.0082487Z       should return storage location
2024-03-01T20:27:51.0083380Z     current org is nil >
2024-03-01T20:27:51.0116406Z       should return an empty array
2024-03-01T20:27:51.0117418Z 
2024-03-01T20:27:51.0117718Z PartnerApprovalService
2024-03-01T20:27:51.0118861Z   #call
2024-03-01T20:27:51.0119822Z     when the arguments are correct
2024-03-01T20:27:51.0418687Z       should send an email notification to the partner
2024-03-01T20:27:51.0737933Z       should change the partner status to approved
2024-03-01T20:27:51.1031039Z       should have no errors
2024-03-01T20:27:51.1031958Z       but a unexpected error occured during the save
2024-03-01T20:27:51.1033043Z         for partner approval
2024-03-01T20:27:51.1294594Z           should have an error with the raised error
2024-03-01T20:27:51.1553966Z           should not send an email notification to the partner
2024-03-01T20:27:51.1825078Z           should not change the partner status to approved
2024-03-01T20:27:51.1826064Z     when the arguments are incorrect
2024-03-01T20:27:51.1827044Z       because the partner is not approvable
2024-03-01T20:27:51.2079104Z         should return the PartnerApprovalService object with an error
2024-03-01T20:27:51.2079839Z 
2024-03-01T20:27:51.2080196Z Reports::SummaryReportService
2024-03-01T20:27:51.2081006Z   #report
2024-03-01T20:27:51.3927868Z     should report zero values
2024-03-01T20:27:51.8347884Z     should report positive values
2024-03-01T20:27:52.2704372Z     should report negative values
2024-03-01T20:27:52.2704876Z 
2024-03-01T20:27:52.2705016Z RequestMailer
2024-03-01T20:27:52.2705702Z   #request_cancel_partner_notification
2024-03-01T20:27:52.2871289Z     renders the body with correct text with partner information
2024-03-01T20:27:52.3007186Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:27:52.3008232Z 
2024-03-01T20:27:52.3008491Z HistoricalTrendService
2024-03-01T20:27:52.3009131Z   #series
2024-03-01T20:27:52.5824545Z     returns an array of items with their monthly data
2024-03-01T20:27:52.5825607Z 
2024-03-01T20:27:52.5825857Z PartnerCreateService
2024-03-01T20:27:52.5826441Z   #call
2024-03-01T20:27:52.7662642Z     should return an instance of itself
2024-03-01T20:27:52.7663862Z     when the arguments are valid
2024-03-01T20:27:52.9503191Z       should create the associated partner profile data
2024-03-01T20:27:53.1400797Z       should create a new partner record with the organization provided
2024-03-01T20:27:53.1402473Z       but there was an unexpected issue with saving the
2024-03-01T20:27:53.1403613Z         Partner record
2024-03-01T20:27:53.3206664Z           should not create the associated partner records
2024-03-01T20:27:53.5044583Z           should not create the partner record for the organization
2024-03-01T20:27:53.5046004Z         Partners::Profile record
2024-03-01T20:27:53.6839146Z           should not create the partner record for the organization
2024-03-01T20:27:53.8670410Z           should not create the associated partner records
2024-03-01T20:27:53.8671363Z     when the arguments are incorrect
2024-03-01T20:27:53.8672368Z       beacuse the partner_attrs are invalid
2024-03-01T20:27:54.0444004Z         should contain errors related to invalid partner attributes
2024-03-01T20:27:54.0444841Z 
2024-03-01T20:27:54.0445117Z ApplicationController
2024-03-01T20:27:54.0446419Z   current_organization
2024-03-01T20:27:54.0447519Z     As a partner user
2024-03-01T20:27:54.0610450Z       should return nil
2024-03-01T20:27:54.0611049Z     As an org user
2024-03-01T20:27:54.4161018Z       should return the first org role
2024-03-01T20:27:54.4161986Z       with a changed current role
2024-03-01T20:27:54.7825504Z         should return the first org role
2024-03-01T20:27:54.7826745Z   current_partner
2024-03-01T20:27:54.7827395Z     As an org user
2024-03-01T20:27:54.7973441Z       should return nil
2024-03-01T20:27:54.7974331Z     As a partner user
2024-03-01T20:27:54.8512943Z       should return the first partner role
2024-03-01T20:27:54.8513795Z       with a changed current role
2024-03-01T20:27:54.9073692Z         should return the first partner role
2024-03-01T20:27:54.9074897Z   dashboard_path_from_current_role
2024-03-01T20:27:54.9078696Z     As a super admin
2024-03-01T20:27:54.9295837Z       links to the admin dashboard
2024-03-01T20:27:54.9296880Z     As a user without super admin status
2024-03-01T20:27:54.9500298Z       links to the general dashboard
2024-03-01T20:27:54.9501104Z 
2024-03-01T20:27:54.9501809Z UsersRole
2024-03-01T20:27:54.9502673Z   versioning
2024-03-01T20:27:54.9551281Z     is expected to be versioned
2024-03-01T20:27:54.9552140Z   #current_role_for
2024-03-01T20:27:54.9553012Z     for org user
2024-03-01T20:27:54.9683555Z       should return org user
2024-03-01T20:27:54.9684450Z     for org admin
2024-03-01T20:27:54.9883673Z       should return org admin
2024-03-01T20:27:54.9884500Z     for partner user
2024-03-01T20:27:55.0021228Z       should return partner user
2024-03-01T20:27:55.0022038Z     for super admin
2024-03-01T20:27:55.0187244Z       should return super admin
2024-03-01T20:27:55.0188216Z 
2024-03-01T20:27:55.0188528Z PartnerProfileUpdateService
2024-03-01T20:27:55.0189412Z   #call
2024-03-01T20:27:55.0193221Z     when served area client shares pre-exist
2024-03-01T20:27:55.0194076Z       and the new values are incorrect
2024-03-01T20:27:55.0608716Z         maintains the old values and returns failure
2024-03-01T20:27:55.0610008Z       and the new values are correct
2024-03-01T20:27:55.0610918Z         and there are errors on the profile
2024-03-01T20:27:55.0933928Z           maintains the old values and returns failure
2024-03-01T20:27:55.0935132Z         and there are no other errors
2024-03-01T20:27:55.1251257Z           replaces the old values and returns success
2024-03-01T20:27:55.1252611Z     when there are no pre-existing served areas
2024-03-01T20:27:55.1253400Z       and the new values are correct
2024-03-01T20:27:55.1485025Z         stores the new values and returns success
2024-03-01T20:27:55.1485974Z         and there are other errors in the profile
2024-03-01T20:27:55.1709278Z           does not store the new values and it returns a failure
2024-03-01T20:27:55.1710314Z       and the new values are incorrect
2024-03-01T20:27:55.1916578Z 0
2024-03-01T20:27:55.1925382Z         does not store the new values and returns a failure
2024-03-01T20:27:55.1926378Z 
2024-03-01T20:27:55.1926792Z CustomDeviseMailer
2024-03-01T20:27:55.1928011Z   #invitation_instructions
2024-03-01T20:27:55.1929358Z     when partner is invited
2024-03-01T20:27:55.2384863Z       invites to primary user
2024-03-01T20:27:55.2386198Z     when user is invited
2024-03-01T20:27:55.2596639Z       invites to user
2024-03-01T20:27:55.2790767Z       has invite expiration message
2024-03-01T20:27:55.2791974Z     when other partner users invited
2024-03-01T20:27:55.3206897Z       invites to partner user
2024-03-01T20:27:55.3207931Z 
2024-03-01T20:27:55.3208389Z DistributionItemizedBreakdownService
2024-03-01T20:27:55.3209667Z   #fetch
2024-03-01T20:27:55.7028754Z     should include the break down of items distributed with onhand data
2024-03-01T20:27:55.7029814Z   #fetch_csv
2024-03-01T20:27:56.0766700Z     should output the expected output but in CSV format
2024-03-01T20:27:56.0767410Z 
2024-03-01T20:27:56.0767755Z DistributionContentChangeService
2024-03-01T20:27:56.0768732Z   #any_change?
2024-03-01T20:27:56.0769844Z     when there are line items removed
2024-03-01T20:27:56.0807352Z       returns true
2024-03-01T20:27:56.0808206Z     when there are no changes in the line items
2024-03-01T20:27:56.0841118Z       returns true
2024-03-01T20:27:56.0842152Z     when there are line items removed and updated
2024-03-01T20:27:56.0874951Z       returns true
2024-03-01T20:27:56.0875682Z     when there are line items updated
2024-03-01T20:27:56.0908739Z       returns true
2024-03-01T20:27:56.0909522Z   #changes
2024-03-01T20:27:56.0910339Z     when there are line items removed and updated
2024-03-01T20:27:56.0943911Z       returns true
2024-03-01T20:27:56.0944444Z 
2024-03-01T20:27:56.0944920Z DistributionByCountyReportService
2024-03-01T20:27:56.0945809Z   get_breakdown
2024-03-01T20:27:56.2785238Z     handles multiple partners with overlapping service areas properly
2024-03-01T20:27:56.3671085Z     divides the item numbers and values according to the partner profile
2024-03-01T20:27:56.4393328Z     will have 100% unspecified shows if no served_areas
2024-03-01T20:27:56.4394144Z 
2024-03-01T20:27:56.4394399Z RequestsTotalItemsService
2024-03-01T20:27:56.4395527Z   #calculate
2024-03-01T20:27:56.4396344Z     when provided with requests that have no request items
2024-03-01T20:27:56.4478788Z       is expected to be blank
2024-03-01T20:27:56.4479682Z     when item name is nil
2024-03-01T20:27:56.4598170Z       return Unknown Item
2024-03-01T20:27:56.4598943Z     when provided requests is nil
2024-03-01T20:27:56.4634235Z       is expected to be blank
2024-03-01T20:27:56.4635088Z     when the request items is not blank
2024-03-01T20:27:56.4771491Z       return the names of items correctly
2024-03-01T20:27:56.4904770Z       return items with correct quantities calculated
2024-03-01T20:27:56.4905429Z 
2024-03-01T20:27:56.4905730Z Event
2024-03-01T20:27:56.4906558Z   #most_recent_snapshot
2024-03-01T20:27:56.7294372Z     should include the last usable snapshot
2024-03-01T20:27:56.9658558Z     should not include an unusable snapshot
2024-03-01T20:27:56.9659467Z 
2024-03-01T20:27:56.9659828Z ApplicationHelper
2024-03-01T20:27:56.9661873Z   default_title_content
2024-03-01T20:27:56.9663032Z     Organization does not exist
2024-03-01T20:27:56.9717362Z       returns a default name
2024-03-01T20:27:56.9718007Z     Organization exists
2024-03-01T20:27:57.1503793Z       returns the organization's name
2024-03-01T20:27:57.1504635Z   confirm_delete_msg
2024-03-01T20:27:57.1556937Z     subs in string
2024-03-01T20:27:57.1557592Z   step_container_helper
2024-03-01T20:27:57.1558656Z     active_index is equal to index
2024-03-01T20:27:57.1603008Z       returns active
2024-03-01T20:27:57.1603886Z     active_index is greater than index
2024-03-01T20:27:57.1649343Z       returns done
2024-03-01T20:27:57.1650047Z     active_index is less than index
2024-03-01T20:27:57.1695339Z       returns empty string
2024-03-01T20:27:57.1696144Z   flash_class
2024-03-01T20:27:57.1738972Z     returns appropriate class for error
2024-03-01T20:27:57.1783025Z     returns appropriate class for notice
2024-03-01T20:27:57.1826433Z     returns appropriate class for success
2024-03-01T20:27:57.1868815Z     returns appropriate class for alert
2024-03-01T20:27:57.1869375Z   can_administrate?
2024-03-01T20:27:57.1870252Z     User is part of org but not org admin
2024-03-01T20:27:57.2019907Z       cannot administrate
2024-03-01T20:27:57.2020764Z     User is org admin and part of org
2024-03-01T20:27:57.2235111Z       can administrate
2024-03-01T20:27:57.2235621Z     User is org admin and not part of org
2024-03-01T20:27:57.4168409Z       cannot administrate
2024-03-01T20:27:57.4169095Z   active_class
2024-03-01T20:27:57.4217679Z     Returns the controller name
2024-03-01T20:27:57.4218799Z 
2024-03-01T20:27:57.4219088Z ItemsController
2024-03-01T20:27:57.4220137Z   While not signed in
2024-03-01T20:27:57.4304235Z     redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:57.4305133Z   While signed in
2024-03-01T20:27:57.4305666Z     POST #create
2024-03-01T20:27:57.4306503Z       with valid params
2024-03-01T20:27:57.4592963Z         should redirect to the item page
2024-03-01T20:27:57.4784731Z         should create an item
2024-03-01T20:27:57.4960924Z         should accept params with dollar signs, periods, and commas
2024-03-01T20:27:57.4962025Z       with invalid params
2024-03-01T20:27:57.5116212Z         should show an error
2024-03-01T20:27:57.5117211Z     GET #edit
2024-03-01T20:27:57.5276693Z       returns http success
2024-03-01T20:27:57.5277333Z     PUT #update
2024-03-01T20:27:57.5278054Z       visible
2024-03-01T20:27:57.5471117Z         should update visible_to_partners to true
2024-03-01T20:27:57.5471921Z       invisible
2024-03-01T20:27:57.5656437Z         should update visible_to_partners to false
2024-03-01T20:27:57.5657292Z     PATCH #restore
2024-03-01T20:27:57.5658361Z       with a soft-deleted item
2024-03-01T20:27:57.5861999Z         re-activates the item
2024-03-01T20:27:57.5862710Z       with an active item
2024-03-01T20:27:57.6061340Z         does nothing
2024-03-01T20:27:57.6062034Z       with another organizations item
2024-03-01T20:27:57.7874357Z         does nothing
2024-03-01T20:27:57.7875519Z     PATCH #remove_category
2024-03-01T20:27:57.9844103Z       should redirect to the previous category page
2024-03-01T20:27:58.1838231Z       should remove an item's category
2024-03-01T20:27:58.1838929Z     GET #index
2024-03-01T20:27:58.2019319Z       returns http success
2024-03-01T20:27:58.2019874Z     Looking at a different organization
2024-03-01T20:27:58.3784647Z       redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:58.3785602Z     GET #new
2024-03-01T20:27:58.3917221Z       returns http success
2024-03-01T20:27:58.3918281Z     DELETE #destroy
2024-03-01T20:27:58.4212733Z       redirects to #index
2024-03-01T20:27:58.4213505Z     GET #show
2024-03-01T20:27:58.4412648Z       returns http success
2024-03-01T20:27:58.4413109Z 
2024-03-01T20:27:58.4413459Z Partners::Profile
2024-03-01T20:27:58.4452398Z   must allow deleting served_areas
2024-03-01T20:27:58.4453307Z   social media info validation for profile
2024-03-01T20:27:58.4454429Z     no social media presence and the checkbox isn't checked
2024-03-01T20:27:58.4510881Z       should not be valid
2024-03-01T20:27:58.4608166Z       should be valid if media_information is not needed
2024-03-01T20:27:58.4609423Z     has social media presence and the checkbox is unchecked
2024-03-01T20:27:58.4681843Z       with every social media option it should be valid
2024-03-01T20:27:58.4753797Z       with just instagram it should be valid
2024-03-01T20:27:58.4822992Z       with just twitter it should be valid
2024-03-01T20:27:58.4893996Z       with just facebook it should be valid
2024-03-01T20:27:58.4962237Z       with just a website it should be valid
2024-03-01T20:27:58.5166158Z     no social media presence and the checkbox is checked
2024-03-01T20:27:58.5167022Z       should be valid
2024-03-01T20:27:58.5167477Z   client share behaviour
2024-03-01T20:27:58.5167932Z     no served areas
2024-03-01T20:27:58.5168345Z       has 0 client share
2024-03-01T20:27:58.5178357Z     multiple
2024-03-01T20:27:58.5266650Z       is valid if client share sum is 100
2024-03-01T20:27:58.5430735Z       sums the client shares
2024-03-01T20:27:58.5431542Z   request settings validation for profile
2024-03-01T20:27:58.5432811Z     at least one request type is set to true
2024-03-01T20:27:58.5516744Z       should be valid when enable_quantity_based_requests is true
2024-03-01T20:27:58.5588140Z       should be valid when enable_individual_requests is true
2024-03-01T20:27:58.5659908Z       should be valid when enable_child_based_requests is true
2024-03-01T20:27:58.5660509Z     no settings are set to true
2024-03-01T20:27:58.5710148Z       should not be valid
2024-03-01T20:27:58.5710808Z   associations
2024-03-01T20:27:58.5752477Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-01T20:27:58.5786910Z     is expected to have many served_areas
2024-03-01T20:27:58.5824764Z     is expected to have a has_many_attached called documents
2024-03-01T20:27:58.5863341Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-01T20:27:58.5864274Z   versioning
2024-03-01T20:27:58.5897542Z     is expected to be versioned
2024-03-01T20:27:58.5898151Z 
2024-03-01T20:27:58.5898410Z ItemCategory
2024-03-01T20:27:58.5899677Z   assocations
2024-03-01T20:27:58.5961696Z     is expected to have and belong to many partner_groups
2024-03-01T20:27:58.6011669Z     is expected to belong to organization required: true
2024-03-01T20:27:58.6044570Z     is expected to have many items
2024-03-01T20:27:58.6045170Z   versioning
2024-03-01T20:27:58.6080786Z     is expected to be versioned
2024-03-01T20:27:58.6081573Z   validations
2024-03-01T20:27:58.6168856Z     is expected to validate that :organization cannot be empty/falsy
2024-03-01T20:27:58.6255258Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:27:58.6326493Z     is expected to validate that the length of :description is at most 250
2024-03-01T20:27:58.6521212Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-01T20:27:58.6522528Z 
2024-03-01T20:27:58.6522670Z PartnerMailerJob
2024-03-01T20:27:58.6524860Z   conditionally sending the emails
2024-03-01T20:27:58.9378220Z     sends mail for future distributions immediately
2024-03-01T20:27:59.1353190Z     does not send mail for past distributions
2024-03-01T20:27:59.1354028Z     when the distribution is for a deactivated partner
2024-03-01T20:27:59.3282152Z       does not send the email
2024-03-01T20:27:59.3283375Z 
2024-03-01T20:27:59.3283632Z PartnerMailer
2024-03-01T20:27:59.3284841Z   #application_approved
2024-03-01T20:27:59.3551672Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-01T20:27:59.3783383Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:27:59.3784196Z   #recertification_request
2024-03-01T20:27:59.4033416Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:27:59.4346575Z     renders the body with text that indicates to recertify and link to where
2024-03-01T20:27:59.4347495Z 
2024-03-01T20:27:59.4347711Z DistributionReminder
2024-03-01T20:27:59.4352540Z   conditionally sending the emails
2024-03-01T20:27:59.4642227Z     does not send mail for future distributions if the partner wants no reminders
2024-03-01T20:27:59.4945270Z     sends mail for future distributions where the partner wants reminders
2024-03-01T20:27:59.5224789Z     does not send mail for past distributions
2024-03-01T20:27:59.5509825Z     sends mail for future distributions
2024-03-01T20:27:59.5510617Z     when the distribution_id does not match any Distribution
2024-03-01T20:27:59.5558700Z       does not send mail for non existent distributions
2024-03-01T20:27:59.5559438Z     when the partner is deactivated
2024-03-01T20:27:59.5855869Z       does not send mail
2024-03-01T20:27:59.5857373Z 
2024-03-01T20:27:59.5857653Z Item
2024-03-01T20:27:59.5858801Z   versioning
2024-03-01T20:27:59.5896055Z     is expected to be versioned
2024-03-01T20:27:59.5896695Z   default_quantity
2024-03-01T20:27:59.5979161Z     should return 50 if column is not set
2024-03-01T20:27:59.6059491Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-01T20:27:59.6141215Z     should return the value of distribution_quantity if it is set
2024-03-01T20:27:59.6219864Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-01T20:27:59.6220643Z   Methods >
2024-03-01T20:27:59.6221324Z     barcodes_for
2024-03-01T20:27:59.6473572Z       retrieves all BarcodeItems associated with an item
2024-03-01T20:27:59.6474368Z     destroy
2024-03-01T20:27:59.6646085Z       actually destroys an item that doesn't have history
2024-03-01T20:27:59.8770687Z       deactivates the kit if it exists
2024-03-01T20:27:59.9026804Z       only hides an item that has history
2024-03-01T20:27:59.9027549Z     #reactivate!
2024-03-01T20:27:59.9028116Z       given a single item id
2024-03-01T20:27:59.9170451Z         sets the active trait to true for that item
2024-03-01T20:27:59.9171340Z       given an array of item ids
2024-03-01T20:27:59.9399560Z         sets the active trait to true for all of them
2024-03-01T20:27:59.9400286Z     other?
2024-03-01T20:27:59.9528370Z       is true for items that are partner_key 'other'
2024-03-01T20:27:59.9529164Z     has_history?
2024-03-01T20:28:00.0269064Z       identifies items that have been used previously
2024-03-01T20:28:00.0269725Z     storage_locations_containing
2024-03-01T20:28:00.0663599Z       retrieves all storage locations that contain an item
2024-03-01T20:28:00.0664537Z     barcoded_items >
2024-03-01T20:28:00.1037081Z       returns a collection of items that have barcodes associated with them
2024-03-01T20:28:00.1038268Z   distribution_quantity and package size
2024-03-01T20:28:00.1175946Z     have nil values if an empty string is passed
2024-03-01T20:28:00.1176669Z   Filtering >
2024-03-01T20:28:00.1212312Z     can filter
2024-03-01T20:28:00.1499329Z     ->active shows items that are still active
2024-03-01T20:28:00.1697463Z     ->alphabetized retrieves items in alphabetical order
2024-03-01T20:28:00.1928518Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-03-01T20:28:00.1929436Z     ->by_base_item
2024-03-01T20:28:00.2100134Z       shows the items for a particular base_item
2024-03-01T20:28:00.4115780Z       can be chained to organization to constrain it to just 1 org's items
2024-03-01T20:28:00.4116765Z     ->by_partner_key
2024-03-01T20:28:00.4289545Z       filters by partner key
2024-03-01T20:28:00.4290106Z     ->cloth_diapers
2024-03-01T20:28:00.4558228Z       returns records associated with disposable diapers
2024-03-01T20:28:00.4559106Z     ->disposable
2024-03-01T20:28:00.4846819Z       returns records associated with disposable diapers
2024-03-01T20:28:00.4847366Z   after update
2024-03-01T20:28:00.4847871Z     when item has the kit
2024-03-01T20:28:00.6796336Z       updates kit name
2024-03-01T20:28:00.6796954Z     when item does not have kit
2024-03-01T20:28:00.6920461Z       does not raise any errors
2024-03-01T20:28:00.6921044Z   Assocations >
2024-03-01T20:28:00.6966600Z     is expected to belong to item_category optional: true
2024-03-01T20:28:00.6967428Z   Validations >
2024-03-01T20:28:00.7095852Z     requires a unique name
2024-03-01T20:28:00.7206387Z     requires that items quantity are not a negative number
2024-03-01T20:28:00.7258495Z     must belong to an organization
2024-03-01T20:28:00.7305231Z     requires a Base Item base
2024-03-01T20:28:00.7305882Z 
2024-03-01T20:28:00.7306312Z Reports::AdultIncontinenceReportService
2024-03-01T20:28:00.7307149Z   #report
2024-03-01T20:28:00.9052545Z     should report zero values
2024-03-01T20:28:00.9053190Z     with values
2024-03-01T20:28:01.5328819Z       should handle null distribution quantity
2024-03-01T20:28:02.1543777Z       should report normal values
2024-03-01T20:28:02.1544384Z 
2024-03-01T20:28:02.1544615Z HistoricalDataCacheJob
2024-03-01T20:28:02.3388140Z   caches the historical data
2024-03-01T20:28:02.5075546Z   queues the job
2024-03-01T20:28:02.5075938Z 
2024-03-01T20:28:02.5076104Z KitAllocation
2024-03-01T20:28:02.5080044Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-01T20:28:02.5082155Z   versioning
2024-03-01T20:28:02.5118690Z     is expected to be versioned
2024-03-01T20:28:02.5120855Z 
2024-03-01T20:28:02.5121164Z Distribution
2024-03-01T20:28:02.5123084Z   Callbacks >
2024-03-01T20:28:02.5694284Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:28:02.5695306Z     #before_save
2024-03-01T20:28:02.5695734Z       #reset_shipping_cost
2024-03-01T20:28:02.5696278Z         when delivery_method is other then shipped
2024-03-01T20:28:02.5963940Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-01T20:28:02.5964866Z   Scopes >
2024-03-01T20:28:02.5965730Z     by_partner >
2024-03-01T20:28:02.6475564Z       only returns distributions with given partner id
2024-03-01T20:28:02.6476179Z     by_location >
2024-03-01T20:28:02.6967661Z       only returns distributions with given location id
2024-03-01T20:28:02.6968275Z     during >
2024-03-01T20:28:02.7702684Z       returns all distributions created between two dates
2024-03-01T20:28:02.7703265Z     by_item_id >
2024-03-01T20:28:02.9084923Z       only returns distributions with given item id
2024-03-01T20:28:02.9085607Z     this_week >
2024-03-01T20:28:02.9086279Z       When it's Tuesday (mid-week)
2024-03-01T20:28:02.9875163Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-01T20:28:02.9876090Z       When it's Sunday (end of the week)
2024-03-01T20:28:03.0361914Z         doesn't include distributions past Sunday
2024-03-01T20:28:03.0362502Z   Methods >
2024-03-01T20:28:03.0363967Z     #future?
2024-03-01T20:28:03.0364714Z       when issued_at has not passed
2024-03-01T20:28:03.0626267Z         returns true
2024-03-01T20:28:03.0627150Z       when issued_at has passed
2024-03-01T20:28:03.0882230Z         returns false
2024-03-01T20:28:03.0882726Z     #distributed_at
2024-03-01T20:28:03.1139535Z       shows the hour and minutes if it has been provided
2024-03-01T20:28:03.1609958Z       displays explicit issued_at date
2024-03-01T20:28:03.1610491Z     #copy_line_items
2024-03-01T20:28:03.2020200Z       replicates line_items from a donation into a distribution
2024-03-01T20:28:03.2020781Z     #combine_duplicates
2024-03-01T20:28:03.2413892Z       condenses duplicate line_items if the item_ids match
2024-03-01T20:28:03.2414638Z     #copy_from_request
2024-03-01T20:28:03.2637036Z       copy over relevant request information into the distrubution
2024-03-01T20:28:03.2637834Z   versioning
2024-03-01T20:28:03.2672753Z     is expected to be versioned
2024-03-01T20:28:03.2673324Z   CSV export >
2024-03-01T20:28:03.2673799Z     for_csv_export >
2024-03-01T20:28:03.5974108Z       filters only to the given filter
2024-03-01T20:28:03.9395569Z       filters only to the given organization
2024-03-01T20:28:04.2863389Z       filters only to the given issue time range
2024-03-01T20:28:04.2864174Z     csv_export_attributes
2024-03-01T20:28:04.6972326Z       returns the set of attributes which define a row in case of distribution export
2024-03-01T20:28:04.6973378Z   behaves like itemizable
2024-03-01T20:28:04.6973904Z     .to_a
2024-03-01T20:28:04.6974422Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:28:04.7311725Z         calls line_item_values
2024-03-01T20:28:04.7312521Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:28:04.7655326Z         raises an error
2024-03-01T20:28:04.7655855Z     .line_items
2024-03-01T20:28:04.7657123Z       sorted
2024-03-01T20:28:04.8884391Z         displays the items, sorted by name
2024-03-01T20:28:04.8885069Z       combine!
2024-03-01T20:28:04.9447484Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:28:04.9884595Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:28:04.9885566Z       quantities_by_name
2024-03-01T20:28:05.0788768Z         leaves out zero-quantitied items if requested
2024-03-01T20:28:05.1653074Z         returns a hash of items with id, name, and quantity
2024-03-01T20:28:05.1654201Z       total
2024-03-01T20:28:05.2555590Z         has an item total
2024-03-01T20:28:05.2556231Z   Validations >
2024-03-01T20:28:05.2597180Z     ensures that any included items are found in the associated storage location
2024-03-01T20:28:05.3010513Z     ensures the associated line_items are valid
2024-03-01T20:28:05.3061894Z     must belong to an organization
2024-03-01T20:28:05.3110302Z     requires a storage location
2024-03-01T20:28:05.3166969Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:28:05.3214992Z     requires a partner
2024-03-01T20:28:05.3365421Z     ensures the associated line_items are invalid with a zero quantity
2024-03-01T20:28:05.3513127Z     ensures the associated line_items are invalid with a nil quantity
2024-03-01T20:28:05.3514018Z     when delivery method is shipped
2024-03-01T20:28:05.3514630Z       shipping cost is none negative
2024-03-01T20:28:05.3779389Z         allows to save distribution
2024-03-01T20:28:05.3780075Z       shipping cost is negative
2024-03-01T20:28:05.3837490Z         will not allow to save distribution
2024-03-01T20:28:05.3838239Z     when delivery method is other then shipped
2024-03-01T20:28:05.4095788Z       allows to save distribution
2024-03-01T20:28:05.4096575Z 
2024-03-01T20:28:05.4096982Z Exports::ExportReportCSVService
2024-03-01T20:28:05.4098049Z   .generate_csv_data
2024-03-01T20:28:05.4133857Z     creates CSV data including headers
2024-03-01T20:28:05.4167699Z     creates a CSV string
2024-03-01T20:28:05.7461683Z 
2024-03-01T20:28:05.7463029Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-01T20:28:05.7464054Z 
2024-03-01T20:28:05.7466489Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-01T20:28:05.7467936Z      # Not yet implemented
2024-03-01T20:28:05.7468375Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-01T20:28:05.7587607Z 
2024-03-01T20:28:05.7587889Z Failures:
2024-03-01T20:28:05.7588245Z 
2024-03-01T20:28:05.7588558Z   1) EventDiffer should return a full diff
2024-03-01T20:28:05.7589382Z      Failure/Error:
2024-03-01T20:28:05.7590082Z        expect(results.as_json).to contain_exactly(
2024-03-01T20:28:05.7591344Z          {"aggregate" => false,
2024-03-01T20:28:05.7592104Z           "database" => true,
2024-03-01T20:28:05.7592812Z           "storage_location_id" => storage_location3.id,
2024-03-01T20:28:05.7593326Z           :type => "location"},
2024-03-01T20:28:05.7593724Z          {"aggregate" => true,
2024-03-01T20:28:05.7594110Z           "database" => false,
2024-03-01T20:28:05.7594595Z           "storage_location_id" => StorageLocation.count + 1,
2024-03-01T20:28:05.7595137Z           :type => "location"},
2024-03-01T20:28:05.7595523Z          {"aggregate" => 0,
2024-03-01T20:28:05.7595765Z 
2024-03-01T20:28:05.7596866Z        expected collection contained:  [{"aggregate"=>false, "database"=>true, "storage_location_id"=>4, :type=>"location"}, {"aggregate"=>t..."item"}, {"aggregate"=>60, "database"=>50, "item_id"=>139, "storage_location_id"=>6, :type=>"item"}]
2024-03-01T20:28:05.7599171Z        actual collection contained:    [{"aggregate"=>0, "database"=>50, "item_id"=>140, "storage_location_id"=>5, :type=>"item"}, {"aggrega..."item"}, {"aggregate"=>60, "database"=>50, "item_id"=>139, "storage_location_id"=>6, :type=>"item"}]
2024-03-01T20:28:05.7601483Z        the missing elements were:      [{"aggregate"=>false, "database"=>true, "storage_location_id"=>4, :type=>"location"}, {"aggregate"=>true, "database"=>false, "storage_location_id"=>4, :type=>"location"}]
2024-03-01T20:28:05.7602847Z      # ./spec/events/event_differ_spec.rb:44:in `block (2 levels) in <top (required)>'
2024-03-01T20:28:05.7607023Z 
2024-03-01T20:28:05.7607478Z Finished in 47.45 seconds (files took 8.42 seconds to load)
2024-03-01T20:28:05.7608238Z 522 examples, 1 failure, 1 pending
2024-03-01T20:28:05.7609238Z 
2024-03-01T20:28:05.7609714Z Failed examples:
2024-03-01T20:28:05.7609967Z 
2024-03-01T20:28:05.7610474Z rspec ./spec/events/event_differ_spec.rb:16 # EventDiffer should return a full diff
2024-03-01T20:28:05.7611189Z 
2024-03-01T20:28:05.7611356Z Randomized with seed 31122
2024-03-01T20:28:05.7611684Z 
2024-03-01T20:28:06.0812242Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-01T20:28:06.0813654Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3763 / 6426 LOC (58.56%) covered.
2024-03-01T20:28:06.1339666Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/models/item_spec.rb" "spec/services/add_role_service_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/models/manufacturer_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/models/event_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/models/partners/family_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/donation_site_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/models/partners/profile_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/models/partner_group_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/users_role_spec.rb" "spec/models/item_category_spec.rb" "spec/models/organization_stats_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/models/base_item_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/models/role_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" failed
2024-03-01T20:28:06.5243770Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-01T20:28:06.5245788Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10678 LOC (0.36%) covered.
2024-03-01T20:28:06.5516417Z ##[error]Process completed with exit code 1.
