2024-03-01T20:26:58.8553085Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-01T20:26:58.8553977Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-01T20:26:58.8582080Z shell: /usr/bin/bash -e {0}
2024-03-01T20:26:58.8582481Z env:
2024-03-01T20:26:58.8582902Z   POSTGRES_HOST: localhost
2024-03-01T20:26:58.8583251Z   DATABASE_HOST: localhost
2024-03-01T20:26:58.8583637Z   PG_USERNAME: postgres
2024-03-01T20:26:58.8584061Z   PG_PASSWORD: password
2024-03-01T20:26:58.8584441Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-01T20:26:58.8584872Z   POSTGRES_PORT: 5432
2024-03-01T20:26:58.8585292Z   PGHOST: localhost
2024-03-01T20:26:58.8585646Z   PGUSER: postgres
2024-03-01T20:26:58.8585943Z   RAILS_ENV: test
2024-03-01T20:26:58.8586836Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-01T20:26:58.8587347Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-01T20:26:58.8587837Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-03-01T20:26:58.8588290Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-01T20:26:58.8588936Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-01T20:26:58.8589593Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-01T20:26:58.8590275Z   EVENTS_READ: true
2024-03-01T20:26:58.8590645Z ##[endgroup]
2024-03-01T20:27:10.0445342Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/organization_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/partner_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/audit_spec.rb" "spec/services/transfer_destroy_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/models/adjustment_spec.rb" "spec/models/view/inventory_spec.rb" "spec/models/donation_spec.rb" "spec/models/request_item_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/models/transfer_spec.rb" "spec/services/item_create_service_spec.rb" "spec/models/purchase_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/models/account_request_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/models/line_item_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/models/vendor_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/user_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/models/question_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/request_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/services/deadline_service_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/models/county_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/controllers/admins_controller_spec.rb"
2024-03-01T20:27:18.6312869Z 
2024-03-01T20:27:18.6313986Z Randomized with seed 53930
2024-03-01T20:27:19.4069997Z 
2024-03-01T20:27:19.4070736Z User
2024-03-01T20:27:19.4264478Z   has a valid factory
2024-03-01T20:27:19.4265111Z   Scopes >
2024-03-01T20:27:19.4266282Z     ->alphabetized
2024-03-01T20:27:19.4497530Z       retrieves users in the correct order
2024-03-01T20:27:19.4498352Z   versioning
2024-03-01T20:27:19.4536698Z     is expected to be versioned
2024-03-01T20:27:19.4537480Z   Scopes >
2024-03-01T20:27:19.4538149Z     ->alphabetized
2024-03-01T20:27:19.4914660Z       retrieves users in the correct order
2024-03-01T20:27:19.4915403Z   omniauth
2024-03-01T20:27:19.5047917Z     retrieves the user from an omniauth context
2024-03-01T20:27:19.5048878Z   Methods >
2024-03-01T20:27:19.5146740Z     #reinvitable?
2024-03-01T20:27:19.5225652Z     #invitation_status
2024-03-01T20:27:19.5680966Z     #kind
2024-03-01T20:27:19.5728810Z     discarded?
2024-03-01T20:27:19.5729508Z   Validations >
2024-03-01T20:27:19.5811968Z     requires a name
2024-03-01T20:27:19.5994511Z     requires an email that is formatted correctly
2024-03-01T20:27:19.5995603Z 
2024-03-01T20:27:19.5995938Z Adjustment
2024-03-01T20:27:19.5997442Z   Scopes >
2024-03-01T20:27:19.6300232Z     `by_user` can filter out adjustments to a specific user
2024-03-01T20:27:19.6479190Z     `at_location` can filter out adjustments to a specific location
2024-03-01T20:27:19.6480166Z   Validations >
2024-03-01T20:27:19.7099280Z     allows you to remove all the inventory that exists in the storage location
2024-03-01T20:27:19.7181538Z     must belong to an organization
2024-03-01T20:27:19.7347412Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-01T20:27:19.7348676Z   behaves like itemizable
2024-03-01T20:27:19.7349299Z     .line_items
2024-03-01T20:27:19.7350030Z       quantities_by_name
2024-03-01T20:27:19.7746211Z         returns a hash of items with id, name, and quantity
2024-03-01T20:27:19.8130113Z         leaves out zero-quantitied items if requested
2024-03-01T20:27:19.8131155Z       sorted
2024-03-01T20:27:19.8685099Z         displays the items, sorted by name
2024-03-01T20:27:19.8685581Z       combine!
2024-03-01T20:27:19.9087579Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:27:19.9539803Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:27:19.9540641Z       total
2024-03-01T20:27:19.9934211Z         has an item total
2024-03-01T20:27:19.9934833Z     .to_a
2024-03-01T20:27:19.9936153Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:27:20.0284880Z         raises an error
2024-03-01T20:27:20.0285614Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:27:20.0617715Z         calls line_item_values
2024-03-01T20:27:20.0618478Z   nested line item attributes
2024-03-01T20:27:20.1009848Z     accepts them
2024-03-01T20:27:20.1010411Z   Methods >
2024-03-01T20:27:20.3281664Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-01T20:27:20.3283002Z     split_difference
2024-03-01T20:27:20.4061149Z       gracefully handles adjustments with only positive
2024-03-01T20:27:20.4780725Z       gracefully handles adjustments with only negative
2024-03-01T20:27:20.5526165Z       returns two adjustment objects
2024-03-01T20:27:20.5527382Z   versioning
2024-03-01T20:27:20.5566386Z     is expected to be versioned
2024-03-01T20:27:20.5566872Z 
2024-03-01T20:27:20.5567155Z County
2024-03-01T20:27:20.5663830Z   is expected to have many served_areas
2024-03-01T20:27:20.5664798Z   versioning
2024-03-01T20:27:20.5701080Z     is expected to be versioned
2024-03-01T20:27:20.5702760Z 
2024-03-01T20:27:20.5703414Z Partner
2024-03-01T20:27:20.5705308Z   #impact_metrics
2024-03-01T20:27:20.5706251Z     when partner don't have any related information
2024-03-01T20:27:20.6018918Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-01T20:27:20.6019765Z     when partner has related information
2024-03-01T20:27:20.6712812Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-01T20:27:20.6713986Z   #deletable?
2024-03-01T20:27:20.6714329Z     when status is not uninvited
2024-03-01T20:27:20.6796344Z       should return false
2024-03-01T20:27:20.6796995Z     when status is uninvited
2024-03-01T20:27:20.6797847Z       when it has a profile and users
2024-03-01T20:27:20.7097193Z         should return false
2024-03-01T20:27:20.7097881Z       when it has a distribution
2024-03-01T20:27:20.7308350Z         should return false
2024-03-01T20:27:20.7309057Z       when it has a profile but no users
2024-03-01T20:27:20.7461693Z         should return true
2024-03-01T20:27:20.7462407Z       when it has no other associations
2024-03-01T20:27:20.7570917Z         should return true
2024-03-01T20:27:20.7571528Z       when it has a request
2024-03-01T20:27:20.7773534Z         should return false
2024-03-01T20:27:20.7774270Z   #csv_export_attributes
2024-03-01T20:27:20.8075098Z     includes contact person information from parnerbase
2024-03-01T20:27:20.8075963Z   callbacks
2024-03-01T20:27:20.8290029Z     properly downcases email
2024-03-01T20:27:20.8290793Z   #profile
2024-03-01T20:27:20.8524308Z     should return the associated Partners::Profile record
2024-03-01T20:27:20.8526008Z   ActiveStorage validation
2024-03-01T20:27:20.8646306Z     validates that attachments are pdf or docs
2024-03-01T20:27:20.8647047Z   import_csv
2024-03-01T20:27:21.1749289Z     imports partners from a csv file with BOM encodings
2024-03-01T20:27:21.3817776Z     imports partners from a csv file and prevents multiple imports
2024-03-01T20:27:21.3822052Z   #quantity_year_to_date
2024-03-01T20:27:21.5881368Z     does not include quantities from distributions issued during the previous year
2024-03-01T20:27:21.7576820Z     includes all item quantities from distributions issued during the current year
2024-03-01T20:27:21.7577569Z   associations
2024-03-01T20:27:21.7616685Z     is expected to have many children through families
2024-03-01T20:27:21.7651986Z     is expected to have many requests
2024-03-01T20:27:21.7712027Z     is expected to belong to organization required: true
2024-03-01T20:27:21.7748831Z     is expected to have many item_categories through partner_group
2024-03-01T20:27:21.7782926Z     is expected to have many users dependent => destroy
2024-03-01T20:27:21.7817757Z     is expected to have many requestable_items through item_categories source => items
2024-03-01T20:27:21.7869112Z     is expected to belong to partner_group optional: true
2024-03-01T20:27:21.7994884Z     is expected to have many families dependent => destroy
2024-03-01T20:27:21.8033020Z     is expected to have many requests
2024-03-01T20:27:21.8066882Z     is expected to have many distributions
2024-03-01T20:27:21.8067604Z     primary_user
2024-03-01T20:27:21.8372540Z       should return the first user ever created for a partner
2024-03-01T20:27:21.8373553Z   Validations >
2024-03-01T20:27:21.8464105Z     validates the quota is a number but it is not required
2024-03-01T20:27:21.8519343Z     must belong to an organization
2024-03-01T20:27:21.8829501Z     requires a unique email that is formatted correctly
2024-03-01T20:27:21.9096632Z     still requires a unique email between organizations
2024-03-01T20:27:21.9332304Z     does not require a unique name between organizations
2024-03-01T20:27:21.9602750Z     requires a unique name within an organization
2024-03-01T20:27:21.9603534Z   Filters
2024-03-01T20:27:21.9604162Z     by_status
2024-03-01T20:27:21.9996059Z       yields deactivated partner when deactivated status provided
2024-03-01T20:27:22.0378629Z       yields partners with the provided status
2024-03-01T20:27:22.0379539Z   #approvable?
2024-03-01T20:27:22.0380173Z     when status is not invited or awaiting_review
2024-03-01T20:27:22.0469706Z       should return false
2024-03-01T20:27:22.0470478Z     when status is invited
2024-03-01T20:27:22.0512538Z       should return true
2024-03-01T20:27:22.0513200Z     when status is awaiting_review
2024-03-01T20:27:22.0553177Z       should return true
2024-03-01T20:27:22.0553800Z   #deactivated?
2024-03-01T20:27:22.0554985Z     when the status is 'deactivated'
2024-03-01T20:27:22.0598168Z       should return true
2024-03-01T20:27:22.0599005Z     when the status is not 'deactivated'
2024-03-01T20:27:22.0640409Z       should return false
2024-03-01T20:27:22.0641048Z   versioning
2024-03-01T20:27:22.0678243Z     is expected to be versioned
2024-03-01T20:27:22.0678910Z   changing emails
2024-03-01T20:27:22.0956513Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-01T20:27:22.1274929Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-01T20:27:22.1536731Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-01T20:27:22.1801311Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-01T20:27:22.2056493Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-01T20:27:22.2317147Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-01T20:27:22.2559703Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-01T20:27:22.2562466Z 
2024-03-01T20:27:22.2563001Z Organization
2024-03-01T20:27:22.2565452Z   address
2024-03-01T20:27:22.2600530Z     does not add a trailing space when the zip code is missing
2024-03-01T20:27:22.2634562Z     returns an empty string when the org has no address components
2024-03-01T20:27:22.2667689Z     correctly formats an address string with commas and spaces
2024-03-01T20:27:22.2698764Z     does not add any separators before the city when street is missing
2024-03-01T20:27:22.2731676Z     does not add any separators after street when city, state, and zip are missing
2024-03-01T20:27:22.2732576Z   reminder_day
2024-03-01T20:27:22.2846404Z     can only contain numbers 1-28
2024-03-01T20:27:22.2847266Z   is_active
2024-03-01T20:27:22.6368751Z     returns active organizations
2024-03-01T20:27:22.6369539Z   .seed_items
2024-03-01T20:27:22.6370160Z     when provided with an organization to seed
2024-03-01T20:27:22.9551458Z       loads the base items into Item records
2024-03-01T20:27:22.9552376Z     when no organization is provided
2024-03-01T20:27:23.5924485Z       updates all organizations
2024-03-01T20:27:23.5925264Z   #short_name
2024-03-01T20:27:23.6001654Z     can only contain valid characters
2024-03-01T20:27:23.6002559Z   Associations >
2024-03-01T20:27:23.6051400Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-01T20:27:23.6098945Z     is expected to have many item_categories
2024-03-01T20:27:23.6133991Z     is expected to have many users through roles
2024-03-01T20:27:23.6134752Z     barcode_items
2024-03-01T20:27:23.8090974Z       returns only this organization's barcodes, no globals
2024-03-01T20:27:23.8091607Z       .all
2024-03-01T20:27:23.9906126Z         includes global barcode items also
2024-03-01T20:27:23.9907465Z     distributions
2024-03-01T20:27:23.9908031Z       upcoming
2024-03-01T20:27:24.0624448Z         retrieves the distributions scheduled for this week that have not yet happened
2024-03-01T20:27:24.0625426Z     items
2024-03-01T20:27:24.0625858Z       .during
2024-03-01T20:27:25.9879780Z         return ranking of all items
2024-03-01T20:27:25.9880885Z       .other
2024-03-01T20:27:27.9114115Z         returns all items for this organization designated 'other'
2024-03-01T20:27:27.9115104Z       .during.bottom
2024-03-01T20:27:29.8549527Z         return just 3 elements
2024-03-01T20:27:31.7902125Z         return 3 least used items
2024-03-01T20:27:31.7902697Z       .during.top
2024-03-01T20:27:33.7632387Z         return 3 most used items
2024-03-01T20:27:35.7243995Z         return just 3 elements
2024-03-01T20:27:35.7245024Z     users
2024-03-01T20:27:35.7245681Z       when a organizaton has a user that has two roles
2024-03-01T20:27:35.9219676Z         should returns users without duplications
2024-03-01T20:27:35.9220874Z   #ordered_requests
2024-03-01T20:27:36.1113613Z     puts active requests before fulfilled requests
2024-03-01T20:27:36.1114603Z     ordering of requests with matching status
2024-03-01T20:27:36.3040859Z       puts the most recently updated request before older requests
2024-03-01T20:27:36.3041611Z   after_create
2024-03-01T20:27:36.3358210Z     should update the state of the account request
2024-03-01T20:27:36.3359023Z   #assign_attributes_from_account_request
2024-03-01T20:27:36.3453451Z     should assign the proper attributes to the organization
2024-03-01T20:27:36.3454016Z   versioning
2024-03-01T20:27:36.3489916Z     is expected to be versioned
2024-03-01T20:27:36.3490784Z   #seed_items
2024-03-01T20:27:36.5348708Z     allows a collection of items to be seeded
2024-03-01T20:27:36.7159884Z     allows a single base item to be seeded
2024-03-01T20:27:36.7160675Z     when given an item that already exists
2024-03-01T20:27:36.8977484Z       gracefully skips the item
2024-03-01T20:27:36.8978926Z     when given an item name that already exists, but with an 'other' partner key
2024-03-01T20:27:37.0900789Z       updates the old item to use the new base item as its base
2024-03-01T20:27:37.0901832Z   earliest reporting year
2024-03-01T20:27:37.3440202Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-03-01T20:27:37.5134873Z     is the organization created year if no associated data
2024-03-01T20:27:37.5135774Z   valid_items
2024-03-01T20:27:37.6858064Z     returns an array of item partner keys
2024-03-01T20:27:37.8686710Z     only shows active valid items
2024-03-01T20:27:37.8687258Z     with invisible items
2024-03-01T20:27:37.8984958Z       only shows active and visible items
2024-03-01T20:27:37.8985888Z   total_inventory
2024-03-01T20:27:38.0702708Z     returns 0 if there is nothing
2024-03-01T20:27:38.3082178Z     returns a sum total of all inventory at all storage locations
2024-03-01T20:27:38.3082918Z   validations
2024-03-01T20:27:38.3163151Z     validates that attachments are png or jpgs
2024-03-01T20:27:38.4932923Z     validates that short names are unique
2024-03-01T20:27:38.5004260Z     validates that attachment file size is not higher than 1 MB
2024-03-01T20:27:38.5100850Z     validates that at least one distribution type is enabled
2024-03-01T20:27:38.5101933Z   from_email
2024-03-01T20:27:38.6987222Z     returns admin email when not present
2024-03-01T20:27:38.8661004Z     returns email when present
2024-03-01T20:27:39.0710189Z     returns admin email when it's empty space
2024-03-01T20:27:39.3746035Z     returns admin email when it's empty
2024-03-01T20:27:39.3749277Z   deadline_day
2024-03-01T20:27:39.3914074Z     can only contain numbers 1-28
2024-03-01T20:27:39.3914990Z   geocode
2024-03-01T20:27:39.5857234Z     adds coordinates to the database
2024-03-01T20:27:39.5858253Z   default storage location
2024-03-01T20:27:39.5907207Z     associates the default storage location with a storage location
2024-03-01T20:27:39.5943211Z     returns nil when not set
2024-03-01T20:27:39.5944174Z 
2024-03-01T20:27:39.5944545Z Partners::RequestApprovalService
2024-03-01T20:27:39.5945440Z   #call
2024-03-01T20:27:39.5947579Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-01T20:27:39.6256918Z       does not have an error
2024-03-01T20:27:39.6257848Z     when the partner is not yet awaiting approval
2024-03-01T20:27:39.6542282Z       should send an email notification to the partner's organization
2024-03-01T20:27:39.6822814Z       should set the status on the partner record to awaiting_review
2024-03-01T20:27:39.6823640Z     when the partner is already awaiting approval
2024-03-01T20:27:39.7079520Z       should return an error saying it the partner is already requested approval
2024-03-01T20:27:39.7080537Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-01T20:27:39.7319295Z       should return an error re social media
2024-03-01T20:27:39.7320689Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-01T20:27:39.7321555Z 
2024-03-01T20:27:39.7321758Z ItemsOutTotalQuery
2024-03-01T20:27:39.7322721Z   items_out_total_query
2024-03-01T20:27:39.8539209Z     returns a sum total of all out-flows
2024-03-01T20:27:39.8540081Z 
2024-03-01T20:27:39.8540398Z Partners::Child
2024-03-01T20:27:39.8541005Z   associations
2024-03-01T20:27:39.8592183Z     is expected to belong to family required: true
2024-03-01T20:27:39.8649177Z     is expected to have many child_item_requests dependent => destroy
2024-03-01T20:27:39.8650135Z   #display_name
2024-03-01T20:27:39.8930103Z     should return a child's first and last name
2024-03-01T20:27:39.8930628Z   versioning
2024-03-01T20:27:39.8963526Z     is expected to be versioned
2024-03-01T20:27:39.8964097Z 
2024-03-01T20:27:39.8964405Z CalendarService
2024-03-01T20:27:40.0107302Z   #time_zones
2024-03-01T20:27:40.0107949Z   .calendar
2024-03-01T20:27:40.0708918Z     should print the calendar correctly
2024-03-01T20:27:40.0709607Z 
2024-03-01T20:27:40.0709823Z ItemsInQuery
2024-03-01T20:27:40.0710568Z   items_in
2024-03-01T20:27:40.4216902Z     does not count negative adjustments towards in-flow
2024-03-01T20:27:40.7076092Z     returns a collection with the fields name, item_id, quantity
2024-03-01T20:27:41.0668981Z     does not count transfers going in the negative direction
2024-03-01T20:27:41.3412528Z     includes donations, purchases, adjustments, transfers among sources
2024-03-01T20:27:41.3413303Z 
2024-03-01T20:27:41.3413591Z Reports::OtherProductsReportService
2024-03-01T20:27:41.3414557Z   #report
2024-03-01T20:27:41.5218772Z     should report zero values
2024-03-01T20:27:42.1231399Z     should report normal values
2024-03-01T20:27:42.1231993Z 
2024-03-01T20:27:42.1232326Z TextInterpolatorService
2024-03-01T20:27:42.1232960Z   #call
2024-03-01T20:27:42.1274006Z     returns interpolated text
2024-03-01T20:27:42.1274814Z     when interpolations are nil
2024-03-01T20:27:42.1309132Z       returns text
2024-03-01T20:27:42.1309955Z     when text is nil
2024-03-01T20:27:42.1346976Z       returns nil
2024-03-01T20:27:42.1347728Z     when interpolations are not present
2024-03-01T20:27:42.1382682Z       returns text
2024-03-01T20:27:42.1383388Z     when interpolations are empty
2024-03-01T20:27:42.1415744Z       returns text
2024-03-01T20:27:42.1416262Z     when text is empty
2024-03-01T20:27:42.1450308Z       returns empty string
2024-03-01T20:27:42.1451072Z 
2024-03-01T20:27:42.1451404Z DistributionsController
2024-03-01T20:27:42.1452331Z   While signed in
2024-03-01T20:27:42.1453097Z     POST #create
2024-03-01T20:27:42.1454213Z       when line item quantity is not positive
2024-03-01T20:27:42.2114772Z         flashes an error
2024-03-01T20:27:42.2115955Z       multiple line_items that have inventory quantity below recommended quantity
2024-03-01T20:27:42.2984541Z         redirects with a flash notice and a flash alert
2024-03-01T20:27:42.2985858Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-01T20:27:42.3717731Z         redirects with a flash notice and a flash error
2024-03-01T20:27:42.3718460Z       multiple line_items that have inventory quantity below minimum quantity
2024-03-01T20:27:42.4624169Z         redirects with a flash notice and a flash error
2024-03-01T20:27:42.4625129Z     PUT #update
2024-03-01T20:27:42.4625969Z       when distribution causes inventory quantity to be below minimum quantity
2024-03-01T20:27:42.5782706Z         redirects with a flash notice and a flash error
2024-03-01T20:27:42.5783636Z       when distribution has items updated for minimum quantity
2024-03-01T20:27:42.7149661Z         redirects with a flash notice and send send_notification
2024-03-01T20:27:42.7150904Z       when distribution causes inventory quantity to be below recommended quantity
2024-03-01T20:27:42.8292639Z         redirects with a flash notice and a flash error
2024-03-01T20:27:42.8293360Z 
2024-03-01T20:27:42.8293784Z DistributionPdf
2024-03-01T20:27:42.8875223Z   #non_request_data
2024-03-01T20:27:42.9562741Z   #request_data
2024-03-01T20:27:42.9563144Z 
2024-03-01T20:27:42.9563513Z Exports::ExportDonationsCSVService
2024-03-01T20:27:42.9564198Z   #generate_csv_data
2024-03-01T20:27:43.0755770Z     should match the expected content for the csv
2024-03-01T20:27:43.0756502Z 
2024-03-01T20:27:43.0756729Z TransferDestroyService
2024-03-01T20:27:43.0757339Z   #call
2024-03-01T20:27:43.0758674Z     because transfer should not be deleted
2024-03-01T20:27:43.2641166Z       should return an OpenStruct with the raised error
2024-03-01T20:27:43.2642317Z     when an issue occurs in transaction
2024-03-01T20:27:43.2643235Z       because the transfer_id does not match any Transfer
2024-03-01T20:27:43.4652569Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-01T20:27:43.4653704Z       because the transfer destroy raised an error
2024-03-01T20:27:43.6708551Z         should return a OpenStruct with the raised error
2024-03-01T20:27:43.6709807Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-03-01T20:27:43.8503525Z         should return a OpenStruct with the raised error
2024-03-01T20:27:43.8504749Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-03-01T20:27:44.0411254Z         should return a OpenStruct with the raised error
2024-03-01T20:27:44.0412223Z     when there are no issues
2024-03-01T20:27:44.2381125Z       should execute the expected methods
2024-03-01T20:27:44.4390312Z       should return an OpenStruct with success? set to true
2024-03-01T20:27:44.4391049Z 
2024-03-01T20:27:44.4394044Z DonationsController
2024-03-01T20:27:44.4394927Z   While signed in as an organization admin >
2024-03-01T20:27:44.4395941Z     DELETE #destroy
2024-03-01T20:27:44.4773167Z       redirects to the index
2024-03-01T20:27:44.4773897Z   calculating total value of multiple donations
2024-03-01T20:27:44.6188069Z     works correctly for multiple line items per donation
2024-03-01T20:27:44.6230599Z     returns zero for an empty array of donations
2024-03-01T20:27:44.6231558Z   calculating total money raised for all donations
2024-03-01T20:27:44.6363327Z     correctly calculates the total
2024-03-01T20:27:44.6399834Z     returns zero for an empty array of donations
2024-03-01T20:27:44.6400737Z   While signed in as a normal user >
2024-03-01T20:27:44.6401938Z     GET #edit
2024-03-01T20:27:44.6616180Z       returns http success
2024-03-01T20:27:44.6616830Z     PUT#update
2024-03-01T20:27:44.6940835Z       redirects to index after update
2024-03-01T20:27:44.8054402Z       updates storage quantity correctly
2024-03-01T20:27:44.8055299Z       when removing a line item
2024-03-01T20:27:44.9104551Z         updates storage invetory item quantity correctly
2024-03-01T20:27:44.9105797Z       when changing storage location
2024-03-01T20:27:44.9144332Z         rolls back updates if quantity would go below 0
2024-03-01T20:27:45.0312967Z         updates storage quantity correctly
2024-03-01T20:27:45.0314229Z     DELETE #destroy
2024-03-01T20:27:45.0480620Z       redirects to the dashboard path
2024-03-01T20:27:45.0481587Z     POST#create
2024-03-01T20:27:45.0669398Z       renders GET#new with error on failure
2024-03-01T20:27:45.1060533Z       redirects to GET#edit on success
2024-03-01T20:27:45.1061553Z     GET #new
2024-03-01T20:27:45.1189332Z       returns http success
2024-03-01T20:27:45.1190338Z     GET #index
2024-03-01T20:27:45.1323758Z       returns http success
2024-03-01T20:27:45.1324383Z     GET #show
2024-03-01T20:27:45.1481413Z       returns http success
2024-03-01T20:27:45.1482090Z 
2024-03-01T20:27:45.1482450Z ReminderDeadlineJob
2024-03-01T20:27:45.1483453Z   #perform
2024-03-01T20:27:45.1712418Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-01T20:27:45.1713319Z 
2024-03-01T20:27:45.1713562Z Transfer
2024-03-01T20:27:45.1714771Z   Scopes >
2024-03-01T20:27:45.1932259Z     `to_location` can filter out transfers to a specific location
2024-03-01T20:27:45.2149938Z     `from_location` can filter out transfers from a specific location
2024-03-01T20:27:45.2151587Z   versioning
2024-03-01T20:27:45.2185895Z     is expected to be versioned
2024-03-01T20:27:45.2187011Z   behaves like itemizable
2024-03-01T20:27:45.2187653Z     .line_items
2024-03-01T20:27:45.2188622Z       quantities_by_name
2024-03-01T20:27:45.2672872Z         returns a hash of items with id, name, and quantity
2024-03-01T20:27:45.3158212Z         leaves out zero-quantitied items if requested
2024-03-01T20:27:45.3159097Z       total
2024-03-01T20:27:45.3663880Z         has an item total
2024-03-01T20:27:45.3664571Z       combine!
2024-03-01T20:27:45.3928399Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:27:45.4376872Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:27:45.4377506Z       sorted
2024-03-01T20:27:45.5082380Z         displays the items, sorted by name
2024-03-01T20:27:45.5083182Z     .to_a
2024-03-01T20:27:45.5083680Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:27:45.5424399Z         calls line_item_values
2024-03-01T20:27:45.5425159Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:27:45.5759109Z         raises an error
2024-03-01T20:27:45.5760205Z   Methods >
2024-03-01T20:27:45.7720271Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-03-01T20:27:45.7721347Z   Validations >
2024-03-01T20:27:45.9529546Z     must only use storage locations that belong to the organization (no hacks!)
2024-03-01T20:27:45.9656207Z     must have different storage locations
2024-03-01T20:27:46.0297138Z     requires that the line items must have sufficient quantity in the inventory
2024-03-01T20:27:46.0376659Z     must belong to an organization
2024-03-01T20:27:46.0495750Z     must have storage locations set
2024-03-01T20:27:46.0724378Z     requires that each line item exists in the inventory
2024-03-01T20:27:46.0725073Z 
2024-03-01T20:27:46.0725490Z ProductDriveHelper
2024-03-01T20:27:46.0726968Z   #is_virtual
2024-03-01T20:27:46.0728524Z     when the product drive wasn't held virtually
2024-03-01T20:27:46.0809006Z       is expected to eq "No"
2024-03-01T20:27:46.0809592Z     when the product drive was held virtually
2024-03-01T20:27:46.0860367Z       is expected to eq "Yes"
2024-03-01T20:27:46.0861157Z     when a product drive was not provided
2024-03-01T20:27:46.0904908Z       without argument
2024-03-01T20:27:46.0946712Z       with blank argument
2024-03-01T20:27:46.0948105Z 
2024-03-01T20:27:46.0948362Z AccountRequestMailer
2024-03-01T20:27:46.0949646Z   #approval_request
2024-03-01T20:27:46.1107442Z     should be sent to the info@humanessentials.app email address
2024-03-01T20:27:46.1380012Z     should include details of the account request
2024-03-01T20:27:46.1510275Z     should include the admin link to create the new organization from the account request
2024-03-01T20:27:46.1638691Z     should include the admin link to reject the organization
2024-03-01T20:27:46.1756052Z     should have the correct subject
2024-03-01T20:27:46.1756926Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:27:46.1802798Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:27:46.1803507Z   #confirmation
2024-03-01T20:27:46.1919648Z     should have the correct subject
2024-03-01T20:27:46.2031143Z     should be from no-reply@humanessentials.app
2024-03-01T20:27:46.2237973Z     should be sent to the specified account_request email
2024-03-01T20:27:46.2238758Z     HTML format
2024-03-01T20:27:46.2361697Z       should include the button to confirm the request
2024-03-01T20:27:46.2498816Z       should include the staging/demo account information
2024-03-01T20:27:46.2616851Z       should include the instruction video link
2024-03-01T20:27:46.2617990Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:27:46.2664016Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:27:46.2664987Z     Text format
2024-03-01T20:27:46.2776354Z       should include the instruction video link
2024-03-01T20:27:46.2890587Z       should include the staging/demo account information
2024-03-01T20:27:46.3003092Z       should include the button to confirm the request
2024-03-01T20:27:46.3004079Z   #rejection
2024-03-01T20:27:46.3117519Z     should have the correct subject
2024-03-01T20:27:46.3229865Z     should include the rejection reason
2024-03-01T20:27:46.3337398Z     should be sent to the correct email address
2024-03-01T20:27:46.3338298Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:27:46.3383171Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:27:46.3383985Z 
2024-03-01T20:27:46.3384223Z OrganizationUpdateService
2024-03-01T20:27:46.3385163Z   #update
2024-03-01T20:27:46.3386265Z     when object is valid
2024-03-01T20:27:46.5189495Z       should update and return true
2024-03-01T20:27:46.5190143Z     when object is invalid
2024-03-01T20:27:46.6978685Z       should not update and return false
2024-03-01T20:27:46.6979489Z     when organization has partners
2024-03-01T20:27:46.6980705Z       when all of a single partner's request flags will be disabled
2024-03-01T20:27:46.9146086Z         should add an error message to the organization
2024-03-01T20:27:47.1280033Z         should NOT change request flags in organization or its partners
2024-03-01T20:27:47.1281894Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-01T20:27:47.3458775Z         should allow the disabling of request flags in organization and its partners
2024-03-01T20:27:47.3460143Z   #update_partner_flags
2024-03-01T20:27:47.3460612Z     when request flags have changed
2024-03-01T20:27:47.5634990Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-01T20:27:47.7843604Z       should update partners when disabling quantity-based request flags
2024-03-01T20:27:48.0066843Z       should update partners when disabling child and individual request flags
2024-03-01T20:27:48.0068239Z     when request flags haven't changed
2024-03-01T20:27:48.2159497Z       should not update partners
2024-03-01T20:27:48.2160332Z 
2024-03-01T20:27:48.2160710Z ItemCreateService
2024-03-01T20:27:48.2161337Z   #call
2024-03-01T20:27:48.2162377Z     when there are no issues
2024-03-01T20:27:48.3884464Z       should execute the expected methods
2024-03-01T20:27:48.5668927Z       should return an OpenStruct with success? set to true and the item
2024-03-01T20:27:48.5670246Z     when an issue occurs in transaction
2024-03-01T20:27:48.5671129Z       because a inventory item creation failed and raised an error
2024-03-01T20:27:48.7375774Z         should return a OpenStruct with the raised error
2024-03-01T20:27:48.7376819Z       because the organization_id does not match any Organization
2024-03-01T20:27:48.9083322Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-01T20:27:48.9084986Z       because the item create raised an error
2024-03-01T20:27:49.0870377Z         should return a OpenStruct with the raised error
2024-03-01T20:27:49.0871054Z 
2024-03-01T20:27:49.0871671Z InventoryCheckService
2024-03-01T20:27:49.0872270Z   call
2024-03-01T20:27:49.0872822Z     alert
2024-03-01T20:27:49.1614425Z       should set the alert
2024-03-01T20:27:49.1615091Z     error
2024-03-01T20:27:49.2379224Z       should set the error
2024-03-01T20:27:49.2379821Z 
2024-03-01T20:27:49.2380181Z Reports::ChildrenServedReportService
2024-03-01T20:27:49.2381051Z   #report
2024-03-01T20:27:49.4182568Z     should report zero values
2024-03-01T20:27:49.9244428Z     should report normal values
2024-03-01T20:27:50.4163630Z     should work with no distribution_quantity
2024-03-01T20:27:50.4164336Z 
2024-03-01T20:27:50.4164734Z AccountRequest
2024-03-01T20:27:50.4302017Z   #confirm!
2024-03-01T20:27:50.4426043Z   #reject!
2024-03-01T20:27:50.4427105Z   #identity_token
2024-03-01T20:27:50.4512796Z     should return a JWT token that contains the id of the account_request_id
2024-03-01T20:27:50.4513914Z     when the account_request is not persisted
2024-03-01T20:27:50.4599352Z       should raise an error
2024-03-01T20:27:50.4600167Z   versioning
2024-03-01T20:27:50.4636059Z     is expected to be versioned
2024-03-01T20:27:50.4636916Z   validations
2024-03-01T20:27:50.4794244Z     is expected to validate that :email cannot be empty/falsy
2024-03-01T20:27:50.4925892Z     is expected to validate that :email is case-sensitively unique
2024-03-01T20:27:50.5055963Z     is expected to validate that the length of :request_details is at least 50
2024-03-01T20:27:50.5189627Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-01T20:27:50.5358036Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:27:50.5484012Z     is expected not to allow :email to be ‹"not_email"›
2024-03-01T20:27:50.5594309Z     is expected to allow :email to be ‹"madeline.huel@christiansen.test"›
2024-03-01T20:27:50.5595573Z     when the email provided is already used by an existing organization
2024-03-01T20:27:50.7438526Z       should not allow the email
2024-03-01T20:27:50.7439677Z     when the email provided is already used by an existing user
2024-03-01T20:27:50.7647087Z       should not allow the email
2024-03-01T20:27:50.7647768Z   #processed?
2024-03-01T20:27:50.7648672Z     when the account request has no associated organization
2024-03-01T20:27:50.7740693Z       should return false
2024-03-01T20:27:50.7741441Z     when the account request has a associated organization
2024-03-01T20:27:50.9546999Z       should return true
2024-03-01T20:27:50.9547796Z   .get_by_identity_token
2024-03-01T20:27:50.9549045Z     when the identity_token provided does not match any AccountRequest
2024-03-01T20:27:50.9588124Z       should return nil
2024-03-01T20:27:50.9589800Z     when the identity_token corresponds to an existing AccountRequest
2024-03-01T20:27:50.9681182Z       should return the corresponding AccountRequest
2024-03-01T20:27:50.9682297Z   associations
2024-03-01T20:27:50.9718480Z     is expected to have one organization class_name => Organization
2024-03-01T20:27:50.9771566Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-01T20:27:50.9772611Z 
2024-03-01T20:27:50.9772918Z DonationDestroyService
2024-03-01T20:27:50.9773856Z   #call
2024-03-01T20:27:50.9774934Z     when the donation destroy fails
2024-03-01T20:27:50.9826707Z       to not be a success
2024-03-01T20:27:50.9827690Z     when the organization_id matches no Organization
2024-03-01T20:27:50.9863919Z       to not be a success
2024-03-01T20:27:50.9864881Z     when storage_location fails to decrease the inventory of the donation
2024-03-01T20:27:50.9921708Z       to not be a success
2024-03-01T20:27:50.9922687Z     when the donation_id matches no Donation owned by the organization
2024-03-01T20:27:50.9962309Z       to not be a success
2024-03-01T20:27:50.9963260Z     when the donation succesfully gets destroyed
2024-03-01T20:27:51.0206935Z       to be a success
2024-03-01T20:27:51.0207581Z 
2024-03-01T20:27:51.0208456Z HelpController
2024-03-01T20:27:51.0209428Z   While signed in as a normal user >
2024-03-01T20:27:51.0210350Z     GET #show
2024-03-01T20:27:51.0299038Z       does not display help page when the user logs out
2024-03-01T20:27:51.0438565Z       returns http success
2024-03-01T20:27:51.0439251Z 
2024-03-01T20:27:51.0439501Z DonationCreateService
2024-03-01T20:27:51.0441765Z   #call
2024-03-01T20:27:51.0651292Z     should create the donation
2024-03-01T20:27:51.0651889Z 
2024-03-01T20:27:51.0652554Z DeallocateKitInventoryService
2024-03-01T20:27:51.0653812Z   #deallocate
2024-03-01T20:27:51.0654607Z     when inventory items are available
2024-03-01T20:27:51.0656223Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-01T20:27:51.5159943Z         raises error about KitAllocation not found
2024-03-01T20:27:51.5161366Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-01T20:27:51.8215188Z         raises error about inconsistent inventory in or out
2024-03-01T20:27:51.8216945Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-01T20:27:52.1489175Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-01T20:27:52.1490478Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-01T20:27:52.4745660Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-01T20:27:52.4747215Z   #error
2024-03-01T20:27:52.4747919Z     when the storage location organization doesn't match
2024-03-01T20:27:52.7006734Z       returns error
2024-03-01T20:27:52.7007522Z 
2024-03-01T20:27:52.7007844Z Partners::FamilyRequestCreateService
2024-03-01T20:27:52.7009042Z   #call
2024-03-01T20:27:52.7010230Z     when the arguments are correct
2024-03-01T20:27:52.7011265Z       with children
2024-03-01T20:27:52.8096159Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-03-01T20:27:52.8097013Z       without children
2024-03-01T20:27:52.8382295Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-03-01T20:27:52.8383596Z     when the arguments are incorrect
2024-03-01T20:27:52.8384142Z       because a unrecognized item_id was provided
2024-03-01T20:27:52.8623679Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-01T20:27:52.8624596Z       because no family_requests_attributes were defined
2024-03-01T20:27:52.8852401Z         should return the Partners::FamilyRequestCreateService object with an error
2024-03-01T20:27:52.8853483Z 
2024-03-01T20:27:52.8853685Z TransfersController
2024-03-01T20:27:52.8855082Z   While signed in
2024-03-01T20:27:52.8856455Z     GET #show
2024-03-01T20:27:52.9115492Z       returns http success
2024-03-01T20:27:52.9116049Z     GET #index
2024-03-01T20:27:52.9238337Z       returns http success
2024-03-01T20:27:52.9238944Z       when filtering by date
2024-03-01T20:27:52.9239726Z         when date parameters are supplied
2024-03-01T20:27:52.9666582Z           only returns the correct obejects
2024-03-01T20:27:52.9667370Z         when date parameters are not supplied
2024-03-01T20:27:53.0042213Z           returns all objects
2024-03-01T20:27:53.0042855Z     Looking at a different organization
2024-03-01T20:27:53.1866743Z       redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:53.1867777Z     GET #new
2024-03-01T20:27:53.1996220Z       returns http success
2024-03-01T20:27:53.1996928Z     POST #create
2024-03-01T20:27:53.2380771Z       redirects to #show when successful
2024-03-01T20:27:53.2513915Z       renders to #new when failing
2024-03-01T20:27:53.2514707Z   While not signed in
2024-03-01T20:27:53.2644570Z     redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:53.2645300Z 
2024-03-01T20:27:53.2645868Z Audit
2024-03-01T20:27:53.2647120Z   Methods >
2024-03-01T20:27:53.5182701Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-03-01T20:27:53.8506136Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-03-01T20:27:53.8507346Z   versioning
2024-03-01T20:27:53.8544950Z     is expected to be versioned
2024-03-01T20:27:53.8545850Z   Scopes >
2024-03-01T20:27:53.8974865Z     `at_location` can filter out audits to a specific location
2024-03-01T20:27:53.8975785Z   Validations >
2024-03-01T20:27:53.9517923Z     can have line items that has quantity as a positive integer
2024-03-01T20:27:54.0044540Z     cannot have duplicate line items
2024-03-01T20:27:54.0138932Z     must belong to an organization admin of its organization
2024-03-01T20:27:54.0410060Z     must belong to an organization
2024-03-01T20:27:54.0940399Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-03-01T20:27:54.1449427Z     can not have line items that has quantity as negative integer
2024-03-01T20:27:54.1993417Z     can have line items that has quantity as zero
2024-03-01T20:27:54.1994406Z   behaves like itemizable
2024-03-01T20:27:54.1995019Z     .to_a
2024-03-01T20:27:54.1995658Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:27:54.2450468Z         calls line_item_values
2024-03-01T20:27:54.2451007Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:27:54.2905607Z         raises an error
2024-03-01T20:27:54.2906747Z     .line_items
2024-03-01T20:27:54.2907842Z       quantities_by_name
2024-03-01T20:27:54.3718557Z         returns a hash of items with id, name, and quantity
2024-03-01T20:27:54.4543525Z         leaves out zero-quantitied items if requested
2024-03-01T20:27:54.4544313Z       combine!
2024-03-01T20:27:54.4936568Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:27:54.5515087Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:27:54.5515777Z       total
2024-03-01T20:27:54.6326639Z         has an item total
2024-03-01T20:27:54.6327642Z       sorted
2024-03-01T20:27:54.7449245Z         displays the items, sorted by name
2024-03-01T20:27:54.7451021Z 
2024-03-01T20:27:54.7451333Z Donation
2024-03-01T20:27:54.7453142Z   Scopes >
2024-03-01T20:27:54.7453645Z     during >
2024-03-01T20:27:54.7656220Z       returns all donations created between two dates
2024-03-01T20:27:54.7657177Z     by_source >
2024-03-01T20:27:54.7657672Z       when source is a symbol
2024-03-01T20:27:54.7658318Z         when source is invalid
2024-03-01T20:27:54.7886477Z           does not throw errors, returns no results
2024-03-01T20:27:54.7887261Z         when source is valid
2024-03-01T20:27:54.8062050Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-01T20:27:54.8062937Z       when source is not a symbol
2024-03-01T20:27:54.8063623Z         when source is invalid
2024-03-01T20:27:54.8234137Z           does not throw errors, returns no results
2024-03-01T20:27:54.8234985Z         when source comes from the SOURCES hash
2024-03-01T20:27:54.8398673Z           returns all donations with the provided source
2024-03-01T20:27:54.8401974Z   Methods >
2024-03-01T20:27:54.8402856Z     money_raised
2024-03-01T20:27:54.9028135Z       tracks the money raised in a donation
2024-03-01T20:27:54.9029011Z     remove
2024-03-01T20:27:54.9643948Z       works with either an id or an object
2024-03-01T20:27:55.0287900Z       removes the item from the donation
2024-03-01T20:27:55.0964657Z       fails gracefully if the item doesn't exist
2024-03-01T20:27:55.0965354Z     source_view
2024-03-01T20:27:55.0966064Z       from a drive
2024-03-01T20:27:55.0966653Z         participant known
2024-03-01T20:27:55.0967518Z           contact name present
2024-03-01T20:27:55.1096211Z             returns participant display name
2024-03-01T20:27:55.1096959Z           no contact name
2024-03-01T20:27:55.1220408Z             returns drive display name
2024-03-01T20:27:55.1221295Z         unknown participant
2024-03-01T20:27:55.1321675Z           returns drive display name
2024-03-01T20:27:55.1322381Z       not from a drive
2024-03-01T20:27:55.1465232Z         returns source
2024-03-01T20:27:55.1465944Z       details
2024-03-01T20:27:55.1466828Z         misc
2024-03-01T20:27:55.1551567Z           returns a truncated comment
2024-03-01T20:27:55.1552762Z         product drive
2024-03-01T20:27:55.1648585Z           returns product_drive name
2024-03-01T20:27:55.1649296Z         donation site
2024-03-01T20:27:55.1746626Z           returns donation_site name
2024-03-01T20:27:55.1747434Z         manufacturer
2024-03-01T20:27:55.1849441Z           returns manufacturer name
2024-03-01T20:27:55.1850333Z   behaves like itemizable
2024-03-01T20:27:55.1851212Z     .line_items
2024-03-01T20:27:55.1852315Z       sorted
2024-03-01T20:27:55.2363618Z         displays the items, sorted by name
2024-03-01T20:27:55.2364358Z       total
2024-03-01T20:27:55.2687440Z         has an item total
2024-03-01T20:27:55.2688071Z       combine!
2024-03-01T20:27:55.3137261Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:27:55.3535652Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:27:55.3536610Z       quantities_by_name
2024-03-01T20:27:55.3882432Z         leaves out zero-quantitied items if requested
2024-03-01T20:27:55.4208798Z         returns a hash of items with id, name, and quantity
2024-03-01T20:27:55.4209606Z     .to_a
2024-03-01T20:27:55.4210299Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:27:55.4538091Z         calls line_item_values
2024-03-01T20:27:55.4538825Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:27:55.4864613Z         raises an error
2024-03-01T20:27:55.4865269Z   Validations >
2024-03-01T20:27:55.4985206Z     requires a product drive participant if the source is 'Product Drive'
2024-03-01T20:27:55.5027026Z     requires an inventory (storage location)
2024-03-01T20:27:55.5075963Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:27:55.5192824Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-01T20:27:55.5255646Z     requires a source from the list of available sources
2024-03-01T20:27:55.5397554Z     is invalid when the line items are invalid
2024-03-01T20:27:55.5439339Z     must belong to an organization
2024-03-01T20:27:55.5552604Z     requires a donation_site if the source is 'Donation Site'
2024-03-01T20:27:55.5553134Z   Callbacks >
2024-03-01T20:27:55.5700771Z     automatically combines duplicate line_item records when they're created
2024-03-01T20:27:55.5827215Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:27:55.5828125Z   Associations >
2024-03-01T20:27:55.5828448Z     items >
2024-03-01T20:27:55.5984310Z       has_many
2024-03-01T20:27:55.5984904Z   SOURCES
2024-03-01T20:27:55.6020308Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-01T20:27:55.6055028Z     the hash values are immutable
2024-03-01T20:27:55.6089072Z     the hash is immutable
2024-03-01T20:27:55.6089486Z   versioning
2024-03-01T20:27:55.6124136Z     is expected to be versioned
2024-03-01T20:27:55.6125412Z 
2024-03-01T20:27:55.6125664Z DonationSitesController
2024-03-01T20:27:55.6126793Z   While not signed in
2024-03-01T20:27:55.6187849Z     redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:55.6188939Z   While signed in
2024-03-01T20:27:55.6189904Z     GET #edit
2024-03-01T20:27:55.6341943Z       returns http success
2024-03-01T20:27:55.6342491Z     DELETE #destroy
2024-03-01T20:27:55.6481865Z       returns http success
2024-03-01T20:27:55.6482339Z     GET #index
2024-03-01T20:27:55.6584468Z       returns http success
2024-03-01T20:27:55.6584995Z     GET #new
2024-03-01T20:27:55.6683687Z       returns http success
2024-03-01T20:27:55.6684349Z     GET #show
2024-03-01T20:27:55.6802706Z       returns http success
2024-03-01T20:27:55.6803318Z     Looking at a different organization
2024-03-01T20:27:55.8595614Z       redirects the user to the sign-in page for CRUD actions
2024-03-01T20:27:55.8596608Z     POST #import_csv
2024-03-01T20:27:55.8597525Z       behaves like csv import
2024-03-01T20:27:55.8598234Z         csv file with wrong headers
2024-03-01T20:27:55.8741950Z           presents a flash error message
2024-03-01T20:27:55.8847948Z           redirects to :index
2024-03-01T20:27:55.8848662Z         without a csv file
2024-03-01T20:27:55.8947033Z           redirects to :index
2024-03-01T20:27:55.9041662Z           presents a flash error message
2024-03-01T20:27:55.9042477Z         with a csv file
2024-03-01T20:27:55.9176135Z           presents a flash notice message
2024-03-01T20:27:55.9226864Z           invokes .import_csv
2024-03-01T20:27:55.9355896Z           redirects to :index
2024-03-01T20:27:55.9357034Z 
2024-03-01T20:27:55.9357393Z InventoryItem
2024-03-01T20:27:55.9390610Z   initializes the quantity to 0 if it was not specified
2024-03-01T20:27:55.9391524Z   Validations >
2024-03-01T20:27:55.9445600Z     requires an inventory association
2024-03-01T20:27:55.9488259Z     requires an item
2024-03-01T20:27:55.9488848Z     quantity >
2024-03-01T20:27:55.9543985Z       is numerical
2024-03-01T20:27:55.9598541Z       is less than the max integer
2024-03-01T20:27:55.9652490Z       is required
2024-03-01T20:27:55.9791100Z       is gte 0
2024-03-01T20:27:55.9791707Z   versioning
2024-03-01T20:27:55.9828198Z     is expected to be versioned
2024-03-01T20:27:55.9828937Z   Filtering >
2024-03-01T20:27:55.9829690Z     ->by_partner_key
2024-03-01T20:27:55.9957786Z       shows the Base Items by partner_key
2024-03-01T20:27:55.9958498Z 
2024-03-01T20:27:55.9958718Z Request
2024-03-01T20:27:55.9959931Z   total_items
2024-03-01T20:27:56.0056799Z     adds the quantity of all items in the request
2024-03-01T20:27:56.0057634Z   versioning
2024-03-01T20:27:56.0091077Z     is expected to be versioned
2024-03-01T20:27:56.0091769Z   Enums >
2024-03-01T20:27:56.0094478Z     #status
2024-03-01T20:27:56.0289742Z       scopes
2024-03-01T20:27:56.0290347Z   item data
2024-03-01T20:27:56.0364811Z     coerces item quantity and id to always be an integer before saving
2024-03-01T20:27:56.0366057Z 
2024-03-01T20:27:56.0366288Z BarcodeItem
2024-03-01T20:27:56.0367339Z   Organization barcodes
2024-03-01T20:27:56.0490172Z     updates a counter in Item whenever it tracks a new barcode
2024-03-01T20:27:56.0491962Z     validations >
2024-03-01T20:27:56.0658980Z       enforces value uniqueness within the organization
2024-03-01T20:27:56.0913388Z       does not enforces value uniqueness across organizations
2024-03-01T20:27:56.1061051Z       is valid only with an organization
2024-03-01T20:27:56.1173753Z       allows multiple barcodes to point at the same item
2024-03-01T20:27:56.1297108Z       does not enforce value uniqueness compared with the global scope
2024-03-01T20:27:56.1298106Z       item >
2024-03-01T20:27:56.1393414Z         is invalid without an item associated with it
2024-03-01T20:27:56.1394247Z       value >
2024-03-01T20:27:56.1488102Z         requires a value
2024-03-01T20:27:56.1488756Z       quantity >
2024-03-01T20:27:56.1578514Z         is not nil
2024-03-01T20:27:56.1668756Z         is an integer
2024-03-01T20:27:56.1758640Z         is not a negative number
2024-03-01T20:27:56.1759474Z     when searching for a barcode where there is a global and local with the same value
2024-03-01T20:27:56.2061527Z       favors the local barcode
2024-03-01T20:27:56.2062249Z     filters >
2024-03-01T20:27:56.2255919Z       ->item_id shows only barcodes for a specific item_id
2024-03-01T20:27:56.2256837Z     to_h >
2024-03-01T20:27:56.2369100Z       emits a hash for a line_item
2024-03-01T20:27:56.2370051Z     scopes >
2024-03-01T20:27:56.4250766Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-01T20:27:56.4366213Z       ->by_value returns the barcode with that value
2024-03-01T20:27:56.4577283Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-01T20:27:56.4578208Z   Barcodes of BaseItems ('Global')
2024-03-01T20:27:56.4665432Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-01T20:27:56.4666105Z     validations >
2024-03-01T20:27:56.4743106Z       is valid with or without an organization
2024-03-01T20:27:56.4828640Z       enforces uniqueness in the global scope
2024-03-01T20:27:56.4905946Z       allows multiple barcodes to point at the same base item
2024-03-01T20:27:56.4907130Z       item >
2024-03-01T20:27:56.4960019Z         is invalid without an item associated with it
2024-03-01T20:27:56.4960896Z       value >
2024-03-01T20:27:56.5008774Z         requires a value
2024-03-01T20:27:56.5009591Z       quantity >
2024-03-01T20:27:56.5062727Z         is not nil
2024-03-01T20:27:56.5113579Z         is an integer
2024-03-01T20:27:56.5162678Z         is not a negative number
2024-03-01T20:27:56.5163433Z     scopes >
2024-03-01T20:27:56.5165338Z       global
2024-03-01T20:27:56.5322852Z         includes all barcodes, for both base items and regular items
2024-03-01T20:27:56.5323755Z     filters >
2024-03-01T20:27:56.5467755Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-01T20:27:56.5633628Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-01T20:27:56.5751014Z       ->by_value returns the barcode with that value
2024-03-01T20:27:56.5751854Z   versioning
2024-03-01T20:27:56.5785971Z     is expected to be versioned
2024-03-01T20:27:56.5786767Z 
2024-03-01T20:27:56.5787242Z AccountRequestsController
2024-03-01T20:27:56.5788020Z   routing
2024-03-01T20:27:56.5826836Z     routes to #create
2024-03-01T20:27:56.5862588Z     routes to #new
2024-03-01T20:27:56.5863039Z 
2024-03-01T20:27:56.5863389Z Reports::PeriodSupplyReportService
2024-03-01T20:27:56.5864214Z   #report
2024-03-01T20:27:56.7631237Z     should report zero values
2024-03-01T20:27:56.7631944Z     with values
2024-03-01T20:27:57.3872698Z       should report normal values
2024-03-01T20:27:57.3873434Z 
2024-03-01T20:27:57.3873767Z DeadlineService
2024-03-01T20:27:57.3874894Z   #next_deadline
2024-03-01T20:27:57.3875710Z     do from the partner group
2024-03-01T20:27:57.3876706Z       when the deadline is after today
2024-03-01T20:27:57.4077966Z         returns a date within the current month
2024-03-01T20:27:57.4078660Z       when the deadline is before today
2024-03-01T20:27:57.4079237Z         returns a date in the next month
2024-03-01T20:27:57.4079765Z       when the deadline is today
2024-03-01T20:27:57.4112127Z         returns a date in the next month
2024-03-01T20:27:57.4112822Z     from the organization
2024-03-01T20:27:57.4113652Z       when the deadline is today
2024-03-01T20:27:57.4168367Z         returns a date in the next month
2024-03-01T20:27:57.4169159Z       when the deadline is after today
2024-03-01T20:27:57.4222394Z         returns a date within the current month
2024-03-01T20:27:57.4223118Z       when the deadline is before today
2024-03-01T20:27:57.4277905Z         returns a date in the next month
2024-03-01T20:27:57.4278820Z 
2024-03-01T20:27:57.4279011Z ItemizableUpdateService
2024-03-01T20:27:57.4280136Z   decreases
2024-03-01T20:27:57.5724781Z     should update quantity in same storage location
2024-03-01T20:27:57.7191967Z     should update quantity in different locations
2024-03-01T20:27:57.7192667Z   increases
2024-03-01T20:27:57.8632828Z     should update quantity in different locations
2024-03-01T20:27:58.0090205Z     should update quantity in same storage location
2024-03-01T20:27:58.0090839Z 
2024-03-01T20:27:58.0091036Z UserInviteService
2024-03-01T20:27:58.0091901Z   with a new user
2024-03-01T20:27:58.2725477Z     should create the user with roles
2024-03-01T20:27:58.2726169Z   with existing user
2024-03-01T20:27:58.2813420Z     should raise an error when reinviting an existing user with the same role
2024-03-01T20:27:58.4788675Z     should add roles to existing user
2024-03-01T20:27:58.4789698Z     with force: true
2024-03-01T20:27:58.4999418Z       should reinvite the user
2024-03-01T20:27:58.5000133Z 
2024-03-01T20:27:58.5000364Z Exports::ExportRequestService
2024-03-01T20:27:58.5001417Z   .generate_csv_data
2024-03-01T20:27:58.7020720Z     includes rows for each request with correct columns of item quantity
2024-03-01T20:27:58.8990180Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-01T20:27:58.8991031Z 
2024-03-01T20:27:58.8991179Z Purchase
2024-03-01T20:27:58.8992475Z   Callbacks >
2024-03-01T20:27:58.9188906Z     automatically combines duplicate line_item records when they're created
2024-03-01T20:27:58.9369602Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:27:58.9370567Z   Methods >
2024-03-01T20:27:58.9370958Z     storage_view
2024-03-01T20:27:59.0031963Z       returns name of storage location
2024-03-01T20:27:59.0032577Z     remove
2024-03-01T20:27:59.0708806Z       removes the item from the purchase
2024-03-01T20:27:59.1418033Z       fails gracefully if the item doesn't exist
2024-03-01T20:27:59.1418580Z   Associations >
2024-03-01T20:27:59.1419327Z     items >
2024-03-01T20:27:59.1614949Z       has_many
2024-03-01T20:27:59.1615601Z   versioning
2024-03-01T20:27:59.1654048Z     is expected to be versioned
2024-03-01T20:27:59.1654610Z   Scopes >
2024-03-01T20:27:59.1655045Z     during >
2024-03-01T20:27:59.1904525Z       returns all purchases created between two dates
2024-03-01T20:27:59.1905256Z   behaves like itemizable
2024-03-01T20:27:59.1905970Z     .to_a
2024-03-01T20:27:59.1907257Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:27:59.2275792Z         calls line_item_values
2024-03-01T20:27:59.2276260Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:27:59.2625145Z         raises an error
2024-03-01T20:27:59.2625865Z     .line_items
2024-03-01T20:27:59.2627337Z       quantities_by_name
2024-03-01T20:27:59.3006574Z         returns a hash of items with id, name, and quantity
2024-03-01T20:27:59.3393052Z         leaves out zero-quantitied items if requested
2024-03-01T20:27:59.3393681Z       combine!
2024-03-01T20:27:59.3871279Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:27:59.4280805Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:27:59.4281674Z       sorted
2024-03-01T20:27:59.4828060Z         displays the items, sorted by name
2024-03-01T20:27:59.4828684Z       total
2024-03-01T20:27:59.5203409Z         has an item total
2024-03-01T20:27:59.5204107Z   Validations >
2024-03-01T20:27:59.5280052Z     requires an inventory (storage location)
2024-03-01T20:27:59.5359243Z     is valid if categories have no values
2024-03-01T20:27:59.5440122Z     is valid if all categories add up to total
2024-03-01T20:27:59.5523720Z     is not valid if period supplies is non-zero but no other category is
2024-03-01T20:27:59.5693541Z     is invalid when the line items are invalid
2024-03-01T20:27:59.5773579Z     is not valid if categories do not add up
2024-03-01T20:27:59.5939899Z     is not valid if any category is non-zero but does not add up to the total
2024-03-01T20:27:59.6020036Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:27:59.6093795Z     must belong to an organization
2024-03-01T20:27:59.6094576Z 
2024-03-01T20:27:59.6094867Z RequestItem
2024-03-01T20:27:59.6095853Z   Methods >
2024-03-01T20:27:59.6096632Z     #from_json
2024-03-01T20:27:59.8811332Z       has the correct name
2024-03-01T20:28:00.1384106Z       has the correct amount on hand for location
2024-03-01T20:28:00.3868218Z       has the correct amount on hand
2024-03-01T20:28:00.6402679Z       has the correct quantity
2024-03-01T20:28:00.6403487Z 
2024-03-01T20:28:00.6403947Z Exports::ExportPurchasesCSVService
2024-03-01T20:28:00.6404855Z   #generate_csv_data
2024-03-01T20:28:00.7529014Z     should match the expected content for the csv
2024-03-01T20:28:00.7530045Z 
2024-03-01T20:28:00.7530281Z ServiceObjectErrorsMixin
2024-03-01T20:28:00.7530851Z   self.included
2024-03-01T20:28:00.7572383Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-03-01T20:28:00.7573198Z 
2024-03-01T20:28:00.7573391Z Partners::ServedArea
2024-03-01T20:28:00.7861915Z   must only allow valid client share values
2024-03-01T20:28:00.7909303Z   is expected to belong to county required: true
2024-03-01T20:28:00.7950636Z   is expected to belong to partner_profile required: true
2024-03-01T20:28:00.8087679Z   must only allow integer client shares
2024-03-01T20:28:00.8088252Z   versioning
2024-03-01T20:28:00.8124552Z     is expected to be versioned
2024-03-01T20:28:00.8125147Z 
2024-03-01T20:28:00.8125328Z RequestsConfirmationMailer
2024-03-01T20:28:00.8325675Z   handles duplicates
2024-03-01T20:28:00.8602361Z   pairs the right quantities with the right item names
2024-03-01T20:28:00.8603069Z   #confirmation_email
2024-03-01T20:28:00.8732382Z     renders the headers
2024-03-01T20:28:00.8905777Z     renders the body
2024-03-01T20:28:00.8907074Z 
2024-03-01T20:28:00.8907389Z LineItem
2024-03-01T20:28:00.8908654Z   Methods >
2024-03-01T20:28:00.8909298Z     item packages
2024-03-01T20:28:00.8910060Z       #has_packages
2024-03-01T20:28:00.8910795Z         item has no package size
2024-03-01T20:28:00.9042847Z           is expected to be falsy
2024-03-01T20:28:00.9043416Z         item has package size
2024-03-01T20:28:00.9215494Z           is expected to be truthy
2024-03-01T20:28:00.9216085Z       #package_count
2024-03-01T20:28:00.9216900Z         has packages
2024-03-01T20:28:00.9385380Z           is expected to eq "1"
2024-03-01T20:28:00.9385950Z         does not have packages
2024-03-01T20:28:00.9512474Z           is expected to be falsy
2024-03-01T20:28:00.9513095Z     #value_per_line_item
2024-03-01T20:28:00.9514060Z       item has value and quantity
2024-03-01T20:28:00.9686989Z         is expected to eq 25
2024-03-01T20:28:00.9687518Z       item has no value
2024-03-01T20:28:00.9814083Z         is expected to eq 0
2024-03-01T20:28:00.9814705Z   Scopes >
2024-03-01T20:28:00.9815681Z     ->active
2024-03-01T20:28:01.0228216Z       retrieves only those with active status
2024-03-01T20:28:01.0229199Z   Validations >
2024-03-01T20:28:01.0324623Z     requires an item
2024-03-01T20:28:01.0468882Z     requires a quantity
2024-03-01T20:28:01.1361319Z     the quantity must be a valid integer and cannot be 0
2024-03-01T20:28:01.1362024Z   package_count
2024-03-01T20:28:01.1561254Z     is equal to the quanity divided by the package_size
2024-03-01T20:28:01.1753420Z     is nil if there is no package_size
2024-03-01T20:28:01.1753985Z   versioning
2024-03-01T20:28:01.1793128Z     is expected to be versioned
2024-03-01T20:28:01.1793920Z 
2024-03-01T20:28:01.1794064Z Vendor
2024-03-01T20:28:01.1795430Z   behaves like provideable
2024-03-01T20:28:01.1796287Z     geocode
2024-03-01T20:28:01.1856491Z       adds coordinates to the database
2024-03-01T20:28:01.1857084Z     import_csv
2024-03-01T20:28:01.3655141Z       imports from a csv file
2024-03-01T20:28:01.3655746Z     Validations
2024-03-01T20:28:01.3704743Z       is invalid without an organization
2024-03-01T20:28:01.3773730Z       is invalid unless it has either a contact name or a business name
2024-03-01T20:28:01.3774526Z   versioning
2024-03-01T20:28:01.3809823Z     is expected to be versioned
2024-03-01T20:28:01.3810340Z   Methods
2024-03-01T20:28:01.3810819Z     volume
2024-03-01T20:28:01.4517077Z       retrieves the amount of product that has been bought from this vendor
2024-03-01T20:28:01.4519668Z 
2024-03-01T20:28:01.4519977Z RequestDestroyService
2024-03-01T20:28:01.4520782Z   #call
2024-03-01T20:28:01.4643910Z     should return an instance of itself
2024-03-01T20:28:01.4644560Z     when the request is already discarded
2024-03-01T20:28:01.4745187Z       should not be successful and have errors
2024-03-01T20:28:01.4745863Z     when the request_id matches no request
2024-03-01T20:28:01.4785936Z       should not be successful and have errors indicating request id is invalid
2024-03-01T20:28:01.4787152Z     when there are no validation errors
2024-03-01T20:28:01.4917947Z       should update the status column on the request
2024-03-01T20:28:01.5034052Z       should send a email notification to the partner
2024-03-01T20:28:01.5162663Z       should update the discarded_at column on the request
2024-03-01T20:28:01.5163616Z     when the request's partner is deactivated
2024-03-01T20:28:01.5441327Z       should have errors
2024-03-01T20:28:01.5442165Z 
2024-03-01T20:28:01.5442346Z HistoricalTrendsHelper
2024-03-01T20:28:01.5444152Z   #last_12_months
2024-03-01T20:28:01.5493363Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-01T20:28:01.5538646Z     returns the last 12 months starting from July when the current month is June
2024-03-01T20:28:01.5583403Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-01T20:28:01.5584222Z 
2024-03-01T20:28:01.5584526Z PartnerRequestRecertificationService
2024-03-01T20:28:01.5585217Z   #call
2024-03-01T20:28:01.5586258Z     when the partner is deactivated
2024-03-01T20:28:01.5887816Z       does not send an email
2024-03-01T20:28:01.5888340Z     when the arguments are correct
2024-03-01T20:28:01.6209607Z       should queue sending the notice to the partner
2024-03-01T20:28:01.6501085Z       should have no errors
2024-03-01T20:28:01.6799998Z       should change the partner status to approved
2024-03-01T20:28:01.6800841Z       but a unexpected error occurred during the save
2024-03-01T20:28:01.6801546Z         for partner approval
2024-03-01T20:28:01.7061830Z           should NOT queue sending the notice to the partner
2024-03-01T20:28:01.7309955Z           should have an error with the raised error
2024-03-01T20:28:01.7567561Z           should not change the partner status to recertification_required
2024-03-01T20:28:01.7568432Z     when the arguments are incorrect
2024-03-01T20:28:01.7569427Z       because the partner has already been requested to recertify
2024-03-01T20:28:01.7851786Z         should return the PartnerRequestRecertificationService object with an error
2024-03-01T20:28:01.7852611Z 
2024-03-01T20:28:01.7852806Z ItemsOutQuery
2024-03-01T20:28:01.7853647Z   items_out_query
2024-03-01T20:28:01.9001719Z     returns a collection with the fields name, item_id, quantity
2024-03-01T20:28:02.0110906Z     includes distributions, adjustments, transfers among sources
2024-03-01T20:28:02.0111769Z 
2024-03-01T20:28:02.0111942Z View::Inventory
2024-03-01T20:28:02.0113796Z   #storage_location_name
2024-03-01T20:28:02.0946283Z     should return the right name
2024-03-01T20:28:02.0946995Z   #all_items
2024-03-01T20:28:02.1779966Z     should return all items across storage locations
2024-03-01T20:28:02.1780694Z   #total_value_in_dollars
2024-03-01T20:28:02.2680408Z     should return total value across the given location
2024-03-01T20:28:02.2681146Z   .items_for_location
2024-03-01T20:28:02.3549715Z     should return the right values
2024-03-01T20:28:02.3550419Z     with include_omitted_items
2024-03-01T20:28:02.4412229Z       should add items not in the storage location
2024-03-01T20:28:02.4412979Z   #items_for_location
2024-03-01T20:28:02.5263836Z     should return the right values
2024-03-01T20:28:02.5264500Z     with include_omitted_items
2024-03-01T20:28:02.6155205Z       should add items not in the storage location
2024-03-01T20:28:02.6155696Z   #storage_locations_for_item
2024-03-01T20:28:02.7034542Z     should return all relevant IDs
2024-03-01T20:28:02.7035016Z   .total_inventory
2024-03-01T20:28:02.7888681Z     should return the total quantity
2024-03-01T20:28:02.7889319Z   #quantity_for
2024-03-01T20:28:02.7889841Z     with item id
2024-03-01T20:28:02.7890703Z       with storage location
2024-03-01T20:28:02.8779638Z         should return the quantity at that location
2024-03-01T20:28:02.8780373Z       with no storage location
2024-03-01T20:28:02.9639774Z         should return quantities across all storage locations
2024-03-01T20:28:02.9640947Z     with storage location but no item id
2024-03-01T20:28:03.0494397Z       should return all items at that location
2024-03-01T20:28:03.0495002Z 
2024-03-01T20:28:03.0495341Z SyncNDBNMembers
2024-03-01T20:28:03.0496377Z   .sync
2024-03-01T20:28:03.0497441Z     when the HTTP request is successful
2024-03-01T20:28:03.0498585Z       when no new NDBN Member has been added
2024-03-01T20:28:03.0881708Z         should not add any new NDBN Members
2024-03-01T20:28:03.0883963Z       when there are no exisiting NDBN Member records
2024-03-01T20:28:03.0980113Z         should create the NDBN Member records
2024-03-01T20:28:03.0980895Z       when the account name of a NDBN Member has changed
2024-03-01T20:28:03.1099595Z         should update the account name of the corresponding NDBN Member
2024-03-01T20:28:03.1100587Z     when the HTTP request does not get a response of 200
2024-03-01T20:28:03.1140240Z       should raise an error regarding the response code
2024-03-01T20:28:03.1140933Z 
2024-03-01T20:28:03.1141586Z DonationItemizedBreakdownService
2024-03-01T20:28:03.1142511Z   #fetch
2024-03-01T20:28:03.5221472Z     return the list of items donated with distributed
2024-03-01T20:28:03.5222649Z 
2024-03-01T20:28:03.5222917Z Question
2024-03-01T20:28:03.5227078Z   versioning
2024-03-01T20:28:03.5313056Z     is expected to be versioned
2024-03-01T20:28:03.5313541Z   punctuate
2024-03-01T20:28:03.5407631Z     should punctuate each string in a given array
2024-03-01T20:28:03.5408170Z   scope for_partners
2024-03-01T20:28:03.5698981Z     should filter out questions that aren't meant for partners
2024-03-01T20:28:03.5699467Z   remove_redundant_error
2024-03-01T20:28:03.5738778Z     should return an array with only one error message related to the checkboxes.
2024-03-01T20:28:03.5739335Z   scope for_banks
2024-03-01T20:28:03.5967226Z     should filter out questions that aren't meant for banks
2024-03-01T20:28:03.5967677Z   validations
2024-03-01T20:28:03.6029497Z     is expected to validate that :answer cannot be empty/falsy
2024-03-01T20:28:03.6089005Z     is expected to validate that :title cannot be empty/falsy
2024-03-01T20:28:03.6179868Z     question for_banks and for_partners attributes can't both be false
2024-03-01T20:28:03.6180546Z 
2024-03-01T20:28:03.6181160Z RemoveRoleService
2024-03-01T20:28:03.6181685Z   #call
2024-03-01T20:28:03.6182830Z     when the role exists
2024-03-01T20:28:03.8157022Z       should remove the role
2024-03-01T20:28:04.0066950Z       should work with a type and ID instead of role ID
2024-03-01T20:28:04.2090716Z       should remove the admin role when removing user role
2024-03-01T20:28:04.2091524Z     when not enough information provided
2024-03-01T20:28:04.3949240Z       should raise an error
2024-03-01T20:28:04.3949876Z     when the role does not exist
2024-03-01T20:28:04.5769525Z       should raise an error
2024-03-01T20:28:04.5770119Z 
2024-03-01T20:28:04.5770393Z ItemsInTotalQuery
2024-03-01T20:28:04.5771456Z   items_in_total_query
2024-03-01T20:28:04.7533022Z     returns a sum total of all in-flows
2024-03-01T20:28:04.9810664Z     does not count transfers going in the negative direction
2024-03-01T20:28:05.3372215Z     counts shared items together
2024-03-01T20:28:05.6848509Z     does not count donations, purchases, adjustments to other storage locations
2024-03-01T20:28:06.0129268Z     does not count negative adjustments towards in-flow
2024-03-01T20:28:06.0129887Z 
2024-03-01T20:28:06.0130054Z OrganizationMailer
2024-03-01T20:28:06.0130536Z   #partner_approval_request
2024-03-01T20:28:06.0403931Z     includes a link to the relevant partner
2024-03-01T20:28:06.0651823Z     renders the body with correct text with partner information
2024-03-01T20:28:06.0891955Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:28:06.0892803Z 
2024-03-01T20:28:06.0892987Z NDBNMember
2024-03-01T20:28:06.0893748Z   versioning
2024-03-01T20:28:06.0932905Z     is expected to be versioned
2024-03-01T20:28:06.0933443Z   validations
2024-03-01T20:28:06.1004421Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-03-01T20:28:06.1062484Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-03-01T20:28:06.1128860Z     is expected to validate that :account_name cannot be empty/falsy
2024-03-01T20:28:06.1129655Z   #full_name
2024-03-01T20:28:06.1163228Z     should equal the id and the account name
2024-03-01T20:28:06.1163774Z 
2024-03-01T20:28:06.1164034Z NotifyPartnerJob
2024-03-01T20:28:06.1164908Z   #perform
2024-03-01T20:28:06.1208685Z     avoids exception when request doesn't exist
2024-03-01T20:28:06.1311068Z     is expected to call RequestsConfirmationMailer
2024-03-01T20:28:06.1311923Z     when the request's partner is deactivated
2024-03-01T20:28:06.1593535Z       does not send the confirmation email
2024-03-01T20:28:06.4631222Z 
2024-03-01T20:28:06.4632646Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-01T20:28:06.4633578Z 
2024-03-01T20:28:06.4634694Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-01T20:28:06.4636162Z      # Temporarily skipped with xit
2024-03-01T20:28:06.4636918Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-01T20:28:06.4637507Z 
2024-03-01T20:28:06.4637826Z Finished in 47.83 seconds (files took 8.36 seconds to load)
2024-03-01T20:28:06.4638530Z 560 examples, 0 failures, 1 pending
2024-03-01T20:28:06.4638895Z 
2024-03-01T20:28:06.4639068Z Randomized with seed 53930
2024-03-01T20:28:06.4639372Z 
2024-03-01T20:28:06.7781799Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3834 / 6426 LOC (59.66%) covered.
2024-03-01T20:28:07.2227375Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10678 LOC (0.36%) covered.
