2024-02-25T14:44:19.1272962Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-25T14:44:19.1273827Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-25T14:44:19.1302032Z shell: /usr/bin/bash -e {0}
2024-02-25T14:44:19.1302509Z env:
2024-02-25T14:44:19.1302846Z   POSTGRES_HOST: localhost
2024-02-25T14:44:19.1303230Z   DATABASE_HOST: localhost
2024-02-25T14:44:19.1303628Z   PG_USERNAME: postgres
2024-02-25T14:44:19.1304003Z   PG_PASSWORD: password
2024-02-25T14:44:19.1304370Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-25T14:44:19.1304849Z   POSTGRES_PORT: 5432
2024-02-25T14:44:19.1305157Z   PGHOST: localhost
2024-02-25T14:44:19.1305487Z   PGUSER: postgres
2024-02-25T14:44:19.1305900Z   RAILS_ENV: test
2024-02-25T14:44:19.1306253Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-25T14:44:19.1306693Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-25T14:44:19.1307136Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-25T14:44:19.1307570Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-25T14:44:19.1308197Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-25T14:44:19.1308800Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-25T14:44:19.1309434Z   EVENTS_READ: true
2024-02-25T14:44:19.1309788Z ##[endgroup]
2024-02-25T14:44:24.6469879Z W, [2024-02-25T14:44:24.646592 #2318]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-25T14:44:24.6472271Z W, [2024-02-25T14:44:24.646652 #2318]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T14:44:24.6473985Z W, [2024-02-25T14:44:24.646671 #2318]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T14:44:24.6477536Z W, [2024-02-25T14:44:24.646698 #2318]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-25T14:44:27.8585111Z W, [2024-02-25T14:44:27.858241 #2318]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-25T14:44:27.8586324Z W, [2024-02-25T14:44:27.858285 #2318]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T14:44:27.8587716Z W, [2024-02-25T14:44:27.858298 #2318]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T14:44:27.8589994Z W, [2024-02-25T14:44:27.858330 #2318]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-25T14:44:27.8642563Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-25T14:44:36.0327864Z 
2024-02-25T14:44:36.0328649Z Randomized with seed 38061
2024-02-25T14:44:36.9200752Z 
2024-02-25T14:44:36.9201506Z /partners/children
2024-02-25T14:44:36.9202473Z   GET #index
2024-02-25T14:44:37.0432847Z     should render without any issues
2024-02-25T14:44:37.0897380Z     should export CSV
2024-02-25T14:44:37.0899015Z 
2024-02-25T14:44:37.0899596Z StorageLocations
2024-02-25T14:44:37.0900356Z   While signed in
2024-02-25T14:44:37.0902444Z     GET #show
2024-02-25T14:44:37.0903340Z       csv
2024-02-25T14:44:37.1712540Z         should be successful
2024-02-25T14:44:37.1713313Z       html
2024-02-25T14:44:37.2482524Z         should return a correct response
2024-02-25T14:44:37.2483496Z         with version date set
2024-02-25T14:44:37.2484367Z           with no version found
2024-02-25T14:44:37.3159566Z             should show N/A
2024-02-25T14:44:37.3160483Z           with a version found
2024-02-25T14:44:37.4094893Z             should show the version specified
2024-02-25T14:44:37.4095683Z     GET #inventory
2024-02-25T14:44:37.4096801Z       when also including inactive items
2024-02-25T14:44:37.4751830Z         returns a collection that also includes items that have been deactivated
2024-02-25T14:44:37.4753096Z       when also including omitted items
2024-02-25T14:44:37.5232596Z         contains a collection of ducktyped entries that respond the same
2024-02-25T14:44:37.5695503Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-25T14:44:37.5696338Z       without any overrides
2024-02-25T14:44:37.6186953Z         returns a collection that only includes items at the storage location
2024-02-25T14:44:37.6188038Z     GET #edit
2024-02-25T14:44:37.9175461Z       returns http success
2024-02-25T14:44:37.9176320Z     Looking at a different organization
2024-02-25T14:44:38.0956373Z       redirects the user to the sign-in page for CRUD actions
2024-02-25T14:44:38.0957292Z     GET #new
2024-02-25T14:44:38.1269806Z       returns http success
2024-02-25T14:44:38.1270488Z     GET #destroy
2024-02-25T14:44:38.1636351Z       redirects to #index
2024-02-25T14:44:38.1637190Z     POST #import_csv
2024-02-25T14:44:38.1637986Z       csv file with wrong headers
2024-02-25T14:44:38.1792365Z         presents a flash error message
2024-02-25T14:44:38.1906439Z         redirects
2024-02-25T14:44:38.1906870Z       without a csv file
2024-02-25T14:44:38.2014721Z         redirects to :index
2024-02-25T14:44:38.2120472Z         presents a flash error message
2024-02-25T14:44:38.2121269Z       with a csv file
2024-02-25T14:44:38.2261491Z         presents a flash notice message
2024-02-25T14:44:38.2385843Z         invokes .import_csv
2024-02-25T14:44:38.2535730Z         redirects
2024-02-25T14:44:38.2539049Z     PUT #deactivate
2024-02-25T14:44:38.2774907Z       discards
2024-02-25T14:44:38.2775494Z       with inventory
2024-02-25T14:44:38.3283812Z         does not discard
2024-02-25T14:44:38.3284576Z     PUT #reactivate
2024-02-25T14:44:38.3484527Z       undiscards
2024-02-25T14:44:38.3485385Z     GET #index
2024-02-25T14:44:38.3485980Z       html
2024-02-25T14:44:38.3836268Z         succeeds
2024-02-25T14:44:38.3837032Z         with inactive locations
2024-02-25T14:44:38.4175740Z           does not includes the inactive location
2024-02-25T14:44:38.4176492Z           with include_inactive_locations
2024-02-25T14:44:38.4523667Z             includes the inactive location
2024-02-25T14:44:38.4524587Z       csv
2024-02-25T14:44:38.5508046Z         includes headers followed by alphabetized item names
2024-02-25T14:44:38.5686604Z         succeeds
2024-02-25T14:44:38.5687730Z   While not signed in
2024-02-25T14:44:38.5748125Z     redirects the user to the sign-in page for CRUD actions
2024-02-25T14:44:38.5748860Z 
2024-02-25T14:44:38.5749198Z /account_requests
2024-02-25T14:44:38.5750662Z   GET #new
2024-02-25T14:44:38.5974306Z     renders a successful response
2024-02-25T14:44:38.5975025Z   GET #confirm
2024-02-25T14:44:38.5975938Z     when given a token that has already been confirmed
2024-02-25T14:44:38.7808328Z       should render a error that says that is code provided is invalid
2024-02-25T14:44:38.7809376Z     when given a valid token
2024-02-25T14:44:38.8010871Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-25T14:44:38.8012235Z     when given a invalid token
2024-02-25T14:44:38.8068870Z       should render a error that says that is code provided is invalid
2024-02-25T14:44:38.8069858Z   GET #confirmation
2024-02-25T14:44:38.8070423Z     when given a valid token
2024-02-25T14:44:38.8205664Z       should render the confirmation template
2024-02-25T14:44:38.8206705Z     when given a invalid token
2024-02-25T14:44:38.8261419Z       should render a error that says that is code provided is invalid
2024-02-25T14:44:38.8262444Z     when given a token that has already been confirmed
2024-02-25T14:44:39.0042611Z       should render a error that says that is code provided is invalid
2024-02-25T14:44:39.0043485Z   POST #create
2024-02-25T14:44:39.0044035Z     with valid parameters
2024-02-25T14:44:39.0174579Z       redirects to the created account_request confirmation
2024-02-25T14:44:39.0284170Z       delivers the confirmation email via default queue
2024-02-25T14:44:39.0411165Z       creates a new AccountRequest
2024-02-25T14:44:39.0412238Z     with invalid parameters
2024-02-25T14:44:39.0643438Z       renders a successful response (i.e. to display the 'new' template)
2024-02-25T14:44:39.0814152Z       does not create a new AccountRequest
2024-02-25T14:44:39.0815213Z   GET #received
2024-02-25T14:44:39.0815772Z     when given a invalid token
2024-02-25T14:44:39.0871966Z       should render a error that says that is code provided is invalid
2024-02-25T14:44:39.0873175Z     when given a valid token
2024-02-25T14:44:39.1004108Z       should render the received template
2024-02-25T14:44:39.1008285Z 
2024-02-25T14:44:39.1008522Z Managing requests
2024-02-25T14:44:39.1009726Z   creating a request
2024-02-25T14:44:39.1010977Z     GIVEN a partner user is permitted to make a request
2024-02-25T14:44:39.1012126Z       WHEN they create a request inproperly by not inputting anything
2024-02-25T14:44:47.2061473Z         should show an error message with the instructions
2024-02-25T14:44:47.2062951Z       WHEN they create a request with only a comment
2024-02-25T14:44:48.1964312Z         should be created without any issue
2024-02-25T14:44:48.1965444Z       WHEN they create a request properly
2024-02-25T14:44:48.1966735Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-25T14:44:50.5070298Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-25T14:44:50.5071276Z   creating a individuals/family request
2024-02-25T14:44:50.5072625Z     GIVEN a partner user is permitted to make a request
2024-02-25T14:44:50.5073845Z       WHEN they create a request properly
2024-02-25T14:44:50.5075153Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-25T14:44:52.5776388Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-25T14:44:52.5777230Z       WHEN they create a request inproperly
2024-02-25T14:44:53.4716345Z         should show an error message with the instructions
2024-02-25T14:44:53.4717451Z 
2024-02-25T14:44:53.4717686Z Admin Organization Management
2024-02-25T14:44:53.4719423Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-25T14:44:55.4998517Z     creates a new organization
2024-02-25T14:44:55.4999827Z   While signed in as an Administrative User (super admin)
2024-02-25T14:44:56.7907124Z     can view organization details
2024-02-25T14:44:58.6648859Z     creates a new organization
2024-02-25T14:44:59.7226675Z     filters by organizations by name in organizations index page
2024-02-25T14:44:59.7227387Z 
2024-02-25T14:44:59.7227798Z Organization management
2024-02-25T14:44:59.7228882Z   while signed in as an organization admin
2024-02-25T14:45:00.6928765Z     can add a new user to an organization
2024-02-25T14:45:01.8837489Z     can re-activate a user in the organization
2024-02-25T14:45:02.8335612Z     can deactivate a user in the organization
2024-02-25T14:45:03.3331992Z     can re-invite a user to an organization after 7 days
2024-02-25T14:45:03.8377891Z     can see 'Make user' button for admins
2024-02-25T14:45:03.8378611Z     Viewing the organization
2024-02-25T14:45:04.3638806Z       can view organization details
2024-02-25T14:45:04.3639647Z     Editing the organization
2024-02-25T14:45:05.3980167Z       can select if the org shows year-to-date values on the distribution printout
2024-02-25T14:45:06.5432161Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-25T14:45:07.3724262Z       can set a reminder and a deadline day
2024-02-25T14:45:08.2186920Z       can set the NDBN Member ID
2024-02-25T14:45:09.2318727Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-25T14:45:10.2028445Z       can enable if the org uses single step invite and approve partner process
2024-02-25T14:45:11.1606730Z       can select if the org repackages essentials
2024-02-25T14:45:11.9850023Z       can set a default storage location on the organization
2024-02-25T14:45:12.9328637Z       can select if the org distributes essentials monthly
2024-02-25T14:45:14.3824923Z       can select and deselect Required Partner Fields
2024-02-25T14:45:14.3825808Z   while signed in as a normal user
2024-02-25T14:45:14.8313645Z     can see summary details about the organization as a user
2024-02-25T14:45:15.2862420Z     cannot see 'Make user' button for admins
2024-02-25T14:45:15.2863088Z 
2024-02-25T14:45:15.2863261Z Vendor
2024-02-25T14:45:15.2865068Z   When vendor have purchases associated with them already
2024-02-25T14:45:15.8953543Z     can have existing vendors show in the #index with some summary stats
2024-02-25T14:45:16.4947428Z     can have a single vendor show semi-detailed stats about purchases
2024-02-25T14:45:16.4948512Z   when creating a new vendor
2024-02-25T14:45:17.2039006Z     cannot add a new vendor instance with empty attributes
2024-02-25T14:45:17.9511576Z     can create a new vendor instance as a user
2024-02-25T14:45:17.9512626Z   When a user views the index page
2024-02-25T14:45:18.3999839Z     should have the vendor names in alphabetical order
2024-02-25T14:45:18.4002401Z   when editing an existing vendor
2024-02-25T14:45:19.1675029Z     can update the contact info for a vendor as a user
2024-02-25T14:45:19.9099942Z     does not update a vendor with empty attributes
2024-02-25T14:45:19.9100963Z 
2024-02-25T14:45:19.9101175Z Audits
2024-02-25T14:45:19.9103230Z   while signed in as an organization admin
2024-02-25T14:45:19.9104663Z     POST #create
2024-02-25T14:45:19.9105709Z       with invalid params
2024-02-25T14:45:19.9695404Z         assigns a newly created but unsaved audit as @audit
2024-02-25T14:45:20.0090627Z         re-renders the 'new' template
2024-02-25T14:45:20.0631059Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-25T14:45:20.0632522Z       with valid params
2024-02-25T14:45:20.1024780Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-25T14:45:20.1388700Z         creates a new Audit
2024-02-25T14:45:20.1746903Z         redirects to the #show after created audit
2024-02-25T14:45:20.2110444Z         assigns a newly created audit as @audit
2024-02-25T14:45:20.2490702Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-25T14:45:20.2491634Z     GET #index
2024-02-25T14:45:20.3037260Z       is successful
2024-02-25T14:45:20.3038408Z     POST #finalize
2024-02-25T14:45:20.4510219Z       sets the finalize status and saves an event
2024-02-25T14:45:20.4511142Z     GET #new
2024-02-25T14:45:20.5545271Z       is successful
2024-02-25T14:45:20.5545927Z     GET #edit
2024-02-25T14:45:20.6310819Z       redirects to #index if the status of audit is not `in_progress`
2024-02-25T14:45:20.6914964Z       is successful if the status of audit is `in_progress`
2024-02-25T14:45:20.6916131Z     DELETE #destroy
2024-02-25T14:45:20.6916746Z       with valid params
2024-02-25T14:45:20.7261691Z         can not destroy the audit if the audit's status is `finalized`
2024-02-25T14:45:20.7611381Z         destroys the audit if the audit's status is `confirms`
2024-02-25T14:45:20.7959223Z         destroys the audit if the audit's status is `in_progress`
2024-02-25T14:45:20.7960427Z     GET #show
2024-02-25T14:45:20.8448649Z       is successful
2024-02-25T14:45:20.8450351Z 
2024-02-25T14:45:20.8450729Z Admin::Organizations
2024-02-25T14:45:20.8452347Z   When logged in as a non-admin user
2024-02-25T14:45:20.8453534Z     PUT #update
2024-02-25T14:45:20.8577969Z       redirects
2024-02-25T14:45:20.8578781Z     POST #create
2024-02-25T14:45:20.8716209Z       redirects
2024-02-25T14:45:20.8716841Z     GET #edit
2024-02-25T14:45:20.8838833Z       redirects
2024-02-25T14:45:20.8839384Z     GET #index
2024-02-25T14:45:20.8959222Z       redirects
2024-02-25T14:45:20.8959983Z     GET #new
2024-02-25T14:45:20.9078103Z       redirects
2024-02-25T14:45:20.9078791Z   When logged in as a super admin
2024-02-25T14:45:20.9081411Z     GET #new
2024-02-25T14:45:20.9448132Z       returns http success
2024-02-25T14:45:20.9449251Z       when given a token that matches a account request that has already been processed
2024-02-25T14:45:21.1571486Z         should render new with a flash error message
2024-02-25T14:45:21.1572852Z       when given a valid account request token in the query parameters
2024-02-25T14:45:21.2062889Z         should render new with pre populate input fields from the account_request
2024-02-25T14:45:21.2063848Z     POST #create
2024-02-25T14:45:21.2064383Z       with invalid params
2024-02-25T14:45:21.2516540Z         does not create an organization and renders #create with an error message
2024-02-25T14:45:21.2517253Z       with valid params
2024-02-25T14:45:21.4613599Z         creates an organization and redirects to #index
2024-02-25T14:45:21.4614773Z     PUT #update
2024-02-25T14:45:21.4825657Z       redirect
2024-02-25T14:45:21.4826529Z     PATCH #update
2024-02-25T14:45:21.4827241Z       with a valid update
2024-02-25T14:45:21.6744865Z         redirects to #index
2024-02-25T14:45:21.6745529Z       with an invalid update
2024-02-25T14:45:21.8810881Z         redirects to #edit with an error message
2024-02-25T14:45:22.0907637Z         returns http success
2024-02-25T14:45:22.0908544Z     GET #index
2024-02-25T14:45:22.1209468Z       returns http success
2024-02-25T14:45:22.1210180Z     GET #show
2024-02-25T14:45:22.3243103Z       returns http success
2024-02-25T14:45:22.3244191Z     DELETE #destroy
2024-02-25T14:45:22.7002603Z       redirects
2024-02-25T14:45:22.7003631Z     DELETE #destroy
2024-02-25T14:45:22.7004321Z       with a valid organization id
2024-02-25T14:45:23.2146216Z         redirects to #index
2024-02-25T14:45:23.2146933Z     GET #edit
2024-02-25T14:45:23.4210669Z       returns http success
2024-02-25T14:45:23.4211396Z 
2024-02-25T14:45:23.4211756Z DonationSites
2024-02-25T14:45:23.4212699Z   while signed in
2024-02-25T14:45:23.4213480Z     GET #index
2024-02-25T14:45:23.4214186Z       csv
2024-02-25T14:45:23.4414994Z         is expected to be successful
2024-02-25T14:45:23.4415845Z       html
2024-02-25T14:45:23.4728977Z         is expected to be successful
2024-02-25T14:45:23.4730136Z 
2024-02-25T14:45:23.4730628Z Purchases
2024-02-25T14:45:23.4731803Z   while signed in as a normal user
2024-02-25T14:45:23.4732673Z     When visiting an existing purchase
2024-02-25T14:45:23.9011976Z       does not allow deletion of a purchase
2024-02-25T14:45:23.9013112Z     When creating a new purchase
2024-02-25T14:45:24.3995657Z       should not display inactive storage locations in dropdown
2024-02-25T14:45:24.3996611Z       via manual entry
2024-02-25T14:45:25.4612080Z         User can create a purchase using dollars decimal amount
2024-02-25T14:45:26.5044482Z         User can create vendor from purchase
2024-02-25T14:45:27.5960645Z         User can create a purchase IN THE PAST
2024-02-25T14:45:28.6001981Z         Does not include inactive items in the line item fields
2024-02-25T14:45:29.7774024Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-25T14:45:29.7774905Z         when creating a purchase incorrectly
2024-02-25T14:45:30.6108151Z           should display failure with error messages
2024-02-25T14:45:31.7165914Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-25T14:45:31.7167062Z       Editing purchase
2024-02-25T14:45:32.1914815Z         A user can see purchased_from value
2024-02-25T14:45:32.8020048Z         A user can view another organizations purchase
2024-02-25T14:45:32.8020840Z       via barcode entry
2024-02-25T14:45:33.7751367Z         User scan same barcode 2 times
2024-02-25T14:45:34.9606253Z         a user can add items that do not yet have a barcode
2024-02-25T14:45:35.6828043Z         a user can add items via scanning them in by barcode
2024-02-25T14:45:35.6829097Z     When visiting the index page
2024-02-25T14:45:35.6830068Z       When filtering on the index page
2024-02-25T14:45:36.4877323Z         User can filter the #index by vendor
2024-02-25T14:45:37.2890436Z         User can filter the #index by storage location
2024-02-25T14:45:37.2891046Z         behaves like Date Range Picker
2024-02-25T14:45:37.2891812Z           when choosing a date range that only includes the previous week
2024-02-25T14:45:38.2371529Z             shows only 1 record
2024-02-25T14:45:38.2372487Z           when choosing 'All Time'
2024-02-25T14:45:39.1753125Z             shows all the records
2024-02-25T14:45:39.1754255Z           when choosing 'Last Month'
2024-02-25T14:45:40.1338782Z             shows only 2 of the records
2024-02-25T14:45:40.1339566Z       In the middle of the year
2024-02-25T14:45:40.9622381Z         User can click to the new purchase form
2024-02-25T14:45:41.6837554Z         User sees total purchases value
2024-02-25T14:45:42.4176735Z         User sees purchased date column
2024-02-25T14:45:42.4177699Z   while signed in as an organization admin
2024-02-25T14:45:43.2758192Z     allows deletion of a purchase
2024-02-25T14:45:43.2758939Z 
2024-02-25T14:45:43.2759267Z Profiles
2024-02-25T14:45:43.2761127Z   POST #update
2024-02-25T14:45:43.2761749Z     successful save
2024-02-25T14:45:43.3248682Z       redirects to #show
2024-02-25T14:45:43.3694860Z       update partner
2024-02-25T14:45:43.3695581Z     when updating an existing value to a blank value
2024-02-25T14:45:43.4148013Z       update partner
2024-02-25T14:45:43.4573989Z       should have blank values
2024-02-25T14:45:43.4574715Z   GET #edit
2024-02-25T14:45:43.5535425Z     returns http success
2024-02-25T14:45:43.5535962Z 
2024-02-25T14:45:43.5536176Z Kit management
2024-02-25T14:45:45.0167163Z   can allocate and deallocate quantity per storage location from kit index
2024-02-25T14:45:45.5792405Z   should not display inactive storage locations under allocations
2024-02-25T14:45:46.6576225Z   can create a new kit as a user with the proper quantity
2024-02-25T14:45:46.6577254Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-25T14:45:47.7405387Z     will not change quantity amounts when allocating
2024-02-25T14:45:47.7406306Z   when there is no kit quantity
2024-02-25T14:45:48.8607815Z     will not change quantity amounts when deallocating
2024-02-25T14:45:48.8608940Z 
2024-02-25T14:45:48.8609332Z User account management
2024-02-25T14:45:48.8609929Z   when not in staging
2024-02-25T14:45:49.8077894Z     should change an user name
2024-02-25T14:45:50.5584914Z     should fail when the email is invalid
2024-02-25T14:45:51.4136184Z     should change the email
2024-02-25T14:45:51.4137008Z   when in staging
2024-02-25T14:45:51.8729557Z     should display staging warning
2024-02-25T14:45:52.3225449Z     should not allow the user to change staging credentials
2024-02-25T14:45:52.3228726Z 
2024-02-25T14:45:52.3229383Z Dashboard
2024-02-25T14:45:52.3231216Z   With an existing essentials bank
2024-02-25T14:45:52.3232250Z     Inventory Totals
2024-02-25T14:45:52.3232916Z       Summary
2024-02-25T14:45:53.0051035Z         displays the on-hand totals
2024-02-25T14:45:53.0051915Z         when constrained to date range
2024-02-25T14:45:54.0376153Z           does not change
2024-02-25T14:45:54.0377088Z     Distributions
2024-02-25T14:45:54.9324800Z       has a link to create a new distribution
2024-02-25T14:45:54.9326564Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-25T14:45:54.9328079Z         filtering to 'Last Month'
2024-02-25T14:45:56.3311404Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-25T14:45:56.3313473Z       given 1 Distribution on 2024-02-24  (unless 'All Time'), 4 during 2024-02-25..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:45:56.3314789Z         filtering to 'Today'
2024-02-25T14:45:57.7470707Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-25T14:45:57.7472065Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-25T14:45:57.7472884Z         filtering to 'This Month'
2024-02-25T14:45:59.1976416Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-25T14:45:59.1978235Z       given 1 Distribution on 2024-02-23  (unless 'All Time'), 2 during 2024-02-24..2024-02-24, and 1 on 2024-02-25
2024-02-25T14:45:59.1979677Z         filtering to 'Yesterday'
2024-02-25T14:46:00.6064321Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-25T14:46:00.6066242Z       given 1 Distribution on 2024-02-18  (unless 'All Time'), 0 during 2024-02-19..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:00.6067110Z         filtering to 'Last 7 Days'
2024-02-25T14:46:03.9326849Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-25T14:46:03.9328164Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-25T14:46:03.9328970Z         filtering to 'This Year'
2024-02-25T14:46:05.3159193Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-25T14:46:05.3161208Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:05.3162678Z         filtering to 'All Time'
2024-02-25T14:46:06.6927257Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-25T14:46:06.6928979Z       given 1 Distribution on 2022-02-24  (unless 'All Time'), 4 during 2022-02-25..2023-10-24, and 1 on 2023-10-25
2024-02-25T14:46:06.6929885Z         filtering to '' (February 25, 2022 - October 24, 2023)
2024-02-25T14:46:08.1225522Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-25T14:46:08.1227334Z       given 1 Distribution on 2024-01-26  (unless 'All Time'), 0 during 2024-01-27..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:08.1228548Z         filtering to 'Last 30 Days'
2024-02-25T14:46:11.4838537Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-25T14:46:11.4839378Z     Purchases
2024-02-25T14:46:12.3690690Z       has a link to create a new purchase
2024-02-25T14:46:12.3692006Z       given 1 Purchase on 2024-01-26  (unless 'All Time'), 1 during 2024-01-27..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:12.3693583Z         filtering to 'Last 30 Days'
2024-02-25T14:46:13.7262111Z           shows correct 1 Recent Purchase link(s)
2024-02-25T14:46:13.7264038Z       given 1 Purchase on 2024-02-23  (unless 'All Time'), 2 during 2024-02-24..2024-02-24, and 1 on 2024-02-25
2024-02-25T14:46:13.7265690Z         filtering to 'Yesterday'
2024-02-25T14:46:15.1525526Z           shows correct 2 Recent Purchase link(s)
2024-02-25T14:46:15.1527304Z       given 1 Purchase on 2022-02-24  (unless 'All Time'), 0 during 2022-02-25..2023-11-24, and 1 on 2023-11-25
2024-02-25T14:46:15.1528730Z         filtering to '' (February 25, 2022 - November 24, 2023)
2024-02-25T14:46:18.5005548Z           shows correct 0 Recent Purchase link(s)
2024-02-25T14:46:18.5007127Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-25T14:46:18.5008512Z         filtering to 'Last Month'
2024-02-25T14:46:20.0261061Z           shows correct 3 Recent Purchase link(s)
2024-02-25T14:46:20.0262680Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-25T14:46:20.0263561Z         filtering to 'This Year'
2024-02-25T14:46:23.3602578Z           shows correct 0 Recent Purchase link(s)
2024-02-25T14:46:23.3604307Z       given 1 Purchase on 2024-02-18  (unless 'All Time'), 2 during 2024-02-19..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:23.3605514Z         filtering to 'Last 7 Days'
2024-02-25T14:46:24.7461250Z           shows correct 2 Recent Purchase link(s)
2024-02-25T14:46:24.7462611Z       given 1 Purchase on 2024-02-24  (unless 'All Time'), 1 during 2024-02-25..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:24.7463975Z         filtering to 'Today'
2024-02-25T14:46:26.1065842Z           shows correct 1 Recent Purchase link(s)
2024-02-25T14:46:26.1067613Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-25T14:46:26.1068593Z         filtering to 'This Month'
2024-02-25T14:46:27.6111309Z           shows correct 3 Recent Purchase link(s)
2024-02-25T14:46:27.6112185Z     Donations
2024-02-25T14:46:28.5040635Z       has a link to create a new donation
2024-02-25T14:46:28.5042398Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-25T14:46:28.5043695Z         filtering to 'Last Month'
2024-02-25T14:46:31.8384963Z           shows the correct total and 0 Recent Donation link(s)
2024-02-25T14:46:31.8386812Z       given 1 Donation on 2024-02-18 (only if a valid date), 1 during 2024-02-19..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:31.8388089Z         filtering to 'Last 7 Days'
2024-02-25T14:46:33.2082451Z           shows the correct total and 1 Recent Donation link(s)
2024-02-25T14:46:33.2084272Z       given 1 Donation on 2024-02-23 (only if a valid date), 0 during 2024-02-24..2024-02-24, and 1 on 2024-02-25
2024-02-25T14:46:33.2085755Z         filtering to 'Yesterday'
2024-02-25T14:46:36.5383056Z           shows the correct total and 0 Recent Donation link(s)
2024-02-25T14:46:36.5385151Z       given 1 Donation on 2022-02-24 (only if a valid date), 0 during 2022-02-25..2024-01-17, and 1 on 2024-01-18
2024-02-25T14:46:36.5386603Z         filtering to '' (February 25, 2022 - January 17, 2024)
2024-02-25T14:46:39.8805360Z           shows the correct total and 0 Recent Donation link(s)
2024-02-25T14:46:39.8807200Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-25T14:46:39.8808678Z         filtering to 'This Year'
2024-02-25T14:46:43.2187090Z           shows the correct total and 0 Recent Donation link(s)
2024-02-25T14:46:43.2188919Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-25T14:46:43.2190400Z         filtering to 'This Month'
2024-02-25T14:46:44.6697018Z           shows the correct total and 3 Recent Donation link(s)
2024-02-25T14:46:44.6698990Z       given 1 Donation on 2024-01-26 (only if a valid date), 3 during 2024-01-27..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:44.6700608Z         filtering to 'Last 30 Days'
2024-02-25T14:46:46.1334285Z           shows the correct total and 3 Recent Donation link(s)
2024-02-25T14:46:46.1335676Z       given 1 Donation on 2024-02-24 (only if a valid date), 0 during 2024-02-25..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:46:46.1336621Z         filtering to 'Today'
2024-02-25T14:46:49.4413113Z           shows the correct total and 0 Recent Donation link(s)
2024-02-25T14:46:49.4414234Z     Product Drives
2024-02-25T14:46:50.0317183Z       has a widget for product drive summary data
2024-02-25T14:46:50.0318830Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-25T14:46:50.0320354Z         filtering to 'This Year'
2024-02-25T14:46:51.5323334Z           shows the correct total money raised
2024-02-25T14:46:53.0510527Z           shows the correct total donations
2024-02-25T14:46:54.6107263Z           shows 3 Recent Donation link(s)
2024-02-25T14:46:54.6108228Z       Product drive behaviour with Mixed Donation types
2024-02-25T14:46:55.3136299Z         only counts product drive donations for product drive
2024-02-25T14:46:56.0279225Z         only shows product drive donations as product drive donations
2024-02-25T14:46:56.7349253Z         only counts product drive money raised
2024-02-25T14:46:56.7350698Z       given 1 Product Drive Donation on 2024-02-23 (unless 'All Time'), 1 during 2024-02-24..2024-02-24, and 1 on 2024-02-25
2024-02-25T14:46:56.7351544Z         filtering to 'Yesterday'
2024-02-25T14:46:58.0885581Z           shows the correct total donations
2024-02-25T14:46:59.4628139Z           shows the correct total money raised
2024-02-25T14:47:00.9578406Z           shows 1 Recent Donation link(s)
2024-02-25T14:47:00.9580386Z       given 1 Product Drive Donation on 2024-02-18 (unless 'All Time'), 2 during 2024-02-19..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:00.9581779Z         filtering to 'Last 7 Days'
2024-02-25T14:47:02.3867384Z           shows the correct total money raised
2024-02-25T14:47:03.7852440Z           shows 2 Recent Donation link(s)
2024-02-25T14:47:05.2035861Z           shows the correct total donations
2024-02-25T14:47:05.2037675Z       given 1 Product Drive Donation on 2024-01-26 (unless 'All Time'), 4 during 2024-01-27..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:05.2039089Z         filtering to 'Last 30 Days'
2024-02-25T14:47:06.6880324Z           shows the correct total donations
2024-02-25T14:47:08.1860432Z           shows the correct total money raised
2024-02-25T14:47:09.6955748Z           shows 3 Recent Donation link(s)
2024-02-25T14:47:09.6957603Z       given 1 Product Drive Donation on 2022-02-24 (unless 'All Time'), 3 during 2022-02-25..2024-01-14, and 1 on 2024-01-15
2024-02-25T14:47:09.6959065Z         filtering to '' (February 25, 2022 - January 14, 2024)
2024-02-25T14:47:11.1880790Z           shows the correct total donations
2024-02-25T14:47:12.6590301Z           shows 3 Recent Donation link(s)
2024-02-25T14:47:14.1354998Z           shows the correct total money raised
2024-02-25T14:47:14.1356642Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-25T14:47:14.1357794Z         filtering to 'This Month'
2024-02-25T14:47:15.6360937Z           shows the correct total money raised
2024-02-25T14:47:17.1467127Z           shows 3 Recent Donation link(s)
2024-02-25T14:47:18.6698767Z           shows the correct total donations
2024-02-25T14:47:18.6700411Z       given 1 Product Drive Donation on 2024-02-24 (unless 'All Time'), 0 during 2024-02-25..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:18.6701363Z         filtering to 'Today'
2024-02-25T14:47:20.0020352Z           shows the correct total donations
2024-02-25T14:47:21.3492478Z           shows the correct total money raised
2024-02-25T14:47:24.7453915Z           shows 0 Recent Donation link(s)
2024-02-25T14:47:24.7456094Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-25T14:47:24.7457719Z         filtering to 'Last Month'
2024-02-25T14:47:26.1609121Z           shows 2 Recent Donation link(s)
2024-02-25T14:47:27.5500457Z           shows the correct total donations
2024-02-25T14:47:28.9551565Z           shows the correct total money raised
2024-02-25T14:47:28.9552696Z     Signage
2024-02-25T14:47:31.8263651Z       shows their organization name unless they have a logo set
2024-02-25T14:47:31.8264642Z     Manufacturer Donations
2024-02-25T14:47:32.3906725Z       has a link to create a new donation
2024-02-25T14:47:32.3908303Z       given 1 Manufacturer donating on 2022-02-24  (unless 'All Time'), 8 during 2022-02-25..2024-02-13, and 1 on 2024-02-14
2024-02-25T14:47:32.3909789Z         filtering to '' (February 25, 2022 - February 13, 2024)
2024-02-25T14:47:34.5529706Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-25T14:47:34.5531533Z       given 1 Manufacturer donating on 2024-02-18  (unless 'All Time'), 2 during 2024-02-19..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:34.5532733Z         filtering to 'Last 7 Days'
2024-02-25T14:47:36.1494069Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-25T14:47:36.1495906Z       given 1 Manufacturer donating on 2024-01-26  (unless 'All Time'), 6 during 2024-01-27..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:36.1496734Z         filtering to 'Last 30 Days'
2024-02-25T14:47:38.1927124Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-25T14:47:38.1928472Z       given 1 Manufacturer donating on 2024-02-23  (unless 'All Time'), 7 during 2024-02-24..2024-02-24, and 1 on 2024-02-25
2024-02-25T14:47:38.1929300Z         filtering to 'Yesterday'
2024-02-25T14:47:40.4108434Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-25T14:47:40.4110273Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-25T14:47:40.4111464Z         filtering to 'Last Month'
2024-02-25T14:47:42.1263268Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-25T14:47:42.1264639Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 5 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-25T14:47:42.1265502Z         filtering to 'This Year'
2024-02-25T14:47:44.0294562Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-25T14:47:44.0296337Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-25T14:47:44.0297516Z         filtering to 'This Month'
2024-02-25T14:47:45.6475953Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-25T14:47:45.6477754Z       given 1 Manufacturer donating on 2024-02-24  (unless 'All Time'), 4 during 2024-02-25..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:45.6478950Z         filtering to 'Today'
2024-02-25T14:47:47.4072389Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-25T14:47:47.4074206Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 8 during 2000-01-01..2024-02-25, and 1 on 2024-02-26
2024-02-25T14:47:47.4075371Z         filtering to 'All Time'
2024-02-25T14:47:49.8221028Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-25T14:47:49.8222155Z   With a new essentials bank
2024-02-25T14:48:17.7959776Z     displays the getting started guide until the steps are completed
2024-02-25T14:48:17.7960839Z 
2024-02-25T14:48:17.7961028Z /partners/profiles
2024-02-25T14:48:17.7962595Z   GET #edit
2024-02-25T14:48:17.8983433Z     does not have default radio button value when value is nil
2024-02-25T14:48:17.9851604Z     has "No" radio button value when value is false
2024-02-25T14:48:18.0686406Z     displays the partner
2024-02-25T14:48:18.1558158Z     has "Yes" radio button value when value is true
2024-02-25T14:48:18.1558887Z   PUT #update
2024-02-25T14:48:18.2113425Z     updates the partner and profile
2024-02-25T14:48:18.2114156Z     when updating an existing value to a blank value
2024-02-25T14:48:18.2605636Z       does not update other partner profile attributes to blank
2024-02-25T14:48:18.3098113Z       updates the partner profile attribute to a blank value
2024-02-25T14:48:18.3585526Z       does store N/A in the database
2024-02-25T14:48:18.3586085Z     with no social media
2024-02-25T14:48:18.4481818Z       shows an error
2024-02-25T14:48:18.4482316Z   GET #show
2024-02-25T14:48:18.5141450Z     shows correct values for yes/no buttons
2024-02-25T14:48:18.5639235Z     displays the partner
2024-02-25T14:48:18.6499947Z W, [2024-02-25T06:48:18.649740 #2352]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-25T14:48:18.6502043Z W, [2024-02-25T06:48:18.649784 #2352]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-25T14:48:18.6504432Z W, [2024-02-25T06:48:18.649807 #2352]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-25T14:48:18.6508921Z W, [2024-02-25T06:48:18.649845 #2352]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-25T14:48:18.6510188Z 
2024-02-25T14:48:18.6510605Z Finished in 3 minutes 42.6 seconds (files took 7.95 seconds to load)
2024-02-25T14:48:18.6511408Z 235 examples, 0 failures
2024-02-25T14:48:18.6511721Z 
2024-02-25T14:48:18.6511906Z Randomized with seed 38061
2024-02-25T14:48:18.6517306Z 
2024-02-25T14:48:19.1495282Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3819 / 6419 LOC (59.5%) covered.
2024-02-25T14:48:19.6661673Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10668 LOC (0.36%) covered.
