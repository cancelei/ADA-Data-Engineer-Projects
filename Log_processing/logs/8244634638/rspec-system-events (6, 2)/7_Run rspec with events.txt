2024-03-12T06:39:29.3704170Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-12T06:39:29.3705157Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-12T06:39:29.3756165Z shell: /usr/bin/bash -e {0}
2024-03-12T06:39:29.3756590Z env:
2024-03-12T06:39:29.3756883Z   POSTGRES_HOST: localhost
2024-03-12T06:39:29.3757597Z   DATABASE_HOST: localhost
2024-03-12T06:39:29.3758036Z   PG_USERNAME: postgres
2024-03-12T06:39:29.3758428Z   PG_PASSWORD: password
2024-03-12T06:39:29.3758917Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-12T06:39:29.3759299Z   POSTGRES_PORT: 5432
2024-03-12T06:39:29.3759662Z   PGHOST: localhost
2024-03-12T06:39:29.3760088Z   PGUSER: postgres
2024-03-12T06:39:29.3760427Z   RAILS_ENV: test
2024-03-12T06:39:29.3760815Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-12T06:39:29.3761288Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-12T06:39:29.3761717Z   KNAPSACK_PRO_CI_NODE_INDEX: 2
2024-03-12T06:39:29.3762192Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-12T06:39:29.3762858Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-12T06:39:29.3763471Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-12T06:39:29.3764175Z   EVENTS_READ: true
2024-03-12T06:39:29.3764519Z ##[endgroup]
2024-03-12T06:39:35.1099602Z W, [2024-03-12T06:39:35.109555 #2511]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-12T06:39:35.1101966Z W, [2024-03-12T06:39:35.109621 #2511]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T06:39:35.1105014Z W, [2024-03-12T06:39:35.109637 #2511]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T06:39:35.1111048Z W, [2024-03-12T06:39:35.109665 #2511]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-12T06:39:37.6735667Z W, [2024-03-12T06:39:37.673224 #2511]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-12T06:39:37.6737754Z W, [2024-03-12T06:39:37.673269 #2511]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T06:39:37.6739724Z W, [2024-03-12T06:39:37.673288 #2511]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T06:39:37.6742385Z W, [2024-03-12T06:39:37.673334 #2511]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-12T06:39:37.6794914Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/admin/account_requests_requests_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/events_requests_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-12T06:39:46.1396353Z 
2024-03-12T06:39:46.1398047Z Randomized with seed 16344
2024-03-12T06:39:47.0715449Z 
2024-03-12T06:39:47.0716402Z Vendor
2024-03-12T06:39:47.0717680Z   when creating a new vendor
2024-03-12T06:39:48.5130636Z     cannot add a new vendor instance with empty attributes
2024-03-12T06:39:49.2982233Z     can create a new vendor instance as a user
2024-03-12T06:39:49.2982941Z   When a user views the index page
2024-03-12T06:39:49.7676262Z     should have the vendor names in alphabetical order
2024-03-12T06:39:49.7677215Z   when editing an existing vendor
2024-03-12T06:39:50.5351057Z     can update the contact info for a vendor as a user
2024-03-12T06:39:51.2850295Z     does not update a vendor with empty attributes
2024-03-12T06:39:51.2851362Z   When vendor have purchases associated with them already
2024-03-12T06:39:51.9174733Z     can have existing vendors show in the #index with some summary stats
2024-03-12T06:39:52.5194678Z     can have a single vendor show semi-detailed stats about purchases
2024-03-12T06:39:52.5195389Z 
2024-03-12T06:39:52.5195625Z User account management
2024-03-12T06:39:52.5197148Z   when in staging
2024-03-12T06:39:52.9841067Z     should not allow the user to change staging credentials
2024-03-12T06:39:53.4438946Z     should display staging warning
2024-03-12T06:39:53.4439588Z   when not in staging
2024-03-12T06:39:54.3706931Z     should change the email
2024-03-12T06:39:55.1344200Z     should fail when the email is invalid
2024-03-12T06:39:56.0103067Z     should change an user name
2024-03-12T06:39:56.0103925Z 
2024-03-12T06:39:56.0104134Z Kit management
2024-03-12T06:39:57.5590408Z   can allocate and deallocate quantity per storage location from kit index
2024-03-12T06:39:58.1375604Z   should not display inactive storage locations under allocations
2024-03-12T06:39:59.0256452Z   can create a new kit as a user with the proper quantity
2024-03-12T06:39:59.0257315Z   when there is no kit quantity
2024-03-12T06:40:00.1659468Z     will not change quantity amounts when deallocating
2024-03-12T06:40:00.1661017Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-12T06:40:01.2718344Z     will not change quantity amounts when allocating
2024-03-12T06:40:01.2718996Z 
2024-03-12T06:40:01.2719432Z /partners/dashboard
2024-03-12T06:40:01.4002214Z   displays upcoming distributions
2024-03-12T06:40:01.4003001Z   with both roles
2024-03-12T06:40:01.4566440Z     should include the switch link
2024-03-12T06:40:01.4567494Z   with just partner role
2024-03-12T06:40:01.5062235Z     should not display the switch link
2024-03-12T06:40:01.5063392Z   BroadcastAnnouncement card
2024-03-12T06:40:01.5633023Z     displays announcements if there are valid ones
2024-03-12T06:40:01.6143783Z     doesn't display announcements from super admins
2024-03-12T06:40:01.6644755Z     doesn't display announcements if there are not valid ones
2024-03-12T06:40:01.6645365Z   GET #index
2024-03-12T06:40:01.7393477Z     displays requests that are pending
2024-03-12T06:40:01.8038900Z     does not display requests in other states
2024-03-12T06:40:01.8039678Z 
2024-03-12T06:40:01.8039994Z /partners/profiles
2024-03-12T06:40:01.8041796Z   GET #show
2024-03-12T06:40:01.8607083Z     displays the partner
2024-03-12T06:40:01.9113453Z     shows correct values for yes/no buttons
2024-03-12T06:40:01.9114830Z   PUT #update
2024-03-12T06:40:01.9751717Z     updates the partner and profile
2024-03-12T06:40:01.9752737Z     when updating an existing value to a blank value
2024-03-12T06:40:02.0283279Z       does not update other partner profile attributes to blank
2024-03-12T06:40:02.0791220Z       updates the partner profile attribute to a blank value
2024-03-12T06:40:02.1291955Z       does store N/A in the database
2024-03-12T06:40:02.1292792Z     with no social media
2024-03-12T06:40:02.2327106Z       shows an error
2024-03-12T06:40:02.2328452Z   GET #edit
2024-03-12T06:40:02.3177009Z     has "Yes" radio button value when value is true
2024-03-12T06:40:02.4011834Z     has "No" radio button value when value is false
2024-03-12T06:40:02.4855341Z     displays the partner
2024-03-12T06:40:02.5690252Z     does not have default radio button value when value is nil
2024-03-12T06:40:02.5691252Z 
2024-03-12T06:40:02.5691718Z Admin Organization Management
2024-03-12T06:40:02.5692609Z   While signed in as an Administrative User (super admin)
2024-03-12T06:40:03.8393531Z     can view organization details
2024-03-12T06:40:05.8124584Z     creates a new organization
2024-03-12T06:40:06.8924283Z     filters by organizations by name in organizations index page
2024-03-12T06:40:06.8925629Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-12T06:40:08.7653829Z     creates a new organization
2024-03-12T06:40:08.7655373Z 
2024-03-12T06:40:08.7655634Z StorageLocations
2024-03-12T06:40:08.7657055Z   While signed in
2024-03-12T06:40:08.7659109Z     POST #import_csv
2024-03-12T06:40:08.7660196Z       with a csv file
2024-03-12T06:40:08.7726948Z         invokes .import_csv
2024-03-12T06:40:08.7913895Z         redirects
2024-03-12T06:40:08.8061055Z         presents a flash notice message
2024-03-12T06:40:08.8061829Z       without a csv file
2024-03-12T06:40:08.8173757Z         presents a flash error message
2024-03-12T06:40:08.8285917Z         redirects to :index
2024-03-12T06:40:08.8286766Z       csv file with wrong headers
2024-03-12T06:40:08.8407779Z         presents a flash error message
2024-03-12T06:40:08.8527153Z         redirects
2024-03-12T06:40:08.8527869Z     GET #edit
2024-03-12T06:40:09.1163261Z       returns http success
2024-03-12T06:40:09.1164156Z     PUT #deactivate
2024-03-12T06:40:09.1371676Z       discards
2024-03-12T06:40:09.1372148Z       with inventory
2024-03-12T06:40:09.1846760Z         does not discard
2024-03-12T06:40:09.1847452Z     PUT #reactivate
2024-03-12T06:40:09.2027950Z       undiscards
2024-03-12T06:40:09.2028421Z     GET #destroy
2024-03-12T06:40:09.2296596Z       redirects to #index
2024-03-12T06:40:09.2297243Z     GET #inventory
2024-03-12T06:40:09.2298157Z       when also including omitted items
2024-03-12T06:40:09.2780287Z         contains a collection of ducktyped entries that respond the same
2024-03-12T06:40:09.3263884Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-12T06:40:09.3264702Z       when also including inactive items
2024-03-12T06:40:09.3909180Z         returns a collection that also includes items that have been deactivated
2024-03-12T06:40:09.3910122Z       without any overrides
2024-03-12T06:40:09.4422133Z         returns a collection that only includes items at the storage location
2024-03-12T06:40:09.4422874Z     GET #new
2024-03-12T06:40:09.4745015Z       returns http success
2024-03-12T06:40:09.4745783Z     GET #index
2024-03-12T06:40:09.4746270Z       html
2024-03-12T06:40:09.5107155Z         succeeds
2024-03-12T06:40:09.5107689Z         with inactive locations
2024-03-12T06:40:09.5470738Z           does not includes the inactive location
2024-03-12T06:40:09.5471662Z           with include_inactive_locations
2024-03-12T06:40:09.5836533Z             includes the inactive location
2024-03-12T06:40:09.5837813Z       csv
2024-03-12T06:40:09.6016697Z         succeeds
2024-03-12T06:40:09.6985155Z         includes headers followed by alphabetized item names
2024-03-12T06:40:09.6986065Z     GET #show
2024-03-12T06:40:09.6986892Z       html
2024-03-12T06:40:09.7663085Z         should return a correct response
2024-03-12T06:40:09.7663939Z         with version date set
2024-03-12T06:40:09.7664801Z           with a version found
2024-03-12T06:40:09.8425633Z             should show the version specified
2024-03-12T06:40:09.8426476Z           with no version found
2024-03-12T06:40:09.9099482Z             should show N/A
2024-03-12T06:40:09.9100216Z       csv
2024-03-12T06:40:09.9803048Z         should be successful
2024-03-12T06:40:09.9804528Z     Looking at a different organization
2024-03-12T06:40:10.2929102Z       redirects the user to the sign-in page for CRUD actions
2024-03-12T06:40:10.2930387Z   While not signed in
2024-03-12T06:40:10.2993790Z     redirects the user to the sign-in page for CRUD actions
2024-03-12T06:40:10.2994487Z 
2024-03-12T06:40:10.2994909Z Profiles
2024-03-12T06:40:10.2995746Z   POST #update
2024-03-12T06:40:10.2996834Z     successful save
2024-03-12T06:40:10.3421112Z       redirects to #show
2024-03-12T06:40:10.3850347Z       update partner
2024-03-12T06:40:10.3851167Z     when updating an existing value to a blank value
2024-03-12T06:40:10.4297357Z       update partner
2024-03-12T06:40:10.4714742Z       should have blank values
2024-03-12T06:40:10.4715474Z   GET #edit
2024-03-12T06:40:10.5647483Z     returns http success
2024-03-12T06:40:10.5648225Z 
2024-03-12T06:40:10.5648499Z Organization management
2024-03-12T06:40:10.5651228Z   while signed in as an organization admin
2024-03-12T06:40:11.5429942Z     can deactivate a user in the organization
2024-03-12T06:40:12.0388592Z     can re-invite a user to an organization after 7 days
2024-03-12T06:40:12.5429857Z     can see 'Make user' button for admins
2024-03-12T06:40:13.5139193Z     can re-activate a user in the organization
2024-03-12T06:40:14.4682315Z     can add a new user to an organization
2024-03-12T06:40:14.4683290Z     Viewing the organization
2024-03-12T06:40:15.0227866Z       can view organization details
2024-03-12T06:40:15.0228939Z     Editing the organization
2024-03-12T06:40:15.8658747Z       can set a reminder and a deadline day
2024-03-12T06:40:16.8470749Z       can select if the org shows year-to-date values on the distribution printout
2024-03-12T06:40:17.8171335Z       can select if the org distributes essentials monthly
2024-03-12T06:40:19.2577257Z       can select and deselect Required Partner Fields
2024-03-12T06:40:20.0808014Z       can set the NDBN Member ID
2024-03-12T06:40:21.0553248Z       can enable if the org uses single step invite and approve partner process
2024-03-12T06:40:22.0307233Z       can select if the org repackages essentials
2024-03-12T06:40:22.8704827Z       can set a default storage location on the organization
2024-03-12T06:40:23.8265745Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-12T06:40:24.9889590Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-12T06:40:24.9890797Z   while signed in as a normal user
2024-03-12T06:40:25.4551117Z     can see summary details about the organization as a user
2024-03-12T06:40:25.9391568Z     cannot see 'Make user' button for admins
2024-03-12T06:40:25.9392204Z 
2024-03-12T06:40:25.9392685Z Admin::AccountRequestsController
2024-03-12T06:40:25.9393875Z   while signed in as a super admin
2024-03-12T06:40:25.9395206Z     POST #reject
2024-03-12T06:40:25.9754835Z       should redirect back on success
2024-03-12T06:40:25.9755685Z     GET #for_rejection
2024-03-12T06:40:25.9756346Z       with an invalid token
2024-03-12T06:40:26.0062818Z         should show a not found message
2024-03-12T06:40:26.0063696Z       with a valid token
2024-03-12T06:40:26.0492077Z         should show the request
2024-03-12T06:40:26.0493057Z     GET #index
2024-03-12T06:40:26.0820536Z       returns success
2024-03-12T06:40:26.0821966Z 
2024-03-12T06:40:26.0822313Z Purchases
2024-03-12T06:40:26.0823653Z   while signed in as a normal user
2024-03-12T06:40:26.0824876Z     When visiting the index page
2024-03-12T06:40:26.0826265Z       In the middle of the year
2024-03-12T06:40:26.8266498Z         User sees total purchases value
2024-03-12T06:40:27.5983212Z         User can click to the new purchase form
2024-03-12T06:40:28.3450125Z         User sees purchased date column
2024-03-12T06:40:28.3451059Z       When filtering on the index page
2024-03-12T06:40:29.1510011Z         User can filter the #index by storage location
2024-03-12T06:40:29.9667819Z         User can filter the #index by vendor
2024-03-12T06:40:29.9669244Z         behaves like Date Range Picker
2024-03-12T06:40:29.9670267Z           when choosing 'All Time'
2024-03-12T06:40:30.9770912Z             shows all the records
2024-03-12T06:40:30.9772035Z           when choosing 'Last Month'
2024-03-12T06:40:31.9439818Z             shows only 2 of the records
2024-03-12T06:40:31.9440927Z           when choosing a date range that only includes the previous week
2024-03-12T06:40:32.8938428Z             shows only 1 record
2024-03-12T06:40:32.8939419Z     When creating a new purchase
2024-03-12T06:40:33.3870152Z       should not display inactive storage locations in dropdown
2024-03-12T06:40:33.3870835Z       via manual entry
2024-03-12T06:40:36.0824351Z         multiple line items for the same item type are accepted and combined on the backend (FAILED - 1)
2024-03-12T06:40:36.0828040Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_multiple-line-items-for-the-same-item-type-are-accepted-and-combined-on-the-backend_2024-03-11-23-40-35.932.html[0m
2024-03-12T06:40:36.0832709Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_multiple-line-items-for-the-same-item-type-are-accepted-and-combined-on-the-backend_2024-03-11-23-40-35.932.png[0m
2024-03-12T06:40:36.9739684Z         User can create a purchase using dollars decimal amount
2024-03-12T06:40:38.0197712Z         User can create vendor from purchase
2024-03-12T06:40:39.0210401Z         Does not include inactive items in the line item fields
2024-03-12T06:40:40.0874212Z         User can create a purchase IN THE PAST
2024-03-12T06:40:40.0875164Z         when creating a purchase incorrectly
2024-03-12T06:40:40.8828540Z           should display failure with error messages
2024-03-12T06:40:41.8543827Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-12T06:40:41.8544648Z       Editing purchase
2024-03-12T06:40:42.4978573Z         A user can view another organizations purchase
2024-03-12T06:40:43.0054530Z         A user can see purchased_from value
2024-03-12T06:40:43.0055285Z       via barcode entry
2024-03-12T06:40:44.2165482Z         a user can add items that do not yet have a barcode
2024-03-12T06:40:45.0661901Z         User scan same barcode 2 times (FAILED - 2)
2024-03-12T06:40:45.0664003Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_User-scan-same-barcode-2-times_2024-03-11-23-40-44.931.html[0m
2024-03-12T06:40:45.0666768Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_User-scan-same-barcode-2-times_2024-03-11-23-40-44.931.png[0m
2024-03-12T06:40:45.9146129Z         a user can add items via scanning them in by barcode (FAILED - 3)
2024-03-12T06:40:45.9148892Z   [0;33mHTML screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_a-user-can-add-items-via-scanning-them-in-by-barcode_2024-03-11-23-40-45.781.html[0m
2024-03-12T06:40:45.9151540Z   [0;33mImage screenshot: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/screenshot_a-user-can-add-items-via-scanning-them-in-by-barcode_2024-03-11-23-40-45.781.png[0m
2024-03-12T06:40:45.9153019Z     When visiting an existing purchase
2024-03-12T06:40:46.3810489Z       does not allow deletion of a purchase
2024-03-12T06:40:46.3811435Z   while signed in as an organization admin
2024-03-12T06:40:47.2363860Z     allows deletion of a purchase
2024-03-12T06:40:47.2364470Z 
2024-03-12T06:40:47.2364799Z Admin::Questions
2024-03-12T06:40:47.2366140Z   while signed in as a super admin
2024-03-12T06:40:47.2367344Z     POST #create
2024-03-12T06:40:47.2658664Z       lets the user create questions
2024-03-12T06:40:47.2659600Z     GET #index
2024-03-12T06:40:47.2965931Z       lets the user load the page
2024-03-12T06:40:47.2967220Z     GET #new
2024-03-12T06:40:47.3282279Z       lets the user load the new question page
2024-03-12T06:40:47.3283801Z     DELETE #destroy
2024-03-12T06:40:47.3502248Z       lets the user delete questions
2024-03-12T06:40:47.3504329Z     GET #edit
2024-03-12T06:40:47.3870240Z       lets the user load the edit question page
2024-03-12T06:40:47.3871435Z     PATCH #update
2024-03-12T06:40:47.4084325Z       lets the user update questions
2024-03-12T06:40:47.4085298Z 
2024-03-12T06:40:47.4085659Z Events
2024-03-12T06:40:47.4087028Z   When signed in
2024-03-12T06:40:47.4087693Z     GET #index
2024-03-12T06:40:47.9652376Z       should be successful
2024-03-12T06:40:48.5097153Z       with item filter
2024-03-12T06:40:48.5098183Z         should not include the other item
2024-03-12T06:40:48.5098734Z       with eventable_id
2024-03-12T06:40:49.2168080Z         should only show events from that eventable
2024-03-12T06:40:49.2169035Z       with storage location filter
2024-03-12T06:40:49.7607446Z         should not include the other storage location
2024-03-12T06:40:49.7608102Z       with date filter
2024-03-12T06:40:50.3829904Z         should not include the old donation
2024-03-12T06:40:50.3830697Z       with type filter
2024-03-12T06:40:50.9998066Z         should not include the adjustment
2024-03-12T06:40:50.9998958Z   When not signed in
2024-03-12T06:40:51.0194222Z     redirects the user to the sign-in page for CRUD actions
2024-03-12T06:40:51.0194835Z 
2024-03-12T06:40:51.0195246Z Managing requests
2024-03-12T06:40:51.0196351Z   creating a new quantity request
2024-03-12T06:40:51.0197566Z     GIVEN a partner user is permitted to make a request
2024-03-12T06:40:51.0198609Z       WHEN a request is built using add and remove buttons
2024-03-12T06:40:51.0199473Z         THEN a request records will be created
2024-03-12T06:40:52.9537954Z           creates the correct request
2024-03-12T06:40:52.9539187Z   creating a # individuals request
2024-03-12T06:40:52.9540981Z     GIVEN a partner user is permitted to make a request
2024-03-12T06:40:52.9542019Z       WHEN a request is built using add and remove buttons
2024-03-12T06:40:52.9542980Z         THEN a request records will be created
2024-03-12T06:40:54.7519523Z           creates the correct request
2024-03-12T06:40:54.7521364Z 
2024-03-12T06:40:54.7521534Z BroadcastAnnouncements
2024-03-12T06:40:54.7523368Z   PATCH /update
2024-03-12T06:40:54.7524300Z     with invalid parameters
2024-03-12T06:40:54.7914916Z       does not render a successful response
2024-03-12T06:40:54.7915867Z     with valid parameters
2024-03-12T06:40:54.8102361Z       updates the requested announcement and redirects
2024-03-12T06:40:54.8103270Z   DELETE /destroy
2024-03-12T06:40:54.8265744Z     destroys the requested announcement then redirects
2024-03-12T06:40:54.8266349Z   GET /new
2024-03-12T06:40:54.8539596Z     renders a successful response
2024-03-12T06:40:54.8540589Z   GET /edit
2024-03-12T06:40:54.8837290Z     render a successful response
2024-03-12T06:40:54.8838289Z   POST /create
2024-03-12T06:40:54.8839079Z     with valid parameters
2024-03-12T06:40:54.8992907Z       creates a new BroadcastAnnouncement then redirects
2024-03-12T06:40:54.8994053Z     with invalid parameters
2024-03-12T06:40:54.9278364Z       does not render a successful response
2024-03-12T06:40:54.9567267Z       does not create a new BroadcastAnnouncement
2024-03-12T06:40:54.9568325Z   GET /index
2024-03-12T06:40:54.9882217Z     renders a successful response
2024-03-12T06:40:54.9885806Z 
2024-03-12T06:40:54.9886230Z Dashboard
2024-03-12T06:40:54.9889634Z   With an existing essentials bank
2024-03-12T06:40:54.9891646Z     Donations
2024-03-12T06:40:55.8703198Z       has a link to create a new donation
2024-03-12T06:40:55.8704817Z       given 1 Donation on 2023-12-31 (only if a valid date), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T06:40:55.8706193Z         filtering to 'This Year'
2024-03-12T06:40:57.2900942Z           shows the correct total and 2 Recent Donation link(s)
2024-03-12T06:40:57.2903068Z       given 1 Donation on 2022-03-10 (only if a valid date), 2 during 2022-03-11..2024-02-14, and 1 on 2024-02-15
2024-03-12T06:40:57.2904265Z         filtering to '' (March 11, 2022 - February 14, 2024)
2024-03-12T06:40:58.7000564Z           shows the correct total and 2 Recent Donation link(s)
2024-03-12T06:40:58.7002161Z       given 1 Donation on 2024-02-10 (only if a valid date), 3 during 2024-02-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:40:58.7002984Z         filtering to 'Last 30 Days'
2024-03-12T06:41:00.1610842Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T06:41:00.1612710Z       given 1 Donation on 2024-03-10 (only if a valid date), 2 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:00.1614159Z         filtering to 'Today'
2024-03-12T06:41:01.5853988Z           shows the correct total and 2 Recent Donation link(s)
2024-03-12T06:41:01.5855973Z       given 1 Donation on 2024-01-31 (only if a valid date), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T06:41:01.5857377Z         filtering to 'Last Month'
2024-03-12T06:41:03.0600211Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T06:41:03.0602161Z       given 1 Donation on 2024-02-29 (only if a valid date), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T06:41:03.0603444Z         filtering to 'This Month'
2024-03-12T06:41:06.3837562Z           shows the correct total and 0 Recent Donation link(s)
2024-03-12T06:41:06.3839413Z       given 1 Donation on 2024-03-09 (only if a valid date), 3 during 2024-03-10..2024-03-10, and 1 on 2024-03-11
2024-03-12T06:41:06.3840799Z         filtering to 'Yesterday'
2024-03-12T06:41:07.8267983Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T06:41:07.8269843Z       given 1 Donation on 2024-03-04 (only if a valid date), 3 during 2024-03-05..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:07.8271347Z         filtering to 'Last 7 Days'
2024-03-12T06:41:09.2599523Z           shows the correct total and 3 Recent Donation link(s)
2024-03-12T06:41:09.2600425Z     Signage
2024-03-12T06:41:12.1360617Z       shows their organization name unless they have a logo set
2024-03-12T06:41:12.1361298Z     Distributions
2024-03-12T06:41:13.0298229Z       has a link to create a new distribution
2024-03-12T06:41:13.0299988Z       given 1 Distribution on 2024-03-10  (unless 'All Time'), 0 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:13.0301267Z         filtering to 'Today'
2024-03-12T06:41:16.3798038Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-12T06:41:16.3799871Z       given 1 Distribution on 2024-02-10  (unless 'All Time'), 1 during 2024-02-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:16.3801193Z         filtering to 'Last 30 Days'
2024-03-12T06:41:17.7476169Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-12T06:41:17.7477909Z       given 1 Distribution on 2024-03-09  (unless 'All Time'), 4 during 2024-03-10..2024-03-10, and 1 on 2024-03-11
2024-03-12T06:41:17.7478938Z         filtering to 'Yesterday'
2024-03-12T06:41:19.1840575Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-12T06:41:19.1842435Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 2 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T06:41:19.1843656Z         filtering to 'This Month'
2024-03-12T06:41:20.5569660Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-12T06:41:20.5571468Z       given 1 Distribution on 2024-03-04  (unless 'All Time'), 3 during 2024-03-05..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:20.5573080Z         filtering to 'Last 7 Days'
2024-03-12T06:41:21.9789992Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-12T06:41:21.9791883Z       given 1 Distribution on 2022-03-10  (unless 'All Time'), 1 during 2022-03-11..2024-02-19, and 1 on 2024-02-20
2024-03-12T06:41:21.9793166Z         filtering to '' (March 11, 2022 - February 19, 2024)
2024-03-12T06:41:23.5723680Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-12T06:41:23.5725936Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T06:41:23.5727227Z         filtering to 'Last Month'
2024-03-12T06:41:24.9323369Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-12T06:41:24.9325312Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:24.9326604Z         filtering to 'All Time'
2024-03-12T06:41:26.2872174Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-12T06:41:26.2873991Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T06:41:26.2874867Z         filtering to 'This Year'
2024-03-12T06:41:29.6844717Z           shows the correct total and 0 Recent Distribution link(s)
2024-03-12T06:41:29.6845774Z     Inventory Totals
2024-03-12T06:41:29.6846712Z       Summary
2024-03-12T06:41:30.3916435Z         displays the on-hand totals
2024-03-12T06:41:30.3917045Z         when constrained to date range
2024-03-12T06:41:31.4454698Z           does not change
2024-03-12T06:41:31.4455593Z     Purchases
2024-03-12T06:41:32.3310621Z       has a link to create a new purchase
2024-03-12T06:41:32.3312114Z       given 1 Purchase on 2022-03-10  (unless 'All Time'), 3 during 2022-03-11..2024-02-19, and 1 on 2024-02-20
2024-03-12T06:41:32.3313679Z         filtering to '' (March 11, 2022 - February 19, 2024)
2024-03-12T06:41:33.7955682Z           shows correct 3 Recent Purchase link(s)
2024-03-12T06:41:33.7957725Z       given 1 Purchase on 2024-03-04  (unless 'All Time'), 0 during 2024-03-05..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:33.7958725Z         filtering to 'Last 7 Days'
2024-03-12T06:41:37.1231465Z           shows correct 0 Recent Purchase link(s)
2024-03-12T06:41:37.1233258Z       given 1 Purchase on 2024-03-10  (unless 'All Time'), 0 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:37.1234106Z         filtering to 'Today'
2024-03-12T06:41:40.4308953Z           shows correct 0 Recent Purchase link(s)
2024-03-12T06:41:40.4312253Z       given 1 Purchase on 2024-03-09  (unless 'All Time'), 0 during 2024-03-10..2024-03-10, and 1 on 2024-03-11
2024-03-12T06:41:40.4313395Z         filtering to 'Yesterday'
2024-03-12T06:41:43.7580627Z           shows correct 0 Recent Purchase link(s)
2024-03-12T06:41:43.7581998Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T06:41:43.7583133Z         filtering to 'This Month'
2024-03-12T06:41:45.2496545Z           shows correct 3 Recent Purchase link(s)
2024-03-12T06:41:45.2498107Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T06:41:45.2498977Z         filtering to 'Last Month'
2024-03-12T06:41:46.6048419Z           shows correct 1 Recent Purchase link(s)
2024-03-12T06:41:46.6050192Z       given 1 Purchase on 2024-02-10  (unless 'All Time'), 2 during 2024-02-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:46.6051562Z         filtering to 'Last 30 Days'
2024-03-12T06:41:48.0111416Z           shows correct 2 Recent Purchase link(s)
2024-03-12T06:41:48.0112941Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T06:41:48.0114127Z         filtering to 'This Year'
2024-03-12T06:41:49.5009076Z           shows correct 3 Recent Purchase link(s)
2024-03-12T06:41:49.5012430Z     Product Drives
2024-03-12T06:41:50.0856017Z       has a widget for product drive summary data
2024-03-12T06:41:50.0858524Z       given 1 Product Drive Donation on 2024-03-04 (unless 'All Time'), 0 during 2024-03-05..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:41:50.0860005Z         filtering to 'Last 7 Days'
2024-03-12T06:41:51.4214483Z           shows the correct total donations
2024-03-12T06:41:52.7604042Z           shows the correct total money raised
2024-03-12T06:41:56.0730940Z           shows 0 Recent Donation link(s)
2024-03-12T06:41:56.0732852Z       given 1 Product Drive Donation on 2022-03-10 (unless 'All Time'), 2 during 2022-03-11..2023-09-26, and 1 on 2023-09-27
2024-03-12T06:41:56.0734405Z         filtering to '' (March 11, 2022 - September 26, 2023)
2024-03-12T06:41:57.5003331Z           shows the correct total donations
2024-03-12T06:41:58.9110918Z           shows 2 Recent Donation link(s)
2024-03-12T06:42:00.3143567Z           shows the correct total money raised
2024-03-12T06:42:00.3145470Z       given 1 Product Drive Donation on 2024-03-09 (unless 'All Time'), 1 during 2024-03-10..2024-03-10, and 1 on 2024-03-11
2024-03-12T06:42:00.3146823Z         filtering to 'Yesterday'
2024-03-12T06:42:01.7070226Z           shows 1 Recent Donation link(s)
2024-03-12T06:42:03.0936901Z           shows the correct total money raised
2024-03-12T06:42:04.4546153Z           shows the correct total donations
2024-03-12T06:42:04.4548127Z       given 1 Product Drive Donation on 2024-02-10 (unless 'All Time'), 4 during 2024-02-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:04.4549615Z         filtering to 'Last 30 Days'
2024-03-12T06:42:05.9731574Z           shows the correct total donations
2024-03-12T06:42:07.4696790Z           shows 3 Recent Donation link(s)
2024-03-12T06:42:08.9494969Z           shows the correct total money raised
2024-03-12T06:42:08.9497014Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T06:42:08.9498451Z         filtering to 'This Year'
2024-03-12T06:42:10.4231013Z           shows 3 Recent Donation link(s)
2024-03-12T06:42:11.8593120Z           shows the correct total money raised
2024-03-12T06:42:13.3375508Z           shows the correct total donations
2024-03-12T06:42:13.3376429Z       Product drive behaviour with Mixed Donation types
2024-03-12T06:42:14.0447115Z         only shows product drive donations as product drive donations
2024-03-12T06:42:14.7570163Z         only counts product drive donations for product drive
2024-03-12T06:42:15.4626307Z         only counts product drive money raised
2024-03-12T06:42:15.4628191Z       given 1 Product Drive Donation on 2024-03-10 (unless 'All Time'), 2 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:15.4629680Z         filtering to 'Today'
2024-03-12T06:42:16.8792771Z           shows 2 Recent Donation link(s)
2024-03-12T06:42:18.2925220Z           shows the correct total money raised
2024-03-12T06:42:19.7110452Z           shows the correct total donations
2024-03-12T06:42:19.7112325Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T06:42:19.7113624Z         filtering to 'This Month'
2024-03-12T06:42:21.0949043Z           shows the correct total donations
2024-03-12T06:42:22.4732609Z           shows the correct total money raised
2024-03-12T06:42:23.8592111Z           shows 1 Recent Donation link(s)
2024-03-12T06:42:23.8594009Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T06:42:23.8595609Z         filtering to 'Last Month'
2024-03-12T06:42:25.4086416Z           shows 1 Recent Donation link(s)
2024-03-12T06:42:26.7907132Z           shows the correct total donations
2024-03-12T06:42:28.1789643Z           shows the correct total money raised
2024-03-12T06:42:28.1790772Z     Manufacturer Donations
2024-03-12T06:42:28.7708491Z       has a link to create a new donation
2024-03-12T06:42:28.7710311Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-12T06:42:28.7711749Z         filtering to 'Last Month'
2024-03-12T06:42:30.1311258Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-12T06:42:30.1313732Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 5 during 2000-01-01..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:30.1315337Z         filtering to 'All Time'
2024-03-12T06:42:31.8578096Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-03-12T06:42:31.8580231Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-12T06:42:31.8581611Z         filtering to 'This Month'
2024-03-12T06:42:33.4706692Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-12T06:42:33.4708369Z       given 1 Manufacturer donating on 2024-02-10  (unless 'All Time'), 1 during 2024-02-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:33.4710865Z         filtering to 'Last 30 Days'
2024-03-12T06:42:34.9550599Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-12T06:42:34.9552609Z       given 1 Manufacturer donating on 2024-03-10  (unless 'All Time'), 6 during 2024-03-11..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:34.9553589Z         filtering to 'Today'
2024-03-12T06:42:36.9364502Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-12T06:42:36.9366581Z       given 1 Manufacturer donating on 2022-03-10  (unless 'All Time'), 9 during 2022-03-11..2023-11-21, and 1 on 2023-11-22
2024-03-12T06:42:36.9368230Z         filtering to '' (March 11, 2022 - November 21, 2023)
2024-03-12T06:42:39.3469738Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-12T06:42:39.3471719Z       given 1 Manufacturer donating on 2024-03-09  (unless 'All Time'), 2 during 2024-03-10..2024-03-10, and 1 on 2024-03-11
2024-03-12T06:42:39.3472729Z         filtering to 'Yesterday'
2024-03-12T06:42:40.8917564Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-12T06:42:40.8919327Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-12T06:42:40.8920780Z         filtering to 'This Year'
2024-03-12T06:42:42.3174594Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-12T06:42:42.3176448Z       given 1 Manufacturer donating on 2024-03-04  (unless 'All Time'), 2 during 2024-03-05..2024-03-11, and 1 on 2024-03-12
2024-03-12T06:42:42.3177405Z         filtering to 'Last 7 Days'
2024-03-12T06:42:43.8507467Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-03-12T06:42:43.8508562Z   With a new essentials bank
2024-03-12T06:43:11.8384381Z     displays the getting started guide until the steps are completed
2024-03-12T06:43:11.8593338Z W, [2024-03-11T23:43:11.859033 #2564]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-12T06:43:11.8595735Z W, [2024-03-11T23:43:11.859089 #2564]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-12T06:43:11.8598754Z W, [2024-03-11T23:43:11.859110 #2564]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-12T06:43:11.8602034Z W, [2024-03-11T23:43:11.859147 #2564]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-12T06:43:11.8997759Z 
2024-03-12T06:43:11.8998178Z Failures:
2024-03-12T06:43:11.8998691Z 
2024-03-12T06:43:11.8999809Z   1) Purchases while signed in as a normal user When creating a new purchase via manual entry multiple line items for the same item type are accepted and combined on the backend
2024-03-12T06:43:11.9237902Z      Failure/Error: page.find(:css, "#__add_line_item").click
2024-03-12T06:43:11.9238559Z 
2024-03-12T06:43:11.9238776Z      Capybara::ElementNotFound:
2024-03-12T06:43:11.9239331Z        Unable to find css "#__add_line_item"
2024-03-12T06:43:11.9239763Z 
2024-03-12T06:43:11.9242161Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/capybara/failures_r_spec_example_groups_purchases_while_signed_in_as_a_normal_user_when_creating_a_new_purchase_via_manual_entry_multiple_line_items_for_the_same_item_type_are_accepted_and_combined_on_the_backend_244.png
2024-03-12T06:43:11.9244996Z 
2024-03-12T06:43:11.9245005Z 
2024-03-12T06:43:11.9245508Z      # ./spec/system/purchase_system_spec.rb:172:in `block (5 levels) in <top (required)>'
2024-03-12T06:43:11.9246233Z 
2024-03-12T06:43:11.9247010Z   2) Purchases while signed in as a normal user When creating a new purchase via barcode entry User scan same barcode 2 times
2024-03-12T06:43:11.9248275Z      Failure/Error: @__Condition__.wait @__Lock__, timeout
2024-03-12T06:43:11.9248752Z 
2024-03-12T06:43:11.9248934Z      Ferrum::JavaScriptError:
2024-03-12T06:43:11.9249671Z        TypeError: Cannot read properties of null (reading 'click')
2024-03-12T06:43:11.9251582Z            at Object.fill_fields_with_barcode_results (http://127.0.0.1:45973/assets/utils/barcode_items-ee1050c4d1ade4569ef6cfc83d5f4792f67daabaca0ae24f75455737fea0a72b.js:87:47)
2024-03-12T06:43:11.9253322Z            at fire (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:6449)
2024-03-12T06:43:11.9254542Z            at Object.fireWith [as resolveWith] (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:7255)
2024-03-12T06:43:11.9255719Z            at done (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:65284)
2024-03-12T06:43:11.9256895Z            at XMLHttpRequest.<anonymous> (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:67955)
2024-03-12T06:43:11.9257588Z 
2024-03-12T06:43:11.9259273Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_purchases_while_signed_in_as_a_normal_user_when_creating_a_new_purchase_via_barcode_entry_user_scan_same_barcode_2_times_472.png
2024-03-12T06:43:11.9261025Z 
2024-03-12T06:43:11.9261035Z 
2024-03-12T06:43:11.9262544Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:53:in `sleep'
2024-03-12T06:43:11.9265626Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:53:in `wait'
2024-03-12T06:43:11.9268672Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:53:in `ns_wait'
2024-03-12T06:43:11.9271931Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/abstract_lockable_object.rb:44:in `block in ns_wait_until'
2024-03-12T06:43:11.9275247Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/abstract_lockable_object.rb:40:in `loop'
2024-03-12T06:43:11.9278705Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/abstract_lockable_object.rb:40:in `ns_wait_until'
2024-03-12T06:43:11.9281605Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/atomic/event.rb:87:in `block in wait'
2024-03-12T06:43:11.9284710Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `block in synchronize'
2024-03-12T06:43:11.9288345Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
2024-03-12T06:43:11.9291891Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
2024-03-12T06:43:11.9295620Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/atomic/event.rb:84:in `wait'
2024-03-12T06:43:11.9298608Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/concern/obligation.rb:75:in `wait'
2024-03-12T06:43:11.9301691Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/concurrent-ruby-1.2.3/lib/concurrent-ruby/concurrent/concern/obligation.rb:99:in `value!'
2024-03-12T06:43:11.9304432Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/browser/client.rb:42:in `command'
2024-03-12T06:43:11.9306763Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/page.rb:269:in `command'
2024-03-12T06:43:11.9309129Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/frame/runtime.rb:109:in `block in call'
2024-03-12T06:43:11.9311529Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/utils/attempt.rb:10:in `with_retry'
2024-03-12T06:43:11.9313911Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/frame/runtime.rb:105:in `call'
2024-03-12T06:43:11.9316306Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/ferrum-0.14/lib/ferrum/frame/runtime.rb:97:in `evaluate_on'
2024-03-12T06:43:11.9318397Z      # /opt/hostedtoolcache/Ruby/3.2.2/x64/lib/ruby/3.2.0/forwardable.rb:240:in `evaluate_on'
2024-03-12T06:43:11.9319758Z      # /opt/hostedtoolcache/Ruby/3.2.2/x64/lib/ruby/3.2.0/forwardable.rb:240:in `evaluate_on'
2024-03-12T06:43:11.9321934Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/cuprite-0.15/lib/capybara/cuprite/browser.rb:175:in `visible?'
2024-03-12T06:43:11.9324359Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/cuprite-0.15/lib/capybara/cuprite/node.rb:21:in `command'
2024-03-12T06:43:11.9326706Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/cuprite-0.15/lib/capybara/cuprite/node.rb:131:in `visible?'
2024-03-12T06:43:11.9329093Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/node/element.rb:306:in `block in visible?'
2024-03-12T06:43:11.9331411Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/node/base.rb:77:in `synchronize'
2024-03-12T06:43:11.9333663Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/node/element.rb:306:in `visible?'
2024-03-12T06:43:11.9336182Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/queries/selector_query.rb:572:in `matches_visibility_filters?'
2024-03-12T06:43:11.9338856Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/queries/selector_query.rb:447:in `matches_system_filters?'
2024-03-12T06:43:11.9341296Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/queries/selector_query.rb:122:in `matches_filters?'
2024-03-12T06:43:11.9343646Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/capybara-3.40.0/lib/capybara/result.rb:32:in `block in initialize'
2024-03-12T06:43:11.9345675Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec:in `each'
2024-03-12T06:43:11.9347952Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec:in `each'
2024-03-12T06:43:11.9349985Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec:in `each'
2024-03-12T06:43:11.9351788Z      # /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec:in `each'
2024-03-12T06:43:11.9352873Z      # 
2024-03-12T06:43:11.9353399Z      #   Showing full backtrace because every line was filtered out.
2024-03-12T06:43:11.9354341Z      #   See docs for RSpec::Configuration#backtrace_exclusion_patterns and
2024-03-12T06:43:11.9355315Z      #   RSpec::Configuration#backtrace_inclusion_patterns for more information.
2024-03-12T06:43:11.9355937Z 
2024-03-12T06:43:11.9356816Z   3) Purchases while signed in as a normal user When creating a new purchase via barcode entry a user can add items via scanning them in by barcode
2024-03-12T06:43:11.9358885Z      Failure/Error: qty = page.find(:xpath, '//input[@id="purchase_line_items_attributes_0_quantity"]').value
2024-03-12T06:43:11.9359776Z 
2024-03-12T06:43:11.9359966Z      Ferrum::JavaScriptError:
2024-03-12T06:43:11.9360754Z        TypeError: Cannot read properties of null (reading 'click')
2024-03-12T06:43:11.9362813Z            at Object.fill_fields_with_barcode_results (http://127.0.0.1:45973/assets/utils/barcode_items-ee1050c4d1ade4569ef6cfc83d5f4792f67daabaca0ae24f75455737fea0a72b.js:87:47)
2024-03-12T06:43:11.9364668Z            at fire (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:6449)
2024-03-12T06:43:11.9365925Z            at Object.fireWith [as resolveWith] (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:7255)
2024-03-12T06:43:11.9367171Z            at done (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:65284)
2024-03-12T06:43:11.9368398Z            at XMLHttpRequest.<anonymous> (https://ga.jspm.io/npm:jquery@3.6.1/dist/jquery.js:74:67955)
2024-03-12T06:43:11.9369223Z 
2024-03-12T06:43:11.9371423Z      [Screenshot Image]: /home/runner/work/human-essentials/human-essentials/tmp/screenshots/failures_r_spec_example_groups_purchases_while_signed_in_as_a_normal_user_when_creating_a_new_purchase_via_barcode_entry_a_user_can_add_items_via_scanning_them_in_by_barcode_301.png
2024-03-12T06:43:11.9373569Z 
2024-03-12T06:43:11.9373577Z 
2024-03-12T06:43:11.9374092Z      # ./spec/system/purchase_system_spec.rb:235:in `block (5 levels) in <top (required)>'
2024-03-12T06:43:11.9374848Z 
2024-03-12T06:43:11.9375247Z Finished in 3 minutes 25.7 seconds (files took 8.23 seconds to load)
2024-03-12T06:43:11.9376021Z 212 examples, 3 failures
2024-03-12T06:43:11.9376326Z 
2024-03-12T06:43:11.9376483Z Failed examples:
2024-03-12T06:43:11.9376709Z 
2024-03-12T06:43:11.9378238Z rspec ./spec/system/purchase_system_spec.rb:167 # Purchases while signed in as a normal user When creating a new purchase via manual entry multiple line items for the same item type are accepted and combined on the backend
2024-03-12T06:43:11.9380981Z rspec ./spec/system/purchase_system_spec.rb:240 # Purchases while signed in as a normal user When creating a new purchase via barcode entry User scan same barcode 2 times
2024-03-12T06:43:11.9383510Z rspec ./spec/system/purchase_system_spec.rb:227 # Purchases while signed in as a normal user When creating a new purchase via barcode entry a user can add items via scanning them in by barcode
2024-03-12T06:43:11.9384950Z 
2024-03-12T06:43:11.9385114Z Randomized with seed 16344
2024-03-12T06:43:11.9385423Z 
2024-03-12T06:43:12.2124805Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-12T06:43:12.2127058Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3740 / 6478 LOC (57.73%) covered.
2024-03-12T06:43:12.3327175Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/admin/account_requests_requests_spec.rb" "spec/requests/admin/questions_spec.rb" "spec/requests/broadcast_announcements_spec.rb" "spec/requests/events_requests_spec.rb" "spec/requests/partners/dashboard_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb" failed
2024-03-12T06:43:12.7297963Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-12T06:43:12.7300286Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10785 LOC (0.35%) covered.
2024-03-12T06:43:12.7560333Z ##[error]Process completed with exit code 1.
