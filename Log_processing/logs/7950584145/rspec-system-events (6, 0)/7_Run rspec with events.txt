2024-02-18T17:25:29.2658951Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-18T17:25:29.2659918Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-18T17:25:29.2693860Z shell: /usr/bin/bash -e {0}
2024-02-18T17:25:29.2694283Z env:
2024-02-18T17:25:29.2694727Z   POSTGRES_HOST: localhost
2024-02-18T17:25:29.2695103Z   DATABASE_HOST: localhost
2024-02-18T17:25:29.2695511Z   PG_USERNAME: postgres
2024-02-18T17:25:29.2695956Z   PG_PASSWORD: password
2024-02-18T17:25:29.2696362Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-18T17:25:29.2696746Z   POSTGRES_PORT: 5432
2024-02-18T17:25:29.2697259Z   PGHOST: localhost
2024-02-18T17:25:29.2697632Z   PGUSER: postgres
2024-02-18T17:25:29.2698035Z   RAILS_ENV: test
2024-02-18T17:25:29.2698435Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-18T17:25:29.2698859Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-18T17:25:29.2699341Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-18T17:25:29.2699814Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-18T17:25:29.2700452Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-18T17:25:29.2701076Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-18T17:25:29.2701728Z   EVENTS_READ: true
2024-02-18T17:25:29.2702148Z ##[endgroup]
2024-02-18T17:25:34.9121886Z W, [2024-02-18T17:25:34.911854 #2330]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-18T17:25:34.9124486Z W, [2024-02-18T17:25:34.911911 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:25:34.9127258Z W, [2024-02-18T17:25:34.911929 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:25:34.9133043Z W, [2024-02-18T17:25:34.911969 #2330]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-18T17:25:37.0600027Z W, [2024-02-18T17:25:37.059712 #2330]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-18T17:25:37.0602246Z W, [2024-02-18T17:25:37.059752 #2330]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:25:37.0604513Z W, [2024-02-18T17:25:37.059765 #2330]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:25:37.0607123Z W, [2024-02-18T17:25:37.059804 #2330]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-18T17:25:37.0657136Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-18T17:25:45.2618132Z 
2024-02-18T17:25:45.2618768Z Randomized with seed 2173
2024-02-18T17:25:46.1638874Z 
2024-02-18T17:25:46.1639551Z Admin Organization Management
2024-02-18T17:25:46.1640953Z   While signed in as an Administrative User (super admin)
2024-02-18T17:25:54.6786425Z     creates a new organization
2024-02-18T17:25:55.7631901Z     filters by organizations by name in organizations index page
2024-02-18T17:25:57.0532883Z     can view organization details
2024-02-18T17:25:57.0534110Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-18T17:25:58.9279607Z     creates a new organization
2024-02-18T17:25:58.9280182Z 
2024-02-18T17:25:58.9280456Z /partners/children
2024-02-18T17:25:58.9281817Z   GET #index
2024-02-18T17:25:59.0232344Z     should render without any issues
2024-02-18T17:25:59.0720999Z     should export CSV
2024-02-18T17:25:59.0721949Z 
2024-02-18T17:25:59.0722203Z Purchases
2024-02-18T17:25:59.0724417Z   while signed in as an organization admin
2024-02-18T17:26:00.1304401Z     allows deletion of a purchase
2024-02-18T17:26:00.1305065Z   while signed in as a normal user
2024-02-18T17:26:00.1306455Z     When visiting the index page
2024-02-18T17:26:00.1307426Z       In the middle of the year
2024-02-18T17:26:00.8883677Z         User sees total purchases value
2024-02-18T17:26:01.7154423Z         User can click to the new purchase form
2024-02-18T17:26:02.4646592Z         User sees purchased date column
2024-02-18T17:26:02.4647265Z       When filtering on the index page
2024-02-18T17:26:03.2899199Z         User can filter the #index by storage location
2024-02-18T17:26:04.1238795Z         User can filter the #index by vendor
2024-02-18T17:26:04.1239570Z         behaves like Date Range Picker
2024-02-18T17:26:04.1240374Z           when choosing a date range that only includes the previous week
2024-02-18T17:26:05.1113948Z             shows only 1 record
2024-02-18T17:26:05.1115271Z           when choosing 'Last Month'
2024-02-18T17:26:06.0537278Z             shows only 2 of the records
2024-02-18T17:26:06.0538569Z           when choosing 'All Time'
2024-02-18T17:26:07.0109336Z             shows all the records
2024-02-18T17:26:07.0110635Z     When visiting an existing purchase
2024-02-18T17:26:07.4796104Z       does not allow deletion of a purchase
2024-02-18T17:26:07.4797259Z     When creating a new purchase
2024-02-18T17:26:07.9640179Z       should not display inactive storage locations in dropdown
2024-02-18T17:26:09.1705440Z       via manual entry
2024-02-18T17:26:09.1706449Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-18T17:26:10.0648656Z         User can create a purchase using dollars decimal amount
2024-02-18T17:26:11.0809413Z         Does not include inactive items in the line item fields
2024-02-18T17:26:12.2079765Z         User can create a purchase IN THE PAST
2024-02-18T17:26:13.2402063Z         User can create vendor from purchase
2024-02-18T17:26:13.2402981Z         when creating a purchase incorrectly
2024-02-18T17:26:14.0376054Z           should display failure with error messages
2024-02-18T17:26:15.0025595Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-18T17:26:15.0026609Z       Editing purchase
2024-02-18T17:26:15.6332480Z         A user can view another organizations purchase
2024-02-18T17:26:16.1366736Z         A user can see purchased_from value
2024-02-18T17:26:16.1367619Z       via barcode entry
2024-02-18T17:26:16.8794534Z         a user can add items via scanning them in by barcode
2024-02-18T17:26:18.1518938Z         a user can add items that do not yet have a barcode
2024-02-18T17:26:19.1047117Z         User scan same barcode 2 times
2024-02-18T17:26:19.1049670Z 
2024-02-18T17:26:19.1050189Z StorageLocations
2024-02-18T17:26:19.1051455Z   While not signed in
2024-02-18T17:26:19.1129395Z     redirects the user to the sign-in page for CRUD actions
2024-02-18T17:26:19.1130434Z   While signed in
2024-02-18T17:26:19.1131663Z     Looking at a different organization
2024-02-18T17:26:19.2893139Z       redirects the user to the sign-in page for CRUD actions
2024-02-18T17:26:19.2893740Z     GET #edit
2024-02-18T17:26:19.7814709Z       returns http success
2024-02-18T17:26:19.7815426Z     POST #import_csv
2024-02-18T17:26:19.7816094Z       without a csv file
2024-02-18T17:26:19.7941664Z         presents a flash error message
2024-02-18T17:26:19.8052516Z         redirects to :index
2024-02-18T17:26:19.8053294Z       with a csv file
2024-02-18T17:26:19.8278848Z         redirects
2024-02-18T17:26:19.8428343Z         presents a flash notice message
2024-02-18T17:26:19.8480108Z         invokes .import_csv
2024-02-18T17:26:19.8480998Z       csv file with wrong headers
2024-02-18T17:26:19.8605417Z         redirects
2024-02-18T17:26:19.8731408Z         presents a flash error message
2024-02-18T17:26:19.8732277Z     GET #show
2024-02-18T17:26:19.8732937Z       csv
2024-02-18T17:26:19.9255358Z         should be successful
2024-02-18T17:26:19.9256039Z       html
2024-02-18T17:26:19.9956593Z         should return a correct response
2024-02-18T17:26:19.9957541Z         with version date set
2024-02-18T17:26:19.9958206Z           with a version found
2024-02-18T17:26:20.0739695Z             should show the version specified
2024-02-18T17:26:20.0740747Z           with no version found
2024-02-18T17:26:20.1420191Z             should show N/A
2024-02-18T17:26:20.1421187Z     PUT #deactivate
2024-02-18T17:26:20.1611832Z       discards
2024-02-18T17:26:20.1612515Z       with inventory
2024-02-18T17:26:20.2075188Z         does not discard
2024-02-18T17:26:20.2075848Z     PUT #reactivate
2024-02-18T17:26:20.2234785Z       undiscards
2024-02-18T17:26:20.2235399Z     GET #new
2024-02-18T17:26:20.2533520Z       returns http success
2024-02-18T17:26:20.2534799Z     GET #destroy
2024-02-18T17:26:20.2842471Z       redirects to #index
2024-02-18T17:26:20.2842932Z     GET #inventory
2024-02-18T17:26:20.2844241Z       without any overrides
2024-02-18T17:26:20.3346707Z         returns a collection that only includes items at the storage location
2024-02-18T17:26:20.3347674Z       when also including omitted items
2024-02-18T17:26:20.3811019Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-18T17:26:20.4281339Z         contains a collection of ducktyped entries that respond the same
2024-02-18T17:26:20.4282741Z       when also including inactive items
2024-02-18T17:26:20.4909803Z         returns a collection that also includes items that have been deactivated
2024-02-18T17:26:20.4910936Z     GET #index
2024-02-18T17:26:20.4911626Z       csv
2024-02-18T17:26:20.5933583Z         includes headers followed by alphabetized item names
2024-02-18T17:26:20.6117023Z         succeeds
2024-02-18T17:26:20.6117964Z       html
2024-02-18T17:26:20.6473941Z         succeeds
2024-02-18T17:26:20.6474882Z         with inactive locations
2024-02-18T17:26:20.6832073Z           does not includes the inactive location
2024-02-18T17:26:20.6833032Z           with include_inactive_locations
2024-02-18T17:26:20.7211409Z             includes the inactive location
2024-02-18T17:26:20.7212517Z 
2024-02-18T17:26:20.7212741Z Kit management
2024-02-18T17:26:21.3251971Z   should not display inactive storage locations under allocations
2024-02-18T17:26:22.2459473Z   can create a new kit as a user with the proper quantity
2024-02-18T17:26:23.7143227Z   can allocate and deallocate quantity per storage location from kit index
2024-02-18T17:26:23.7144927Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-18T17:26:24.8114491Z     will not change quantity amounts when allocating
2024-02-18T17:26:24.8115439Z   when there is no kit quantity
2024-02-18T17:26:25.9580290Z     will not change quantity amounts when deallocating
2024-02-18T17:26:25.9581317Z 
2024-02-18T17:26:25.9581582Z /partners/profiles
2024-02-18T17:26:25.9582796Z   PUT #update
2024-02-18T17:26:26.0199760Z     updates the partner and profile
2024-02-18T17:26:26.0200629Z     when updating an existing value to a blank value
2024-02-18T17:26:26.0725947Z       does not update other partner profile attributes to blank
2024-02-18T17:26:26.1244067Z       updates the partner profile attribute to a blank value
2024-02-18T17:26:26.1773687Z       does store N/A in the database
2024-02-18T17:26:26.1774626Z     with no social media
2024-02-18T17:26:26.4446403Z       shows an error
2024-02-18T17:26:26.4447339Z   GET #show
2024-02-18T17:26:26.5038347Z     shows correct values for yes/no buttons
2024-02-18T17:26:26.5533024Z     displays the partner
2024-02-18T17:26:26.5533924Z   GET #edit
2024-02-18T17:26:26.6381498Z     displays the partner
2024-02-18T17:26:26.7280896Z     has "No" radio button value when value is false
2024-02-18T17:26:26.8136806Z     does not have default radio button value when value is nil
2024-02-18T17:26:26.9026869Z     has "Yes" radio button value when value is true
2024-02-18T17:26:26.9027468Z 
2024-02-18T17:26:26.9027658Z User account management
2024-02-18T17:26:26.9028545Z   when not in staging
2024-02-18T17:26:27.6762012Z     should fail when the email is invalid
2024-02-18T17:26:28.5786616Z     should change an user name
2024-02-18T17:26:29.4583299Z     should change the email
2024-02-18T17:26:29.4584208Z   when in staging
2024-02-18T17:26:29.9154954Z     should not allow the user to change staging credentials
2024-02-18T17:26:30.3716287Z     should display staging warning
2024-02-18T17:26:30.3716986Z 
2024-02-18T17:26:30.3717161Z Vendor
2024-02-18T17:26:30.3719125Z   When a user views the index page
2024-02-18T17:26:30.8451332Z     should have the vendor names in alphabetical order
2024-02-18T17:26:30.8452133Z   when creating a new vendor
2024-02-18T17:26:31.6310988Z     can create a new vendor instance as a user
2024-02-18T17:26:32.3661641Z     cannot add a new vendor instance with empty attributes
2024-02-18T17:26:32.3662399Z   when editing an existing vendor
2024-02-18T17:26:33.1445680Z     can update the contact info for a vendor as a user
2024-02-18T17:26:33.9120303Z     does not update a vendor with empty attributes
2024-02-18T17:26:33.9121450Z   When vendor have purchases associated with them already
2024-02-18T17:26:34.5233489Z     can have existing vendors show in the #index with some summary stats
2024-02-18T17:26:35.1562701Z     can have a single vendor show semi-detailed stats about purchases
2024-02-18T17:26:35.1563548Z 
2024-02-18T17:26:35.1564064Z Managing requests
2024-02-18T17:26:35.1565660Z   creating a individuals/family request
2024-02-18T17:26:35.1566746Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:26:35.1567664Z       WHEN they create a request inproperly
2024-02-18T17:26:36.0768052Z         should show an error message with the instructions
2024-02-18T17:26:36.0769105Z       WHEN they create a request properly
2024-02-18T17:26:36.0770323Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:26:38.2927785Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-18T17:26:38.2928889Z   creating a request
2024-02-18T17:26:38.2930843Z     GIVEN a partner user is permitted to make a request
2024-02-18T17:26:38.2931975Z       WHEN they create a request properly
2024-02-18T17:26:38.2933259Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-18T17:26:40.5156263Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-18T17:26:40.5158072Z       WHEN they create a request with only a comment
2024-02-18T17:26:41.4595044Z         should be created without any issue
2024-02-18T17:26:41.4596279Z       WHEN they create a request inproperly by not inputting anything
2024-02-18T17:26:42.3955520Z         should show an error message with the instructions
2024-02-18T17:26:42.3956679Z 
2024-02-18T17:26:42.3957205Z Organization management
2024-02-18T17:26:42.3958397Z   while signed in as an organization admin
2024-02-18T17:26:43.4078158Z     can deactivate a user in the organization
2024-02-18T17:26:43.9189582Z     can see 'Make user' button for admins
2024-02-18T17:26:44.4634877Z     can re-invite a user to an organization after 7 days
2024-02-18T17:26:45.4559154Z     can add a new user to an organization
2024-02-18T17:26:46.4144395Z     can re-activate a user in the organization
2024-02-18T17:26:46.4145451Z     Editing the organization
2024-02-18T17:26:47.2817339Z       can set a reminder and a deadline day
2024-02-18T17:26:48.7145649Z       can select and deselect Required Partner Fields
2024-02-18T17:26:49.5362724Z       can set the NDBN Member ID
2024-02-18T17:26:50.5325257Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-18T17:26:51.6073565Z       can select if the org distributes essentials monthly
2024-02-18T17:26:52.7920749Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-18T17:26:53.7549841Z       can select if the org shows year-to-date values on the distribution printout
2024-02-18T17:26:54.7310884Z       can enable if the org uses single step invite and approve partner process
2024-02-18T17:26:55.7111402Z       can select if the org repackages essentials
2024-02-18T17:26:56.5639352Z       can set a default storage location on the organization
2024-02-18T17:26:56.5640028Z     Viewing the organization
2024-02-18T17:26:57.1175969Z       can view organization details
2024-02-18T17:26:57.1176932Z   while signed in as a normal user
2024-02-18T17:26:57.6095449Z     cannot see 'Make user' button for admins
2024-02-18T17:26:58.0762521Z     can see summary details about the organization as a user
2024-02-18T17:26:58.0763513Z 
2024-02-18T17:26:58.0763886Z DonationSites
2024-02-18T17:26:58.0764826Z   while signed in
2024-02-18T17:26:58.0766053Z     GET #index
2024-02-18T17:26:58.0767149Z       csv
2024-02-18T17:26:58.0994956Z         is expected to be successful
2024-02-18T17:26:58.0995721Z       html
2024-02-18T17:26:58.1317312Z         is expected to be successful
2024-02-18T17:26:58.1319115Z 
2024-02-18T17:26:58.1319587Z /account_requests
2024-02-18T17:26:58.1320939Z   GET #new
2024-02-18T17:26:58.1598677Z     renders a successful response
2024-02-18T17:26:58.1599502Z   GET #received
2024-02-18T17:26:58.1600093Z     when given a valid token
2024-02-18T17:26:58.1771845Z       should render the received template
2024-02-18T17:26:58.1772672Z     when given a invalid token
2024-02-18T17:26:58.1833718Z       should render a error that says that is code provided is invalid
2024-02-18T17:26:58.1834712Z   POST #create
2024-02-18T17:26:58.1835302Z     with invalid parameters
2024-02-18T17:26:58.2010948Z       renders a successful response (i.e. to display the 'new' template)
2024-02-18T17:26:58.2182092Z       does not create a new AccountRequest
2024-02-18T17:26:58.2184569Z     with valid parameters
2024-02-18T17:26:58.2316902Z       redirects to the created account_request confirmation
2024-02-18T17:26:58.2432826Z       delivers the confirmation email via default queue
2024-02-18T17:26:58.2554297Z       creates a new AccountRequest
2024-02-18T17:26:58.2555103Z   GET #confirm
2024-02-18T17:26:58.2556477Z     when given a valid token
2024-02-18T17:26:58.2734986Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-18T17:26:58.2736392Z     when given a invalid token
2024-02-18T17:26:58.2796982Z       should render a error that says that is code provided is invalid
2024-02-18T17:26:58.2798592Z     when given a token that has already been confirmed
2024-02-18T17:26:58.4670599Z       should render a error that says that is code provided is invalid
2024-02-18T17:26:58.4671676Z   GET #confirmation
2024-02-18T17:26:58.4672047Z     when given a valid token
2024-02-18T17:26:58.4816355Z       should render the confirmation template
2024-02-18T17:26:58.4817515Z     when given a token that has already been confirmed
2024-02-18T17:26:58.8152581Z       should render a error that says that is code provided is invalid
2024-02-18T17:26:58.8153340Z     when given a invalid token
2024-02-18T17:26:58.8349788Z       should render a error that says that is code provided is invalid
2024-02-18T17:26:58.8350955Z 
2024-02-18T17:26:58.8351598Z Admin::Organizations
2024-02-18T17:26:58.8352818Z   When logged in as a super admin
2024-02-18T17:26:58.8355116Z     PATCH #update
2024-02-18T17:26:58.8356008Z       with a valid update
2024-02-18T17:26:59.0248834Z         redirects to #index
2024-02-18T17:26:59.0249671Z       with an invalid update
2024-02-18T17:26:59.2365861Z         redirects to #edit with an error message
2024-02-18T17:26:59.4427918Z         returns http success
2024-02-18T17:26:59.4429007Z     PUT #update
2024-02-18T17:26:59.4605665Z       redirect
2024-02-18T17:26:59.4606176Z     GET #index
2024-02-18T17:26:59.4885720Z       returns http success
2024-02-18T17:26:59.4886417Z     DELETE #destroy
2024-02-18T17:26:59.4887042Z       with a valid organization id
2024-02-18T17:27:00.0138204Z         redirects to #index
2024-02-18T17:27:00.0139403Z     GET #edit
2024-02-18T17:27:00.2249772Z       returns http success
2024-02-18T17:27:00.2250414Z     POST #create
2024-02-18T17:27:00.2251305Z       with invalid params
2024-02-18T17:27:00.2641338Z         does not create an organization and renders #create with an error message
2024-02-18T17:27:00.2642046Z       with valid params
2024-02-18T17:27:00.4823553Z         creates an organization and redirects to #index
2024-02-18T17:27:00.4824178Z     GET #new
2024-02-18T17:27:00.5191805Z       returns http success
2024-02-18T17:27:00.5192460Z       when given a valid account request token in the query parameters
2024-02-18T17:27:00.5716755Z         should render new with pre populate input fields from the account_request
2024-02-18T17:27:00.5718086Z       when given a token that matches a account request that has already been processed
2024-02-18T17:27:00.7862242Z         should render new with a flash error message
2024-02-18T17:27:00.7863272Z     GET #show
2024-02-18T17:27:00.9966384Z       returns http success
2024-02-18T17:27:00.9967146Z     DELETE #destroy
2024-02-18T17:27:01.3476251Z       redirects
2024-02-18T17:27:01.3478776Z   When logged in as a non-admin user
2024-02-18T17:27:01.3480226Z     GET #edit
2024-02-18T17:27:01.3617381Z       redirects
2024-02-18T17:27:01.3617788Z     POST #create
2024-02-18T17:27:01.3776259Z       redirects
2024-02-18T17:27:01.3776860Z     PUT #update
2024-02-18T17:27:01.3909883Z       redirects
2024-02-18T17:27:01.3910611Z     GET #new
2024-02-18T17:27:01.4030098Z       redirects
2024-02-18T17:27:01.4030989Z     GET #index
2024-02-18T17:27:01.4148308Z       redirects
2024-02-18T17:27:01.4149227Z 
2024-02-18T17:27:01.4149480Z Audits
2024-02-18T17:27:01.4150736Z   while signed in as an organization admin
2024-02-18T17:27:01.4153298Z     POST #create
2024-02-18T17:27:01.4154022Z       with valid params
2024-02-18T17:27:01.4578081Z         redirects to the #show after created audit
2024-02-18T17:27:01.4940938Z         creates a new Audit
2024-02-18T17:27:01.5297152Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-18T17:27:01.5651182Z         assigns a newly created audit as @audit
2024-02-18T17:27:01.6010420Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-18T17:27:01.6011585Z       with invalid params
2024-02-18T17:27:01.6500182Z         re-renders the 'new' template
2024-02-18T17:27:01.6884348Z         assigns a newly created but unsaved audit as @audit
2024-02-18T17:27:01.7414153Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-18T17:27:01.7415332Z     GET #index
2024-02-18T17:27:01.7949124Z       is successful
2024-02-18T17:27:01.7950233Z     GET #new
2024-02-18T17:27:01.8312958Z       is successful
2024-02-18T17:27:01.8313821Z     GET #show
2024-02-18T17:27:01.8811445Z       is successful
2024-02-18T17:27:01.8812236Z     GET #edit
2024-02-18T17:27:01.9403505Z       is successful if the status of audit is `in_progress`
2024-02-18T17:27:02.0530513Z       redirects to #index if the status of audit is not `in_progress`
2024-02-18T17:27:02.0531610Z     POST #finalize
2024-02-18T17:27:02.2012873Z       sets the finalize status and saves an event
2024-02-18T17:27:02.2013687Z     DELETE #destroy
2024-02-18T17:27:02.2039767Z       with valid params
2024-02-18T17:27:02.2744157Z         destroys the audit if the audit's status is `in_progress`
2024-02-18T17:27:02.3110993Z         can not destroy the audit if the audit's status is `finalized`
2024-02-18T17:27:02.3501138Z         destroys the audit if the audit's status is `confirms`
2024-02-18T17:27:02.3504269Z 
2024-02-18T17:27:02.3504478Z Dashboard
2024-02-18T17:27:02.3506670Z   With a new essentials bank
2024-02-18T17:27:30.3345464Z     displays the getting started guide until the steps are completed
2024-02-18T17:27:30.3346386Z   With an existing essentials bank
2024-02-18T17:27:30.3346996Z     Product Drives
2024-02-18T17:27:30.9177218Z       has a widget for product drive summary data
2024-02-18T17:27:30.9178876Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:27:30.9180025Z         filtering to 'This Year'
2024-02-18T17:27:32.5332658Z           shows 3 Recent Donation link(s)
2024-02-18T17:27:34.0208887Z           shows the correct total money raised
2024-02-18T17:27:35.5104830Z           shows the correct total donations
2024-02-18T17:27:35.5108047Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:27:35.5109602Z         filtering to 'Last Month'
2024-02-18T17:27:37.0257312Z           shows the correct total money raised
2024-02-18T17:27:38.5360824Z           shows the correct total donations
2024-02-18T17:27:40.0616600Z           shows 3 Recent Donation link(s)
2024-02-18T17:27:40.0618398Z       given 1 Product Drive Donation on 2024-01-19 (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:27:40.0619291Z         filtering to 'Last 30 Days'
2024-02-18T17:27:41.5833311Z           shows 3 Recent Donation link(s)
2024-02-18T17:27:43.0995535Z           shows the correct total money raised
2024-02-18T17:27:44.6225297Z           shows the correct total donations
2024-02-18T17:27:44.6228845Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:27:44.6230179Z         filtering to 'This Month'
2024-02-18T17:27:46.0158928Z           shows 1 Recent Donation link(s)
2024-02-18T17:27:47.4015735Z           shows the correct total money raised
2024-02-18T17:27:48.8251722Z           shows the correct total donations
2024-02-18T17:27:48.8253623Z       given 1 Product Drive Donation on 2024-02-16 (unless 'All Time'), 3 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:27:48.8254970Z         filtering to 'Yesterday'
2024-02-18T17:27:50.2901446Z           shows the correct total donations
2024-02-18T17:27:51.7636409Z           shows 3 Recent Donation link(s)
2024-02-18T17:27:53.2502751Z           shows the correct total money raised
2024-02-18T17:27:53.2503916Z       Product drive behaviour with Mixed Donation types
2024-02-18T17:27:53.9595313Z         only counts product drive donations for product drive
2024-02-18T17:27:54.6667835Z         only counts product drive money raised
2024-02-18T17:27:55.4046382Z         only shows product drive donations as product drive donations
2024-02-18T17:27:55.4048826Z       given 1 Product Drive Donation on 2022-02-17 (unless 'All Time'), 1 during 2022-02-18..2024-02-05, and 1 on 2024-02-06
2024-02-18T17:27:55.4050371Z         filtering to '' (February 18, 2022 - February 5, 2024)
2024-02-18T17:27:56.8086367Z           shows the correct total money raised
2024-02-18T17:27:58.3190276Z           shows 1 Recent Donation link(s)
2024-02-18T17:27:59.7529895Z           shows the correct total donations
2024-02-18T17:27:59.7531802Z       given 1 Product Drive Donation on 2024-02-17 (unless 'All Time'), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:27:59.7533393Z         filtering to 'Today'
2024-02-18T17:28:01.1869073Z           shows the correct total money raised
2024-02-18T17:28:02.5827080Z           shows the correct total donations
2024-02-18T17:28:04.0371795Z           shows 2 Recent Donation link(s)
2024-02-18T17:28:04.0373285Z       given 1 Product Drive Donation on 2024-02-11 (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:04.0374245Z         filtering to 'Last 7 Days'
2024-02-18T17:28:07.3853280Z           shows 0 Recent Donation link(s)
2024-02-18T17:28:08.7609946Z           shows the correct total donations
2024-02-18T17:28:10.1001841Z           shows the correct total money raised
2024-02-18T17:28:10.1002703Z     Manufacturer Donations
2024-02-18T17:28:10.6987299Z       has a link to create a new donation
2024-02-18T17:28:10.6988900Z       given 1 Manufacturer donating on 2024-02-11  (unless 'All Time'), 1 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:10.6990123Z         filtering to 'Last 7 Days'
2024-02-18T17:28:12.1090327Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-18T17:28:12.1094083Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 7 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:28:12.1095486Z         filtering to 'Last Month'
2024-02-18T17:28:14.2362950Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-18T17:28:14.2365146Z       given 1 Manufacturer donating on 2022-02-17  (unless 'All Time'), 9 during 2022-02-18..2023-12-02, and 1 on 2023-12-03
2024-02-18T17:28:14.2367039Z         filtering to '' (February 18, 2022 - December 2, 2023)
2024-02-18T17:28:16.7777395Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:28:16.7779010Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 8 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:28:16.7779989Z         filtering to 'This Year'
2024-02-18T17:28:19.3585489Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-18T17:28:19.3587484Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 6 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:19.3588391Z         filtering to 'All Time'
2024-02-18T17:28:21.0976382Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-18T17:28:21.0977973Z       given 1 Manufacturer donating on 2024-01-19  (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:21.0978980Z         filtering to 'Last 30 Days'
2024-02-18T17:28:22.8319072Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-18T17:28:22.8320881Z       given 1 Manufacturer donating on 2024-02-16  (unless 'All Time'), 3 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:28:22.8321943Z         filtering to 'Yesterday'
2024-02-18T17:28:24.5338742Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-18T17:28:24.5340846Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 5 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:28:24.5342235Z         filtering to 'This Month'
2024-02-18T17:28:26.4290062Z           shows the correct total and 7 Top Manufacturer Donation link(s)
2024-02-18T17:28:26.4292217Z       given 1 Manufacturer donating on 2024-02-17  (unless 'All Time'), 6 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:26.4293101Z         filtering to 'Today'
2024-02-18T17:28:28.6770064Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-18T17:28:28.6771311Z     Distributions
2024-02-18T17:28:29.6242897Z       has a link to create a new distribution
2024-02-18T17:28:29.6244803Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:29.6246963Z         filtering to 'All Time'
2024-02-18T17:28:30.9864690Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:28:30.9866521Z       given 1 Distribution on 2024-02-17  (unless 'All Time'), 2 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:30.9867416Z         filtering to 'Today'
2024-02-18T17:28:32.4228057Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:28:32.4229991Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:28:32.4231470Z         filtering to 'This Month'
2024-02-18T17:28:35.7803029Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:28:35.7805238Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:28:35.7806731Z         filtering to 'Last Month'
2024-02-18T17:28:37.1895450Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:28:37.1896969Z       given 1 Distribution on 2024-02-16  (unless 'All Time'), 2 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:28:37.1897785Z         filtering to 'Yesterday'
2024-02-18T17:28:38.5727039Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-18T17:28:38.5728885Z       given 1 Distribution on 2024-01-19  (unless 'All Time'), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:38.5730339Z         filtering to 'Last 30 Days'
2024-02-18T17:28:40.0285166Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-18T17:28:40.0286984Z       given 1 Distribution on 2024-02-11  (unless 'All Time'), 0 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:40.0287879Z         filtering to 'Last 7 Days'
2024-02-18T17:28:43.3895676Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:28:43.3897520Z       given 1 Distribution on 2022-02-17  (unless 'All Time'), 1 during 2022-02-18..2023-11-07, and 1 on 2023-11-08
2024-02-18T17:28:43.3898924Z         filtering to '' (February 18, 2022 - November 7, 2023)
2024-02-18T17:28:44.7995545Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-18T17:28:44.7997493Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:28:44.7998790Z         filtering to 'This Year'
2024-02-18T17:28:48.1624424Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-18T17:28:48.1625572Z     Signage
2024-02-18T17:28:51.0395270Z       shows their organization name unless they have a logo set
2024-02-18T17:28:51.0396355Z     Purchases
2024-02-18T17:28:51.9305532Z       has a link to create a new purchase
2024-02-18T17:28:51.9307430Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:28:51.9308740Z         filtering to 'This Year'
2024-02-18T17:28:53.4239429Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:28:53.4241015Z       given 1 Purchase on 2022-02-17  (unless 'All Time'), 4 during 2022-02-18..2023-11-26, and 1 on 2023-11-27
2024-02-18T17:28:53.4242302Z         filtering to '' (February 18, 2022 - November 26, 2023)
2024-02-18T17:28:54.9598018Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:28:54.9599464Z       given 1 Purchase on 2024-02-16  (unless 'All Time'), 2 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:28:54.9600625Z         filtering to 'Yesterday'
2024-02-18T17:28:56.3951502Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:28:56.3953290Z       given 1 Purchase on 2024-02-11  (unless 'All Time'), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:56.3955203Z         filtering to 'Last 7 Days'
2024-02-18T17:28:57.8335983Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:28:57.8337806Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:28:57.8338814Z         filtering to 'This Month'
2024-02-18T17:28:59.2427623Z           shows correct 2 Recent Purchase link(s)
2024-02-18T17:28:59.2429361Z       given 1 Purchase on 2024-02-17  (unless 'All Time'), 0 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:28:59.2430649Z         filtering to 'Today'
2024-02-18T17:29:02.5984617Z           shows correct 0 Recent Purchase link(s)
2024-02-18T17:29:02.5986369Z       given 1 Purchase on 2024-01-19  (unless 'All Time'), 3 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:29:02.5987815Z         filtering to 'Last 30 Days'
2024-02-18T17:29:04.0839372Z           shows correct 3 Recent Purchase link(s)
2024-02-18T17:29:04.0840687Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:29:04.0841724Z         filtering to 'Last Month'
2024-02-18T17:29:05.4602439Z           shows correct 1 Recent Purchase link(s)
2024-02-18T17:29:05.4603785Z     Inventory Totals
2024-02-18T17:29:05.4604793Z       Summary
2024-02-18T17:29:06.1745386Z         displays the on-hand totals
2024-02-18T17:29:06.1746274Z         when constrained to date range
2024-02-18T17:29:07.2318297Z           does not change
2024-02-18T17:29:07.2319152Z     Donations
2024-02-18T17:29:08.1569390Z       has a link to create a new donation
2024-02-18T17:29:08.1570928Z       given 1 Donation on 2024-02-11 (only if a valid date), 2 during 2024-02-12..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:29:08.1573422Z         filtering to 'Last 7 Days'
2024-02-18T17:29:09.7417986Z           shows the correct total and 2 Recent Donation link(s)
2024-02-18T17:29:09.7419562Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-18T17:29:09.7420707Z         filtering to 'Last Month'
2024-02-18T17:29:13.0927839Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T17:29:13.0929510Z       given 1 Donation on 2024-02-17 (only if a valid date), 3 during 2024-02-18..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:29:13.0930699Z         filtering to 'Today'
2024-02-18T17:29:14.5994172Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:29:14.5995824Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-18T17:29:14.5997002Z         filtering to 'This Year'
2024-02-18T17:29:17.9407462Z           shows the correct total and 0 Recent Donation link(s)
2024-02-18T17:29:17.9408853Z       given 1 Donation on 2024-02-16 (only if a valid date), 4 during 2024-02-17..2024-02-17, and 1 on 2024-02-18
2024-02-18T17:29:17.9409819Z         filtering to 'Yesterday'
2024-02-18T17:29:19.4488104Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:29:19.4489754Z       given 1 Donation on 2024-01-19 (only if a valid date), 4 during 2024-01-20..2024-02-18, and 1 on 2024-02-19
2024-02-18T17:29:19.4490887Z         filtering to 'Last 30 Days'
2024-02-18T17:29:20.9457784Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:29:20.9459434Z       given 1 Donation on 2022-02-17 (only if a valid date), 1 during 2022-02-18..2023-09-30, and 1 on 2023-10-01
2024-02-18T17:29:20.9460746Z         filtering to '' (February 18, 2022 - September 30, 2023)
2024-02-18T17:29:22.3670341Z           shows the correct total and 1 Recent Donation link(s)
2024-02-18T17:29:22.3672749Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-18T17:29:22.3673882Z         filtering to 'This Month'
2024-02-18T17:29:23.8610395Z           shows the correct total and 3 Recent Donation link(s)
2024-02-18T17:29:23.8612204Z 
2024-02-18T17:29:23.8613868Z Profiles
2024-02-18T17:29:23.8615155Z   POST #update
2024-02-18T17:29:23.8615694Z     when updating an existing value to a blank value
2024-02-18T17:29:23.9119267Z       update partner
2024-02-18T17:29:23.9565635Z       should have blank values
2024-02-18T17:29:23.9566221Z     successful save
2024-02-18T17:29:23.9988674Z       redirects to #show
2024-02-18T17:29:24.0421787Z       update partner
2024-02-18T17:29:24.0422342Z   GET #edit
2024-02-18T17:29:24.1304355Z     returns http success
2024-02-18T17:29:24.3196451Z W, [2024-02-18T09:29:24.319376 #2379]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-18T17:29:24.3198627Z W, [2024-02-18T09:29:24.319428 #2379]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-18T17:29:24.3201103Z W, [2024-02-18T09:29:24.319455 #2379]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-18T17:29:24.3204664Z W, [2024-02-18T09:29:24.319495 #2379]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-18T17:29:24.3206095Z 
2024-02-18T17:29:24.3206572Z Finished in 3 minutes 39.1 seconds (files took 7.97 seconds to load)
2024-02-18T17:29:24.3207488Z 235 examples, 0 failures
2024-02-18T17:29:24.3207844Z 
2024-02-18T17:29:24.3208043Z Randomized with seed 2173
2024-02-18T17:29:24.3211652Z 
2024-02-18T17:29:24.6376264Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6405 LOC (59.64%) covered.
2024-02-18T17:29:25.1394149Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
