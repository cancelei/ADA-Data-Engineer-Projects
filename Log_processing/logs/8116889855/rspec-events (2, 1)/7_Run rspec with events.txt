2024-03-01T20:33:33.4940551Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-01T20:33:33.4941450Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-01T20:33:33.4969804Z shell: /usr/bin/bash -e {0}
2024-03-01T20:33:33.4970316Z env:
2024-03-01T20:33:33.4970608Z   POSTGRES_HOST: localhost
2024-03-01T20:33:33.4971000Z   DATABASE_HOST: localhost
2024-03-01T20:33:33.4971514Z   PG_USERNAME: postgres
2024-03-01T20:33:33.4971924Z   PG_PASSWORD: password
2024-03-01T20:33:33.4972326Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-01T20:33:33.4972801Z   POSTGRES_PORT: 5432
2024-03-01T20:33:33.4973122Z   PGHOST: localhost
2024-03-01T20:33:33.4973483Z   PGUSER: postgres
2024-03-01T20:33:33.4973885Z   RAILS_ENV: test
2024-03-01T20:33:33.4974481Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-01T20:33:33.4974952Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-01T20:33:33.4975433Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-01T20:33:33.4975902Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-01T20:33:33.4976758Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-01T20:33:33.4977444Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-01T20:33:33.4978121Z   EVENTS_READ: true
2024-03-01T20:33:33.4978551Z ##[endgroup]
2024-03-01T20:33:45.6808275Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/models/partner_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/models/storage_location_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/models/view/inventory_spec.rb" "spec/models/request_item_spec.rb" "spec/models/adjustment_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/models/purchase_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/account_request_spec.rb" "spec/models/barcode_item_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/user_invite_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/models/line_item_spec.rb" "spec/models/partners/family_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/models/donation_site_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/user_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/models/partners/profile_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/models/item_category_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/base_item_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/models/role_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/county_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb"
2024-03-01T20:33:54.6252413Z 
2024-03-01T20:33:54.6253392Z Randomized with seed 20549
2024-03-01T20:33:55.4824620Z 
2024-03-01T20:33:55.4825434Z AdjustmentCreateService
2024-03-01T20:33:55.4826370Z   call
2024-03-01T20:33:55.6330138Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-03-01T20:33:55.7148591Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-03-01T20:33:55.8036181Z     increases stored inventory on a positive adjustment
2024-03-01T20:33:55.8939402Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-03-01T20:33:55.9494333Z     gives an error if we attempt to adjust inventory below 0
2024-03-01T20:33:56.0351352Z     handles adjustments to multiple items
2024-03-01T20:33:56.0981864Z     does not allow inventory to be adjusted below 0
2024-03-01T20:33:56.1880750Z     decreases stored inventory on a negative adjustment
2024-03-01T20:33:56.2682678Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-03-01T20:33:56.2683694Z 
2024-03-01T20:33:56.2684008Z Reports::SummaryReportService
2024-03-01T20:33:56.2684639Z   #report
2024-03-01T20:33:56.7965058Z     should report positive values
2024-03-01T20:33:57.2470217Z     should report negative values
2024-03-01T20:33:57.4716622Z     should report zero values
2024-03-01T20:33:57.4717351Z 
2024-03-01T20:33:57.4717635Z ProductDrive
2024-03-01T20:33:57.6256427Z   calculates donation quantity
2024-03-01T20:33:58.1452073Z   calculates and returns all donated organization item quantities by category and date
2024-03-01T20:33:58.4350195Z   calculates and returns all donated organization item quantities by name and date
2024-03-01T20:33:58.6739784Z   calculates donation quantity by date
2024-03-01T20:33:58.8240816Z   calculates in-kind value
2024-03-01T20:33:58.8241478Z   donation_source_view
2024-03-01T20:33:58.9680779Z     returns formatted text
2024-03-01T20:33:58.9681529Z   versioning
2024-03-01T20:33:59.1137682Z     is expected to be versioned
2024-03-01T20:33:59.1138800Z   validations
2024-03-01T20:33:59.2553361Z     is expected not to be valid
2024-03-01T20:33:59.4673118Z     is expected not to be valid
2024-03-01T20:33:59.6226799Z     is expected not to be valid
2024-03-01T20:33:59.6227600Z   associations
2024-03-01T20:33:59.7216430Z     has_many product_drive_participants through donations
2024-03-01T20:33:59.8132835Z     has_many donations
2024-03-01T20:33:59.8136680Z   distinct_items
2024-03-01T20:34:00.1676565Z     counts the distinct items correctly by given date
2024-03-01T20:34:00.5880363Z     counts the distinct items correctly in overlapping donations
2024-03-01T20:34:00.9456886Z     counts the distinct items correctly by given category
2024-03-01T20:34:01.3066228Z     doesn't double_count the items if there are two donations for the same item
2024-03-01T20:34:01.6888394Z     counts the items correctly for 1 donation with multiple items
2024-03-01T20:34:01.6889730Z   scopes
2024-03-01T20:34:01.6890230Z     .within_date_range
2024-03-01T20:34:01.8405359Z       returns the product drive 1
2024-03-01T20:34:01.9895709Z       does not include product drive 2
2024-03-01T20:34:01.9896545Z     .by_item_category_id
2024-03-01T20:34:02.3393508Z       does not return other_name
2024-03-01T20:34:02.6884837Z       returns the product_drive with name some_name
2024-03-01T20:34:02.6885724Z     .by_name
2024-03-01T20:34:02.8443713Z       does not return other_name
2024-03-01T20:34:02.9974074Z       returns the product_drive with name some_name
2024-03-01T20:34:02.9974669Z   .search_date_range
2024-03-01T20:34:03.1458435Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-01T20:34:03.1459254Z 
2024-03-01T20:34:03.1459654Z Partners::AuthorizedFamilyMember
2024-03-01T20:34:03.1467049Z   versioning
2024-03-01T20:34:03.1576720Z     is expected to be versioned
2024-03-01T20:34:03.1577519Z   associations
2024-03-01T20:34:03.1634253Z     is expected to belong to family required: true
2024-03-01T20:34:03.1698182Z     is expected to have many child_item_requests dependent => nullify
2024-03-01T20:34:03.1699175Z   #display_name
2024-03-01T20:34:03.2130732Z     should return the family member's first and last name
2024-03-01T20:34:03.2131816Z 
2024-03-01T20:34:03.2132032Z AccountRequest
2024-03-01T20:34:03.2383652Z   #confirm!
2024-03-01T20:34:03.2515304Z   #reject!
2024-03-01T20:34:03.2516004Z   versioning
2024-03-01T20:34:03.2552326Z     is expected to be versioned
2024-03-01T20:34:03.2553038Z   #identity_token
2024-03-01T20:34:03.2643014Z     should return a JWT token that contains the id of the account_request_id
2024-03-01T20:34:03.2644308Z     when the account_request is not persisted
2024-03-01T20:34:03.2747284Z       should raise an error
2024-03-01T20:34:03.2748973Z   .get_by_identity_token
2024-03-01T20:34:03.2750099Z     when the identity_token provided does not match any AccountRequest
2024-03-01T20:34:03.2784678Z       should return nil
2024-03-01T20:34:03.2785780Z     when the identity_token corresponds to an existing AccountRequest
2024-03-01T20:34:03.2907194Z       should return the corresponding AccountRequest
2024-03-01T20:34:03.2908279Z   validations
2024-03-01T20:34:03.3079585Z     is expected to allow :email to be ‹"deena@bernier.test"›
2024-03-01T20:34:03.3311639Z     is expected to validate that the length of :request_details is at least 50
2024-03-01T20:34:03.3547113Z     is expected to validate that :request_details cannot be empty/falsy
2024-03-01T20:34:03.3798835Z     is expected to validate that :email cannot be empty/falsy
2024-03-01T20:34:03.4002091Z     is expected to validate that :email is case-sensitively unique
2024-03-01T20:34:03.4141237Z     is expected not to allow :email to be ‹"not_email"›
2024-03-01T20:34:03.4315869Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:34:03.4317021Z     when the email provided is already used by an existing user
2024-03-01T20:34:03.4562914Z       should not allow the email
2024-03-01T20:34:03.4564372Z     when the email provided is already used by an existing organization
2024-03-01T20:34:03.6390686Z       should not allow the email
2024-03-01T20:34:03.6391494Z   #processed?
2024-03-01T20:34:03.6392985Z     when the account request has no associated organization
2024-03-01T20:34:03.6490346Z       should return false
2024-03-01T20:34:03.6491184Z     when the account request has a associated organization
2024-03-01T20:34:03.8296746Z       should return true
2024-03-01T20:34:03.8297789Z   associations
2024-03-01T20:34:03.8357774Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-03-01T20:34:03.8391936Z     is expected to have one organization class_name => Organization
2024-03-01T20:34:03.8392981Z 
2024-03-01T20:34:03.8393245Z BarcodeItem
2024-03-01T20:34:03.8394551Z   Organization barcodes
2024-03-01T20:34:03.8575926Z     updates a counter in Item whenever it tracks a new barcode
2024-03-01T20:34:03.8577158Z     when searching for a barcode where there is a global and local with the same value
2024-03-01T20:34:03.8874235Z       favors the local barcode
2024-03-01T20:34:03.8874948Z     to_h >
2024-03-01T20:34:03.8989927Z       emits a hash for a line_item
2024-03-01T20:34:03.8990865Z     filters >
2024-03-01T20:34:03.9180875Z       ->item_id shows only barcodes for a specific item_id
2024-03-01T20:34:03.9181759Z     scopes >
2024-03-01T20:34:04.0991282Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-01T20:34:04.1195976Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-01T20:34:04.1304365Z       ->by_value returns the barcode with that value
2024-03-01T20:34:04.1305216Z     validations >
2024-03-01T20:34:04.1450172Z       is valid only with an organization
2024-03-01T20:34:04.1678693Z       does not enforces value uniqueness across organizations
2024-03-01T20:34:04.1830233Z       enforces value uniqueness within the organization
2024-03-01T20:34:04.1943483Z       allows multiple barcodes to point at the same item
2024-03-01T20:34:04.2059868Z       does not enforce value uniqueness compared with the global scope
2024-03-01T20:34:04.2060919Z       quantity >
2024-03-01T20:34:04.2149926Z         is an integer
2024-03-01T20:34:04.2237167Z         is not a negative number
2024-03-01T20:34:04.2330141Z         is not nil
2024-03-01T20:34:04.2330905Z       value >
2024-03-01T20:34:04.2424105Z         requires a value
2024-03-01T20:34:04.2424932Z       item >
2024-03-01T20:34:04.2518207Z         is invalid without an item associated with it
2024-03-01T20:34:04.2519040Z   versioning
2024-03-01T20:34:04.2555434Z     is expected to be versioned
2024-03-01T20:34:04.2556446Z   Barcodes of BaseItems ('Global')
2024-03-01T20:34:04.2641419Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-03-01T20:34:04.2642768Z     validations >
2024-03-01T20:34:04.2812469Z       allows multiple barcodes to point at the same base item
2024-03-01T20:34:04.2938921Z       enforces uniqueness in the global scope
2024-03-01T20:34:04.3073617Z       is valid with or without an organization
2024-03-01T20:34:04.3074540Z       quantity >
2024-03-01T20:34:04.3184474Z         is not nil
2024-03-01T20:34:04.3292285Z         is not a negative number
2024-03-01T20:34:04.3397950Z         is an integer
2024-03-01T20:34:04.3399283Z       item >
2024-03-01T20:34:04.3502805Z         is invalid without an item associated with it
2024-03-01T20:34:04.3503481Z       value >
2024-03-01T20:34:04.3600875Z         requires a value
2024-03-01T20:34:04.3601629Z     filters >
2024-03-01T20:34:04.3792489Z       ->by_value returns the barcode with that value
2024-03-01T20:34:04.3996176Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-03-01T20:34:04.4187416Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-03-01T20:34:04.4188449Z     scopes >
2024-03-01T20:34:04.4188963Z       global
2024-03-01T20:34:04.4371425Z         includes all barcodes, for both base items and regular items
2024-03-01T20:34:04.4372553Z 
2024-03-01T20:34:04.4372994Z KitCreateService
2024-03-01T20:34:04.4373977Z   #call
2024-03-01T20:34:04.6547206Z     should return an the instance
2024-03-01T20:34:04.6547876Z     when the parameters are valid
2024-03-01T20:34:04.8505147Z       should create a new Item
2024-03-01T20:34:05.0425618Z       should create a new Kit
2024-03-01T20:34:05.2356326Z       should create the new Item associated with the Kit
2024-03-01T20:34:05.2357679Z       but the ItemCreationService is unsuccesful
2024-03-01T20:34:05.4759441Z         should not create a Item
2024-03-01T20:34:05.6606598Z         should have an error that includes the error
2024-03-01T20:34:05.8451974Z         should not create the Kit
2024-03-01T20:34:05.8452849Z       but an unexpected error gets raised
2024-03-01T20:34:06.0338293Z         should not create the Kit
2024-03-01T20:34:06.2272402Z         should have an error that includes the raised error
2024-03-01T20:34:06.4786194Z         should not create a Item
2024-03-01T20:34:06.4787240Z     when the parameters provided are invalid
2024-03-01T20:34:06.4787994Z       because the organization_id does not match any Organization
2024-03-01T20:34:06.4845253Z         should have an error on organization_id saying it does not match any Organization
2024-03-01T20:34:06.4846858Z       because the kit_params is invalid for kit creation
2024-03-01T20:34:06.6637461Z         should have errors saying why the kit_params are invalid
2024-03-01T20:34:06.6638186Z 
2024-03-01T20:34:06.6638658Z SyncNDBNMembers
2024-03-01T20:34:06.6639193Z   .sync
2024-03-01T20:34:06.6640157Z     when the HTTP request does not get a response of 200
2024-03-01T20:34:06.6893068Z       should raise an error regarding the response code
2024-03-01T20:34:06.6894242Z     when the HTTP request is successful
2024-03-01T20:34:06.6895008Z       when the account name of a NDBN Member has changed
2024-03-01T20:34:06.7069785Z         should update the account name of the corresponding NDBN Member
2024-03-01T20:34:06.7070633Z       when there are no exisiting NDBN Member records
2024-03-01T20:34:06.7170462Z         should create the NDBN Member records
2024-03-01T20:34:06.7171641Z       when no new NDBN Member has been added
2024-03-01T20:34:06.7294564Z         should not add any new NDBN Members
2024-03-01T20:34:06.7295681Z 
2024-03-01T20:34:06.7296202Z HelpController
2024-03-01T20:34:06.7297128Z   While signed in as a normal user >
2024-03-01T20:34:06.7298203Z     GET #show
2024-03-01T20:34:06.7428483Z       does not display help page when the user logs out
2024-03-01T20:34:06.7614111Z       returns http success
2024-03-01T20:34:06.7614687Z 
2024-03-01T20:34:06.7615511Z EventDiffer
2024-03-01T20:34:06.9645239Z   should return a full diff
2024-03-01T20:34:06.9645734Z 
2024-03-01T20:34:06.9646337Z Reports::OtherProductsReportService
2024-03-01T20:34:06.9646875Z   #report
2024-03-01T20:34:07.6463497Z     should report normal values
2024-03-01T20:34:07.8301307Z     should report zero values
2024-03-01T20:34:07.8301895Z 
2024-03-01T20:34:07.8302224Z DonationItemizedBreakdownService
2024-03-01T20:34:07.8302853Z   #fetch
2024-03-01T20:34:08.2279821Z     return the list of items donated with distributed
2024-03-01T20:34:08.2280592Z 
2024-03-01T20:34:08.2280921Z Exports::ExportRequestService
2024-03-01T20:34:08.2281898Z   .generate_csv_data
2024-03-01T20:34:08.4971697Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-03-01T20:34:08.6961919Z     includes rows for each request with correct columns of item quantity
2024-03-01T20:34:08.6964434Z 
2024-03-01T20:34:08.6965028Z Partners::FetchPartnersToRemindNowService
2024-03-01T20:34:08.6966178Z   .fetch
2024-03-01T20:34:08.6967399Z     when there is a partner
2024-03-01T20:34:08.6968722Z       that does NOT have a organization with a global reminder & deadline
2024-03-01T20:34:08.6970093Z         and is a part of a partner group that does have them defined
2024-03-01T20:34:08.6971046Z           that is for today
2024-03-01T20:34:08.7392213Z             should include that partner
2024-03-01T20:34:08.7393137Z             but the partner is deactivated
2024-03-01T20:34:08.7761725Z               should NOT include that partner
2024-03-01T20:34:08.7762566Z           that is not for today
2024-03-01T20:34:08.8100504Z             should NOT include that partner
2024-03-01T20:34:08.8101759Z       that has an organization with a global reminder & deadline
2024-03-01T20:34:08.8103145Z         that is not for today
2024-03-01T20:34:08.8404359Z           should NOT include that partner
2024-03-01T20:34:08.8405394Z         AND a partner group that does have them defined
2024-03-01T20:34:08.8773796Z           should remind based on the partner group instead of the organization level reminder
2024-03-01T20:34:08.8775046Z           but the partner is deactivated
2024-03-01T20:34:08.9169773Z             should NOT include that partner
2024-03-01T20:34:08.9170702Z         that is for today
2024-03-01T20:34:08.9475641Z           should include that partner
2024-03-01T20:34:08.9476483Z           and has send_reminder=false
2024-03-01T20:34:08.9823034Z             should NOT include that partner
2024-03-01T20:34:08.9823946Z           but the partner is deactivated
2024-03-01T20:34:09.0169874Z             should NOT include that partner
2024-03-01T20:34:09.0170712Z 
2024-03-01T20:34:09.0170986Z InventoryItem
2024-03-01T20:34:09.0210453Z   initializes the quantity to 0 if it was not specified
2024-03-01T20:34:09.0211380Z   Filtering >
2024-03-01T20:34:09.0212112Z     ->by_partner_key
2024-03-01T20:34:09.0350836Z       shows the Base Items by partner_key
2024-03-01T20:34:09.0351688Z   versioning
2024-03-01T20:34:09.0388615Z     is expected to be versioned
2024-03-01T20:34:09.0389575Z   Validations >
2024-03-01T20:34:09.0439765Z     requires an inventory association
2024-03-01T20:34:09.0483391Z     requires an item
2024-03-01T20:34:09.0484029Z     quantity >
2024-03-01T20:34:09.0541165Z       is required
2024-03-01T20:34:09.0597139Z       is less than the max integer
2024-03-01T20:34:09.0741959Z       is gte 0
2024-03-01T20:34:09.0800834Z       is numerical
2024-03-01T20:34:09.0801709Z 
2024-03-01T20:34:09.0802052Z Reports::AdultIncontinenceReportService
2024-03-01T20:34:09.0803116Z   #report
2024-03-01T20:34:09.2712716Z     should report zero values
2024-03-01T20:34:09.2713435Z     with values
2024-03-01T20:34:09.9355927Z       should handle null distribution quantity
2024-03-01T20:34:10.6099546Z       should report normal values
2024-03-01T20:34:10.6100147Z 
2024-03-01T20:34:10.6100720Z TransfersController
2024-03-01T20:34:10.6101721Z   While not signed in
2024-03-01T20:34:10.6323351Z     redirects the user to the sign-in page for CRUD actions
2024-03-01T20:34:10.6324547Z   While signed in
2024-03-01T20:34:10.6325098Z     GET #show
2024-03-01T20:34:10.6610454Z       returns http success
2024-03-01T20:34:10.6611536Z     GET #new
2024-03-01T20:34:10.6739779Z       returns http success
2024-03-01T20:34:10.6740738Z     Looking at a different organization
2024-03-01T20:34:10.8606912Z       redirects the user to the sign-in page for CRUD actions
2024-03-01T20:34:10.8608315Z     GET #index
2024-03-01T20:34:10.8763256Z       returns http success
2024-03-01T20:34:10.8764094Z       when filtering by date
2024-03-01T20:34:10.8764815Z         when date parameters are supplied
2024-03-01T20:34:10.9201212Z           only returns the correct obejects
2024-03-01T20:34:10.9202040Z         when date parameters are not supplied
2024-03-01T20:34:10.9614006Z           returns all objects
2024-03-01T20:34:10.9614761Z     POST #create
2024-03-01T20:34:11.0103324Z       redirects to #show when successful
2024-03-01T20:34:11.0248097Z       renders to #new when failing
2024-03-01T20:34:11.0250292Z 
2024-03-01T20:34:11.0250884Z LineItem
2024-03-01T20:34:11.0252275Z   Methods >
2024-03-01T20:34:11.0253080Z     #value_per_line_item
2024-03-01T20:34:11.0253820Z       item has no value
2024-03-01T20:34:11.0394491Z         is expected to eq 0
2024-03-01T20:34:11.0394990Z       item has value and quantity
2024-03-01T20:34:11.0578710Z         is expected to eq 25
2024-03-01T20:34:11.0579818Z     item packages
2024-03-01T20:34:11.0580405Z       #has_packages
2024-03-01T20:34:11.0581018Z         item has no package size
2024-03-01T20:34:11.0717504Z           is expected to be falsy
2024-03-01T20:34:11.0718295Z         item has package size
2024-03-01T20:34:11.0898918Z           is expected to be truthy
2024-03-01T20:34:11.0899738Z       #package_count
2024-03-01T20:34:11.0900307Z         has packages
2024-03-01T20:34:11.1080439Z           is expected to eq "1"
2024-03-01T20:34:11.1081231Z         does not have packages
2024-03-01T20:34:11.1212796Z           is expected to be falsy
2024-03-01T20:34:11.1213902Z   Scopes >
2024-03-01T20:34:11.1214748Z     ->active
2024-03-01T20:34:11.1548860Z       retrieves only those with active status
2024-03-01T20:34:11.1549947Z   package_count
2024-03-01T20:34:11.1745275Z     is nil if there is no package_size
2024-03-01T20:34:11.1941058Z     is equal to the quanity divided by the package_size
2024-03-01T20:34:11.1941952Z   Validations >
2024-03-01T20:34:11.2831043Z     the quantity must be a valid integer and cannot be 0
2024-03-01T20:34:11.3057802Z     requires a quantity
2024-03-01T20:34:11.3221195Z     requires an item
2024-03-01T20:34:11.3221785Z   versioning
2024-03-01T20:34:11.3291581Z     is expected to be versioned
2024-03-01T20:34:11.3292358Z 
2024-03-01T20:34:11.3292932Z OrganizationMailer
2024-03-01T20:34:11.3294182Z   #partner_approval_request
2024-03-01T20:34:11.3758281Z     includes a link to the relevant partner
2024-03-01T20:34:11.4096149Z     renders the body with correct text with partner information
2024-03-01T20:34:11.4396999Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:34:11.4398034Z 
2024-03-01T20:34:11.4398370Z Exports::ExportPurchasesCSVService
2024-03-01T20:34:11.4399094Z   #generate_csv_data
2024-03-01T20:34:11.5573000Z     should match the expected content for the csv
2024-03-01T20:34:11.5573830Z 
2024-03-01T20:34:11.5574099Z BroadcastAnnouncement
2024-03-01T20:34:11.5697277Z   should roughly check if link is valid
2024-03-01T20:34:11.5753008Z   should validate a valid announcement
2024-03-01T20:34:11.5808599Z   is expected to validate that :message cannot be empty/falsy
2024-03-01T20:34:11.5843215Z   is expected to belong to organization optional: true
2024-03-01T20:34:11.5898087Z   should validate a good link
2024-03-01T20:34:11.5938908Z   is expected to belong to user required: true
2024-03-01T20:34:11.5939710Z   filter_announcements
2024-03-01T20:34:11.6079436Z     shouldn't include expired announcements
2024-03-01T20:34:11.6226180Z     sorts announcements from most recently created to last
2024-03-01T20:34:11.6348782Z     should include only announcements from the passed organization
2024-03-01T20:34:11.6349700Z   versioning
2024-03-01T20:34:11.6383311Z     is expected to be versioned
2024-03-01T20:34:11.6384032Z   expired?
2024-03-01T20:34:11.6441221Z     should be true if the announcement is expired
2024-03-01T20:34:11.6494968Z     should be false if the announcement has not expired
2024-03-01T20:34:11.6495707Z 
2024-03-01T20:34:11.6496020Z DistributionPdf
2024-03-01T20:34:11.7197061Z   #request_data
2024-03-01T20:34:11.7767450Z   #non_request_data
2024-03-01T20:34:11.7767942Z 
2024-03-01T20:34:11.7768265Z Kit
2024-03-01T20:34:11.9899039Z   deactivate and reactivate
2024-03-01T20:34:11.9899544Z   Value >
2024-03-01T20:34:12.0073665Z     converts dollars to cents
2024-03-01T20:34:12.0250043Z     converts cents to dollars
2024-03-01T20:34:12.0250962Z     .value_per_itemizable
2024-03-01T20:34:12.0653549Z       calculates values from associated items
2024-03-01T20:34:12.0654451Z   versioning
2024-03-01T20:34:12.0696157Z     is expected to be versioned
2024-03-01T20:34:12.0696930Z   Validations >
2024-03-01T20:34:12.0870835Z     requires a name
2024-03-01T20:34:12.1041688Z     must belong to an organization
2024-03-01T20:34:12.1223195Z     can't have negative value
2024-03-01T20:34:12.3443473Z     requires a unique name
2024-03-01T20:34:12.3749228Z     is valid as built
2024-03-01T20:34:12.4038044Z     requires at least one item
2024-03-01T20:34:12.4039325Z   Filtering >
2024-03-01T20:34:12.9781504Z     ->alphabetized retrieves items in alphabetical order
2024-03-01T20:34:12.9834858Z     can filter
2024-03-01T20:34:12.9835665Z     ->by_partner_key
2024-03-01T20:34:13.2952848Z       shows the kits for a particular item
2024-03-01T20:34:13.2965371Z   #can_deactivate?
2024-03-01T20:34:13.2966794Z     with inventory items
2024-03-01T20:34:13.6517731Z       should return false
2024-03-01T20:34:13.6518336Z     without inventory items
2024-03-01T20:34:13.8452104Z       should return true
2024-03-01T20:34:13.8453243Z 
2024-03-01T20:34:13.8455500Z View::Inventory
2024-03-01T20:34:13.8456132Z   .total_inventory
2024-03-01T20:34:13.9325510Z     should return the total quantity
2024-03-01T20:34:13.9326268Z   #quantity_for
2024-03-01T20:34:13.9326627Z     with item id
2024-03-01T20:34:13.9327580Z       with storage location
2024-03-01T20:34:14.0235755Z         should return the quantity at that location
2024-03-01T20:34:14.0236645Z       with no storage location
2024-03-01T20:34:14.1121444Z         should return quantities across all storage locations
2024-03-01T20:34:14.1123077Z     with storage location but no item id
2024-03-01T20:34:14.1986139Z       should return all items at that location
2024-03-01T20:34:14.1986994Z   #all_items
2024-03-01T20:34:14.2910885Z     should return all items across storage locations
2024-03-01T20:34:14.2911603Z   .items_for_location
2024-03-01T20:34:14.4238199Z     should return the right values
2024-03-01T20:34:14.4239384Z     with include_omitted_items
2024-03-01T20:34:14.5133299Z       should add items not in the storage location
2024-03-01T20:34:14.5134613Z   #storage_locations_for_item
2024-03-01T20:34:14.6085811Z     should return all relevant IDs
2024-03-01T20:34:14.6086937Z   #total_value_in_dollars
2024-03-01T20:34:14.6982325Z     should return total value across the given location
2024-03-01T20:34:14.6983250Z   #items_for_location
2024-03-01T20:34:14.7831826Z     should return the right values
2024-03-01T20:34:14.7832693Z     with include_omitted_items
2024-03-01T20:34:14.8683258Z       should add items not in the storage location
2024-03-01T20:34:14.8684826Z   #storage_location_name
2024-03-01T20:34:14.9559745Z     should return the right name
2024-03-01T20:34:14.9560610Z 
2024-03-01T20:34:14.9560911Z Partners::Family
2024-03-01T20:34:14.9562485Z   #total_children_count
2024-03-01T20:34:14.9618488Z     should return the family's total children count
2024-03-01T20:34:14.9619589Z   #guardian_display_name
2024-03-01T20:34:14.9667356Z     should return the guardian's first and last name
2024-03-01T20:34:14.9668384Z   validations
2024-03-01T20:34:14.9746142Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-03-01T20:34:14.9819254Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-03-01T20:34:14.9892552Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-03-01T20:34:14.9893612Z   #create_authorized
2024-03-01T20:34:15.0166021Z     should include authorized family members
2024-03-01T20:34:15.0167404Z   #search_non_archived
2024-03-01T20:34:15.1045638Z     should return non-archived families if zero is passed in
2024-03-01T20:34:15.2016807Z     should return all families if one is passed in
2024-03-01T20:34:15.2017444Z   associations
2024-03-01T20:34:15.2079558Z     is expected to have many children dependent => destroy
2024-03-01T20:34:15.2122382Z     is expected to belong to partner required: true
2024-03-01T20:34:15.2155185Z     is expected to have many authorized_family_members dependent => destroy
2024-03-01T20:34:15.2156144Z   versioning
2024-03-01T20:34:15.2192225Z     is expected to be versioned
2024-03-01T20:34:15.2192781Z 
2024-03-01T20:34:15.2193019Z ReminderDeadlineJob
2024-03-01T20:34:15.2193862Z   #perform
2024-03-01T20:34:15.2432459Z     should queue up reminder deadline emails for all partners that should be reminded
2024-03-01T20:34:15.2433659Z 
2024-03-01T20:34:15.2433941Z Partners::Profile
2024-03-01T20:34:15.2472641Z   must allow deleting served_areas
2024-03-01T20:34:15.2473392Z   client share behaviour
2024-03-01T20:34:15.2474073Z     no served areas
2024-03-01T20:34:15.2526425Z       has 0 client share
2024-03-01T20:34:15.2527249Z     multiple
2024-03-01T20:34:15.2797070Z       is valid if client share sum is 100
2024-03-01T20:34:15.3022085Z       sums the client shares
2024-03-01T20:34:15.3023109Z   request settings validation for profile
2024-03-01T20:34:15.3023967Z     no settings are set to true
2024-03-01T20:34:15.3118758Z       should not be valid
2024-03-01T20:34:15.3119603Z     at least one request type is set to true
2024-03-01T20:34:15.3255777Z       should be valid when enable_child_based_requests is true
2024-03-01T20:34:15.3382221Z       should be valid when enable_individual_requests is true
2024-03-01T20:34:15.3511227Z       should be valid when enable_quantity_based_requests is true
2024-03-01T20:34:15.3512837Z   social media info validation for profile
2024-03-01T20:34:15.3513961Z     no social media presence and the checkbox is checked
2024-03-01T20:34:15.3614881Z       should be valid
2024-03-01T20:34:15.3616654Z     has social media presence and the checkbox is unchecked
2024-03-01T20:34:15.3730836Z       with just facebook it should be valid
2024-03-01T20:34:15.3839704Z       with just instagram it should be valid
2024-03-01T20:34:15.3948331Z       with just a website it should be valid
2024-03-01T20:34:15.4060201Z       with just twitter it should be valid
2024-03-01T20:34:15.4160925Z       with every social media option it should be valid
2024-03-01T20:34:15.4162264Z     no social media presence and the checkbox isn't checked
2024-03-01T20:34:15.4235530Z       should not be valid
2024-03-01T20:34:15.4350831Z       should be valid if media_information is not needed
2024-03-01T20:34:15.4351786Z   versioning
2024-03-01T20:34:15.4391854Z     is expected to be versioned
2024-03-01T20:34:15.4392813Z   associations
2024-03-01T20:34:15.4436191Z     is expected to have many served_areas
2024-03-01T20:34:15.4486785Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-01T20:34:15.4533227Z     is expected to have a has_many_attached called documents
2024-03-01T20:34:15.4579464Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-01T20:34:15.4580287Z 
2024-03-01T20:34:15.4580490Z County
2024-03-01T20:34:15.4620762Z   is expected to have many served_areas
2024-03-01T20:34:15.4621519Z   versioning
2024-03-01T20:34:15.4660358Z     is expected to be versioned
2024-03-01T20:34:15.4661158Z 
2024-03-01T20:34:15.4661390Z User
2024-03-01T20:34:15.4728942Z   has a valid factory
2024-03-01T20:34:15.4729662Z   Scopes >
2024-03-01T20:34:15.4730643Z     ->alphabetized
2024-03-01T20:34:15.5163259Z       retrieves users in the correct order
2024-03-01T20:34:15.5164216Z   Scopes >
2024-03-01T20:34:15.5165269Z     ->alphabetized
2024-03-01T20:34:15.5403657Z       retrieves users in the correct order
2024-03-01T20:34:15.5404487Z   Methods >
2024-03-01T20:34:15.5891788Z     #kind
2024-03-01T20:34:15.5945072Z     discarded?
2024-03-01T20:34:15.6029722Z     #reinvitable?
2024-03-01T20:34:15.6112634Z     #invitation_status
2024-03-01T20:34:15.6113237Z   omniauth
2024-03-01T20:34:15.6261003Z     retrieves the user from an omniauth context
2024-03-01T20:34:15.6261848Z   versioning
2024-03-01T20:34:15.6300919Z     is expected to be versioned
2024-03-01T20:34:15.6301850Z   Validations >
2024-03-01T20:34:15.6492914Z     requires an email that is formatted correctly
2024-03-01T20:34:15.6578483Z     requires a name
2024-03-01T20:34:15.6579169Z 
2024-03-01T20:34:15.6579376Z Role
2024-03-01T20:34:15.6616785Z   is expected to accepts_nested_attributes_for :users
2024-03-01T20:34:15.6617794Z   versioning
2024-03-01T20:34:15.6651502Z     is expected to be versioned
2024-03-01T20:34:15.6652275Z   Validations
2024-03-01T20:34:15.6702662Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-01T20:34:15.6704015Z   Associations
2024-03-01T20:34:15.6740857Z     is expected to belong to resource optional: true
2024-03-01T20:34:15.6801651Z     is expected to have and belong to many users
2024-03-01T20:34:15.6802300Z 
2024-03-01T20:34:15.6802590Z RequestDestroyService
2024-03-01T20:34:15.6803578Z   #call
2024-03-01T20:34:15.6954114Z     should return an instance of itself
2024-03-01T20:34:15.6956440Z     when the request's partner is deactivated
2024-03-01T20:34:15.7234138Z       should have errors
2024-03-01T20:34:15.7234874Z     when there are no validation errors
2024-03-01T20:34:15.7360432Z       should send a email notification to the partner
2024-03-01T20:34:15.7495456Z       should update the discarded_at column on the request
2024-03-01T20:34:15.7625641Z       should update the status column on the request
2024-03-01T20:34:15.7626732Z     when the request is already discarded
2024-03-01T20:34:15.7728020Z       should not be successful and have errors
2024-03-01T20:34:15.7728861Z     when the request_id matches no request
2024-03-01T20:34:15.7767534Z       should not be successful and have errors indicating request id is invalid
2024-03-01T20:34:15.7768710Z 
2024-03-01T20:34:15.7769278Z Partner
2024-03-01T20:34:15.7771201Z   #csv_export_attributes
2024-03-01T20:34:15.8036745Z     includes contact person information from parnerbase
2024-03-01T20:34:15.8037497Z   import_csv
2024-03-01T20:34:16.1143928Z     imports partners from a csv file with BOM encodings
2024-03-01T20:34:16.3573717Z     imports partners from a csv file and prevents multiple imports
2024-03-01T20:34:16.3574994Z   #impact_metrics
2024-03-01T20:34:16.3575486Z     when partner has related information
2024-03-01T20:34:16.4294620Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-03-01T20:34:16.4296035Z     when partner don't have any related information
2024-03-01T20:34:16.4567016Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-03-01T20:34:16.4568493Z   changing emails
2024-03-01T20:34:16.4840679Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-03-01T20:34:16.5098141Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-03-01T20:34:16.5415433Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-03-01T20:34:16.5667085Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-03-01T20:34:16.5926385Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-03-01T20:34:16.6306580Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-03-01T20:34:16.6570115Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-03-01T20:34:16.6571460Z   ActiveStorage validation
2024-03-01T20:34:16.6689220Z     validates that attachments are pdf or docs
2024-03-01T20:34:16.6690204Z   associations
2024-03-01T20:34:16.6730145Z     is expected to have many distributions
2024-03-01T20:34:16.6765034Z     is expected to have many requests
2024-03-01T20:34:16.6818794Z     is expected to belong to partner_group optional: true
2024-03-01T20:34:16.6855428Z     is expected to have many families dependent => destroy
2024-03-01T20:34:16.6892115Z     is expected to have many users dependent => destroy
2024-03-01T20:34:16.6949486Z     is expected to belong to organization required: true
2024-03-01T20:34:16.6987280Z     is expected to have many item_categories through partner_group
2024-03-01T20:34:16.7023634Z     is expected to have many requestable_items through item_categories source => items
2024-03-01T20:34:16.7056670Z     is expected to have many requests
2024-03-01T20:34:16.7092338Z     is expected to have many children through families
2024-03-01T20:34:16.7093342Z     primary_user
2024-03-01T20:34:16.7386943Z       should return the first user ever created for a partner
2024-03-01T20:34:16.7387949Z   #quantity_year_to_date
2024-03-01T20:34:16.9172716Z     includes all item quantities from distributions issued during the current year
2024-03-01T20:34:17.1075188Z     does not include quantities from distributions issued during the previous year
2024-03-01T20:34:17.1075995Z   Validations >
2024-03-01T20:34:17.1320751Z     does not require a unique name between organizations
2024-03-01T20:34:17.1415749Z     validates the quota is a number but it is not required
2024-03-01T20:34:17.1695295Z     requires a unique name within an organization
2024-03-01T20:34:17.1961722Z     still requires a unique email between organizations
2024-03-01T20:34:17.2272881Z     requires a unique email that is formatted correctly
2024-03-01T20:34:17.2328319Z     must belong to an organization
2024-03-01T20:34:17.2329084Z   versioning
2024-03-01T20:34:17.2365528Z     is expected to be versioned
2024-03-01T20:34:17.2366191Z   #deletable?
2024-03-01T20:34:17.2366776Z     when status is uninvited
2024-03-01T20:34:17.2368093Z       when it has a request
2024-03-01T20:34:17.2515556Z         should return false
2024-03-01T20:34:17.2516531Z       when it has a profile but no users
2024-03-01T20:34:17.2664634Z         should return true
2024-03-01T20:34:17.2665493Z       when it has a distribution
2024-03-01T20:34:17.2811230Z         should return false
2024-03-01T20:34:17.2811936Z       when it has a profile and users
2024-03-01T20:34:17.3155391Z         should return false
2024-03-01T20:34:17.3156417Z       when it has no other associations
2024-03-01T20:34:17.3316489Z         should return true
2024-03-01T20:34:17.3317631Z     when status is not uninvited
2024-03-01T20:34:17.3477265Z       should return false
2024-03-01T20:34:17.3478057Z   callbacks
2024-03-01T20:34:17.3820502Z     properly downcases email
2024-03-01T20:34:17.3821530Z   Filters
2024-03-01T20:34:17.3822066Z     by_status
2024-03-01T20:34:17.4317513Z       yields partners with the provided status
2024-03-01T20:34:17.4758689Z       yields deactivated partner when deactivated status provided
2024-03-01T20:34:17.4759784Z   #approvable?
2024-03-01T20:34:17.4761404Z     when status is not invited or awaiting_review
2024-03-01T20:34:17.4853342Z       should return false
2024-03-01T20:34:17.4854002Z     when status is awaiting_review
2024-03-01T20:34:17.4895919Z       should return true
2024-03-01T20:34:17.4896676Z     when status is invited
2024-03-01T20:34:17.4937396Z       should return true
2024-03-01T20:34:17.4938205Z   #deactivated?
2024-03-01T20:34:17.4939314Z     when the status is 'deactivated'
2024-03-01T20:34:17.4977947Z       should return true
2024-03-01T20:34:17.4978894Z     when the status is not 'deactivated'
2024-03-01T20:34:17.5018999Z       should return false
2024-03-01T20:34:17.5019795Z   #profile
2024-03-01T20:34:17.5258616Z     should return the associated Partners::Profile record
2024-03-01T20:34:17.5259317Z 
2024-03-01T20:34:17.5259621Z UserInviteService
2024-03-01T20:34:17.5260122Z   with a new user
2024-03-01T20:34:17.7932674Z     should create the user with roles
2024-03-01T20:34:17.7933546Z   with existing user
2024-03-01T20:34:17.9799920Z     should add roles to existing user
2024-03-01T20:34:17.9892580Z     should raise an error when reinviting an existing user with the same role
2024-03-01T20:34:17.9893640Z     with force: true
2024-03-01T20:34:18.0096584Z       should reinvite the user
2024-03-01T20:34:18.0097559Z 
2024-03-01T20:34:18.0097887Z AddRoleService
2024-03-01T20:34:18.0098658Z   #call
2024-03-01T20:34:18.0099233Z     when the role does not yet exist
2024-03-01T20:34:18.2253723Z       works with a partner
2024-03-01T20:34:18.4809749Z       should add the user role when asked to add admin
2024-03-01T20:34:18.6843389Z       works with super admin
2024-03-01T20:34:18.8752061Z       should add the role
2024-03-01T20:34:18.8752625Z     when the role already exists
2024-03-01T20:34:19.0703627Z       should raise an error for super admin
2024-03-01T20:34:19.2626819Z       should raise an error
2024-03-01T20:34:19.2627425Z 
2024-03-01T20:34:19.2627776Z RequestMailer
2024-03-01T20:34:19.2629028Z   #request_cancel_partner_notification
2024-03-01T20:34:19.2799695Z     renders the body with correct text with partner information
2024-03-01T20:34:19.2998678Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:34:19.2999881Z 
2024-03-01T20:34:19.3000181Z Exports::ExportDistributionsCSVService
2024-03-01T20:34:19.3000679Z   #generate_csv_data
2024-03-01T20:34:19.5184325Z     should match the expected content for the csv
2024-03-01T20:34:19.5185252Z     when a new item is added
2024-03-01T20:34:19.6958742Z       should add it to the end of the row
2024-03-01T20:34:19.8929329Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-03-01T20:34:19.8930689Z     when there are no distributions but the report is requested
2024-03-01T20:34:20.0673944Z       returns a csv with only headers and no rows
2024-03-01T20:34:20.0674732Z 
2024-03-01T20:34:20.0675674Z Reports::PeriodSupplyReportService
2024-03-01T20:34:20.0676668Z   #report
2024-03-01T20:34:20.2595239Z     should report zero values
2024-03-01T20:34:20.2595867Z     with values
2024-03-01T20:34:20.9334785Z       should report normal values
2024-03-01T20:34:20.9335390Z 
2024-03-01T20:34:20.9335655Z Partners::ServedArea
2024-03-01T20:34:20.9590771Z   must only allow valid client share values
2024-03-01T20:34:20.9639585Z   is expected to belong to partner_profile required: true
2024-03-01T20:34:20.9775066Z   must only allow integer client shares
2024-03-01T20:34:20.9815013Z   is expected to belong to county required: true
2024-03-01T20:34:20.9815758Z   versioning
2024-03-01T20:34:20.9849393Z     is expected to be versioned
2024-03-01T20:34:20.9850198Z 
2024-03-01T20:34:20.9850496Z OrganizationUpdateService
2024-03-01T20:34:20.9851815Z   #update_partner_flags
2024-03-01T20:34:20.9852658Z     when request flags have changed
2024-03-01T20:34:21.2051660Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-01T20:34:21.4814940Z       should update partners when disabling quantity-based request flags
2024-03-01T20:34:21.7091053Z       should update partners when disabling child and individual request flags
2024-03-01T20:34:21.7092336Z     when request flags haven't changed
2024-03-01T20:34:21.9243903Z       should not update partners
2024-03-01T20:34:21.9244770Z   #update
2024-03-01T20:34:21.9245753Z     when object is valid
2024-03-01T20:34:22.1022357Z       should update and return true
2024-03-01T20:34:22.1023442Z     when organization has partners
2024-03-01T20:34:22.1024413Z       when all of a single partner's request flags will be disabled
2024-03-01T20:34:22.3355198Z         should add an error message to the organization
2024-03-01T20:34:22.5721290Z         should NOT change request flags in organization or its partners
2024-03-01T20:34:22.7966660Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-01T20:34:22.7967950Z         should allow the disabling of request flags in organization and its partners
2024-03-01T20:34:22.7968769Z     when object is invalid
2024-03-01T20:34:22.9741988Z       should not update and return false
2024-03-01T20:34:22.9742777Z 
2024-03-01T20:34:22.9743164Z PartnerProfileUpdateService
2024-03-01T20:34:22.9744184Z   #call
2024-03-01T20:34:22.9745288Z     when served area client shares pre-exist
2024-03-01T20:34:22.9746047Z       and the new values are incorrect
2024-03-01T20:34:23.0071828Z         maintains the old values and returns failure
2024-03-01T20:34:23.0072768Z       and the new values are correct
2024-03-01T20:34:23.0073506Z         and there are no other errors
2024-03-01T20:34:23.0395828Z           replaces the old values and returns success
2024-03-01T20:34:23.0399464Z         and there are errors on the profile
2024-03-01T20:34:23.0725217Z           maintains the old values and returns failure
2024-03-01T20:34:23.0726810Z     when there are no pre-existing served areas
2024-03-01T20:34:23.0727927Z       and the new values are correct
2024-03-01T20:34:23.0968130Z         stores the new values and returns success
2024-03-01T20:34:23.0969094Z         and there are other errors in the profile
2024-03-01T20:34:23.1199116Z           does not store the new values and it returns a failure
2024-03-01T20:34:23.1200332Z       and the new values are incorrect
2024-03-01T20:34:23.1415553Z 0
2024-03-01T20:34:23.1425758Z         does not store the new values and returns a failure
2024-03-01T20:34:23.1426514Z 
2024-03-01T20:34:23.1426976Z DonationSite
2024-03-01T20:34:23.1428325Z   Validations >
2024-03-01T20:34:23.1532910Z     must belong to an organization
2024-03-01T20:34:23.1584321Z     is invalid without a name
2024-03-01T20:34:23.1625251Z     is invalid without an address
2024-03-01T20:34:23.1626140Z   import_csv
2024-03-01T20:34:23.3754834Z     imports storage locations from a csv file
2024-03-01T20:34:23.3755603Z   versioning
2024-03-01T20:34:23.3803461Z     is expected to be versioned
2024-03-01T20:34:23.3804589Z   geocode
2024-03-01T20:34:23.3889615Z     adds coordinates to the database
2024-03-01T20:34:23.3890446Z 
2024-03-01T20:34:23.3890708Z ItemsOutTotalQuery
2024-03-01T20:34:23.3892127Z   items_out_total_query
2024-03-01T20:34:23.5199983Z     returns a sum total of all out-flows
2024-03-01T20:34:23.5200603Z 
2024-03-01T20:34:23.5200865Z KitAllocation
2024-03-01T20:34:23.5206181Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-01T20:34:23.5208074Z   versioning
2024-03-01T20:34:23.5293294Z     is expected to be versioned
2024-03-01T20:34:23.5294106Z 
2024-03-01T20:34:23.5294372Z DonationCreateService
2024-03-01T20:34:23.5295046Z   #call
2024-03-01T20:34:23.5508975Z     should create the donation
2024-03-01T20:34:23.5512298Z 
2024-03-01T20:34:23.5512592Z Donation
2024-03-01T20:34:23.5514402Z   behaves like itemizable
2024-03-01T20:34:23.5515794Z     .line_items
2024-03-01T20:34:23.5516769Z       combine!
2024-03-01T20:34:23.5926790Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:34:23.6429530Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:34:23.6430379Z       quantities_by_name
2024-03-01T20:34:23.6780286Z         returns a hash of items with id, name, and quantity
2024-03-01T20:34:23.7136478Z         leaves out zero-quantitied items if requested
2024-03-01T20:34:23.7137186Z       sorted
2024-03-01T20:34:23.7655184Z         displays the items, sorted by name
2024-03-01T20:34:23.7655949Z       total
2024-03-01T20:34:23.7993460Z         has an item total
2024-03-01T20:34:23.7994040Z     .to_a
2024-03-01T20:34:23.7994760Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:34:23.8355647Z         calls line_item_values
2024-03-01T20:34:23.8356343Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:34:23.8689460Z         raises an error
2024-03-01T20:34:23.8690010Z   Methods >
2024-03-01T20:34:23.8690837Z     source_view
2024-03-01T20:34:23.8691676Z       from a drive
2024-03-01T20:34:23.8692442Z         unknown participant
2024-03-01T20:34:23.8797355Z           returns drive display name
2024-03-01T20:34:23.8798031Z         participant known
2024-03-01T20:34:23.8798570Z           contact name present
2024-03-01T20:34:23.8925583Z             returns participant display name
2024-03-01T20:34:23.8926212Z           no contact name
2024-03-01T20:34:23.9044179Z             returns drive display name
2024-03-01T20:34:23.9044818Z       details
2024-03-01T20:34:23.9045844Z         product drive
2024-03-01T20:34:23.9143664Z           returns product_drive name
2024-03-01T20:34:23.9144399Z         manufacturer
2024-03-01T20:34:23.9295776Z           returns manufacturer name
2024-03-01T20:34:23.9296410Z         misc
2024-03-01T20:34:23.9376916Z           returns a truncated comment
2024-03-01T20:34:23.9377509Z         donation site
2024-03-01T20:34:23.9475813Z           returns donation_site name
2024-03-01T20:34:23.9476435Z       not from a drive
2024-03-01T20:34:23.9581907Z         returns source
2024-03-01T20:34:23.9582417Z     remove
2024-03-01T20:34:24.0244612Z       removes the item from the donation
2024-03-01T20:34:24.0951164Z       fails gracefully if the item doesn't exist
2024-03-01T20:34:24.1580527Z       works with either an id or an object
2024-03-01T20:34:24.1581215Z     money_raised
2024-03-01T20:34:24.2200231Z       tracks the money raised in a donation
2024-03-01T20:34:24.2200959Z   Associations >
2024-03-01T20:34:24.2201383Z     items >
2024-03-01T20:34:24.2458761Z       has_many
2024-03-01T20:34:24.2459283Z   SOURCES
2024-03-01T20:34:24.2504660Z     the hash values are immutable
2024-03-01T20:34:24.2545682Z     the hash is immutable
2024-03-01T20:34:24.2585310Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-01T20:34:24.2586155Z   versioning
2024-03-01T20:34:24.2625326Z     is expected to be versioned
2024-03-01T20:34:24.2625974Z   Scopes >
2024-03-01T20:34:24.2626820Z     by_source >
2024-03-01T20:34:24.2627472Z       when source is a symbol
2024-03-01T20:34:24.2628254Z         when source is valid
2024-03-01T20:34:24.2828657Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-01T20:34:24.2829406Z         when source is invalid
2024-03-01T20:34:24.3125223Z           does not throw errors, returns no results
2024-03-01T20:34:24.3126152Z       when source is not a symbol
2024-03-01T20:34:24.3127019Z         when source is invalid
2024-03-01T20:34:24.3452387Z           does not throw errors, returns no results
2024-03-01T20:34:24.3453284Z         when source comes from the SOURCES hash
2024-03-01T20:34:24.3754035Z           returns all donations with the provided source
2024-03-01T20:34:24.3754840Z     during >
2024-03-01T20:34:24.4018952Z       returns all donations created between two dates
2024-03-01T20:34:24.4019791Z   Callbacks >
2024-03-01T20:34:24.4191061Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:34:24.4398904Z     automatically combines duplicate line_item records when they're created
2024-03-01T20:34:24.4399637Z   Validations >
2024-03-01T20:34:24.4461934Z     must belong to an organization
2024-03-01T20:34:24.4603544Z     requires a product drive participant if the source is 'Product Drive'
2024-03-01T20:34:24.4729477Z     requires a donation_site if the source is 'Donation Site'
2024-03-01T20:34:24.4861592Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-01T20:34:24.4931524Z     requires a source from the list of available sources
2024-03-01T20:34:24.4978270Z     requires an inventory (storage location)
2024-03-01T20:34:24.5140267Z     is invalid when the line items are invalid
2024-03-01T20:34:24.5195780Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:34:24.5196465Z 
2024-03-01T20:34:24.5196656Z InventoryAggregate
2024-03-01T20:34:24.5199880Z   multiple events
2024-03-01T20:34:24.8173382Z     should handle timing correctly
2024-03-01T20:34:25.1491405Z     should handle intervening audits
2024-03-01T20:34:25.4633627Z     should ignore unusable snapshots
2024-03-01T20:34:25.7254855Z     should handle changing storage location
2024-03-01T20:34:26.1434490Z     should process multiple events
2024-03-01T20:34:26.1435240Z   validation
2024-03-01T20:34:26.1435757Z     current event is incorrect
2024-03-01T20:34:26.4388373Z       should raise a bare error
2024-03-01T20:34:26.4389057Z     subsequent event is incorrect
2024-03-01T20:34:26.7527041Z       should add the event to the message
2024-03-01T20:34:26.7527817Z   individual events
2024-03-01T20:34:27.0662123Z     should process an audit event
2024-03-01T20:34:27.3964773Z     should process a donation event
2024-03-01T20:34:27.6954893Z     should process a purchase event
2024-03-01T20:34:27.9897341Z     should process a donation event after a new storage location is created
2024-03-01T20:34:28.4293973Z     should process a kit deallocation event
2024-03-01T20:34:28.7053028Z     should process a snapshot event
2024-03-01T20:34:29.0221427Z     should process a kit allocation event
2024-03-01T20:34:29.3625779Z     should process an adjustment event
2024-03-01T20:34:29.7024755Z     should process a transfer destroy event
2024-03-01T20:34:30.0958947Z     should process a distribution destroyed event
2024-03-01T20:34:30.6137166Z     should process a donation destroyed event
2024-03-01T20:34:30.9170102Z     should process a transfer event
2024-03-01T20:34:31.2420052Z     should process a purchase destroyed event
2024-03-01T20:34:31.6144098Z     should process a distribution event
2024-03-01T20:34:31.6145204Z 
2024-03-01T20:34:31.6145480Z StorageLocation
2024-03-01T20:34:31.6147506Z   Callbacks >
2024-03-01T20:34:31.6148151Z     before_destroy
2024-03-01T20:34:31.6766391Z       deletes storage locations with no inventory items on it
2024-03-01T20:34:31.7156538Z       does not delete storage locations with inventory items on it
2024-03-01T20:34:31.7157382Z   Filtering >
2024-03-01T20:34:31.7251723Z     ->active_locations yields only storage locations that haven't been discarded
2024-03-01T20:34:31.7966048Z     ->containing yields only inventories that have that item
2024-03-01T20:34:31.7966671Z   Validations >
2024-03-01T20:34:31.8033308Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:34:31.8090632Z     is expected to validate that :organization cannot be empty/falsy
2024-03-01T20:34:31.8148510Z     is expected to validate that :address cannot be empty/falsy
2024-03-01T20:34:31.8149135Z   Methods >
2024-03-01T20:34:31.8150641Z     import_csv
2024-03-01T20:34:31.8272103Z       imports storage locations from a csv file
2024-03-01T20:34:31.8272903Z     import_inventory
2024-03-01T20:34:32.2024008Z       imports storage locations from a csv file
2024-03-01T20:34:32.2024677Z     geocode
2024-03-01T20:34:32.2140461Z       adds coordinates to the database
2024-03-01T20:34:32.2141100Z     decrease_inventory
2024-03-01T20:34:32.3565685Z       decreases inventory quantities from an itemizable object
2024-03-01T20:34:32.3567337Z       when there is insufficient inventory available
2024-03-01T20:34:32.3723662Z         does not change inventory quantities if there is an error
2024-03-01T20:34:32.3857192Z         gives informative errors
2024-03-01T20:34:32.3857916Z     increase_inventory
2024-03-01T20:34:32.3859055Z       when increasing with an inactive item
2024-03-01T20:34:32.5205817Z         re-activates the item as part of the creation process
2024-03-01T20:34:32.5206710Z       With existing inventory
2024-03-01T20:34:32.6353869Z         increases inventory quantities from an itemizable object
2024-03-01T20:34:32.6354795Z       when providing a new item that does not yet exist
2024-03-01T20:34:32.7516569Z         creates those new inventory items in the storage location
2024-03-01T20:34:32.7520147Z     csv_export_attributes
2024-03-01T20:34:32.8198038Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-03-01T20:34:32.8199681Z     StorageLocation.items_inventoried
2024-03-01T20:34:32.9050319Z       returns a collection of items that are stored within inventories
2024-03-01T20:34:32.9051216Z     inventory_total_value_in_dollars
2024-03-01T20:34:32.9519128Z       returns total value of all items in this storage location
2024-03-01T20:34:32.9929053Z       returns a value including cents if the total isn't an even dollar amount
2024-03-01T20:34:33.0059466Z       returns 0 when there are no items in this storage location
2024-03-01T20:34:33.0060082Z     item_total
2024-03-01T20:34:33.0476633Z       retrieves the total for a single item
2024-03-01T20:34:33.0477310Z     size
2024-03-01T20:34:33.0970050Z       returns total quantity of all items in this storage location
2024-03-01T20:34:33.0970655Z   versioning
2024-03-01T20:34:33.1009777Z     is expected to be versioned
2024-03-01T20:34:33.1011593Z 
2024-03-01T20:34:33.1011850Z Distribution
2024-03-01T20:34:33.1013342Z   versioning
2024-03-01T20:34:33.1048471Z     is expected to be versioned
2024-03-01T20:34:33.1049088Z   Validations >
2024-03-01T20:34:33.1100324Z     requires a storage location
2024-03-01T20:34:33.1149303Z     requires a partner
2024-03-01T20:34:33.1206393Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:34:33.1239410Z     ensures that any included items are found in the associated storage location
2024-03-01T20:34:33.1395756Z     ensures the associated line_items are invalid with a zero quantity
2024-03-01T20:34:33.1547906Z     ensures the associated line_items are invalid with a nil quantity
2024-03-01T20:34:33.1949140Z     ensures the associated line_items are valid
2024-03-01T20:34:33.2003497Z     must belong to an organization
2024-03-01T20:34:33.2004141Z     when delivery method is shipped
2024-03-01T20:34:33.2004962Z       shipping cost is negative
2024-03-01T20:34:33.2063409Z         will not allow to save distribution
2024-03-01T20:34:33.2064121Z       shipping cost is none negative
2024-03-01T20:34:33.2328887Z         allows to save distribution
2024-03-01T20:34:33.2329612Z     when delivery method is other then shipped
2024-03-01T20:34:33.2590885Z       allows to save distribution
2024-03-01T20:34:33.2591550Z   behaves like itemizable
2024-03-01T20:34:33.2592146Z     .line_items
2024-03-01T20:34:33.2593321Z       combine!
2024-03-01T20:34:33.3328077Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:34:33.3974614Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:34:33.3975375Z       quantities_by_name
2024-03-01T20:34:33.4989402Z         returns a hash of items with id, name, and quantity
2024-03-01T20:34:33.5896679Z         leaves out zero-quantitied items if requested
2024-03-01T20:34:33.5897170Z       sorted
2024-03-01T20:34:33.7114226Z         displays the items, sorted by name
2024-03-01T20:34:33.7114811Z       total
2024-03-01T20:34:33.8017333Z         has an item total
2024-03-01T20:34:33.8018276Z     .to_a
2024-03-01T20:34:33.8018892Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:34:33.8386546Z         raises an error
2024-03-01T20:34:33.8750526Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:34:33.8751250Z         calls line_item_values
2024-03-01T20:34:33.8751734Z   Callbacks >
2024-03-01T20:34:33.9248353Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:34:33.9249330Z     #before_save
2024-03-01T20:34:33.9249741Z       #reset_shipping_cost
2024-03-01T20:34:33.9250279Z         when delivery_method is other then shipped
2024-03-01T20:34:33.9513523Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-01T20:34:33.9514644Z   Scopes >
2024-03-01T20:34:33.9515759Z     by_item_id >
2024-03-01T20:34:34.0898551Z       only returns distributions with given item id
2024-03-01T20:34:34.0899159Z     by_location >
2024-03-01T20:34:34.1406525Z       only returns distributions with given location id
2024-03-01T20:34:34.1407502Z     by_partner >
2024-03-01T20:34:34.1894893Z       only returns distributions with given partner id
2024-03-01T20:34:34.1895549Z     during >
2024-03-01T20:34:34.2608925Z       returns all distributions created between two dates
2024-03-01T20:34:34.2609688Z     this_week >
2024-03-01T20:34:34.2610362Z       When it's Tuesday (mid-week)
2024-03-01T20:34:34.3684411Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-01T20:34:34.3685665Z       When it's Sunday (end of the week)
2024-03-01T20:34:34.4306605Z         doesn't include distributions past Sunday
2024-03-01T20:34:34.4307199Z   Methods >
2024-03-01T20:34:34.4308405Z     #combine_duplicates
2024-03-01T20:34:34.4752334Z       condenses duplicate line_items if the item_ids match
2024-03-01T20:34:34.4753100Z     #future?
2024-03-01T20:34:34.4753515Z       when issued_at has not passed
2024-03-01T20:34:34.5026649Z         returns true
2024-03-01T20:34:34.5027185Z       when issued_at has passed
2024-03-01T20:34:34.5283929Z         returns false
2024-03-01T20:34:34.5284453Z     #distributed_at
2024-03-01T20:34:34.5540311Z       shows the hour and minutes if it has been provided
2024-03-01T20:34:34.6014584Z       displays explicit issued_at date
2024-03-01T20:34:34.6015240Z     #copy_from_request
2024-03-01T20:34:34.6240260Z       copy over relevant request information into the distrubution
2024-03-01T20:34:34.6241046Z     #copy_line_items
2024-03-01T20:34:34.6641217Z       replicates line_items from a donation into a distribution
2024-03-01T20:34:34.6642031Z   CSV export >
2024-03-01T20:34:34.6642447Z     for_csv_export >
2024-03-01T20:34:35.0105528Z       filters only to the given issue time range
2024-03-01T20:34:35.3890962Z       filters only to the given organization
2024-03-01T20:34:35.7400605Z       filters only to the given filter
2024-03-01T20:34:35.7401255Z     csv_export_attributes
2024-03-01T20:34:36.1463172Z       returns the set of attributes which define a row in case of distribution export
2024-03-01T20:34:36.1464504Z 
2024-03-01T20:34:36.1464683Z ItemsInQuery
2024-03-01T20:34:36.1465122Z   items_in
2024-03-01T20:34:36.5685126Z     does not count transfers going in the negative direction
2024-03-01T20:34:36.8578242Z     returns a collection with the fields name, item_id, quantity
2024-03-01T20:34:37.2092301Z     does not count negative adjustments towards in-flow
2024-03-01T20:34:37.5425138Z     includes donations, purchases, adjustments, transfers among sources
2024-03-01T20:34:37.5426375Z 
2024-03-01T20:34:37.5426610Z Purchase
2024-03-01T20:34:37.5427744Z   versioning
2024-03-01T20:34:37.5466947Z     is expected to be versioned
2024-03-01T20:34:37.5467436Z   Validations >
2024-03-01T20:34:37.5549291Z     must belong to an organization
2024-03-01T20:34:37.5632370Z     is valid if all categories add up to total
2024-03-01T20:34:37.5811659Z     is invalid when the line items are invalid
2024-03-01T20:34:37.5889626Z     requires an inventory (storage location)
2024-03-01T20:34:37.5970796Z     is valid if categories have no values
2024-03-01T20:34:37.6057831Z     is not valid if period supplies is non-zero but no other category is
2024-03-01T20:34:37.6143611Z     is not valid if categories do not add up
2024-03-01T20:34:37.6316229Z     is not valid if any category is non-zero but does not add up to the total
2024-03-01T20:34:37.6398569Z     ensures that the issued at is no earlier than 2000
2024-03-01T20:34:37.6399261Z   behaves like itemizable
2024-03-01T20:34:37.6399991Z     .line_items
2024-03-01T20:34:37.6400968Z       sorted
2024-03-01T20:34:37.6979924Z         displays the items, sorted by name
2024-03-01T20:34:37.6980667Z       total
2024-03-01T20:34:37.7435293Z         has an item total
2024-03-01T20:34:37.7435910Z       combine!
2024-03-01T20:34:37.7979410Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:34:37.8438615Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:34:37.8439396Z       quantities_by_name
2024-03-01T20:34:37.8867566Z         leaves out zero-quantitied items if requested
2024-03-01T20:34:37.9260567Z         returns a hash of items with id, name, and quantity
2024-03-01T20:34:37.9261335Z     .to_a
2024-03-01T20:34:37.9261994Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:34:37.9634572Z         raises an error
2024-03-01T20:34:37.9635200Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:34:37.9999827Z         calls line_item_values
2024-03-01T20:34:38.0000444Z   Associations >
2024-03-01T20:34:38.0001117Z     items >
2024-03-01T20:34:38.0196214Z       has_many
2024-03-01T20:34:38.0196680Z   Methods >
2024-03-01T20:34:38.0197590Z     storage_view
2024-03-01T20:34:38.0878168Z       returns name of storage location
2024-03-01T20:34:38.0878734Z     remove
2024-03-01T20:34:38.1650002Z       removes the item from the purchase
2024-03-01T20:34:38.2403262Z       fails gracefully if the item doesn't exist
2024-03-01T20:34:38.2404108Z   Scopes >
2024-03-01T20:34:38.2404621Z     during >
2024-03-01T20:34:38.2654716Z       returns all purchases created between two dates
2024-03-01T20:34:38.2655447Z   Callbacks >
2024-03-01T20:34:38.2860693Z     automatically combines duplicate line_item records when they're created
2024-03-01T20:34:38.3122377Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-01T20:34:38.3123348Z 
2024-03-01T20:34:38.3123467Z RequestItem
2024-03-01T20:34:38.3124006Z   Methods >
2024-03-01T20:34:38.3124648Z     #from_json
2024-03-01T20:34:38.6028303Z       has the correct amount on hand for location
2024-03-01T20:34:38.8533256Z       has the correct name
2024-03-01T20:34:39.1022913Z       has the correct quantity
2024-03-01T20:34:39.4077426Z       has the correct amount on hand
2024-03-01T20:34:39.4078171Z 
2024-03-01T20:34:39.4078531Z DonationDestroyService
2024-03-01T20:34:39.4079972Z   #call
2024-03-01T20:34:39.4081782Z     when the donation destroy fails
2024-03-01T20:34:39.4160730Z       to not be a success
2024-03-01T20:34:39.4162205Z     when storage_location fails to decrease the inventory of the donation
2024-03-01T20:34:39.4237860Z       to not be a success
2024-03-01T20:34:39.4238530Z     when the donation_id matches no Donation owned by the organization
2024-03-01T20:34:39.4291187Z       to not be a success
2024-03-01T20:34:39.4291887Z     when the organization_id matches no Organization
2024-03-01T20:34:39.4337074Z       to not be a success
2024-03-01T20:34:39.4337725Z     when the donation succesfully gets destroyed
2024-03-01T20:34:39.4608521Z       to be a success
2024-03-01T20:34:39.4609501Z 
2024-03-01T20:34:39.4609703Z PartnerMailer
2024-03-01T20:34:39.4611226Z   #recertification_request
2024-03-01T20:34:39.4875833Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:34:39.5110744Z     renders the body with text that indicates to recertify and link to where
2024-03-01T20:34:39.5111674Z   #application_approved
2024-03-01T20:34:39.5370382Z     should be sent to the partner main email with the correct subject line
2024-03-01T20:34:39.5635027Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-01T20:34:39.5635845Z 
2024-03-01T20:34:39.5636035Z ApplicationController
2024-03-01T20:34:39.5637119Z   current_organization
2024-03-01T20:34:39.5640008Z     As an org user
2024-03-01T20:34:39.9318309Z       should return the first org role
2024-03-01T20:34:39.9319023Z       with a changed current role
2024-03-01T20:34:40.2933617Z         should return the first org role
2024-03-01T20:34:40.2934349Z     As a partner user
2024-03-01T20:34:40.3190929Z       should return nil
2024-03-01T20:34:40.3191570Z   current_partner
2024-03-01T20:34:40.3192841Z     As a partner user
2024-03-01T20:34:40.4030014Z       should return the first partner role
2024-03-01T20:34:40.4030827Z       with a changed current role
2024-03-01T20:34:40.4673276Z         should return the first partner role
2024-03-01T20:34:40.4674042Z     As an org user
2024-03-01T20:34:40.4821791Z       should return nil
2024-03-01T20:34:40.4822215Z   dashboard_path_from_current_role
2024-03-01T20:34:40.4823119Z     As a user without super admin status
2024-03-01T20:34:40.5027005Z       links to the general dashboard
2024-03-01T20:34:40.5027458Z     As a super admin
2024-03-01T20:34:40.5235770Z       links to the admin dashboard
2024-03-01T20:34:40.5236380Z 
2024-03-01T20:34:40.5236655Z ItemCategory
2024-03-01T20:34:40.5237901Z   versioning
2024-03-01T20:34:40.5276446Z     is expected to be versioned
2024-03-01T20:34:40.5276931Z   validations
2024-03-01T20:34:40.5479190Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-03-01T20:34:40.5568635Z     is expected to validate that :name cannot be empty/falsy
2024-03-01T20:34:40.5646883Z     is expected to validate that the length of :description is at most 250
2024-03-01T20:34:40.5725123Z     is expected to validate that :organization cannot be empty/falsy
2024-03-01T20:34:40.5726017Z   assocations
2024-03-01T20:34:40.5764229Z     is expected to have many items
2024-03-01T20:34:40.5812387Z     is expected to belong to organization required: true
2024-03-01T20:34:40.5871946Z     is expected to have and belong to many partner_groups
2024-03-01T20:34:40.5872533Z 
2024-03-01T20:34:40.5872844Z DispersedPastDatesGenerator
2024-03-01T20:34:40.5873929Z   constants
2024-03-01T20:34:40.5909128Z     has 4 day ranges for generation of past dates
2024-03-01T20:34:40.5909804Z   #next
2024-03-01T20:34:40.5960031Z     returns equally dispersed dates between all time ranges
2024-03-01T20:34:40.5960650Z 
2024-03-01T20:34:40.5960823Z CustomDeviseMailer
2024-03-01T20:34:40.5961933Z   #invitation_instructions
2024-03-01T20:34:40.5963087Z     when user is invited
2024-03-01T20:34:40.6164979Z       invites to user
2024-03-01T20:34:40.6454199Z       has invite expiration message
2024-03-01T20:34:40.6455396Z     when partner is invited
2024-03-01T20:34:40.6906545Z       invites to primary user
2024-03-01T20:34:40.6907788Z     when other partner users invited
2024-03-01T20:34:40.7317813Z       invites to partner user
2024-03-01T20:34:40.7318784Z 
2024-03-01T20:34:40.7319077Z Question
2024-03-01T20:34:40.7319871Z   versioning
2024-03-01T20:34:40.7395440Z     is expected to be versioned
2024-03-01T20:34:40.7396130Z   scope for_banks
2024-03-01T20:34:40.7752627Z     should filter out questions that aren't meant for banks
2024-03-01T20:34:40.7753414Z   scope for_partners
2024-03-01T20:34:40.7993295Z     should filter out questions that aren't meant for partners
2024-03-01T20:34:40.7994097Z   punctuate
2024-03-01T20:34:40.8039705Z     should punctuate each string in a given array
2024-03-01T20:34:40.8040392Z   validations
2024-03-01T20:34:40.8106209Z     is expected to validate that :title cannot be empty/falsy
2024-03-01T20:34:40.8163600Z     is expected to validate that :answer cannot be empty/falsy
2024-03-01T20:34:40.8263183Z     question for_banks and for_partners attributes can't both be false
2024-03-01T20:34:40.8264470Z   remove_redundant_error
2024-03-01T20:34:40.8304366Z     should return an array with only one error message related to the checkboxes.
2024-03-01T20:34:40.8307968Z 
2024-03-01T20:34:40.8308316Z AccountRequestMailer
2024-03-01T20:34:40.8309534Z   #approval_request
2024-03-01T20:34:40.8628650Z     should include details of the account request
2024-03-01T20:34:40.8760184Z     should have the correct subject
2024-03-01T20:34:40.8891373Z     should be sent to the info@humanessentials.app email address
2024-03-01T20:34:40.9042361Z     should include the admin link to create the new organization from the account request
2024-03-01T20:34:40.9175709Z     should include the admin link to reject the organization
2024-03-01T20:34:40.9176746Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:34:40.9224482Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:34:40.9225258Z   #confirmation
2024-03-01T20:34:40.9348727Z     should be from no-reply@humanessentials.app
2024-03-01T20:34:40.9465750Z     should be sent to the specified account_request email
2024-03-01T20:34:40.9583197Z     should have the correct subject
2024-03-01T20:34:40.9583787Z     Text format
2024-03-01T20:34:40.9706703Z       should include the staging/demo account information
2024-03-01T20:34:40.9826915Z       should include the instruction video link
2024-03-01T20:34:40.9947008Z       should include the button to confirm the request
2024-03-01T20:34:40.9947722Z     HTML format
2024-03-01T20:34:41.0066694Z       should include the button to confirm the request
2024-03-01T20:34:41.0189073Z       should include the staging/demo account information
2024-03-01T20:34:41.0308658Z       should include the instruction video link
2024-03-01T20:34:41.0309601Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:34:41.0358043Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:34:41.0358822Z   #rejection
2024-03-01T20:34:41.0477900Z     should be sent to the correct email address
2024-03-01T20:34:41.0599956Z     should include the rejection reason
2024-03-01T20:34:41.0713803Z     should have the correct subject
2024-03-01T20:34:41.0714696Z     when the account_request_id provided does not match any AccountRequest
2024-03-01T20:34:41.0762442Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-01T20:34:41.0763137Z 
2024-03-01T20:34:41.0763436Z Exports::ExportReportCSVService
2024-03-01T20:34:41.0764202Z   .generate_csv_data
2024-03-01T20:34:41.0800799Z     creates CSV data including headers
2024-03-01T20:34:41.0836436Z     creates a CSV string
2024-03-01T20:34:41.0837350Z 
2024-03-01T20:34:41.0837513Z BaseItem
2024-03-01T20:34:41.0839111Z   Filtering >
2024-03-01T20:34:41.0840096Z     ->by_partner_key
2024-03-01T20:34:41.0892870Z       shows the Base Items by partner_key
2024-03-01T20:34:41.0893663Z     ->without_kit
2024-03-01T20:34:41.0947471Z       should not include the Kit BaseItem
2024-03-01T20:34:41.0948128Z   versioning
2024-03-01T20:34:41.0984939Z     is expected to be versioned
2024-03-01T20:34:41.0985515Z   Validations >
2024-03-01T20:34:41.1035018Z     is invalid without a partner key
2024-03-01T20:34:41.1078460Z     is invalid without a name
2024-03-01T20:34:41.1149103Z     is invalid without a unique name
2024-03-01T20:34:41.1218549Z     is invalid without a uniqueness key
2024-03-01T20:34:41.1219192Z   Associations >
2024-03-01T20:34:41.1347679Z     keeps count of its associated items
2024-03-01T20:34:41.1348222Z 
2024-03-01T20:34:41.1348630Z DistributionDestroyService
2024-03-01T20:34:41.1349338Z   #call
2024-03-01T20:34:41.1350633Z     when the distribution_id does match a Distribution
2024-03-01T20:34:41.1351720Z       and the increase inventory operations fails
2024-03-01T20:34:41.4360321Z         should not be successful and have the error message
2024-03-01T20:34:41.7768051Z         should not delete the Distribution
2024-03-01T20:34:41.7773295Z       and the destroy! operation fails
2024-03-01T20:34:41.9966973Z         should not be successful and have the error message
2024-03-01T20:34:42.2035651Z         should not delete the Distribution
2024-03-01T20:34:42.2036409Z       and the operations succeed
2024-03-01T20:34:42.4679736Z         should be successful
2024-03-01T20:34:42.6812879Z         should destroy the Distribution
2024-03-01T20:34:42.8948767Z         should increase the inventory of the storage location
2024-03-01T20:34:42.8949813Z     when the distribution_id matches no Distribution
2024-03-01T20:34:42.8991614Z       to not be a success
2024-03-01T20:34:42.8992463Z 
2024-03-01T20:34:42.8992771Z DistributionUpdateService
2024-03-01T20:34:42.8993870Z   call
2024-03-01T20:34:43.0080379Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-01T20:34:43.0081242Z   resend_notification?
2024-03-01T20:34:43.1028707Z     changes the issue_date, resulting in resend_notification? = true
2024-03-01T20:34:43.1969611Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-01T20:34:43.3289112Z     changes any distribution content, resulting in resend_notification? = true
2024-03-01T20:34:43.3290511Z 
2024-03-01T20:34:43.3290732Z Adjustment
2024-03-01T20:34:43.3293566Z   Validations >
2024-03-01T20:34:43.3634869Z     allows you to add inventory that doesn't yet exist in the storage location
2024-03-01T20:34:43.3775767Z     must belong to an organization
2024-03-01T20:34:43.4342599Z     allows you to remove all the inventory that exists in the storage location
2024-03-01T20:34:43.4343606Z   behaves like itemizable
2024-03-01T20:34:43.4344118Z     .line_items
2024-03-01T20:34:43.4344558Z       combine!
2024-03-01T20:34:43.4877327Z         incrementally combines line_items on donations that have already been created
2024-03-01T20:34:43.5315049Z         combines multiple line_items with the same item_id into a single record
2024-03-01T20:34:43.5315683Z       quantities_by_name
2024-03-01T20:34:43.5723813Z         leaves out zero-quantitied items if requested
2024-03-01T20:34:43.6113098Z         returns a hash of items with id, name, and quantity
2024-03-01T20:34:43.6113631Z       sorted
2024-03-01T20:34:43.6682731Z         displays the items, sorted by name
2024-03-01T20:34:43.6683407Z       total
2024-03-01T20:34:43.7075224Z         has an item total
2024-03-01T20:34:43.7075756Z     .to_a
2024-03-01T20:34:43.7076842Z       with Flipper flag :deprecate_to_a disabled
2024-03-01T20:34:43.7469417Z         calls line_item_values
2024-03-01T20:34:43.7470131Z       with Flipper flag :deprecate_to_a enabled
2024-03-01T20:34:43.7863084Z         raises an error
2024-03-01T20:34:43.7863735Z   Scopes >
2024-03-01T20:34:43.8048239Z     `at_location` can filter out adjustments to a specific location
2024-03-01T20:34:43.8211461Z     `by_user` can filter out adjustments to a specific user
2024-03-01T20:34:43.8212214Z   versioning
2024-03-01T20:34:43.8249687Z     is expected to be versioned
2024-03-01T20:34:43.8250282Z   Methods >
2024-03-01T20:34:44.0242271Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-03-01T20:34:44.0243475Z     split_difference
2024-03-01T20:34:44.1020530Z       gracefully handles adjustments with only positive
2024-03-01T20:34:44.1798296Z       returns two adjustment objects
2024-03-01T20:34:44.2587272Z       gracefully handles adjustments with only negative
2024-03-01T20:34:44.2588044Z   nested line item attributes
2024-03-01T20:34:44.3127533Z     accepts them
2024-03-01T20:34:44.3128267Z 
2024-03-01T20:34:44.3128552Z Partners::ChildItemRequest
2024-03-01T20:34:44.3130908Z   #ordered_item_diaperid
2024-03-01T20:34:44.3311304Z     should return the item_id on the item_request
2024-03-01T20:34:44.3312069Z   #quantity
2024-03-01T20:34:44.3405367Z     should return the quantity divided by the number of children
2024-03-01T20:34:44.3406360Z   associations
2024-03-01T20:34:44.3488718Z     is expected to belong to authorized_family_member optional: true
2024-03-01T20:34:44.3566532Z     is expected to belong to item_request required: true
2024-03-01T20:34:44.3635943Z     is expected to belong to child required: true
2024-03-01T20:34:44.3636725Z   versioning
2024-03-01T20:34:44.3697463Z     is expected to be versioned
2024-03-01T20:34:44.3698029Z 
2024-03-01T20:34:44.3698299Z Reports::ChildrenServedReportService
2024-03-01T20:34:44.3699287Z   #report
2024-03-01T20:34:44.8984641Z     should work with no distribution_quantity
2024-03-01T20:34:45.4630658Z     should report normal values
2024-03-01T20:34:45.6366959Z     should report zero values
2024-03-01T20:34:45.6367713Z 
2024-03-01T20:34:45.6369523Z DistributionMailer
2024-03-01T20:34:45.6369993Z   #partner_mailer
2024-03-01T20:34:45.6939771Z     renders the body with distributions text
2024-03-01T20:34:45.7477330Z     renders the body with organization's email text
2024-03-01T20:34:45.7477889Z     with deliver_method: :pick_up
2024-03-01T20:34:45.7995778Z       renders the body with 'picked up' specified
2024-03-01T20:34:45.7996714Z       when parners profile pick_up_email is present
2024-03-01T20:34:45.8495121Z         sends email to the primary contact and partner`s pickup person
2024-03-01T20:34:45.8495985Z         when pickup person happens to be the same as the primary contact
2024-03-01T20:34:45.9019034Z           does not send email twice
2024-03-01T20:34:45.9019723Z     with distribution changes
2024-03-01T20:34:45.9581007Z       renders the body with changes that happened in the distribution
2024-03-01T20:34:45.9581857Z     with deliver_method: :delivery
2024-03-01T20:34:46.0098225Z       renders the body with 'delivered' specified
2024-03-01T20:34:46.0703644Z       sends copy of email only to the partner
2024-03-01T20:34:46.0704200Z   #reminder_email
2024-03-01T20:34:46.0705044Z     with deliver_method: :delivery
2024-03-01T20:34:46.1267912Z       renders the body with 'delivery' specified
2024-03-01T20:34:46.1268616Z     with deliver_method: :pick_up
2024-03-01T20:34:46.1810549Z       renders the body with 'pick up' specified
2024-03-01T20:34:46.1811275Z     Text format
2024-03-01T20:34:46.2309012Z       renders the body with organization's email text
2024-03-01T20:34:46.2309613Z     HTML format
2024-03-01T20:34:46.2807723Z       renders the body with organization's email text
2024-03-01T20:34:46.2808320Z 
2024-03-01T20:34:46.2808560Z DistributionByCountyReportService
2024-03-01T20:34:46.2809117Z   get_breakdown
2024-03-01T20:34:46.4125884Z     divides the item numbers and values according to the partner profile
2024-03-01T20:34:46.4963103Z     will have 100% unspecified shows if no served_areas
2024-03-01T20:34:46.6812961Z     handles multiple partners with overlapping service areas properly
2024-03-01T20:34:46.6813693Z 
2024-03-01T20:34:46.6813901Z DistributionContentChangeService
2024-03-01T20:34:46.6814535Z   #changes
2024-03-01T20:34:46.6815414Z     when there are line items removed and updated
2024-03-01T20:34:46.6854343Z       returns true
2024-03-01T20:34:46.6854802Z   #any_change?
2024-03-01T20:34:46.6857115Z     when there are line items updated
2024-03-01T20:34:46.6895255Z       returns true
2024-03-01T20:34:46.6895809Z     when there are no changes in the line items
2024-03-01T20:34:46.6932971Z       returns true
2024-03-01T20:34:46.6933587Z     when there are line items removed
2024-03-01T20:34:46.6968215Z       returns true
2024-03-01T20:34:46.6968742Z     when there are line items removed and updated
2024-03-01T20:34:46.7003827Z       returns true
2024-03-01T20:34:47.1752110Z 
2024-03-01T20:34:47.1753438Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-01T20:34:47.1754250Z 
2024-03-01T20:34:47.1755471Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-01T20:34:47.1756857Z      # Not yet implemented
2024-03-01T20:34:47.1757402Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-01T20:34:47.1757862Z 
2024-03-01T20:34:47.1758107Z Finished in 52.55 seconds (files took 8.71 seconds to load)
2024-03-01T20:34:47.1758993Z 645 examples, 0 failures, 1 pending
2024-03-01T20:34:47.1759246Z 
2024-03-01T20:34:47.1759367Z Randomized with seed 20549
2024-03-01T20:34:47.1759575Z 
2024-03-01T20:34:47.7006153Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3736 / 6453 LOC (57.9%) covered.
2024-03-01T20:34:48.1431375Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10722 LOC (0.35%) covered.
