2024-02-19T16:08:27.6612828Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-19T16:08:27.6613699Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-19T16:08:27.6642053Z shell: /usr/bin/bash -e {0}
2024-02-19T16:08:27.6642542Z env:
2024-02-19T16:08:27.6642882Z   POSTGRES_HOST: localhost
2024-02-19T16:08:27.6643243Z   DATABASE_HOST: localhost
2024-02-19T16:08:27.6643683Z   PG_USERNAME: postgres
2024-02-19T16:08:27.6644050Z   PG_PASSWORD: password
2024-02-19T16:08:27.6644449Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-19T16:08:27.6644960Z   POSTGRES_PORT: 5432
2024-02-19T16:08:27.6645277Z   PGHOST: localhost
2024-02-19T16:08:27.6645633Z   PGUSER: postgres
2024-02-19T16:08:27.6646033Z   RAILS_ENV: test
2024-02-19T16:08:27.6646410Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-19T16:08:27.6646846Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-19T16:08:27.6647274Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-19T16:08:27.6647731Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-19T16:08:27.6648351Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-19T16:08:27.6649045Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-19T16:08:27.6649691Z   EVENTS_READ: true
2024-02-19T16:08:27.6650433Z ##[endgroup]
2024-02-19T16:08:33.3151610Z W, [2024-02-19T16:08:33.314855 #2314]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-19T16:08:33.3153085Z W, [2024-02-19T16:08:33.314918 #2314]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:08:33.3154561Z W, [2024-02-19T16:08:33.314941 #2314]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:08:33.3157714Z W, [2024-02-19T16:08:33.314974 #2314]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-19T16:08:36.0925846Z W, [2024-02-19T16:08:36.092250 #2314]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-19T16:08:36.0927468Z W, [2024-02-19T16:08:36.092302 #2314]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:08:36.0929013Z W, [2024-02-19T16:08:36.092323 #2314]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:08:36.0931470Z W, [2024-02-19T16:08:36.092378 #2314]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-19T16:08:36.1095494Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb"
2024-02-19T16:08:45.0147487Z 
2024-02-19T16:08:45.0148451Z Randomized with seed 10443
2024-02-19T16:08:45.8833806Z 
2024-02-19T16:08:45.8834674Z PartnerMailer
2024-02-19T16:08:45.8835559Z   #application_approved
2024-02-19T16:08:45.9319524Z     should be sent to the partner main email with the correct subject line
2024-02-19T16:08:45.9632867Z     renders the body with text that indicates the result and a link to their dashboard
2024-02-19T16:08:45.9634022Z   #recertification_request
2024-02-19T16:08:45.9869113Z     renders the body with text that indicates to recertify and link to where
2024-02-19T16:08:46.0111062Z     should be sent to the partner main email with the correct subject line
2024-02-19T16:08:46.0111893Z 
2024-02-19T16:08:46.0112391Z Audit
2024-02-19T16:08:46.0113151Z   behaves like itemizable
2024-02-19T16:08:46.0114189Z     .to_a
2024-02-19T16:08:46.0115423Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:08:46.0954604Z         calls line_item_values
2024-02-19T16:08:46.0955202Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:08:46.1684484Z         raises an error
2024-02-19T16:08:46.1685342Z     .line_items
2024-02-19T16:08:46.1686981Z       sorted
2024-02-19T16:08:46.2871310Z         displays the items, sorted by name
2024-02-19T16:08:46.2872510Z       combine!
2024-02-19T16:08:46.3443818Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:08:46.3829776Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:08:46.3830565Z       total
2024-02-19T16:08:46.4663479Z         has an item total
2024-02-19T16:08:46.4664568Z       quantities_by_name
2024-02-19T16:08:46.5488678Z         returns a hash of items with id, name, and quantity
2024-02-19T16:08:46.6347519Z         leaves out zero-quantitied items if requested
2024-02-19T16:08:46.6348297Z   versioning
2024-02-19T16:08:46.6389773Z     is expected to be versioned
2024-02-19T16:08:46.6390729Z   Validations >
2024-02-19T16:08:46.6960860Z     can have line items that has quantity as a positive integer
2024-02-19T16:08:46.7504111Z     can not have line items that has quantity as negative integer
2024-02-19T16:08:46.7797392Z     must belong to an organization
2024-02-19T16:08:46.8359275Z     cannot have duplicate line items
2024-02-19T16:08:46.8959690Z     can have line items that has quantity as zero
2024-02-19T16:08:46.9536163Z     can not have line items that has quantity as a string that cannot be reduced to an integer
2024-02-19T16:08:46.9636747Z     must belong to an organization admin of its organization
2024-02-19T16:08:46.9637755Z   Scopes >
2024-02-19T16:08:47.0073835Z     `at_location` can filter out audits to a specific location
2024-02-19T16:08:47.0074706Z   Methods >
2024-02-19T16:08:47.2476407Z     `self.storage_locations_audited_for` returns only storage_locations that are used for one org
2024-02-19T16:08:47.5888614Z     `self.finalized_since?` returns true iff some finalized audit occurred after itemizable created_at that shares item for location(s)
2024-02-19T16:08:47.5889833Z 
2024-02-19T16:08:47.5890058Z DistributionCreateService
2024-02-19T16:08:47.5890626Z   call
2024-02-19T16:08:47.6770943Z     returns a successful object with Scheduled distribution
2024-02-19T16:08:47.7492388Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-19T16:08:47.7493583Z     partner is deactivated
2024-02-19T16:08:47.8261221Z       does not send an email
2024-02-19T16:08:47.8262000Z     partner has send reminders setting set to true
2024-02-19T16:08:48.0141325Z       Sends a PartnerMailer
2024-02-19T16:08:48.0141918Z     when provided with a request ID
2024-02-19T16:08:48.1013154Z       changes the status of the request
2024-02-19T16:08:48.1014536Z       and the request already has a distribution associated with it
2024-02-19T16:08:48.1783793Z         should not be successful
2024-02-19T16:08:48.1785043Z     partner has send reminders setting set to false
2024-02-19T16:08:48.2525974Z       does not send a PartnerMailer
2024-02-19T16:08:48.2526795Z     when it fails to save
2024-02-19T16:08:48.3019367Z       preserves the error and is unsuccessful
2024-02-19T16:08:48.3020774Z     when there's multiple line items and one has insufficient inventory
2024-02-19T16:08:48.3654878Z       preserves the Insufficiency error and is unsuccessful
2024-02-19T16:08:48.3655739Z     when the line item quantity is not positive
2024-02-19T16:08:48.4164742Z       preserves the RecordInvalid error and is unsuccessful
2024-02-19T16:08:48.4166278Z     when there's not sufficient inventory
2024-02-19T16:08:48.4754965Z       preserves the Insufficiency error and is unsuccessful
2024-02-19T16:08:48.4755728Z 
2024-02-19T16:08:48.4755950Z DistributionUpdateService
2024-02-19T16:08:48.4756714Z   call
2024-02-19T16:08:48.5985208Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-02-19T16:08:48.5986267Z   resend_notification?
2024-02-19T16:08:48.7048934Z     changes any distribution content, resulting in resend_notification? = true
2024-02-19T16:08:48.8011721Z     changes the issue_date, resulting in resend_notification? = true
2024-02-19T16:08:48.8960820Z     changes the delivery_method, resulting in resend_notification? = true
2024-02-19T16:08:48.8961630Z 
2024-02-19T16:08:48.8961833Z PartnerGroup
2024-02-19T16:08:48.8962700Z   Validations >
2024-02-19T16:08:48.9066911Z     must belong to an organization
2024-02-19T16:08:48.9321935Z     does not require a unique name between organizations
2024-02-19T16:08:48.9415388Z     requires a unique name within an organization
2024-02-19T16:08:48.9416467Z     deadline_day && reminder_day must be defined if send_reminders=true
2024-02-19T16:08:48.9466364Z       should not be valid
2024-02-19T16:08:48.9467243Z   versioning
2024-02-19T16:08:48.9503410Z     is expected to be versioned
2024-02-19T16:08:48.9504290Z   DB constraints
2024-02-19T16:08:48.9504940Z     send_reminders IS NOT NULL
2024-02-19T16:08:48.9576885Z       raises error if unmet
2024-02-19T16:08:48.9577688Z     reminder_day <= 28
2024-02-19T16:08:48.9647867Z       raises error if unmet
2024-02-19T16:08:48.9648633Z     deadline_day <= 28
2024-02-19T16:08:48.9716667Z       raises error if unmet
2024-02-19T16:08:48.9717331Z   associations
2024-02-19T16:08:48.9780680Z     is expected to have and belong to many item_categories
2024-02-19T16:08:48.9817320Z     is expected to have many partners
2024-02-19T16:08:48.9868368Z     is expected to belong to organization required: true
2024-02-19T16:08:48.9869042Z 
2024-02-19T16:08:48.9869353Z Partners::FamilyRequestCreateService
2024-02-19T16:08:48.9870299Z   #call
2024-02-19T16:08:48.9871502Z     when the arguments are incorrect
2024-02-19T16:08:48.9872770Z       because no family_requests_attributes were defined
2024-02-19T16:08:49.0128939Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-19T16:08:49.0130471Z       because a unrecognized item_id was provided
2024-02-19T16:08:49.0372590Z         should return the Partners::FamilyRequestCreateService object with an error
2024-02-19T16:08:49.0373713Z     when the arguments are correct
2024-02-19T16:08:49.0374421Z       without children
2024-02-19T16:08:49.0710765Z         should send the correct request payload to the Partners::RequestCreateService and call it
2024-02-19T16:08:49.0711910Z       with children
2024-02-19T16:08:49.2119670Z         should create the appropriate organization Request, Partners::ItemRequest and Partners::ChildItemRequests
2024-02-19T16:08:49.2121108Z 
2024-02-19T16:08:49.2121316Z SyncNDBNMembers
2024-02-19T16:08:49.2121901Z   .sync
2024-02-19T16:08:49.2122727Z     when the HTTP request does not get a response of 200
2024-02-19T16:08:49.2331457Z       should raise an error regarding the response code
2024-02-19T16:08:49.2332351Z     when the HTTP request is successful
2024-02-19T16:08:49.2333323Z       when the account name of a NDBN Member has changed
2024-02-19T16:08:49.2599273Z         should update the account name of the corresponding NDBN Member
2024-02-19T16:08:49.2600382Z       when no new NDBN Member has been added
2024-02-19T16:08:49.2722806Z         should not add any new NDBN Members
2024-02-19T16:08:49.2723737Z       when there are no exisiting NDBN Member records
2024-02-19T16:08:49.2817852Z         should create the NDBN Member records
2024-02-19T16:08:49.2818699Z 
2024-02-19T16:08:49.2818927Z InventoryItem
2024-02-19T16:08:49.2854601Z   initializes the quantity to 0 if it was not specified
2024-02-19T16:08:49.2855432Z   Filtering >
2024-02-19T16:08:49.2856259Z     ->by_partner_key
2024-02-19T16:08:49.2995664Z       shows the Base Items by partner_key
2024-02-19T16:08:49.2997215Z   versioning
2024-02-19T16:08:49.3034738Z     is expected to be versioned
2024-02-19T16:08:49.3035462Z   Validations >
2024-02-19T16:08:49.3085786Z     requires an inventory association
2024-02-19T16:08:49.3129202Z     requires an item
2024-02-19T16:08:49.3129823Z     quantity >
2024-02-19T16:08:49.3186614Z       is less than the max integer
2024-02-19T16:08:49.3326511Z       is gte 0
2024-02-19T16:08:49.3380587Z       is required
2024-02-19T16:08:49.3436173Z       is numerical
2024-02-19T16:08:49.3436867Z 
2024-02-19T16:08:49.3437204Z PartnerMailerJob
2024-02-19T16:08:49.3438447Z   conditionally sending the emails
2024-02-19T16:08:49.6240317Z     sends mail for future distributions immediately
2024-02-19T16:08:49.8321792Z     does not send mail for past distributions
2024-02-19T16:08:49.8322752Z     when the distribution is for a deactivated partner
2024-02-19T16:08:50.0367934Z       does not send the email
2024-02-19T16:08:50.0368547Z 
2024-02-19T16:08:50.0368855Z DistributionsController
2024-02-19T16:08:50.0369996Z   While signed in
2024-02-19T16:08:50.0371054Z     PUT #update
2024-02-19T16:08:50.0372472Z       when distribution has items updated for minimum quantity
2024-02-19T16:08:50.1966807Z         redirects with a flash notice and send send_notification
2024-02-19T16:08:50.1967924Z       when distribution causes inventory quantity to be below recommended quantity
2024-02-19T16:08:50.5003880Z         redirects with a flash notice and a flash error
2024-02-19T16:08:50.5005591Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-19T16:08:50.6171802Z         redirects with a flash notice and a flash error
2024-02-19T16:08:50.6172511Z     POST #create
2024-02-19T16:08:50.6173516Z       multiple line_items that have inventory quantity below recommended quantity
2024-02-19T16:08:50.7044636Z         redirects with a flash notice and a flash alert
2024-02-19T16:08:50.7045850Z       when line item quantity is not positive
2024-02-19T16:08:50.7614600Z         flashes an error
2024-02-19T16:08:50.7615624Z       when distribution causes inventory quantity to be below minimum quantity
2024-02-19T16:08:50.8355864Z         redirects with a flash notice and a flash error
2024-02-19T16:08:50.8356967Z       multiple line_items that have inventory quantity below minimum quantity
2024-02-19T16:08:50.9234389Z         redirects with a flash notice and a flash error
2024-02-19T16:08:50.9235156Z 
2024-02-19T16:08:50.9235447Z RequestMailer
2024-02-19T16:08:50.9236069Z   #request_cancel_partner_notification
2024-02-19T16:08:50.9398559Z     renders the body with correct text with partner information
2024-02-19T16:08:50.9544508Z     should be sent to the partner main email with the correct subject line
2024-02-19T16:08:50.9545428Z 
2024-02-19T16:08:50.9545771Z ProductDriveHelper
2024-02-19T16:08:50.9546639Z   #is_virtual
2024-02-19T16:08:50.9548070Z     when the product drive wasn't held virtually
2024-02-19T16:08:50.9661628Z       is expected to eq "No"
2024-02-19T16:08:50.9662510Z     when a product drive was not provided
2024-02-19T16:08:50.9707373Z       with blank argument
2024-02-19T16:08:50.9748641Z       without argument
2024-02-19T16:08:50.9749420Z     when the product drive was held virtually
2024-02-19T16:08:50.9799432Z       is expected to eq "Yes"
2024-02-19T16:08:50.9802534Z 
2024-02-19T16:08:50.9802940Z Donation
2024-02-19T16:08:50.9804096Z   SOURCES
2024-02-19T16:08:50.9837167Z     the hash is immutable
2024-02-19T16:08:50.9871500Z     the hash values are immutable
2024-02-19T16:08:50.9906004Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-02-19T16:08:50.9906922Z   Validations >
2024-02-19T16:08:51.0068977Z     requires a donation_site if the source is 'Donation Site'
2024-02-19T16:08:51.0223687Z     is invalid when the line items are invalid
2024-02-19T16:08:51.0347897Z     requires a product drive participant if the source is 'Product Drive'
2024-02-19T16:08:51.0390623Z     must belong to an organization
2024-02-19T16:08:51.0431809Z     requires an inventory (storage location)
2024-02-19T16:08:51.0481959Z     ensures that the issued at is no earlier than 2000
2024-02-19T16:08:51.0659154Z     requires a manufacturer if the source is 'Manufacturer'
2024-02-19T16:08:51.0721962Z     requires a source from the list of available sources
2024-02-19T16:08:51.0722928Z   Callbacks >
2024-02-19T16:08:51.0887424Z     automatically combines duplicate line_item records when they're created
2024-02-19T16:08:51.1012907Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-19T16:08:51.1014301Z   Methods >
2024-02-19T16:08:51.1014817Z     remove
2024-02-19T16:08:51.1819740Z       fails gracefully if the item doesn't exist
2024-02-19T16:08:51.2502313Z       removes the item from the donation
2024-02-19T16:08:51.3146290Z       works with either an id or an object
2024-02-19T16:08:51.3147110Z     money_raised
2024-02-19T16:08:51.3786307Z       tracks the money raised in a donation
2024-02-19T16:08:51.3787839Z     source_view
2024-02-19T16:08:51.3788392Z       from a drive
2024-02-19T16:08:51.3788945Z         unknown participant
2024-02-19T16:08:51.3907956Z           returns drive display name
2024-02-19T16:08:51.3908774Z         participant known
2024-02-19T16:08:51.3909413Z           no contact name
2024-02-19T16:08:51.4039989Z             returns drive display name
2024-02-19T16:08:51.4040748Z           contact name present
2024-02-19T16:08:51.4166844Z             returns participant display name
2024-02-19T16:08:51.4167929Z       not from a drive
2024-02-19T16:08:51.4282732Z         returns source
2024-02-19T16:08:51.4283695Z   Associations >
2024-02-19T16:08:51.4284443Z     items >
2024-02-19T16:08:51.4441923Z       has_many
2024-02-19T16:08:51.4442716Z   behaves like itemizable
2024-02-19T16:08:51.4443661Z     .to_a
2024-02-19T16:08:51.4444736Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:08:51.4771968Z         calls line_item_values
2024-02-19T16:08:51.4772720Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:08:51.5094168Z         raises an error
2024-02-19T16:08:51.5094912Z     .line_items
2024-02-19T16:08:51.5095855Z       combine!
2024-02-19T16:08:51.5486935Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:08:51.5942818Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:08:51.5943602Z       quantities_by_name
2024-02-19T16:08:51.6296045Z         returns a hash of items with id, name, and quantity
2024-02-19T16:08:51.6701228Z         leaves out zero-quantitied items if requested
2024-02-19T16:08:51.6701893Z       sorted
2024-02-19T16:08:51.7198317Z         displays the items, sorted by name
2024-02-19T16:08:51.7199487Z       total
2024-02-19T16:08:51.7529776Z         has an item total
2024-02-19T16:08:51.7530728Z   Scopes >
2024-02-19T16:08:51.7531208Z     by_source >
2024-02-19T16:08:51.7531830Z       when source is a symbol
2024-02-19T16:08:51.7532640Z         when source is valid
2024-02-19T16:08:51.7718464Z           allows a symbol as an argument, referencing the SOURCES hash
2024-02-19T16:08:51.7719627Z         when source is invalid
2024-02-19T16:08:51.7898265Z           does not throw errors, returns no results
2024-02-19T16:08:51.7899035Z       when source is not a symbol
2024-02-19T16:08:51.7899987Z         when source is invalid
2024-02-19T16:08:51.8075223Z           does not throw errors, returns no results
2024-02-19T16:08:51.8076015Z         when source comes from the SOURCES hash
2024-02-19T16:08:51.8251277Z           returns all donations with the provided source
2024-02-19T16:08:51.8252092Z     during >
2024-02-19T16:08:51.8438997Z       returns all donations created between two dates
2024-02-19T16:08:51.8440546Z   versioning
2024-02-19T16:08:51.8474917Z     is expected to be versioned
2024-02-19T16:08:51.8475778Z 
2024-02-19T16:08:51.8476002Z ItemCreateService
2024-02-19T16:08:51.8476802Z   #call
2024-02-19T16:08:51.8477763Z     when there are no issues
2024-02-19T16:08:52.0323075Z       should execute the expected methods
2024-02-19T16:08:52.2056563Z       should return an OpenStruct with success? set to true and the item
2024-02-19T16:08:52.2058245Z     when an issue occurs in transaction
2024-02-19T16:08:52.2059403Z       because a inventory item creation failed and raised an error
2024-02-19T16:08:52.3876547Z         should return a OpenStruct with the raised error
2024-02-19T16:08:52.3877620Z       because the organization_id does not match any Organization
2024-02-19T16:08:52.5588051Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-02-19T16:08:52.5589237Z       because the item create raised an error
2024-02-19T16:08:52.7323373Z         should return a OpenStruct with the raised error
2024-02-19T16:08:52.7324284Z 
2024-02-19T16:08:52.7324925Z DistributionMailer
2024-02-19T16:08:52.7325707Z   #partner_mailer
2024-02-19T16:08:52.7907245Z     renders the body with distributions text
2024-02-19T16:08:52.8433201Z     renders the body with organization's email text
2024-02-19T16:08:52.8434489Z     with deliver_method: :delivery
2024-02-19T16:08:52.8993576Z       renders the body with 'delivered' specified
2024-02-19T16:08:52.9550581Z       sends copy of email only to the partner
2024-02-19T16:08:52.9551457Z     with deliver_method: :pick_up
2024-02-19T16:08:53.0108217Z       renders the body with 'picked up' specified
2024-02-19T16:08:53.0109177Z       when parners profile pick_up_email is present
2024-02-19T16:08:53.0691428Z         sends email to the primary contact and partner`s pickup person
2024-02-19T16:08:53.0692930Z         when pickup person happens to be the same as the primary contact
2024-02-19T16:08:53.1258657Z           does not send email twice
2024-02-19T16:08:53.1259519Z     with distribution changes
2024-02-19T16:08:53.2404782Z       renders the body with changes that happened in the distribution
2024-02-19T16:08:53.2405827Z   #reminder_email
2024-02-19T16:08:53.2406771Z     with deliver_method: :delivery
2024-02-19T16:08:53.3934037Z       renders the body with 'delivery' specified
2024-02-19T16:08:53.3934885Z     HTML format
2024-02-19T16:08:53.4622789Z       renders the body with organization's email text
2024-02-19T16:08:53.4623412Z     with deliver_method: :pick_up
2024-02-19T16:08:53.5185893Z       renders the body with 'pick up' specified
2024-02-19T16:08:53.5186454Z     Text format
2024-02-19T16:08:53.5706580Z       renders the body with organization's email text
2024-02-19T16:08:53.5707191Z 
2024-02-19T16:08:53.5707431Z AccountRequest
2024-02-19T16:08:53.5931151Z   #reject!
2024-02-19T16:08:53.6063978Z   #confirm!
2024-02-19T16:08:53.6064548Z   .get_by_identity_token
2024-02-19T16:08:53.6065786Z     when the identity_token provided does not match any AccountRequest
2024-02-19T16:08:53.6105162Z       should return nil
2024-02-19T16:08:53.6106002Z     when the identity_token corresponds to an existing AccountRequest
2024-02-19T16:08:53.6205434Z       should return the corresponding AccountRequest
2024-02-19T16:08:53.6206358Z   validations
2024-02-19T16:08:53.6346244Z     is expected to validate that :request_details cannot be empty/falsy
2024-02-19T16:08:53.6501571Z     is expected to validate that :name cannot be empty/falsy
2024-02-19T16:08:53.6634078Z     is expected to validate that the length of :request_details is at least 50
2024-02-19T16:08:53.6745085Z     is expected to allow :email to be ‹"vincent@russel.test"›
2024-02-19T16:08:53.6849097Z     is expected not to allow :email to be ‹"not_email"›
2024-02-19T16:08:53.6990381Z     is expected to validate that :email is case-sensitively unique
2024-02-19T16:08:53.7151626Z     is expected to validate that :email cannot be empty/falsy
2024-02-19T16:08:53.7152725Z     when the email provided is already used by an existing user
2024-02-19T16:08:53.7368749Z       should not allow the email
2024-02-19T16:08:53.7369646Z     when the email provided is already used by an existing organization
2024-02-19T16:08:53.9179994Z       should not allow the email
2024-02-19T16:08:53.9180965Z   versioning
2024-02-19T16:08:53.9220143Z     is expected to be versioned
2024-02-19T16:08:53.9220798Z   #identity_token
2024-02-19T16:08:53.9310345Z     should return a JWT token that contains the id of the account_request_id
2024-02-19T16:08:53.9311130Z     when the account_request is not persisted
2024-02-19T16:08:53.9398155Z       should raise an error
2024-02-19T16:08:53.9398964Z   #processed?
2024-02-19T16:08:53.9399790Z     when the account request has a associated organization
2024-02-19T16:08:54.1361960Z       should return true
2024-02-19T16:08:54.1362905Z     when the account request has no associated organization
2024-02-19T16:08:54.1467304Z       should return false
2024-02-19T16:08:54.1467979Z   associations
2024-02-19T16:08:54.1530412Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-19T16:08:54.1568782Z     is expected to have one organization class_name => Organization
2024-02-19T16:08:54.1569544Z 
2024-02-19T16:08:54.1569757Z ApplicationHelper
2024-02-19T16:08:54.1572021Z   active_class
2024-02-19T16:08:54.1622078Z     Returns the controller name
2024-02-19T16:08:54.1623031Z   can_administrate?
2024-02-19T16:08:54.1623804Z     User is part of org but not org admin
2024-02-19T16:08:54.1769935Z       cannot administrate
2024-02-19T16:08:54.1770786Z     User is org admin and not part of org
2024-02-19T16:08:54.3744060Z       cannot administrate
2024-02-19T16:08:54.3745000Z     User is org admin and part of org
2024-02-19T16:08:54.3958683Z       can administrate
2024-02-19T16:08:54.3959501Z   flash_class
2024-02-19T16:08:54.4010322Z     returns appropriate class for alert
2024-02-19T16:08:54.4052544Z     returns appropriate class for error
2024-02-19T16:08:54.4093750Z     returns appropriate class for success
2024-02-19T16:08:54.4132796Z     returns appropriate class for notice
2024-02-19T16:08:54.4135711Z   default_title_content
2024-02-19T16:08:54.4137454Z     Organization exists
2024-02-19T16:08:54.5838208Z       returns the organization's name
2024-02-19T16:08:54.5839300Z     Organization does not exist
2024-02-19T16:08:54.5887393Z       returns a default name
2024-02-19T16:08:54.5888130Z   confirm_delete_msg
2024-02-19T16:08:54.5930495Z     subs in string
2024-02-19T16:08:54.5931328Z   step_container_helper
2024-02-19T16:08:54.5933685Z     active_index is less than index
2024-02-19T16:08:54.5975255Z       returns empty string
2024-02-19T16:08:54.5975899Z     active_index is equal to index
2024-02-19T16:08:54.6016930Z       returns active
2024-02-19T16:08:54.6017827Z     active_index is greater than index
2024-02-19T16:08:54.6058894Z       returns done
2024-02-19T16:08:54.6059712Z 
2024-02-19T16:08:54.6060004Z AccountRequestsController
2024-02-19T16:08:54.6060840Z   routing
2024-02-19T16:08:54.6098342Z     routes to #new
2024-02-19T16:08:54.6131785Z     routes to #create
2024-02-19T16:08:54.6132478Z 
2024-02-19T16:08:54.6132753Z TransferDestroyService
2024-02-19T16:08:54.6133489Z   #call
2024-02-19T16:08:54.6134507Z     when there are no issues
2024-02-19T16:08:54.8148299Z       should execute the expected methods
2024-02-19T16:08:55.0121203Z       should return an OpenStruct with success? set to true
2024-02-19T16:08:55.0122218Z     when an issue occurs in transaction
2024-02-19T16:08:55.0122871Z       because the transfer_id does not match any Transfer
2024-02-19T16:08:55.2024064Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-02-19T16:08:55.2025593Z       because undoing the transfer inventory changes by decreasing the inventory of `to` failed
2024-02-19T16:08:55.3840447Z         should return a OpenStruct with the raised error
2024-02-19T16:08:55.3841213Z       because the transfer destroy raised an error
2024-02-19T16:08:55.5654001Z         should return a OpenStruct with the raised error
2024-02-19T16:08:55.5655508Z       because undoing the transfer inventory changes by increasing the inventory of `from` failed
2024-02-19T16:08:55.7416067Z         should return a OpenStruct with the raised error
2024-02-19T16:08:55.7417018Z     because transfer should not be deleted
2024-02-19T16:08:55.9199833Z       should return an OpenStruct with the raised error
2024-02-19T16:08:55.9200789Z 
2024-02-19T16:08:55.9201209Z BaseItem
2024-02-19T16:08:55.9202869Z   Filtering >
2024-02-19T16:08:55.9203632Z     ->without_kit
2024-02-19T16:08:55.9258301Z       should not include the Kit BaseItem
2024-02-19T16:08:55.9259097Z     ->by_partner_key
2024-02-19T16:08:55.9309019Z       shows the Base Items by partner_key
2024-02-19T16:08:55.9309849Z   versioning
2024-02-19T16:08:55.9344242Z     is expected to be versioned
2024-02-19T16:08:55.9344891Z   Associations >
2024-02-19T16:08:55.9472537Z     keeps count of its associated items
2024-02-19T16:08:55.9473427Z   Validations >
2024-02-19T16:08:55.9534022Z     is invalid without a name
2024-02-19T16:08:55.9578227Z     is invalid without a partner key
2024-02-19T16:08:55.9648464Z     is invalid without a unique name
2024-02-19T16:08:55.9717015Z     is invalid without a uniqueness key
2024-02-19T16:08:55.9717970Z 
2024-02-19T16:08:55.9718148Z Kit
2024-02-19T16:08:56.1802998Z   deactivate and reactivate
2024-02-19T16:08:56.1804115Z   Value >
2024-02-19T16:08:56.1966676Z     converts dollars to cents
2024-02-19T16:08:56.2121909Z     converts cents to dollars
2024-02-19T16:08:56.2122667Z     .value_per_itemizable
2024-02-19T16:08:56.2508482Z       calculates values from associated items
2024-02-19T16:08:56.2509302Z   #can_deactivate?
2024-02-19T16:08:56.2509912Z     without inventory items
2024-02-19T16:08:56.4442316Z       should return true
2024-02-19T16:08:56.4442932Z     with inventory items
2024-02-19T16:08:56.6612133Z       should return false
2024-02-19T16:08:56.6612683Z   Filtering >
2024-02-19T16:08:56.6667740Z     can filter
2024-02-19T16:08:57.2430114Z     ->alphabetized retrieves items in alphabetical order
2024-02-19T16:08:57.2431359Z     ->by_partner_key
2024-02-19T16:08:57.4713716Z       shows the kits for a particular item
2024-02-19T16:08:57.4714319Z   versioning
2024-02-19T16:08:57.4753698Z     is expected to be versioned
2024-02-19T16:08:57.4754346Z   Validations >
2024-02-19T16:08:57.4924758Z     is valid as built
2024-02-19T16:08:57.5089557Z     requires a name
2024-02-19T16:08:57.5259666Z     can't have negative value
2024-02-19T16:08:57.5435469Z     requires at least one item
2024-02-19T16:08:57.7421817Z     requires a unique name
2024-02-19T16:08:57.7593583Z     must belong to an organization
2024-02-19T16:08:57.7594416Z 
2024-02-19T16:08:57.7594605Z User
2024-02-19T16:08:57.7595611Z   #send_reset_password_instructions
2024-02-19T16:08:57.7596561Z     user gets an email with instructions
2024-02-19T16:08:57.8509217Z       sends an email with instructions
2024-02-19T16:08:57.8510306Z   #role_added
2024-02-19T16:08:57.8870434Z     renders the body correctly
2024-02-19T16:08:57.8871061Z 
2024-02-19T16:08:57.8871454Z Reports::OtherProductsReportService
2024-02-19T16:08:57.8872541Z   #report
2024-02-19T16:08:58.0724545Z     should report zero values
2024-02-19T16:08:58.6805951Z     should report normal values
2024-02-19T16:08:58.6806887Z 
2024-02-19T16:08:58.6807138Z RequestsTotalItemsService
2024-02-19T16:08:58.6807816Z   #calculate
2024-02-19T16:08:58.6809209Z     when provided requests is nil
2024-02-19T16:08:58.6849979Z       is expected to be blank
2024-02-19T16:08:58.6850704Z     when the request items is not blank
2024-02-19T16:08:58.6994079Z       return the names of items correctly
2024-02-19T16:08:58.7126951Z       return items with correct quantities calculated
2024-02-19T16:08:58.7127983Z     when provided with requests that have no request items
2024-02-19T16:08:58.7201043Z       is expected to be blank
2024-02-19T16:08:58.7201796Z     when item name is nil
2024-02-19T16:08:58.7316558Z       return Unknown Item
2024-02-19T16:08:58.7317400Z 
2024-02-19T16:08:58.7317628Z Request
2024-02-19T16:08:58.7318944Z   versioning
2024-02-19T16:08:58.7355852Z     is expected to be versioned
2024-02-19T16:08:58.7356756Z   total_items
2024-02-19T16:08:58.7448878Z     adds the quantity of all items in the request
2024-02-19T16:08:58.7449669Z   item data
2024-02-19T16:08:58.7526044Z     coerces item quantity and id to always be an integer before saving
2024-02-19T16:08:58.7527013Z   Enums >
2024-02-19T16:08:58.7527708Z     #status
2024-02-19T16:08:58.7726295Z       scopes
2024-02-19T16:08:58.7727229Z 
2024-02-19T16:08:58.7727722Z PartnerApprovalService
2024-02-19T16:08:58.7728695Z   #call
2024-02-19T16:08:58.7729500Z     when the arguments are correct
2024-02-19T16:08:58.8043251Z       should change the partner status to approved
2024-02-19T16:08:58.8327204Z       should send an email notification to the partner
2024-02-19T16:08:58.8620917Z       should have no errors
2024-02-19T16:08:58.8621794Z       but a unexpected error occured during the save
2024-02-19T16:08:58.8622574Z         for partner approval
2024-02-19T16:08:58.8892433Z           should not change the partner status to approved
2024-02-19T16:08:58.9150306Z           should have an error with the raised error
2024-02-19T16:08:58.9414504Z           should not send an email notification to the partner
2024-02-19T16:08:58.9416056Z     when the arguments are incorrect
2024-02-19T16:08:58.9416848Z       because the partner is not approvable
2024-02-19T16:08:58.9670846Z         should return the PartnerApprovalService object with an error
2024-02-19T16:08:58.9671730Z 
2024-02-19T16:08:58.9671998Z Partners::UpdateFamily
2024-02-19T16:08:58.9672798Z   #call
2024-02-19T16:08:58.9673815Z     when an error occurs during archiving
2024-02-19T16:08:59.0055476Z       does not archive the family or its children and adds error to the service
2024-02-19T16:08:59.0056388Z     when family has children
2024-02-19T16:08:59.0452561Z       archives the family and its children
2024-02-19T16:08:59.0453386Z 
2024-02-19T16:08:59.0453639Z CalendarService
2024-02-19T16:08:59.3052404Z   #time_zones
2024-02-19T16:08:59.3053305Z   .calendar
2024-02-19T16:08:59.3672285Z     should print the calendar correctly
2024-02-19T16:08:59.3672897Z 
2024-02-19T16:08:59.3673528Z HistoricalTrendService
2024-02-19T16:08:59.3674226Z   #series
2024-02-19T16:08:59.6720369Z     returns an array of items with their monthly data
2024-02-19T16:08:59.6721141Z 
2024-02-19T16:08:59.6721585Z HistoricalDataCacheJob
2024-02-19T16:08:59.8404157Z   queues the job
2024-02-19T16:09:00.0214375Z   caches the historical data
2024-02-19T16:09:00.0214920Z 
2024-02-19T16:09:00.0215208Z DonationsController
2024-02-19T16:09:00.0216501Z   calculating total value of multiple donations
2024-02-19T16:09:00.0257762Z     returns zero for an empty array of donations
2024-02-19T16:09:00.1605917Z     works correctly for multiple line items per donation
2024-02-19T16:09:00.1606602Z   calculating total money raised for all donations
2024-02-19T16:09:00.1649506Z     returns zero for an empty array of donations
2024-02-19T16:09:00.1779010Z     correctly calculates the total
2024-02-19T16:09:00.1779672Z   While signed in as a normal user >
2024-02-19T16:09:00.1781024Z     GET #new
2024-02-19T16:09:00.1958307Z       returns http success
2024-02-19T16:09:00.1959506Z     PUT#update
2024-02-19T16:09:00.3274592Z       updates storage quantity correctly
2024-02-19T16:09:00.3676576Z       redirects to index after update
2024-02-19T16:09:00.3677404Z       when changing storage location
2024-02-19T16:09:00.3718230Z         rolls back updates if quantity would go below 0
2024-02-19T16:09:00.4820918Z         updates storage quantity correctly
2024-02-19T16:09:00.4821784Z       when removing a line item
2024-02-19T16:09:00.5896328Z         updates storage invetory item quantity correctly
2024-02-19T16:09:00.5897229Z     DELETE #destroy
2024-02-19T16:09:00.6067345Z       redirects to the dashboard path
2024-02-19T16:09:00.6067967Z     GET #show
2024-02-19T16:09:00.6235192Z       returns http success
2024-02-19T16:09:00.6235753Z     GET #edit
2024-02-19T16:09:00.6428584Z       returns http success
2024-02-19T16:09:00.6429267Z     POST#create
2024-02-19T16:09:00.6627143Z       renders GET#new with error on failure
2024-02-19T16:09:00.7037432Z       redirects to GET#edit on success
2024-02-19T16:09:00.7038018Z     GET #index
2024-02-19T16:09:00.7185890Z       returns http success
2024-02-19T16:09:00.7186808Z   While signed in as an organization admin >
2024-02-19T16:09:00.7187655Z     DELETE #destroy
2024-02-19T16:09:00.7524798Z       redirects to the index
2024-02-19T16:09:00.7525537Z 
2024-02-19T16:09:00.7526068Z Partners::Child
2024-02-19T16:09:00.7527093Z   #display_name
2024-02-19T16:09:00.7823294Z     should return a child's first and last name
2024-02-19T16:09:00.7824555Z   associations
2024-02-19T16:09:00.7865406Z     is expected to have many child_item_requests dependent => destroy
2024-02-19T16:09:00.7908334Z     is expected to belong to family required: true
2024-02-19T16:09:00.7909269Z   versioning
2024-02-19T16:09:00.7945662Z     is expected to be versioned
2024-02-19T16:09:00.7946176Z 
2024-02-19T16:09:00.7946565Z AdjustmentCreateService
2024-02-19T16:09:00.7947350Z   call
2024-02-19T16:09:00.8887965Z     saves a new adjustment with line items relating to the current (simple case) negative adjustment
2024-02-19T16:09:00.9855835Z     decreases stored inventory on a negative adjustment
2024-02-19T16:09:01.0817562Z     increases stored inventory on a positive adjustment
2024-02-19T16:09:01.1761180Z     handles mixed adjustments to same item appropriately (total is positive version)
2024-02-19T16:09:01.2430953Z     does not allow inventory to be adjusted below 0
2024-02-19T16:09:01.3363440Z     increases handles mixed adjustments to same appropriately (total is negative version)
2024-02-19T16:09:01.4165205Z     saves a new adjustment with line items relating to the current (simple case) positive adjustment
2024-02-19T16:09:01.4728118Z     gives an error if we attempt to adjust inventory below 0
2024-02-19T16:09:01.5629371Z     handles adjustments to multiple items
2024-02-19T16:09:01.5630019Z 
2024-02-19T16:09:01.5630238Z Reports::AdultIncontinenceReportService
2024-02-19T16:09:01.5631209Z   #report
2024-02-19T16:09:01.7561791Z     should report zero values
2024-02-19T16:09:01.7562854Z     with values
2024-02-19T16:09:02.4138806Z       should handle null distribution quantity
2024-02-19T16:09:03.0308357Z       should report normal values
2024-02-19T16:09:03.0309221Z 
2024-02-19T16:09:03.0309638Z User
2024-02-19T16:09:03.0378976Z   has a valid factory
2024-02-19T16:09:03.0379560Z   versioning
2024-02-19T16:09:03.0416699Z     is expected to be versioned
2024-02-19T16:09:03.0417527Z   omniauth
2024-02-19T16:09:03.0557752Z     retrieves the user from an omniauth context
2024-02-19T16:09:03.0558571Z   Scopes >
2024-02-19T16:09:03.0559741Z     ->alphabetized
2024-02-19T16:09:03.0937579Z       retrieves users in the correct order
2024-02-19T16:09:03.0938516Z   Methods >
2024-02-19T16:09:03.1410265Z     #kind
2024-02-19T16:09:03.1463989Z     discarded?
2024-02-19T16:09:03.1542014Z     #invitation_status
2024-02-19T16:09:03.1618133Z     #reinvitable?
2024-02-19T16:09:03.1618753Z   Scopes >
2024-02-19T16:09:03.1619718Z     ->alphabetized
2024-02-19T16:09:03.1848877Z       retrieves users in the correct order
2024-02-19T16:09:03.1849726Z   Validations >
2024-02-19T16:09:03.2039748Z     requires an email that is formatted correctly
2024-02-19T16:09:03.2099074Z     without a name results in display_name 'Name Not Provided'
2024-02-19T16:09:03.2158469Z     user can receive a name
2024-02-19T16:09:03.2159381Z 
2024-02-19T16:09:03.2159985Z Vendor
2024-02-19T16:09:03.2160962Z   Methods
2024-02-19T16:09:03.2161605Z     volume
2024-02-19T16:09:03.2994053Z       retrieves the amount of product that has been bought from this vendor
2024-02-19T16:09:03.2995116Z   behaves like provideable
2024-02-19T16:09:03.2995737Z     Validations
2024-02-19T16:09:03.3040304Z       is invalid without an organization
2024-02-19T16:09:03.3107842Z       is invalid unless it has either a contact name or a business name
2024-02-19T16:09:03.3108877Z     import_csv
2024-02-19T16:09:03.4964195Z       imports from a csv file
2024-02-19T16:09:03.4965193Z     geocode
2024-02-19T16:09:03.5027670Z       adds coordinates to the database
2024-02-19T16:09:03.5028517Z   versioning
2024-02-19T16:09:03.5069245Z     is expected to be versioned
2024-02-19T16:09:03.5069727Z 
2024-02-19T16:09:03.5070020Z EventDiffer
2024-02-19T16:09:03.7265755Z   should return a full diff
2024-02-19T16:09:03.7266611Z 
2024-02-19T16:09:03.7266850Z DonationCreateService
2024-02-19T16:09:03.7267465Z   #call
2024-02-19T16:09:03.7492229Z     should create the donation
2024-02-19T16:09:03.7493032Z 
2024-02-19T16:09:03.7493334Z DistributionItemizedBreakdownService
2024-02-19T16:09:03.7494147Z   #fetch_csv
2024-02-19T16:09:04.1270535Z     should output the expected output but in CSV format
2024-02-19T16:09:04.1271420Z   #fetch
2024-02-19T16:09:04.5137122Z     should include the break down of items distributed with onhand data
2024-02-19T16:09:04.5137963Z 
2024-02-19T16:09:04.5138163Z Partners::AuthorizedFamilyMember
2024-02-19T16:09:04.5138810Z   associations
2024-02-19T16:09:04.5179538Z     is expected to have many child_item_requests dependent => nullify
2024-02-19T16:09:04.5218519Z     is expected to belong to family required: true
2024-02-19T16:09:04.5219392Z   #display_name
2024-02-19T16:09:04.5476531Z     should return the family member's first and last name
2024-02-19T16:09:04.5477485Z   versioning
2024-02-19T16:09:04.5511996Z     is expected to be versioned
2024-02-19T16:09:04.5512673Z 
2024-02-19T16:09:04.5512935Z AccountRequestMailer
2024-02-19T16:09:04.5514584Z   #confirmation
2024-02-19T16:09:04.5646583Z     should be from no-reply@humanessentials.app
2024-02-19T16:09:04.5754064Z     should be sent to the specified account_request email
2024-02-19T16:09:04.5863354Z     should have the correct subject
2024-02-19T16:09:04.5864349Z     Text format
2024-02-19T16:09:04.5975651Z       should include the staging/demo account information
2024-02-19T16:09:04.6086348Z       should include the button to confirm the request
2024-02-19T16:09:04.6197728Z       should include the instruction video link
2024-02-19T16:09:04.6198509Z     HTML format
2024-02-19T16:09:04.6311095Z       should include the button to confirm the request
2024-02-19T16:09:04.6428493Z       should include the staging/demo account information
2024-02-19T16:09:04.6543515Z       should include the instruction video link
2024-02-19T16:09:04.6544966Z     when the account_request_id provided does not match any AccountRequest
2024-02-19T16:09:04.6593059Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-19T16:09:04.6593991Z   #rejection
2024-02-19T16:09:04.6708678Z     should have the correct subject
2024-02-19T16:09:04.6818480Z     should include the rejection reason
2024-02-19T16:09:04.6922486Z     should be sent to the correct email address
2024-02-19T16:09:04.6923832Z     when the account_request_id provided does not match any AccountRequest
2024-02-19T16:09:04.6968122Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-19T16:09:04.6969148Z   #approval_request
2024-02-19T16:09:04.7092119Z     should have the correct subject
2024-02-19T16:09:04.7205074Z     should be sent to the info@humanessentials.app email address
2024-02-19T16:09:04.7329222Z     should include the admin link to reject the organization
2024-02-19T16:09:04.7689917Z     should include details of the account request
2024-02-19T16:09:04.7837304Z     should include the admin link to create the new organization from the account request
2024-02-19T16:09:04.7838973Z     when the account_request_id provided does not match any AccountRequest
2024-02-19T16:09:04.7887647Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-02-19T16:09:04.7889667Z 
2024-02-19T16:09:04.7890092Z Organization
2024-02-19T16:09:04.7892466Z   Associations >
2024-02-19T16:09:04.7943482Z     is expected to have many item_categories
2024-02-19T16:09:04.7989752Z     is expected to belong to ndbn_member class_name => NDBNMember optional: true
2024-02-19T16:09:04.8028282Z     is expected to have many users through roles
2024-02-19T16:09:04.8028988Z     distributions
2024-02-19T16:09:04.8029795Z       upcoming
2024-02-19T16:09:04.8758074Z         retrieves the distributions scheduled for this week that have not yet happened
2024-02-19T16:09:04.8758883Z     barcode_items
2024-02-19T16:09:05.0682755Z       returns only this organization's barcodes, no globals
2024-02-19T16:09:05.0683573Z       .all
2024-02-19T16:09:05.2552801Z         includes global barcode items also
2024-02-19T16:09:05.2553573Z     items
2024-02-19T16:09:05.2554349Z       .during
2024-02-19T16:09:07.2199007Z         return ranking of all items
2024-02-19T16:09:07.2199808Z       .during.bottom
2024-02-19T16:09:09.1725739Z         return 3 least used items
2024-02-19T16:09:11.1303769Z         return just 3 elements
2024-02-19T16:09:11.1304398Z       .during.top
2024-02-19T16:09:13.0935637Z         return 3 most used items
2024-02-19T16:09:15.0497693Z         return just 3 elements
2024-02-19T16:09:15.0498583Z       .other
2024-02-19T16:09:17.0014253Z         returns all items for this organization designated 'other'
2024-02-19T16:09:17.0015530Z     users
2024-02-19T16:09:17.0016343Z       when a organizaton has a user that has two roles
2024-02-19T16:09:17.1890842Z         should returns users without duplications
2024-02-19T16:09:17.1891518Z   deadline_day
2024-02-19T16:09:17.1996294Z     can only contain numbers 1-28
2024-02-19T16:09:17.4381359Z   earliest reporting year
2024-02-19T16:09:17.4382850Z     is the year of the earliest of donation, purchase, or distribution if they are earlier
2024-02-19T16:09:17.6084406Z     is the organization created year if no associated data
2024-02-19T16:09:17.6085331Z   .seed_items
2024-02-19T16:09:17.6086228Z     when provided with an organization to seed
2024-02-19T16:09:17.9379058Z       loads the base items into Item records
2024-02-19T16:09:18.5693740Z     when no organization is provided
2024-02-19T16:09:18.5694536Z       updates all organizations
2024-02-19T16:09:18.5694948Z   total_inventory
2024-02-19T16:09:18.7528220Z     returns 0 if there is nothing
2024-02-19T16:09:19.0203946Z     returns a sum total of all inventory at all storage locations
2024-02-19T16:09:19.0204946Z   #seed_items
2024-02-19T16:09:19.2031973Z     allows a single base item to be seeded
2024-02-19T16:09:19.3942053Z     allows a collection of items to be seeded
2024-02-19T16:09:19.3942944Z     when given an item that already exists
2024-02-19T16:09:19.5832799Z       gracefully skips the item
2024-02-19T16:09:19.5833906Z     when given an item name that already exists, but with an 'other' partner key
2024-02-19T16:09:19.7793251Z       updates the old item to use the new base item as its base
2024-02-19T16:09:19.7793974Z   versioning
2024-02-19T16:09:19.7834684Z     is expected to be versioned
2024-02-19T16:09:19.7835563Z   valid_items
2024-02-19T16:09:19.9632513Z     only shows active valid items
2024-02-19T16:09:20.1419291Z     returns an array of item partner keys
2024-02-19T16:09:20.1419953Z     with invisible items
2024-02-19T16:09:20.1715190Z       only shows active and visible items
2024-02-19T16:09:20.1716218Z   is_active
2024-02-19T16:09:20.5243477Z     returns active organizations
2024-02-19T16:09:20.5244573Z   #ordered_requests
2024-02-19T16:09:20.7064782Z     puts active requests before fulfilled requests
2024-02-19T16:09:20.9041433Z     ordering of requests with matching status
2024-02-19T16:09:20.9042393Z       puts the most recently updated request before older requests
2024-02-19T16:09:20.9042939Z   reminder_day
2024-02-19T16:09:20.9163446Z     can only contain numbers 1-28
2024-02-19T16:09:20.9164142Z   default storage location
2024-02-19T16:09:20.9204578Z     associates the default storage location with a storage location
2024-02-19T16:09:20.9237759Z     returns nil when not set
2024-02-19T16:09:20.9238384Z   validations
2024-02-19T16:09:20.9334748Z     validates that at least one distribution type is enabled
2024-02-19T16:09:20.9406770Z     validates that attachments are png or jpgs
2024-02-19T16:09:20.9469707Z     validates that attachment file size is not higher than 1 MB
2024-02-19T16:09:21.1186389Z     validates that short names are unique
2024-02-19T16:09:21.1187266Z   address
2024-02-19T16:09:21.1224732Z     returns an empty string when the org has no address components
2024-02-19T16:09:21.1258789Z     does not add any separators after street when city, state, and zip are missing
2024-02-19T16:09:21.1290204Z     correctly formats an address string with commas and spaces
2024-02-19T16:09:21.1325660Z     does not add a trailing space when the zip code is missing
2024-02-19T16:09:21.1360157Z     does not add any separators before the city when street is missing
2024-02-19T16:09:21.1361192Z   #assign_attributes_from_account_request
2024-02-19T16:09:21.1451678Z     should assign the proper attributes to the organization
2024-02-19T16:09:21.1452570Z   from_email
2024-02-19T16:09:21.3384702Z     returns admin email when it's empty
2024-02-19T16:09:21.5326230Z     returns admin email when not present
2024-02-19T16:09:21.7041487Z     returns email when present
2024-02-19T16:09:21.8949857Z     returns admin email when it's empty space
2024-02-19T16:09:21.8951101Z   geocode
2024-02-19T16:09:22.1084059Z     adds coordinates to the database
2024-02-19T16:09:22.1084946Z   after_create
2024-02-19T16:09:22.1466005Z     should update the state of the account request
2024-02-19T16:09:22.1467166Z   #short_name
2024-02-19T16:09:22.1601455Z     can only contain valid characters
2024-02-19T16:09:22.1602094Z 
2024-02-19T16:09:22.1602336Z DonationItemizedBreakdownService
2024-02-19T16:09:22.1610001Z   #fetch
2024-02-19T16:09:22.6791389Z     return the list of items donated with distributed
2024-02-19T16:09:22.6792473Z 
2024-02-19T16:09:22.6792725Z Partners::ServedArea
2024-02-19T16:09:22.7130759Z   must only allow valid client share values
2024-02-19T16:09:22.7178354Z   is expected to belong to partner_profile required: true
2024-02-19T16:09:22.7218857Z   is expected to belong to county required: true
2024-02-19T16:09:22.7351476Z   must only allow integer client shares
2024-02-19T16:09:22.7352447Z   versioning
2024-02-19T16:09:22.7387037Z     is expected to be versioned
2024-02-19T16:09:22.7388318Z 
2024-02-19T16:09:22.7388589Z Item
2024-02-19T16:09:22.7390747Z   Filtering >
2024-02-19T16:09:22.7609143Z     ->by_size returns all items with the same size, per their BaseItem parent
2024-02-19T16:09:22.7792695Z     ->alphabetized retrieves items in alphabetical order
2024-02-19T16:09:22.8064462Z     ->active shows items that are still active
2024-02-19T16:09:22.8100038Z     can filter
2024-02-19T16:09:22.8100737Z     ->cloth_diapers
2024-02-19T16:09:22.8373087Z       returns records associated with disposable diapers
2024-02-19T16:09:22.8374335Z     ->by_partner_key
2024-02-19T16:09:22.8526794Z       filters by partner key
2024-02-19T16:09:22.8527315Z     ->disposable
2024-02-19T16:09:22.8800462Z       returns records associated with disposable diapers
2024-02-19T16:09:22.8801097Z     ->by_base_item
2024-02-19T16:09:22.8960108Z       shows the items for a particular base_item
2024-02-19T16:09:23.0909398Z       can be chained to organization to constrain it to just 1 org's items
2024-02-19T16:09:23.0910164Z   Methods >
2024-02-19T16:09:23.0910561Z     other?
2024-02-19T16:09:23.1035464Z       is true for items that are partner_key 'other'
2024-02-19T16:09:23.1036012Z     has_history?
2024-02-19T16:09:23.1791289Z       identifies items that have been used previously
2024-02-19T16:09:23.1791924Z     barcodes_for
2024-02-19T16:09:23.2001689Z       retrieves all BarcodeItems associated with an item
2024-02-19T16:09:23.2002414Z     #reactivate!
2024-02-19T16:09:23.2002928Z       given a single item id
2024-02-19T16:09:23.2137697Z         sets the active trait to true for that item
2024-02-19T16:09:23.2392159Z       given an array of item ids
2024-02-19T16:09:23.2446206Z         sets the active trait to true for all of them
2024-02-19T16:09:23.2446970Z     storage_locations_containing
2024-02-19T16:09:23.2829524Z       retrieves all storage locations that contain an item
2024-02-19T16:09:23.2830045Z     destroy
2024-02-19T16:09:23.4980667Z       deactivates the kit if it exists
2024-02-19T16:09:23.5232199Z       only hides an item that has history
2024-02-19T16:09:23.5407969Z       actually destroys an item that doesn't have history
2024-02-19T16:09:23.5408684Z     barcoded_items >
2024-02-19T16:09:23.5767516Z       returns a collection of items that have barcodes associated with them
2024-02-19T16:09:23.5768486Z   distribution_quantity and package size
2024-02-19T16:09:23.5899106Z     have nil values if an empty string is passed
2024-02-19T16:09:23.5899768Z   versioning
2024-02-19T16:09:23.5935713Z     is expected to be versioned
2024-02-19T16:09:23.5936260Z   after update
2024-02-19T16:09:23.5936875Z     when item has the kit
2024-02-19T16:09:23.7846972Z       updates kit name
2024-02-19T16:09:23.7847543Z     when item does not have kit
2024-02-19T16:09:23.7979946Z       does not raise any errors
2024-02-19T16:09:23.7980489Z   Validations >
2024-02-19T16:09:23.8032180Z     must belong to an organization
2024-02-19T16:09:23.8077703Z     requires a Base Item base
2024-02-19T16:09:23.8203354Z     requires a unique name
2024-02-19T16:09:23.8311214Z     requires that items quantity are not a negative number
2024-02-19T16:09:23.8311738Z   default_quantity
2024-02-19T16:09:23.8388907Z     should return the value of on_hand_minimum_quantity if it is set
2024-02-19T16:09:23.8465044Z     should return 50 if column is not set
2024-02-19T16:09:23.8544085Z     should return the value of distribution_quantity if it is set
2024-02-19T16:09:23.8622384Z     should return 0 if on_hand_minimum_quantity is not set
2024-02-19T16:09:23.8623079Z   Assocations >
2024-02-19T16:09:23.8668761Z     is expected to belong to item_category optional: true
2024-02-19T16:09:23.8669439Z 
2024-02-19T16:09:23.8669717Z Reports::PeriodSupplyReportService
2024-02-19T16:09:23.8670308Z   #report
2024-02-19T16:09:24.0441965Z     should report zero values
2024-02-19T16:09:24.0442567Z     with values
2024-02-19T16:09:24.6720656Z       should report normal values
2024-02-19T16:09:24.6721356Z 
2024-02-19T16:09:24.6721718Z Question
2024-02-19T16:09:24.6723239Z   scope for_banks
2024-02-19T16:09:24.7027607Z     should filter out questions that aren't meant for banks
2024-02-19T16:09:24.7028279Z   punctuate
2024-02-19T16:09:24.7068815Z     should punctuate each string in a given array
2024-02-19T16:09:24.7069570Z   versioning
2024-02-19T16:09:24.7105713Z     is expected to be versioned
2024-02-19T16:09:24.7106108Z   validations
2024-02-19T16:09:24.7202381Z     question for_banks and for_partners attributes can't both be false
2024-02-19T16:09:24.7262043Z     is expected to validate that :answer cannot be empty/falsy
2024-02-19T16:09:24.7319598Z     is expected to validate that :title cannot be empty/falsy
2024-02-19T16:09:24.7320396Z   remove_redundant_error
2024-02-19T16:09:24.7360504Z     should return an array with only one error message related to the checkboxes.
2024-02-19T16:09:24.7361380Z   scope for_partners
2024-02-19T16:09:24.7589895Z     should filter out questions that aren't meant for partners
2024-02-19T16:09:24.7590635Z 
2024-02-19T16:09:24.7590806Z ProductDrive
2024-02-19T16:09:24.9080711Z   calculates donation quantity
2024-02-19T16:09:25.1451208Z   calculates and returns all donated organization item quantities by name and date
2024-02-19T16:09:25.3751993Z   calculates donation quantity by date
2024-02-19T16:09:25.5189999Z   calculates in-kind value
2024-02-19T16:09:25.5190585Z   distinct_items
2024-02-19T16:09:25.6949748Z     counts the distinct items correctly in overlapping donations
2024-02-19T16:09:25.8808934Z     doesn't double_count the items if there are two donations for the same item
2024-02-19T16:09:26.0594385Z     counts the distince items correctly by given date
2024-02-19T16:09:26.2353311Z 376537663767    counts the items correctly for 1 donation with multiple items
2024-02-19T16:09:26.2353973Z   versioning
2024-02-19T16:09:26.3900553Z     is expected to be versioned
2024-02-19T16:09:26.3901185Z   donation_source_view
2024-02-19T16:09:26.5320930Z     returns formatted text
2024-02-19T16:09:26.5321373Z   .search_date_range
2024-02-19T16:09:26.6775721Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-02-19T16:09:26.6776371Z   associations
2024-02-19T16:09:26.7683514Z     has_many product_drive_participants through donations
2024-02-19T16:09:26.8544522Z     has_many donations
2024-02-19T16:09:26.8545011Z   validations
2024-02-19T16:09:26.9956609Z     is expected not to be valid
2024-02-19T16:09:27.1382785Z     is expected not to be valid
2024-02-19T16:09:27.2796005Z     is expected not to be valid
2024-02-19T16:09:27.2796600Z   scopes
2024-02-19T16:09:27.2797359Z     .by_name
2024-02-19T16:09:27.4400836Z       does not return other_name
2024-02-19T16:09:27.5859783Z       returns the product_drive with name some_name
2024-02-19T16:09:27.5860492Z     .within_date_range
2024-02-19T16:09:27.7395768Z       does not include product drive 2
2024-02-19T16:09:27.8860617Z       returns the product drive 1
2024-02-19T16:09:27.8861581Z 
2024-02-19T16:09:27.8861916Z Manufacturer
2024-02-19T16:09:27.8863233Z   versioning
2024-02-19T16:09:27.8901609Z     is expected to be versioned
2024-02-19T16:09:27.8902093Z   Methods
2024-02-19T16:09:27.8902747Z     volume
2024-02-19T16:09:28.0303796Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-02-19T16:09:28.1701598Z       ignores the amount of product from other manufacturers
2024-02-19T16:09:28.2337617Z       retrieves the amount of product that has been donated by manufacturer
2024-02-19T16:09:28.2338489Z   Private Methods
2024-02-19T16:09:28.2338925Z     #exists_in_org?
2024-02-19T16:09:28.4073422Z       returns true if manufacturer exists in an organization
2024-02-19T16:09:28.4074201Z   Validations
2024-02-19T16:09:28.4172071Z     must have a unique name within organization
2024-02-19T16:09:28.5862114Z     must belong to an organization
2024-02-19T16:09:28.5862726Z 
2024-02-19T16:09:28.5862998Z ItemsInQuery
2024-02-19T16:09:28.5864068Z   items_in
2024-02-19T16:09:28.8658381Z     returns a collection with the fields name, item_id, quantity
2024-02-19T16:09:29.2101056Z     does not count negative adjustments towards in-flow
2024-02-19T16:09:29.4897876Z     includes donations, purchases, adjustments, transfers among sources
2024-02-19T16:09:29.8368121Z     does not count transfers going in the negative direction
2024-02-19T16:09:29.8369065Z 
2024-02-19T16:09:29.8369286Z PartnerFetchRequestableItemsService
2024-02-19T16:09:29.8369884Z   #call
2024-02-19T16:09:29.8371475Z     when the partner id does not match any Partner
2024-02-19T16:09:29.8417659Z       raise an error indiciating the partner does not exist
2024-02-19T16:09:29.8418454Z     when the partner is not in any partner group
2024-02-19T16:09:29.8676815Z       should return all active and visible items
2024-02-19T16:09:29.8677568Z     when the partner is in a partner group
2024-02-19T16:09:29.9164348Z       should return all active and visible items specified by the item associated with
2024-02-19T16:09:29.9165153Z 
2024-02-19T16:09:29.9165406Z Reports::WarehouseReportService
2024-02-19T16:09:29.9165922Z   #report
2024-02-19T16:09:30.2576489Z     should print unknown warehouse type
2024-02-19T16:09:30.4408333Z     should print unknown square footage
2024-02-19T16:09:30.7949771Z     should print normal values
2024-02-19T16:09:30.9733445Z     should print zero values
2024-02-19T16:09:30.9736641Z 
2024-02-19T16:09:30.9736955Z Exports::ExportReportCSVService
2024-02-19T16:09:30.9737988Z   .generate_csv_data
2024-02-19T16:09:30.9775161Z     creates CSV data including headers
2024-02-19T16:09:30.9809726Z     creates a CSV string
2024-02-19T16:09:30.9810819Z 
2024-02-19T16:09:30.9811090Z PartnerProfileUpdateService
2024-02-19T16:09:30.9811861Z   #call
2024-02-19T16:09:30.9813204Z     when served area client shares pre-exist
2024-02-19T16:09:30.9814005Z       and the new values are incorrect
2024-02-19T16:09:31.0136365Z         maintains the old values and returns failure
2024-02-19T16:09:31.0137061Z       and the new values are correct
2024-02-19T16:09:31.0137715Z         and there are errors on the profile
2024-02-19T16:09:31.0439562Z           maintains the old values and returns failure
2024-02-19T16:09:31.0440296Z         and there are no other errors
2024-02-19T16:09:31.0749584Z           replaces the old values and returns success
2024-02-19T16:09:31.0750721Z     when there are no pre-existing served areas
2024-02-19T16:09:31.0751395Z       and the new values are incorrect
2024-02-19T16:09:31.0945326Z 0
2024-02-19T16:09:31.0956057Z         does not store the new values and returns a failure
2024-02-19T16:09:31.0956592Z       and the new values are correct
2024-02-19T16:09:31.1174888Z         stores the new values and returns success
2024-02-19T16:09:31.1175463Z         and there are other errors in the profile
2024-02-19T16:09:31.1389974Z           does not store the new values and it returns a failure
2024-02-19T16:09:31.1392230Z 
2024-02-19T16:09:31.1392411Z Distribution
2024-02-19T16:09:31.1394131Z   behaves like itemizable
2024-02-19T16:09:31.1395042Z     .to_a
2024-02-19T16:09:31.1395996Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:09:31.1742835Z         calls line_item_values
2024-02-19T16:09:31.1743445Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:09:31.2079591Z         raises an error
2024-02-19T16:09:31.2080530Z     .line_items
2024-02-19T16:09:31.2081516Z       combine!
2024-02-19T16:09:31.2644866Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:09:31.3070884Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:09:31.3073820Z       quantities_by_name
2024-02-19T16:09:31.4022227Z         leaves out zero-quantitied items if requested
2024-02-19T16:09:31.4912537Z         returns a hash of items with id, name, and quantity
2024-02-19T16:09:31.4913275Z       sorted
2024-02-19T16:09:31.6120042Z         displays the items, sorted by name
2024-02-19T16:09:31.6120664Z       total
2024-02-19T16:09:31.6972378Z         has an item total
2024-02-19T16:09:31.6973050Z   Callbacks >
2024-02-19T16:09:31.7450143Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-19T16:09:31.7451067Z     #before_save
2024-02-19T16:09:31.7451483Z       #reset_shipping_cost
2024-02-19T16:09:31.7452369Z         when delivery_method is other then shipped
2024-02-19T16:09:31.7701851Z           distribution will be created successfully and the shipping_cost will be zero
2024-02-19T16:09:31.7702853Z   Methods >
2024-02-19T16:09:31.7703766Z     #future?
2024-02-19T16:09:31.7704790Z       when issued_at has not passed
2024-02-19T16:09:31.7949895Z         returns true
2024-02-19T16:09:31.7950376Z       when issued_at has passed
2024-02-19T16:09:31.8204534Z         returns false
2024-02-19T16:09:31.8205078Z     #distributed_at
2024-02-19T16:09:31.8455368Z       shows the hour and minutes if it has been provided
2024-02-19T16:09:31.8921303Z       displays explicit issued_at date
2024-02-19T16:09:31.8921883Z     #copy_from_request
2024-02-19T16:09:31.9144936Z       copy over relevant request information into the distrubution
2024-02-19T16:09:31.9145670Z     #copy_line_items
2024-02-19T16:09:31.9546783Z       replicates line_items from a donation into a distribution
2024-02-19T16:09:31.9547495Z     #combine_duplicates
2024-02-19T16:09:31.9938542Z       condenses duplicate line_items if the item_ids match
2024-02-19T16:09:31.9939228Z   CSV export >
2024-02-19T16:09:31.9939848Z     csv_export_attributes
2024-02-19T16:09:32.4127043Z       returns the set of attributes which define a row in case of distribution export
2024-02-19T16:09:32.4127686Z     for_csv_export >
2024-02-19T16:09:32.7533738Z       filters only to the given issue time range
2024-02-19T16:09:33.0889614Z       filters only to the given filter
2024-02-19T16:09:33.4170172Z       filters only to the given organization
2024-02-19T16:09:33.4170842Z   Validations >
2024-02-19T16:09:33.4330253Z     ensures the associated line_items are invalid with a nil quantity
2024-02-19T16:09:33.4378478Z     requires a storage location
2024-02-19T16:09:33.4434665Z     ensures that the issued at is no earlier than 2000
2024-02-19T16:09:33.4597611Z     ensures the associated line_items are invalid with a zero quantity
2024-02-19T16:09:33.4649817Z     requires a partner
2024-02-19T16:09:33.4699497Z     must belong to an organization
2024-02-19T16:09:33.4732709Z     ensures that any included items are found in the associated storage location
2024-02-19T16:09:33.5133499Z     ensures the associated line_items are valid
2024-02-19T16:09:33.5134230Z     when delivery method is other then shipped
2024-02-19T16:09:33.5391102Z       allows to save distribution
2024-02-19T16:09:33.5391698Z     when delivery method is shipped
2024-02-19T16:09:33.5392285Z       shipping cost is negative
2024-02-19T16:09:33.5450571Z         will not allow to save distribution
2024-02-19T16:09:33.5451254Z       shipping cost is none negative
2024-02-19T16:09:33.5702224Z         allows to save distribution
2024-02-19T16:09:33.5703305Z   Scopes >
2024-02-19T16:09:33.5703679Z     by_location >
2024-02-19T16:09:33.6180217Z       only returns distributions with given location id
2024-02-19T16:09:33.6180929Z     this_week >
2024-02-19T16:09:33.6181664Z       When it's Sunday (end of the week)
2024-02-19T16:09:33.6645660Z         doesn't include distributions past Sunday
2024-02-19T16:09:33.6646455Z       When it's Tuesday (mid-week)
2024-02-19T16:09:33.7326243Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-02-19T16:09:33.7327129Z     by_partner >
2024-02-19T16:09:33.7864410Z       only returns distributions with given partner id
2024-02-19T16:09:33.7865126Z     by_item_id >
2024-02-19T16:09:33.9183717Z       only returns distributions with given item id
2024-02-19T16:09:33.9184185Z     during >
2024-02-19T16:09:33.9913590Z       returns all distributions created between two dates
2024-02-19T16:09:33.9914329Z   versioning
2024-02-19T16:09:33.9950901Z     is expected to be versioned
2024-02-19T16:09:33.9954572Z 
2024-02-19T16:09:33.9954892Z RemoveRoleService
2024-02-19T16:09:33.9955502Z   #call
2024-02-19T16:09:33.9956774Z     when the role does not exist
2024-02-19T16:09:34.1815119Z       should raise an error
2024-02-19T16:09:34.1815799Z     when not enough information provided
2024-02-19T16:09:34.3702052Z       should raise an error
2024-02-19T16:09:34.3702663Z     when the role exists
2024-02-19T16:09:34.5679563Z       should remove the role
2024-02-19T16:09:34.7727348Z       should remove the admin role when removing user role
2024-02-19T16:09:34.9639684Z       should work with a type and ID instead of role ID
2024-02-19T16:09:34.9640371Z 
2024-02-19T16:09:34.9640721Z DeallocateKitInventoryService
2024-02-19T16:09:34.9641821Z   #deallocate
2024-02-19T16:09:34.9642649Z     when inventory items are available
2024-02-19T16:09:34.9644435Z       when decrease_by is greater then kit's quantity in inventory_in
2024-02-19T16:09:35.2603324Z         raises error about inconsistent inventory in or out
2024-02-19T16:09:35.2604570Z       when decrease_by is less then kit's quantity in inventory_in
2024-02-19T16:09:35.6040159Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-02-19T16:09:35.6041013Z       when kit_allocation not exist for inventory_in or inventory_out
2024-02-19T16:09:35.8904259Z         raises error about KitAllocation not found
2024-02-19T16:09:35.8905442Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-02-19T16:09:36.2252861Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-02-19T16:09:36.2254068Z   #error
2024-02-19T16:09:36.2254763Z     when the storage location organization doesn't match
2024-02-19T16:09:36.4555038Z       returns error
2024-02-19T16:09:36.4556334Z 
2024-02-19T16:09:36.4556501Z ItemsController
2024-02-19T16:09:36.4557635Z   While signed in
2024-02-19T16:09:36.4559801Z     GET #show
2024-02-19T16:09:36.4774316Z       returns http success
2024-02-19T16:09:36.4774853Z     GET #new
2024-02-19T16:09:36.4902866Z       returns http success
2024-02-19T16:09:36.4903554Z     PATCH #remove_category
2024-02-19T16:09:36.6810342Z       should remove an item's category
2024-02-19T16:09:36.8755823Z       should redirect to the previous category page
2024-02-19T16:09:36.8756558Z     DELETE #destroy
2024-02-19T16:09:36.8994972Z       redirects to #index
2024-02-19T16:09:36.8995532Z     GET #index
2024-02-19T16:09:36.9165812Z       returns http success
2024-02-19T16:09:36.9166428Z     PATCH #restore
2024-02-19T16:09:36.9167295Z       with a soft-deleted item
2024-02-19T16:09:36.9379480Z         re-activates the item
2024-02-19T16:09:36.9380034Z       with another organizations item
2024-02-19T16:09:37.1201641Z         does nothing
2024-02-19T16:09:37.1202219Z       with an active item
2024-02-19T16:09:37.1411261Z         does nothing
2024-02-19T16:09:37.1411760Z     PUT #update
2024-02-19T16:09:37.1412777Z       visible
2024-02-19T16:09:37.1615099Z         should update visible_to_partners to true
2024-02-19T16:09:37.1615718Z       invisible
2024-02-19T16:09:37.1809396Z         should update visible_to_partners to false
2024-02-19T16:09:37.1810011Z     POST #create
2024-02-19T16:09:37.1810920Z       with invalid params
2024-02-19T16:09:37.1948140Z         should show an error
2024-02-19T16:09:37.1948792Z       with valid params
2024-02-19T16:09:37.2125892Z         should redirect to the item page
2024-02-19T16:09:37.2314910Z         should create an item
2024-02-19T16:09:37.2487728Z         should accept params with dollar signs, periods, and commas
2024-02-19T16:09:37.2488499Z     Looking at a different organization
2024-02-19T16:09:37.4331829Z       redirects the user to the sign-in page for CRUD actions
2024-02-19T16:09:37.4332615Z     GET #edit
2024-02-19T16:09:37.4511341Z       returns http success
2024-02-19T16:09:37.4511919Z   While not signed in
2024-02-19T16:09:37.4601896Z     redirects the user to the sign-in page for CRUD actions
2024-02-19T16:09:37.4604848Z 
2024-02-19T16:09:37.4605115Z ItemsOutQuery
2024-02-19T16:09:37.4605975Z   items_out_query
2024-02-19T16:09:37.5769164Z     includes distributions, adjustments, transfers among sources
2024-02-19T16:09:37.6959873Z     returns a collection with the fields name, item_id, quantity
2024-02-19T16:09:37.6960960Z 
2024-02-19T16:09:37.6961205Z Partners::RequestApprovalService
2024-02-19T16:09:37.6961753Z   #call
2024-02-19T16:09:37.6963714Z     when the partner is not yet waiting for approval and there is a profile error
2024-02-19T16:09:37.7252578Z       should return an error re social media
2024-02-19T16:09:37.7254221Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-02-19T16:09:37.7255222Z     when the partner is not yet awaiting approval
2024-02-19T16:09:37.7553802Z       should set the status on the partner record to awaiting_review
2024-02-19T16:09:37.7843732Z       should send an email notification to the partner's organization
2024-02-19T16:09:37.7844887Z     when the partner is not yet waiting for approval and there is no profile error
2024-02-19T16:09:37.8133306Z       does not have an error
2024-02-19T16:09:37.8134002Z     when the partner is already awaiting approval
2024-02-19T16:09:37.8398834Z       should return an error saying it the partner is already requested approval
2024-02-19T16:09:37.8400496Z 
2024-02-19T16:09:37.8400783Z StorageLocation
2024-02-19T16:09:37.8402475Z   Callbacks >
2024-02-19T16:09:37.8403194Z     before_destroy
2024-02-19T16:09:37.9041552Z       deletes storage locations with no inventory items on it
2024-02-19T16:09:37.9435967Z       does not delete storage locations with inventory items on it
2024-02-19T16:09:37.9436763Z   Validations >
2024-02-19T16:09:37.9503088Z     is expected to validate that :name cannot be empty/falsy
2024-02-19T16:09:37.9560170Z     is expected to validate that :organization cannot be empty/falsy
2024-02-19T16:09:37.9620806Z     is expected to validate that :address cannot be empty/falsy
2024-02-19T16:09:37.9621599Z   versioning
2024-02-19T16:09:37.9658014Z     is expected to be versioned
2024-02-19T16:09:37.9658561Z   Methods >
2024-02-19T16:09:37.9660627Z     geocode
2024-02-19T16:09:37.9771726Z       adds coordinates to the database
2024-02-19T16:09:37.9772384Z     increase_inventory
2024-02-19T16:09:37.9773128Z       when increasing with an inactive item
2024-02-19T16:09:38.0921005Z         re-activates the item as part of the creation process
2024-02-19T16:09:38.0921898Z       when providing a new item that does not yet exist
2024-02-19T16:09:38.2052855Z         creates those new inventory items in the storage location
2024-02-19T16:09:38.2053441Z       With existing inventory
2024-02-19T16:09:38.3240027Z         increases inventory quantities from an itemizable object
2024-02-19T16:09:38.3240814Z     inventory_total_value_in_dollars
2024-02-19T16:09:38.3370914Z       returns 0 when there are no items in this storage location
2024-02-19T16:09:38.3784547Z       returns a value including cents if the total isn't an even dollar amount
2024-02-19T16:09:38.4311104Z       returns total value of all items in this storage location
2024-02-19T16:09:38.4311882Z     decrease_inventory
2024-02-19T16:09:38.5431755Z       decreases inventory quantities from an itemizable object
2024-02-19T16:09:38.5432673Z       when there is insufficient inventory available
2024-02-19T16:09:38.5518048Z         does not change inventory quantities if there is an error
2024-02-19T16:09:38.5596084Z         gives informative errors
2024-02-19T16:09:38.5596659Z     csv_export_attributes
2024-02-19T16:09:38.6222236Z       returns an array of storage location attributes, followed by inventory item quantities that are sorted by alphabetized item names
2024-02-19T16:09:38.6223134Z     size
2024-02-19T16:09:38.6669812Z       returns total quantity of all items in this storage location
2024-02-19T16:09:38.6670594Z     import_inventory
2024-02-19T16:09:39.0282714Z       imports storage locations from a csv file
2024-02-19T16:09:39.0283381Z     import_csv
2024-02-19T16:09:39.0401343Z       imports storage locations from a csv file
2024-02-19T16:09:39.0402006Z     item_total
2024-02-19T16:09:39.0777445Z       retrieves the total for a single item
2024-02-19T16:09:39.0778201Z     StorageLocation.items_inventoried
2024-02-19T16:09:39.1553536Z       returns a collection of items that are stored within inventories
2024-02-19T16:09:39.1554380Z   Filtering >
2024-02-19T16:09:39.1637969Z     ->active_locations yields only storage locations that haven't been discarded
2024-02-19T16:09:39.2327142Z     ->containing yields only inventories that have that item
2024-02-19T16:09:39.2327846Z 
2024-02-19T16:09:39.2328019Z Deadlinable
2024-02-19T16:09:39.2328447Z   validations
2024-02-19T16:09:39.2380268Z     validates that reminder day is not the same as deadline day
2024-02-19T16:09:39.2464681Z     is expected to validate that :deadline_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-19T16:09:39.2536290Z     is expected to validate that :reminder_day looks like an integer greater than or equal to 1 and less than or equal to 28 as long as it is not nil
2024-02-19T16:09:39.2537691Z 
2024-02-19T16:09:39.2537904Z Partners::ItemRequest
2024-02-19T16:09:39.2538332Z   versioning
2024-02-19T16:09:39.2573534Z     is expected to be versioned
2024-02-19T16:09:39.2574113Z   validations
2024-02-19T16:09:39.2633545Z     is expected to validate that :name cannot be empty/falsy
2024-02-19T16:09:39.2691419Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-02-19T16:09:39.2751661Z     is expected to validate that :quantity cannot be empty/falsy
2024-02-19T16:09:39.2810036Z     is expected to validate that :partner_key cannot be empty/falsy
2024-02-19T16:09:39.2810937Z   associations
2024-02-19T16:09:39.2845733Z     is expected to have many child_item_requests dependent => destroy
2024-02-19T16:09:39.2881588Z     is expected to have many children through child_item_requests
2024-02-19T16:09:39.2923646Z     is expected to belong to request class_name => ::Request required: true
2024-02-19T16:09:39.2924305Z 
2024-02-19T16:09:39.2924496Z Exports::ExportDonationsCSVService
2024-02-19T16:09:39.2925340Z   #generate_csv_data
2024-02-19T16:09:39.3053072Z     should match the expected content for the csv (FAILED - 1)
2024-02-19T16:09:39.3053690Z 
2024-02-19T16:09:39.3053874Z KitCreateService
2024-02-19T16:09:39.3054527Z   #call
2024-02-19T16:09:39.5013206Z     should return an the instance
2024-02-19T16:09:39.5013903Z     when the parameters provided are invalid
2024-02-19T16:09:39.5014725Z       because the organization_id does not match any Organization
2024-02-19T16:09:39.5073798Z         should have an error on organization_id saying it does not match any Organization
2024-02-19T16:09:39.5074848Z       because the kit_params is invalid for kit creation
2024-02-19T16:09:39.6869394Z         should have errors saying why the kit_params are invalid
2024-02-19T16:09:39.6870571Z     when the parameters are valid
2024-02-19T16:09:39.8817607Z       should create a new Item
2024-02-19T16:09:40.0804514Z       should create the new Item associated with the Kit
2024-02-19T16:09:40.2746940Z       should create a new Kit
2024-02-19T16:09:40.2747544Z       but the ItemCreationService is unsuccesful
2024-02-19T16:09:40.4709495Z         should not create a Item
2024-02-19T16:09:40.6623663Z         should not create the Kit
2024-02-19T16:09:40.8530712Z         should have an error that includes the error
2024-02-19T16:09:40.8531435Z       but an unexpected error gets raised
2024-02-19T16:09:41.0432007Z         should have an error that includes the raised error
2024-02-19T16:09:41.2389177Z         should not create a Item
2024-02-19T16:09:41.4359427Z         should not create the Kit
2024-02-19T16:09:41.5327358Z W, [2024-02-19T08:09:41.532382 #2363]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-19T16:09:41.5329407Z W, [2024-02-19T08:09:41.532455 #2363]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:09:41.5332054Z W, [2024-02-19T08:09:41.532475 #2363]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:09:41.5336054Z W, [2024-02-19T08:09:41.532516 #2363]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-19T16:09:41.5337304Z 
2024-02-19T16:09:41.5337965Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-02-19T16:09:41.5338807Z 
2024-02-19T16:09:41.5340149Z   1) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-02-19T16:09:41.5341584Z      # Temporarily skipped with xit
2024-02-19T16:09:41.5342299Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-02-19T16:09:41.5445566Z 
2024-02-19T16:09:41.5445763Z Failures:
2024-02-19T16:09:41.5446022Z 
2024-02-19T16:09:41.5447816Z   1) Exports::ExportDonationsCSVService#generate_csv_data should match the expected content for the csv
2024-02-19T16:09:41.5449086Z      Failure/Error:
2024-02-19T16:09:41.5449666Z        FactoryBot.create(
2024-02-19T16:09:41.5450336Z          :item, name: Faker::Appliance.equipment
2024-02-19T16:09:41.5451071Z        ),
2024-02-19T16:09:41.5451338Z 
2024-02-19T16:09:41.5451578Z      ActiveRecord::RecordInvalid:
2024-02-19T16:09:41.5452343Z        Validation failed: Name has already been taken
2024-02-19T16:09:41.5453758Z      # ./spec/services/exports/export_donations_csv_service_spec.rb:15:in `block (3 levels) in <top (required)>'
2024-02-19T16:09:41.5455685Z      # ./spec/services/exports/export_donations_csv_service_spec.rb:35:in `block (3 levels) in <top (required)>'
2024-02-19T16:09:41.5457345Z      # ./spec/services/exports/export_donations_csv_service_spec.rb:4:in `block (3 levels) in <top (required)>'
2024-02-19T16:09:41.5459008Z      # ./spec/services/exports/export_donations_csv_service_spec.rb:3:in `block (3 levels) in <top (required)>'
2024-02-19T16:09:41.5460668Z      # ./spec/services/exports/export_donations_csv_service_spec.rb:86:in `block (3 levels) in <top (required)>'
2024-02-19T16:09:41.5470735Z 
2024-02-19T16:09:41.5471139Z Finished in 56.52 seconds (files took 8.67 seconds to load)
2024-02-19T16:09:41.5471886Z 576 examples, 1 failure, 1 pending
2024-02-19T16:09:41.5472280Z 
2024-02-19T16:09:41.5472619Z Failed examples:
2024-02-19T16:09:41.5472874Z 
2024-02-19T16:09:41.5474048Z rspec ./spec/services/exports/export_donations_csv_service_spec.rb:85 # Exports::ExportDonationsCSVService#generate_csv_data should match the expected content for the csv
2024-02-19T16:09:41.5475255Z 
2024-02-19T16:09:41.5475438Z Randomized with seed 10443
2024-02-19T16:09:41.5475751Z 
2024-02-19T16:09:41.8486211Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-19T16:09:41.8488283Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3947 / 6405 LOC (61.62%) covered.
2024-02-19T16:09:41.9283190Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/account_request_spec.rb" "spec/models/audit_spec.rb" "spec/models/base_item_spec.rb" "spec/models/concerns/deadlinable_spec.rb" "spec/models/distribution_spec.rb" "spec/models/donation_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/item_spec.rb" "spec/models/kit_spec.rb" "spec/models/manufacturer_spec.rb" "spec/models/organization_spec.rb" "spec/models/partner_group_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/models/partners/served_area_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/question_spec.rb" "spec/models/request_spec.rb" "spec/models/storage_location_spec.rb" "spec/models/user_spec.rb" "spec/models/vendor_spec.rb" "spec/controllers/admins_controller_spec.rb" "spec/controllers/distributions_controller_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/events/event_differ_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/jobs/historical_data_cache_job_spec.rb" "spec/jobs/partner_mailer_job_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/mailers/request_mailer_spec.rb" "spec/mailers/user_mailer_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_out_query_spec.rb" "spec/routing/account_requests_routing_spec.rb" "spec/services/adjustment_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/distribution_create_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/services/donation_create_service_spec.rb" "spec/services/donation_itemized_breakdown_service_spec.rb" "spec/services/exports/export_donations_csv_service_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" "spec/services/historical_trend_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/services/partner_profile_update_service_spec.rb" "spec/services/partners/family_request_create_service_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/services/remove_role_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/other_products_report_service_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/reports/warehouse_report_service_spec.rb" "spec/services/requests_total_items_service_spec.rb" "spec/services/sync_ndbn_members_spec.rb" "spec/services/transfer_destroy_service_spec.rb" failed
2024-02-19T16:09:42.3093693Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-02-19T16:09:42.3095222Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
2024-02-19T16:09:42.3417679Z ##[error]Process completed with exit code 1.
