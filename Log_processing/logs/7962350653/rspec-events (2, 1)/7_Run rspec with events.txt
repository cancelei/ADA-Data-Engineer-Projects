2024-02-19T16:08:30.8251068Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-19T16:08:30.8251947Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-19T16:08:30.8279870Z shell: /usr/bin/bash -e {0}
2024-02-19T16:08:30.8280223Z env:
2024-02-19T16:08:30.8280653Z   POSTGRES_HOST: localhost
2024-02-19T16:08:30.8281040Z   DATABASE_HOST: localhost
2024-02-19T16:08:30.8281426Z   PG_USERNAME: postgres
2024-02-19T16:08:30.8281824Z   PG_PASSWORD: password
2024-02-19T16:08:30.8282194Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-19T16:08:30.8282617Z   POSTGRES_PORT: 5432
2024-02-19T16:08:30.8283030Z   PGHOST: localhost
2024-02-19T16:08:30.8283362Z   PGUSER: postgres
2024-02-19T16:08:30.8283670Z   RAILS_ENV: test
2024-02-19T16:08:30.8284096Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-19T16:08:30.8284527Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-02-19T16:08:30.8284938Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-02-19T16:08:30.8285447Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-19T16:08:30.8285981Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-19T16:08:30.8286991Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-19T16:08:30.8287916Z   EVENTS_READ: true
2024-02-19T16:08:30.8288245Z ##[endgroup]
2024-02-19T16:08:36.4929761Z W, [2024-02-19T16:08:36.492668 #2227]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-19T16:08:36.4931252Z W, [2024-02-19T16:08:36.492720 #2227]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:08:36.4933308Z W, [2024-02-19T16:08:36.492743 #2227]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:08:36.4938538Z W, [2024-02-19T16:08:36.492778 #2227]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-19T16:08:39.0801370Z W, [2024-02-19T16:08:39.079874 #2227]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-19T16:08:39.0802724Z W, [2024-02-19T16:08:39.079915 #2227]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:08:39.0804106Z W, [2024-02-19T16:08:39.079929 #2227]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:08:39.0806231Z W, [2024-02-19T16:08:39.079962 #2227]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-19T16:08:39.0873139Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/models/adjustment_spec.rb" "spec/models/barcode_item_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/county_spec.rb" "spec/models/donation_site_spec.rb" "spec/models/event_spec.rb" "spec/models/item_category_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/models/line_item_spec.rb" "spec/models/ndbn_member_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/partner_spec.rb" "spec/models/partners/child_item_request_spec.rb" "spec/models/partners/family_spec.rb" "spec/models/partners/profile_spec.rb" "spec/models/product_drive_participant_spec.rb" "spec/models/purchase_spec.rb" "spec/models/request_item_spec.rb" "spec/models/role_spec.rb" "spec/models/transfer_spec.rb" "spec/models/users_role_spec.rb" "spec/models/view/inventory_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/events/inventory_aggregate_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/helpers/ui_helper_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/jobs/reminder_deadline_job_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/mailers/requests_confirmation_mailer_spec.rb" "spec/pdfs/distribution_pdf_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/queries/items_out_total_query_spec.rb" "spec/services/add_role_service_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deadline_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/services/distribution_destroy_service_spec.rb" "spec/services/distribution_reminder_spec.rb" "spec/services/distributions_by_county_report_service_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/services/exports/export_distributions_csv_service_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/services/exports/export_request_service_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/services/partner_create_service_spec.rb" "spec/services/partner_invite_service_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/reports/summary_report_service_spec.rb" "spec/services/request_destroy_service_spec.rb" "spec/services/service_object_errors_mixin_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/user_invite_service_spec.rb"
2024-02-19T16:08:47.7301564Z 
2024-02-19T16:08:47.7302183Z Randomized with seed 8669
2024-02-19T16:08:48.5819351Z 
2024-02-19T16:08:48.5820095Z Event
2024-02-19T16:08:48.5821035Z   #most_recent_snapshot
2024-02-19T16:08:48.8564519Z     should not include an unusable snapshot
2024-02-19T16:08:49.0948781Z     should include the last usable snapshot
2024-02-19T16:08:49.0949683Z 
2024-02-19T16:08:49.0950078Z ProfileUpdateService
2024-02-19T16:08:49.0950985Z   #update
2024-02-19T16:08:49.1235250Z     updates the profile with the filtered and prepared params
2024-02-19T16:08:49.1235948Z 
2024-02-19T16:08:49.1236439Z ReminderDeadlineJob
2024-02-19T16:08:49.1237001Z   #perform
2024-02-19T16:08:49.1475289Z     should queue up reminder deadline emails for all partners that should be reminded
2024-02-19T16:08:49.1476347Z 
2024-02-19T16:08:49.1476559Z Adjustment
2024-02-19T16:08:49.1477757Z   behaves like itemizable
2024-02-19T16:08:49.1478972Z     .to_a
2024-02-19T16:08:49.1480072Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:08:49.2068303Z         calls line_item_values
2024-02-19T16:08:49.2068894Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:08:49.2439603Z         raises an error
2024-02-19T16:08:49.2440276Z     .line_items
2024-02-19T16:08:49.2441441Z       sorted
2024-02-19T16:08:49.3059982Z         displays the items, sorted by name
2024-02-19T16:08:49.3060811Z       quantities_by_name
2024-02-19T16:08:49.3471791Z         leaves out zero-quantitied items if requested
2024-02-19T16:08:49.3865379Z         returns a hash of items with id, name, and quantity
2024-02-19T16:08:49.3866513Z       combine!
2024-02-19T16:08:49.4271638Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:08:49.4729500Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:08:49.4730359Z       total
2024-02-19T16:08:49.5391048Z         has an item total
2024-02-19T16:08:49.5391783Z   nested line item attributes
2024-02-19T16:08:49.5852767Z     accepts them
2024-02-19T16:08:49.5853446Z   Methods >
2024-02-19T16:08:49.7866873Z     `self.storage_locations_adjusted_for` returns only storage_locations that are used in adjustments for one org
2024-02-19T16:08:49.7868180Z     split_difference
2024-02-19T16:08:49.8653658Z       returns two adjustment objects
2024-02-19T16:08:49.9452771Z       gracefully handles adjustments with only positive
2024-02-19T16:08:50.0228811Z       gracefully handles adjustments with only negative
2024-02-19T16:08:50.0229484Z   versioning
2024-02-19T16:08:50.0267579Z     is expected to be versioned
2024-02-19T16:08:50.0268406Z   Scopes >
2024-02-19T16:08:50.0431625Z     `at_location` can filter out adjustments to a specific location
2024-02-19T16:08:50.0591162Z     `by_user` can filter out adjustments to a specific user
2024-02-19T16:08:50.0592251Z   Validations >
2024-02-19T16:08:50.1021869Z     allows you to remove all the inventory that exists in the storage location
2024-02-19T16:08:50.1195839Z     allows you to add inventory that doesn't yet exist in the storage location
2024-02-19T16:08:50.1283958Z     must belong to an organization
2024-02-19T16:08:50.1284981Z 
2024-02-19T16:08:50.1285899Z ReminderDeadlineMailer
2024-02-19T16:08:50.1286317Z   notify deadline
2024-02-19T16:08:50.1631242Z     renders the subject
2024-02-19T16:08:50.1955753Z     renders the body
2024-02-19T16:08:50.2258683Z     renders the sender email
2024-02-19T16:08:50.2562540Z     renders the receiver email
2024-02-19T16:08:50.2563503Z 
2024-02-19T16:08:50.2563803Z UsersRole
2024-02-19T16:08:50.2564420Z   versioning
2024-02-19T16:08:50.2615003Z     is expected to be versioned
2024-02-19T16:08:50.2616009Z   #current_role_for
2024-02-19T16:08:50.2616678Z     for org user
2024-02-19T16:08:50.2751244Z       should return org user
2024-02-19T16:08:50.2751927Z     for org admin
2024-02-19T16:08:50.2950060Z       should return org admin
2024-02-19T16:08:50.2950735Z     for super admin
2024-02-19T16:08:50.3110182Z       should return super admin
2024-02-19T16:08:50.3110774Z     for partner user
2024-02-19T16:08:50.3242345Z       should return partner user
2024-02-19T16:08:50.3243221Z 
2024-02-19T16:08:50.3243491Z Partners::ChildItemRequest
2024-02-19T16:08:50.3244867Z   #ordered_item_diaperid
2024-02-19T16:08:50.3365928Z     should return the item_id on the item_request
2024-02-19T16:08:50.3366936Z   associations
2024-02-19T16:08:50.3417239Z     is expected to belong to item_request required: true
2024-02-19T16:08:50.3455945Z     is expected to belong to child required: true
2024-02-19T16:08:50.3490863Z     is expected to belong to authorized_family_member optional: true
2024-02-19T16:08:50.3491515Z   #quantity
2024-02-19T16:08:50.3530187Z     should return the quantity divided by the number of children
2024-02-19T16:08:50.3530887Z   versioning
2024-02-19T16:08:50.3563640Z     is expected to be versioned
2024-02-19T16:08:50.3564066Z 
2024-02-19T16:08:50.3564533Z PartnerInviteService
2024-02-19T16:08:50.3875734Z   should update the status of the partner to invited
2024-02-19T16:08:50.4166962Z   should create invite
2024-02-19T16:08:50.4167655Z   with force: true
2024-02-19T16:08:50.4459968Z     should send the force setting forward
2024-02-19T16:08:50.4460741Z 
2024-02-19T16:08:50.4460994Z ItemizableUpdateService
2024-02-19T16:08:50.4462120Z   increases
2024-02-19T16:08:50.6037669Z     should update quantity in different locations
2024-02-19T16:08:50.7504239Z     should update quantity in same storage location
2024-02-19T16:08:50.7504810Z   decreases
2024-02-19T16:08:50.8929704Z     should update quantity in different locations
2024-02-19T16:08:51.0326736Z     should update quantity in same storage location
2024-02-19T16:08:51.0327404Z 
2024-02-19T16:08:51.0327636Z ItemsOutTotalQuery
2024-02-19T16:08:51.0328520Z   items_out_total_query
2024-02-19T16:08:51.1716849Z     returns a sum total of all out-flows
2024-02-19T16:08:51.1717549Z 
2024-02-19T16:08:51.1717730Z HistoricalTrendsHelper
2024-02-19T16:08:51.1718557Z   #last_12_months
2024-02-19T16:08:51.1790184Z     returns the last 12 months starting from July when the current month is June
2024-02-19T16:08:51.1837063Z     returns the last 12 months starting from Jan when the current month is Dec
2024-02-19T16:08:51.1879560Z     returns the last 12 months starting from Feb when the current month is Jan
2024-02-19T16:08:51.1880351Z 
2024-02-19T16:08:51.1880759Z Exports::ExportRequestService
2024-02-19T16:08:51.1881691Z   .generate_csv_data
2024-02-19T16:08:51.4015169Z     includes headers as the first row with ordered item names alphabetically with deleted item included at the end
2024-02-19T16:08:51.6010808Z     includes rows for each request with correct columns of item quantity
2024-02-19T16:08:51.6011700Z 
2024-02-19T16:08:51.6011915Z ItemCategory
2024-02-19T16:08:51.6012405Z   assocations
2024-02-19T16:08:51.6099785Z     is expected to have many items
2024-02-19T16:08:51.6156473Z     is expected to belong to organization required: true
2024-02-19T16:08:51.6217538Z     is expected to have and belong to many partner_groups
2024-02-19T16:08:51.6218461Z   versioning
2024-02-19T16:08:51.6252546Z     is expected to be versioned
2024-02-19T16:08:51.6253401Z   validations
2024-02-19T16:08:51.6460979Z     is expected to validate that :name is case-sensitively unique within the scope of :organization_id
2024-02-19T16:08:51.6538492Z     is expected to validate that :organization cannot be empty/falsy
2024-02-19T16:08:51.6611599Z     is expected to validate that the length of :description is at most 250
2024-02-19T16:08:51.6699586Z     is expected to validate that :name cannot be empty/falsy
2024-02-19T16:08:51.6700333Z 
2024-02-19T16:08:51.6700918Z Reports::PartnerInfoReportService
2024-02-19T16:08:51.6701699Z   #report
2024-02-19T16:08:51.8410841Z     should report zero values
2024-02-19T16:08:52.0802005Z     should report normal values
2024-02-19T16:08:52.0802569Z 
2024-02-19T16:08:52.0802884Z Reports::AcquisitionReportService
2024-02-19T16:08:52.0803627Z   acquisition report
2024-02-19T16:08:53.0176031Z     should return the proper results on #report
2024-02-19T16:08:53.0176604Z 
2024-02-19T16:08:53.0177139Z ServiceObjectErrorsMixin
2024-02-19T16:08:53.0177781Z   self.included
2024-02-19T16:08:53.0231226Z     should add class methods to the class that include ServiceObjectErrorsMixin
2024-02-19T16:08:53.0232270Z 
2024-02-19T16:08:53.0232700Z OrganizationMailer
2024-02-19T16:08:53.0233442Z   #partner_approval_request
2024-02-19T16:08:53.0502823Z     renders the body with correct text with partner information
2024-02-19T16:08:53.0750977Z     should be sent to the partner main email with the correct subject line
2024-02-19T16:08:53.1002857Z     includes a link to the relevant partner
2024-02-19T16:08:53.1003742Z 
2024-02-19T16:08:53.1004089Z LineItem
2024-02-19T16:08:53.1005707Z   Validations >
2024-02-19T16:08:53.1109049Z     requires an item
2024-02-19T16:08:53.2051462Z     the quantity must be a valid integer and cannot be 0
2024-02-19T16:08:53.2187502Z     requires a quantity
2024-02-19T16:08:53.2188049Z   Methods >
2024-02-19T16:08:53.2189087Z     item packages
2024-02-19T16:08:53.2189954Z       #package_count
2024-02-19T16:08:53.2190952Z         does not have packages
2024-02-19T16:08:53.2322813Z           is expected to be falsy
2024-02-19T16:08:53.2323541Z         has packages
2024-02-19T16:08:53.2500953Z           is expected to eq "1"
2024-02-19T16:08:53.2501818Z       #has_packages
2024-02-19T16:08:53.2502599Z         item has package size
2024-02-19T16:08:53.2683018Z           is expected to be truthy
2024-02-19T16:08:53.2684062Z         item has no package size
2024-02-19T16:08:53.2821456Z           is expected to be falsy
2024-02-19T16:08:53.2822517Z     #value_per_line_item
2024-02-19T16:08:53.2823348Z       item has value and quantity
2024-02-19T16:08:53.3005857Z         is expected to eq 25
2024-02-19T16:08:53.3007081Z       item has no value
2024-02-19T16:08:53.3146567Z         is expected to eq 0
2024-02-19T16:08:53.3147655Z   versioning
2024-02-19T16:08:53.3186600Z     is expected to be versioned
2024-02-19T16:08:53.3187355Z   package_count
2024-02-19T16:08:53.3393745Z     is nil if there is no package_size
2024-02-19T16:08:53.3584616Z     is equal to the quanity divided by the package_size
2024-02-19T16:08:53.3585493Z   Scopes >
2024-02-19T16:08:53.3586358Z     ->active
2024-02-19T16:08:53.3932669Z       retrieves only those with active status
2024-02-19T16:08:53.3933321Z 
2024-02-19T16:08:53.3933701Z Partners::Profile
2024-02-19T16:08:53.3974756Z   must allow deleting served_areas
2024-02-19T16:08:53.3975402Z   client share behaviour
2024-02-19T16:08:53.3976136Z     multiple
2024-02-19T16:08:53.4222081Z       is valid if client share sum is 100
2024-02-19T16:08:53.4384892Z       sums the client shares
2024-02-19T16:08:53.4386213Z     no served areas
2024-02-19T16:08:53.4439116Z       has 0 client share
2024-02-19T16:08:53.4439777Z   associations
2024-02-19T16:08:53.4482765Z     is expected to have a has_one_attached called proof_of_form_990
2024-02-19T16:08:53.4518550Z     is expected to have many served_areas
2024-02-19T16:08:53.4556046Z     is expected to have a has_one_attached called proof_of_partner_status
2024-02-19T16:08:53.4595556Z     is expected to have a has_many_attached called documents
2024-02-19T16:08:53.4596490Z   request settings validation for profile
2024-02-19T16:08:53.4597299Z     at least one request type is set to true
2024-02-19T16:08:53.4669150Z       should be valid when enable_child_based_requests is true
2024-02-19T16:08:53.4739077Z       should be valid when enable_quantity_based_requests is true
2024-02-19T16:08:53.4807788Z       should be valid when enable_individual_requests is true
2024-02-19T16:08:53.4809273Z     no settings are set to true
2024-02-19T16:08:53.4857806Z       should not be valid
2024-02-19T16:08:53.4858941Z   social media info validation for profile
2024-02-19T16:08:53.4860312Z     no social media presence and the checkbox isn't checked
2024-02-19T16:08:53.4916498Z       should not be valid
2024-02-19T16:08:53.5017390Z       should be valid if media_information is not needed
2024-02-19T16:08:53.5018469Z     no social media presence and the checkbox is checked
2024-02-19T16:08:53.5080639Z       should be valid
2024-02-19T16:08:53.5081696Z     has social media presence and the checkbox is unchecked
2024-02-19T16:08:53.5161612Z       with just twitter it should be valid
2024-02-19T16:08:53.5239303Z       with just a website it should be valid
2024-02-19T16:08:53.5312901Z       with every social media option it should be valid
2024-02-19T16:08:53.5383283Z       with just facebook it should be valid
2024-02-19T16:08:53.5454029Z       with just instagram it should be valid
2024-02-19T16:08:53.5454881Z   versioning
2024-02-19T16:08:53.5492943Z     is expected to be versioned
2024-02-19T16:08:53.5493829Z 
2024-02-19T16:08:53.5494366Z InventoryCheckService
2024-02-19T16:08:53.5495992Z   call
2024-02-19T16:08:53.5496526Z     error
2024-02-19T16:08:53.6269979Z       should set the error
2024-02-19T16:08:53.6270866Z     alert
2024-02-19T16:08:53.7001855Z       should set the alert
2024-02-19T16:08:53.7002413Z 
2024-02-19T16:08:53.7002711Z DonationSitesController
2024-02-19T16:08:53.7004696Z   While signed in
2024-02-19T16:08:53.7005908Z     DELETE #destroy
2024-02-19T16:08:53.7320607Z       returns http success
2024-02-19T16:08:53.7321676Z     Looking at a different organization
2024-02-19T16:08:53.9084007Z       redirects the user to the sign-in page for CRUD actions
2024-02-19T16:08:53.9084618Z     GET #index
2024-02-19T16:08:53.9222483Z       returns http success
2024-02-19T16:08:53.9223304Z     POST #import_csv
2024-02-19T16:08:53.9224833Z       behaves like csv import
2024-02-19T16:08:53.9225865Z         csv file with wrong headers
2024-02-19T16:08:53.9358768Z           redirects to :index
2024-02-19T16:08:53.9464432Z           presents a flash error message
2024-02-19T16:08:53.9465344Z         with a csv file
2024-02-19T16:08:53.9598696Z           presents a flash notice message
2024-02-19T16:08:53.9649398Z           invokes .import_csv
2024-02-19T16:08:53.9907026Z           redirects to :index
2024-02-19T16:08:53.9907705Z         without a csv file
2024-02-19T16:08:54.0014931Z           presents a flash error message
2024-02-19T16:08:54.0119832Z           redirects to :index
2024-02-19T16:08:54.0120659Z     GET #edit
2024-02-19T16:08:54.0261305Z       returns http success
2024-02-19T16:08:54.0261907Z     GET #show
2024-02-19T16:08:54.0388225Z       returns http success
2024-02-19T16:08:54.0389099Z     GET #new
2024-02-19T16:08:54.0494329Z       returns http success
2024-02-19T16:08:54.0495123Z   While not signed in
2024-02-19T16:08:54.0552043Z     redirects the user to the sign-in page for CRUD actions
2024-02-19T16:08:54.0552627Z 
2024-02-19T16:08:54.0553303Z Partners::FetchPartnersToRemindNowService
2024-02-19T16:08:54.0554158Z   .fetch
2024-02-19T16:08:54.0554620Z     when there is a partner
2024-02-19T16:08:54.0555804Z       that does NOT have a organization with a global reminder & deadline
2024-02-19T16:08:54.0556987Z         and is a part of a partner group that does have them defined
2024-02-19T16:08:54.0557825Z           that is for today
2024-02-19T16:08:54.0971230Z             should include that partner
2024-02-19T16:08:54.0972111Z             but the partner is deactivated
2024-02-19T16:08:54.1370704Z               should NOT include that partner
2024-02-19T16:08:54.1371568Z           that is not for today
2024-02-19T16:08:54.1719691Z             should NOT include that partner
2024-02-19T16:08:54.1720888Z       that has an organization with a global reminder & deadline
2024-02-19T16:08:54.1721918Z         AND a partner group that does have them defined
2024-02-19T16:08:54.2097618Z           should remind based on the partner group instead of the organization level reminder
2024-02-19T16:08:54.2099095Z           but the partner is deactivated
2024-02-19T16:08:54.2498155Z             should NOT include that partner
2024-02-19T16:08:54.2498978Z         that is for today
2024-02-19T16:08:54.2806141Z           should include that partner
2024-02-19T16:08:54.2807314Z           and has send_reminder=false
2024-02-19T16:08:54.3172059Z             should NOT include that partner
2024-02-19T16:08:54.3173250Z           but the partner is deactivated
2024-02-19T16:08:54.3540488Z             should NOT include that partner
2024-02-19T16:08:54.3541604Z         that is not for today
2024-02-19T16:08:54.3869715Z           should NOT include that partner
2024-02-19T16:08:54.3870712Z 
2024-02-19T16:08:54.3871015Z DistributionReminder
2024-02-19T16:08:54.3874549Z   conditionally sending the emails
2024-02-19T16:08:54.4160419Z     does not send mail for future distributions if the partner wants no reminders
2024-02-19T16:08:54.4429506Z     does not send mail for past distributions
2024-02-19T16:08:54.4719474Z     sends mail for future distributions where the partner wants reminders
2024-02-19T16:08:54.4985935Z     sends mail for future distributions
2024-02-19T16:08:54.4986732Z     when the partner is deactivated
2024-02-19T16:08:54.5254741Z       does not send mail
2024-02-19T16:08:54.5255478Z     when the distribution_id does not match any Distribution
2024-02-19T16:08:54.5297098Z       does not send mail for non existent distributions
2024-02-19T16:08:54.5297977Z 
2024-02-19T16:08:54.5298218Z PartnerCreateService
2024-02-19T16:08:54.5299178Z   #call
2024-02-19T16:08:54.7148555Z     should return an instance of itself
2024-02-19T16:08:54.7149587Z     when the arguments are incorrect
2024-02-19T16:08:54.7150066Z       beacuse the partner_attrs are invalid
2024-02-19T16:08:54.8989965Z         should contain errors related to invalid partner attributes
2024-02-19T16:08:54.8991550Z     when the arguments are valid
2024-02-19T16:08:55.0863504Z       should create the associated partner profile data
2024-02-19T16:08:55.2648723Z       should create a new partner record with the organization provided
2024-02-19T16:08:55.2649972Z       but there was an unexpected issue with saving the
2024-02-19T16:08:55.2650523Z         Partners::Profile record
2024-02-19T16:08:55.4433895Z           should not create the partner record for the organization
2024-02-19T16:08:55.6317191Z           should not create the associated partner records
2024-02-19T16:08:55.6317896Z         Partner record
2024-02-19T16:08:55.8119033Z           should not create the partner record for the organization
2024-02-19T16:08:55.9951094Z           should not create the associated partner records
2024-02-19T16:08:55.9952093Z 
2024-02-19T16:08:55.9952653Z DeadlineService
2024-02-19T16:08:55.9953381Z   #next_deadline
2024-02-19T16:08:55.9954325Z     do from the partner group
2024-02-19T16:08:55.9955448Z       when the deadline is today
2024-02-19T16:08:56.0025541Z         returns a date in the next month
2024-02-19T16:08:56.0026551Z       when the deadline is after today
2024-02-19T16:08:56.0095607Z         returns a date within the current month
2024-02-19T16:08:56.0096484Z       when the deadline is before today
2024-02-19T16:08:56.0148663Z         returns a date in the next month
2024-02-19T16:08:56.0149646Z     from the organization
2024-02-19T16:08:56.0150480Z       when the deadline is today
2024-02-19T16:08:56.0202965Z         returns a date in the next month
2024-02-19T16:08:56.0203749Z       when the deadline is before today
2024-02-19T16:08:56.0258246Z         returns a date in the next month
2024-02-19T16:08:56.0259255Z       when the deadline is after today
2024-02-19T16:08:56.0311931Z         returns a date within the current month
2024-02-19T16:08:56.0312923Z 
2024-02-19T16:08:56.0313363Z InventoryAggregate
2024-02-19T16:08:56.0314717Z   individual events
2024-02-19T16:08:56.3477965Z     should process a transfer destroy event
2024-02-19T16:08:56.6522803Z     should process a transfer event
2024-02-19T16:08:56.9532052Z     should process a distribution event
2024-02-19T16:08:57.2740231Z     should process a kit allocation event
2024-02-19T16:08:57.5699696Z     should process a donation event after a new storage location is created
2024-02-19T16:08:57.8891785Z     should process a purchase destroyed event
2024-02-19T16:08:58.2796136Z     should process a kit deallocation event
2024-02-19T16:08:58.5838721Z     should process a donation destroyed event
2024-02-19T16:08:58.8857964Z     should process a purchase event
2024-02-19T16:08:59.1941697Z     should process an adjustment event
2024-02-19T16:08:59.4791935Z     should process a donation event
2024-02-19T16:08:59.8043310Z     should process a distribution destroyed event
2024-02-19T16:09:00.1090444Z     should process a snapshot event
2024-02-19T16:09:00.4330067Z     should process an audit event
2024-02-19T16:09:00.4330855Z   validation
2024-02-19T16:09:00.4333454Z     current event is incorrect
2024-02-19T16:09:00.6798306Z       should raise a bare error
2024-02-19T16:09:00.6799181Z     subsequent event is incorrect
2024-02-19T16:09:00.9813668Z       should add the event to the message
2024-02-19T16:09:00.9814212Z   multiple events
2024-02-19T16:09:01.3120494Z     should handle intervening audits
2024-02-19T16:09:01.7215609Z     should process multiple events
2024-02-19T16:09:01.9900164Z     should handle changing storage location
2024-02-19T16:09:02.2637673Z     should handle timing correctly
2024-02-19T16:09:02.5278222Z     should ignore unusable snapshots
2024-02-19T16:09:02.5278825Z 
2024-02-19T16:09:02.5279063Z UiHelper
2024-02-19T16:09:02.5281433Z   optional_data_text
2024-02-19T16:09:02.5282241Z     when the field provided is not blank
2024-02-19T16:09:02.5349262Z       should return the content
2024-02-19T16:09:02.5350227Z     when the field provided is blank
2024-02-19T16:09:02.5395504Z       should return the text Not-Provided in gray text
2024-02-19T16:09:02.5396444Z 
2024-02-19T16:09:02.5396780Z DonationDestroyService
2024-02-19T16:09:02.5397627Z   #call
2024-02-19T16:09:02.5399257Z     when the donation_id matches no Donation owned by the organization
2024-02-19T16:09:02.5441797Z       to not be a success
2024-02-19T16:09:02.5442908Z     when storage_location fails to decrease the inventory of the donation
2024-02-19T16:09:02.5496488Z       to not be a success
2024-02-19T16:09:02.5497403Z     when the donation succesfully gets destroyed
2024-02-19T16:09:02.5738044Z       to be a success
2024-02-19T16:09:02.5738734Z     when the donation destroy fails
2024-02-19T16:09:02.5789601Z       to not be a success
2024-02-19T16:09:02.5790424Z     when the organization_id matches no Organization
2024-02-19T16:09:02.5828873Z       to not be a success
2024-02-19T16:09:02.5829672Z 
2024-02-19T16:09:02.5830240Z KitAllocation
2024-02-19T16:09:02.5833562Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-02-19T16:09:02.5834682Z   versioning
2024-02-19T16:09:02.5924600Z     is expected to be versioned
2024-02-19T16:09:02.5925597Z 
2024-02-19T16:09:02.5925892Z DonationSite
2024-02-19T16:09:02.5926811Z   geocode
2024-02-19T16:09:02.5988021Z     adds coordinates to the database
2024-02-19T16:09:02.5988713Z   Validations >
2024-02-19T16:09:02.6033036Z     is invalid without a name
2024-02-19T16:09:02.6071234Z     must belong to an organization
2024-02-19T16:09:02.6110999Z     is invalid without an address
2024-02-19T16:09:02.6111749Z   versioning
2024-02-19T16:09:02.6147482Z     is expected to be versioned
2024-02-19T16:09:02.6148370Z   import_csv
2024-02-19T16:09:02.7939234Z     imports storage locations from a csv file
2024-02-19T16:09:02.7939960Z 
2024-02-19T16:09:02.7940173Z HelpController
2024-02-19T16:09:02.7941098Z   While signed in as a normal user >
2024-02-19T16:09:02.7941849Z     GET #show
2024-02-19T16:09:02.8035359Z       does not display help page when the user logs out
2024-02-19T16:09:02.8174191Z       returns http success
2024-02-19T16:09:02.8174795Z 
2024-02-19T16:09:02.8175320Z Reports::ChildrenServedReportService
2024-02-19T16:09:02.8176193Z   #report
2024-02-19T16:09:03.3246108Z     should work with no distribution_quantity
2024-02-19T16:09:03.8329859Z     should report normal values
2024-02-19T16:09:04.0187051Z     should report zero values
2024-02-19T16:09:04.0187670Z 
2024-02-19T16:09:04.0187896Z AddRoleService
2024-02-19T16:09:04.0188709Z   #call
2024-02-19T16:09:04.0189534Z     when the role does not yet exist
2024-02-19T16:09:04.2123803Z       should add the role
2024-02-19T16:09:04.4028755Z       works with super admin
2024-02-19T16:09:04.6112661Z       should add the user role when asked to add admin
2024-02-19T16:09:04.9430585Z       works with a partner
2024-02-19T16:09:04.9431519Z     when the role already exists
2024-02-19T16:09:05.2405309Z       should raise an error
2024-02-19T16:09:05.4492807Z       should raise an error for super admin
2024-02-19T16:09:05.4494063Z 
2024-02-19T16:09:05.4494618Z RequestDestroyService
2024-02-19T16:09:05.4495178Z   #call
2024-02-19T16:09:05.4643987Z     should return an instance of itself
2024-02-19T16:09:05.4644756Z     when the request_id matches no request
2024-02-19T16:09:05.4689717Z       should not be successful and have errors indicating request id is invalid
2024-02-19T16:09:05.4691251Z     when the request's partner is deactivated
2024-02-19T16:09:05.4988363Z       should have errors
2024-02-19T16:09:05.4989417Z     when the request is already discarded
2024-02-19T16:09:05.5102888Z       should not be successful and have errors
2024-02-19T16:09:05.5103536Z     when there are no validation errors
2024-02-19T16:09:05.5241111Z       should update the discarded_at column on the request
2024-02-19T16:09:05.5379604Z       should update the status column on the request
2024-02-19T16:09:05.5509138Z       should send a email notification to the partner
2024-02-19T16:09:05.5509867Z 
2024-02-19T16:09:05.5510699Z CustomDeviseMailer
2024-02-19T16:09:05.5511322Z   #invitation_instructions
2024-02-19T16:09:05.5512327Z     when user is invited
2024-02-19T16:09:05.5771526Z       has invite expiration message
2024-02-19T16:09:05.5982895Z       invites to user
2024-02-19T16:09:05.5983594Z     when partner is invited
2024-02-19T16:09:05.6454063Z       invites to primary user
2024-02-19T16:09:05.6454871Z     when other partner users invited
2024-02-19T16:09:05.6889308Z       invites to partner user
2024-02-19T16:09:05.6890038Z 
2024-02-19T16:09:05.6890447Z AllocateKitInventoryService
2024-02-19T16:09:05.6891575Z   #allocate
2024-02-19T16:09:05.6892561Z     when inventory items are available
2024-02-19T16:09:05.9837560Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-02-19T16:09:05.9839059Z       when there are more then one line items
2024-02-19T16:09:05.9839604Z         when there kit is allocated once
2024-02-19T16:09:06.2638979Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-19T16:09:06.2640233Z         when same kit is allocated multiple times
2024-02-19T16:09:06.5829869Z           inventory out for that kit contains both line_items with their respective quantity
2024-02-19T16:09:06.5831548Z       When kit is allocated more then once
2024-02-19T16:09:06.8888142Z         increases the already existed inventory in and decreases the already existed inventory out
2024-02-19T16:09:06.8889619Z     when more than one kit is requested
2024-02-19T16:09:06.8890338Z       but one of the items is out of stock
2024-02-19T16:09:07.1601993Z         returns error and does not change kit or item quantity
2024-02-19T16:09:07.1602927Z   #error
2024-02-19T16:09:07.1603834Z     when the Store location organization doesn't match
2024-02-19T16:09:07.3810961Z       returns error
2024-02-19T16:09:07.3811491Z 
2024-02-19T16:09:07.3812578Z RequestItem
2024-02-19T16:09:07.3813410Z   Methods >
2024-02-19T16:09:07.3813964Z     #from_json
2024-02-19T16:09:07.6358534Z       has the correct amount on hand
2024-02-19T16:09:07.8856919Z       has the correct quantity
2024-02-19T16:09:08.1329385Z       has the correct amount on hand for location
2024-02-19T16:09:08.3727042Z       has the correct name
2024-02-19T16:09:08.3727810Z 
2024-02-19T16:09:08.3728045Z TransfersController
2024-02-19T16:09:08.3729765Z   While signed in
2024-02-19T16:09:08.3730867Z     GET #index
2024-02-19T16:09:08.3878529Z       returns http success
2024-02-19T16:09:08.3879568Z       when filtering by date
2024-02-19T16:09:08.3880345Z         when date parameters are supplied
2024-02-19T16:09:08.4353312Z           only returns the correct obejects
2024-02-19T16:09:08.4354170Z         when date parameters are not supplied
2024-02-19T16:09:08.4733767Z           returns all objects
2024-02-19T16:09:08.4734614Z     Looking at a different organization
2024-02-19T16:09:08.6574098Z       redirects the user to the sign-in page for CRUD actions
2024-02-19T16:09:08.6575050Z     POST #create
2024-02-19T16:09:08.6950638Z       redirects to #show when successful
2024-02-19T16:09:08.7094656Z       renders to #new when failing
2024-02-19T16:09:08.7095728Z     GET #new
2024-02-19T16:09:08.7215572Z       returns http success
2024-02-19T16:09:08.7216305Z     GET #show
2024-02-19T16:09:08.7463247Z       returns http success
2024-02-19T16:09:08.7464019Z   While not signed in
2024-02-19T16:09:08.7599761Z     redirects the user to the sign-in page for CRUD actions
2024-02-19T16:09:08.7600402Z 
2024-02-19T16:09:08.7600834Z UserInviteService
2024-02-19T16:09:08.7607292Z   with existing user
2024-02-19T16:09:08.9611744Z     should add roles to existing user
2024-02-19T16:09:08.9702759Z     should raise an error when reinviting an existing user with the same role
2024-02-19T16:09:08.9703824Z     with force: true
2024-02-19T16:09:09.0626382Z       should reinvite the user
2024-02-19T16:09:09.0627470Z   with a new user
2024-02-19T16:09:09.2630892Z     should create the user with roles
2024-02-19T16:09:09.2631759Z 
2024-02-19T16:09:09.2632116Z DistributionByCountyReportService
2024-02-19T16:09:09.2632653Z   get_breakdown
2024-02-19T16:09:09.3397755Z     will have 100% unspecified shows if no served_areas
2024-02-19T16:09:09.4234622Z     divides the item numbers and values according to the partner profile
2024-02-19T16:09:09.5999875Z     handles multiple partners with overlapping service areas properly
2024-02-19T16:09:09.6000961Z 
2024-02-19T16:09:09.6001432Z BarcodeItem
2024-02-19T16:09:09.6004928Z   Barcodes of BaseItems ('Global')
2024-02-19T16:09:09.6171603Z     updates a counter in BaseItem whenever it tracks a new barcode
2024-02-19T16:09:09.6172555Z     scopes >
2024-02-19T16:09:09.6173133Z       global
2024-02-19T16:09:09.6352416Z         includes all barcodes, for both base items and regular items
2024-02-19T16:09:09.6353410Z     validations >
2024-02-19T16:09:09.6438819Z       allows multiple barcodes to point at the same base item
2024-02-19T16:09:09.6516956Z       is valid with or without an organization
2024-02-19T16:09:09.6605483Z       enforces uniqueness in the global scope
2024-02-19T16:09:09.6606256Z       quantity >
2024-02-19T16:09:09.6659644Z         is an integer
2024-02-19T16:09:09.6711959Z         is not nil
2024-02-19T16:09:09.6763213Z         is not a negative number
2024-02-19T16:09:09.6764068Z       item >
2024-02-19T16:09:09.6816056Z         is invalid without an item associated with it
2024-02-19T16:09:09.6816899Z       value >
2024-02-19T16:09:09.6869083Z         requires a value
2024-02-19T16:09:09.6869761Z     filters >
2024-02-19T16:09:09.7024035Z       ->barcodeable_id shows only barcodes for a specific barcodeable_id
2024-02-19T16:09:09.7131316Z       ->by_value returns the barcode with that value
2024-02-19T16:09:09.7273401Z       #by_base_item_partner_key returns barcodes that match the partner key
2024-02-19T16:09:09.7274555Z   versioning
2024-02-19T16:09:09.7308967Z     is expected to be versioned
2024-02-19T16:09:09.7309700Z   Organization barcodes
2024-02-19T16:09:09.7425961Z     updates a counter in Item whenever it tracks a new barcode
2024-02-19T16:09:09.7427289Z     when searching for a barcode where there is a global and local with the same value
2024-02-19T16:09:09.7719769Z       favors the local barcode
2024-02-19T16:09:09.7720689Z     to_h >
2024-02-19T16:09:09.7842076Z       emits a hash for a line_item
2024-02-19T16:09:09.7843005Z     filters >
2024-02-19T16:09:09.8045086Z       ->item_id shows only barcodes for a specific item_id
2024-02-19T16:09:09.8045967Z     scopes >
2024-02-19T16:09:09.9963298Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-02-19T16:09:10.0181196Z       #by_item_partner_key returns barcodes that match the partner key
2024-02-19T16:09:10.0295370Z       ->by_value returns the barcode with that value
2024-02-19T16:09:10.0296393Z     validations >
2024-02-19T16:09:10.0449601Z       is valid only with an organization
2024-02-19T16:09:10.0695989Z       does not enforces value uniqueness across organizations
2024-02-19T16:09:10.0851722Z       enforces value uniqueness within the organization
2024-02-19T16:09:10.0968828Z       allows multiple barcodes to point at the same item
2024-02-19T16:09:10.1093990Z       does not enforce value uniqueness compared with the global scope
2024-02-19T16:09:10.1094951Z       quantity >
2024-02-19T16:09:10.1190676Z         is not nil
2024-02-19T16:09:10.1281153Z         is not a negative number
2024-02-19T16:09:10.1370936Z         is an integer
2024-02-19T16:09:10.1371716Z       value >
2024-02-19T16:09:10.1464993Z         requires a value
2024-02-19T16:09:10.1465645Z       item >
2024-02-19T16:09:10.1555891Z         is invalid without an item associated with it
2024-02-19T16:09:10.1557001Z 
2024-02-19T16:09:10.1557255Z NDBNMember
2024-02-19T16:09:10.1558697Z   validations
2024-02-19T16:09:10.1661297Z     is expected to validate that :ndbn_member_id is case-sensitively unique
2024-02-19T16:09:10.1727747Z     is expected to validate that :account_name cannot be empty/falsy
2024-02-19T16:09:10.1781035Z     is expected to validate that :ndbn_member_id cannot be empty/falsy
2024-02-19T16:09:10.1782037Z   versioning
2024-02-19T16:09:10.1816906Z     is expected to be versioned
2024-02-19T16:09:10.1817810Z   #full_name
2024-02-19T16:09:10.1854093Z     should equal the id and the account name
2024-02-19T16:09:10.1854655Z 
2024-02-19T16:09:10.1854925Z DistributionPdf
2024-02-19T16:09:10.2447214Z   #non_request_data
2024-02-19T16:09:10.3129922Z   #request_data
2024-02-19T16:09:10.3130433Z 
2024-02-19T16:09:10.3130725Z PartnerRequestRecertificationService
2024-02-19T16:09:10.3131778Z   #call
2024-02-19T16:09:10.3132574Z     when the arguments are correct
2024-02-19T16:09:10.3453429Z       should have no errors
2024-02-19T16:09:10.3773524Z       should change the partner status to approved
2024-02-19T16:09:10.4079617Z       should queue sending the notice to the partner
2024-02-19T16:09:10.4080893Z       but a unexpected error occurred during the save
2024-02-19T16:09:10.4081753Z         for partner approval
2024-02-19T16:09:10.4352183Z           should NOT queue sending the notice to the partner
2024-02-19T16:09:10.4627395Z           should not change the partner status to recertification_required
2024-02-19T16:09:10.4892315Z           should have an error with the raised error
2024-02-19T16:09:10.4893184Z     when the arguments are incorrect
2024-02-19T16:09:10.4894331Z       because the partner has already been requested to recertify
2024-02-19T16:09:10.5215567Z         should return the PartnerRequestRecertificationService object with an error
2024-02-19T16:09:10.5216383Z     when the partner is deactivated
2024-02-19T16:09:10.5538808Z       does not send an email
2024-02-19T16:09:10.5539418Z 
2024-02-19T16:09:10.5539737Z Partners::RequestCreateService
2024-02-19T16:09:10.5540846Z   #call
2024-02-19T16:09:10.5542030Z     when the arguments are correct
2024-02-19T16:09:10.5987733Z       should have no errors
2024-02-19T16:09:10.6379680Z       should create a Request record
2024-02-19T16:09:10.6775105Z       should notify the Partner via email
2024-02-19T16:09:10.6776236Z       but a unexpected error occured during the save
2024-02-19T16:09:10.6776931Z         for the Request record
2024-02-19T16:09:10.7142090Z           should have an error with the raised error
2024-02-19T16:09:10.7503405Z           should NOT notify the Partner via email
2024-02-19T16:09:10.7867248Z           should NOT create a Request record
2024-02-19T16:09:10.7868126Z     when the arguments are incorrect
2024-02-19T16:09:10.7869092Z       because a unrecogonized item_id was provided
2024-02-19T16:09:10.8173964Z         should return the Request object with an error
2024-02-19T16:09:10.8174789Z       because no item_requests_attributes and comments were defined
2024-02-19T16:09:10.8436951Z         should return the Request object with an error
2024-02-19T16:09:10.8440067Z 
2024-02-19T16:09:10.8440348Z RequestsConfirmationMailer
2024-02-19T16:09:10.8641507Z   handles duplicates
2024-02-19T16:09:10.8921661Z   pairs the right quantities with the right item names
2024-02-19T16:09:10.8922486Z   #confirmation_email
2024-02-19T16:09:10.9054802Z     renders the headers
2024-02-19T16:09:10.9227090Z     renders the body
2024-02-19T16:09:10.9227581Z 
2024-02-19T16:09:10.9227842Z TextInterpolatorService
2024-02-19T16:09:10.9229019Z   #call
2024-02-19T16:09:10.9263099Z     returns interpolated text
2024-02-19T16:09:10.9263802Z     when interpolations are nil
2024-02-19T16:09:10.9296563Z       returns text
2024-02-19T16:09:10.9297156Z     when interpolations are not present
2024-02-19T16:09:10.9329513Z       returns text
2024-02-19T16:09:10.9330304Z     when text is nil
2024-02-19T16:09:10.9362641Z       returns nil
2024-02-19T16:09:10.9363467Z     when text is empty
2024-02-19T16:09:10.9396708Z       returns empty string
2024-02-19T16:09:10.9397365Z     when interpolations are empty
2024-02-19T16:09:10.9429561Z       returns text
2024-02-19T16:09:10.9430433Z 
2024-02-19T16:09:10.9430717Z OrganizationStats
2024-02-19T16:09:10.9431894Z   locations_with_inventory method >
2024-02-19T16:09:10.9433096Z     current org is not nil + no locations have items >
2024-02-19T16:09:10.9498114Z       should return an empty array
2024-02-19T16:09:10.9498898Z     current org is not nil + locations have items >
2024-02-19T16:09:10.9829617Z       should return storage location
2024-02-19T16:09:10.9830342Z     current org is nil >
2024-02-19T16:09:10.9864253Z       should return an empty array
2024-02-19T16:09:10.9865073Z   donation_sites_added method >
2024-02-19T16:09:10.9865767Z     current org is nil >
2024-02-19T16:09:10.9898594Z       should return 0
2024-02-19T16:09:10.9899305Z     current org is not nil >
2024-02-19T16:09:10.9932662Z       should return actual count of donation sites
2024-02-19T16:09:10.9933594Z   storage_locations_added method >
2024-02-19T16:09:10.9934161Z     current org is nil >
2024-02-19T16:09:10.9966238Z       should return 0
2024-02-19T16:09:10.9967127Z     current org is not nil >
2024-02-19T16:09:11.0000510Z       should return actual count of locations
2024-02-19T16:09:11.0001258Z   partners_added method >
2024-02-19T16:09:11.0001993Z     current org is not nil >
2024-02-19T16:09:11.0035659Z       should return actual count of partners
2024-02-19T16:09:11.0036394Z     current org is nil >
2024-02-19T16:09:11.0068718Z       should return 0
2024-02-19T16:09:11.0069390Z 
2024-02-19T16:09:11.0069713Z Reports::SummaryReportService
2024-02-19T16:09:11.0070552Z   #report
2024-02-19T16:09:11.4591423Z     should report positive values
2024-02-19T16:09:11.6366058Z     should report zero values
2024-02-19T16:09:12.0900445Z     should report negative values
2024-02-19T16:09:12.0901310Z 
2024-02-19T16:09:12.0901644Z OrganizationUpdateService
2024-02-19T16:09:12.0902364Z   #update_partner_flags
2024-02-19T16:09:12.0903547Z     when request flags have changed
2024-02-19T16:09:12.3115256Z       should update partners when disabling quantity-based request flags
2024-02-19T16:09:12.5286967Z       should update partners when disabling child and individual request flags
2024-02-19T16:09:12.7448165Z       should NOT update partners' request flags when enabling request flags on the organization
2024-02-19T16:09:12.7449521Z     when request flags haven't changed
2024-02-19T16:09:12.9582925Z       should not update partners
2024-02-19T16:09:12.9583733Z   #update
2024-02-19T16:09:12.9584299Z     when object is valid
2024-02-19T16:09:13.1422665Z       should update and return true
2024-02-19T16:09:13.1423408Z     when object is invalid
2024-02-19T16:09:13.3264136Z       should not update and return false
2024-02-19T16:09:13.3265035Z     when organization has partners
2024-02-19T16:09:13.3266476Z       when all of a single partner's request flags will be disabled
2024-02-19T16:09:13.5512829Z         should NOT change request flags in organization or its partners
2024-02-19T16:09:13.7638374Z         should add an error message to the organization
2024-02-19T16:09:13.7639823Z       when all of a single partner's request flags WILL NOT be disabled
2024-02-19T16:09:13.9873448Z         should allow the disabling of request flags in organization and its partners
2024-02-19T16:09:13.9874208Z 
2024-02-19T16:09:13.9874689Z ProductDriveParticipant
2024-02-19T16:09:13.9875765Z   versioning
2024-02-19T16:09:13.9914916Z     is expected to be versioned
2024-02-19T16:09:13.9915739Z   behaves like provideable
2024-02-19T16:09:13.9916341Z     import_csv
2024-02-19T16:09:14.1654419Z       imports from a csv file
2024-02-19T16:09:14.1655211Z     geocode
2024-02-19T16:09:14.1716118Z       adds coordinates to the database
2024-02-19T16:09:14.1716617Z     Validations
2024-02-19T16:09:14.1774664Z       is invalid unless it has either a contact name or a business name
2024-02-19T16:09:14.1809211Z       is invalid without an organization
2024-02-19T16:09:14.1809982Z   Validations
2024-02-19T16:09:14.1843537Z     is invalid without an organization
2024-02-19T16:09:14.1898677Z     is invalid unless it has either a phone number or an email
2024-02-19T16:09:14.1899545Z   Methods
2024-02-19T16:09:14.1900433Z     volume
2024-02-19T16:09:14.2562535Z       retrieves the amount of product that has been donated by participant
2024-02-19T16:09:14.2563605Z     volume_by_product_drive
2024-02-19T16:09:14.4110225Z       retrieves the amount of product that has been donated through specific product drive
2024-02-19T16:09:14.4111700Z     donation_source_view
2024-02-19T16:09:14.4112331Z       contact name present
2024-02-19T16:09:14.4179068Z         is expected to eq "Contact Name (participant)"
2024-02-19T16:09:14.4180005Z       no contact name
2024-02-19T16:09:14.4237803Z         is expected to be nil
2024-02-19T16:09:14.4238802Z 
2024-02-19T16:09:14.4239169Z NotifyPartnerJob
2024-02-19T16:09:14.4240119Z   #perform
2024-02-19T16:09:14.4287982Z     avoids exception when request doesn't exist
2024-02-19T16:09:14.4394653Z     is expected to call RequestsConfirmationMailer
2024-02-19T16:09:14.4395861Z     when the request's partner is deactivated
2024-02-19T16:09:14.4685311Z       does not send the confirmation email
2024-02-19T16:09:14.4685915Z 
2024-02-19T16:09:14.4686326Z County
2024-02-19T16:09:14.4727148Z   is expected to have many served_areas
2024-02-19T16:09:14.4728209Z   versioning
2024-02-19T16:09:14.4762887Z     is expected to be versioned
2024-02-19T16:09:14.4764292Z 
2024-02-19T16:09:14.4764636Z Partner
2024-02-19T16:09:14.4767501Z   #quantity_year_to_date
2024-02-19T16:09:14.6567449Z     includes all item quantities from distributions issued during the current year
2024-02-19T16:09:14.8486669Z     does not include quantities from distributions issued during the previous year
2024-02-19T16:09:14.8488056Z   #approvable?
2024-02-19T16:09:14.8488631Z     when status is awaiting_review
2024-02-19T16:09:14.8532496Z       should return true
2024-02-19T16:09:14.8533139Z     when status is invited
2024-02-19T16:09:14.8577014Z       should return true
2024-02-19T16:09:14.8577873Z     when status is not invited or awaiting_review
2024-02-19T16:09:14.8649585Z       should return false
2024-02-19T16:09:14.8650154Z   #profile
2024-02-19T16:09:14.8887495Z     should return the associated Partners::Profile record
2024-02-19T16:09:14.8888401Z   Filters
2024-02-19T16:09:14.8889012Z     by_status
2024-02-19T16:09:14.9279910Z       yields partners with the provided status
2024-02-19T16:09:14.9680433Z       yields deactivated partner when deactivated status provided
2024-02-19T16:09:14.9681324Z   #csv_export_attributes
2024-02-19T16:09:14.9937176Z     includes contact person information from parnerbase
2024-02-19T16:09:14.9938134Z   #deletable?
2024-02-19T16:09:14.9938916Z     when status is uninvited
2024-02-19T16:09:14.9939731Z       when it has no other associations
2024-02-19T16:09:15.0058956Z         should return true
2024-02-19T16:09:15.0059778Z       when it has a distribution
2024-02-19T16:09:15.0207391Z         should return false
2024-02-19T16:09:15.0208110Z       when it has a request
2024-02-19T16:09:15.0358516Z         should return false
2024-02-19T16:09:15.0359326Z       when it has a profile and users
2024-02-19T16:09:15.0617145Z         should return false
2024-02-19T16:09:15.0617895Z       when it has a profile but no users
2024-02-19T16:09:15.0779027Z         should return true
2024-02-19T16:09:15.0779931Z     when status is not uninvited
2024-02-19T16:09:15.0860414Z       should return false
2024-02-19T16:09:15.0861111Z   Validations >
2024-02-19T16:09:15.1135292Z     still requires a unique email between organizations
2024-02-19T16:09:15.1383939Z     does not require a unique name between organizations
2024-02-19T16:09:15.1438484Z     must belong to an organization
2024-02-19T16:09:15.1715276Z     requires a unique name within an organization
2024-02-19T16:09:15.1805947Z     validates the quota is a number but it is not required
2024-02-19T16:09:15.2111738Z     requires a unique email that is formatted correctly
2024-02-19T16:09:15.2113003Z   import_csv
2024-02-19T16:09:15.5296753Z     imports partners from a csv file with BOM encodings
2024-02-19T16:09:15.7488041Z     imports partners from a csv file and prevents multiple imports
2024-02-19T16:09:15.7489657Z   ActiveStorage validation
2024-02-19T16:09:15.7611870Z     validates that attachments are pdf or docs
2024-02-19T16:09:15.7612704Z   associations
2024-02-19T16:09:15.7669698Z     is expected to belong to partner_group optional: true
2024-02-19T16:09:15.7702736Z     is expected to have many distributions
2024-02-19T16:09:15.7737280Z     is expected to have many requests
2024-02-19T16:09:15.7796288Z     is expected to belong to organization required: true
2024-02-19T16:09:15.7860086Z     is expected to have many families dependent => destroy
2024-02-19T16:09:15.7895231Z     is expected to have many requests
2024-02-19T16:09:15.7932293Z     is expected to have many users dependent => destroy
2024-02-19T16:09:15.7969483Z     is expected to have many children through families
2024-02-19T16:09:15.8004133Z     is expected to have many item_categories through partner_group
2024-02-19T16:09:15.8040511Z     is expected to have many requestable_items through item_categories source => items
2024-02-19T16:09:15.8041606Z     primary_user
2024-02-19T16:09:15.8351393Z       should return the first user ever created for a partner
2024-02-19T16:09:15.8352443Z   versioning
2024-02-19T16:09:15.8392096Z     is expected to be versioned
2024-02-19T16:09:15.8392912Z   #deactivated?
2024-02-19T16:09:15.8393849Z     when the status is 'deactivated'
2024-02-19T16:09:15.8439817Z       should return true
2024-02-19T16:09:15.8440691Z     when the status is not 'deactivated'
2024-02-19T16:09:15.8481691Z       should return false
2024-02-19T16:09:15.8482394Z   callbacks
2024-02-19T16:09:15.8713798Z     properly downcases email
2024-02-19T16:09:15.8714484Z   changing emails
2024-02-19T16:09:15.8995457Z     should call the UserInviteService.invite when the partner has status invited and the email is changed
2024-02-19T16:09:15.9260782Z     should not call the UserInviteService.invite when the partner has status uninvited and the email is changed
2024-02-19T16:09:15.9527815Z     should not call the UserInviteService.invite when the partner has status deactivated and the email is changed
2024-02-19T16:09:15.9800531Z     should call the UserInviteService.invite when the partner has status recertification_required and the email is changed
2024-02-19T16:09:16.0132326Z     should not call the UserInviteService.invite when the partner is changing email to previously used email
2024-02-19T16:09:16.0402605Z     should call the UserInviteService.invite when the partner has status approved and the email is changed
2024-02-19T16:09:16.0674716Z     should call the UserInviteService.invite when the partner has status awaiting_review and the email is changed
2024-02-19T16:09:16.0676083Z   #impact_metrics
2024-02-19T16:09:16.0676677Z     when partner has related information
2024-02-19T16:09:16.1453491Z       is expected to eq {:children_served=>4, :families_served=>3, :family_zipcodes=>2, :family_zipcodes_list=>["45612-123", "45612-126"]}
2024-02-19T16:09:16.1651057Z     when partner don't have any related information
2024-02-19T16:09:16.1737533Z       is expected to eq {:children_served=>0, :families_served=>0, :family_zipcodes=>0, :family_zipcodes_list=>[]}
2024-02-19T16:09:16.1738661Z 
2024-02-19T16:09:16.1739373Z BroadcastAnnouncement
2024-02-19T16:09:16.1859053Z   is expected to validate that :message cannot be empty/falsy
2024-02-19T16:09:16.1896310Z   is expected to belong to organization optional: true
2024-02-19T16:09:16.1959021Z   should roughly check if link is valid
2024-02-19T16:09:16.2014578Z   should validate a good link
2024-02-19T16:09:16.2065976Z   should validate a valid announcement
2024-02-19T16:09:16.2105664Z   is expected to belong to user required: true
2024-02-19T16:09:16.2106265Z   expired?
2024-02-19T16:09:16.2162704Z     should be true if the announcement is expired
2024-02-19T16:09:16.2218499Z     should be false if the announcement has not expired
2024-02-19T16:09:16.2219199Z   filter_announcements
2024-02-19T16:09:16.2363574Z     should include only announcements from the passed organization
2024-02-19T16:09:16.2506484Z     sorts announcements from most recently created to last
2024-02-19T16:09:16.2638040Z     shouldn't include expired announcements
2024-02-19T16:09:16.2638652Z   versioning
2024-02-19T16:09:16.2676569Z     is expected to be versioned
2024-02-19T16:09:16.2677617Z 
2024-02-19T16:09:16.2677803Z View::Inventory
2024-02-19T16:09:16.2679748Z   .items_for_location
2024-02-19T16:09:16.3594989Z     should return the right values
2024-02-19T16:09:16.3596515Z     with include_omitted_items
2024-02-19T16:09:16.4502108Z       should add items not in the storage location
2024-02-19T16:09:16.4502850Z   #storage_location_name
2024-02-19T16:09:16.5389695Z     should return the right name
2024-02-19T16:09:16.5390343Z   #storage_locations_for_item
2024-02-19T16:09:16.6257740Z     should return all relevant IDs
2024-02-19T16:09:16.6258315Z   #all_items
2024-02-19T16:09:16.7242477Z     should return all items across storage locations
2024-02-19T16:09:16.7242968Z   #items_for_location
2024-02-19T16:09:16.8091456Z     should return the right values
2024-02-19T16:09:16.8092136Z     with include_omitted_items
2024-02-19T16:09:16.8952904Z       should add items not in the storage location
2024-02-19T16:09:16.8953621Z   .total_inventory
2024-02-19T16:09:16.9816232Z     should return the total quantity
2024-02-19T16:09:16.9816925Z   #total_value_in_dollars
2024-02-19T16:09:17.0658853Z     should return total value across the given location
2024-02-19T16:09:17.0659624Z   #quantity_for
2024-02-19T16:09:17.0660083Z     with storage location but no item id
2024-02-19T16:09:17.1631669Z       should return all items at that location
2024-02-19T16:09:17.1632350Z     with item id
2024-02-19T16:09:17.1632814Z       with storage location
2024-02-19T16:09:17.2552774Z         should return the quantity at that location
2024-02-19T16:09:17.2553553Z       with no storage location
2024-02-19T16:09:17.3425193Z         should return quantities across all storage locations
2024-02-19T16:09:17.3425973Z 
2024-02-19T16:09:17.3426283Z ApplicationController
2024-02-19T16:09:17.3427745Z   dashboard_path_from_current_role
2024-02-19T16:09:17.3428693Z     As a user without super admin status
2024-02-19T16:09:17.3648467Z       links to the general dashboard
2024-02-19T16:09:17.3649447Z     As a super admin
2024-02-19T16:09:17.3862544Z       links to the admin dashboard
2024-02-19T16:09:17.3863134Z   current_partner
2024-02-19T16:09:17.3863924Z     As an org user
2024-02-19T16:09:17.4001364Z       should return nil
2024-02-19T16:09:17.4001851Z     As a partner user
2024-02-19T16:09:17.4537795Z       should return the first partner role
2024-02-19T16:09:17.4538450Z       with a changed current role
2024-02-19T16:09:17.5088427Z         should return the first partner role
2024-02-19T16:09:17.5089064Z   current_organization
2024-02-19T16:09:17.5090017Z     As an org user
2024-02-19T16:09:17.8810038Z       should return the first org role
2024-02-19T16:09:17.8810711Z       with a changed current role
2024-02-19T16:09:18.2388777Z         should return the first org role
2024-02-19T16:09:18.2389517Z     As a partner user
2024-02-19T16:09:18.2548537Z       should return nil
2024-02-19T16:09:18.2549514Z 
2024-02-19T16:09:18.2549724Z Partners::Family
2024-02-19T16:09:18.2551371Z   #create_authorized
2024-02-19T16:09:18.2831263Z     should include authorized family members
2024-02-19T16:09:18.2831905Z   #total_children_count
2024-02-19T16:09:18.2883878Z     should return the family's total children count
2024-02-19T16:09:18.2884682Z   #search_non_archived
2024-02-19T16:09:18.3783451Z     should return non-archived families if zero is passed in
2024-02-19T16:09:18.4764808Z     should return all families if one is passed in
2024-02-19T16:09:18.4765396Z   #guardian_display_name
2024-02-19T16:09:18.4819777Z     should return the guardian's first and last name
2024-02-19T16:09:18.4820398Z   versioning
2024-02-19T16:09:18.4854396Z     is expected to be versioned
2024-02-19T16:09:18.4854918Z   associations
2024-02-19T16:09:18.4890574Z     is expected to have many children dependent => destroy
2024-02-19T16:09:18.4924090Z     is expected to have many authorized_family_members dependent => destroy
2024-02-19T16:09:18.4965182Z     is expected to belong to partner required: true
2024-02-19T16:09:18.4966001Z   validations
2024-02-19T16:09:18.5047588Z     is expected to validate that :guardian_first_name cannot be empty/falsy
2024-02-19T16:09:18.5120042Z     is expected to validate that :guardian_zip_code cannot be empty/falsy
2024-02-19T16:09:18.5192376Z     is expected to validate that :guardian_last_name cannot be empty/falsy
2024-02-19T16:09:18.5193026Z 
2024-02-19T16:09:18.5193230Z Exports::ExportDistributionsCSVService
2024-02-19T16:09:18.5194135Z   #generate_csv_data
2024-02-19T16:09:18.7121905Z     should match the expected content for the csv
2024-02-19T16:09:18.7122807Z     when there are no distributions but the report is requested
2024-02-19T16:09:18.8956479Z       returns a csv with only headers and no rows
2024-02-19T16:09:18.8957198Z     when a new item is added
2024-02-19T16:09:19.0854053Z       should add it to the end of the row
2024-02-19T16:09:19.2759579Z       should show up with a 0 quantity if there are none of this item in any distribution
2024-02-19T16:09:19.2760580Z 
2024-02-19T16:09:19.2760669Z Role
2024-02-19T16:09:19.2800190Z   is expected to accepts_nested_attributes_for :users
2024-02-19T16:09:19.2800774Z   Validations
2024-02-19T16:09:19.2852231Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-02-19T16:09:19.2852954Z   versioning
2024-02-19T16:09:19.2889227Z     is expected to be versioned
2024-02-19T16:09:19.2889649Z   Associations
2024-02-19T16:09:19.2953660Z     is expected to have and belong to many users
2024-02-19T16:09:19.2990031Z     is expected to belong to resource optional: true
2024-02-19T16:09:19.2990709Z 
2024-02-19T16:09:19.2990929Z ItemsInTotalQuery
2024-02-19T16:09:19.2992012Z   items_in_total_query
2024-02-19T16:09:19.5872435Z     does not count donations, purchases, adjustments to other storage locations
2024-02-19T16:09:19.8002094Z     does not count negative adjustments towards in-flow
2024-02-19T16:09:20.1665515Z     counts shared items together
2024-02-19T16:09:20.3337104Z     returns a sum total of all in-flows
2024-02-19T16:09:20.5721262Z     does not count transfers going in the negative direction
2024-02-19T16:09:20.5722244Z 
2024-02-19T16:09:20.5722405Z Transfer
2024-02-19T16:09:20.5724392Z   Scopes >
2024-02-19T16:09:20.5949004Z     `from_location` can filter out transfers from a specific location
2024-02-19T16:09:20.6166923Z     `to_location` can filter out transfers to a specific location
2024-02-19T16:09:20.6167518Z   versioning
2024-02-19T16:09:20.6206669Z     is expected to be versioned
2024-02-19T16:09:20.6207143Z   Methods >
2024-02-19T16:09:20.8278528Z     `self.storage_locations_transferred_to` and `..._from` constrains appropriately
2024-02-19T16:09:20.8279197Z   behaves like itemizable
2024-02-19T16:09:20.8279570Z     .line_items
2024-02-19T16:09:20.8280749Z       quantities_by_name
2024-02-19T16:09:20.8787093Z         leaves out zero-quantitied items if requested
2024-02-19T16:09:20.9268020Z         returns a hash of items with id, name, and quantity
2024-02-19T16:09:20.9268728Z       sorted
2024-02-19T16:09:20.9942781Z         displays the items, sorted by name
2024-02-19T16:09:20.9943406Z       total
2024-02-19T16:09:21.0413274Z         has an item total
2024-02-19T16:09:21.0413799Z       combine!
2024-02-19T16:09:21.0676199Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:09:21.1129740Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:09:21.1130587Z     .to_a
2024-02-19T16:09:21.1131367Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:09:21.1468254Z         calls line_item_values
2024-02-19T16:09:21.1468912Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:09:21.1804776Z         raises an error
2024-02-19T16:09:21.1805639Z   Validations >
2024-02-19T16:09:21.2417907Z     requires that the line items must have sufficient quantity in the inventory
2024-02-19T16:09:21.4354961Z     must only use storage locations that belong to the organization (no hacks!)
2024-02-19T16:09:21.4478656Z     must have storage locations set
2024-02-19T16:09:21.4599390Z     must have different storage locations
2024-02-19T16:09:21.4844742Z     requires that each line item exists in the inventory
2024-02-19T16:09:21.4922514Z     must belong to an organization
2024-02-19T16:09:21.4923475Z 
2024-02-19T16:09:21.4923804Z DistributionContentChangeService
2024-02-19T16:09:21.4925038Z   #any_change?
2024-02-19T16:09:21.4926890Z     when there are no changes in the line items
2024-02-19T16:09:21.4964647Z       returns true
2024-02-19T16:09:21.4965242Z     when there are line items removed and updated
2024-02-19T16:09:21.5000105Z       returns true
2024-02-19T16:09:21.5002388Z     when there are line items updated
2024-02-19T16:09:21.5037505Z       returns true
2024-02-19T16:09:21.5038056Z     when there are line items removed
2024-02-19T16:09:21.5075125Z       returns true
2024-02-19T16:09:21.5075977Z   #changes
2024-02-19T16:09:21.5076645Z     when there are line items removed and updated
2024-02-19T16:09:21.5114266Z       returns true
2024-02-19T16:09:21.5115989Z 
2024-02-19T16:09:21.5116284Z Purchase
2024-02-19T16:09:21.5117948Z   Validations >
2024-02-19T16:09:21.5302185Z     is not valid if any category is non-zero but does not add up to the total
2024-02-19T16:09:21.5387892Z     is not valid if categories do not add up
2024-02-19T16:09:21.5473392Z     is not valid if period supplies is non-zero but no other category is
2024-02-19T16:09:21.5554021Z     is valid if categories have no values
2024-02-19T16:09:21.5635239Z     is valid if all categories add up to total
2024-02-19T16:09:21.5710845Z     must belong to an organization
2024-02-19T16:09:21.5783868Z     requires an inventory (storage location)
2024-02-19T16:09:21.5866107Z     ensures that the issued at is no earlier than 2000
2024-02-19T16:09:21.6047317Z     is invalid when the line items are invalid
2024-02-19T16:09:21.6047984Z   behaves like itemizable
2024-02-19T16:09:21.6049034Z     .to_a
2024-02-19T16:09:21.6050101Z       with Flipper flag :deprecate_to_a enabled
2024-02-19T16:09:21.6418259Z         raises an error
2024-02-19T16:09:21.6418885Z       with Flipper flag :deprecate_to_a disabled
2024-02-19T16:09:21.6773477Z         calls line_item_values
2024-02-19T16:09:21.6774048Z     .line_items
2024-02-19T16:09:21.6775212Z       sorted
2024-02-19T16:09:21.7389082Z         displays the items, sorted by name
2024-02-19T16:09:21.7389870Z       quantities_by_name
2024-02-19T16:09:21.7783808Z         returns a hash of items with id, name, and quantity
2024-02-19T16:09:21.8182264Z         leaves out zero-quantitied items if requested
2024-02-19T16:09:21.8182955Z       combine!
2024-02-19T16:09:21.8613147Z         combines multiple line_items with the same item_id into a single record
2024-02-19T16:09:21.9128236Z         incrementally combines line_items on donations that have already been created
2024-02-19T16:09:21.9129186Z       total
2024-02-19T16:09:21.9531472Z         has an item total
2024-02-19T16:09:21.9532173Z   Callbacks >
2024-02-19T16:09:21.9711180Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-02-19T16:09:21.9896483Z     automatically combines duplicate line_item records when they're created
2024-02-19T16:09:21.9897398Z   Methods >
2024-02-19T16:09:21.9897783Z     remove
2024-02-19T16:09:22.0602296Z       removes the item from the purchase
2024-02-19T16:09:22.1362030Z       fails gracefully if the item doesn't exist
2024-02-19T16:09:22.1362692Z     storage_view
2024-02-19T16:09:22.2028497Z       returns name of storage location
2024-02-19T16:09:22.2029021Z   versioning
2024-02-19T16:09:22.2068033Z     is expected to be versioned
2024-02-19T16:09:22.2068528Z   Associations >
2024-02-19T16:09:22.2069315Z     items >
2024-02-19T16:09:22.2261970Z       has_many
2024-02-19T16:09:22.2264931Z   Scopes >
2024-02-19T16:09:22.2265546Z     during >
2024-02-19T16:09:22.2507699Z       returns all purchases created between two dates
2024-02-19T16:09:22.2508522Z 
2024-02-19T16:09:22.2508725Z DistributionDestroyService
2024-02-19T16:09:22.2509677Z   #call
2024-02-19T16:09:22.2511029Z     when the distribution_id matches no Distribution
2024-02-19T16:09:22.2552544Z       to not be a success
2024-02-19T16:09:22.2553931Z     when the distribution_id does match a Distribution
2024-02-19T16:09:22.2554649Z       and the destroy! operation fails
2024-02-19T16:09:22.4537962Z         should not be successful and have the error message
2024-02-19T16:09:22.6481321Z         should not delete the Distribution
2024-02-19T16:09:22.6482030Z       and the operations succeed
2024-02-19T16:09:22.8660621Z         should destroy the Distribution
2024-02-19T16:09:23.0815901Z         should be successful
2024-02-19T16:09:23.2945536Z         should increase the inventory of the storage location
2024-02-19T16:09:23.2946259Z       and the increase inventory operations fails
2024-02-19T16:09:23.5037809Z         should not be successful and have the error message
2024-02-19T16:09:23.7111751Z         should not delete the Distribution
2024-02-19T16:09:23.7112576Z 
2024-02-19T16:09:23.7112927Z Exports::ExportPurchasesCSVService
2024-02-19T16:09:23.7114193Z   #generate_csv_data
2024-02-19T16:09:23.8284208Z     should match the expected content for the csv
2024-02-19T16:09:23.8552305Z W, [2024-02-19T08:09:23.854974 #2277]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-19T16:09:23.8554366Z W, [2024-02-19T08:09:23.855022 #2277]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-19T16:09:23.8556635Z W, [2024-02-19T08:09:23.855040 #2277]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-19T16:09:23.8559472Z W, [2024-02-19T08:09:23.855066 #2277]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-19T16:09:23.8560685Z 
2024-02-19T16:09:23.8561323Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-02-19T16:09:23.8562046Z 
2024-02-19T16:09:23.8563142Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-02-19T16:09:23.8564424Z      # Not yet implemented
2024-02-19T16:09:23.8564978Z      # ./spec/models/kit_allocation_spec.rb:16
2024-02-19T16:09:23.8565410Z 
2024-02-19T16:09:23.8565715Z Finished in 36.13 seconds (files took 8.41 seconds to load)
2024-02-19T16:09:23.8566288Z 493 examples, 0 failures, 1 pending
2024-02-19T16:09:23.8566769Z 
2024-02-19T16:09:23.8566875Z Randomized with seed 8669
2024-02-19T16:09:23.8567070Z 
2024-02-19T16:09:24.3478374Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3636 / 6405 LOC (56.77%) covered.
2024-02-19T16:09:24.7872920Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
