2024-03-06T21:26:19.2356311Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-06T21:26:19.2357198Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-06T21:26:19.2406864Z shell: /usr/bin/bash -e {0}
2024-03-06T21:26:19.2407284Z env:
2024-03-06T21:26:19.2407704Z   POSTGRES_HOST: localhost
2024-03-06T21:26:19.2408116Z   DATABASE_HOST: localhost
2024-03-06T21:26:19.2408559Z   PG_USERNAME: postgres
2024-03-06T21:26:19.2408893Z   PG_PASSWORD: password
2024-03-06T21:26:19.2409287Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-06T21:26:19.2409763Z   POSTGRES_PORT: 5432
2024-03-06T21:26:19.2410134Z   PGHOST: localhost
2024-03-06T21:26:19.2410468Z   PGUSER: postgres
2024-03-06T21:26:19.2410837Z   RAILS_ENV: test
2024-03-06T21:26:19.2411218Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-03-06T21:26:19.2411660Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-03-06T21:26:19.2412146Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-06T21:26:19.2412606Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-06T21:26:19.2413196Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-06T21:26:19.2413833Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-06T21:26:19.2414472Z   EVENTS_READ: true
2024-03-06T21:26:19.2414898Z ##[endgroup]
2024-03-06T21:26:24.8174160Z W, [2024-03-06T21:26:24.817030 #2380]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-03-06T21:26:24.8176326Z W, [2024-03-06T21:26:24.817087 #2380]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-06T21:26:24.8178747Z W, [2024-03-06T21:26:24.817106 #2380]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-06T21:26:24.8184245Z W, [2024-03-06T21:26:24.817136 #2380]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-03-06T21:26:28.6349760Z W, [2024-03-06T21:26:28.634634 #2380]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-03-06T21:26:28.6351327Z W, [2024-03-06T21:26:28.634672 #2380]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-06T21:26:28.6353014Z W, [2024-03-06T21:26:28.634686 #2380]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-06T21:26:28.6355682Z W, [2024-03-06T21:26:28.634721 #2380]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-03-06T21:26:28.6405680Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/adjustments_requests_spec.rb" "spec/requests/admin/partners_requests_spec.rb" "spec/requests/barcode_items_requests_spec.rb" "spec/requests/donations_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-03-06T21:26:36.9282461Z 
2024-03-06T21:26:36.9283236Z Randomized with seed 33030
2024-03-06T21:26:37.8759611Z 
2024-03-06T21:26:37.8760373Z Managing requests
2024-03-06T21:26:37.8761347Z   creating a # individuals request
2024-03-06T21:26:37.8762414Z     GIVEN a partner user is permitted to make a request
2024-03-06T21:26:37.8764128Z       WHEN they create a request completely empty request
2024-03-06T21:26:50.6706175Z         should show an error message with the instructions
2024-03-06T21:26:50.6707410Z       WHEN they create a request improperly by not inputting anything
2024-03-06T21:26:51.5712095Z         should show an error message with the instructions
2024-03-06T21:26:51.5713148Z       WHEN they create a request with blank lines
2024-03-06T21:26:53.0135065Z         should be created without any issue
2024-03-06T21:26:53.0136217Z       WHEN they create a request with only a comment
2024-03-06T21:26:53.9623828Z         should be created without any issue
2024-03-06T21:26:53.9624798Z       WHEN they create a request properly
2024-03-06T21:26:53.9625759Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-06T21:26:56.0564860Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-03-06T21:26:56.0566158Z       Select Input Tests
2024-03-06T21:26:56.0566971Z         WHEN they reach the page
2024-03-06T21:26:56.9543022Z           should show the proper items in the select box
2024-03-06T21:26:56.9543807Z           WHEN they create a request improperly
2024-03-06T21:26:58.2589170Z             should show the proper items in the select box
2024-03-06T21:26:58.2590532Z   creating a new quantity request
2024-03-06T21:26:58.2591638Z     GIVEN a partner user is permitted to make a request
2024-03-06T21:26:58.2593256Z       WHEN they create a request with blank lines
2024-03-06T21:26:59.6195683Z         should be created without any issue
2024-03-06T21:26:59.6196583Z       Select Input Tests
2024-03-06T21:26:59.6197424Z         WHEN they reach the page
2024-03-06T21:27:00.4800917Z           should show the proper items in the select box
2024-03-06T21:27:00.4802092Z           WHEN they create a request improperly
2024-03-06T21:27:01.7746762Z             should show the proper items in the select box
2024-03-06T21:27:01.7748070Z       WHEN they create a request properly
2024-03-06T21:27:01.7749585Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-03-06T21:27:03.9792906Z           AND the partner_user can view the details of the created request in a seperate page
2024-03-06T21:27:03.9794037Z       WHEN they create a request completely empty request
2024-03-06T21:27:04.8560006Z         should show an error message with the instructions
2024-03-06T21:27:04.8560884Z       WHEN they create a request with only a comment
2024-03-06T21:27:05.7905818Z         should be created without any issue
2024-03-06T21:27:05.7907037Z 
2024-03-06T21:27:05.7908836Z Donations
2024-03-06T21:27:05.7909580Z   while signed in
2024-03-06T21:27:05.7911010Z     when an non-finalized audit has been performed on the donated items
2024-03-06T21:27:05.9987114Z       does not shows a warning
2024-03-06T21:27:05.9988134Z     GET #index
2024-03-06T21:27:05.9988602Z       html
2024-03-06T21:27:06.0517409Z         is expected to be successful
2024-03-06T21:27:06.0912935Z         should have the columns source and details
2024-03-06T21:27:06.0913899Z         when given a product drive
2024-03-06T21:27:06.1426766Z           should display Product Drive and the name of the drive
2024-03-06T21:27:06.1427753Z         when given a donation site
2024-03-06T21:27:06.1911583Z           should display Donation Site and the name of the site
2024-03-06T21:27:06.1912673Z         when given a misc donation
2024-03-06T21:27:06.2344371Z           should display Misc Donation and a truncated comment
2024-03-06T21:27:06.2345137Z         when given a manufacturer
2024-03-06T21:27:06.2827318Z           should display Manufacturer and the manufacturer name
2024-03-06T21:27:06.2828417Z       csv
2024-03-06T21:27:06.3075631Z         is expected to be successful
2024-03-06T21:27:06.3076518Z     GET #edit
2024-03-06T21:27:06.3077327Z       when an finalized audit has been performed on the donated items
2024-03-06T21:27:06.4441917Z         shows a warning
2024-03-06T21:27:06.4442789Z     when no audit has been performed
2024-03-06T21:27:06.5471368Z       doesn't show a warning
2024-03-06T21:27:06.5474400Z 
2024-03-06T21:27:06.5474674Z Dashboard
2024-03-06T21:27:06.5476148Z   With an existing essentials bank
2024-03-06T21:27:06.5477600Z     Manufacturer Donations
2024-03-06T21:27:07.5554335Z       has a link to create a new donation
2024-03-06T21:27:07.5556099Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-06T21:27:07.5557413Z         filtering to 'This Year'
2024-03-06T21:27:09.6607315Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-06T21:27:09.6609297Z       given 1 Manufacturer donating on 2024-03-04  (unless 'All Time'), 0 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-06T21:27:09.6610744Z         filtering to 'Yesterday'
2024-03-06T21:27:10.9960896Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-06T21:27:10.9962903Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-06T21:27:10.9964261Z         filtering to 'Last Month'
2024-03-06T21:27:12.5676429Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-03-06T21:27:12.5678463Z       given 1 Manufacturer donating on 2022-03-05  (unless 'All Time'), 8 during 2022-03-06..2023-11-09, and 1 on 2023-11-10
2024-03-06T21:27:12.5680096Z         filtering to '' (March 6, 2022 - November 9, 2023)
2024-03-06T21:27:15.0087779Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-06T21:27:15.0090011Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:15.0091313Z         filtering to 'All Time'
2024-03-06T21:27:16.4808445Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-03-06T21:27:16.4810436Z       given 1 Manufacturer donating on 2024-03-05  (unless 'All Time'), 6 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:16.4811903Z         filtering to 'Today'
2024-03-06T21:27:18.4956473Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-06T21:27:18.4958539Z       given 1 Manufacturer donating on 2024-02-29  (unless 'All Time'), 0 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-06T21:27:18.4959863Z         filtering to 'This Month'
2024-03-06T21:27:19.9972238Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-03-06T21:27:19.9974404Z       given 1 Manufacturer donating on 2024-02-28  (unless 'All Time'), 6 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:19.9975739Z         filtering to 'Last 7 Days'
2024-03-06T21:27:21.7686900Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-03-06T21:27:21.7688433Z       given 1 Manufacturer donating on 2024-02-05  (unless 'All Time'), 9 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:21.7689461Z         filtering to 'Last 30 Days'
2024-03-06T21:27:24.1316623Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-03-06T21:27:24.1317729Z     Inventory Totals
2024-03-06T21:27:24.1318605Z       Summary
2024-03-06T21:27:24.8344738Z         displays the on-hand totals
2024-03-06T21:27:24.8345607Z         when constrained to date range
2024-03-06T21:27:25.8873927Z           does not change
2024-03-06T21:27:25.8874855Z     Distributions
2024-03-06T21:27:26.8360881Z       has a link to create a new distribution
2024-03-06T21:27:26.8362572Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-06T21:27:26.8363893Z         filtering to 'Last Month'
2024-03-06T21:27:28.2477004Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-06T21:27:28.2478834Z       given 1 Distribution on 2024-02-05  (unless 'All Time'), 4 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:28.2480259Z         filtering to 'Last 30 Days'
2024-03-06T21:27:29.6984241Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-06T21:27:29.6986312Z       given 1 Distribution on 2024-03-04  (unless 'All Time'), 2 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-06T21:27:29.6987633Z         filtering to 'Yesterday'
2024-03-06T21:27:31.1416422Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-06T21:27:31.1417904Z       given 1 Distribution on 2024-02-29  (unless 'All Time'), 1 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-06T21:27:31.1418720Z         filtering to 'This Month'
2024-03-06T21:27:32.5103608Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-06T21:27:32.5105690Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:32.5107154Z         filtering to 'All Time'
2024-03-06T21:27:33.9019742Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-06T21:27:33.9021693Z       given 1 Distribution on 2022-03-05  (unless 'All Time'), 1 during 2022-03-06..2023-10-29, and 1 on 2023-10-30
2024-03-06T21:27:33.9022640Z         filtering to '' (March 6, 2022 - October 29, 2023)
2024-03-06T21:27:35.3040066Z           shows the correct total and 1 Recent Distribution link(s)
2024-03-06T21:27:35.3041956Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-06T21:27:35.3043389Z         filtering to 'This Year'
2024-03-06T21:27:36.7249848Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-06T21:27:36.7251728Z       given 1 Distribution on 2024-02-28  (unless 'All Time'), 4 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:36.7253556Z         filtering to 'Last 7 Days'
2024-03-06T21:27:38.1503437Z           shows the correct total and 3 Recent Distribution link(s)
2024-03-06T21:27:38.1505173Z       given 1 Distribution on 2024-03-05  (unless 'All Time'), 2 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:38.1506028Z         filtering to 'Today'
2024-03-06T21:27:39.5208324Z           shows the correct total and 2 Recent Distribution link(s)
2024-03-06T21:27:39.5209188Z     Purchases
2024-03-06T21:27:40.4331371Z       has a link to create a new purchase
2024-03-06T21:27:40.4332719Z       given 1 Purchase on 2024-03-05  (unless 'All Time'), 3 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:40.4333784Z         filtering to 'Today'
2024-03-06T21:27:42.0207138Z           shows correct 3 Recent Purchase link(s)
2024-03-06T21:27:42.0209017Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-06T21:27:42.0210495Z         filtering to 'Last Month'
2024-03-06T21:27:45.3355494Z           shows correct 0 Recent Purchase link(s)
2024-03-06T21:27:45.3357226Z       given 1 Purchase on 2024-03-04  (unless 'All Time'), 2 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-06T21:27:45.3358147Z         filtering to 'Yesterday'
2024-03-06T21:27:46.7105088Z           shows correct 2 Recent Purchase link(s)
2024-03-06T21:27:46.7106802Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-06T21:27:46.7108633Z         filtering to 'This Year'
2024-03-06T21:27:48.1862159Z           shows correct 3 Recent Purchase link(s)
2024-03-06T21:27:48.1864166Z       given 1 Purchase on 2024-02-28  (unless 'All Time'), 3 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:48.1865468Z         filtering to 'Last 7 Days'
2024-03-06T21:27:49.6496236Z           shows correct 3 Recent Purchase link(s)
2024-03-06T21:27:49.6497675Z       given 1 Purchase on 2024-02-29  (unless 'All Time'), 4 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-06T21:27:49.6498533Z         filtering to 'This Month'
2024-03-06T21:27:51.1680699Z           shows correct 3 Recent Purchase link(s)
2024-03-06T21:27:51.1682084Z       given 1 Purchase on 2022-03-05  (unless 'All Time'), 1 during 2022-03-06..2023-12-22, and 1 on 2023-12-23
2024-03-06T21:27:51.1683105Z         filtering to '' (March 6, 2022 - December 22, 2023)
2024-03-06T21:27:52.5669548Z           shows correct 1 Recent Purchase link(s)
2024-03-06T21:27:52.5671072Z       given 1 Purchase on 2024-02-05  (unless 'All Time'), 4 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:52.5672385Z         filtering to 'Last 30 Days'
2024-03-06T21:27:54.1114425Z           shows correct 3 Recent Purchase link(s)
2024-03-06T21:27:54.1115533Z     Donations
2024-03-06T21:27:55.0122679Z       has a link to create a new donation
2024-03-06T21:27:55.0124343Z       given 1 Donation on 2024-01-31 (only if a valid date), 4 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-06T21:27:55.0125592Z         filtering to 'Last Month'
2024-03-06T21:27:56.4818927Z           shows the correct total and 3 Recent Donation link(s)
2024-03-06T21:27:56.4820843Z       given 1 Donation on 2024-02-05 (only if a valid date), 2 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:27:56.4822396Z         filtering to 'Last 30 Days'
2024-03-06T21:27:57.8910064Z           shows the correct total and 2 Recent Donation link(s)
2024-03-06T21:27:57.8912056Z       given 1 Donation on 2024-03-04 (only if a valid date), 0 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-06T21:27:57.8913305Z         filtering to 'Yesterday'
2024-03-06T21:28:01.2302721Z           shows the correct total and 0 Recent Donation link(s)
2024-03-06T21:28:01.2304732Z       given 1 Donation on 2024-03-05 (only if a valid date), 4 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:28:01.2305691Z         filtering to 'Today'
2024-03-06T21:28:02.6936396Z           shows the correct total and 3 Recent Donation link(s)
2024-03-06T21:28:02.6938104Z       given 1 Donation on 2024-02-28 (only if a valid date), 2 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:28:02.6939415Z         filtering to 'Last 7 Days'
2024-03-06T21:28:04.0981539Z           shows the correct total and 2 Recent Donation link(s)
2024-03-06T21:28:04.0996029Z       given 1 Donation on 2024-02-29 (only if a valid date), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-06T21:28:04.1007717Z         filtering to 'This Month'
2024-03-06T21:28:05.6428715Z           shows the correct total and 3 Recent Donation link(s)
2024-03-06T21:28:05.6430518Z       given 1 Donation on 2023-12-31 (only if a valid date), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-06T21:28:05.6431770Z         filtering to 'This Year'
2024-03-06T21:28:07.1000323Z           shows the correct total and 3 Recent Donation link(s)
2024-03-06T21:28:07.1001781Z       given 1 Donation on 2022-03-05 (only if a valid date), 3 during 2022-03-06..2024-02-12, and 1 on 2024-02-13
2024-03-06T21:28:07.1002984Z         filtering to '' (March 6, 2022 - February 12, 2024)
2024-03-06T21:28:08.5598299Z           shows the correct total and 3 Recent Donation link(s)
2024-03-06T21:28:08.5599264Z     Product Drives
2024-03-06T21:28:09.1310146Z       has a widget for product drive summary data
2024-03-06T21:28:09.1312085Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-03-06T21:28:09.1314014Z         filtering to 'Last Month'
2024-03-06T21:28:10.4903268Z           shows 1 Recent Donation link(s)
2024-03-06T21:28:11.8507783Z           shows the correct total money raised
2024-03-06T21:28:13.1936430Z           shows the correct total donations
2024-03-06T21:28:13.1938297Z       given 1 Product Drive Donation on 2024-02-28 (unless 'All Time'), 2 during 2024-02-29..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:28:13.1939765Z         filtering to 'Last 7 Days'
2024-03-06T21:28:14.7521235Z           shows the correct total money raised
2024-03-06T21:28:16.1537282Z           shows the correct total donations
2024-03-06T21:28:17.5486976Z           shows 2 Recent Donation link(s)
2024-03-06T21:28:17.5488982Z       given 1 Product Drive Donation on 2024-02-29 (unless 'All Time'), 3 during 2024-03-01..2024-03-31, and 1 on 2024-04-01
2024-03-06T21:28:17.5490400Z         filtering to 'This Month'
2024-03-06T21:28:19.0050340Z           shows the correct total money raised
2024-03-06T21:28:20.4969912Z           shows the correct total donations
2024-03-06T21:28:21.9698659Z           shows 3 Recent Donation link(s)
2024-03-06T21:28:21.9699655Z       Product drive behaviour with Mixed Donation types
2024-03-06T21:28:22.8212369Z         only shows product drive donations as product drive donations
2024-03-06T21:28:23.5087500Z         only counts product drive money raised
2024-03-06T21:28:24.1883592Z         only counts product drive donations for product drive
2024-03-06T21:28:24.1885485Z       given 1 Product Drive Donation on 2024-03-04 (unless 'All Time'), 0 during 2024-03-05..2024-03-05, and 1 on 2024-03-06
2024-03-06T21:28:24.1887003Z         filtering to 'Yesterday'
2024-03-06T21:28:25.5077408Z           shows the correct total money raised
2024-03-06T21:28:28.8165357Z           shows 0 Recent Donation link(s)
2024-03-06T21:28:30.1319247Z           shows the correct total donations
2024-03-06T21:28:30.1320918Z       given 1 Product Drive Donation on 2022-03-05 (unless 'All Time'), 1 during 2022-03-06..2023-09-15, and 1 on 2023-09-16
2024-03-06T21:28:30.1321881Z         filtering to '' (March 6, 2022 - September 15, 2023)
2024-03-06T21:28:31.5087251Z           shows 1 Recent Donation link(s)
2024-03-06T21:28:32.9591305Z           shows the correct total money raised
2024-03-06T21:28:34.3245333Z           shows the correct total donations
2024-03-06T21:28:34.3247169Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-03-06T21:28:34.3248724Z         filtering to 'This Year'
2024-03-06T21:28:35.6327212Z           shows the correct total money raised
2024-03-06T21:28:36.9368245Z           shows the correct total donations
2024-03-06T21:28:40.2777133Z           shows 0 Recent Donation link(s)
2024-03-06T21:28:40.2779079Z       given 1 Product Drive Donation on 2024-02-05 (unless 'All Time'), 1 during 2024-02-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:28:40.2780438Z         filtering to 'Last 30 Days'
2024-03-06T21:28:41.6416278Z           shows 1 Recent Donation link(s)
2024-03-06T21:28:43.0123917Z           shows the correct total money raised
2024-03-06T21:28:44.3572070Z           shows the correct total donations
2024-03-06T21:28:44.3573774Z       given 1 Product Drive Donation on 2024-03-05 (unless 'All Time'), 3 during 2024-03-06..2024-03-06, and 1 on 2024-03-07
2024-03-06T21:28:44.3574982Z         filtering to 'Today'
2024-03-06T21:28:45.9358020Z           shows the correct total donations
2024-03-06T21:28:47.3845010Z           shows the correct total money raised
2024-03-06T21:28:48.8055981Z           shows 3 Recent Donation link(s)
2024-03-06T21:28:48.8056829Z     Signage
2024-03-06T21:28:51.6718159Z       shows their organization name unless they have a logo set
2024-03-06T21:28:51.6719338Z   With a new essentials bank
2024-03-06T21:29:19.5907184Z     displays the getting started guide until the steps are completed
2024-03-06T21:29:19.5908994Z 
2024-03-06T21:29:19.5909467Z Admin Organization Management
2024-03-06T21:29:19.5910529Z   While signed in as an Administrative User with no organization (super admin no org)
2024-03-06T21:29:21.5704942Z     creates a new organization
2024-03-06T21:29:21.5705640Z   While signed in as an Administrative User (super admin)
2024-03-06T21:29:22.6259142Z     filters by organizations by name in organizations index page
2024-03-06T21:29:24.0303704Z     can view organization details
2024-03-06T21:29:25.8673469Z     creates a new organization
2024-03-06T21:29:25.8674117Z 
2024-03-06T21:29:25.8676347Z /partners/children
2024-03-06T21:29:25.8677052Z   GET #index
2024-03-06T21:29:25.9451844Z     should export CSV
2024-03-06T21:29:26.0022853Z     should render without any issues
2024-03-06T21:29:26.0023714Z 
2024-03-06T21:29:26.0024539Z Vendor
2024-03-06T21:29:26.0026259Z   When a user views the index page
2024-03-06T21:29:26.4534130Z     should have the vendor names in alphabetical order
2024-03-06T21:29:26.4535183Z   when editing an existing vendor
2024-03-06T21:29:27.1798567Z     does not update a vendor with empty attributes
2024-03-06T21:29:27.9131511Z     can update the contact info for a vendor as a user
2024-03-06T21:29:27.9132587Z   When vendor have purchases associated with them already
2024-03-06T21:29:28.5837999Z     can have a single vendor show semi-detailed stats about purchases
2024-03-06T21:29:29.1467911Z     can have existing vendors show in the #index with some summary stats
2024-03-06T21:29:29.1468625Z   when creating a new vendor
2024-03-06T21:29:29.8771525Z     cannot add a new vendor instance with empty attributes
2024-03-06T21:29:30.6185456Z     can create a new vendor instance as a user
2024-03-06T21:29:30.6186009Z 
2024-03-06T21:29:30.6186304Z User account management
2024-03-06T21:29:30.6188245Z   when not in staging
2024-03-06T21:29:31.3876337Z     should fail when the email is invalid
2024-03-06T21:29:32.2305197Z     should change the email
2024-03-06T21:29:33.0916761Z     should change an user name
2024-03-06T21:29:33.0917704Z   when in staging
2024-03-06T21:29:33.5333631Z     should not allow the user to change staging credentials
2024-03-06T21:29:33.9679722Z     should display staging warning
2024-03-06T21:29:33.9680499Z 
2024-03-06T21:29:33.9680823Z Purchases
2024-03-06T21:29:33.9682489Z   while signed in as an organization admin
2024-03-06T21:29:34.7991626Z     allows deletion of a purchase
2024-03-06T21:29:34.7992521Z   while signed in as a normal user
2024-03-06T21:29:34.7993184Z     When creating a new purchase
2024-03-06T21:29:35.2754465Z       should not display inactive storage locations in dropdown
2024-03-06T21:29:35.2755443Z       via barcode entry
2024-03-06T21:29:36.0614268Z         a user can add items via scanning them in by barcode
2024-03-06T21:29:36.9423408Z         User scan same barcode 2 times
2024-03-06T21:29:38.1082771Z         a user can add items that do not yet have a barcode
2024-03-06T21:29:38.1083731Z       Editing purchase
2024-03-06T21:29:38.5825192Z         A user can see purchased_from value
2024-03-06T21:29:39.1796208Z         A user can view another organizations purchase
2024-03-06T21:29:39.1797228Z       via manual entry
2024-03-06T21:29:40.0509947Z         User can create a purchase using dollars decimal amount
2024-03-06T21:29:41.1149419Z         User can create a purchase IN THE PAST
2024-03-06T21:29:42.4075020Z         multiple line items for the same item type are accepted and combined on the backend
2024-03-06T21:29:43.4106639Z         Does not include inactive items in the line item fields
2024-03-06T21:29:44.4210122Z         User can create vendor from purchase
2024-03-06T21:29:44.4210780Z         when creating a purchase incorrectly
2024-03-06T21:29:45.3662464Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-03-06T21:29:46.1527554Z           should display failure with error messages
2024-03-06T21:29:46.1528516Z     When visiting the index page
2024-03-06T21:29:46.1529556Z       When filtering on the index page
2024-03-06T21:29:46.9726742Z         User can filter the #index by storage location
2024-03-06T21:29:47.7709381Z         User can filter the #index by vendor
2024-03-06T21:29:47.7710642Z         behaves like Date Range Picker
2024-03-06T21:29:47.7711823Z           when choosing 'All Time'
2024-03-06T21:29:48.7351661Z             shows all the records
2024-03-06T21:29:48.7352930Z           when choosing a date range that only includes the previous week
2024-03-06T21:29:49.6383181Z             shows only 1 record
2024-03-06T21:29:49.6384613Z           when choosing 'Last Month'
2024-03-06T21:29:50.5769188Z             shows only 2 of the records
2024-03-06T21:29:50.5770122Z       In the middle of the year
2024-03-06T21:29:51.2939333Z         User sees purchased date column
2024-03-06T21:29:52.0385913Z         User can click to the new purchase form
2024-03-06T21:29:52.7674775Z         User sees total purchases value
2024-03-06T21:29:52.7675860Z     When visiting an existing purchase
2024-03-06T21:29:53.2139716Z       does not allow deletion of a purchase
2024-03-06T21:29:53.2140525Z 
2024-03-06T21:29:53.2140839Z Profiles
2024-03-06T21:29:53.2142394Z   GET #edit
2024-03-06T21:29:53.3201644Z     returns http success
2024-03-06T21:29:53.3202355Z   POST #update
2024-03-06T21:29:53.3202913Z     successful save
2024-03-06T21:29:53.3637796Z       update partner
2024-03-06T21:29:53.4044462Z       redirects to #show
2024-03-06T21:29:53.4045570Z     when updating an existing value to a blank value
2024-03-06T21:29:53.4438789Z       should have blank values
2024-03-06T21:29:53.4850135Z       update partner
2024-03-06T21:29:53.4851782Z 
2024-03-06T21:29:53.4852227Z StorageLocations
2024-03-06T21:29:53.4853202Z   While not signed in
2024-03-06T21:29:53.4912569Z     redirects the user to the sign-in page for CRUD actions
2024-03-06T21:29:53.4913576Z   While signed in
2024-03-06T21:29:53.4914240Z     Looking at a different organization
2024-03-06T21:29:53.6623120Z       redirects the user to the sign-in page for CRUD actions
2024-03-06T21:29:53.6624586Z     PUT #reactivate
2024-03-06T21:29:53.6802046Z       undiscards
2024-03-06T21:29:53.6802661Z     GET #index
2024-03-06T21:29:53.6803980Z       csv
2024-03-06T21:29:53.6988875Z         succeeds
2024-03-06T21:29:53.8046234Z         includes headers followed by alphabetized item names
2024-03-06T21:29:53.8047609Z       html
2024-03-06T21:29:53.8411692Z         succeeds
2024-03-06T21:29:53.8412264Z         with inactive locations
2024-03-06T21:29:53.8769374Z           does not includes the inactive location
2024-03-06T21:29:53.8770321Z           with include_inactive_locations
2024-03-06T21:29:53.9141274Z             includes the inactive location
2024-03-06T21:29:53.9142149Z     PUT #deactivate
2024-03-06T21:29:53.9336086Z       discards
2024-03-06T21:29:53.9809199Z       with inventory
2024-03-06T21:29:53.9809874Z         does not discard
2024-03-06T21:29:53.9810746Z     POST #import_csv
2024-03-06T21:29:53.9811367Z       without a csv file
2024-03-06T21:29:53.9929313Z         presents a flash error message
2024-03-06T21:29:54.0045679Z         redirects to :index
2024-03-06T21:29:54.0046431Z       csv file with wrong headers
2024-03-06T21:29:54.0169011Z         redirects
2024-03-06T21:29:54.0291829Z         presents a flash error message
2024-03-06T21:29:54.0292579Z       with a csv file
2024-03-06T21:29:54.0444856Z         redirects
2024-03-06T21:29:54.0503044Z         invokes .import_csv
2024-03-06T21:29:54.0657185Z         presents a flash notice message
2024-03-06T21:29:54.0658044Z     GET #destroy
2024-03-06T21:29:54.0942378Z       redirects to #index
2024-03-06T21:29:54.0942982Z     GET #show
2024-03-06T21:29:54.0943714Z       html
2024-03-06T21:29:54.1656483Z         should return a correct response
2024-03-06T21:29:54.1657339Z         with version date set
2024-03-06T21:29:54.1658214Z           with no version found
2024-03-06T21:29:54.2392753Z             should show N/A
2024-03-06T21:29:54.2393597Z           with a version found
2024-03-06T21:29:54.3160027Z             should show the version specified
2024-03-06T21:29:54.3160878Z       csv
2024-03-06T21:29:54.3654707Z         should be successful
2024-03-06T21:29:54.3655836Z     GET #edit
2024-03-06T21:29:55.0471981Z       returns http success
2024-03-06T21:29:55.0472723Z     GET #inventory
2024-03-06T21:29:55.0473878Z       when also including omitted items
2024-03-06T21:29:55.0968338Z         returns a collection that also includes all items, but with zeroed quantities
2024-03-06T21:29:55.1423285Z         contains a collection of ducktyped entries that respond the same
2024-03-06T21:29:55.1424803Z       when also including inactive items
2024-03-06T21:29:55.2034841Z         returns a collection that also includes items that have been deactivated
2024-03-06T21:29:55.2035919Z       without any overrides
2024-03-06T21:29:55.2525768Z         returns a collection that only includes items at the storage location
2024-03-06T21:29:55.2526828Z     GET #new
2024-03-06T21:29:55.2823152Z       returns http success
2024-03-06T21:29:55.2824468Z 
2024-03-06T21:29:55.2825031Z Adjustments
2024-03-06T21:29:55.2825868Z   while signed in
2024-03-06T21:29:55.2827272Z     GET #new
2024-03-06T21:29:55.3240013Z       is successful
2024-03-06T21:29:55.3240638Z     POST #create
2024-03-06T21:29:55.3241215Z       with valid params
2024-03-06T21:29:55.3542912Z         assigns a user id from the current user
2024-03-06T21:29:55.3810256Z         redirects to the #show after created adjustment
2024-03-06T21:29:55.4086232Z         creates a new Adjustment
2024-03-06T21:29:55.4349225Z         assigns a newly created adjustment as @adjustment
2024-03-06T21:29:55.4349934Z       with invalid params
2024-03-06T21:29:55.4805887Z         assigns a newly created but unsaved adjustment as @adjustment
2024-03-06T21:29:55.5170896Z         re-renders the 'new' template
2024-03-06T21:29:55.5171921Z     GET #index
2024-03-06T21:29:55.5172540Z       html
2024-03-06T21:29:55.5597072Z         is successful
2024-03-06T21:29:55.5597967Z         when filtering by date
2024-03-06T21:29:55.5598776Z           when date parameters are not supplied
2024-03-06T21:29:55.6116869Z             returns all objects
2024-03-06T21:29:55.6118000Z           when date parameters are supplied
2024-03-06T21:29:55.6606732Z             only returns the correct objects
2024-03-06T21:29:55.6607554Z       csv
2024-03-06T21:29:55.6842349Z         is expected to be successful
2024-03-06T21:29:55.6843213Z     GET #show
2024-03-06T21:29:55.7194610Z       is expected to be successful
2024-03-06T21:29:55.7195555Z 
2024-03-06T21:29:55.7197788Z Organization management
2024-03-06T21:29:55.7198514Z   while signed in as an organization admin
2024-03-06T21:29:56.6594403Z     can add a new user to an organization
2024-03-06T21:29:57.1551041Z     can see 'Make user' button for admins
2024-03-06T21:29:58.1704974Z     can re-activate a user in the organization
2024-03-06T21:29:58.6538489Z     can re-invite a user to an organization after 7 days
2024-03-06T21:29:59.6066812Z     can deactivate a user in the organization
2024-03-06T21:29:59.6067757Z     Viewing the organization
2024-03-06T21:30:00.1544910Z       can view organization details
2024-03-06T21:30:00.1545803Z     Editing the organization
2024-03-06T21:30:00.9745609Z       can set a default storage location on the organization
2024-03-06T21:30:01.9874393Z       can select if the org shows year-to-date values on the distribution printout
2024-03-06T21:30:02.9249656Z       can enable if the org uses single step invite and approve partner process
2024-03-06T21:30:03.7446817Z       can set the NDBN Member ID
2024-03-06T21:30:04.6898591Z       can select if the org repackages essentials
2024-03-06T21:30:05.6355789Z       can disable if the org does NOT use single step invite and approve partner process
2024-03-06T21:30:06.7833183Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-03-06T21:30:07.7253430Z       can select if the org distributes essentials monthly
2024-03-06T21:30:09.0972629Z       can select and deselect Required Partner Fields
2024-03-06T21:30:09.9387693Z       can set a reminder and a deadline day
2024-03-06T21:30:09.9388801Z   while signed in as a normal user
2024-03-06T21:30:10.4070892Z     cannot see 'Make user' button for admins
2024-03-06T21:30:10.8661364Z     can see summary details about the organization as a user
2024-03-06T21:30:10.8661998Z 
2024-03-06T21:30:10.8662249Z Admin::Partners
2024-03-06T21:30:10.8923073Z   When logged in as a super admin
2024-03-06T21:30:10.8923657Z     GET #index
2024-03-06T21:30:10.9035686Z       returns http success
2024-03-06T21:30:10.9036245Z     GET #edit
2024-03-06T21:30:10.9538548Z       returns http success
2024-03-06T21:30:10.9539096Z     PUT #update
2024-03-06T21:30:10.9539866Z       unsuccessful save due to empty params
2024-03-06T21:30:11.0057365Z         renders #edit template with error message
2024-03-06T21:30:11.0058066Z       successful save
2024-03-06T21:30:11.0408147Z         updates partner
2024-03-06T21:30:11.0747391Z         redirects
2024-03-06T21:30:11.0747922Z     GET #show
2024-03-06T21:30:11.1235858Z       returns http success
2024-03-06T21:30:11.1236605Z 
2024-03-06T21:30:11.1236911Z Kit management
2024-03-06T21:30:12.5702688Z   can allocate and deallocate quantity per storage location from kit index
2024-03-06T21:30:13.1275618Z   should not display inactive storage locations under allocations
2024-03-06T21:30:14.0135757Z   can create a new kit as a user with the proper quantity
2024-03-06T21:30:14.0136581Z   when there is no kit quantity
2024-03-06T21:30:15.1106601Z     will not change quantity amounts when deallocating
2024-03-06T21:30:15.1107567Z   when there is not enough quantity of the items contained in the kit on-hand
2024-03-06T21:30:16.1911148Z     will not change quantity amounts when allocating
2024-03-06T21:30:16.1912279Z 
2024-03-06T21:30:16.1912550Z BarcodeItems
2024-03-06T21:30:16.1913909Z   While signed in
2024-03-06T21:30:16.1915412Z     GET #new
2024-03-06T21:30:16.2255842Z       returns http success
2024-03-06T21:30:16.2256451Z     Looking at a different organization
2024-03-06T21:30:16.4031634Z       redirects the user to the sign-in page for CRUD actions
2024-03-06T21:30:16.4032402Z     GET #edit
2024-03-06T21:30:16.4032923Z       with a global barcode item
2024-03-06T21:30:16.4347211Z         returns a 404
2024-03-06T21:30:16.4347809Z       with a normal barcode item
2024-03-06T21:30:16.4746257Z         returns http success
2024-03-06T21:30:16.4748586Z     DELETE #destroy
2024-03-06T21:30:16.6683018Z       disallows a user to delete someone else's barcode
2024-03-06T21:30:16.6867332Z       disallows a non-superadmin to delete a global barcode
2024-03-06T21:30:16.7168480Z       redirects to the index
2024-03-06T21:30:16.7169018Z     GET #index
2024-03-06T21:30:16.7170038Z       html
2024-03-06T21:30:16.7562006Z         is expected to be successful
2024-03-06T21:30:16.7562635Z       csv
2024-03-06T21:30:16.7772932Z         is expected to be successful
2024-03-06T21:30:16.7773556Z     GET #show
2024-03-06T21:30:16.7774248Z       with a normal barcode item
2024-03-06T21:30:16.8108044Z         returns http success
2024-03-06T21:30:16.8108648Z       with a global barcode item
2024-03-06T21:30:16.8385656Z         returns a 404
2024-03-06T21:30:16.8386156Z     GET #find
2024-03-06T21:30:16.8386940Z       via ajax
2024-03-06T21:30:17.0420276Z         can find a barcode that is scoped to just this organization
2024-03-06T21:30:17.2447237Z         can find a barcode that's universally available
2024-03-06T21:30:17.2447971Z         when it's missing
2024-03-06T21:30:17.4496872Z           returns a 404
2024-03-06T21:30:17.4498336Z 
2024-03-06T21:30:17.4498574Z /partners/profiles
2024-03-06T21:30:17.4499828Z   GET #edit
2024-03-06T21:30:17.5452181Z     does not have default radio button value when value is nil
2024-03-06T21:30:17.6274495Z     displays the partner
2024-03-06T21:30:17.7134801Z     has "Yes" radio button value when value is true
2024-03-06T21:30:17.7991628Z     has "No" radio button value when value is false
2024-03-06T21:30:17.7992742Z   GET #show
2024-03-06T21:30:17.8531672Z     displays the partner
2024-03-06T21:30:17.9066079Z     shows correct values for yes/no buttons
2024-03-06T21:30:17.9067103Z   PUT #update
2024-03-06T21:30:17.9568313Z     updates the partner and profile
2024-03-06T21:30:17.9568922Z     with no social media
2024-03-06T21:30:18.0513083Z       shows an error
2024-03-06T21:30:18.0513872Z     when updating an existing value to a blank value
2024-03-06T21:30:18.1041498Z       does store N/A in the database
2024-03-06T21:30:18.1529568Z       updates the partner profile attribute to a blank value
2024-03-06T21:30:18.2023034Z       does not update other partner profile attributes to blank
2024-03-06T21:30:18.2632201Z W, [2024-03-06T13:30:18.263016 #2416]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-03-06T21:30:18.2633727Z W, [2024-03-06T13:30:18.263058 #2416]  WARN -- : [knapsack_pro] Request failed due to:
2024-03-06T21:30:18.2635998Z W, [2024-03-06T13:30:18.263083 #2416]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-03-06T21:30:18.2638679Z W, [2024-03-06T13:30:18.263113 #2416]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-03-06T21:30:18.2642117Z 
2024-03-06T21:30:18.2643912Z Finished in 3 minutes 41.3 seconds (files took 8.06 seconds to load)
2024-03-06T21:30:18.2644772Z 233 examples, 0 failures
2024-03-06T21:30:18.2645108Z 
2024-03-06T21:30:18.2645321Z Randomized with seed 33030
2024-03-06T21:30:18.2649649Z 
2024-03-06T21:30:18.5588018Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3875 / 6473 LOC (59.86%) covered.
2024-03-06T21:30:19.0634202Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10760 LOC (0.35%) covered.
