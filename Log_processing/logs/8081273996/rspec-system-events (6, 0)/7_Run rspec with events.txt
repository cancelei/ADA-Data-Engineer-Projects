2024-02-28T13:36:35.8785262Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-28T13:36:35.8786273Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-28T13:36:35.8814725Z shell: /usr/bin/bash -e {0}
2024-02-28T13:36:35.8815276Z env:
2024-02-28T13:36:35.8815644Z   POSTGRES_HOST: localhost
2024-02-28T13:36:35.8816117Z   DATABASE_HOST: localhost
2024-02-28T13:36:35.8816665Z   PG_USERNAME: postgres
2024-02-28T13:36:35.8817111Z   PG_PASSWORD: password
2024-02-28T13:36:35.8817569Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-28T13:36:35.8818121Z   POSTGRES_PORT: 5432
2024-02-28T13:36:35.8818561Z   PGHOST: localhost
2024-02-28T13:36:35.8818978Z   PGUSER: postgres
2024-02-28T13:36:35.8819479Z   RAILS_ENV: test
2024-02-28T13:36:35.8819921Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-28T13:36:35.8820440Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-28T13:36:35.8821016Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-28T13:36:35.8821566Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-28T13:36:35.8822341Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-28T13:36:35.8823099Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-28T13:36:35.8823949Z   EVENTS_READ: true
2024-02-28T13:36:35.8824414Z ##[endgroup]
2024-02-28T13:36:41.4697097Z W, [2024-02-28T13:36:41.469308 #2321]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-28T13:36:41.4700551Z W, [2024-02-28T13:36:41.469365 #2321]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-28T13:36:41.4704267Z W, [2024-02-28T13:36:41.469385 #2321]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-28T13:36:41.4714426Z W, [2024-02-28T13:36:41.469409 #2321]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-28T13:36:44.1209459Z W, [2024-02-28T13:36:44.120592 #2321]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-28T13:36:44.1210739Z W, [2024-02-28T13:36:44.120637 #2321]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-28T13:36:44.1212187Z W, [2024-02-28T13:36:44.120655 #2321]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-28T13:36:44.1214567Z W, [2024-02-28T13:36:44.120696 #2321]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-28T13:36:44.1265929Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-28T13:36:52.3295367Z 
2024-02-28T13:36:52.3296518Z Randomized with seed 65461
2024-02-28T13:36:53.2252876Z 
2024-02-28T13:36:53.2253608Z Purchases
2024-02-28T13:36:53.2254944Z   while signed in as a normal user
2024-02-28T13:36:53.2255931Z     When creating a new purchase
2024-02-28T13:36:54.9123327Z       should not display inactive storage locations in dropdown
2024-02-28T13:36:54.9124494Z       Editing purchase
2024-02-28T13:36:55.5498511Z         A user can view another organizations purchase
2024-02-28T13:36:56.0833895Z         A user can see purchased_from value
2024-02-28T13:36:56.0834884Z       via barcode entry
2024-02-28T13:36:57.2161425Z         a user can add items via scanning them in by barcode
2024-02-28T13:36:58.4126936Z         a user can add items that do not yet have a barcode
2024-02-28T13:36:59.3025317Z         User scan same barcode 2 times
2024-02-28T13:36:59.3026330Z       via manual entry
2024-02-28T13:37:00.3404660Z         User can create vendor from purchase
2024-02-28T13:37:01.8279740Z         User can create a purchase IN THE PAST
2024-02-28T13:37:02.8210084Z         Does not include inactive items in the line item fields
2024-02-28T13:37:04.0377011Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-28T13:37:04.9876001Z         User can create a purchase using dollars decimal amount
2024-02-28T13:37:04.9876684Z         when creating a purchase incorrectly
2024-02-28T13:37:05.7825507Z           should display failure with error messages
2024-02-28T13:37:06.7544022Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-28T13:37:06.7545257Z     When visiting the index page
2024-02-28T13:37:06.7545916Z       When filtering on the index page
2024-02-28T13:37:07.5631017Z         User can filter the #index by vendor
2024-02-28T13:37:08.3811063Z         User can filter the #index by storage location
2024-02-28T13:37:08.3812050Z         behaves like Date Range Picker
2024-02-28T13:37:08.3813192Z           when choosing 'All Time'
2024-02-28T13:37:09.3250390Z             shows all the records
2024-02-28T13:37:09.3251262Z           when choosing 'Last Month'
2024-02-28T13:37:10.2590713Z             shows only 2 of the records
2024-02-28T13:37:10.2592419Z           when choosing a date range that only includes the previous week
2024-02-28T13:37:11.1866920Z             shows only 1 record
2024-02-28T13:37:11.1867891Z       In the middle of the year
2024-02-28T13:37:11.9512594Z         User can click to the new purchase form
2024-02-28T13:37:12.6657930Z         User sees purchased date column
2024-02-28T13:37:13.4146350Z         User sees total purchases value
2024-02-28T13:37:13.4147546Z     When visiting an existing purchase
2024-02-28T13:37:13.8741497Z       does not allow deletion of a purchase
2024-02-28T13:37:13.8742657Z   while signed in as an organization admin
2024-02-28T13:37:14.7286242Z     allows deletion of a purchase
2024-02-28T13:37:14.7287198Z 
2024-02-28T13:37:14.7287467Z Vendor
2024-02-28T13:37:14.7289721Z   When vendor have purchases associated with them already
2024-02-28T13:37:15.3232233Z     can have a single vendor show semi-detailed stats about purchases
2024-02-28T13:37:15.9161717Z     can have existing vendors show in the #index with some summary stats
2024-02-28T13:37:15.9162721Z   When a user views the index page
2024-02-28T13:37:16.4535502Z     should have the vendor names in alphabetical order
2024-02-28T13:37:16.4536350Z   when creating a new vendor
2024-02-28T13:37:17.2197891Z     can create a new vendor instance as a user
2024-02-28T13:37:17.9219061Z     cannot add a new vendor instance with empty attributes
2024-02-28T13:37:17.9219987Z   when editing an existing vendor
2024-02-28T13:37:18.6766479Z     can update the contact info for a vendor as a user
2024-02-28T13:37:19.4337675Z     does not update a vendor with empty attributes
2024-02-28T13:37:19.4338302Z 
2024-02-28T13:37:19.4338510Z Kit management
2024-02-28T13:37:20.0071135Z   should not display inactive storage locations under allocations
2024-02-28T13:37:21.4422836Z   can allocate and deallocate quantity per storage location from kit index
2024-02-28T13:37:22.3341605Z   can create a new kit as a user with the proper quantity
2024-02-28T13:37:22.3343144Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-28T13:37:23.4170475Z     will not change quantity amounts when allocating
2024-02-28T13:37:23.4171344Z   when there is no kit quantity
2024-02-28T13:37:24.5155613Z     will not change quantity amounts when deallocating
2024-02-28T13:37:24.5156425Z 
2024-02-28T13:37:24.5156809Z Organization management
2024-02-28T13:37:24.5158359Z   while signed in as a normal user
2024-02-28T13:37:25.1676727Z     can see summary details about the organization as a user
2024-02-28T13:37:25.6316636Z     cannot see 'Make user' button for admins
2024-02-28T13:37:25.6317327Z   while signed in as an organization admin
2024-02-28T13:37:26.5773133Z     can add a new user to an organization
2024-02-28T13:37:27.0801033Z     can re-invite a user to an organization after 7 days
2024-02-28T13:37:27.5818496Z     can see 'Make user' button for admins
2024-02-28T13:37:28.6095478Z     can re-activate a user in the organization
2024-02-28T13:37:29.6700575Z     can deactivate a user in the organization
2024-02-28T13:37:29.6701380Z     Editing the organization
2024-02-28T13:37:30.5297767Z       can set a reminder and a deadline day
2024-02-28T13:37:31.5181635Z       can select if the org shows year-to-date values on the distribution printout
2024-02-28T13:37:32.9886691Z       can select and deselect Required Partner Fields
2024-02-28T13:37:33.8414990Z       can set a default storage location on the organization
2024-02-28T13:37:34.7444477Z       can set the NDBN Member ID
2024-02-28T13:37:35.7412503Z       can select if the org distributes essentials monthly
2024-02-28T13:37:36.7771316Z       can select if the org repackages essentials
2024-02-28T13:37:37.9611246Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-28T13:37:38.9457790Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-28T13:37:39.9394295Z       can enable if the org uses single step invite and approve partner process
2024-02-28T13:37:39.9395565Z     Viewing the organization
2024-02-28T13:37:40.4954129Z       can view organization details
2024-02-28T13:37:40.4955363Z 
2024-02-28T13:37:40.4955642Z Audits
2024-02-28T13:37:40.4957626Z   while signed in as an organization admin
2024-02-28T13:37:40.4959914Z     POST #finalize
2024-02-28T13:37:40.5765751Z       sets the finalize status and saves an event
2024-02-28T13:37:40.5766614Z     GET #show
2024-02-28T13:37:40.6300138Z       is successful
2024-02-28T13:37:40.6301016Z     POST #create
2024-02-28T13:37:40.6301664Z       with invalid params
2024-02-28T13:37:40.6700707Z         re-renders the 'new' template
2024-02-28T13:37:40.7127406Z         assigns a newly created but unsaved audit as @audit
2024-02-28T13:37:40.7698761Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-28T13:37:40.7700005Z       with valid params
2024-02-28T13:37:40.8087023Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-28T13:37:40.8448425Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-28T13:37:40.8812611Z         creates a new Audit
2024-02-28T13:37:40.9184663Z         redirects to the #show after created audit
2024-02-28T13:37:40.9553314Z         assigns a newly created audit as @audit
2024-02-28T13:37:40.9553994Z     GET #index
2024-02-28T13:37:41.0068374Z       is successful
2024-02-28T13:37:41.0069063Z     GET #new
2024-02-28T13:37:41.0525330Z       is successful
2024-02-28T13:37:41.0526560Z     DELETE #destroy
2024-02-28T13:37:41.0527595Z       with valid params
2024-02-28T13:37:41.0919267Z         destroys the audit if the audit's status is `in_progress`
2024-02-28T13:37:41.1289245Z         destroys the audit if the audit's status is `confirms`
2024-02-28T13:37:41.1624293Z         can not destroy the audit if the audit's status is `finalized`
2024-02-28T13:37:41.1625280Z     GET #edit
2024-02-28T13:37:41.2232881Z       redirects to #index if the status of audit is not `in_progress`
2024-02-28T13:37:41.2861049Z       is successful if the status of audit is `in_progress`
2024-02-28T13:37:41.2861926Z 
2024-02-28T13:37:41.2862392Z DonationSites
2024-02-28T13:37:41.2863272Z   while signed in
2024-02-28T13:37:41.2864141Z     GET #index
2024-02-28T13:37:41.2865115Z       html
2024-02-28T13:37:41.3258159Z         is expected to be successful
2024-02-28T13:37:41.3259161Z       csv
2024-02-28T13:37:41.3405379Z         is expected to be successful
2024-02-28T13:37:41.3410265Z 
2024-02-28T13:37:41.3410644Z /account_requests
2024-02-28T13:37:41.3412138Z   POST #create
2024-02-28T13:37:41.3412724Z     with valid parameters
2024-02-28T13:37:41.3648456Z       creates a new AccountRequest
2024-02-28T13:37:41.3771601Z       redirects to the created account_request confirmation
2024-02-28T13:37:41.3881244Z       delivers the confirmation email via default queue
2024-02-28T13:37:41.3882166Z     with invalid parameters
2024-02-28T13:37:41.4084741Z       does not create a new AccountRequest
2024-02-28T13:37:41.4254572Z       renders a successful response (i.e. to display the 'new' template)
2024-02-28T13:37:41.4255625Z   GET #received
2024-02-28T13:37:41.4256419Z     when given a invalid token
2024-02-28T13:37:41.4314832Z       should render a error that says that is code provided is invalid
2024-02-28T13:37:41.4316034Z     when given a valid token
2024-02-28T13:37:41.4455880Z       should render the received template
2024-02-28T13:37:41.4456717Z   GET #new
2024-02-28T13:37:41.4568288Z     renders a successful response
2024-02-28T13:37:41.4569447Z   GET #confirm
2024-02-28T13:37:41.4570331Z     when given a token that has already been confirmed
2024-02-28T13:37:41.6488757Z       should render a error that says that is code provided is invalid
2024-02-28T13:37:41.6489843Z     when given a valid token
2024-02-28T13:37:41.6666562Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-28T13:37:41.6667472Z     when given a invalid token
2024-02-28T13:37:41.6725003Z       should render a error that says that is code provided is invalid
2024-02-28T13:37:41.6725982Z   GET #confirmation
2024-02-28T13:37:41.6726726Z     when given a invalid token
2024-02-28T13:37:41.6783172Z       should render a error that says that is code provided is invalid
2024-02-28T13:37:41.6784170Z     when given a token that has already been confirmed
2024-02-28T13:37:41.8646709Z       should render a error that says that is code provided is invalid
2024-02-28T13:37:41.8647862Z     when given a valid token
2024-02-28T13:37:41.8778246Z       should render the confirmation template
2024-02-28T13:37:41.8779212Z 
2024-02-28T13:37:41.8779816Z /partners/profiles
2024-02-28T13:37:41.8780972Z   PUT #update
2024-02-28T13:37:41.9390271Z     updates the partner and profile
2024-02-28T13:37:41.9391206Z     with no social media
2024-02-28T13:37:42.0513202Z       shows an error
2024-02-28T13:37:42.0513809Z     when updating an existing value to a blank value
2024-02-28T13:37:42.1047745Z       does store N/A in the database
2024-02-28T13:37:42.1666533Z       updates the partner profile attribute to a blank value
2024-02-28T13:37:42.2190052Z       does not update other partner profile attributes to blank
2024-02-28T13:37:42.2191247Z   GET #edit
2024-02-28T13:37:42.3076132Z     does not have default radio button value when value is nil
2024-02-28T13:37:42.3927301Z     displays the partner
2024-02-28T13:37:42.4778463Z     has "No" radio button value when value is false
2024-02-28T13:37:42.5639502Z     has "Yes" radio button value when value is true
2024-02-28T13:37:42.5640678Z   GET #show
2024-02-28T13:37:42.6218408Z     shows correct values for yes/no buttons
2024-02-28T13:37:42.6694669Z     displays the partner
2024-02-28T13:37:42.6695229Z 
2024-02-28T13:37:42.6695465Z /partners/children
2024-02-28T13:37:42.6698214Z   GET #index
2024-02-28T13:37:42.7436644Z     should export CSV
2024-02-28T13:37:42.8010473Z     should render without any issues
2024-02-28T13:37:42.8015687Z 
2024-02-28T13:37:42.8016306Z Dashboard
2024-02-28T13:37:42.8017086Z   With an existing essentials bank
2024-02-28T13:37:42.8019055Z     Product Drives
2024-02-28T13:37:43.4121204Z       has a widget for product drive summary data
2024-02-28T13:37:43.4122585Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-28T13:37:43.4123978Z         filtering to 'This Year'
2024-02-28T13:37:44.8757513Z           shows the correct total money raised
2024-02-28T13:37:46.2943038Z           shows the correct total donations
2024-02-28T13:37:47.7225348Z           shows 2 Recent Donation link(s)
2024-02-28T13:37:47.7227369Z       given 1 Product Drive Donation on 2024-02-21 (unless 'All Time'), 1 during 2024-02-22..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:37:47.7228733Z         filtering to 'Last 7 Days'
2024-02-28T13:37:49.2075570Z           shows the correct total money raised
2024-02-28T13:37:50.5869539Z           shows 1 Recent Donation link(s)
2024-02-28T13:37:51.9529704Z           shows the correct total donations
2024-02-28T13:37:51.9531871Z       given 1 Product Drive Donation on 2024-01-29 (unless 'All Time'), 4 during 2024-01-30..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:37:51.9533421Z         filtering to 'Last 30 Days'
2024-02-28T13:37:53.4532771Z           shows the correct total donations
2024-02-28T13:37:54.9559380Z           shows the correct total money raised
2024-02-28T13:37:56.4527787Z           shows 3 Recent Donation link(s)
2024-02-28T13:37:56.4530757Z       given 1 Product Drive Donation on 2024-02-26 (unless 'All Time'), 1 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-28T13:37:56.4533104Z         filtering to 'Yesterday'
2024-02-28T13:37:57.8414107Z           shows the correct total money raised
2024-02-28T13:37:59.1989124Z           shows the correct total donations
2024-02-28T13:38:00.5664755Z           shows 1 Recent Donation link(s)
2024-02-28T13:38:00.5668278Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-28T13:38:00.5669656Z         filtering to 'Last Month'
2024-02-28T13:38:02.0831571Z           shows the correct total donations
2024-02-28T13:38:03.5817844Z           shows the correct total money raised
2024-02-28T13:38:05.0869746Z           shows 3 Recent Donation link(s)
2024-02-28T13:38:05.0870695Z       Product drive behaviour with Mixed Donation types
2024-02-28T13:38:05.8047579Z         only counts product drive money raised
2024-02-28T13:38:06.6028854Z         only counts product drive donations for product drive
2024-02-28T13:38:07.3367111Z         only shows product drive donations as product drive donations
2024-02-28T13:38:07.3368839Z       given 1 Product Drive Donation on 2022-02-27 (unless 'All Time'), 3 during 2022-02-28..2023-12-11, and 1 on 2023-12-12
2024-02-28T13:38:07.3370152Z         filtering to '' (February 28, 2022 - December 11, 2023)
2024-02-28T13:38:08.8235251Z           shows the correct total money raised
2024-02-28T13:38:10.3786169Z           shows the correct total donations
2024-02-28T13:38:11.8494977Z           shows 3 Recent Donation link(s)
2024-02-28T13:38:11.8497055Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-28T13:38:11.8498405Z         filtering to 'This Month'
2024-02-28T13:38:13.1849672Z           shows the correct total money raised
2024-02-28T13:38:14.5198655Z           shows the correct total donations
2024-02-28T13:38:17.8647604Z           shows 0 Recent Donation link(s)
2024-02-28T13:38:17.8649530Z       given 1 Product Drive Donation on 2024-02-27 (unless 'All Time'), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:17.8650908Z         filtering to 'Today'
2024-02-28T13:38:19.3840632Z           shows the correct total money raised
2024-02-28T13:38:20.8967263Z           shows 3 Recent Donation link(s)
2024-02-28T13:38:22.3533143Z           shows the correct total donations
2024-02-28T13:38:22.3534007Z     Distributions
2024-02-28T13:38:23.2533593Z       has a link to create a new distribution
2024-02-28T13:38:23.2535192Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 2 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-28T13:38:23.2536151Z         filtering to 'This Month'
2024-02-28T13:38:24.6564848Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-28T13:38:24.6566601Z       given 1 Distribution on 2024-02-21  (unless 'All Time'), 0 during 2024-02-22..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:24.6568039Z         filtering to 'Last 7 Days'
2024-02-28T13:38:27.9933475Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-28T13:38:27.9935605Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-28T13:38:27.9937040Z         filtering to 'This Year'
2024-02-28T13:38:29.3809122Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-28T13:38:29.3811386Z       given 1 Distribution on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-28T13:38:29.3813101Z         filtering to 'Yesterday'
2024-02-28T13:38:30.7957471Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-28T13:38:30.7959642Z       given 1 Distribution on 2024-01-29  (unless 'All Time'), 2 during 2024-01-30..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:30.7960667Z         filtering to 'Last 30 Days'
2024-02-28T13:38:32.2174874Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-28T13:38:32.2177736Z       given 1 Distribution on 2022-02-27  (unless 'All Time'), 3 during 2022-02-28..2023-11-17, and 1 on 2023-11-18
2024-02-28T13:38:32.2179736Z         filtering to '' (February 28, 2022 - November 17, 2023)
2024-02-28T13:38:33.6679533Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-28T13:38:33.6681645Z       given 1 Distribution on 2024-02-27  (unless 'All Time'), 1 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:33.6682671Z         filtering to 'Today'
2024-02-28T13:38:35.0496630Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-28T13:38:35.0498505Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-28T13:38:35.0499967Z         filtering to 'Last Month'
2024-02-28T13:38:36.4448728Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-28T13:38:36.4451154Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 0 during 2000-01-01..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:36.4452597Z         filtering to 'All Time'
2024-02-28T13:38:39.8214861Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-28T13:38:39.8215947Z     Inventory Totals
2024-02-28T13:38:39.8216920Z       Summary
2024-02-28T13:38:40.5168021Z         displays the on-hand totals
2024-02-28T13:38:40.5169144Z         when constrained to date range
2024-02-28T13:38:41.5425623Z           does not change
2024-02-28T13:38:41.5426404Z     Manufacturer Donations
2024-02-28T13:38:42.1308245Z       has a link to create a new donation
2024-02-28T13:38:42.1309758Z       given 1 Manufacturer donating on 2024-01-29  (unless 'All Time'), 2 during 2024-01-30..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:42.1311143Z         filtering to 'Last 30 Days'
2024-02-28T13:38:43.6340185Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-28T13:38:43.6342977Z       given 1 Manufacturer donating on 2022-02-27  (unless 'All Time'), 6 during 2022-02-28..2024-02-04, and 1 on 2024-02-05
2024-02-28T13:38:43.6344505Z         filtering to '' (February 28, 2022 - February 4, 2024)
2024-02-28T13:38:45.7921971Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-28T13:38:45.7924000Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-28T13:38:45.7925358Z         filtering to 'This Year'
2024-02-28T13:38:47.5771746Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-28T13:38:47.5773511Z       given 1 Manufacturer donating on 2024-02-26  (unless 'All Time'), 2 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-28T13:38:47.5774600Z         filtering to 'Yesterday'
2024-02-28T13:38:49.1895878Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-28T13:38:49.1897600Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 7 during 2000-01-01..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:49.1898444Z         filtering to 'All Time'
2024-02-28T13:38:50.9874694Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-28T13:38:50.9876908Z       given 1 Manufacturer donating on 2024-02-27  (unless 'All Time'), 0 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:50.9877921Z         filtering to 'Today'
2024-02-28T13:38:52.3330399Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-28T13:38:52.3332441Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 6 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-28T13:38:52.3333547Z         filtering to 'Last Month'
2024-02-28T13:38:54.6298018Z           shows the correct total and 8 Top Manufacturer Donation link(s)
2024-02-28T13:38:54.6299934Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 9 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-28T13:38:54.6301489Z         filtering to 'This Month'
2024-02-28T13:38:57.3153576Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-28T13:38:57.3155228Z       given 1 Manufacturer donating on 2024-02-21  (unless 'All Time'), 7 during 2024-02-22..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:38:57.3156071Z         filtering to 'Last 7 Days'
2024-02-28T13:38:59.4991909Z           shows the correct total and 9 Top Manufacturer Donation link(s)
2024-02-28T13:38:59.4992898Z     Purchases
2024-02-28T13:39:00.3826191Z       has a link to create a new purchase
2024-02-28T13:39:00.3827980Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-28T13:39:00.3829391Z         filtering to 'This Year'
2024-02-28T13:39:01.8416589Z           shows correct 3 Recent Purchase link(s)
2024-02-28T13:39:01.8418270Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-28T13:39:01.8419768Z         filtering to 'Last Month'
2024-02-28T13:39:03.3635822Z           shows correct 3 Recent Purchase link(s)
2024-02-28T13:39:03.3637218Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-28T13:39:03.3638169Z         filtering to 'This Month'
2024-02-28T13:39:04.7513435Z           shows correct 1 Recent Purchase link(s)
2024-02-28T13:39:04.7515147Z       given 1 Purchase on 2024-02-21  (unless 'All Time'), 4 during 2024-02-22..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:04.7516626Z         filtering to 'Last 7 Days'
2024-02-28T13:39:06.2792033Z           shows correct 3 Recent Purchase link(s)
2024-02-28T13:39:06.2793878Z       given 1 Purchase on 2024-02-27  (unless 'All Time'), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:06.2795216Z         filtering to 'Today'
2024-02-28T13:39:07.7274797Z           shows correct 3 Recent Purchase link(s)
2024-02-28T13:39:07.7276890Z       given 1 Purchase on 2024-02-26  (unless 'All Time'), 4 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-28T13:39:07.7278192Z         filtering to 'Yesterday'
2024-02-28T13:39:09.2302769Z           shows correct 3 Recent Purchase link(s)
2024-02-28T13:39:09.2304390Z       given 1 Purchase on 2024-01-29  (unless 'All Time'), 1 during 2024-01-30..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:09.2305702Z         filtering to 'Last 30 Days'
2024-02-28T13:39:10.5798653Z           shows correct 1 Recent Purchase link(s)
2024-02-28T13:39:10.5800486Z       given 1 Purchase on 2022-02-27  (unless 'All Time'), 2 during 2022-02-28..2023-09-26, and 1 on 2023-09-27
2024-02-28T13:39:10.5801859Z         filtering to '' (February 28, 2022 - September 26, 2023)
2024-02-28T13:39:12.0115563Z           shows correct 2 Recent Purchase link(s)
2024-02-28T13:39:12.0116432Z     Donations
2024-02-28T13:39:12.9102940Z       has a link to create a new donation
2024-02-28T13:39:12.9104662Z       given 1 Donation on 2024-02-21 (only if a valid date), 2 during 2024-02-22..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:12.9105702Z         filtering to 'Last 7 Days'
2024-02-28T13:39:14.3200392Z           shows the correct total and 2 Recent Donation link(s)
2024-02-28T13:39:14.3202247Z       given 1 Donation on 2024-02-26 (only if a valid date), 0 during 2024-02-27..2024-02-27, and 1 on 2024-02-28
2024-02-28T13:39:14.3203472Z         filtering to 'Yesterday'
2024-02-28T13:39:17.6443329Z           shows the correct total and 0 Recent Donation link(s)
2024-02-28T13:39:17.6444811Z       given 1 Donation on 2024-02-27 (only if a valid date), 3 during 2024-02-28..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:17.6445865Z         filtering to 'Today'
2024-02-28T13:39:19.0887476Z           shows the correct total and 3 Recent Donation link(s)
2024-02-28T13:39:19.0889458Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-28T13:39:19.0890308Z         filtering to 'Last Month'
2024-02-28T13:39:22.5069166Z           shows the correct total and 0 Recent Donation link(s)
2024-02-28T13:39:22.5070987Z       given 1 Donation on 2024-01-31 (only if a valid date), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-28T13:39:22.5072244Z         filtering to 'This Month'
2024-02-28T13:39:25.8138169Z           shows the correct total and 0 Recent Donation link(s)
2024-02-28T13:39:25.8140062Z       given 1 Donation on 2023-12-31 (only if a valid date), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-28T13:39:25.8141664Z         filtering to 'This Year'
2024-02-28T13:39:27.2281294Z           shows the correct total and 2 Recent Donation link(s)
2024-02-28T13:39:27.2283354Z       given 1 Donation on 2022-02-27 (only if a valid date), 2 during 2022-02-28..2023-10-29, and 1 on 2023-10-30
2024-02-28T13:39:27.2284811Z         filtering to '' (February 28, 2022 - October 29, 2023)
2024-02-28T13:39:28.6805302Z           shows the correct total and 2 Recent Donation link(s)
2024-02-28T13:39:28.6806846Z       given 1 Donation on 2024-01-29 (only if a valid date), 3 during 2024-01-30..2024-02-28, and 1 on 2024-02-29
2024-02-28T13:39:28.6808139Z         filtering to 'Last 30 Days'
2024-02-28T13:39:30.1467713Z           shows the correct total and 3 Recent Donation link(s)
2024-02-28T13:39:30.1468682Z     Signage
2024-02-28T13:39:33.0472304Z       shows their organization name unless they have a logo set
2024-02-28T13:39:33.0473549Z   With a new essentials bank
2024-02-28T13:40:00.9945658Z     displays the getting started guide until the steps are completed
2024-02-28T13:40:00.9946481Z 
2024-02-28T13:40:00.9946691Z Profiles
2024-02-28T13:40:00.9948159Z   POST #update
2024-02-28T13:40:00.9949059Z     successful save
2024-02-28T13:40:01.0430262Z       redirects to #show
2024-02-28T13:40:01.0882121Z       update partner
2024-02-28T13:40:01.0884902Z     when updating an existing value to a blank value
2024-02-28T13:40:01.1329589Z       should have blank values
2024-02-28T13:40:01.1803967Z       update partner
2024-02-28T13:40:01.1804681Z   GET #edit
2024-02-28T13:40:01.2764180Z     returns http success
2024-02-28T13:40:01.2764692Z 
2024-02-28T13:40:01.2764976Z Admin Organization Management
2024-02-28T13:40:01.2766753Z   While signed in as an Administrative User (super admin)
2024-02-28T13:40:02.5723574Z     can view organization details
2024-02-28T13:40:04.5251561Z     creates a new organization
2024-02-28T13:40:05.5910615Z     filters by organizations by name in organizations index page
2024-02-28T13:40:05.5912107Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-28T13:40:07.4550045Z     creates a new organization
2024-02-28T13:40:07.4551542Z 
2024-02-28T13:40:07.4553339Z Admin::Organizations
2024-02-28T13:40:07.4554297Z   When logged in as a super admin
2024-02-28T13:40:07.4555505Z     PUT #update
2024-02-28T13:40:07.4762153Z       redirect
2024-02-28T13:40:07.4762904Z     POST #create
2024-02-28T13:40:07.4763890Z       with invalid params
2024-02-28T13:40:07.5162576Z         does not create an organization and renders #create with an error message
2024-02-28T13:40:07.5163845Z       with valid params
2024-02-28T13:40:07.7311995Z         creates an organization and redirects to #index
2024-02-28T13:40:07.7312895Z     GET #index
2024-02-28T13:40:07.7673541Z       returns http success
2024-02-28T13:40:07.7674194Z     GET #edit
2024-02-28T13:40:07.9873353Z       returns http success
2024-02-28T13:40:07.9873941Z     GET #show
2024-02-28T13:40:08.1898191Z       returns http success
2024-02-28T13:40:08.1899199Z     DELETE #destroy
2024-02-28T13:40:08.1899835Z       with a valid organization id
2024-02-28T13:40:08.7103004Z         redirects to #index
2024-02-28T13:40:08.7103796Z     GET #new
2024-02-28T13:40:08.7527753Z       returns http success
2024-02-28T13:40:08.7532357Z       when given a token that matches a account request that has already been processed
2024-02-28T13:40:08.9765423Z         should render new with a flash error message
2024-02-28T13:40:08.9766759Z       when given a valid account request token in the query parameters
2024-02-28T13:40:09.0298234Z         should render new with pre populate input fields from the account_request
2024-02-28T13:40:09.0299324Z     DELETE #destroy
2024-02-28T13:40:09.3855823Z       redirects
2024-02-28T13:40:09.3856370Z     PATCH #update
2024-02-28T13:40:09.3857248Z       with a valid update
2024-02-28T13:40:09.5779266Z         redirects to #index
2024-02-28T13:40:09.5780033Z       with an invalid update
2024-02-28T13:40:09.7817749Z         returns http success
2024-02-28T13:40:09.9984931Z         redirects to #edit with an error message
2024-02-28T13:40:09.9986050Z   When logged in as a non-admin user
2024-02-28T13:40:09.9987074Z     PUT #update
2024-02-28T13:40:10.0113581Z       redirects
2024-02-28T13:40:10.0114504Z     GET #edit
2024-02-28T13:40:10.0236622Z       redirects
2024-02-28T13:40:10.0237208Z     GET #index
2024-02-28T13:40:10.0359890Z       redirects
2024-02-28T13:40:10.0360531Z     GET #new
2024-02-28T13:40:10.0485018Z       redirects
2024-02-28T13:40:10.0485855Z     POST #create
2024-02-28T13:40:10.0623726Z       redirects
2024-02-28T13:40:10.0624691Z 
2024-02-28T13:40:10.0625060Z User account management
2024-02-28T13:40:10.0626524Z   when in staging
2024-02-28T13:40:10.5196355Z     should display staging warning
2024-02-28T13:40:10.9749012Z     should not allow the user to change staging credentials
2024-02-28T13:40:10.9750007Z   when not in staging
2024-02-28T13:40:11.8499440Z     should change the email
2024-02-28T13:40:12.5951896Z     should fail when the email is invalid
2024-02-28T13:40:13.4661946Z     should change an user name
2024-02-28T13:40:13.4663923Z 
2024-02-28T13:40:13.4664288Z StorageLocations
2024-02-28T13:40:13.4665765Z   While signed in
2024-02-28T13:40:13.4668243Z     PUT #deactivate
2024-02-28T13:40:13.4891678Z       discards
2024-02-28T13:40:13.4892283Z       with inventory
2024-02-28T13:40:13.5362314Z         does not discard
2024-02-28T13:40:13.5363010Z     GET #destroy
2024-02-28T13:40:13.5610642Z       redirects to #index
2024-02-28T13:40:13.5611462Z     GET #inventory
2024-02-28T13:40:13.5612369Z       when also including omitted items
2024-02-28T13:40:13.6121594Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-28T13:40:13.6586283Z         contains a collection of ducktyped entries that respond the same
2024-02-28T13:40:13.6587397Z       when also including inactive items
2024-02-28T13:40:13.7238743Z         returns a collection that also includes items that have been deactivated
2024-02-28T13:40:13.7240049Z       without any overrides
2024-02-28T13:40:13.7745427Z         returns a collection that only includes items at the storage location
2024-02-28T13:40:13.7746975Z     PUT #reactivate
2024-02-28T13:40:13.7906598Z       undiscards
2024-02-28T13:40:13.7907347Z     GET #show
2024-02-28T13:40:13.7908260Z       html
2024-02-28T13:40:13.8588492Z         should return a correct response
2024-02-28T13:40:13.8589425Z         with version date set
2024-02-28T13:40:13.8590452Z           with no version found
2024-02-28T13:40:13.9368342Z             should show N/A
2024-02-28T13:40:13.9369746Z           with a version found
2024-02-28T13:40:14.0167291Z             should show the version specified
2024-02-28T13:40:14.0168002Z       csv
2024-02-28T13:40:14.0664327Z         should be successful
2024-02-28T13:40:14.0665252Z     GET #new
2024-02-28T13:40:14.5719491Z       returns http success
2024-02-28T13:40:14.5720167Z     GET #edit
2024-02-28T13:40:14.5903897Z       returns http success
2024-02-28T13:40:14.5904432Z     POST #import_csv
2024-02-28T13:40:14.5906112Z       csv file with wrong headers
2024-02-28T13:40:14.6045025Z         presents a flash error message
2024-02-28T13:40:14.6166781Z         redirects
2024-02-28T13:40:14.6167257Z       without a csv file
2024-02-28T13:40:14.6279510Z         presents a flash error message
2024-02-28T13:40:14.6390775Z         redirects to :index
2024-02-28T13:40:14.6391349Z       with a csv file
2024-02-28T13:40:14.6535957Z         presents a flash notice message
2024-02-28T13:40:14.6586128Z         invokes .import_csv
2024-02-28T13:40:14.6726815Z         redirects
2024-02-28T13:40:14.6727398Z     Looking at a different organization
2024-02-28T13:40:14.8465915Z       redirects the user to the sign-in page for CRUD actions
2024-02-28T13:40:14.8467012Z     GET #index
2024-02-28T13:40:14.8467584Z       html
2024-02-28T13:40:14.8847778Z         succeeds
2024-02-28T13:40:14.8848390Z         with inactive locations
2024-02-28T13:40:14.9197786Z           does not includes the inactive location
2024-02-28T13:40:14.9198625Z           with include_inactive_locations
2024-02-28T13:40:14.9628991Z             includes the inactive location
2024-02-28T13:40:14.9629655Z       csv
2024-02-28T13:40:15.0622343Z         includes headers followed by alphabetized item names
2024-02-28T13:40:15.0796655Z         succeeds
2024-02-28T13:40:15.0797653Z   While not signed in
2024-02-28T13:40:15.0861516Z     redirects the user to the sign-in page for CRUD actions
2024-02-28T13:40:15.0862432Z 
2024-02-28T13:40:15.0862871Z Managing requests
2024-02-28T13:40:15.0864296Z   creating a # individuals request
2024-02-28T13:40:15.0865141Z     GIVEN a partner user is permitted to make a request
2024-02-28T13:40:15.0866252Z       Select Input Tests
2024-02-28T13:40:15.0867140Z         WHEN they reach the page
2024-02-28T13:40:15.9380627Z           should show the proper items in the select box
2024-02-28T13:40:15.9381193Z           WHEN they create a request inproperly
2024-02-28T13:40:17.2398044Z             should show the proper items in the select box
2024-02-28T13:40:17.2399104Z       WHEN they create a request inproperly
2024-02-28T13:40:18.1315499Z         should show an error message with the instructions
2024-02-28T13:40:18.1316078Z       WHEN they create a request properly
2024-02-28T13:40:18.1317260Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-28T13:40:20.2071567Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-28T13:40:20.2072601Z   creating a new quantity request
2024-02-28T13:40:20.2073782Z     GIVEN a partner user is permitted to make a request
2024-02-28T13:40:20.2075311Z       WHEN they create a request properly
2024-02-28T13:40:20.2076428Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-28T13:40:22.4072067Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-28T13:40:22.4073191Z       WHEN they create a request with only a comment
2024-02-28T13:40:23.3553887Z         should be created without any issue
2024-02-28T13:40:23.3554581Z       Select Input Tests
2024-02-28T13:40:23.3555636Z         WHEN they reach the page
2024-02-28T13:40:24.2046531Z           should show the proper items in the select box
2024-02-28T13:40:24.2047499Z           WHEN they create a request inproperly
2024-02-28T13:40:25.5311186Z             should show the proper items in the select box
2024-02-28T13:40:25.5312295Z       WHEN they create a request inproperly by not inputting anything
2024-02-28T13:40:26.4202482Z         should show an error message with the instructions
2024-02-28T13:40:26.4622445Z W, [2024-02-28T05:40:26.462029 #2358]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-28T13:40:26.4624283Z W, [2024-02-28T05:40:26.462077 #2358]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-28T13:40:26.4627875Z W, [2024-02-28T05:40:26.462092 #2358]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-28T13:40:26.4630771Z W, [2024-02-28T05:40:26.462116 #2358]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-28T13:40:26.4632162Z 
2024-02-28T13:40:26.4632637Z Finished in 3 minutes 34.1 seconds (files took 7.98 seconds to load)
2024-02-28T13:40:26.4633629Z 239 examples, 0 failures
2024-02-28T13:40:26.4633965Z 
2024-02-28T13:40:26.4635494Z Randomized with seed 65461
2024-02-28T13:40:26.4635850Z 
2024-02-28T13:40:26.9566741Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3815 / 6427 LOC (59.36%) covered.
2024-02-28T13:40:27.4826389Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10680 LOC (0.36%) covered.
