2024-03-07T01:46:03.4763994Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-03-07T01:46:03.4764886Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-03-07T01:46:03.4815379Z shell: /usr/bin/bash -e {0}
2024-03-07T01:46:03.4815878Z env:
2024-03-07T01:46:03.4816202Z   POSTGRES_HOST: localhost
2024-03-07T01:46:03.4816607Z   DATABASE_HOST: localhost
2024-03-07T01:46:03.4817046Z   PG_USERNAME: postgres
2024-03-07T01:46:03.4817434Z   PG_PASSWORD: password
2024-03-07T01:46:03.4817831Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-03-07T01:46:03.4818274Z   POSTGRES_PORT: 5432
2024-03-07T01:46:03.4818647Z   PGHOST: localhost
2024-03-07T01:46:03.4818991Z   PGUSER: postgres
2024-03-07T01:46:03.4819384Z   RAILS_ENV: test
2024-03-07T01:46:03.4820000Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: ***
2024-03-07T01:46:03.4820527Z   KNAPSACK_PRO_CI_NODE_TOTAL: 2
2024-03-07T01:46:03.4820960Z   KNAPSACK_PRO_CI_NODE_INDEX: 1
2024-03-07T01:46:03.4821415Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-03-07T01:46:03.4822034Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-03-07T01:46:03.4822721Z   KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-03-07T01:46:03.4823677Z   EVENTS_READ: true
2024-03-07T01:46:03.4824042Z ##[endgroup]
2024-03-07T01:46:13.2686343Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/item_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/request_item_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/user_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/role_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb"
2024-03-07T01:46:21.9039994Z 
2024-03-07T01:46:21.9041170Z Randomized with seed 14285
2024-03-07T01:46:22.6992920Z 
2024-03-07T01:46:22.6993624Z OrganizationUpdateService
2024-03-07T01:46:22.6994492Z   #update
2024-03-07T01:46:22.6995922Z     when object is valid
2024-03-07T01:46:22.8914977Z       should update and return true
2024-03-07T01:46:22.8916417Z     when object is invalid
2024-03-07T01:46:23.0674382Z       should not update and return false
2024-03-07T01:46:23.0675188Z     when organization has partners
2024-03-07T01:46:23.0676217Z       when all of a single partner's request flags WILL NOT be disabled
2024-03-07T01:46:23.3049445Z         should allow the disabling of request flags in organization and its partners
2024-03-07T01:46:23.3051565Z       when all of a single partner's request flags will be disabled
2024-03-07T01:46:23.5160565Z         should add an error message to the organization
2024-03-07T01:46:23.7588863Z         should NOT change request flags in organization or its partners
2024-03-07T01:46:23.7589899Z   #update_partner_flags
2024-03-07T01:46:23.7590857Z     when request flags haven't changed
2024-03-07T01:46:23.9704353Z       should not update partners
2024-03-07T01:46:23.9705022Z     when request flags have changed
2024-03-07T01:46:24.1946988Z       should update partners when disabling child and individual request flags
2024-03-07T01:46:24.4206359Z       should update partners when disabling quantity-based request flags
2024-03-07T01:46:24.6411548Z       should NOT update partners' request flags when enabling request flags on the organization
2024-03-07T01:46:24.6412261Z 
2024-03-07T01:46:24.6412410Z HistoricalTrendsHelper
2024-03-07T01:46:24.6413305Z   #last_12_months
2024-03-07T01:46:24.6488045Z     returns the last 12 months starting from Feb when the current month is Jan
2024-03-07T01:46:24.6531684Z     returns the last 12 months starting from Jan when the current month is Dec
2024-03-07T01:46:24.6575466Z     returns the last 12 months starting from July when the current month is June
2024-03-07T01:46:24.6576274Z 
2024-03-07T01:46:24.6576508Z PartnerMailer
2024-03-07T01:46:24.6577708Z   #recertification_request
2024-03-07T01:46:24.6883916Z     renders the body with text that indicates to recertify and link to where
2024-03-07T01:46:24.7122013Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:46:24.7122909Z   #application_approved
2024-03-07T01:46:24.7399383Z     renders the body with text that indicates the result and a link to their dashboard
2024-03-07T01:46:24.7641044Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:46:24.7642080Z 
2024-03-07T01:46:24.7642394Z Reports::ChildrenServedReportService
2024-03-07T01:46:24.7643166Z   #report
2024-03-07T01:46:25.2845081Z     should report normal values
2024-03-07T01:46:25.7916422Z     should work with no distribution_quantity
2024-03-07T01:46:25.9687130Z     should report zero values
2024-03-07T01:46:25.9687709Z 
2024-03-07T01:46:25.9687993Z ItemsInTotalQuery
2024-03-07T01:46:25.9688620Z   items_in_total_query
2024-03-07T01:46:26.1962619Z     returns a sum total of all in-flows
2024-03-07T01:46:26.5451713Z     counts shared items together
2024-03-07T01:46:26.7401647Z     does not count negative adjustments towards in-flow
2024-03-07T01:46:26.9512079Z     does not count transfers going in the negative direction
2024-03-07T01:46:27.2014275Z     does not count donations, purchases, adjustments to other storage locations
2024-03-07T01:46:27.2015391Z 
2024-03-07T01:46:27.2015770Z Reports::PartnerInfoReportService
2024-03-07T01:46:27.2016506Z   #report
2024-03-07T01:46:27.4413303Z     should report normal values
2024-03-07T01:46:27.6167456Z     should report zero values
2024-03-07T01:46:27.6168032Z 
2024-03-07T01:46:27.6168325Z OrganizationStats
2024-03-07T01:46:27.6169490Z   locations_with_inventory method >
2024-03-07T01:46:27.6170502Z     current org is not nil + no locations have items >
2024-03-07T01:46:27.6245318Z       should return an empty array
2024-03-07T01:46:27.6246150Z     current org is not nil + locations have items >
2024-03-07T01:46:27.6597330Z       should return storage location
2024-03-07T01:46:27.6598159Z     current org is nil >
2024-03-07T01:46:27.6633137Z       should return an empty array
2024-03-07T01:46:27.6633877Z   storage_locations_added method >
2024-03-07T01:46:27.6634972Z     current org is not nil >
2024-03-07T01:46:27.6668546Z       should return actual count of locations
2024-03-07T01:46:27.6669075Z     current org is nil >
2024-03-07T01:46:27.6705064Z       should return 0
2024-03-07T01:46:27.6705891Z   donation_sites_added method >
2024-03-07T01:46:27.6706968Z     current org is nil >
2024-03-07T01:46:27.6741953Z       should return 0
2024-03-07T01:46:27.6742601Z     current org is not nil >
2024-03-07T01:46:27.6776446Z       should return actual count of donation sites
2024-03-07T01:46:27.6777299Z   partners_added method >
2024-03-07T01:46:27.6780094Z     current org is not nil >
2024-03-07T01:46:27.6814194Z       should return actual count of partners
2024-03-07T01:46:27.6815046Z     current org is nil >
2024-03-07T01:46:27.6849183Z       should return 0
2024-03-07T01:46:27.6849787Z 
2024-03-07T01:46:27.6850206Z Partners::Child
2024-03-07T01:46:27.6851544Z   #display_name
2024-03-07T01:46:27.7381266Z     should return a child's first and last name
2024-03-07T01:46:27.7382125Z   associations
2024-03-07T01:46:27.7427158Z     is expected to belong to family required: true
2024-03-07T01:46:27.7476824Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:46:27.7477770Z   versioning
2024-03-07T01:46:27.7511727Z     is expected to be versioned
2024-03-07T01:46:27.7512406Z 
2024-03-07T01:46:27.7512881Z DistributionContentChangeService
2024-03-07T01:46:27.7514134Z   #changes
2024-03-07T01:46:27.7515152Z     when there are line items removed and updated
2024-03-07T01:46:27.7549591Z       returns true
2024-03-07T01:46:27.7550386Z   #any_change?
2024-03-07T01:46:27.7551616Z     when there are line items updated
2024-03-07T01:46:27.7586221Z       returns true
2024-03-07T01:46:27.7586910Z     when there are line items removed
2024-03-07T01:46:27.7618803Z       returns true
2024-03-07T01:46:27.7619693Z     when there are no changes in the line items
2024-03-07T01:46:27.7654145Z       returns true
2024-03-07T01:46:27.7654890Z     when there are line items removed and updated
2024-03-07T01:46:27.7687030Z       returns true
2024-03-07T01:46:27.7688178Z 
2024-03-07T01:46:27.7688546Z Partners::Profile
2024-03-07T01:46:27.7724887Z   must allow deleting served_areas
2024-03-07T01:46:27.7725888Z   request settings validation for profile
2024-03-07T01:46:27.7726740Z     no settings are set to true
2024-03-07T01:46:27.7779585Z       should not be valid
2024-03-07T01:46:27.7780386Z     at least one request type is set to true
2024-03-07T01:46:27.7850509Z       should be valid when enable_quantity_based_requests is true
2024-03-07T01:46:27.7919888Z       should be valid when enable_individual_requests is true
2024-03-07T01:46:27.7988996Z       should be valid when enable_child_based_requests is true
2024-03-07T01:46:27.7989864Z   versioning
2024-03-07T01:46:27.8023203Z     is expected to be versioned
2024-03-07T01:46:27.8024214Z   social media info validation for profile
2024-03-07T01:46:27.8026557Z     no social media presence and the checkbox isn't checked
2024-03-07T01:46:27.8122550Z       should be valid if media_information is not needed
2024-03-07T01:46:27.8177507Z       should not be valid
2024-03-07T01:46:27.8178457Z     has social media presence and the checkbox is unchecked
2024-03-07T01:46:27.8247987Z       with just facebook it should be valid
2024-03-07T01:46:27.8316310Z       with just a website it should be valid
2024-03-07T01:46:27.8384867Z       with just twitter it should be valid
2024-03-07T01:46:27.8453946Z       with every social media option it should be valid
2024-03-07T01:46:27.8522475Z       with just instagram it should be valid
2024-03-07T01:46:27.8523559Z     no social media presence and the checkbox is checked
2024-03-07T01:46:27.8578526Z       should be valid
2024-03-07T01:46:27.8579229Z   client share behaviour
2024-03-07T01:46:27.8579958Z     no served areas
2024-03-07T01:46:27.8626022Z       has 0 client share
2024-03-07T01:46:27.8626888Z     multiple
2024-03-07T01:46:27.8855185Z       is valid if client share sum is 100
2024-03-07T01:46:27.9004314Z       sums the client shares
2024-03-07T01:46:27.9005239Z   associations
2024-03-07T01:46:27.9046915Z     is expected to have a has_many_attached called documents
2024-03-07T01:46:27.9080720Z     is expected to have many served_areas
2024-03-07T01:46:27.9119647Z     is expected to have a has_one_attached called proof_of_form_990
2024-03-07T01:46:27.9156665Z     is expected to have a has_one_attached called proof_of_partner_status
2024-03-07T01:46:27.9157492Z 
2024-03-07T01:46:27.9157741Z Partners::ItemRequest
2024-03-07T01:46:27.9158669Z   validations
2024-03-07T01:46:27.9271830Z     is expected to validate that :name cannot be empty/falsy
2024-03-07T01:46:27.9330754Z     is expected to validate that :quantity cannot be empty/falsy
2024-03-07T01:46:27.9384560Z     is expected to validate that :partner_key cannot be empty/falsy
2024-03-07T01:46:27.9439035Z     is expected to validate that :quantity looks like an integer greater than or equal to 1
2024-03-07T01:46:27.9440345Z   versioning
2024-03-07T01:46:27.9473819Z     is expected to be versioned
2024-03-07T01:46:27.9474511Z   associations
2024-03-07T01:46:27.9511143Z     is expected to have many child_item_requests dependent => destroy
2024-03-07T01:46:27.9545646Z     is expected to have many children through child_item_requests
2024-03-07T01:46:27.9584877Z     is expected to belong to request class_name => ::Request required: true
2024-03-07T01:46:27.9585725Z 
2024-03-07T01:46:27.9585953Z CalendarService
2024-03-07T01:46:28.2939630Z   #time_zones
2024-03-07T01:46:28.2940310Z   .calendar
2024-03-07T01:46:28.3547340Z     should print the calendar correctly
2024-03-07T01:46:28.3547912Z 
2024-03-07T01:46:28.3548628Z NotifyPartnerJob
2024-03-07T01:46:28.3549390Z   #perform
2024-03-07T01:46:28.3758012Z     is expected to call RequestsConfirmationMailer
2024-03-07T01:46:28.3815756Z     avoids exception when request doesn't exist
2024-03-07T01:46:28.3816820Z     when the request's partner is deactivated
2024-03-07T01:46:28.4082791Z       does not send the confirmation email
2024-03-07T01:46:28.4083586Z 
2024-03-07T01:46:28.4083973Z InventoryItem
2024-03-07T01:46:28.4119416Z   initializes the quantity to 0 if it was not specified
2024-03-07T01:46:28.4120370Z   versioning
2024-03-07T01:46:28.4155814Z     is expected to be versioned
2024-03-07T01:46:28.4156737Z   Validations >
2024-03-07T01:46:28.4202045Z     requires an item
2024-03-07T01:46:28.4251470Z     requires an inventory association
2024-03-07T01:46:28.4252445Z     quantity >
2024-03-07T01:46:28.4305192Z       is required
2024-03-07T01:46:28.4444708Z       is gte 0
2024-03-07T01:46:28.4497529Z       is numerical
2024-03-07T01:46:28.4553132Z       is less than the max integer
2024-03-07T01:46:28.4554065Z   Filtering >
2024-03-07T01:46:28.4554862Z     ->by_partner_key
2024-03-07T01:46:28.4679762Z       shows the Base Items by partner_key
2024-03-07T01:46:28.4680627Z 
2024-03-07T01:46:28.4683040Z DonationSitesController
2024-03-07T01:46:28.4683698Z   While not signed in
2024-03-07T01:46:28.4794726Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:46:28.4795448Z   While signed in
2024-03-07T01:46:28.4796505Z     Looking at a different organization
2024-03-07T01:46:28.6540419Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:46:28.6541393Z     DELETE #destroy
2024-03-07T01:46:28.6811583Z       returns http success
2024-03-07T01:46:28.6812407Z     POST #import_csv
2024-03-07T01:46:28.6814735Z       behaves like csv import
2024-03-07T01:46:28.6815767Z         with a csv file
2024-03-07T01:46:28.6971169Z           presents a flash notice message
2024-03-07T01:46:28.7020668Z           invokes .import_csv
2024-03-07T01:46:28.7159452Z           redirects to :index
2024-03-07T01:46:28.7159952Z         csv file with wrong headers
2024-03-07T01:46:28.7264656Z           redirects to :index
2024-03-07T01:46:28.7368224Z           presents a flash error message
2024-03-07T01:46:28.7369046Z         without a csv file
2024-03-07T01:46:28.7465992Z           redirects to :index
2024-03-07T01:46:28.7563570Z           presents a flash error message
2024-03-07T01:46:28.7564517Z     GET #show
2024-03-07T01:46:28.7708477Z       returns http success
2024-03-07T01:46:28.7709163Z     GET #edit
2024-03-07T01:46:28.7835624Z       returns http success
2024-03-07T01:46:28.7836268Z     GET #index
2024-03-07T01:46:28.7944694Z       returns http success
2024-03-07T01:46:28.7945565Z     GET #new
2024-03-07T01:46:28.8049709Z       returns http success
2024-03-07T01:46:28.8050688Z 
2024-03-07T01:46:28.8051272Z KitCreateService
2024-03-07T01:46:28.8052342Z   #call
2024-03-07T01:46:29.0069374Z     should return an the instance
2024-03-07T01:46:29.0070559Z     when the parameters provided are invalid
2024-03-07T01:46:29.0071294Z       because the kit_params is invalid for kit creation
2024-03-07T01:46:29.1799835Z         should have errors saying why the kit_params are invalid
2024-03-07T01:46:29.1800810Z       because the organization_id does not match any Organization
2024-03-07T01:46:29.1853572Z         should have an error on organization_id saying it does not match any Organization
2024-03-07T01:46:29.1854777Z     when the parameters are valid
2024-03-07T01:46:29.3735760Z       should create a new Item
2024-03-07T01:46:29.5619522Z       should create a new Kit
2024-03-07T01:46:29.7624725Z       should create the new Item associated with the Kit
2024-03-07T01:46:29.7625373Z       but an unexpected error gets raised
2024-03-07T01:46:29.9524667Z         should have an error that includes the raised error
2024-03-07T01:46:30.1417750Z         should not create the Kit
2024-03-07T01:46:30.3320174Z         should not create a Item
2024-03-07T01:46:30.3320830Z       but the ItemCreationService is unsuccesful
2024-03-07T01:46:30.5206413Z         should not create the Kit
2024-03-07T01:46:30.7123960Z         should not create a Item
2024-03-07T01:46:30.9350232Z         should have an error that includes the error
2024-03-07T01:46:30.9350854Z 
2024-03-07T01:46:30.9351156Z Exports::ExportPurchasesCSVService
2024-03-07T01:46:30.9352131Z   #generate_csv_data
2024-03-07T01:46:31.0445699Z     should match the expected content for the csv
2024-03-07T01:46:31.0446549Z 
2024-03-07T01:46:31.0446750Z RequestItem
2024-03-07T01:46:31.0447252Z   Methods >
2024-03-07T01:46:31.0448064Z     #from_json
2024-03-07T01:46:31.2971111Z       has the correct amount on hand
2024-03-07T01:46:31.5470231Z       has the correct name
2024-03-07T01:46:31.7995431Z       has the correct amount on hand for location
2024-03-07T01:46:32.0485408Z       has the correct quantity
2024-03-07T01:46:32.0486707Z 
2024-03-07T01:46:32.0486901Z Item
2024-03-07T01:46:32.0488757Z   after update
2024-03-07T01:46:32.0489675Z     when item does not have kit
2024-03-07T01:46:32.0621959Z       does not raise any errors
2024-03-07T01:46:32.0622909Z     when item has the kit
2024-03-07T01:46:32.2540989Z       updates kit name
2024-03-07T01:46:32.2541873Z   Validations >
2024-03-07T01:46:32.2600780Z     must belong to an organization
2024-03-07T01:46:32.2719358Z     requires that items quantity are not a negative number
2024-03-07T01:46:32.2769721Z     requires a Base Item base
2024-03-07T01:46:32.2905425Z     requires a unique name
2024-03-07T01:46:32.2906069Z   default_quantity
2024-03-07T01:46:32.2991820Z     should return the value of on_hand_minimum_quantity if it is set
2024-03-07T01:46:32.3072565Z     should return 50 if column is not set
2024-03-07T01:46:32.3152236Z     should return 0 if on_hand_minimum_quantity is not set
2024-03-07T01:46:32.3236430Z     should return the value of distribution_quantity if it is set
2024-03-07T01:46:32.3237275Z   Assocations >
2024-03-07T01:46:32.3286937Z     is expected to belong to item_category optional: true
2024-03-07T01:46:32.3287772Z   distribution_quantity and package size
2024-03-07T01:46:32.3423328Z     have nil values if an empty string is passed
2024-03-07T01:46:32.3424288Z   Filtering >
2024-03-07T01:46:32.3468406Z     ->by_size returns all items with the same size, per their BaseItem parent (FAILED - 1)
2024-03-07T01:46:32.3760678Z     ->active shows items that are still active
2024-03-07T01:46:32.3955949Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:46:32.3989363Z     can filter
2024-03-07T01:46:32.3990197Z     ->cloth_diapers
2024-03-07T01:46:32.4275649Z       returns records associated with disposable diapers
2024-03-07T01:46:32.4276449Z     ->by_partner_key
2024-03-07T01:46:32.4432775Z       filters by partner key
2024-03-07T01:46:32.4433518Z     ->by_base_item
2024-03-07T01:46:32.4594676Z       shows the items for a particular base_item
2024-03-07T01:46:32.6574585Z       can be chained to organization to constrain it to just 1 org's items
2024-03-07T01:46:32.6575526Z     ->disposable
2024-03-07T01:46:32.6847637Z       returns records associated with disposable diapers
2024-03-07T01:46:32.6848426Z   Methods >
2024-03-07T01:46:32.6849071Z     has_history?
2024-03-07T01:46:32.7627773Z       identifies items that have been used previously
2024-03-07T01:46:32.7628640Z     other?
2024-03-07T01:46:32.7746760Z       is true for items that are partner_key 'other'
2024-03-07T01:46:32.7747688Z     storage_locations_containing
2024-03-07T01:46:32.8090641Z       retrieves all storage locations that contain an item
2024-03-07T01:46:32.8092047Z     #reactivate!
2024-03-07T01:46:32.8092663Z       given a single item id
2024-03-07T01:46:32.8220567Z         sets the active trait to true for that item
2024-03-07T01:46:32.8221493Z       given an array of item ids
2024-03-07T01:46:32.8494374Z         sets the active trait to true for all of them
2024-03-07T01:46:32.8495432Z     destroy
2024-03-07T01:46:32.8739150Z       only hides an item that has history
2024-03-07T01:46:32.8950817Z       actually destroys an item that doesn't have history
2024-03-07T01:46:33.1110923Z       deactivates the kit if it exists
2024-03-07T01:46:33.1111647Z     barcoded_items >
2024-03-07T01:46:33.1460449Z       returns a collection of items that have barcodes associated with them
2024-03-07T01:46:33.1461477Z     barcodes_for
2024-03-07T01:46:33.1661325Z       retrieves all BarcodeItems associated with an item
2024-03-07T01:46:33.1662319Z   versioning
2024-03-07T01:46:33.1697174Z     is expected to be versioned
2024-03-07T01:46:33.1697632Z 
2024-03-07T01:46:33.1697849Z DistributionItemizedBreakdownService
2024-03-07T01:46:33.1699126Z   #fetch
2024-03-07T01:46:33.5515271Z     should include the break down of items distributed with onhand data
2024-03-07T01:46:33.5517033Z   #fetch_csv
2024-03-07T01:46:33.9213329Z     should output the expected output but in CSV format
2024-03-07T01:46:33.9214256Z 
2024-03-07T01:46:33.9214472Z Kit
2024-03-07T01:46:34.1205280Z   deactivate and reactivate
2024-03-07T01:46:34.1206285Z   Filtering >
2024-03-07T01:46:34.6625558Z     ->alphabetized retrieves items in alphabetical order
2024-03-07T01:46:34.6660763Z     can filter
2024-03-07T01:46:34.6661644Z     ->by_partner_key
2024-03-07T01:46:34.9034168Z       shows the kits for a particular item
2024-03-07T01:46:34.9034766Z   #can_deactivate?
2024-03-07T01:46:34.9035337Z     without inventory items
2024-03-07T01:46:35.0946206Z       should return true
2024-03-07T01:46:35.0946963Z     with inventory items
2024-03-07T01:46:35.3100746Z       should return false
2024-03-07T01:46:35.3101450Z   Validations >
2024-03-07T01:46:35.5051502Z     requires a unique name
2024-03-07T01:46:35.5274861Z     is valid as built
2024-03-07T01:46:35.5533174Z     must belong to an organization
2024-03-07T01:46:35.5833200Z     can't have negative value
2024-03-07T01:46:35.6126316Z     requires at least one item
2024-03-07T01:46:35.6415141Z     requires a name
2024-03-07T01:46:35.6415819Z   Value >
2024-03-07T01:46:35.6709372Z     converts dollars to cents
2024-03-07T01:46:35.6987245Z     converts cents to dollars
2024-03-07T01:46:35.6988227Z     .value_per_itemizable
2024-03-07T01:46:35.7613231Z       calculates values from associated items
2024-03-07T01:46:35.7614253Z   versioning
2024-03-07T01:46:35.7707382Z     is expected to be versioned
2024-03-07T01:46:35.7708492Z 
2024-03-07T01:46:35.7709173Z ApplicationHelper
2024-03-07T01:46:35.7711732Z   step_container_helper
2024-03-07T01:46:35.7718643Z     active_index is less than index
2024-03-07T01:46:35.7836898Z       returns empty string
2024-03-07T01:46:35.7837810Z     active_index is equal to index
2024-03-07T01:46:35.7923316Z       returns active
2024-03-07T01:46:35.7924181Z     active_index is greater than index
2024-03-07T01:46:35.8024581Z       returns done
2024-03-07T01:46:35.8025220Z   confirm_delete_msg
2024-03-07T01:46:35.8156219Z     subs in string
2024-03-07T01:46:35.8156824Z   active_class
2024-03-07T01:46:35.8249802Z     Returns the controller name
2024-03-07T01:46:35.8250881Z   default_title_content
2024-03-07T01:46:35.8251966Z     Organization exists
2024-03-07T01:46:36.0219152Z       returns the organization's name
2024-03-07T01:46:36.0220056Z     Organization does not exist
2024-03-07T01:46:36.0271795Z       returns a default name
2024-03-07T01:46:36.0272698Z   can_administrate?
2024-03-07T01:46:36.0274083Z     User is org admin and part of org
2024-03-07T01:46:36.0480000Z       can administrate
2024-03-07T01:46:36.0480903Z     User is part of org but not org admin
2024-03-07T01:46:36.0610323Z       cannot administrate
2024-03-07T01:46:36.0611314Z     User is org admin and not part of org
2024-03-07T01:46:36.2470349Z       cannot administrate
2024-03-07T01:46:36.2471070Z   flash_class
2024-03-07T01:46:36.2531592Z     returns appropriate class for notice
2024-03-07T01:46:36.2573956Z     returns appropriate class for alert
2024-03-07T01:46:36.2616342Z     returns appropriate class for error
2024-03-07T01:46:36.2658902Z     returns appropriate class for success
2024-03-07T01:46:36.2659882Z 
2024-03-07T01:46:36.2660295Z ProductDrive
2024-03-07T01:46:36.7804417Z   calculates and returns all donated organization item quantities by category and date
2024-03-07T01:46:36.9993279Z   calculates and returns all donated organization item quantities by name and date
2024-03-07T01:46:37.1322804Z   calculates in-kind value
2024-03-07T01:46:37.2655633Z   calculates donation quantity
2024-03-07T01:46:37.4890603Z   calculates donation quantity by date
2024-03-07T01:46:37.4891863Z   scopes
2024-03-07T01:46:37.4892474Z     .within_date_range
2024-03-07T01:46:37.6292836Z       returns the product drive 1
2024-03-07T01:46:37.7712229Z       does not include product drive 2
2024-03-07T01:46:37.7713028Z     .by_item_category_id
2024-03-07T01:46:38.0907633Z       does not return other_name
2024-03-07T01:46:38.4124522Z       returns the product_drive with name some_name
2024-03-07T01:46:38.4125635Z     .by_name
2024-03-07T01:46:38.5480477Z       returns the product_drive with name some_name
2024-03-07T01:46:38.6890621Z       does not return other_name
2024-03-07T01:46:38.6891720Z   donation_source_view
2024-03-07T01:46:38.8266369Z     returns formatted text
2024-03-07T01:46:38.8267428Z   versioning
2024-03-07T01:46:38.9612662Z     is expected to be versioned
2024-03-07T01:46:38.9613430Z   associations
2024-03-07T01:46:39.0549526Z     has_many product_drive_participants through donations
2024-03-07T01:46:39.1437436Z     has_many donations
2024-03-07T01:46:39.1438351Z   validations
2024-03-07T01:46:39.2842504Z     is expected not to be valid
2024-03-07T01:46:39.4197985Z     is expected not to be valid
2024-03-07T01:46:39.5598557Z     is expected not to be valid
2024-03-07T01:46:39.5599521Z   distinct_items
2024-03-07T01:46:39.9047555Z     doesn't double_count the items if there are two donations for the same item
2024-03-07T01:46:40.2446090Z     counts the distinct items correctly in overlapping donations
2024-03-07T01:46:40.5915024Z     counts the distinct items correctly by given category
2024-03-07T01:46:40.9426288Z     counts the distinct items correctly by given date
2024-03-07T01:46:41.2788991Z     counts the items correctly for 1 donation with multiple items
2024-03-07T01:46:41.2790370Z   .search_date_range
2024-03-07T01:46:41.4153183Z     is expected to eq {:end_date=>"2019-12-19", :start_date=>"2019-12-17"}
2024-03-07T01:46:41.4154003Z 
2024-03-07T01:46:41.4154520Z EventDiffer
2024-03-07T01:46:41.6168152Z   should return a full diff
2024-03-07T01:46:41.6168677Z 
2024-03-07T01:46:41.6168975Z TransfersController
2024-03-07T01:46:41.6170330Z   While not signed in
2024-03-07T01:46:41.6352067Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:46:41.6352798Z   While signed in
2024-03-07T01:46:41.6353519Z     POST #create
2024-03-07T01:46:41.6765886Z       redirects to #show when successful
2024-03-07T01:46:41.6915164Z       renders to #new when failing
2024-03-07T01:46:41.6916255Z     GET #show
2024-03-07T01:46:41.7185346Z       returns http success
2024-03-07T01:46:41.7186007Z     GET #new
2024-03-07T01:46:41.7301754Z       returns http success
2024-03-07T01:46:41.7302480Z     Looking at a different organization
2024-03-07T01:46:41.9089721Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:46:41.9090498Z     GET #index
2024-03-07T01:46:41.9222851Z       returns http success
2024-03-07T01:46:41.9223620Z       when filtering by date
2024-03-07T01:46:41.9224382Z         when date parameters are supplied
2024-03-07T01:46:41.9581793Z           only returns the correct obejects
2024-03-07T01:46:41.9582694Z         when date parameters are not supplied
2024-03-07T01:46:41.9945071Z           returns all objects
2024-03-07T01:46:41.9946296Z 
2024-03-07T01:46:41.9946706Z Question
2024-03-07T01:46:41.9948354Z   versioning
2024-03-07T01:46:42.0042762Z     is expected to be versioned
2024-03-07T01:46:42.0043469Z   scope for_partners
2024-03-07T01:46:42.0382820Z     should filter out questions that aren't meant for partners
2024-03-07T01:46:42.0383934Z   punctuate
2024-03-07T01:46:42.0423942Z     should punctuate each string in a given array
2024-03-07T01:46:42.0424833Z   scope for_banks
2024-03-07T01:46:42.0650055Z     should filter out questions that aren't meant for banks
2024-03-07T01:46:42.0651278Z   remove_redundant_error
2024-03-07T01:46:42.0689472Z     should return an array with only one error message related to the checkboxes.
2024-03-07T01:46:42.0690603Z   validations
2024-03-07T01:46:42.0782296Z     question for_banks and for_partners attributes can't both be false
2024-03-07T01:46:42.0844312Z     is expected to validate that :title cannot be empty/falsy
2024-03-07T01:46:42.0901693Z     is expected to validate that :answer cannot be empty/falsy
2024-03-07T01:46:42.0902404Z 
2024-03-07T01:46:42.0902655Z Partners::UpdateFamily
2024-03-07T01:46:42.0903420Z   #call
2024-03-07T01:46:42.0904244Z     when an error occurs during archiving
2024-03-07T01:46:42.1279318Z       does not archive the family or its children and adds error to the service
2024-03-07T01:46:42.1280488Z     when family has children
2024-03-07T01:46:42.1675268Z       archives the family and its children
2024-03-07T01:46:42.1675946Z 
2024-03-07T01:46:42.1676217Z DistributionUpdateService
2024-03-07T01:46:42.1677508Z   resend_notification?
2024-03-07T01:46:42.2594778Z     changes the issue_date, resulting in resend_notification? = true
2024-03-07T01:46:42.3505508Z     changes the delivery_method, resulting in resend_notification? = true
2024-03-07T01:46:42.4458853Z     changes any distribution content, resulting in resend_notification? = true
2024-03-07T01:46:42.4460177Z   call
2024-03-07T01:46:42.5473308Z     replaces a big distribution with a smaller one, resulting in increased stored quantities
2024-03-07T01:46:42.5474333Z 
2024-03-07T01:46:42.5474604Z Partners::RequestCreateService
2024-03-07T01:46:42.5475460Z   #call
2024-03-07T01:46:42.5476010Z     when the arguments are incorrect
2024-03-07T01:46:42.5476888Z       because a unrecogonized item_id was provided
2024-03-07T01:46:42.5794219Z         should return the Request object with an error
2024-03-07T01:46:42.5795214Z       because no item_requests_attributes and comments were defined
2024-03-07T01:46:42.6052307Z         should return the Request object with an error
2024-03-07T01:46:42.6053175Z     when the arguments are correct
2024-03-07T01:46:42.6409941Z       should notify the Partner via email
2024-03-07T01:46:42.6763107Z       should create a Request record
2024-03-07T01:46:42.7105813Z       should have no errors
2024-03-07T01:46:42.7106815Z       but a unexpected error occured during the save
2024-03-07T01:46:42.7107628Z         for the Request record
2024-03-07T01:46:42.7443190Z           should NOT notify the Partner via email
2024-03-07T01:46:42.7766703Z           should have an error with the raised error
2024-03-07T01:46:42.8104133Z           should NOT create a Request record
2024-03-07T01:46:42.8105777Z 
2024-03-07T01:46:42.8106036Z PartnerApprovalService
2024-03-07T01:46:42.8106896Z   #call
2024-03-07T01:46:42.8108053Z     when the arguments are correct
2024-03-07T01:46:42.8380558Z       should send an email notification to the partner
2024-03-07T01:46:42.8668805Z       should change the partner status to approved
2024-03-07T01:46:42.9046242Z       should have no errors
2024-03-07T01:46:42.9047304Z       but a unexpected error occured during the save
2024-03-07T01:46:42.9048245Z         for partner approval
2024-03-07T01:46:42.9311591Z           should not change the partner status to approved
2024-03-07T01:46:42.9565704Z           should not send an email notification to the partner
2024-03-07T01:46:42.9823020Z           should have an error with the raised error
2024-03-07T01:46:42.9824053Z     when the arguments are incorrect
2024-03-07T01:46:42.9824843Z       because the partner is not approvable
2024-03-07T01:46:43.0066903Z         should return the PartnerApprovalService object with an error
2024-03-07T01:46:43.0067774Z 
2024-03-07T01:46:43.0068144Z Reports::PeriodSupplyReportService
2024-03-07T01:46:43.0068902Z   #report
2024-03-07T01:46:43.1840100Z     should report zero values
2024-03-07T01:46:43.1840890Z     with values
2024-03-07T01:46:43.8187731Z       should report normal values
2024-03-07T01:46:43.8188402Z 
2024-03-07T01:46:43.8188724Z Partners::AuthorizedFamilyMember
2024-03-07T01:46:43.8189815Z   versioning
2024-03-07T01:46:43.8229234Z     is expected to be versioned
2024-03-07T01:46:43.8230012Z   #display_name
2024-03-07T01:46:43.8500840Z     should return the family member's first and last name
2024-03-07T01:46:43.8501970Z   associations
2024-03-07T01:46:43.8542435Z     is expected to belong to family required: true
2024-03-07T01:46:43.8577744Z     is expected to have many child_item_requests dependent => nullify
2024-03-07T01:46:43.8579315Z 
2024-03-07T01:46:43.8579666Z Donation
2024-03-07T01:46:43.8581751Z   Associations >
2024-03-07T01:46:43.8582503Z     items >
2024-03-07T01:46:43.8732379Z       has_many
2024-03-07T01:46:43.8733029Z   Methods >
2024-03-07T01:46:43.8734027Z     remove
2024-03-07T01:46:43.9296762Z       works with either an id or an object
2024-03-07T01:46:43.9880076Z       removes the item from the donation
2024-03-07T01:46:44.0497064Z       fails gracefully if the item doesn't exist
2024-03-07T01:46:44.0498289Z     money_raised
2024-03-07T01:46:44.1053760Z       tracks the money raised in a donation
2024-03-07T01:46:44.1054541Z     source_view
2024-03-07T01:46:44.1055175Z       details
2024-03-07T01:46:44.1056008Z         manufacturer
2024-03-07T01:46:44.1207489Z           returns manufacturer name
2024-03-07T01:46:44.1207998Z         donation site
2024-03-07T01:46:44.1305751Z           returns donation_site name
2024-03-07T01:46:44.1306278Z         product drive
2024-03-07T01:46:44.1403609Z           returns product_drive name
2024-03-07T01:46:44.1404244Z         misc
2024-03-07T01:46:44.1535494Z           returns a truncated comment
2024-03-07T01:46:44.1536333Z       not from a drive
2024-03-07T01:46:44.1643423Z         returns source
2024-03-07T01:46:44.1647947Z       from a drive
2024-03-07T01:46:44.1649415Z         participant known
2024-03-07T01:46:44.1650079Z           contact name present
2024-03-07T01:46:44.1774612Z             returns participant display name
2024-03-07T01:46:44.1775262Z           no contact name
2024-03-07T01:46:44.1898254Z             returns drive display name
2024-03-07T01:46:44.1898860Z         unknown participant
2024-03-07T01:46:44.2000292Z           returns drive display name
2024-03-07T01:46:44.2001156Z   SOURCES
2024-03-07T01:46:44.2037552Z     the hash is immutable
2024-03-07T01:46:44.2071804Z     is a hash that is referenceable by key to avoid 'magic strings'
2024-03-07T01:46:44.2105996Z     the hash values are immutable
2024-03-07T01:46:44.2106844Z   Scopes >
2024-03-07T01:46:44.2107385Z     by_source >
2024-03-07T01:46:44.2108132Z       when source is a symbol
2024-03-07T01:46:44.2108919Z         when source is invalid
2024-03-07T01:46:44.2276482Z           does not throw errors, returns no results
2024-03-07T01:46:44.2277260Z         when source is valid
2024-03-07T01:46:44.2445991Z           allows a symbol as an argument, referencing the SOURCES hash
2024-03-07T01:46:44.2447024Z       when source is not a symbol
2024-03-07T01:46:44.2447836Z         when source is invalid
2024-03-07T01:46:44.2621920Z           does not throw errors, returns no results
2024-03-07T01:46:44.2622760Z         when source comes from the SOURCES hash
2024-03-07T01:46:44.2798284Z           returns all donations with the provided source
2024-03-07T01:46:44.2799199Z     during >
2024-03-07T01:46:44.2987798Z       returns all donations created between two dates
2024-03-07T01:46:44.2988533Z   Callbacks >
2024-03-07T01:46:44.3151660Z     automatically combines duplicate line_item records when they're created
2024-03-07T01:46:44.3281948Z     inititalizes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:46:44.3282789Z   versioning
2024-03-07T01:46:44.3318925Z     is expected to be versioned
2024-03-07T01:46:44.3319579Z   Validations >
2024-03-07T01:46:44.3362858Z     requires an inventory (storage location)
2024-03-07T01:46:44.3478358Z     requires a donation_site if the source is 'Donation Site'
2024-03-07T01:46:44.3529689Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:46:44.3595134Z     requires a source from the list of available sources
2024-03-07T01:46:44.3639908Z     must belong to an organization
2024-03-07T01:46:44.3792290Z     is invalid when the line items are invalid
2024-03-07T01:46:44.3913748Z     requires a manufacturer if the source is 'Manufacturer'
2024-03-07T01:46:44.4033959Z     requires a product drive participant if the source is 'Product Drive'
2024-03-07T01:46:44.4034935Z   behaves like itemizable
2024-03-07T01:46:44.4035629Z     .to_a
2024-03-07T01:46:44.4036201Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:46:44.4377470Z         calls line_item_values
2024-03-07T01:46:44.4378209Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:46:44.4717949Z         raises an error
2024-03-07T01:46:44.4718711Z     .line_items
2024-03-07T01:46:44.4719556Z       total
2024-03-07T01:46:44.5098342Z         has an item total
2024-03-07T01:46:44.5099204Z       combine!
2024-03-07T01:46:44.5580775Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:46:44.5980395Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:46:44.5981226Z       sorted
2024-03-07T01:46:44.6462116Z         displays the items, sorted by name
2024-03-07T01:46:44.6462597Z       quantities_by_name
2024-03-07T01:46:44.6814487Z         leaves out zero-quantitied items if requested
2024-03-07T01:46:44.7141298Z         returns a hash of items with id, name, and quantity
2024-03-07T01:46:44.7142571Z 
2024-03-07T01:46:44.7143046Z InventoryCheckService
2024-03-07T01:46:44.7143906Z   call
2024-03-07T01:46:44.7144864Z     error
2024-03-07T01:46:44.7922556Z       should set the error
2024-03-07T01:46:44.7923283Z     alert
2024-03-07T01:46:44.8687091Z       should set the alert
2024-03-07T01:46:44.8687986Z 
2024-03-07T01:46:44.8688470Z PartnerRequestRecertificationService
2024-03-07T01:46:44.8689605Z   #call
2024-03-07T01:46:44.8693331Z     when the arguments are incorrect
2024-03-07T01:46:44.8694505Z       because the partner has already been requested to recertify
2024-03-07T01:46:44.8977798Z         should return the PartnerRequestRecertificationService object with an error
2024-03-07T01:46:44.8979346Z     when the partner is deactivated
2024-03-07T01:46:44.9260956Z       does not send an email
2024-03-07T01:46:44.9261548Z     when the arguments are correct
2024-03-07T01:46:44.9562821Z       should have no errors
2024-03-07T01:46:44.9865704Z       should queue sending the notice to the partner
2024-03-07T01:46:45.0182135Z       should change the partner status to approved
2024-03-07T01:46:45.0183131Z       but a unexpected error occurred during the save
2024-03-07T01:46:45.0183892Z         for partner approval
2024-03-07T01:46:45.0457375Z           should not change the partner status to recertification_required
2024-03-07T01:46:45.0716148Z           should have an error with the raised error
2024-03-07T01:46:45.0976419Z           should NOT queue sending the notice to the partner
2024-03-07T01:46:45.0977815Z 
2024-03-07T01:46:45.0978199Z OrganizationMailer
2024-03-07T01:46:45.0979067Z   #partner_approval_request
2024-03-07T01:46:45.1247222Z     includes a link to the relevant partner
2024-03-07T01:46:45.1480784Z     should be sent to the partner main email with the correct subject line
2024-03-07T01:46:45.1713939Z     renders the body with correct text with partner information
2024-03-07T01:46:45.1714926Z 
2024-03-07T01:46:45.1715228Z ItemsInQuery
2024-03-07T01:46:45.1716017Z   items_in
2024-03-07T01:46:45.5000623Z     does not count transfers going in the negative direction
2024-03-07T01:46:45.7496563Z     includes donations, purchases, adjustments, transfers among sources
2024-03-07T01:46:46.0074148Z     returns a collection with the fields name, item_id, quantity
2024-03-07T01:46:46.3198135Z     does not count negative adjustments towards in-flow
2024-03-07T01:46:46.3198793Z 
2024-03-07T01:46:46.3199045Z KitAllocation
2024-03-07T01:46:46.3202460Z   add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb (PENDING: Not yet implemented)
2024-03-07T01:46:46.3203526Z   versioning
2024-03-07T01:46:46.3290278Z     is expected to be versioned
2024-03-07T01:46:46.3290890Z 
2024-03-07T01:46:46.3291670Z DonationDestroyService
2024-03-07T01:46:46.3292397Z   #call
2024-03-07T01:46:46.3294018Z     when the organization_id matches no Organization
2024-03-07T01:46:46.3334705Z       to not be a success
2024-03-07T01:46:46.3335674Z     when storage_location fails to decrease the inventory of the donation
2024-03-07T01:46:46.3391657Z       to not be a success
2024-03-07T01:46:46.3392623Z     when the donation_id matches no Donation owned by the organization
2024-03-07T01:46:46.3430296Z       to not be a success
2024-03-07T01:46:46.3431129Z     when the donation succesfully gets destroyed
2024-03-07T01:46:46.3702625Z       to be a success
2024-03-07T01:46:46.3703309Z     when the donation destroy fails
2024-03-07T01:46:46.3750676Z       to not be a success
2024-03-07T01:46:46.3751363Z 
2024-03-07T01:46:46.3751704Z HelpController
2024-03-07T01:46:46.3755060Z   While signed in as a normal user >
2024-03-07T01:46:46.3755987Z     GET #show
2024-03-07T01:46:46.3880765Z       returns http success
2024-03-07T01:46:46.3958628Z       does not display help page when the user logs out
2024-03-07T01:46:46.3959217Z 
2024-03-07T01:46:46.3959593Z Reports::AcquisitionReportService
2024-03-07T01:46:46.3960373Z   acquisition report
2024-03-07T01:46:47.3106147Z     should return the proper results on #report
2024-03-07T01:46:47.3106765Z 
2024-03-07T01:46:47.3107245Z ItemCreateService
2024-03-07T01:46:47.3108063Z   #call
2024-03-07T01:46:47.3108699Z     when an issue occurs in transaction
2024-03-07T01:46:47.3109618Z       because the item create raised an error
2024-03-07T01:46:47.4837525Z         should return a OpenStruct with the raised error
2024-03-07T01:46:47.4838633Z       because the organization_id does not match any Organization
2024-03-07T01:46:47.6573766Z         should return a OpenStruct with an ActiveRecord::RecordNotFound error
2024-03-07T01:46:47.6574998Z       because a inventory item creation failed and raised an error
2024-03-07T01:46:47.8261639Z         should return a OpenStruct with the raised error
2024-03-07T01:46:47.8262793Z     when there are no issues
2024-03-07T01:46:48.0057298Z       should execute the expected methods
2024-03-07T01:46:48.1834612Z       should return an OpenStruct with success? set to true and the item
2024-03-07T01:46:48.1835413Z 
2024-03-07T01:46:48.1835663Z User
2024-03-07T01:46:48.1901753Z   has a valid factory
2024-03-07T01:46:48.1902566Z   Methods >
2024-03-07T01:46:48.2382629Z     #kind
2024-03-07T01:46:48.2477007Z     #reinvitable?
2024-03-07T01:46:48.2535540Z     discarded?
2024-03-07T01:46:48.2622425Z     #invitation_status
2024-03-07T01:46:48.2632441Z   Scopes >
2024-03-07T01:46:48.2633198Z     ->alphabetized
2024-03-07T01:46:48.2879831Z       retrieves users in the correct order
2024-03-07T01:46:48.2880767Z   Scopes >
2024-03-07T01:46:48.2881565Z     ->alphabetized
2024-03-07T01:46:48.3263461Z       retrieves users in the correct order
2024-03-07T01:46:48.3264292Z   omniauth
2024-03-07T01:46:48.3398213Z     retrieves the user from an omniauth context
2024-03-07T01:46:48.3398981Z   Validations >
2024-03-07T01:46:48.3482961Z     requires a name
2024-03-07T01:46:48.3668236Z     requires an email that is formatted correctly
2024-03-07T01:46:48.3669302Z   versioning
2024-03-07T01:46:48.3706077Z     is expected to be versioned
2024-03-07T01:46:48.3707007Z 
2024-03-07T01:46:48.3707554Z DonationsController
2024-03-07T01:46:48.3709078Z   calculating total value of multiple donations
2024-03-07T01:46:48.5001288Z     works correctly for multiple line items per donation
2024-03-07T01:46:48.5039894Z     returns zero for an empty array of donations
2024-03-07T01:46:48.5040565Z   While signed in as a normal user >
2024-03-07T01:46:48.5042199Z     DELETE #destroy
2024-03-07T01:46:48.5206247Z       redirects to the dashboard path
2024-03-07T01:46:48.5207199Z     POST#create
2024-03-07T01:46:48.5408084Z       renders GET#new with error on failure
2024-03-07T01:46:48.5805137Z       redirects to GET#edit on success
2024-03-07T01:46:48.5806123Z     GET #show
2024-03-07T01:46:48.5972076Z       returns http success
2024-03-07T01:46:48.5973195Z     GET #edit
2024-03-07T01:46:48.6171554Z       returns http success
2024-03-07T01:46:48.6172569Z     GET #index
2024-03-07T01:46:48.6311444Z       returns http success
2024-03-07T01:46:48.6312085Z     PUT#update
2024-03-07T01:46:48.7372092Z       updates storage quantity correctly
2024-03-07T01:46:48.7699286Z       redirects to index after update
2024-03-07T01:46:48.7700268Z       when changing storage location
2024-03-07T01:46:48.8724958Z         updates storage quantity correctly
2024-03-07T01:46:48.8761840Z         rolls back updates if quantity would go below 0
2024-03-07T01:46:48.8762707Z       when removing a line item
2024-03-07T01:46:48.9722799Z         updates storage invetory item quantity correctly
2024-03-07T01:46:48.9723840Z     GET #new
2024-03-07T01:46:48.9845707Z       returns http success
2024-03-07T01:46:48.9846488Z   While signed in as an organization admin >
2024-03-07T01:46:48.9847337Z     DELETE #destroy
2024-03-07T01:46:49.0136310Z       redirects to the index
2024-03-07T01:46:49.0136999Z   calculating total money raised for all donations
2024-03-07T01:46:49.0259149Z     correctly calculates the total
2024-03-07T01:46:49.0293987Z     returns zero for an empty array of donations
2024-03-07T01:46:49.0295035Z 
2024-03-07T01:46:49.0295433Z PartnerFetchRequestableItemsService
2024-03-07T01:46:49.0296147Z   #call
2024-03-07T01:46:49.0413683Z     raises an error indiciating the partner does not exist with invalid id
2024-03-07T01:46:49.0414940Z     org with any amount of items
2024-03-07T01:46:49.0415768Z       when the partner is in a partner group and has items
2024-03-07T01:46:49.2768615Z         should return only active and visible items from partner
2024-03-07T01:46:49.2769767Z       when the partner is in a partner group and has no items
2024-03-07T01:46:49.4739438Z         should return only active and visible items from partner
2024-03-07T01:46:49.4740867Z     when the partner is not in any partner group
2024-03-07T01:46:49.5012995Z       is expected to be nil
2024-03-07T01:46:49.5013866Z       when the organization has no items
2024-03-07T01:46:49.5308273Z         should return no items
2024-03-07T01:46:49.5309063Z       when the organization has items
2024-03-07T01:46:49.5815741Z         should return only active and visible items
2024-03-07T01:46:49.6131814Z         is expected to eq [#<Item id: 3304, name: "Item 1", category: nil, created_at: "2024-03-06 17:46:49.599025415 -0800", u... on_hand_recommended_quantity: nil, visible_to_partners: false, kit_id: nil, item_category_id: nil>]
2024-03-07T01:46:49.6133664Z 
2024-03-07T01:46:49.6133915Z Distribution
2024-03-07T01:46:49.6135547Z   Callbacks >
2024-03-07T01:46:49.6611427Z     initializes the issued_at field to default to midnight if it wasn't explicitly set
2024-03-07T01:46:49.6612546Z     #before_save
2024-03-07T01:46:49.6613080Z       #reset_shipping_cost
2024-03-07T01:46:49.6613511Z         when delivery_method is other then shipped
2024-03-07T01:46:49.7061799Z           distribution will be created successfully and the shipping_cost will be zero
2024-03-07T01:46:49.7062793Z   Scopes >
2024-03-07T01:46:49.7063179Z     by_location >
2024-03-07T01:46:49.7411874Z       only returns distributions with given location id
2024-03-07T01:46:49.7412576Z     by_item_id >
2024-03-07T01:46:49.8762255Z       only returns distributions with given item id
2024-03-07T01:46:49.8763009Z     this_week >
2024-03-07T01:46:49.8763736Z       When it's Sunday (end of the week)
2024-03-07T01:46:49.9251963Z         doesn't include distributions past Sunday
2024-03-07T01:46:49.9252732Z       When it's Tuesday (mid-week)
2024-03-07T01:46:49.9939844Z         includes distributions as early as Monday and as late as upcoming Sunday
2024-03-07T01:46:49.9940555Z     during >
2024-03-07T01:46:50.0648052Z       returns all distributions created between two dates
2024-03-07T01:46:50.0648851Z     by_partner >
2024-03-07T01:46:50.1126633Z       only returns distributions with given partner id
2024-03-07T01:46:50.1127317Z   versioning
2024-03-07T01:46:50.1161872Z     is expected to be versioned
2024-03-07T01:46:50.1162425Z   behaves like itemizable
2024-03-07T01:46:50.1163275Z     .line_items
2024-03-07T01:46:50.1164261Z       combine!
2024-03-07T01:46:50.1706872Z         incrementally combines line_items on donations that have already been created
2024-03-07T01:46:50.2119283Z         combines multiple line_items with the same item_id into a single record
2024-03-07T01:46:50.2119887Z       total
2024-03-07T01:46:50.2970053Z         has an item total
2024-03-07T01:46:50.2970503Z       sorted
2024-03-07T01:46:50.4219057Z         displays the items, sorted by name
2024-03-07T01:46:50.4219755Z       quantities_by_name
2024-03-07T01:46:50.5110949Z         leaves out zero-quantitied items if requested
2024-03-07T01:46:50.5945696Z         returns a hash of items with id, name, and quantity
2024-03-07T01:46:50.5946316Z     .to_a
2024-03-07T01:46:50.5947671Z       with Flipper flag :deprecate_to_a disabled
2024-03-07T01:46:50.6286379Z         calls line_item_values
2024-03-07T01:46:50.6287026Z       with Flipper flag :deprecate_to_a enabled
2024-03-07T01:46:50.6631271Z         raises an error
2024-03-07T01:46:50.6632118Z   Validations >
2024-03-07T01:46:50.6789318Z     ensures the associated line_items are invalid with a zero quantity
2024-03-07T01:46:50.7216562Z     ensures the associated line_items are valid
2024-03-07T01:46:50.7373093Z     ensures the associated line_items are invalid with a nil quantity
2024-03-07T01:46:50.7422200Z     requires a partner
2024-03-07T01:46:50.7472073Z     must belong to an organization
2024-03-07T01:46:50.7507776Z     ensures that any included items are found in the associated storage location
2024-03-07T01:46:50.7556191Z     requires a storage location
2024-03-07T01:46:50.7613025Z     ensures that the issued at is no earlier than 2000
2024-03-07T01:46:50.7613780Z     when delivery method is shipped
2024-03-07T01:46:50.7614773Z       shipping cost is negative
2024-03-07T01:46:50.7672942Z         will not allow to save distribution
2024-03-07T01:46:50.7673657Z       shipping cost is none negative
2024-03-07T01:46:50.7938825Z         allows to save distribution
2024-03-07T01:46:50.7939522Z     when delivery method is other then shipped
2024-03-07T01:46:50.8221450Z       allows to save distribution
2024-03-07T01:46:50.8222041Z   Methods >
2024-03-07T01:46:50.8223297Z     #copy_line_items
2024-03-07T01:46:50.8639249Z       replicates line_items from a donation into a distribution
2024-03-07T01:46:50.8640057Z     #copy_from_request
2024-03-07T01:46:50.8874102Z       copy over relevant request information into the distrubution
2024-03-07T01:46:50.8874928Z     #combine_duplicates
2024-03-07T01:46:50.9280714Z       condenses duplicate line_items if the item_ids match
2024-03-07T01:46:50.9281469Z     #distributed_at
2024-03-07T01:46:50.9543605Z       shows the hour and minutes if it has been provided
2024-03-07T01:46:51.0009214Z       displays explicit issued_at date
2024-03-07T01:46:51.0009829Z     #future?
2024-03-07T01:46:51.0010493Z       when issued_at has not passed
2024-03-07T01:46:51.0275371Z         returns true
2024-03-07T01:46:51.0275888Z       when issued_at has passed
2024-03-07T01:46:51.0527140Z         returns false
2024-03-07T01:46:51.0527891Z   CSV export >
2024-03-07T01:46:51.0528914Z     for_csv_export >
2024-03-07T01:46:51.5163508Z       filters only to the given organization
2024-03-07T01:46:51.8841451Z       filters only to the given filter
2024-03-07T01:46:52.2127893Z       filters only to the given issue time range
2024-03-07T01:46:52.2128608Z     csv_export_attributes
2024-03-07T01:46:52.6132473Z       returns the set of attributes which define a row in case of distribution export
2024-03-07T01:46:52.6133158Z 
2024-03-07T01:46:52.6133501Z Partners::FetchPartnersToRemindNowService
2024-03-07T01:46:52.6134321Z   .fetch
2024-03-07T01:46:52.6135039Z     when there is a partner
2024-03-07T01:46:52.6136127Z       that does NOT have a organization with a global reminder & deadline
2024-03-07T01:46:52.6137261Z         and is a part of a partner group that does have them defined
2024-03-07T01:46:52.6138068Z           that is not for today
2024-03-07T01:46:52.6476219Z             should NOT include that partner
2024-03-07T01:46:52.6476877Z           that is for today
2024-03-07T01:46:52.6799382Z             should include that partner
2024-03-07T01:46:52.6799821Z             but the partner is deactivated
2024-03-07T01:46:52.7164411Z               should NOT include that partner
2024-03-07T01:46:52.7165357Z       that has an organization with a global reminder & deadline
2024-03-07T01:46:52.7166411Z         AND a partner group that does have them defined
2024-03-07T01:46:52.7506300Z           should remind based on the partner group instead of the organization level reminder
2024-03-07T01:46:52.7507329Z           but the partner is deactivated
2024-03-07T01:46:52.7883720Z             should NOT include that partner
2024-03-07T01:46:52.7884392Z         that is not for today
2024-03-07T01:46:52.8166273Z           should NOT include that partner
2024-03-07T01:46:52.8166894Z         that is for today
2024-03-07T01:46:52.8456105Z           should include that partner
2024-03-07T01:46:52.8456758Z           but the partner is deactivated
2024-03-07T01:46:52.8772449Z             should NOT include that partner
2024-03-07T01:46:52.8773087Z           and has send_reminder=false
2024-03-07T01:46:52.9085890Z             should NOT include that partner
2024-03-07T01:46:52.9087518Z 
2024-03-07T01:46:52.9087753Z AllocateKitInventoryService
2024-03-07T01:46:52.9088528Z   #allocate
2024-03-07T01:46:52.9089430Z     when more than one kit is requested
2024-03-07T01:46:52.9090072Z       but one of the items is out of stock
2024-03-07T01:46:53.1819760Z         returns error and does not change kit or item quantity
2024-03-07T01:46:53.1820682Z     when inventory items are available
2024-03-07T01:46:53.4625912Z       allocates items, increases the quantity of the Kit Item and inventory in, and decreases inventory out
2024-03-07T01:46:53.4627509Z       when there are more then one line items
2024-03-07T01:46:53.4628147Z         when there kit is allocated once
2024-03-07T01:46:53.7281939Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:46:53.7283014Z         when same kit is allocated multiple times
2024-03-07T01:46:54.0352919Z           inventory out for that kit contains both line_items with their respective quantity
2024-03-07T01:46:54.0353645Z       When kit is allocated more then once
2024-03-07T01:46:54.3122064Z         increases the already existed inventory in and decreases the already existed inventory out
2024-03-07T01:46:54.3123075Z   #error
2024-03-07T01:46:54.3123880Z     when the Store location organization doesn't match
2024-03-07T01:46:54.5282572Z       returns error
2024-03-07T01:46:54.5282991Z 
2024-03-07T01:46:54.5283375Z DispersedPastDatesGenerator
2024-03-07T01:46:54.5284327Z   constants
2024-03-07T01:46:54.5323751Z     has 4 day ranges for generation of past dates
2024-03-07T01:46:54.5324244Z   #next
2024-03-07T01:46:54.5376562Z     returns equally dispersed dates between all time ranges
2024-03-07T01:46:54.5377213Z 
2024-03-07T01:46:54.5377469Z TextInterpolatorService
2024-03-07T01:46:54.5378350Z   #call
2024-03-07T01:46:54.5414188Z     returns interpolated text
2024-03-07T01:46:54.5414940Z     when text is nil
2024-03-07T01:46:54.5447481Z       returns nil
2024-03-07T01:46:54.5447966Z     when text is empty
2024-03-07T01:46:54.5483276Z       returns empty string
2024-03-07T01:46:54.5483848Z     when interpolations are nil
2024-03-07T01:46:54.5519391Z       returns text
2024-03-07T01:46:54.5519923Z     when interpolations are empty
2024-03-07T01:46:54.5554983Z       returns text
2024-03-07T01:46:54.5555550Z     when interpolations are not present
2024-03-07T01:46:54.5588487Z       returns text
2024-03-07T01:46:54.5589555Z 
2024-03-07T01:46:54.5589859Z BarcodeItem
2024-03-07T01:46:54.5590865Z   versioning
2024-03-07T01:46:54.5628365Z     is expected to be versioned
2024-03-07T01:46:54.5629127Z   Organization barcodes
2024-03-07T01:46:54.5758212Z     updates a counter in Item whenever it tracks a new barcode
2024-03-07T01:46:54.5758990Z     scopes >
2024-03-07T01:46:54.5967308Z       #by_item_partner_key returns barcodes that match the partner key
2024-03-07T01:46:54.6159807Z       ->by_value returns the barcode with that value
2024-03-07T01:46:54.8040600Z       ->for_csv_export will accept an organization and provide all barcodes for that org
2024-03-07T01:46:54.8041262Z     to_h >
2024-03-07T01:46:54.8161237Z       emits a hash for a line_item
2024-03-07T01:46:54.8161815Z     filters >
2024-03-07T01:46:54.8358795Z       ->item_id shows only barcodes for a specific item_id
2024-03-07T01:46:54.8359731Z     validations >
2024-03-07T01:46:54.8478563Z       allows multiple barcodes to point at the same item
2024-03-07T01:46:54.8643758Z       is valid only with an organization
2024-03-07T01:46:54.8878985Z       does not enforces value uniqueness across organizations
2024-03-07T01:46:54.9033232Z       enforces value uniqueness within the organization
2024-03-07T01:46:54.9033943Z       value >
2024-03-07T01:46:54.9126163Z         requires a value
2024-03-07T01:46:54.9126663Z       item >
2024-03-07T01:46:54.9217445Z         is invalid without an item associated with it
2024-03-07T01:46:54.9218158Z       quantity >
2024-03-07T01:46:54.9309758Z         is an integer
2024-03-07T01:46:54.9405124Z         is not nil
2024-03-07T01:46:54.9498476Z         is not a negative number
2024-03-07T01:46:54.9499393Z 
2024-03-07T01:46:54.9499811Z Role
2024-03-07T01:46:54.9535658Z   is expected to accepts_nested_attributes_for :users
2024-03-07T01:46:54.9536380Z   Associations
2024-03-07T01:46:54.9597026Z     is expected to have and belong to many users
2024-03-07T01:46:54.9635021Z     is expected to belong to resource optional: true
2024-03-07T01:46:54.9635848Z   versioning
2024-03-07T01:46:54.9672199Z     is expected to be versioned
2024-03-07T01:46:54.9672757Z   Validations
2024-03-07T01:46:54.9723569Z     is expected to validate that :resource_type is either ‹"Organization"› or ‹"Partner"›
2024-03-07T01:46:54.9724419Z 
2024-03-07T01:46:54.9724609Z DistributionMailer
2024-03-07T01:46:54.9725048Z   #reminder_email
2024-03-07T01:46:54.9725467Z     Text format
2024-03-07T01:46:55.0262356Z       renders the body with organization's email text
2024-03-07T01:46:55.0263199Z     with deliver_method: :pick_up
2024-03-07T01:46:55.0791058Z       renders the body with 'pick up' specified
2024-03-07T01:46:55.0791781Z     with deliver_method: :delivery
2024-03-07T01:46:55.1325297Z       renders the body with 'delivery' specified
2024-03-07T01:46:55.1325764Z     HTML format
2024-03-07T01:46:55.1830628Z       renders the body with organization's email text
2024-03-07T01:46:55.1831331Z   #partner_mailer
2024-03-07T01:46:55.2365640Z     renders the body with organization's email text
2024-03-07T01:46:55.2867858Z     renders the body with distributions text
2024-03-07T01:46:55.2869465Z     with deliver_method: :delivery
2024-03-07T01:46:55.3410283Z       renders the body with 'delivered' specified
2024-03-07T01:46:55.3913258Z       sends copy of email only to the partner
2024-03-07T01:46:55.3913964Z     with deliver_method: :pick_up
2024-03-07T01:46:55.4428478Z       renders the body with 'picked up' specified
2024-03-07T01:46:55.4429275Z       when parners profile pick_up_email is present
2024-03-07T01:46:55.4933338Z         sends email to the primary contact and partner`s pickup person
2024-03-07T01:46:55.4934401Z         when pickup person happens to be the same as the primary contact
2024-03-07T01:46:55.5437481Z           does not send email twice
2024-03-07T01:46:55.5438301Z     with distribution changes
2024-03-07T01:46:55.5994932Z       renders the body with changes that happened in the distribution
2024-03-07T01:46:55.5996099Z 
2024-03-07T01:46:55.5996298Z ItemizableUpdateService
2024-03-07T01:46:55.5997513Z   increases
2024-03-07T01:46:55.7476083Z     should update quantity in same storage location
2024-03-07T01:46:55.8820982Z     should update quantity in different locations
2024-03-07T01:46:55.9724475Z     should raise an error if any item is inactive
2024-03-07T01:46:55.9725173Z   decreases
2024-03-07T01:46:56.1049291Z     should update quantity in same storage location
2024-03-07T01:46:56.2101584Z     should raise an error if any item is inactive
2024-03-07T01:46:56.3429092Z     should update quantity in different locations
2024-03-07T01:46:56.3429660Z 
2024-03-07T01:46:56.3429845Z ProfileUpdateService
2024-03-07T01:46:56.3430729Z   #update
2024-03-07T01:46:56.3689199Z     updates the profile with the filtered and prepared params
2024-03-07T01:46:56.3689856Z 
2024-03-07T01:46:56.3690226Z InventoryAggregate
2024-03-07T01:46:56.3691634Z   validation
2024-03-07T01:46:56.3692676Z     current event is incorrect
2024-03-07T01:46:56.6099145Z       should raise a bare error
2024-03-07T01:46:56.6099830Z     subsequent event is incorrect
2024-03-07T01:46:56.9053908Z       should add the event to the message
2024-03-07T01:46:57.1580076Z       should handle negative quantities
2024-03-07T01:46:57.1580785Z   individual events
2024-03-07T01:46:57.4472546Z     should process a donation event after a new storage location is created
2024-03-07T01:46:57.7353042Z     should process a purchase event
2024-03-07T01:46:58.0470478Z     should process a purchase destroyed event
2024-03-07T01:46:58.3321399Z     should process a transfer event
2024-03-07T01:46:58.6399244Z     should process a kit allocation event
2024-03-07T01:46:58.9499923Z     should process an audit event
2024-03-07T01:46:59.2575587Z     should process an adjustment event
2024-03-07T01:46:59.5675408Z     should process a transfer destroy event
2024-03-07T01:46:59.8423775Z     should process a snapshot event
2024-03-07T01:47:00.1283186Z     should process a donation event
2024-03-07T01:47:00.4604682Z     should process a distribution destroyed event
2024-03-07T01:47:00.7632615Z     should process a distribution event
2024-03-07T01:47:01.0652449Z     should process a donation destroyed event
2024-03-07T01:47:01.4463789Z     should process a kit deallocation event
2024-03-07T01:47:01.4464680Z   multiple events
2024-03-07T01:47:01.7555545Z     should handle intervening audits
2024-03-07T01:47:02.0175921Z     should ignore unusable snapshots
2024-03-07T01:47:02.3813317Z     should handle changing storage location
2024-03-07T01:47:02.7408026Z     should handle timing correctly
2024-03-07T01:47:03.1507513Z     should process multiple events
2024-03-07T01:47:03.1508055Z 
2024-03-07T01:47:03.1508238Z CustomDeviseMailer
2024-03-07T01:47:03.1509566Z   #invitation_instructions
2024-03-07T01:47:03.1510559Z     when other partner users invited
2024-03-07T01:47:03.1958506Z       invites to partner user
2024-03-07T01:47:03.1959005Z     when partner is invited
2024-03-07T01:47:03.2375716Z       invites to primary user
2024-03-07T01:47:03.2376286Z     when user is invited
2024-03-07T01:47:03.2558644Z       has invite expiration message
2024-03-07T01:47:03.2733607Z       invites to user
2024-03-07T01:47:03.2734822Z 
2024-03-07T01:47:03.2735035Z ApplicationController
2024-03-07T01:47:03.2736514Z   current_partner
2024-03-07T01:47:03.2737201Z     As a partner user
2024-03-07T01:47:03.3255848Z       should return the first partner role
2024-03-07T01:47:03.3256609Z       with a changed current role
2024-03-07T01:47:03.3780824Z         should return the first partner role
2024-03-07T01:47:03.3781506Z     As an org user
2024-03-07T01:47:03.3913499Z       should return nil
2024-03-07T01:47:03.3914041Z   current_organization
2024-03-07T01:47:03.3915078Z     As an org user
2024-03-07T01:47:03.7524670Z       should return the first org role
2024-03-07T01:47:03.7525316Z       with a changed current role
2024-03-07T01:47:04.1096255Z         should return the first org role
2024-03-07T01:47:04.1097019Z     As a partner user
2024-03-07T01:47:04.1247980Z       should return nil
2024-03-07T01:47:04.1248554Z   dashboard_path_from_current_role
2024-03-07T01:47:04.1249465Z     As a super admin
2024-03-07T01:47:04.1442551Z       links to the admin dashboard
2024-03-07T01:47:04.1443179Z     As a user without super admin status
2024-03-07T01:47:04.1627913Z       links to the general dashboard
2024-03-07T01:47:04.1628971Z 
2024-03-07T01:47:04.1629247Z Manufacturer
2024-03-07T01:47:04.1630554Z   Private Methods
2024-03-07T01:47:04.1631187Z     #exists_in_org?
2024-03-07T01:47:04.3370203Z       returns true if manufacturer exists in an organization
2024-03-07T01:47:04.3371134Z   Validations
2024-03-07T01:47:04.5123794Z     must belong to an organization
2024-03-07T01:47:04.5212544Z     must have a unique name within organization
2024-03-07T01:47:04.5213193Z   versioning
2024-03-07T01:47:04.5245830Z     is expected to be versioned
2024-03-07T01:47:04.5246721Z   Methods
2024-03-07T01:47:04.5247083Z     volume
2024-03-07T01:47:04.5889950Z       retrieves the amount of product that has been donated by manufacturer
2024-03-07T01:47:04.7220431Z       ignores the amount of product from other manufacturers
2024-03-07T01:47:04.8554903Z       retrieves the amount of product that has been donated by manufacturer from multiple donations
2024-03-07T01:47:04.8555710Z 
2024-03-07T01:47:04.8555975Z Reports::AdultIncontinenceReportService
2024-03-07T01:47:04.8556568Z   #report
2024-03-07T01:47:05.0387229Z     should report zero values
2024-03-07T01:47:05.0387774Z     with values
2024-03-07T01:47:05.6414192Z       should handle null distribution quantity
2024-03-07T01:47:06.2467598Z       should report normal values
2024-03-07T01:47:06.2468531Z 
2024-03-07T01:47:06.2468687Z AccountRequestMailer
2024-03-07T01:47:06.2470258Z   #rejection
2024-03-07T01:47:06.2679781Z     should be sent to the correct email address
2024-03-07T01:47:06.2791713Z     should include the rejection reason
2024-03-07T01:47:06.2894669Z     should have the correct subject
2024-03-07T01:47:06.2895579Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:47:06.2939740Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:47:06.2940523Z   #approval_request
2024-03-07T01:47:06.3070395Z     should include the admin link to reject the organization
2024-03-07T01:47:06.3180436Z     should have the correct subject
2024-03-07T01:47:06.3489738Z     should include details of the account request
2024-03-07T01:47:06.3623697Z     should be sent to the info@humanessentials.app email address
2024-03-07T01:47:06.3756375Z     should include the admin link to create the new organization from the account request
2024-03-07T01:47:06.3757669Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:47:06.3803725Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:47:06.3804490Z   #confirmation
2024-03-07T01:47:06.3931956Z     should have the correct subject
2024-03-07T01:47:06.4048473Z     should be from no-reply@humanessentials.app
2024-03-07T01:47:06.4161638Z     should be sent to the specified account_request email
2024-03-07T01:47:06.4162707Z     when the account_request_id provided does not match any AccountRequest
2024-03-07T01:47:06.4209894Z       should trigger raise a ActiveRecord::RecordNotFound error
2024-03-07T01:47:06.4210699Z     HTML format
2024-03-07T01:47:06.4325332Z       should include the staging/demo account information
2024-03-07T01:47:06.4442806Z       should include the button to confirm the request
2024-03-07T01:47:06.4556817Z       should include the instruction video link
2024-03-07T01:47:06.4557494Z     Text format
2024-03-07T01:47:06.4676617Z       should include the button to confirm the request
2024-03-07T01:47:06.4792202Z       should include the instruction video link
2024-03-07T01:47:06.4910411Z       should include the staging/demo account information
2024-03-07T01:47:06.4911016Z 
2024-03-07T01:47:06.4911280Z BroadcastAnnouncement
2024-03-07T01:47:06.5037476Z   is expected to validate that :message cannot be empty/falsy
2024-03-07T01:47:06.5078915Z   is expected to belong to user required: true
2024-03-07T01:47:06.5151098Z   should validate a valid announcement
2024-03-07T01:47:06.5200751Z   is expected to belong to organization optional: true
2024-03-07T01:47:06.5265133Z   should roughly check if link is valid
2024-03-07T01:47:06.5317681Z   should validate a good link
2024-03-07T01:47:06.5318254Z   filter_announcements
2024-03-07T01:47:06.5493635Z     sorts announcements from most recently created to last
2024-03-07T01:47:06.5627924Z     should include only announcements from the passed organization
2024-03-07T01:47:06.5757376Z     shouldn't include expired announcements
2024-03-07T01:47:06.5758027Z   expired?
2024-03-07T01:47:06.5817615Z     should be false if the announcement has not expired
2024-03-07T01:47:06.5872559Z     should be true if the announcement is expired
2024-03-07T01:47:06.5873636Z   versioning
2024-03-07T01:47:06.5908868Z     is expected to be versioned
2024-03-07T01:47:06.5910546Z 
2024-03-07T01:47:06.5910856Z ItemsController
2024-03-07T01:47:06.5911929Z   While not signed in
2024-03-07T01:47:06.6001921Z     redirects the user to the sign-in page for CRUD actions
2024-03-07T01:47:06.6002688Z   While signed in
2024-03-07T01:47:06.6004317Z     PATCH #remove_category
2024-03-07T01:47:06.7908956Z       should redirect to the previous category page
2024-03-07T01:47:06.9833148Z       should remove an item's category
2024-03-07T01:47:06.9833615Z     POST #create
2024-03-07T01:47:06.9834105Z       with valid params
2024-03-07T01:47:07.0025961Z         should accept params with dollar signs, periods, and commas
2024-03-07T01:47:07.0215850Z         should create an item
2024-03-07T01:47:07.0395510Z         should redirect to the item page
2024-03-07T01:47:07.0396001Z       with invalid params
2024-03-07T01:47:07.0552058Z         should show an error
2024-03-07T01:47:07.0552578Z     GET #index
2024-03-07T01:47:07.0725427Z       returns http success
2024-03-07T01:47:07.0725950Z     GET #show
2024-03-07T01:47:07.0917363Z       returns http success
2024-03-07T01:47:07.0918363Z     PATCH #restore
2024-03-07T01:47:07.0918998Z       with a soft-deleted item
2024-03-07T01:47:07.1130106Z         re-activates the item
2024-03-07T01:47:07.1130719Z       with another organizations item
2024-03-07T01:47:07.2947482Z         does nothing
2024-03-07T01:47:07.2947995Z       with an active item
2024-03-07T01:47:07.3146014Z         does nothing
2024-03-07T01:47:07.3146573Z     Looking at a different organization
2024-03-07T01:47:07.4850235Z       redirects the user to the sign-in page for CRUD actions
2024-03-07T01:47:07.4850811Z     GET #new
2024-03-07T01:47:07.4963709Z       returns http success
2024-03-07T01:47:07.4964353Z     GET #edit
2024-03-07T01:47:07.5185259Z       returns http success
2024-03-07T01:47:07.5185813Z     PUT #update
2024-03-07T01:47:07.5186644Z       visible
2024-03-07T01:47:07.5394974Z         should update visible_to_partners to true
2024-03-07T01:47:07.5395670Z       invisible
2024-03-07T01:47:07.5597294Z         should update visible_to_partners to false
2024-03-07T01:47:07.5598017Z     DELETE #destroy
2024-03-07T01:47:07.5838074Z       redirects to #index
2024-03-07T01:47:07.5838923Z 
2024-03-07T01:47:07.5839270Z Exports::ExportReportCSVService
2024-03-07T01:47:07.5840078Z   .generate_csv_data
2024-03-07T01:47:07.5878044Z     creates CSV data including headers
2024-03-07T01:47:07.5914803Z     creates a CSV string
2024-03-07T01:47:07.5915459Z 
2024-03-07T01:47:07.5915803Z Partners::RequestApprovalService
2024-03-07T01:47:07.5916677Z   #call
2024-03-07T01:47:07.5918447Z     when the partner is already awaiting approval
2024-03-07T01:47:07.6205152Z       should return an error saying it the partner is already requested approval
2024-03-07T01:47:07.6206208Z     when the partner is not yet awaiting approval
2024-03-07T01:47:07.6494735Z       should send an email notification to the partner's organization
2024-03-07T01:47:07.6773752Z       should set the status on the partner record to awaiting_review
2024-03-07T01:47:07.6774943Z     when the partner is not yet waiting for approval and there is no profile error
2024-03-07T01:47:07.7069437Z       does not have an error
2024-03-07T01:47:07.7070349Z     when the partner is not yet waiting for approval and there is a profile error
2024-03-07T01:47:07.7072033Z       should return an error re agency_type (PENDING: Temporarily skipped with xit)
2024-03-07T01:47:07.7319691Z       should return an error re social media
2024-03-07T01:47:07.7321011Z 
2024-03-07T01:47:07.7321286Z ProductDriveHelper
2024-03-07T01:47:07.7322691Z   #is_virtual
2024-03-07T01:47:07.7324038Z     when the product drive was held virtually
2024-03-07T01:47:07.7380215Z       is expected to eq "Yes"
2024-03-07T01:47:07.7380924Z     when a product drive was not provided
2024-03-07T01:47:07.7428158Z       without argument
2024-03-07T01:47:07.7473953Z       with blank argument
2024-03-07T01:47:07.7475122Z     when the product drive wasn't held virtually
2024-03-07T01:47:07.7526934Z       is expected to eq "No"
2024-03-07T01:47:07.7528383Z 
2024-03-07T01:47:07.7528682Z DeallocateKitInventoryService
2024-03-07T01:47:07.7530931Z   #error
2024-03-07T01:47:07.7532285Z     when the storage location organization doesn't match
2024-03-07T01:47:07.9826339Z       returns error
2024-03-07T01:47:07.9826886Z   #deallocate
2024-03-07T01:47:07.9827483Z     when inventory items are available
2024-03-07T01:47:07.9829317Z       when decrease_by is less then kit's quantity in inventory_in
2024-03-07T01:47:08.3125326Z         will add items in inventory_out and remove kits for decrease_by from inventory_in
2024-03-07T01:47:08.3126785Z       when decrease_by is greater then kit's quantity in inventory_in
2024-03-07T01:47:08.6014404Z         raises error about inconsistent inventory in or out
2024-03-07T01:47:08.6015398Z       when kit_allocation not exist for inventory_in or inventory_out
2024-03-07T01:47:08.8734046Z         raises error about KitAllocation not found
2024-03-07T01:47:08.8735226Z       when  decrease_by is equal to kit's quantity in inventory_in
2024-03-07T01:47:09.2058255Z         increases the quantity of the loose items contained in the kit and decrease kit quantity, and delete inventory_in and inventory_out
2024-03-07T01:47:09.2059477Z 
2024-03-07T01:47:09.2059661Z ReminderDeadlineMailer
2024-03-07T01:47:09.2060138Z   notify deadline
2024-03-07T01:47:09.2354073Z     renders the subject
2024-03-07T01:47:09.2626806Z     renders the body
2024-03-07T01:47:09.2894687Z     renders the sender email
2024-03-07T01:47:09.3181480Z     renders the receiver email
2024-03-07T01:47:09.5920235Z 
2024-03-07T01:47:09.5921347Z Pending: (Failures listed here are expected and do not affect your suite's status)
2024-03-07T01:47:09.5922167Z 
2024-03-07T01:47:09.5923366Z   1) KitAllocation add some examples to (or delete) /home/runner/work/human-essentials/human-essentials/spec/models/kit_allocation_spec.rb
2024-03-07T01:47:09.5932915Z      # Not yet implemented
2024-03-07T01:47:09.5933541Z      # ./spec/models/kit_allocation_spec.rb:16
2024-03-07T01:47:09.5934004Z 
2024-03-07T01:47:09.5935041Z   2) Partners::RequestApprovalService#call when the partner is not yet waiting for approval and there is a profile error should return an error re agency_type
2024-03-07T01:47:09.5936606Z      # Temporarily skipped with xit
2024-03-07T01:47:09.5937373Z      # ./spec/services/partners/request_approval_service_spec.rb:28
2024-03-07T01:47:09.6237284Z 
2024-03-07T01:47:09.6237717Z Failures:
2024-03-07T01:47:09.6238031Z 
2024-03-07T01:47:09.6239006Z   1) Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:47:09.6240393Z      Failure/Error: size4 = create(:base_item, size: "4")
2024-03-07T01:47:09.6241048Z 
2024-03-07T01:47:09.6241243Z      NoMethodError:
2024-03-07T01:47:09.6243121Z        undefined method `size=' for #<BaseItem id: nil, name: "1T Diapers", category: nil, created_at: nil, updated_at: nil, item_count: nil, partner_key: "1t_diapers">
2024-03-07T01:47:09.6245219Z      # ./spec/models/item_spec.rb:53:in `block (3 levels) in <top (required)>'
2024-03-07T01:47:09.6256368Z 
2024-03-07T01:47:09.6258547Z Finished in 47.69 seconds (files took 8.4 seconds to load)
2024-03-07T01:47:09.6259498Z 575 examples, 1 failure, 2 pending
2024-03-07T01:47:09.6259908Z 
2024-03-07T01:47:09.6260092Z Failed examples:
2024-03-07T01:47:09.6260354Z 
2024-03-07T01:47:09.6261410Z rspec ./spec/models/item_spec.rb:52 # Item Filtering > ->by_size returns all items with the same size, per their BaseItem parent
2024-03-07T01:47:09.6262483Z 
2024-03-07T01:47:09.6266203Z Randomized with seed 14285
2024-03-07T01:47:09.6266547Z 
2024-03-07T01:47:10.1180402Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:47:10.1182456Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3854 / 6435 LOC (59.89%) covered.
2024-03-07T01:47:10.1677231Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/events/inventory_aggregate_spec.rb" "spec/models/product_drive_spec.rb" "spec/models/distribution_spec.rb" "spec/services/kit_create_service_spec.rb" "spec/services/organization_update_service_spec.rb" "spec/models/kit_spec.rb" "spec/services/allocate_kit_inventory_service_spec.rb" "spec/services/deallocate_kit_inventory_service_spec.rb" "spec/services/reports/adult_incontinence_report_service_spec.rb" "spec/services/reports/children_served_report_service_spec.rb" "spec/queries/items_in_query_spec.rb" "spec/queries/items_in_total_query_spec.rb" "spec/models/item_spec.rb" "spec/controllers/items_controller_spec.rb" "spec/models/request_item_spec.rb" "spec/services/reports/acquisition_report_service_spec.rb" "spec/services/item_create_service_spec.rb" "spec/controllers/application_controller_spec.rb" "spec/models/donation_spec.rb" "spec/services/reports/period_supply_report_service_spec.rb" "spec/services/distribution_itemized_breakdown_service_spec.rb" "spec/controllers/donations_controller_spec.rb" "spec/services/itemizable_update_service_spec.rb" "spec/mailers/distribution_mailer_spec.rb" "spec/models/manufacturer_spec.rb" "spec/services/partner_fetch_requestable_items_service_spec.rb" "spec/models/barcode_item_spec.rb" "spec/helpers/application_helper_spec.rb" "spec/services/reports/partner_info_report_service_spec.rb" "spec/services/distribution_update_service_spec.rb" "spec/controllers/transfers_controller_spec.rb" "spec/services/partners/fetch_partners_to_remind_now_service_spec.rb" "spec/controllers/donation_sites_controller_spec.rb" "spec/services/partners/request_create_service_spec.rb" "spec/services/calendar_service_spec.rb" "spec/mailers/account_request_mailer_spec.rb" "spec/services/partner_request_recertification_service_spec.rb" "spec/services/partner_approval_service_spec.rb" "spec/events/event_differ_spec.rb" "spec/models/user_spec.rb" "spec/models/partners/profile_spec.rb" "spec/services/inventory_check_service_spec.rb" "spec/mailers/custom_devise_mailer_spec.rb" "spec/services/partners/request_approval_service_spec.rb" "spec/mailers/partner_mailer_spec.rb" "spec/services/exports/export_purchases_csv_service_spec.rb" "spec/mailers/reminder_deadline_mailer_spec.rb" "spec/models/broadcast_announcement_spec.rb" "spec/models/question_spec.rb" "spec/mailers/organization_mailer_spec.rb" "spec/services/partners/update_family_spec.rb" "spec/models/partners/child_spec.rb" "spec/models/organization_stats_spec.rb" "spec/models/inventory_item_spec.rb" "spec/models/partners/item_request_spec.rb" "spec/jobs/notify_partner_job_spec.rb" "spec/services/donation_destroy_service_spec.rb" "spec/models/partners/authorized_family_member_spec.rb" "spec/models/role_spec.rb" "spec/helpers/product_drive_helper_spec.rb" "spec/controllers/help_controller_spec.rb" "spec/services/profile_update_service_spec.rb" "spec/services/text_interpolator_service_spec.rb" "spec/services/distribution_content_change_service_spec.rb" "spec/helpers/historical_trends_helper_spec.rb" "spec/lib/dispersed_past_dates_generator_spec.rb" "spec/models/kit_allocation_spec.rb" "spec/services/exports/export_report_csv_service_spec.rb" failed
2024-03-07T01:47:10.5485076Z Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
2024-03-07T01:47:10.5486826Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10705 LOC (0.35%) covered.
2024-03-07T01:47:10.5744680Z ##[error]Process completed with exit code 1.
