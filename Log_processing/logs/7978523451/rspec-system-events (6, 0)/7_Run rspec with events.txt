2024-02-20T18:53:34.0063053Z ##[group]Run RUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec
2024-02-20T18:53:34.0063941Z [36;1mRUBYOPT='-W:no-deprecated -W:no-experimental' bin/knapsack_pro_rspec[0m
2024-02-20T18:53:34.0092220Z shell: /usr/bin/bash -e {0}
2024-02-20T18:53:34.0092640Z env:
2024-02-20T18:53:34.0093079Z   POSTGRES_HOST: localhost
2024-02-20T18:53:34.0093447Z   DATABASE_HOST: localhost
2024-02-20T18:53:34.0093822Z   PG_USERNAME: postgres
2024-02-20T18:53:34.0094259Z   PG_PASSWORD: password
2024-02-20T18:53:34.0094661Z   POSTGRES_HOST_AUTH_METHOD: trust
2024-02-20T18:53:34.0095034Z   POSTGRES_PORT: 5432
2024-02-20T18:53:34.0095452Z   PGHOST: localhost
2024-02-20T18:53:34.0095809Z   PGUSER: postgres
2024-02-20T18:53:34.0096273Z   RAILS_ENV: test
2024-02-20T18:53:34.0096658Z   KNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC: 
2024-02-20T18:53:34.0097060Z   KNAPSACK_PRO_CI_NODE_TOTAL: 6
2024-02-20T18:53:34.0097526Z   KNAPSACK_PRO_CI_NODE_INDEX: 0
2024-02-20T18:53:34.0097984Z   KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES: true
2024-02-20T18:53:34.0098606Z   KNAPSACK_PRO_LOG_LEVEL: info
2024-02-20T18:53:34.0099219Z   KNAPSACK_PRO_TEST_FILE_PATTERN: {spec/system/**{,/*/**}/*_spec.rb,spec/requests/**{,/*/**}/*_spec.rb}
2024-02-20T18:53:34.0099858Z   EVENTS_READ: true
2024-02-20T18:53:34.0100254Z ##[endgroup]
2024-02-20T18:53:39.8952741Z W, [2024-02-20T18:53:39.894841 #2305]  WARN -- : [knapsack_pro] GET https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/last
2024-02-20T18:53:39.8954876Z W, [2024-02-20T18:53:39.894911 #2305]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-20T18:53:39.8957399Z W, [2024-02-20T18:53:39.894931 #2305]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-20T18:53:39.8964051Z W, [2024-02-20T18:53:39.894960 #2305]  WARN -- : [knapsack_pro] Slow test files fallback behaviour started. We could not connect with Knapsack Pro API to fetch last CI build test files that are needed to determine slow test files. No test files will be split by test cases. It means all test files will be split by the whole test files as if split by test cases would be disabled https://knapsackpro.com/perma/ruby/split-by-test-examples
2024-02-20T18:53:43.7410769Z W, [2024-02-20T18:53:43.740652 #2305]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_distributions/subset
2024-02-20T18:53:43.7413442Z W, [2024-02-20T18:53:43.740706 #2305]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-20T18:53:43.7416134Z W, [2024-02-20T18:53:43.740723 #2305]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-20T18:53:43.7420523Z W, [2024-02-20T18:53:43.740777 #2305]  WARN -- : [knapsack_pro] Fallback mode started. We could not connect with Knapsack Pro API. Your tests will be executed based on directory names. Read more about fallback mode at https://knapsackpro.com/perma/ruby/fallback-mode
2024-02-20T18:53:43.7473475Z /opt/hostedtoolcache/Ruby/3.2.2/x64/bin/ruby -I/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/lib:/home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-support-3.12.1/lib /home/runner/work/human-essentials/human-essentials/vendor/bundle/ruby/3.2.0/gems/rspec-core-3.12.2/exe/rspec  --format documentation --format KnapsackPro::Formatters::TimeTracker --default-path spec "spec/requests/account_requests_spec.rb" "spec/requests/admin/organizations_requests_spec.rb" "spec/requests/audits_requests_spec.rb" "spec/requests/donation_sites_requests_spec.rb" "spec/requests/partners/children_requests_spec.rb" "spec/requests/partners/profiles_requests_spec.rb" "spec/requests/profiles_requests_spec.rb" "spec/requests/storage_locations_requests_spec.rb" "spec/system/account_system_spec.rb" "spec/system/admin/organizations_system_spec.rb" "spec/system/dashboard_system_spec.rb" "spec/system/kit_system_spec.rb" "spec/system/organization_system_spec.rb" "spec/system/partners/managing_requests_system_spec.rb" "spec/system/purchase_system_spec.rb" "spec/system/vendor_system_spec.rb"
2024-02-20T18:53:52.3121351Z 
2024-02-20T18:53:52.3122223Z Randomized with seed 45610
2024-02-20T18:53:53.3281676Z 
2024-02-20T18:53:53.3282472Z DonationSites
2024-02-20T18:53:53.3283494Z   while signed in
2024-02-20T18:53:53.3284549Z     GET #index
2024-02-20T18:53:53.3285544Z       html
2024-02-20T18:53:53.4140631Z         is expected to be successful
2024-02-20T18:53:53.4141791Z       csv
2024-02-20T18:53:53.4317850Z         is expected to be successful
2024-02-20T18:53:53.4318995Z 
2024-02-20T18:53:53.4319351Z Profiles
2024-02-20T18:53:53.4321704Z   GET #edit
2024-02-20T18:53:53.5398815Z     returns http success
2024-02-20T18:53:53.5399342Z   POST #update
2024-02-20T18:53:53.5400207Z     successful save
2024-02-20T18:53:53.5958331Z       update partner
2024-02-20T18:53:53.6414422Z       redirects to #show
2024-02-20T18:53:53.6415388Z     when updating an existing value to a blank value
2024-02-20T18:53:53.6949995Z       update partner
2024-02-20T18:53:53.7391549Z       should have blank values
2024-02-20T18:53:53.7392486Z 
2024-02-20T18:53:53.7392756Z Purchases
2024-02-20T18:53:53.7394670Z   while signed in as a normal user
2024-02-20T18:53:53.7395474Z     When visiting the index page
2024-02-20T18:53:53.7396340Z       In the middle of the year
2024-02-20T18:53:55.5784780Z         User sees total purchases value
2024-02-20T18:53:56.3202549Z         User sees purchased date column
2024-02-20T18:53:57.2166329Z         User can click to the new purchase form
2024-02-20T18:53:57.2167333Z       When filtering on the index page
2024-02-20T18:53:58.0419482Z         User can filter the #index by storage location
2024-02-20T18:53:58.8530422Z         User can filter the #index by vendor
2024-02-20T18:53:58.8531415Z         behaves like Date Range Picker
2024-02-20T18:53:58.8532567Z           when choosing a date range that only includes the previous week
2024-02-20T18:53:59.8024204Z             shows only 1 record
2024-02-20T18:53:59.8025287Z           when choosing 'Last Month'
2024-02-20T18:54:00.7752684Z             shows only 2 of the records
2024-02-20T18:54:00.7753676Z           when choosing 'All Time'
2024-02-20T18:54:01.7391111Z             shows all the records
2024-02-20T18:54:01.7392329Z     When visiting an existing purchase
2024-02-20T18:54:02.1831124Z       does not allow deletion of a purchase
2024-02-20T18:54:02.1832364Z     When creating a new purchase
2024-02-20T18:54:02.6866377Z       should not display inactive storage locations in dropdown
2024-02-20T18:54:02.6867161Z       via manual entry
2024-02-20T18:54:03.7378214Z         Does not include inactive items in the line item fields
2024-02-20T18:54:04.6198710Z         User can create a purchase using dollars decimal amount
2024-02-20T18:54:05.8503267Z         multiple line items for the same item type are accepted and combined on the backend
2024-02-20T18:54:06.9789398Z         User can create a purchase IN THE PAST
2024-02-20T18:54:08.0218783Z         User can create vendor from purchase
2024-02-20T18:54:08.0219477Z         when creating a purchase incorrectly
2024-02-20T18:54:09.0141945Z           items dropdown is still repopulated even if initial submission doesn't validate
2024-02-20T18:54:09.8396756Z           should display failure with error messages
2024-02-20T18:54:09.8398034Z       Editing purchase
2024-02-20T18:54:10.4998814Z         A user can view another organizations purchase
2024-02-20T18:54:11.0188467Z         A user can see purchased_from value
2024-02-20T18:54:11.0189111Z       via barcode entry
2024-02-20T18:54:12.2671748Z         a user can add items that do not yet have a barcode
2024-02-20T18:54:12.9743720Z         a user can add items via scanning them in by barcode
2024-02-20T18:54:13.8651874Z         User scan same barcode 2 times
2024-02-20T18:54:13.8652782Z   while signed in as an organization admin
2024-02-20T18:54:14.7343960Z     allows deletion of a purchase
2024-02-20T18:54:14.7344823Z 
2024-02-20T18:54:14.7345139Z Audits
2024-02-20T18:54:14.7346130Z   while signed in as an organization admin
2024-02-20T18:54:14.7347544Z     DELETE #destroy
2024-02-20T18:54:14.7348101Z       with valid params
2024-02-20T18:54:14.7798307Z         destroys the audit if the audit's status is `in_progress`
2024-02-20T18:54:14.8167801Z         destroys the audit if the audit's status is `confirms`
2024-02-20T18:54:14.8512410Z         can not destroy the audit if the audit's status is `finalized`
2024-02-20T18:54:14.8513393Z     GET #edit
2024-02-20T18:54:14.9136049Z       redirects to #index if the status of audit is not `in_progress`
2024-02-20T18:54:14.9761747Z       is successful if the status of audit is `in_progress`
2024-02-20T18:54:14.9762738Z     GET #show
2024-02-20T18:54:15.0279680Z       is successful
2024-02-20T18:54:15.0280324Z     POST #create
2024-02-20T18:54:15.0280907Z       with invalid params
2024-02-20T18:54:15.0831779Z         re-renders the 'new' template with an error message when an invalid storage location is given
2024-02-20T18:54:15.1215796Z         re-renders the 'new' template
2024-02-20T18:54:15.1594984Z         assigns a newly created but unsaved audit as @audit
2024-02-20T18:54:15.1595990Z       with valid params
2024-02-20T18:54:15.1972473Z         creates a new Audit
2024-02-20T18:54:15.2351700Z         creates a new Audit with status as `confirmed` if `confirm_audit` is passed as a param
2024-02-20T18:54:15.2719987Z         creates a new Audit with status as `in_progress` if `save_progress` is passed as a param
2024-02-20T18:54:15.3101489Z         assigns a newly created audit as @audit
2024-02-20T18:54:15.3478895Z         redirects to the #show after created audit
2024-02-20T18:54:15.3479682Z     GET #new
2024-02-20T18:54:15.3861465Z       is successful
2024-02-20T18:54:15.3862136Z     GET #index
2024-02-20T18:54:15.4414404Z       is successful
2024-02-20T18:54:15.4415153Z     POST #finalize
2024-02-20T18:54:15.5059296Z       sets the finalize status and saves an event
2024-02-20T18:54:15.5059977Z 
2024-02-20T18:54:15.5060586Z /partners/children
2024-02-20T18:54:15.5061268Z   GET #index
2024-02-20T18:54:15.5797379Z     should export CSV
2024-02-20T18:54:15.6391880Z     should render without any issues
2024-02-20T18:54:15.6392511Z 
2024-02-20T18:54:15.6393141Z User account management
2024-02-20T18:54:15.6394186Z   when not in staging
2024-02-20T18:54:16.5273920Z     should change an user name
2024-02-20T18:54:17.3898935Z     should change the email
2024-02-20T18:54:18.1476495Z     should fail when the email is invalid
2024-02-20T18:54:18.1477043Z   when in staging
2024-02-20T18:54:18.5993518Z     should display staging warning
2024-02-20T18:54:19.0592822Z     should not allow the user to change staging credentials
2024-02-20T18:54:19.0596404Z 
2024-02-20T18:54:19.0596626Z Dashboard
2024-02-20T18:54:19.0598202Z   With a new essentials bank
2024-02-20T18:54:47.0752120Z     displays the getting started guide until the steps are completed
2024-02-20T18:54:47.0753056Z   With an existing essentials bank
2024-02-20T18:54:47.0754139Z     Signage
2024-02-20T18:54:49.9841251Z       shows their organization name unless they have a logo set
2024-02-20T18:54:49.9842230Z     Purchases
2024-02-20T18:54:50.8797878Z       has a link to create a new purchase
2024-02-20T18:54:50.8799458Z       given 1 Purchase on 2022-02-19  (unless 'All Time'), 2 during 2022-02-20..2023-12-14, and 1 on 2023-12-15
2024-02-20T18:54:50.8800815Z         filtering to '' (February 20, 2022 - December 14, 2023)
2024-02-20T18:54:52.3142209Z           shows correct 2 Recent Purchase link(s)
2024-02-20T18:54:52.3143917Z       given 1 Purchase on 2024-02-18  (unless 'All Time'), 3 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-20T18:54:52.3145749Z         filtering to 'Yesterday'
2024-02-20T18:54:53.8397191Z           shows correct 3 Recent Purchase link(s)
2024-02-20T18:54:53.8399120Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-20T18:54:53.8400916Z         filtering to 'Last Month'
2024-02-20T18:54:55.2829595Z           shows correct 1 Recent Purchase link(s)
2024-02-20T18:54:55.2831187Z       given 1 Purchase on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-20T18:54:55.2832225Z         filtering to 'This Year'
2024-02-20T18:54:56.8160542Z           shows correct 3 Recent Purchase link(s)
2024-02-20T18:54:56.8161922Z       given 1 Purchase on 2024-01-21  (unless 'All Time'), 3 during 2024-01-22..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:54:56.8163285Z         filtering to 'Last 30 Days'
2024-02-20T18:54:58.2713383Z           shows correct 3 Recent Purchase link(s)
2024-02-20T18:54:58.2715017Z       given 1 Purchase on 2024-02-13  (unless 'All Time'), 3 during 2024-02-14..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:54:58.2716010Z         filtering to 'Last 7 Days'
2024-02-20T18:54:59.7368548Z           shows correct 3 Recent Purchase link(s)
2024-02-20T18:54:59.7370300Z       given 1 Purchase on 2024-02-19  (unless 'All Time'), 2 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:54:59.7371535Z         filtering to 'Today'
2024-02-20T18:55:01.1853654Z           shows correct 2 Recent Purchase link(s)
2024-02-20T18:55:01.1855428Z       given 1 Purchase on 2024-01-31  (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-20T18:55:01.1856866Z         filtering to 'This Month'
2024-02-20T18:55:04.5238191Z           shows correct 0 Recent Purchase link(s)
2024-02-20T18:55:04.5239150Z     Product Drives
2024-02-20T18:55:05.0928052Z       has a widget for product drive summary data
2024-02-20T18:55:05.0930037Z       given 1 Product Drive Donation on 2024-02-13 (unless 'All Time'), 4 during 2024-02-14..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:05.0931697Z         filtering to 'Last 7 Days'
2024-02-20T18:55:06.6365018Z           shows the correct total money raised
2024-02-20T18:55:08.1802102Z           shows 3 Recent Donation link(s)
2024-02-20T18:55:09.8305568Z           shows the correct total donations
2024-02-20T18:55:09.8307046Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-20T18:55:09.8308061Z         filtering to 'This Year'
2024-02-20T18:55:11.2353136Z           shows 1 Recent Donation link(s)
2024-02-20T18:55:12.5893923Z           shows the correct total donations
2024-02-20T18:55:13.9582544Z           shows the correct total money raised
2024-02-20T18:55:13.9584647Z       given 1 Product Drive Donation on 2024-01-21 (unless 'All Time'), 4 during 2024-01-22..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:13.9586170Z         filtering to 'Last 30 Days'
2024-02-20T18:55:15.4937132Z           shows the correct total donations
2024-02-20T18:55:17.0362807Z           shows 3 Recent Donation link(s)
2024-02-20T18:55:18.6291979Z           shows the correct total money raised
2024-02-20T18:55:18.6293796Z       given 1 Product Drive Donation on 2024-02-19 (unless 'All Time'), 4 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:18.6295440Z         filtering to 'Today'
2024-02-20T18:55:20.1508782Z           shows the correct total money raised
2024-02-20T18:55:21.6704906Z           shows the correct total donations
2024-02-20T18:55:23.2266025Z           shows 3 Recent Donation link(s)
2024-02-20T18:55:23.2268146Z       given 1 Product Drive Donation on 2023-12-31 (unless 'All Time'), 1 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-20T18:55:23.2269569Z         filtering to 'Last Month'
2024-02-20T18:55:24.6244986Z           shows the correct total donations
2024-02-20T18:55:26.0340605Z           shows the correct total money raised
2024-02-20T18:55:27.5714578Z           shows 1 Recent Donation link(s)
2024-02-20T18:55:27.5716060Z       given 1 Product Drive Donation on 2024-02-18 (unless 'All Time'), 1 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-20T18:55:27.5716986Z         filtering to 'Yesterday'
2024-02-20T18:55:28.9767681Z           shows the correct total money raised
2024-02-20T18:55:30.3557378Z           shows 1 Recent Donation link(s)
2024-02-20T18:55:31.8047560Z           shows the correct total donations
2024-02-20T18:55:31.8048727Z       Product drive behaviour with Mixed Donation types
2024-02-20T18:55:32.5642172Z         only shows product drive donations as product drive donations
2024-02-20T18:55:33.2719979Z         only counts product drive donations for product drive
2024-02-20T18:55:33.9710732Z         only counts product drive money raised
2024-02-20T18:55:33.9715048Z       given 1 Product Drive Donation on 2022-02-19 (unless 'All Time'), 0 during 2022-02-20..2023-11-10, and 1 on 2023-11-11
2024-02-20T18:55:33.9716288Z         filtering to '' (February 20, 2022 - November 10, 2023)
2024-02-20T18:55:35.3122926Z           shows the correct total money raised
2024-02-20T18:55:36.6991204Z           shows the correct total donations
2024-02-20T18:55:40.0699439Z           shows 0 Recent Donation link(s)
2024-02-20T18:55:40.0701319Z       given 1 Product Drive Donation on 2024-01-31 (unless 'All Time'), 0 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-20T18:55:40.0702959Z         filtering to 'This Month'
2024-02-20T18:55:41.3955078Z           shows the correct total money raised
2024-02-20T18:55:44.7797018Z           shows 0 Recent Donation link(s)
2024-02-20T18:55:46.1740148Z           shows the correct total donations
2024-02-20T18:55:46.1741117Z     Distributions
2024-02-20T18:55:47.0927071Z       has a link to create a new distribution
2024-02-20T18:55:47.0928832Z       given 1 Distribution on 2024-01-21  (unless 'All Time'), 0 during 2024-01-22..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:47.0930160Z         filtering to 'Last 30 Days'
2024-02-20T18:55:50.5199134Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-20T18:55:50.5200647Z       given 1 Distribution on 1999-12-31  (unless 'All Time'), 1 during 2000-01-01..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:50.5201763Z         filtering to 'All Time'
2024-02-20T18:55:51.9017361Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-20T18:55:51.9019431Z       given 1 Distribution on 2024-02-18  (unless 'All Time'), 4 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-20T18:55:51.9020736Z         filtering to 'Yesterday'
2024-02-20T18:55:53.3746431Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-20T18:55:53.3748439Z       given 1 Distribution on 2024-02-19  (unless 'All Time'), 2 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:53.3749693Z         filtering to 'Today'
2024-02-20T18:55:54.8069726Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-20T18:55:54.8071527Z       given 1 Distribution on 2024-02-13  (unless 'All Time'), 1 during 2024-02-14..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:55:54.8072756Z         filtering to 'Last 7 Days'
2024-02-20T18:55:56.2347023Z           shows the correct total and 1 Recent Distribution link(s)
2024-02-20T18:55:56.2348940Z       given 1 Distribution on 2024-01-31  (unless 'All Time'), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-20T18:55:56.2350580Z         filtering to 'This Month'
2024-02-20T18:55:57.6760622Z           shows the correct total and 3 Recent Distribution link(s)
2024-02-20T18:55:57.6762521Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 2 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-20T18:55:57.6764046Z         filtering to 'This Year'
2024-02-20T18:55:59.1041449Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-20T18:55:59.1043630Z       given 1 Distribution on 2022-02-19  (unless 'All Time'), 2 during 2022-02-20..2023-11-07, and 1 on 2023-11-08
2024-02-20T18:55:59.1045695Z         filtering to '' (February 20, 2022 - November 7, 2023)
2024-02-20T18:56:00.5799822Z           shows the correct total and 2 Recent Distribution link(s)
2024-02-20T18:56:00.5802425Z       given 1 Distribution on 2023-12-31  (unless 'All Time'), 0 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-20T18:56:00.5803545Z         filtering to 'Last Month'
2024-02-20T18:56:04.0887958Z           shows the correct total and 0 Recent Distribution link(s)
2024-02-20T18:56:04.0889093Z     Donations
2024-02-20T18:56:05.0019929Z       has a link to create a new donation
2024-02-20T18:56:05.0021874Z       given 1 Donation on 2024-02-18 (only if a valid date), 0 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-20T18:56:05.0023123Z         filtering to 'Yesterday'
2024-02-20T18:56:08.3616649Z           shows the correct total and 0 Recent Donation link(s)
2024-02-20T18:56:08.3618559Z       given 1 Donation on 2024-02-19 (only if a valid date), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:08.3619866Z         filtering to 'Today'
2024-02-20T18:56:09.7404268Z           shows the correct total and 1 Recent Donation link(s)
2024-02-20T18:56:09.7405945Z       given 1 Donation on 2023-12-31 (only if a valid date), 0 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-20T18:56:09.7407058Z         filtering to 'This Year'
2024-02-20T18:56:13.0725589Z           shows the correct total and 0 Recent Donation link(s)
2024-02-20T18:56:13.0727345Z       given 1 Donation on 2024-01-21 (only if a valid date), 1 during 2024-01-22..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:13.0728495Z         filtering to 'Last 30 Days'
2024-02-20T18:56:14.4470863Z           shows the correct total and 1 Recent Donation link(s)
2024-02-20T18:56:14.4472534Z       given 1 Donation on 2024-02-13 (only if a valid date), 0 during 2024-02-14..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:14.4473387Z         filtering to 'Last 7 Days'
2024-02-20T18:56:17.7965705Z           shows the correct total and 0 Recent Donation link(s)
2024-02-20T18:56:17.7967176Z       given 1 Donation on 2022-02-19 (only if a valid date), 1 during 2022-02-20..2023-11-12, and 1 on 2023-11-13
2024-02-20T18:56:17.7970302Z         filtering to '' (February 20, 2022 - November 12, 2023)
2024-02-20T18:56:19.1912341Z           shows the correct total and 1 Recent Donation link(s)
2024-02-20T18:56:19.1914115Z       given 1 Donation on 2023-12-31 (only if a valid date), 3 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-20T18:56:19.1915379Z         filtering to 'Last Month'
2024-02-20T18:56:20.6831296Z           shows the correct total and 3 Recent Donation link(s)
2024-02-20T18:56:20.6833088Z       given 1 Donation on 2024-01-31 (only if a valid date), 3 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-20T18:56:20.6834376Z         filtering to 'This Month'
2024-02-20T18:56:22.1928684Z           shows the correct total and 3 Recent Donation link(s)
2024-02-20T18:56:22.1929849Z     Inventory Totals
2024-02-20T18:56:22.1930845Z       Summary
2024-02-20T18:56:22.9007705Z         displays the on-hand totals
2024-02-20T18:56:22.9008460Z         when constrained to date range
2024-02-20T18:56:23.9258377Z           does not change
2024-02-20T18:56:23.9262042Z     Manufacturer Donations
2024-02-20T18:56:24.5259488Z       has a link to create a new donation
2024-02-20T18:56:24.5261325Z       given 1 Manufacturer donating on 2024-02-19  (unless 'All Time'), 1 during 2024-02-20..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:24.5262517Z         filtering to 'Today'
2024-02-20T18:56:25.9738922Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-20T18:56:25.9740938Z       given 1 Manufacturer donating on 2024-01-21  (unless 'All Time'), 9 during 2024-01-22..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:25.9742203Z         filtering to 'Last 30 Days'
2024-02-20T18:56:28.6350346Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-20T18:56:28.6352220Z       given 1 Manufacturer donating on 2024-01-31  (unless 'All Time'), 1 during 2024-02-01..2024-02-29, and 1 on 2024-03-01
2024-02-20T18:56:28.6353257Z         filtering to 'This Month'
2024-02-20T18:56:30.1095447Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-20T18:56:30.1097595Z       given 1 Manufacturer donating on 1999-12-31  (unless 'All Time'), 2 during 2000-01-01..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:30.1098931Z         filtering to 'All Time'
2024-02-20T18:56:31.6285639Z           shows the correct total and 3 Top Manufacturer Donation link(s)
2024-02-20T18:56:31.6288051Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 4 during 2024-01-01..2024-01-31, and 1 on 2024-02-01
2024-02-20T18:56:31.6289365Z         filtering to 'Last Month'
2024-02-20T18:56:33.4662145Z           shows the correct total and 6 Top Manufacturer Donation link(s)
2024-02-20T18:56:33.4663917Z       given 1 Manufacturer donating on 2022-02-19  (unless 'All Time'), 0 during 2022-02-20..2023-11-18, and 1 on 2023-11-19
2024-02-20T18:56:33.4665175Z         filtering to '' (February 20, 2022 - November 18, 2023)
2024-02-20T18:56:34.8491440Z           shows the correct total and 2 Top Manufacturer Donation link(s)
2024-02-20T18:56:34.8493532Z       given 1 Manufacturer donating on 2024-02-13  (unless 'All Time'), 2 during 2024-02-14..2024-02-20, and 1 on 2024-02-21
2024-02-20T18:56:34.8494399Z         filtering to 'Last 7 Days'
2024-02-20T18:56:36.4354074Z           shows the correct total and 4 Top Manufacturer Donation link(s)
2024-02-20T18:56:36.4355935Z       given 1 Manufacturer donating on 2023-12-31  (unless 'All Time'), 3 during 2024-01-01..2024-12-31, and 1 on 2025-01-01
2024-02-20T18:56:36.4356944Z         filtering to 'This Year'
2024-02-20T18:56:38.0215629Z           shows the correct total and 5 Top Manufacturer Donation link(s)
2024-02-20T18:56:38.0217300Z       given 1 Manufacturer donating on 2024-02-18  (unless 'All Time'), 8 during 2024-02-19..2024-02-19, and 1 on 2024-02-20
2024-02-20T18:56:38.0218351Z         filtering to 'Yesterday'
2024-02-20T18:56:40.3345551Z           shows the correct total and 10 Top Manufacturer Donation link(s)
2024-02-20T18:56:40.3346773Z 
2024-02-20T18:56:40.3353273Z Kit management
2024-02-20T18:56:41.2357877Z   can create a new kit as a user with the proper quantity
2024-02-20T18:56:42.6865569Z   can allocate and deallocate quantity per storage location from kit index
2024-02-20T18:56:43.2384338Z   should not display inactive storage locations under allocations
2024-02-20T18:56:43.2385676Z   when there is not enough quantity of the items contained in the kit on-hand
2024-02-20T18:56:44.3134859Z     will not change quantity amounts when allocating
2024-02-20T18:56:44.3135804Z   when there is no kit quantity
2024-02-20T18:56:45.4351753Z     will not change quantity amounts when deallocating
2024-02-20T18:56:45.4352595Z 
2024-02-20T18:56:45.4352881Z Vendor
2024-02-20T18:56:45.4354984Z   when editing an existing vendor
2024-02-20T18:56:46.1984281Z     can update the contact info for a vendor as a user
2024-02-20T18:56:46.9460284Z     does not update a vendor with empty attributes
2024-02-20T18:56:46.9461397Z   when creating a new vendor
2024-02-20T18:56:47.7132544Z     can create a new vendor instance as a user
2024-02-20T18:56:48.4135031Z     cannot add a new vendor instance with empty attributes
2024-02-20T18:56:48.4136020Z   When a user views the index page
2024-02-20T18:56:48.8878171Z     should have the vendor names in alphabetical order
2024-02-20T18:56:48.8878991Z   When vendor have purchases associated with them already
2024-02-20T18:56:49.4969324Z     can have a single vendor show semi-detailed stats about purchases
2024-02-20T18:56:50.0858880Z     can have existing vendors show in the #index with some summary stats
2024-02-20T18:56:50.0859683Z 
2024-02-20T18:56:50.0859896Z Organization management
2024-02-20T18:56:50.0860838Z   while signed in as a normal user
2024-02-20T18:56:50.5608619Z     can see summary details about the organization as a user
2024-02-20T18:56:51.0228719Z     cannot see 'Make user' button for admins
2024-02-20T18:56:51.0229388Z   while signed in as an organization admin
2024-02-20T18:56:51.5129220Z     can re-invite a user to an organization after 7 days
2024-02-20T18:56:52.4920293Z     can re-activate a user in the organization
2024-02-20T18:56:53.4418639Z     can deactivate a user in the organization
2024-02-20T18:56:53.9328548Z     can see 'Make user' button for admins
2024-02-20T18:56:54.8553285Z     can add a new user to an organization
2024-02-20T18:56:54.8554186Z     Viewing the organization
2024-02-20T18:56:55.3812211Z       can view organization details
2024-02-20T18:56:55.3813062Z     Editing the organization
2024-02-20T18:56:56.3873065Z       can enable if the org uses single step invite and approve partner process
2024-02-20T18:56:57.4198522Z       can select if the org distributes essentials monthly
2024-02-20T18:56:58.2746270Z       can set a default storage location on the organization
2024-02-20T18:56:59.6875664Z       can select and deselect Required Partner Fields
2024-02-20T18:57:00.6535101Z       can disable if the org does NOT use single step invite and approve partner process
2024-02-20T18:57:01.8112748Z       is prompted with placeholder text and a more helpful error message to ensure correct URL format as a user
2024-02-20T18:57:02.7010793Z       can set the NDBN Member ID
2024-02-20T18:57:03.6724253Z       can select if the org repackages essentials
2024-02-20T18:57:04.5185657Z       can set a reminder and a deadline day
2024-02-20T18:57:05.4673353Z       can select if the org shows year-to-date values on the distribution printout
2024-02-20T18:57:05.4674048Z 
2024-02-20T18:57:05.4674325Z Managing requests
2024-02-20T18:57:05.4675574Z   creating a individuals/family request
2024-02-20T18:57:05.4676443Z     GIVEN a partner user is permitted to make a request
2024-02-20T18:57:05.4677287Z       WHEN they create a request properly
2024-02-20T18:57:05.4678642Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-20T18:57:07.5671781Z           AND the partner_user can view the details of the created individuals request in a seperate page
2024-02-20T18:57:07.5672861Z       WHEN they create a request inproperly
2024-02-20T18:57:08.4695934Z         should show an error message with the instructions
2024-02-20T18:57:08.4696948Z   creating a request
2024-02-20T18:57:08.4697726Z     GIVEN a partner user is permitted to make a request
2024-02-20T18:57:08.4699098Z       WHEN they create a request with only a comment
2024-02-20T18:57:09.4349436Z         should be created without any issue
2024-02-20T18:57:09.4350507Z       WHEN they create a request inproperly by not inputting anything
2024-02-20T18:57:10.3222958Z         should show an error message with the instructions
2024-02-20T18:57:10.3223705Z       WHEN they create a request properly
2024-02-20T18:57:10.3224644Z         THEN a request records will be created and the partner will be notified via flash message on the dashboard
2024-02-20T18:57:12.5965865Z           AND the partner_user can view the details of the created request in a seperate page
2024-02-20T18:57:12.5967749Z 
2024-02-20T18:57:12.5969424Z Admin Organization Management
2024-02-20T18:57:12.5970527Z   While signed in as an Administrative User with no organization (super admin no org)
2024-02-20T18:57:14.5368704Z     creates a new organization
2024-02-20T18:57:14.5369680Z   While signed in as an Administrative User (super admin)
2024-02-20T18:57:16.4000673Z     creates a new organization
2024-02-20T18:57:17.4491356Z     filters by organizations by name in organizations index page
2024-02-20T18:57:18.6941450Z     can view organization details
2024-02-20T18:57:18.6943149Z 
2024-02-20T18:57:18.6943520Z Admin::Organizations
2024-02-20T18:57:18.6947195Z   When logged in as a non-admin user
2024-02-20T18:57:18.6948398Z     POST #create
2024-02-20T18:57:18.7122622Z       redirects
2024-02-20T18:57:18.7123405Z     GET #index
2024-02-20T18:57:18.7254621Z       redirects
2024-02-20T18:57:18.7255538Z     GET #edit
2024-02-20T18:57:18.7386802Z       redirects
2024-02-20T18:57:18.7387469Z     GET #new
2024-02-20T18:57:18.7512258Z       redirects
2024-02-20T18:57:18.7513236Z     PUT #update
2024-02-20T18:57:18.7638106Z       redirects
2024-02-20T18:57:18.7638766Z   When logged in as a super admin
2024-02-20T18:57:18.7641108Z     GET #new
2024-02-20T18:57:18.8018419Z       returns http success
2024-02-20T18:57:18.8019528Z       when given a token that matches a account request that has already been processed
2024-02-20T18:57:19.0215431Z         should render new with a flash error message
2024-02-20T18:57:19.0216860Z       when given a valid account request token in the query parameters
2024-02-20T18:57:19.0815169Z         should render new with pre populate input fields from the account_request
2024-02-20T18:57:19.0816416Z     DELETE #destroy
2024-02-20T18:57:19.4524114Z       redirects
2024-02-20T18:57:19.4525019Z     GET #index
2024-02-20T18:57:19.4840008Z       returns http success
2024-02-20T18:57:19.4840796Z     GET #show
2024-02-20T18:57:19.6932670Z       returns http success
2024-02-20T18:57:19.6933534Z     PUT #update
2024-02-20T18:57:19.7119639Z       redirect
2024-02-20T18:57:19.7120364Z     POST #create
2024-02-20T18:57:19.7121064Z       with invalid params
2024-02-20T18:57:19.7536396Z         does not create an organization and renders #create with an error message
2024-02-20T18:57:19.7537348Z       with valid params
2024-02-20T18:57:19.9654541Z         creates an organization and redirects to #index
2024-02-20T18:57:19.9655689Z     DELETE #destroy
2024-02-20T18:57:19.9656278Z       with a valid organization id
2024-02-20T18:57:20.4674325Z         redirects to #index
2024-02-20T18:57:20.4674997Z     PATCH #update
2024-02-20T18:57:20.4675903Z       with a valid update
2024-02-20T18:57:20.6529742Z         redirects to #index
2024-02-20T18:57:20.6530508Z       with an invalid update
2024-02-20T18:57:20.8638204Z         redirects to #edit with an error message
2024-02-20T18:57:21.0697334Z         returns http success
2024-02-20T18:57:21.0697962Z     GET #edit
2024-02-20T18:57:21.2692553Z       returns http success
2024-02-20T18:57:21.2693747Z 
2024-02-20T18:57:21.2693983Z /account_requests
2024-02-20T18:57:21.2695579Z   GET #received
2024-02-20T18:57:21.2696522Z     when given a valid token
2024-02-20T18:57:21.2854166Z       should render the received template
2024-02-20T18:57:21.2854891Z     when given a invalid token
2024-02-20T18:57:21.2912196Z       should render a error that says that is code provided is invalid
2024-02-20T18:57:21.2912904Z   GET #confirm
2024-02-20T18:57:21.2913715Z     when given a valid token
2024-02-20T18:57:21.3079203Z       should the update confirmed_at on the account_request, queue confirmation email and render confirm template
2024-02-20T18:57:21.3080342Z     when given a token that has already been confirmed
2024-02-20T18:57:21.4981405Z       should render a error that says that is code provided is invalid
2024-02-20T18:57:21.4982437Z     when given a invalid token
2024-02-20T18:57:21.5040879Z       should render a error that says that is code provided is invalid
2024-02-20T18:57:21.5041896Z   GET #confirmation
2024-02-20T18:57:21.5042549Z     when given a invalid token
2024-02-20T18:57:21.5102702Z       should render a error that says that is code provided is invalid
2024-02-20T18:57:21.5103647Z     when given a valid token
2024-02-20T18:57:21.5241153Z       should render the confirmation template
2024-02-20T18:57:21.5242305Z     when given a token that has already been confirmed
2024-02-20T18:57:21.7041338Z       should render a error that says that is code provided is invalid
2024-02-20T18:57:21.7042351Z   POST #create
2024-02-20T18:57:21.7042947Z     with invalid parameters
2024-02-20T18:57:21.7262044Z       does not create a new AccountRequest
2024-02-20T18:57:21.7424957Z       renders a successful response (i.e. to display the 'new' template)
2024-02-20T18:57:21.7426243Z     with valid parameters
2024-02-20T18:57:21.7552569Z       creates a new AccountRequest
2024-02-20T18:57:21.7666191Z       delivers the confirmation email via default queue
2024-02-20T18:57:21.7788779Z       redirects to the created account_request confirmation
2024-02-20T18:57:21.7790167Z   GET #new
2024-02-20T18:57:21.7897617Z     renders a successful response
2024-02-20T18:57:21.7899393Z 
2024-02-20T18:57:21.7899731Z StorageLocations
2024-02-20T18:57:21.7900928Z   While signed in
2024-02-20T18:57:21.7903263Z     GET #show
2024-02-20T18:57:21.7904390Z       csv
2024-02-20T18:57:21.8445694Z         should be successful
2024-02-20T18:57:21.8446390Z       html
2024-02-20T18:57:21.9118333Z         should return a correct response
2024-02-20T18:57:21.9119189Z         with version date set
2024-02-20T18:57:21.9119877Z           with a version found
2024-02-20T18:57:21.9974332Z             should show the version specified
2024-02-20T18:57:21.9976106Z           with no version found
2024-02-20T18:57:22.0763375Z             should show N/A
2024-02-20T18:57:22.0764502Z     PUT #reactivate
2024-02-20T18:57:22.0941085Z       undiscards
2024-02-20T18:57:22.1154596Z     GET #edit
2024-02-20T18:57:22.5034750Z       returns http success
2024-02-20T18:57:22.5035469Z     POST #import_csv
2024-02-20T18:57:22.5036199Z       with a csv file
2024-02-20T18:57:22.5206097Z         redirects
2024-02-20T18:57:22.5259421Z         invokes .import_csv
2024-02-20T18:57:22.5417223Z         presents a flash notice message
2024-02-20T18:57:22.5417834Z       csv file with wrong headers
2024-02-20T18:57:22.5548076Z         presents a flash error message
2024-02-20T18:57:22.5671545Z         redirects
2024-02-20T18:57:22.5672090Z       without a csv file
2024-02-20T18:57:22.5788691Z         redirects to :index
2024-02-20T18:57:22.5903383Z         presents a flash error message
2024-02-20T18:57:22.5904086Z     GET #inventory
2024-02-20T18:57:22.5905010Z       without any overrides
2024-02-20T18:57:22.6447285Z         returns a collection that only includes items at the storage location
2024-02-20T18:57:22.6448148Z       when also including omitted items
2024-02-20T18:57:22.6931222Z         returns a collection that also includes all items, but with zeroed quantities
2024-02-20T18:57:22.7407402Z         contains a collection of ducktyped entries that respond the same
2024-02-20T18:57:22.7408283Z       when also including inactive items
2024-02-20T18:57:22.8055322Z         returns a collection that also includes items that have been deactivated
2024-02-20T18:57:22.8056165Z     GET #index
2024-02-20T18:57:22.8058725Z       csv
2024-02-20T18:57:22.9039512Z         includes headers followed by alphabetized item names
2024-02-20T18:57:22.9217694Z         succeeds
2024-02-20T18:57:22.9218139Z       html
2024-02-20T18:57:22.9562662Z         succeeds
2024-02-20T18:57:22.9563447Z         with inactive locations
2024-02-20T18:57:22.9910414Z           does not includes the inactive location
2024-02-20T18:57:22.9911169Z           with include_inactive_locations
2024-02-20T18:57:23.0264732Z             includes the inactive location
2024-02-20T18:57:23.0265694Z     GET #new
2024-02-20T18:57:23.0565149Z       returns http success
2024-02-20T18:57:23.0567375Z     GET #destroy
2024-02-20T18:57:23.0811761Z       redirects to #index
2024-02-20T18:57:23.0812339Z     Looking at a different organization
2024-02-20T18:57:23.2540018Z       redirects the user to the sign-in page for CRUD actions
2024-02-20T18:57:23.2540630Z     PUT #deactivate
2024-02-20T18:57:23.2725753Z       discards
2024-02-20T18:57:23.2726205Z       with inventory
2024-02-20T18:57:23.3173107Z         does not discard
2024-02-20T18:57:23.3173912Z   While not signed in
2024-02-20T18:57:23.3233101Z     redirects the user to the sign-in page for CRUD actions
2024-02-20T18:57:23.3233800Z 
2024-02-20T18:57:23.3234077Z /partners/profiles
2024-02-20T18:57:23.3235450Z   GET #show
2024-02-20T18:57:23.3860206Z     displays the partner
2024-02-20T18:57:23.4380774Z     shows correct values for yes/no buttons
2024-02-20T18:57:23.4381442Z   PUT #update
2024-02-20T18:57:23.4931259Z     updates the partner and profile
2024-02-20T18:57:23.4931874Z     with no social media
2024-02-20T18:57:23.5951412Z       shows an error
2024-02-20T18:57:23.5952087Z     when updating an existing value to a blank value
2024-02-20T18:57:23.6512683Z       does store N/A in the database
2024-02-20T18:57:23.7025771Z       updates the partner profile attribute to a blank value
2024-02-20T18:57:23.7535152Z       does not update other partner profile attributes to blank
2024-02-20T18:57:23.7535887Z   GET #edit
2024-02-20T18:57:23.8391950Z     has "Yes" radio button value when value is true
2024-02-20T18:57:23.9234913Z     displays the partner
2024-02-20T18:57:24.0071959Z     does not have default radio button value when value is nil
2024-02-20T18:57:24.0992651Z     has "No" radio button value when value is false
2024-02-20T18:57:24.1209019Z W, [2024-02-20T10:57:24.120686 #2359]  WARN -- : [knapsack_pro] POST https://api-disabled-for-fork.knapsackpro.com/v1/build_subsets
2024-02-20T18:57:24.1210769Z W, [2024-02-20T10:57:24.120731 #2359]  WARN -- : [knapsack_pro] Request failed due to:
2024-02-20T18:57:24.1213011Z W, [2024-02-20T10:57:24.120755 #2359]  WARN -- : [knapsack_pro] #<SocketError: Failed to open TCP connection to api-disabled-for-fork.knapsackpro.com:443 (getaddrinfo: Name or service not known)>
2024-02-20T18:57:24.1215653Z W, [2024-02-20T10:57:24.120786 #2359]  WARN -- : [knapsack_pro] Time execution report was not saved on Knapsack Pro API server due to connection problem.
2024-02-20T18:57:24.1216840Z 
2024-02-20T18:57:24.1217233Z Finished in 3 minutes 31.8 seconds (files took 8.34 seconds to load)
2024-02-20T18:57:24.1218000Z 235 examples, 0 failures
2024-02-20T18:57:24.1220677Z 
2024-02-20T18:57:24.1221178Z Randomized with seed 45610
2024-02-20T18:57:24.1221518Z 
2024-02-20T18:57:24.4186959Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 3820 / 6405 LOC (59.64%) covered.
2024-02-20T18:57:24.9300907Z Coverage report generated for RSpec to /home/runner/work/human-essentials/human-essentials/coverage. 38 / 10654 LOC (0.36%) covered.
